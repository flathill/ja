<!DOCTYPE html>
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="generator" content="AsciiDoc 10.2.1" />
<title>Proxmox VE 管理ガイド</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overridden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>

<style type="text/css">
div #toc {
    width: 19em;
    font-family: sans;
    border-right: 3px solid gainsboro;
}
.book, .article {
    margin-left: 22em
}
div #toc a:link, div #toc a:visited {
    color: black;
    text-decoration: none;
}
div #toc a:hover {
    text-decoration: underline;
}
div .toclevel1 {
    font-size: 1.1em;
    margin-bottom: 0.3em;
}

.monospaced, code, pre {
    overflow-wrap: break-word;
}
img {
    max-width: 100%;
}

@media only screen and (min-width: 85em) {
div #toc {
    width: 22em
}
.book, .article {
    margin-left: 25em
}
div .toclevel1 {
    font-size: 1.2em;
}
}
</style>

<style type="text/css">
:root {
    /* pre-defined colors */
    --pdt-grey-950: hsl(0deg, 0%, 95%);
    --pdt-grey-750: hsl(0deg, 0%, 75%);
    --pdt-grey-400: hsl(0deg, 0%, 40%);
    --pdt-grey-250: hsl(0deg, 0%, 25%);
    --pdt-grey-150: hsl(0deg, 0%, 15%);
    --pdt-grey-100: hsl(0deg, 0%, 10%);
    --pdt-primary-850: hsl(205deg, 100%, 85%);
    --pdt-primary-800: hsl(205deg, 100%, 80%);
    --pdt-primary-700: hsl(205deg, 100%, 70%);
    --pdt-primary-250: hsl(205deg, 100%, 25%);
    --pdt-secondary-850: hsl(250deg, 100%, 85%);
}

#header > h1 > .image > img {
    max-width: 100%;
}

/* Avoid serif font and increase font-size from 16px to 18px. Makes it more similar to PBS docs */
body, p {
    font-family: Open Sans, sans-serif;
    font-size: 18px;
}

/* adjust admonition block spacing. this allows for a background on
 * admonition blocks that doesn't make the elements look to tightly
 * spaced.
 */
div.admonitionblock {
    border-radius: 3px;
    margin: 1.5em 0;
    padding: 0.5em 10% 0.5em 0.5em;
}

div.admonitionblock td.icon {
    padding-right: 0.5em;
}

div.admonitionblock td.icon > img {
    box-sizing: border-box;
    padding: 0.15em;
}

th.tableblock, td.tableblock {
    border-color: #527bbd80;
}

/* Fine-tune headings a bit */
h4 {
  font-size: 1.1em;
}
h5 {
  font-size: 1.05em;
}
h6 {
  font-size: 1.0em;
}

/* Support for heading anchor links */
h3 {
    border-bottom: unset;
}

h3 > span {
    display: inline-block;
    border-bottom: 2px solid silver;
}

a, a:visited {
    color: var(--pdt-primary-250);
}

a.headerlink {
    color: var(--pdt-grey-750);
    padding: 0 4px;
    text-decoration: none;
    visibility: hidden;
}

/* add it as an pseudo-element, so that it does not show up in the ToC */
a.headerlink::after {
    content: '\00b6';
    text-decoration: none;
}

h1:hover > a.headerlink,
h2:hover > a.headerlink,
h3:hover > a.headerlink,
h4:hover > a.headerlink,
h5:hover > a.headerlink,
h6:hover > a.headerlink {
  visibility: visible;
}

/* Hide the TOC menu toggler by default */
.menu-toggler, .nav-toggle, .menu-overlay {
    display: none;
}

#toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    overflow-y: auto;
    padding: 0.5em;
    transition: transform 0.2s ease-in-out;
    z-index: 1000;
}

/* Mobile styles */
@media only screen and (max-width: 1000px) {
    /* Avoid overly big header author block */
    #header span {
        font-size: 1rem;
        line-height: 1rem;
    }

    /* Show toggle button on mobile */
    .nav-toggle {
        display: inline-block;
        position: fixed;
        top: 10px;
        left: 10px;
        z-index: 1001;
        background-color: var(--pdt-grey-100);
        color: var(--pdt-grey-950);
        opacity: 0.6;
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 2px;
        transition: left 0.2s ease-in-out;
        font-size: 0;
    }
    .no-toc.nav-toggle {
        display: none !important;
    }

    /* Hide sidebar by default on mobile */
    #toc {
        transform: translateX(-100%);
        line-height: 1.5em;
        overflow-x: auto;
    }
    #content, #header {
        font-size: 1.25em;
        line-height: 1.5em;
    }

    /* Adjust body margin for mobile */
    body {
        margin: 1em !important;
        max-width: 100% !important;
        overflow-wrap: break-word;
    }

    /* Show sidebar when checkbox is checked */
    .menu-toggler:checked ~ #header #toc {
        transform: translateX(0);
    }

    /* Show overlay when menu is open */
    .menu-toggler:checked ~ .menu-overlay {
        display: block;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        cursor: pointer;
        animation: fadeIn 0.2s;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    /* Change icon when open */
    .menu-toggler:checked ~ .nav-toggle::after {
        content: '✕';
    }
    .menu-toggler:not(:checked) ~ .nav-toggle::after {
        content: '☰';
    }

    .nav-toggle::after {
        display: block;
        font-size: 1.5rem;
    }
    .menu-toggler:checked ~ .nav-toggle {
        left: 24rem;
    }

}

/* barely useable at such small sizes but can only win here */
@media only screen and (max-width: 27rem) {
    body {
        margin: 0.5em !important;
    }
    #toc {
        font-size: 0.8em;
    }
    .menu-toggler:checked ~ .nav-toggle {
        left: 19rem;
    }
}


/* Dark mode theme */
@media screen and (prefers-color-scheme: dark) {
    :root {
        color-scheme: dark;
        --pdt-body-background: var(--pdt-grey-150);
        --pdt-text: var(--pdt-grey-950);
        --pdt-headline: var(--pdt-primary-800);
        --pdt-link: var(--pdt-primary-700);
        --pdt-highlighted-text: var(--pdt-primary-850);
        --pdt-background-sidebar: var(--pdt-grey-100);
        --pdt-background-listings: var(--pdt-grey-100);
        --pdt-border: var(--pdt-grey-400);
        --pdt-border-alt: var(--pdt-grey-250);
        --pdt-table-border: var(--pdt-grey-400);
        --pdt-background-admonition: var(--pdt-grey-250);
    }

    body {
        color: var(--pdt-text);
        background-color: var(--pdt-body-background);
    }

    a, a:visited {
        color: var(--pdt-link);
    }

    /* style headlines, titles etc. */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    thead,
    #author,
    #toctitle,
    div.title,
    td.hdlist1,
    caption.title,
    p.tableblock.header {
        color: var(--pdt-headline);
    }

    h1,
    h2,
    h3,
    #footer {
        border-color: var(--pdt-border);
    }

    /* formatted colored text */
    dt,
    em,
    pre,
    code,
    strong,
    .monospaced {
        color: var(--pdt-highlighted-text);
    }

    /* style the table of contents sidebar */
    div #toc {
        color: var(--pdt-text);
        background-color: var(--pdt-background-sidebar);
        border-color: var(--pdt-border-alt);
    }

    div #toc a:link,
    div #toc a:visited {
        color: var(--pdt-text);
    }

    /* reduce the brigthness of images a bit and make it reversable
     * through hovering over them.
     */
    .image > img {
        filter: brightness(90%);
    }

    .image > img:hover {
        filter: none;
    }

    /* tables */
    th.tableblock,
    td.tableblock,
    table.tableblock {
        border-color: var(--pdt-table-border);
    }

    div.quoteblock,
    div.verseblock {
        color: var(--pdt-text);
        border-color: var(--pdt-border);
    }

    /* listings (e.g. code snippet blocks) */
    div.listingblock > div.content {
        background-color: var(--pdt-background-listings);
        border-color: var(--pdt-border-alt);
    }

    /* admonition blocks (e.g. notes, warnings etc.) */
    div.admonitionblock {
        color: var(--pdt-text);
        background-color: var(--pdt-background-admonition);
    }

    div.admonitionblock td.content {
        border-color: var(--pdt-border);
    }

    /* makes the admonition icons appear a bit more consistent, by
     * adding a white background the shadows in the icons look
     * "correct"
     */
    div.admonitionblock td.icon > img {
        background-color: white;
        border-radius: 100%;
        filter: brightness(95%);
    }

    /* invert the logo */
    #header > h1 > .image > img {
        filter: invert(100%) hue-rotate(180deg) brightness(90%);
    }

    /* fixes the black text on unorderd lists */
    ul > li > * {
        color: var(--pdt-text);
    }

    .nav-toggle {
        background-color: var(--pdt-grey-250);
        color: var(--pdt-grey-950);
    }
}
</style>

<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
<script type="text/javascript">
var asciiDocTocOrig = asciidoc.toc;
asciidoc.toc = function(toclevel) {
    asciiDocTocOrig.call(asciidoc, toclevel);
    document.querySelectorAll('#toc a').forEach(link => {
        link.addEventListener('click', () => {
            document.getElementById('menu-toggler').checked = false;
        });
    });
    document.querySelector('.nav-toggle')?.classList.remove("no-toc");;
}
</script>
</head>
<body class="book" style="max-width:55em">
<input id="menu-toggler" type="checkbox" class="menu-toggler" />
<label for="menu-toggler" class="no-toc nav-toggle">☰</label>
<div id="header">
<h1><span class="image">
<img alt="./images/proxmox-logo.svg" title="Proxmox VE Administration Guide" src="data:image/svg+xml;base64,&#xD;&#xA;PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjwh&#xD;&#xA;LS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoK&#xD;&#xA;PHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHht&#xD;&#xA;bG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0&#xD;&#xA;cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJo&#xD;&#xA;dHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIw&#xD;&#xA;MDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5l&#xD;&#xA;dC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3Nj&#xD;&#xA;YXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB3aWR0aD0iODAwIgogICBoZWlnaHQ9IjEy&#xD;&#xA;OS4wMzkyOSIKICAgaWQ9InN2ZzMwMTgiCiAgIHZlcnNpb249IjEuMSIKICAgaW5rc2NhcGU6dmVy&#xD;&#xA;c2lvbj0iMC40OC4zLjEgcjk4ODYiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlByb3htb3hfbG9nb19z&#xD;&#xA;dGFuZGFyZF9oZXguc3ZnIgogICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9IlM6XFByb3htb3gt&#xD;&#xA;TG9nby1ORVdcU3RhbmRhcmQtTG9nb1xQTkdcUHJveG1veF9sb2dvX3N0YW5kYXJkX2hleF84MDBw&#xD;&#xA;eC5wbmciCiAgIGlua3NjYXBlOmV4cG9ydC14ZHBpPSI5MCIKICAgaW5rc2NhcGU6ZXhwb3J0LXlk&#xD;&#xA;cGk9IjkwIj4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNv&#xD;&#xA;bG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNp&#xD;&#xA;dHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBh&#xD;&#xA;Z2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMi44IgogICAgIGlua3NjYXBlOmN4PSIz&#xD;&#xA;NDkuMDE2MDIiCiAgICAgaW5rc2NhcGU6Y3k9IjY0LjUwNTI2NSIKICAgICBpbmtzY2FwZTpkb2N1&#xD;&#xA;bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAg&#xD;&#xA;IHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjI1NjAiCiAgICAg&#xD;&#xA;aW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTM3NyIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iLTgi&#xD;&#xA;CiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii04IgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6&#xD;&#xA;ZWQ9IjEiCiAgICAgc2hvd2d1aWRlcz0idHJ1ZSIKICAgICBpbmtzY2FwZTpndWlkZS1iYm94PSJ0&#xD;&#xA;cnVlIgogICAgIG9iamVjdHRvbGVyYW5jZT0iNCIKICAgICBncmlkdG9sZXJhbmNlPSIyIgogICAg&#xD;&#xA;IGd1aWRldG9sZXJhbmNlPSIxIgogICAgIGZpdC1tYXJnaW4tdG9wPSI1IgogICAgIGZpdC1tYXJn&#xD;&#xA;aW4tbGVmdD0iNSIKICAgICBmaXQtbWFyZ2luLXJpZ2h0PSI1IgogICAgIGZpdC1tYXJnaW4tYm90&#xD;&#xA;dG9tPSI1IgogICAgIGlua3NjYXBlOnNob3dwYWdlc2hhZG93PSJmYWxzZSIgLz4KICA8ZGVmcwog&#xD;&#xA;ICAgIGlkPSJkZWZzMzAyMCI+CiAgICA8Y2xpcFBhdGgKICAgICAgIGNsaXBQYXRoVW5pdHM9InVz&#xD;&#xA;ZXJTcGFjZU9uVXNlIgogICAgICAgaWQ9ImNsaXBQYXRoMzEwMi0xIj4KICAgICAgPHJlY3QKICAg&#xD;&#xA;ICAgICAgc3R5bGU9ImZpbGw6I2U1NzAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9k&#xD;&#xA;ZDtzdHJva2U6bm9uZSIKICAgICAgICAgaWQ9InJlY3QzMTA0LTciCiAgICAgICAgIHdpZHRoPSI0&#xD;&#xA;MzYuNDAxODkiCiAgICAgICAgIGhlaWdodD0iMzI2LjQwOTkxIgogICAgICAgICB4PSItODIuOTk5&#xD;&#xA;OTE2IgogICAgICAgICB5PSItMzQ3LjcxMzg3IgogICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgw&#xD;&#xA;LjczNDQ5MTYxLDAuNjc4NjE3NzYsLTAuNzg0OTcxOTMsMC42MTk1MzEzMywwLDApIiAvPgogICAg&#xD;&#xA;PC9jbGlwUGF0aD4KICAgIDxjbGlwUGF0aAogICAgICAgY2xpcFBhdGhVbml0cz0idXNlclNwYWNl&#xD;&#xA;T25Vc2UiCiAgICAgICBpZD0iY2xpcFBhdGg0NzQ2Ij4KICAgICAgPHJlY3QKICAgICAgICAgc3R5&#xD;&#xA;bGU9ImZpbGw6I2U1NzAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6&#xD;&#xA;bm9uZSIKICAgICAgICAgaWQ9InJlY3Q0NzQ4IgogICAgICAgICB3aWR0aD0iNDM2LjQwMTg5Igog&#xD;&#xA;ICAgICAgICBoZWlnaHQ9IjMyNi40MDk5MSIKICAgICAgICAgeD0iLTgyLjk5OTkxNiIKICAgICAg&#xD;&#xA;ICAgeT0iLTM0Ny43MTM4NyIKICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMC43MzQ0OTE2MSww&#xD;&#xA;LjY3ODYxNzc2LC0wLjc4NDk3MTkzLDAuNjE5NTMxMzMsMCwwKSIgLz4KICAgIDwvY2xpcFBhdGg+&#xD;&#xA;CiAgICA8Y2xpcFBhdGgKICAgICAgIGlkPSJjbGlwUGF0aDI5OTktMi0zLTQtMSIKICAgICAgIGNs&#xD;&#xA;aXBQYXRoVW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHBhdGgKICAgICAgICAgaW5rc2Nh&#xD;&#xA;cGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgICAgaWQ9InBhdGgzMDAxLTgtOC02LTAi&#xD;&#xA;CiAgICAgICAgIGQ9Im0gMCwxNDQwMCAxNDQwMCwwIEwgMTQ0MDAsMCAwLDAgMCwxNDQwMCB6IiAv&#xD;&#xA;PgogICAgPC9jbGlwUGF0aD4KICAgIDxjbGlwUGF0aAogICAgICAgY2xpcFBhdGhVbml0cz0idXNl&#xD;&#xA;clNwYWNlT25Vc2UiCiAgICAgICBpZD0iY2xpcFBhdGgzMTAyLTQiPgogICAgICA8cmVjdAogICAg&#xD;&#xA;ICAgICBzdHlsZT0iZmlsbDojZTU3MDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2Rk&#xD;&#xA;O3N0cm9rZTpub25lIgogICAgICAgICBpZD0icmVjdDMxMDQtMSIKICAgICAgICAgd2lkdGg9IjQz&#xD;&#xA;Ni40MDE4OSIKICAgICAgICAgaGVpZ2h0PSIzMjYuNDA5OTEiCiAgICAgICAgIHg9Ii04Mi45OTk5&#xD;&#xA;MTYiCiAgICAgICAgIHk9Ii0zNDcuNzEzODciCiAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDAu&#xD;&#xA;NzM0NDkxNjEsMC42Nzg2MTc3NiwtMC43ODQ5NzE5MywwLjYxOTUzMTMzLDAsMCkiIC8+CiAgICA8&#xD;&#xA;L2NsaXBQYXRoPgogICAgPGNsaXBQYXRoCiAgICAgICBjbGlwUGF0aFVuaXRzPSJ1c2VyU3BhY2VP&#xD;&#xA;blVzZSIKICAgICAgIGlkPSJjbGlwUGF0aDMwMDgiPgogICAgICA8cmVjdAogICAgICAgICBzdHls&#xD;&#xA;ZT0iZmlsbDojZTU3MDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTpu&#xD;&#xA;b25lIgogICAgICAgICBpZD0icmVjdDMwMTAiCiAgICAgICAgIHdpZHRoPSI0MzYuNDAxODkiCiAg&#xD;&#xA;ICAgICAgIGhlaWdodD0iMzI2LjQwOTkxIgogICAgICAgICB4PSItODIuOTk5OTE2IgogICAgICAg&#xD;&#xA;ICB5PSItMzQ3LjcxMzg3IgogICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgwLjczNDQ5MTYxLDAu&#xD;&#xA;Njc4NjE3NzYsLTAuNzg0OTcxOTMsMC42MTk1MzEzMywwLDApIiAvPgogICAgPC9jbGlwUGF0aD4K&#xD;&#xA;ICAgIDxjbGlwUGF0aAogICAgICAgY2xpcFBhdGhVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAg&#xD;&#xA;ICBpZD0iY2xpcFBhdGgzMTAyIj4KICAgICAgPHJlY3QKICAgICAgICAgc3R5bGU9ImZpbGw6I2U1&#xD;&#xA;NzAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIKICAgICAg&#xD;&#xA;ICAgaWQ9InJlY3QzMTA0IgogICAgICAgICB3aWR0aD0iNDM2LjQwMTg5IgogICAgICAgICBoZWln&#xD;&#xA;aHQ9IjMyNi40MDk5MSIKICAgICAgICAgeD0iLTgyLjk5OTkxNiIKICAgICAgICAgeT0iLTM0Ny43&#xD;&#xA;MTM4NyIKICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMC43MzQ0OTE2MSwwLjY3ODYxNzc2LC0w&#xD;&#xA;Ljc4NDk3MTkzLDAuNjE5NTMxMzMsMCwwKSIgLz4KICAgIDwvY2xpcFBhdGg+CiAgICA8Y2xpcFBh&#xD;&#xA;dGgKICAgICAgIGNsaXBQYXRoVW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgaWQ9ImNsaXBQ&#xD;&#xA;YXRoNDgxNCI+CiAgICAgIDxyZWN0CiAgICAgICAgIHN0eWxlPSJmaWxsOiNlNTcwMDA7ZmlsbC1v&#xD;&#xA;cGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmUiCiAgICAgICAgIGlkPSJyZWN0&#xD;&#xA;NDgxNiIKICAgICAgICAgd2lkdGg9IjQzNi40MDE4OSIKICAgICAgICAgaGVpZ2h0PSIzMjYuNDA5&#xD;&#xA;OTEiCiAgICAgICAgIHg9Ii04Mi45OTk5MTYiCiAgICAgICAgIHk9Ii0zNDcuNzEzODciCiAgICAg&#xD;&#xA;ICAgIHRyYW5zZm9ybT0ibWF0cml4KDAuNzM0NDkxNjEsMC42Nzg2MTc3NiwtMC43ODQ5NzE5Myww&#xD;&#xA;LjYxOTUzMTMzLDAsMCkiIC8+CiAgICA8L2NsaXBQYXRoPgogICAgPGNsaXBQYXRoCiAgICAgICBp&#xD;&#xA;ZD0iY2xpcFBhdGgyOTk5LTItMy00IgogICAgICAgY2xpcFBhdGhVbml0cz0idXNlclNwYWNlT25V&#xD;&#xA;c2UiPgogICAgICA8cGF0aAogICAgICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIw&#xD;&#xA;IgogICAgICAgICBpZD0icGF0aDMwMDEtOC04LTYiCiAgICAgICAgIGQ9Im0gMCwxNDQwMCAxNDQw&#xD;&#xA;MCwwIEwgMTQ0MDAsMCAwLDAgMCwxNDQwMCB6IiAvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+&#xD;&#xA;CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhMzAyMyI+CiAgICA8cmRmOlJERj4KICAgICAg&#xD;&#xA;PGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uv&#xD;&#xA;c3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291&#xD;&#xA;cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgICA8&#xD;&#xA;ZGM6dGl0bGU+PC9kYzp0aXRsZT4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwv&#xD;&#xA;bWV0YWRhdGE+CiAgPGcKICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDUxLjEzNzQsMzguOTMy&#xD;&#xA;MjkzKSIKICAgICBpZD0ibGF5ZXIxIgogICAgIGlua3NjYXBlOmdyb3VwbW9kZT0ibGF5ZXIiCiAg&#xD;&#xA;ICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiPgogICAgPGcKICAgICAgIGlkPSJnMzM3OCIKICAg&#xD;&#xA;ICAgIHRyYW5zZm9ybT0ibWF0cml4KDAuMjgwMjY3MTksMCwwLDAuMjgwMjY3MTksLTEwNDAuODMy&#xD;&#xA;NSw2MS4yNTQyOTQpIgogICAgICAgaW5rc2NhcGU6ZXhwb3J0LWZpbGVuYW1lPSJTOlxsdWNpYVxO&#xD;&#xA;ZXctTG9nby1TeW1ib2xcU3RhbmRhcmQtTG9nb1xQTkdcUHJveG1veF9sb2dvX3N0YW5kYXJkX2hl&#xD;&#xA;eF8zMDBweC5wbmciCiAgICAgICBpbmtzY2FwZTpleHBvcnQteGRwaT0iOTAiCiAgICAgICBpbmtz&#xD;&#xA;Y2FwZTpleHBvcnQteWRwaT0iOTAiPgogICAgICA8ZwogICAgICAgICBpZD0iZzMwMTYtOSIKICAg&#xD;&#xA;ICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMCIKICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMC44&#xD;&#xA;NTI4NjU5NCwwLDAsMC44NTI4NjU5NCwtMjIwNC43OTY0LC05NzAuMDY0OTUpIj4KICAgICAgICA8&#xD;&#xA;ZwogICAgICAgICAgIHN0eWxlPSJmb250LXNpemU6MTQ0cHg7Zm9udC1zdHlsZTpub3JtYWw7Zm9u&#xD;&#xA;dC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDts&#xD;&#xA;aW5lLWhlaWdodDoxMjUlO2xldHRlci1zcGFjaW5nOjBweDt3b3JkLXNwYWNpbmc6MHB4O2ZpbGw6&#xD;&#xA;IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtmb250LWZhbWlseTpIZWxpb247LWlu&#xD;&#xA;a3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpIZWxpb24iCiAgICAgICAgICAgaWQ9InRleHQzMDkz&#xD;&#xA;LTUiCiAgICAgICAgICAgY2xpcC1wYXRoPSJ1cmwoI2NsaXBQYXRoMzEwMi00KSIKICAgICAgICAg&#xD;&#xA;ICB0cmFuc2Zvcm09Im1hdHJpeCgtMC45OTc5MTk3OSwwLDAsMC45OTc5MTk3OSwxNDUyLjM1ODYs&#xD;&#xA;NzQ2LjA0Nzg0KSI+CiAgICAgICAgICA8cGF0aAogICAgICAgICAgICAgZD0iTSAyNzYuMzA0NDMs&#xD;&#xA;MjI2LjYyMzEgNDY2Ljg5MjI3LDE3LjAyMDYwNSBDIDQ1OS40OTkwMyw5LjYyODA4NzEgNDUwLjg4&#xD;&#xA;NzYyLDMuODE5NDMyMSA0NDEuMDU3OTYsLTAuNDA1Mzc2OTUgNDMxLjIyNzU2LC00LjYyOTUxNzEg&#xD;&#xA;NDIwLjY2NjQsLTYuNzgyMzcyMSA0MDkuMzc0MzcsLTYuODYzOTQ3OSAzOTcuMzgwOTksLTYuNzcy&#xD;&#xA;MjAzMSAzODYuMzkzMjgsLTQuMzk1OTMyNiAzNzYuNDExMjMsMC4yNjQ4NzA5NiAzNjYuNDI4Niw0&#xD;&#xA;LjkyNjM0MTcgMzU3Ljc1NjIzLDExLjMyMzk4IDM1MC4zOTQxMywxOS40NTc4MDUgTCAyNzYuMzAz&#xD;&#xA;MjcsMTAwLjM3MjgyIDIwMi42OTk4NSwxOS40NTc4MDUgQyAxOTUuMDczMzUsMTEuMzIzOTcgMTg2&#xD;&#xA;LjE5Nzg3LDQuOTI2MzI0OCAxNzYuMDczNDQsMC4yNjQ4NDkzIDE2NS45NDg4MSwtNC4zOTU5NTkg&#xD;&#xA;MTU1LjAwMTc1LC02Ljc3MjIyMjQgMTQzLjIzMjIsLTYuODYzOTQ3OSAxMzEuOTM5NzgsLTYuNzgy&#xD;&#xA;MzYxNiAxMjEuMzc4NiwtNC42Mjk1MDUgMTExLjU0ODYsLTAuNDA1MzY5NTEgMTAxLjcxODU1LDMu&#xD;&#xA;ODE5NDM0NSA5My4xMDcxMjIsOS42MjgwODcxIDg1LjcxNDI4NywxNy4wMjA2MDUgTCAyNzYuMzA3&#xD;&#xA;NjksMjI2LjYxNzUyIgogICAgICAgICAgICAgaWQ9InBhdGgzMDk4LTUiCiAgICAgICAgICAgICBp&#xD;&#xA;bmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgogICAgICAgICAgICAgc29kaXBvZGk6bm9k&#xD;&#xA;ZXR5cGVzPSJjY2NjY2NjY2NjY2NjIgogICAgICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtm&#xD;&#xA;aWxsLW9wYWNpdHk6MSIgLz4KICAgICAgICA8L2c+CiAgICAgICAgPGcKICAgICAgICAgICB0cmFu&#xD;&#xA;c2Zvcm09Im1hdHJpeCgwLjk5NzkxOTc5LDAsMCwtMC45OTc5MTk3OSw5MDAuODk2MDQsMTIzMC4z&#xD;&#xA;NTc2KSIKICAgICAgICAgICBjbGlwLXBhdGg9InVybCgjY2xpcFBhdGgzMTAyLTQpIgogICAgICAg&#xD;&#xA;ICAgIGlkPSJnMzE5Ni05IgogICAgICAgICAgIHN0eWxlPSJmb250LXNpemU6MTQ0cHg7Zm9udC1z&#xD;&#xA;dHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1z&#xD;&#xA;dHJldGNoOm5vcm1hbDtsaW5lLWhlaWdodDoxMjUlO2xldHRlci1zcGFjaW5nOjBweDt3b3JkLXNw&#xD;&#xA;YWNpbmc6MHB4O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtmb250LWZh&#xD;&#xA;bWlseTpIZWxpb247LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpIZWxpb24iPgogICAgICAg&#xD;&#xA;ICAgPHBhdGgKICAgICAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjEi&#xD;&#xA;CiAgICAgICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjY2NjY2NjY2NjY2MiCiAgICAgICAg&#xD;&#xA;ICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgogICAgICAgICAgICAgaWQ9InBh&#xD;&#xA;dGgzMTk4LTEiCiAgICAgICAgICAgICBkPSJNIDI3Ni4zMDQ0MywyMjYuNjIzMSA0NjYuODkyMjcs&#xD;&#xA;MTcuMDIwNjA1IEMgNDU5LjQ5OTAzLDkuNjI4MDg3MSA0NTAuODg3NjIsMy44MTk0MzIxIDQ0MS4w&#xD;&#xA;NTc5NiwtMC40MDUzNzY5NSA0MzEuMjI3NTYsLTQuNjI5NTE3MSA0MjAuNjY2NCwtNi43ODIzNzIx&#xD;&#xA;IDQwOS4zNzQzNywtNi44NjM5NDc5IDM5Ny4zODA5OSwtNi43NzIyMDMxIDM4Ni4zOTMyOCwtNC4z&#xD;&#xA;OTU5MzI2IDM3Ni40MTEyMywwLjI2NDg3MDk2IDM2Ni40Mjg2LDQuOTI2MzQxNyAzNTcuNzU2MjMs&#xD;&#xA;MTEuMzIzOTggMzUwLjM5NDEzLDE5LjQ1NzgwNSBMIDI3Ni4zMDMyNywxMDAuMzcyODIgMjAyLjY5&#xD;&#xA;OTg1LDE5LjQ1NzgwNSBDIDE5NS4wNzMzNSwxMS4zMjM5NyAxODYuMTk3ODcsNC45MjYzMjQ4IDE3&#xD;&#xA;Ni4wNzM0NCwwLjI2NDg0OTMgMTY1Ljk0ODgxLC00LjM5NTk1OSAxNTUuMDAxNzUsLTYuNzcyMjIy&#xD;&#xA;NCAxNDMuMjMyMiwtNi44NjM5NDc5IDEzMS45Mzk3OCwtNi43ODIzNjE2IDEyMS4zNzg2LC00LjYy&#xD;&#xA;OTUwNSAxMTEuNTQ4NiwtMC40MDUzNjk1MSAxMDEuNzE4NTUsMy44MTk0MzQ1IDkzLjEwNzEyMiw5&#xD;&#xA;LjYyODA4NzEgODUuNzE0Mjg3LDE3LjAyMDYwNSBMIDI3Ni4zMDc2OSwyMjYuNjE3NTIiIC8+CiAg&#xD;&#xA;ICAgICAgPC9nPgogICAgICAgIDxwYXRoCiAgICAgICAgICAgc3R5bGU9ImZvbnQtc2l6ZToxMDU5&#xD;&#xA;LjYxMjc5Mjk3cHg7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdl&#xD;&#xA;aWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDtsaW5lLWhlaWdodDoxMjUlO2xldHRlci1z&#xD;&#xA;cGFjaW5nOjBweDt3b3JkLXNwYWNpbmc6MHB4O2ZpbGw6I2U1NzAwMDtmaWxsLW9wYWNpdHk6MTtz&#xD;&#xA;dHJva2U6bm9uZTtmb250LWZhbWlseTpIZWxpb247LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlv&#xD;&#xA;bjpIZWxpb24iCiAgICAgICAgICAgZD0ibSAxMTYwLjYyOTIsOTg4LjIwNTM4IDAsMCAtMTQzLjI2&#xD;&#xA;NjUsLTE1Ny4xMTIzMiBjIC04LjMzMywtOC44ODcyMSAtMTguMDMwNjEsLTE1Ljg3NzU0IC0yOS4w&#xD;&#xA;OTI3OSwtMjAuOTcwNzggLTExLjA2MjUyLC01LjA5MjU1IC0yMy4wMjM2NiwtNy42ODg4OSAtMzUu&#xD;&#xA;ODgzNDMsLTcuNzg5MTQgLTEyLjMzODQzLDAuMDg5MiAtMjMuODc3OTIsMi40NDE0NyAtMzQuNjE4&#xD;&#xA;NDksNy4wNTY4NSAtMTAuNzQwNjIsNC42MTYxMyAtMjAuMTQ5NzIsMTAuOTYyODQgLTI4LjIyNzM2&#xD;&#xA;LDE5LjA0MDE2IEwgMTAzNC45MzgzLDk4OC4yMDc3NyA4ODkuNTQwNjMsMTE0Ny45ODU0IGMgOC4w&#xD;&#xA;Nzc2Miw4LjMzMjkgMTcuNDg2NzQsMTQuODM0OSAyOC4yMjczNiwxOS41MDYyIDEwLjc0MDU3LDQu&#xD;&#xA;NjcxMiAyMi4yODAwNiw3LjA0NTcgMzQuNjE4NDksNy4xMjM0IDEyLjg5MzA4LC0wLjEgMjQuOTIw&#xD;&#xA;NzMsLTIuNjk2MiAzNi4wODMwNywtNy43ODkxIDExLjE2MjIzLC01LjA5MjkgMjAuNzkzMjUsLTEy&#xD;&#xA;LjA4MzMgMjguODkzMTUsLTIwLjk3MDggbCAxNDMuMjY2MiwtMTU3LjY0OTE3IgogICAgICAgICAg&#xD;&#xA;IGlkPSJwYXRoMzI3OC00IgogICAgICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9&#xD;&#xA;IjAiCiAgICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NjY2NzY3NjYyIgLz4KICAg&#xD;&#xA;ICAgICA8cGF0aAogICAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2Njc2NzY2Mi&#xD;&#xA;CiAgICAgICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgICAgICBp&#xD;&#xA;ZD0icGF0aDMyODAtNSIKICAgICAgICAgICBkPSJtIDExOTIuNjIwOCw5ODguMjA1MzggMCwwIDE0&#xD;&#xA;My4yNjY1LC0xNTcuMTEyMzIgYyA4LjMzMywtOC44ODcyMSAxOC4wMzA2LC0xNS44Nzc1NCAyOS4w&#xD;&#xA;OTI4LC0yMC45NzA3OCAxMS4wNjI1LC01LjA5MjU1IDIzLjAyMzcsLTcuNjg4ODkgMzUuODgzNCwt&#xD;&#xA;Ny43ODkxNCAxMi4zMzg1LDAuMDg5MiAyMy44NzgsMi40NDE0NyAzNC42MTg1LDcuMDU2ODUgMTAu&#xD;&#xA;NzQwNyw0LjYxNjEzIDIwLjE0OTgsMTAuOTYyODQgMjguMjI3NCwxOS4wNDAxNiBsIC0xNDUuMzk3&#xD;&#xA;NywxNTkuNzc3NjIgMTQ1LjM5NzcsMTU5Ljc3NzYzIGMgLTguMDc3Niw4LjMzMjkgLTE3LjQ4Njcs&#xD;&#xA;MTQuODM0OSAtMjguMjI3NCwxOS41MDYyIC0xMC43NDA1LDQuNjcxMiAtMjIuMjgsNy4wNDU3IC0z&#xD;&#xA;NC42MTg0LDcuMTIzNCAtMTIuODkzMSwtMC4xIC0yNC45MjA4LC0yLjY5NjIgLTM2LjA4MzEsLTcu&#xD;&#xA;Nzg5MSAtMTEuMTYyMywtNS4wOTI5IC0yMC43OTMzLC0xMi4wODMzIC0yOC44OTMyLC0yMC45NzA4&#xD;&#xA;IEwgMTE5Mi42MjExLDk4OC4yMDU5MyIKICAgICAgICAgICBzdHlsZT0iZm9udC1zaXplOjEwNTku&#xD;&#xA;NjEyNzkyOTdweDtmb250LXN0eWxlOm5vcm1hbDtmb250LXZhcmlhbnQ6bm9ybWFsO2ZvbnQtd2Vp&#xD;&#xA;Z2h0Om5vcm1hbDtmb250LXN0cmV0Y2g6bm9ybWFsO2xpbmUtaGVpZ2h0OjEyNSU7bGV0dGVyLXNw&#xD;&#xA;YWNpbmc6MHB4O3dvcmQtc3BhY2luZzowcHg7ZmlsbDojZTU3MDAwO2ZpbGwtb3BhY2l0eToxO3N0&#xD;&#xA;cm9rZTpub25lO2ZvbnQtZmFtaWx5OkhlbGlvbjstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9u&#xD;&#xA;OkhlbGlvbiIgLz4KICAgICAgPC9nPgogICAgICA8ZwogICAgICAgICBpZD0iZzMzNjgiPgogICAg&#xD;&#xA;ICAgIDxnCiAgICAgICAgICAgaWQ9InRleHQzMjIzIgogICAgICAgICAgIHN0eWxlPSJmb250LXNp&#xD;&#xA;emU6Mzg3LjUyMjA2NDIxcHg7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtm&#xD;&#xA;b250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWFsaWduOnN0YXJ0O2xp&#xD;&#xA;bmUtaGVpZ2h0OjEyNSU7bGV0dGVyLXNwYWNpbmc6MHB4O3dvcmQtc3BhY2luZzowcHg7d3JpdGlu&#xD;&#xA;Zy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6&#xD;&#xA;MTtzdHJva2U6bm9uZTtmb250LWZhbWlseTpIZWxpb247LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNh&#xD;&#xA;dGlvbjpIZWxpb24iPgogICAgICAgICAgPHBhdGgKICAgICAgICAgICAgIGlua3NjYXBlOmNvbm5l&#xD;&#xA;Y3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgICAgICAgICBpZD0icGF0aDMzNTQiCiAgICAgICAgICAg&#xD;&#xA;ICBkPSJtIC02ODYuMTgxMSwtMjYyLjM4NzM3IC0xNzcuODcwMzQsMCBjIC02Ljk4MzQsMC4xOTQw&#xD;&#xA;MyAtMTIuODc2ODksMi43MTI4OCAtMTcuNjgwNDgsNy41NTY1OCAtNC44MDM2LDQuODQ0MjIgLTcu&#xD;&#xA;MzA2MzEsMTAuODUwNzMgLTcuNTA4MTMsMTguMDE5NTUgbCAwLDI0NS42ODU4MjIzIGMgMTkuMDg1&#xD;&#xA;MiwtMC40NzYzMjg5IDM0Ljk3MzM4LC03LjA4MDI2MiA0Ny42NjQ2LC0xOS44MTE4MTkzIDEyLjY5&#xD;&#xA;MTEyLC0xMi43MzE1MTcgMTkuMjc4OSwtMjguNzMyNzI0IDE5Ljc2MzM3LC00OC4wMDM2NjkgbCAx&#xD;&#xA;MzUuNjMwOTgsMCBjIDE5LjI4NjgyLC0wLjQ3NjI2MSAzNS4zNTI2MSwtNy4wODAxOTQgNDguMTk3&#xD;&#xA;NDIsLTE5LjgxMTgxOSAxMi44NDQzMiwtMTIuNzMxNDUgMTkuNTEyODQsLTI4LjczMjY1NSAyMC4w&#xD;&#xA;MDU1OCwtNDguMDAzNjY1IGwgMCwtNjcuNDI3OTggYyAtMC40OTI3NCwtMTkuMjg2ODIgLTcuMTYx&#xD;&#xA;MjUsLTM1LjM1MjYyIC0yMC4wMDU1NywtNDguMTk3NDQgLTEyLjg0NDgyLC0xMi44NDQzMiAtMjgu&#xD;&#xA;OTEwNjEsLTE5LjUxMjgzIC00OC4xOTc0MywtMjAuMDA1NTYgeiBtIC0xMzUuNjMwOTgsMTQ0LjE1&#xD;&#xA;NjM1IDAsLTc1Ljk1MzM1IDExOC45Njc3NCwwIGMgMC42OTQxMSwtMC4zNDY5NCAzLjQ3MTMxLDAu&#xD;&#xA;MzQ3MzYgOC4zMzE2MSwyLjA4MjkxIDQuODU5OTEsMS43MzU5NSA3LjYzNzEyLDYuNTk2MDUgOC4z&#xD;&#xA;MzE2MywxNC41ODAzMyBsIDAsNDIuMjM5MzYgYyAwLjM0Njk0LDAuNzEwNiAtMC4zNDczNiwzLjU1&#xD;&#xA;MjM4IC0yLjA4MjkxLDguNTI1MzggLTEuNzM1OTUsNC45NzMyNiAtNi41OTYwNiw3LjgxNTA1IC0x&#xD;&#xA;NC41ODAzMyw4LjUyNTM3IHoiIC8+CiAgICAgICAgICA8cGF0aAogICAgICAgICAgICAgaW5rc2Nh&#xD;&#xA;cGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgICAgICAgIGlkPSJwYXRoMzM1NiIKICAg&#xD;&#xA;ICAgICAgICAgIGQ9Im0gLTMwOC4wNDUyMSwtMTQzLjQxOTYzIDAsLTUwLjc2NDc0IGMgLTAuNDc2&#xD;&#xA;NiwtMTkuMjg2ODIgLTcuMDgwNTMsLTM1LjM1MjYyIC0xOS44MTE4MiwtNDguMTk3NDQgLTEyLjcz&#xD;&#xA;MTc5LC0xMi44NDQzMiAtMjguNzMzLC0xOS41MTI4MyAtNDguMDAzNjcsLTIwLjAwNTU2IGwgLTE3&#xD;&#xA;Ny44NzAzNCwwIGMgLTcuMTUyOTMsMC4xOTQwMyAtMTMuMDk0ODUsMi43MTI4OCAtMTcuODI1Nzgs&#xD;&#xA;Ny41NTY1OCAtNC43MzA5NSw0Ljg0NDIyIC03LjE4NTIyLDEwLjg1MDczIC03LjM2MjgzLDE4LjAx&#xD;&#xA;OTU1IGwgMCwyNDUuNjg1ODIyMyBjIDE5LjEwMTM1LC0wLjQ3NjMyODkgMzUuMDU0MTIsLTcuMDgw&#xD;&#xA;MjYyIDQ3Ljg1ODM2LC0xOS44MTE4MTkzIDEyLjgwNDE0LC0xMi43MzE1MTcgMTkuNDU2NTEsLTI4&#xD;&#xA;LjczMjcyNCAxOS45NTcxMywtNDguMDAzNjY5IGwgMCwtMTcuMDUwNzUxIDc3LjExNTksMCAzOS4x&#xD;&#xA;MzkyMiw1NS44MDI0NTkgYyA2LjI4MDgyLDkuMDA5Nzk0IDE0LjE2MDMzLDE2LjA4MTk3MzIgMjMu&#xD;&#xA;NjM4NTQsMjEuMjE2NTU5NSA5LjQ3NzgxLDUuMTM0NjAyMSAyMC4wNjk5Myw3Ljc1MDMzOTcgMzEu&#xD;&#xA;Nzc2NDEsNy44NDcyMjA4IDUuNjQyOTYsLTAuMDA4MDggMTEuMTE2NjMsLTAuNjcwMDg3MiAxNi40&#xD;&#xA;MjEwMiwtMS45ODYwMzM3IDUuMzAzODgsLTEuMzE1OTQyNSAxMC4yOTMxNiwtMy4yMzczNzY1IDE0&#xD;&#xA;Ljk2Nzg2LC01Ljc2NDMwNzggbCAtNTQuNjM5OTEsLTc3Ljg5MDkzMTggYyAxNS44Mzk1MiwtMy40&#xD;&#xA;MzEwNTIgMjguODIxMzMsLTExLjE5NzUzNSAzOC45NDU0NiwtMjMuMjk5NDY5IDEwLjEyMzYyLC0x&#xD;&#xA;Mi4xMDE3MiAxNS4zNTUxLC0yNi41NTI4NiAxNS42OTQ0NSwtNDMuMzUzNDcgeiBtIC0yMDMuMDU4&#xD;&#xA;OTUsOC4xMzc4NiAwLC01OC45MDI2IDExOC4xOTI3MSwwIGMgMC43MTAyNiwtMC4zNDY5NCAzLjU1&#xD;&#xA;MjA1LDAuMzQ3MzYgOC41MjUzNywyLjA4MjkxIDQuOTcyOTQsMS43MzU5NSA3LjgxNDczLDYuNTk2&#xD;&#xA;MDUgOC41MjUzOCwxNC41ODAzMyBsIDAsMjUuNTc2MTMgYyAwLjM1NTAyLDAuNjk0NDUgLTAuMzU1&#xD;&#xA;NDMsMy40NzE2NiAtMi4xMzEzNSw4LjMzMTYxIC0xLjc3NjMyLDQuODYwMjUgLTYuNzQ5NDUsNy42&#xD;&#xA;Mzc0NiAtMTQuOTE5NCw4LjMzMTYyIHoiIC8+CiAgICAgICAgICA8cGF0aAogICAgICAgICAgICAg&#xD;&#xA;aW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgICAgICAgIGlkPSJwYXRoMzM1&#xD;&#xA;OCIKICAgICAgICAgICAgIGQ9Im0gLTY2LjI5NzE5MywtMjYyLjM4NzM3IC0xMzUuMjQzNDU3LDAg&#xD;&#xA;YyAtMTkuMjcwOTUsMC40OTI3NSAtMzUuMjcyMTcsNy4xNjEyNiAtNDguMDAzNjgsMjAuMDA1NTgg&#xD;&#xA;LTEyLjczMTU2LDEyLjg0NDgxIC0xOS4zMzU0OSwyOC45MTA2MSAtMTkuODExODEsNDguMTk3NDIg&#xD;&#xA;bCAwLDEzNS4yNDM0NjQgYyAwLjQ3NjMyLDE5LjI3MDk0NSA3LjA4MDI1LDM1LjI3MjE1NCAxOS44&#xD;&#xA;MTE4MSw0OC4wMDM2NzUgMTIuNzMxNTIsMTIuNzMxNTYxIDI4LjczMjczLDE5LjMzNTQ5MjEgNDgu&#xD;&#xA;MDAzNjgsMTkuODExODEzMyBsIDEzNS4yNDM0NTcsMCBDIC00Ny4wMjY1MTksOC4zOTgyNTM0IC0z&#xD;&#xA;MS4wMjUzMSwxLjc5NDMyMDMgLTE4LjI5MzUxOCwtMTAuOTM3MjM3IC01LjU2MjIyNzksLTIzLjY2&#xD;&#xA;ODc1NCAxLjA0MTcwMzMsLTM5LjY2OTk2MSAxLjUxODI5NTMsLTU4Ljk0MDkwNiBsIDAsLTEzNS4y&#xD;&#xA;NDM0NjQgYyAtMC40NzY1OTk3LC0xOS4yODY4MiAtNy4wODA1MzI4LC0zNS4zNTI2MiAtMTkuODEx&#xD;&#xA;ODE5MywtNDguMTk3NDQgLTEyLjczMTc4OCwtMTIuODQ0MzIgLTI4LjczMjk5NSwtMTkuNTEyODMg&#xD;&#xA;LTQ4LjAwMzY2OSwtMjAuMDA1NTYgeiBtIDAsMTg2LjM5NTcxMyBjIDAuMzU1MDIzLDAuNzEwNTM2&#xD;&#xA;IC0wLjM1NTQyNywzLjU1MjMyNSAtMi4xMzEzNSw4LjUyNTM3NiAtMS43NzYzMjQsNC45NzMyMDMg&#xD;&#xA;LTYuNzQ5NDUzLDcuODE0OTkyIC0xNC45MTk0MDEsOC41MjUzNzUgbCAtMTAxLjE0MTk1NiwwIGMg&#xD;&#xA;LTAuNzEwNTMsMC4zNTUyOTQgLTMuNTUyMzIsLTAuMzU1MTU2IC04LjUyNTM4LC0yLjEzMTM1IC00&#xD;&#xA;Ljk3MzIxLC0xLjc3NjA1NCAtNy44MTUsLTYuNzQ5MTgyIC04LjUyNTM3LC0xNC45MTk0MDEgbCAw&#xD;&#xA;LC0xMDEuNTI5NDczIGMgLTAuMzU1MywtMC42OTQxMSAwLjM1NTE1LC0zLjQ3MTMyIDIuMTMxMzQs&#xD;&#xA;LTguMzMxNjIgMS43NzYwNCwtNC44NTk5MiA2Ljc0OTE4LC03LjYzNzEyIDE0LjkxOTQxLC04LjMz&#xD;&#xA;MTYyIGwgMTAxLjE0MTk1NiwwIGMgMC43MTAyNjUsLTAuMzQ2OTQgMy41NTIwNTQsMC4zNDczNiA4&#xD;&#xA;LjUyNTM3NiwyLjA4MjkxIDQuOTcyOTMyLDEuNzM1OTUgNy44MTQ3MjEsNi41OTYwNSA4LjUyNTM3&#xD;&#xA;NSwxNC41ODAzMyB6IiAvPgogICAgICAgICAgPHBhdGgKICAgICAgICAgICAgIGlua3NjYXBlOmNv&#xD;&#xA;bm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgICAgICAgICBpZD0icGF0aDMzNjAiCiAgICAgICAg&#xD;&#xA;ICAgICBzdHlsZT0iZmlsbDojZTU3MDAwO2ZpbGwtb3BhY2l0eToxIgogICAgICAgICAgICAgZD0i&#xD;&#xA;bSAzNDMuMjQ1ODEsLTI0My4wMTE1MiBjIC01Ljg3NzY0LC01Ljg3NzA4IC0xMi43MjM3NywtMTAu&#xD;&#xA;NDk0OTkgLTIwLjUzODQsLTEzLjg1Mzc0IC03LjgxNTIsLTMuMzU4MjEgLTE2LjIxMTQsLTUuMDY5&#xD;&#xA;NzQgLTI1LjE4ODYxLC01LjEzNDU5IC05LjU1MDkzLDAuMDcyOSAtMTguMzUwNzksMS45NjIwOCAt&#xD;&#xA;MjYuMzk5Niw1LjY2NzQ0IC04LjA0OTI4LDMuNzA1ODkgLTE1LjAwODQzLDguNzkyMDUgLTIwLjg3&#xD;&#xA;NzQ5LDE1LjI1ODQ4IGwgLTU4LjUxNTA4LDY0LjMyNzgzIC01OC45MDI1OSwtNjQuMzI3ODMgYyAt&#xD;&#xA;Ni4wMjI3NSwtNi42MzU5OCAtMTIuOTY1NzYsLTExLjc3MDU4IC0yMC44MjkwNSwtMTUuNDAzODEg&#xD;&#xA;LTcuODYzNDMsLTMuNjMyNyAtMTYuNTUwMjYyLC01LjQ3MzQxIC0yNi4wNjA1MTcsLTUuNTIyMTEg&#xD;&#xA;LTguOTc3NTE5LDAuMDY0OSAtMTcuMzczNzE0LDEuNzc2MzkgLTI1LjE4ODYxLDUuMTM0NiAtNy44&#xD;&#xA;MTQ5MzYsMy4zNTg3NCAtMTQuNjYxMDY0LDcuOTc2NjUgLTIwLjUzODQwNSwxMy44NTM3MyBMIDE0&#xD;&#xA;NS45OTk2MiwtMTI2Ljc1NjM5IDQwLjIwNzQ1OCwtMTAuNTAxMjcxIGMgNS44NzczMzMsNi4wNjMw&#xD;&#xA;MzcxIDEyLjcyMzQ2MSwxMC43OTM5NjcwNiAyMC41Mzg0MDUsMTQuMTkyODAzOCA3LjgxNDkwNCwz&#xD;&#xA;LjM5ODg0NyAxNi4yMTEwOTksNS4xMjY1Mjg1IDI1LjE4ODYxLDUuMTgzMDQ5NSA5LjM4MTA5MSwt&#xD;&#xA;MC4wNzI2NTkgMTguMTMyNTA3LC0xLjk2MTgwMzcgMjYuMjU0Mjg3LC01LjY2NzQ0MDEgOC4xMjE2&#xD;&#xA;MywtMy43MDU2MjUwOCAxNS4xMjkyMywtOC43OTE3ODA2IDIxLjAyMjgsLTE1LjI1ODQ4MjIgbCA1&#xD;&#xA;OC41MTUwNywtNjQuMzI3ODM0IDU4LjUxNTA4LDY0LjMyNzgzNCBjIDUuODY5MDYsNi40NjY3MDE2&#xD;&#xA;IDEyLjgyODIxLDExLjU1Mjg1NTE5IDIwLjg3NzQ5LDE1LjI1ODQ3NjQgOC4wNDg4MSwzLjcwNTYz&#xD;&#xA;MjYgMTYuODQ4NjcsNS41OTQ3NzkzIDI2LjM5OTYsNS42Njc0NDU5IDguOTc3MjEsLTAuMDU2NTEz&#xD;&#xA;IDE3LjM3MzQsLTEuNzg0MTkyOSAyNS4xODg2MSwtNS4xODMwNDM4IDcuODE0NjQsLTMuMzk4ODQw&#xD;&#xA;NTIgMTQuNjYwNzcsLTguMTI5NzcyNCAyMC41Mzg0LC0xNC4xOTI4MDk1IEwgMjM3LjQ1MzY1LC0x&#xD;&#xA;MjYuNzU2MzkgeiIgLz4KICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgICBpbmtzY2FwZTpjb25u&#xD;&#xA;ZWN0b3ItY3VydmF0dXJlPSIwIgogICAgICAgICAgICAgaWQ9InBhdGgzMzYyIgogICAgICAgICAg&#xD;&#xA;ICAgZD0ibSA2OTUuODE4MDMsLTI2Mi4zODczNyAtNDIuNjI2ODgsMCBjIC0xMy45NDI4MSwwLjE5&#xD;&#xA;NDAzIC0yNi4zNTk0OSwzLjk3MjMyIC0zNy4yNTAwOCwxMS4zMzQ4NyAtMTAuODkxMDcsNy4zNjMw&#xD;&#xA;OCAtMTkuMTQxOTQsMTcuMTQ3ODcgLTI0Ljc1MjY2LDI5LjM1NDQyIGwgMC4zODc1MiwtMC43NzUw&#xD;&#xA;MyAtMzkuOTE0MjYsODcuNTc4ODYgLTM5LjUyNjc0LC04Ny41Nzg4NiAwLDAuNzc1MDMgYyAtNS40&#xD;&#xA;NDE1MiwtMTIuMjA2NTUgLTEzLjY0Mzk1LC0yMS45OTEzNCAtMjQuNjA3MzQsLTI5LjM1NDQyIC0x&#xD;&#xA;MC45NjM1OSwtNy4zNjI1NiAtMjMuNDI4NzEsLTExLjE0MDg0IC0zNy4zOTUzOSwtMTEuMzM0ODcg&#xD;&#xA;bCAtNDIuMjM5MzYsMCBjIC03LjMzODYyLDAuMTk0MDMgLTEzLjM5MzU3LDIuNzEyODggLTE4LjE2&#xD;&#xA;NDg3LDcuNTU2NTggLTQuNzcxMzEsNC44NDQyMiAtNy4yNDE3MywxMC44NTA3MyAtNy40MTEyNiwx&#xD;&#xA;OC4wMTk1NSBsIDAsMjQ1LjY4NTgyMjMgYyAxOS4xMDEzNSwtMC40NzYzMjg5IDM1LjA1NDExLC03&#xD;&#xA;LjA4MDI2MiA0Ny44NTgzNSwtMTkuODExODE5MyAxMi44MDQxNSwtMTIuNzMxNTE3IDE5LjQ1NjUy&#xD;&#xA;LC0yOC43MzI3MjQgMTkuOTU3MTQsLTQ4LjAwMzY2OSBsIDAsLTEyOS44MTgyMjQgYyAwLjAyNDEs&#xD;&#xA;LTEuNzY3ODQgMC41NTY5OSwtMy4xNzI1OSAxLjU5ODUxLC00LjIxNDI1IDEuMDQxMzgsLTEuMDQx&#xD;&#xA;MjUgMi40NDYxMywtMS41NzQwOCA0LjIxNDI1LC0xLjU5ODUgMS4wMDkwOCwwLjAzMjUgMS45OTQw&#xD;&#xA;MiwwLjM1NTQyIDIuOTU0ODIsMC45Njg3OCAwLjk2MDY0LDAuNjEzNzcgMS42NTQ5NCwxLjMyNDIy&#xD;&#xA;IDIuMDgyOSwyLjEzMTM1IGwgNzUuMTc4MzEsMTY1Ljg1NzMxMyBjIDEuNDIwNzQsMi45NjI5MTkg&#xD;&#xA;My41MTk3OSw1LjM2ODc0OSA2LjI5NzE1LDcuMjE3NDk2IDIuNzc3MDUsMS44NDg4MDMgNS44NDQ4&#xD;&#xA;OSwyLjgwMTQ1MSA5LjIwMzUzLDIuODU3OTQ4IDMuMzM0MDksLTAuMDQwMzQgNi4zNTM0OSwtMC45&#xD;&#xA;MjgzOTQgOS4wNTgyMSwtMi42NjQxNzcgMi43MDQzNiwtMS43MzU3MyA0Ljg1MTg1LC00LjA3Njk3&#xD;&#xA;NyA2LjQ0MjQ4LC03LjAyMzc1IGwgNzUuMTc4MzEsLTE2Ni4yNDQ4MyBjIDAuNTg5MDksLTAuODA3&#xD;&#xA;MTIgMS4zNDc5NywtMS41MTc1NyAyLjI3NjY2LC0yLjEzMTM1IDAuOTI4MTcsLTAuNjEzMzcgMS45&#xD;&#xA;Nzc2OSwtMC45MzYzIDMuMTQ4NTgsLTAuOTY4NzggMS41ODIxLDAuMDI0NCAyLjg3MzgyLDAuNTU3&#xD;&#xA;MjYgMy44NzUxNywxLjU5ODUxIDEuMDAwODEsMS4wNDE2NSAxLjUxNzUsMi40NDY0IDEuNTUwMDcs&#xD;&#xA;NC4yMTQyNCBsIDAsMTI5LjgxODIyNCBjIDAuNTAwMjcsMTkuMjcwOTQ1IDcuMTUyNjQsMzUuMjcy&#xD;&#xA;MTU0IDE5Ljk1NzEyLDQ4LjAwMzY3NSAxMi44MDM5LDEyLjczMTU2MSAyOC43NTY2NywxOS4zMzU0&#xD;&#xA;OTIxIDQ3Ljg1ODM2LDE5LjgxMTgxMzMgbCAwLC0yNDUuNjg1ODIyMyBjIC0wLjE3Nzk0LC03LjE2&#xD;&#xA;ODgyIC0yLjYzMjIxLC0xMy4xNzUzMyAtNy4zNjI4MiwtMTguMDE5NTUgLTQuNzMxMjcsLTQuODQz&#xD;&#xA;NyAtMTAuNjczMTksLTcuMzYyNTUgLTE3LjgyNTc4LC03LjU1NjU4IHoiIC8+CiAgICAgICAgICA8&#xD;&#xA;cGF0aAogICAgICAgICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAg&#xD;&#xA;ICAgICAgIGlkPSJwYXRoMzM2NCIKICAgICAgICAgICAgIGQ9Im0gOTYzLjA1ODQsLTI2Mi4zODcz&#xD;&#xA;NyAtMTM1LjI0MzQ2LDAgYyAtMTkuMjcwOTUsMC40OTI3NSAtMzUuMjcyMTYsNy4xNjEyNiAtNDgu&#xD;&#xA;MDAzNjgsMjAuMDA1NTggLTEyLjczMTU2LDEyLjg0NDgxIC0xOS4zMzU0OSwyOC45MTA2MSAtMTku&#xD;&#xA;ODExODEsNDguMTk3NDIgbCAwLDEzNS4yNDM0NjQgYyAwLjQ3NjMyLDE5LjI3MDk0NSA3LjA4MDI1&#xD;&#xA;LDM1LjI3MjE1NCAxOS44MTE4MSw0OC4wMDM2NzUgMTIuNzMxNTMsMTIuNzMxNTYxIDI4LjczMjcz&#xD;&#xA;LDE5LjMzNTQ5MjEgNDguMDAzNjgsMTkuODExODEzMyBsIDEzNS4yNDM0NiwwIGMgMTkuMjcwNjcs&#xD;&#xA;LTAuNDc2MzI4OSAzNS4yNzE4OCwtNy4wODAyNjIgNDguMDAzNywtMTkuODExODE5MyAxMi43MzEz&#xD;&#xA;LC0xMi43MzE1MTcgMTkuMzM1MiwtMjguNzMyNzI0IDE5LjgxMTgsLTQ4LjAwMzY2OSBsIDAsLTEz&#xD;&#xA;NS4yNDM0NjQgYyAtMC40NzY2LC0xOS4yODY4MiAtNy4wODA1LC0zNS4zNTI2MiAtMTkuODExOCwt&#xD;&#xA;NDguMTk3NDQgLTEyLjczMTgyLC0xMi44NDQzMiAtMjguNzMzMDMsLTE5LjUxMjgzIC00OC4wMDM3&#xD;&#xA;LC0yMC4wMDU1NiB6IG0gMCwxODYuMzk1NzEzIGMgMC4zNTUwMiwwLjcxMDUzNiAtMC4zNTU0Mywz&#xD;&#xA;LjU1MjMyNSAtMi4xMzEzNSw4LjUyNTM3NiAtMS43NzYzMyw0Ljk3MzIwMyAtNi43NDk0Niw3Ljgx&#xD;&#xA;NDk5MiAtMTQuOTE5NCw4LjUyNTM3NSBsIC0xMDEuMTQxOTYsMCBjIC0wLjcxMDUzLDAuMzU1Mjk0&#xD;&#xA;IC0zLjU1MjMyLC0wLjM1NTE1NiAtOC41MjUzOCwtMi4xMzEzNSAtNC45NzMyMSwtMS43NzYwNTQg&#xD;&#xA;LTcuODE1LC02Ljc0OTE4MiAtOC41MjUzNywtMTQuOTE5NDAxIGwgMCwtMTAxLjUyOTQ3MyBjIC0w&#xD;&#xA;LjM1NTI5LC0wLjY5NDExIDAuMzU1MTUsLTMuNDcxMzIgMi4xMzEzNCwtOC4zMzE2MiAxLjc3NjA0&#xD;&#xA;LC00Ljg1OTkyIDYuNzQ5MTgsLTcuNjM3MTIgMTQuOTE5NDEsLTguMzMxNjIgbCAxMDEuMTQxOTYs&#xD;&#xA;MCBjIDAuNzEwMjYsLTAuMzQ2OTQgMy41NTIwNSwwLjM0NzM2IDguNTI1MzcsMi4wODI5MSA0Ljk3&#xD;&#xA;MjkzLDEuNzM1OTUgNy44MTQ3Miw2LjU5NjA1IDguNTI1MzgsMTQuNTgwMzMgeiIgLz4KICAgICAg&#xD;&#xA;ICAgIDxwYXRoCiAgICAgICAgICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgog&#xD;&#xA;ICAgICAgICAgICAgaWQ9InBhdGgzMzY2IgogICAgICAgICAgICAgc3R5bGU9ImZpbGw6I2U1NzAw&#xD;&#xA;MDtmaWxsLW9wYWNpdHk6MSIKICAgICAgICAgICAgIGQ9Im0gMTM3Mi42MDEzLC0yNDMuMDExNTIg&#xD;&#xA;YyAtNS44Nzc3LC01Ljg3NzA4IC0xMi43MjM4LC0xMC40OTQ5OSAtMjAuNTM4NCwtMTMuODUzNzQg&#xD;&#xA;LTcuODE1MiwtMy4zNTgyMSAtMTYuMjExNCwtNS4wNjk3NCAtMjUuMTg4NiwtNS4xMzQ1OSAtOS41&#xD;&#xA;NTEsMC4wNzI5IC0xOC4zNTA4LDEuOTYyMDggLTI2LjM5OTYsNS42Njc0NCAtOC4wNDkzLDMuNzA1&#xD;&#xA;ODkgLTE1LjAwODUsOC43OTIwNSAtMjAuODc3NSwxNS4yNTg0OCBsIC01OC41MTUxLDY0LjMyNzgz&#xD;&#xA;IC01OC45MDI2LC02NC4zMjc4MyBjIC02LjAyMjcsLTYuNjM1OTggLTEyLjk2NTgsLTExLjc3MDU4&#xD;&#xA;IC0yMC44MjksLTE1LjQwMzgxIC03Ljg2MzUsLTMuNjMyNyAtMTYuNTUwMywtNS40NzM0MSAtMjYu&#xD;&#xA;MDYwNiwtNS41MjIxMSAtOC45Nzc1LDAuMDY0OSAtMTcuMzczNywxLjc3NjM5IC0yNS4xODg2LDUu&#xD;&#xA;MTM0NiAtNy44MTQ5LDMuMzU4NzQgLTE0LjY2MSw3Ljk3NjY1IC0yMC41Mzg0LDEzLjg1MzczIGwg&#xD;&#xA;MTA1Ljc5MjIsMTE2LjI1NTEzIC0xMDUuNzkyMiwxMTYuMjU1MTE5IGMgNS44Nzc0LDYuMDYzMDM3&#xD;&#xA;MSAxMi43MjM1LDEwLjc5Mzk2NzA2IDIwLjUzODQsMTQuMTkyODAzOCA3LjgxNDksMy4zOTg4NDcg&#xD;&#xA;MTYuMjExMSw1LjEyNjUyODUgMjUuMTg4Niw1LjE4MzA0OTUgOS4zODExLC0wLjA3MjY1OSAxOC4x&#xD;&#xA;MzI2LC0xLjk2MTgwMzcgMjYuMjU0MywtNS42Njc0NDAxIDguMTIxNywtMy43MDU2MjUwOCAxNS4x&#xD;&#xA;MjkzLC04Ljc5MTc4MDYgMjEuMDIyOCwtMTUuMjU4NDgyMiBsIDU4LjUxNTEsLTY0LjMyNzgzNCA1&#xD;&#xA;OC41MTUxLDY0LjMyNzgzNCBjIDUuODY5LDYuNDY2NzAxNiAxMi44MjgyLDExLjU1Mjg1NTE5IDIw&#xD;&#xA;Ljg3NzUsMTUuMjU4NDc2NCA4LjA0ODgsMy43MDU2MzI2IDE2Ljg0ODYsNS41OTQ3NzkzIDI2LjM5&#xD;&#xA;OTYsNS42Njc0NDU5IDguOTc3MiwtMC4wNTY1MTMgMTcuMzczNCwtMS43ODQxOTI5IDI1LjE4ODYs&#xD;&#xA;LTUuMTgzMDQzOCA3LjgxNDYsLTMuMzk4ODQwNTIgMTQuNjYwNywtOC4xMjk3NzI0IDIwLjUzODQs&#xD;&#xA;LTE0LjE5MjgwOTUgTCAxMjY2LjgwOTEsLTEyNi43NTYzOSB6IiAvPgogICAgICAgIDwvZz4KICAg&#xD;&#xA;ICAgPC9nPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg==">
</span><br>Proxmox VE 管理ガイド</h1>
<span id="author">Proxmox Server Solutions GmbH</span><br />
<span id="email" class="monospaced">&amp;lt;<a href="mailto:support@proxmox.com">support@proxmox.com&amp;gt</a>;</span><br />
<span id="revnumber">バージョン 9.0.8、</span>
<span id="revdate">2025年8月5日(火) 16:04:45 CEST</span>
<div id="toc">
  <a href="index.html" style="font-size: 0.8em;">↩目次</a>
  <div id="toctitle">目次</div>
  <noscript><p><b>目次を表示するには、お使いのブラウザでJavaScriptを有効にする必要があります。</b></p></noscript>
</div>
</div>
<label for="menu-toggler" class="menu-overlay"></label>
<div id="content">
<div class="sect1">
<h2 id="chapter_introduction">
1. はじめに
<a class="headerlink" href="#chapter_introduction" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VEは、仮想マシンとコンテナを実行するためのプラットフォームです。
Debian Linuxを基盤としており、完全にオープンソースです。
最大限の柔軟性を実現するため、2つの仮想化技術——
カーネルベース仮想マシン（KVM）とコンテナベース仮想化（LXC）——を実装しました。</p></div>
<div class="paragraph">
<p>主な設計目標の一つは、管理を可能な限り容易にすることでした。
Proxmox VEは単一ノードでご利用いただけるほか、多数のノードからなるクラスターを構築することも可能です。
すべての管理タスクは、当社のウェブベース管理インターフェースを使用して実行でき、
初心者の方でも数分でProxmox VEの設定とインストールを行えます。</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img alt="Proxmox Software Stack" src="data:image/svg+xml;base64,
PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjwh
RE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3
LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBi
eSBncmFwaHZpeiB2ZXJzaW9uIDIuMzguMCAoMjAxNDA0MTMuMjA0MSkKIC0tPgo8IS0tIFRpdGxl
OiBwdmVfc29mdHdhcmVfc3RhY2sgUGFnZXM6IDEgLS0+Cjxzdmcgd2lkdGg9IjUyNnB0IiBoZWln
aHQ9IjQwMXB0Igogdmlld0JveD0iMC4wMCAwLjAwIDUyNi4wMCA0MDEuMDAiIHhtbG5zPSJodHRw
Oi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5
OTkveGxpbmsiPgo8ZyBpZD0iZ3JhcGgwIiBjbGFzcz0iZ3JhcGgiIHRyYW5zZm9ybT0ic2NhbGUo
MSAxKSByb3RhdGUoMCkgdHJhbnNsYXRlKDQgMzk3KSI+Cjx0aXRsZT5wdmVfc29mdHdhcmVfc3Rh
Y2s8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iLTQs
NCAtNCwtMzk3IDUyMiwtMzk3IDUyMiw0IC00LDQiLz4KPCEtLSBzdGFjayAtLT4KPGcgaWQ9Im5v
ZGUxIiBjbGFzcz0ibm9kZSI+PHRpdGxlPnN0YWNrPC90aXRsZT4KPHBvbHlnb24gZmlsbD0iIzAw
NjE3ZiIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjEyLC0yODkuNSAxMiwtMzg0LjUgNTA2LC0zODQu
NSA1MDYsLTI4OS41IDEyLC0yODkuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjIx
MC41IiB5PSItMzY2LjUiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1z
aXplPSIyMC4wMCIgZmlsbD0id2hpdGUiPlVzZXIgVG9vbHM8L3RleHQ+Cjxwb2x5Z29uIGZpbGw9
IiMwMDYxN2YiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSIxNCwtMjkxLjUgMTQsLTM1Ni41IDUwNCwt
MzU2LjUgNTA0LC0yOTEuNSAxNCwtMjkxLjUiLz4KPHBvbHlnb24gZmlsbD0iI2ZmOTEwMCIgc3Ry
b2tlPSJub25lIiBwb2ludHM9IjE5LC0zMjYuNSAxOSwtMzUxLjUgMTA5LC0zNTEuNSAxMDksLTMy
Ni41IDE5LC0zMjYuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjU0IiB5PSItMzM1
LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIxNC4wMCIg
ZmlsbD0id2hpdGUiPnFtPC90ZXh0Pgo8cG9seWdvbiBmaWxsPSIjZmY5MTAwIiBzdHJva2U9Im5v
bmUiIHBvaW50cz0iMTE0LC0zMjYuNSAxMTQsLTM1MS41IDIyNSwtMzUxLjUgMjI1LC0zMjYuNSAx
MTQsLTMyNi41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTQ5IiB5PSItMzM1LjMi
IGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmls
bD0id2hpdGUiPnB2ZXNtPC90ZXh0Pgo8cG9seWdvbiBmaWxsPSIjZmY5MTAwIiBzdHJva2U9Im5v
bmUiIHBvaW50cz0iMjMwLC0zMjYuNSAyMzAsLTM1MS41IDM1MSwtMzUxLjUgMzUxLC0zMjYuNSAy
MzAsLTMyNi41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMjY5LjUiIHk9Ii0zMzUu
MyIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBm
aWxsPSJ3aGl0ZSI+cHZldW08L3RleHQ+Cjxwb2x5Z29uIGZpbGw9IiNmZjkxMDAiIHN0cm9rZT0i
bm9uZSIgcG9pbnRzPSIzNTYsLTMyNi41IDM1NiwtMzUxLjUgNDk5LC0zNTEuNSA0OTksLTMyNi41
IDM1NiwtMzI2LjUiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIzOTAuNSIgeT0iLTMz
NS4zIiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAi
IGZpbGw9IndoaXRlIj5oYSYjNDU7bWFuYWdlcjwvdGV4dD4KPHBvbHlnb24gZmlsbD0iI2ZmOTEw
MCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjE5LC0yOTYuNSAxOSwtMzIxLjUgMTA5LC0zMjEuNSAx
MDksLTI5Ni41IDE5LC0yOTYuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjU0LjUi
IHk9Ii0zMDUuMyIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBmb250LXNpemU9
IjE0LjAwIiBmaWxsPSJ3aGl0ZSI+cGN0PC90ZXh0Pgo8cG9seWdvbiBmaWxsPSIjZmY5MTAwIiBz
dHJva2U9Im5vbmUiIHBvaW50cz0iMTE0LC0yOTYuNSAxMTQsLTMyMS41IDIyNSwtMzIxLjUgMjI1
LC0yOTYuNSAxMTQsLTI5Ni41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTQ5IiB5
PSItMzA1LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIx
NC4wMCIgZmlsbD0id2hpdGUiPnB2ZWNtPC90ZXh0Pgo8cG9seWdvbiBmaWxsPSIjZmY5MTAwIiBz
dHJva2U9Im5vbmUiIHBvaW50cz0iMjMwLC0yOTYuNSAyMzAsLTMyMS41IDM1MSwtMzIxLjUgMzUx
LC0yOTYuNSAyMzAsLTI5Ni41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMjY0LjUi
IHk9Ii0zMDUuMyIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBmb250LXNpemU9
IjE0LjAwIiBmaWxsPSJ3aGl0ZSI+cHZlY2VwaDwvdGV4dD4KPHBvbHlnb24gZmlsbD0iI2ZmOTEw
MCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjM1NiwtMjk2LjUgMzU2LC0zMjEuNSA0OTksLTMyMS41
IDQ5OSwtMjk2LjUgMzU2LC0yOTYuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjM5
MyIgeT0iLTMwNS4zIiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYiIGZvbnQtc2l6
ZT0iMTQuMDAiIGZpbGw9IndoaXRlIj5wdmUmIzQ1O2ZpcmV3YWxsPC90ZXh0Pgo8cG9seWdvbiBm
aWxsPSIjMDA2MTdmIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iMTIsLTIxOC41IDEyLC0yODMuNSA1
MDYsLTI4My41IDUwNiwtMjE4LjUgMTIsLTIxOC41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFy
dCIgeD0iMjIwLjUiIHk9Ii0yNjUuNSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlm
IiBmb250LXNpemU9IjIwLjAwIiBmaWxsPSJ3aGl0ZSI+U2VydmljZXM8L3RleHQ+Cjxwb2x5Z29u
IGZpbGw9IiMwMDYxN2YiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSIxNCwtMjIwLjUgMTQsLTI1NS41
IDUwNCwtMjU1LjUgNTA0LC0yMjAuNSAxNCwtMjIwLjUiLz4KPHBvbHlnb24gZmlsbD0iI2U1NzAw
MCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjE5LC0yMjUuNSAxOSwtMjUwLjUgMTA0LC0yNTAuNSAx
MDQsLTIyNS41IDE5LC0yMjUuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjM0IiB5
PSItMjM0LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIx
NC4wMCIgZmlsbD0id2hpdGUiPnB2ZXByb3h5PC90ZXh0Pgo8cG9seWdvbiBmaWxsPSIjZTU3MDAw
IiBzdHJva2U9Im5vbmUiIHBvaW50cz0iMTA5LC0yMjUuNSAxMDksLTI1MC41IDIxMSwtMjUwLjUg
MjExLC0yMjUuNSAxMDksLTIyNS41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTI0
IiB5PSItMjM0LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXpl
PSIxNC4wMCIgZmlsbD0id2hpdGUiPnB2ZWRhZW1vbjwvdGV4dD4KPHBvbHlnb24gZmlsbD0iI2U1
NzAwMCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjIxNiwtMjI1LjUgMjE2LC0yNTAuNSAyOTgsLTI1
MC41IDI5OCwtMjI1LjUgMjE2LC0yMjUuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9
IjIzMSIgeT0iLTIzNC4zIiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYiIGZvbnQt
c2l6ZT0iMTQuMDAiIGZpbGw9IndoaXRlIj5wdmVzdGF0ZDwvdGV4dD4KPHBvbHlnb24gZmlsbD0i
I2U1NzAwMCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjMwMywtMjI1LjUgMzAzLC0yNTAuNSAzOTgs
LTI1MC41IDM5OCwtMjI1LjUgMzAzLC0yMjUuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQi
IHg9IjMxNy41IiB5PSItMjM0LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIg
Zm9udC1zaXplPSIxNC4wMCIgZmlsbD0id2hpdGUiPnB2ZSYjNDU7aGEmIzQ1O2xybTwvdGV4dD4K
PHBvbHlnb24gZmlsbD0iI2U1NzAwMCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjQwMywtMjI1LjUg
NDAzLC0yNTAuNSA0OTksLTI1MC41IDQ5OSwtMjI1LjUgNDAzLC0yMjUuNSIvPgo8dGV4dCB0ZXh0
LWFuY2hvcj0ic3RhcnQiIHg9IjQxNy41IiB5PSItMjM0LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRp
Y2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0id2hpdGUiPnB2ZSYjNDU7Y2x1
c3RlcjwvdGV4dD4KPHBvbHlnb24gZmlsbD0iI2FiYmFiYSIgc3Ryb2tlPSJub25lIiBwb2ludHM9
IjIwLC05NS41IDIwLC0yMDQuNSAxMzMsLTIwNC41IDEzMywtOTUuNSAyMCwtOTUuNSIvPgo8dGV4
dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjYxIiB5PSItMTc4LjUiIGZvbnQtZmFtaWx5PSJIZWx2
ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIyMC4wMCIgZmlsbD0id2hpdGUiPlZNPC90ZXh0
Pgo8cG9seWdvbiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjI1LC0xMzcuNSAy
NSwtMTYyLjUgNzQsLTE2Mi41IDc0LC0xMzcuNSAyNSwtMTM3LjUiLz4KPHRleHQgdGV4dC1hbmNo
b3I9InN0YXJ0IiB4PSIzNyIgeT0iLTE0Ni4zIiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMt
U2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDYxN2YiPkFwcDwvdGV4dD4KPHBvbHln
b24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSI3OSwtMTM3LjUgNzksLTE2Mi41
IDEyOCwtMTYyLjUgMTI4LC0xMzcuNSA3OSwtMTM3LjUiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0
YXJ0IiB4PSI5MSIgeT0iLTE0Ni4zIiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYi
IGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDYxN2YiPkFwcDwvdGV4dD4KPHBvbHlnb24gZmls
bD0iIzAwNjE3ZiIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjI1LC0xMDAuNSAyNSwtMTMyLjUgMTI4
LC0xMzIuNSAxMjgsLTEwMC41IDI1LC0xMDAuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQi
IHg9IjMyLjUiIHk9Ii0xMTEuNSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBm
b250LXNpemU9IjIwLjAwIiBmaWxsPSJ3aGl0ZSI+R3Vlc3QgT1M8L3RleHQ+Cjxwb2x5Z29uIGZp
bGw9IiNhYmJhYmEiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSIxMzksLTk1LjUgMTM5LC0yMDQuNSAy
NTIsLTIwNC41IDI1MiwtOTUuNSAxMzksLTk1LjUiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0
IiB4PSIxODAiIHk9Ii0xNzguNSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBm
b250LXNpemU9IjIwLjAwIiBmaWxsPSJ3aGl0ZSI+Vk08L3RleHQ+Cjxwb2x5Z29uIGZpbGw9Indo
aXRlIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iMTQ0LC0xMzcuNSAxNDQsLTE2Mi41IDE5MywtMTYy
LjUgMTkzLC0xMzcuNSAxNDQsLTEzNy41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0i
MTU2IiB5PSItMTQ2LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1z
aXplPSIxNC4wMCIgZmlsbD0iIzAwNjE3ZiI+QXBwPC90ZXh0Pgo8cG9seWdvbiBmaWxsPSJ3aGl0
ZSIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjE5OCwtMTM3LjUgMTk4LC0xNjIuNSAyNDcsLTE2Mi41
IDI0NywtMTM3LjUgMTk4LC0xMzcuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjIx
MCIgeT0iLTE0Ni4zIiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYiIGZvbnQtc2l6
ZT0iMTQuMDAiIGZpbGw9IiMwMDYxN2YiPkFwcDwvdGV4dD4KPHBvbHlnb24gZmlsbD0iIzAwNjE3
ZiIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjE0NCwtMTAwLjUgMTQ0LC0xMzIuNSAyNDcsLTEzMi41
IDI0NywtMTAwLjUgMTQ0LC0xMDAuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjE1
MS41IiB5PSItMTExLjUiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1z
aXplPSIyMC4wMCIgZmlsbD0id2hpdGUiPkd1ZXN0IE9TPC90ZXh0Pgo8cG9seWdvbiBmaWxsPSIj
ZmY5MTAwIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iMTgsLTY1LjUgMTgsLTkxLjUgMjU0LC05MS41
IDI1NCwtNjUuNSAxOCwtNjUuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjEwOC41
IiB5PSItNzMuNSIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBmb250LXNpemU9
IjIwLjAwIiBmaWxsPSJ3aGl0ZSI+UUVNVTwvdGV4dD4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0
IiB4PSIzMjAuNSIgeT0iLTE5Mi44IiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYi
IGZvbnQtc2l6ZT0iMTQuMDAiPiA8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0i
MzIwLjUiIHk9Ii0xNzAuOCIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBmb250
LXNpemU9IjE0LjAwIj4gPC90ZXh0Pgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjMyMC41
IiB5PSItMTQ5LjMiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXpl
PSIxNC4wMCI+IDwvdGV4dD4KPHBvbHlnb24gZmlsbD0iI2FiYmFiYSIgc3Ryb2tlPSJub25lIiBw
b2ludHM9IjI2NiwtNjcuNSAyNjYsLTEzOS41IDM3OSwtMTM5LjUgMzc5LC02Ny41IDI2NiwtNjcu
NSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjI3OC41IiB5PSItMTEzLjUiIGZvbnQt
ZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIyMC4wMCIgZmlsbD0id2hp
dGUiPkNvbnRhaW5lcjwvdGV4dD4KPHBvbHlnb24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIg
cG9pbnRzPSIyNzEsLTcyLjUgMjcxLC05Ny41IDMyMCwtOTcuNSAzMjAsLTcyLjUgMjcxLC03Mi41
Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMjgzIiB5PSItODEuMyIgZm9udC1mYW1p
bHk9IkhlbHZldGljYSxzYW5zLVNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDA2MTdm
Ij5BcHA8L3RleHQ+Cjxwb2x5Z29uIGZpbGw9IndoaXRlIiBzdHJva2U9Im5vbmUiIHBvaW50cz0i
MzI1LC03Mi41IDMyNSwtOTcuNSAzNzQsLTk3LjUgMzc0LC03Mi41IDMyNSwtNzIuNSIvPgo8dGV4
dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjMzNyIgeT0iLTgxLjMiIGZvbnQtZmFtaWx5PSJIZWx2
ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwNjE3ZiI+QXBwPC90
ZXh0Pgo8cG9seWdvbiBmaWxsPSIjYWJiYWJhIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iMzg1LC02
Ny41IDM4NSwtMTM5LjUgNDk4LC0xMzkuNSA0OTgsLTY3LjUgMzg1LC02Ny41Ii8+Cjx0ZXh0IHRl
eHQtYW5jaG9yPSJzdGFydCIgeD0iMzk3LjUiIHk9Ii0xMTMuNSIgZm9udC1mYW1pbHk9IkhlbHZl
dGljYSxzYW5zLVNlcmlmIiBmb250LXNpemU9IjIwLjAwIiBmaWxsPSJ3aGl0ZSI+Q29udGFpbmVy
PC90ZXh0Pgo8cG9seWdvbiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjM5MCwt
NzIuNSAzOTAsLTk3LjUgNDM5LC05Ny41IDQzOSwtNzIuNSAzOTAsLTcyLjUiLz4KPHRleHQgdGV4
dC1hbmNob3I9InN0YXJ0IiB4PSI0MDIiIHk9Ii04MS4zIiBmb250LWZhbWlseT0iSGVsdmV0aWNh
LHNhbnMtU2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDYxN2YiPkFwcDwvdGV4dD4K
PHBvbHlnb24gZmlsbD0id2hpdGUiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSI0NDQsLTcyLjUgNDQ0
LC05Ny41IDQ5MywtOTcuNSA0OTMsLTcyLjUgNDQ0LC03Mi41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9y
PSJzdGFydCIgeD0iNDU2IiB5PSItODEuMyIgZm9udC1mYW1pbHk9IkhlbHZldGljYSxzYW5zLVNl
cmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDA2MTdmIj5BcHA8L3RleHQ+Cjxwb2x5Z29u
IGZpbGw9IiMwMDYxN2YiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSIxMiwtNy41IDEyLC01My41IDUw
NiwtNTMuNSA1MDYsLTcuNSAxMiwtNy41Ii8+Cjxwb2x5Z29uIGZpbGw9IiMwMDYxN2YiIHN0cm9r
ZT0ibm9uZSIgcG9pbnRzPSIxNCwtOS41IDE0LC01MS41IDUwNCwtNTEuNSA1MDQsLTkuNSAxNCwt
OS41Ii8+Cjxwb2x5Z29uIGZpbGw9IiNmZjkxMDAiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSIxOSwt
MTggMTksLTQzIDY0LC00MyA2NCwtMTggMTksLTE4Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFy
dCIgeD0iMjQiIHk9Ii0yNi44IiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYiIGZv
bnQtc2l6ZT0iMTQuMDAiIGZpbGw9IndoaXRlIj5LVk08L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9y
PSJzdGFydCIgeD0iMTUwLjUiIHk9Ii0yNS41IiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMt
U2VyaWYiIGZvbnQtc2l6ZT0iMjAuMDAiIGZpbGw9IndoaXRlIj5MaW51eCBLZXJuZWw8L3RleHQ+
Cjxwb2x5Z29uIGZpbGw9IiNmZjkxMDAiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSIzNDksLTE4IDM0
OSwtNDMgNDI0LC00MyA0MjQsLTE4IDM0OSwtMTgiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0
IiB4PSIzNTQiIHk9Ii0yNi44IiBmb250LWZhbWlseT0iSGVsdmV0aWNhLHNhbnMtU2VyaWYiIGZv
bnQtc2l6ZT0iMTQuMDAiIGZpbGw9IndoaXRlIj5BcHBBcm1vcjwvdGV4dD4KPHBvbHlnb24gZmls
bD0iI2ZmOTEwMCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjQyOSwtMTggNDI5LC00MyA0OTksLTQz
IDQ5OSwtMTggNDI5LC0xOCIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjQzNCIgeT0i
LTI2LjgiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2Esc2Fucy1TZXJpZiIgZm9udC1zaXplPSIxNC4w
MCIgZmlsbD0id2hpdGUiPmNncm91cHM8L3RleHQ+CjwvZz4KPC9nPgo8L3N2Zz4K" />
</div>
</div>
<div class="sect2">
<h3 id="intro_central_management">
<span>1.1. 中央管理</span>
<a class="headerlink" href="#intro_central_management" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>多くの方は単一ノードから開始されますが、Proxmox VEはクラスタ化された多数のノードへ拡張可能です。クラスタスタックは完全に統合されており、デフォルトのインストールに含まれております。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ユニークなマルチマスター設計</dt>
<dd>
<p>
統合されたウェブベースの管理インターフェースにより、
すべてのKVMゲストやLinuxコンテナ、さらにはクラスター全体の
明確な概要を把握できます。GUIからVMやコンテナ、ストレージ、
クラスターを容易に管理可能です。別途複雑で高価な管理サーバーを
導入する必要はありません。</p>
</dd>
<dt class="hdlist1">
Proxmoxクラスターファイルシステム（pmxcfs）</dt>
<dd>
<p>
Proxmox VEは独自のProxmox Clusterファイルシステム（pmxcfs）を採用しております。これは設定ファイルを保存するためのデータベース駆動型ファイルシステムです。これにより数千台の仮想マシンの設定を保存することが可能となります。corosyncを利用することで、これらのファイルはクラスターノード全体にリアルタイムで複製されます。ファイルシステムは全てのデータをディスク上の永続データベース内に保存しますが、データのコピーはRAMにも存在します。これにより最大30MBのストレージサイズが提供され、数千台の仮想マシンにも十分対応可能です。</p>
<div class="paragraph">
<p>Proxmox VE は、この独自のクラスターファイルシステムを採用している唯一の仮想化プラットフォームです。</p></div>
</dd>
<dt class="hdlist1">
ウェブベースの管理インターフェース</dt>
<dd>
<p>
Proxmox VEは操作が簡便です。管理タスクは付属のWebベース管理インターフェースで実行可能であり、別途管理ツールや大規模データベースを要する追加管理ノードのインストールは不要です。マルチマスター機能により、クラスター内の任意のノードから全体を管理できます。JavaScriptフレームワーク（ExtJS）を基盤とした
中央集中型のウェブベース管理により、
GUIから全機能を制御し、各ノードの履歴やシステムログを
一元的に確認できます。これにはバックアップ/復元ジョブの実行、
ライブマイグレーション、HAトリガーによるアクティビティも含まれます。</p>
</dd>
<dt class="hdlist1">
コマンドライン</dt>
<dd>
<p>
UnixシェルやWindows PowerShellの利便性に慣れた上級ユーザー向けに、Proxmox VEは仮想環境の全コンポーネントを管理するコマンドラインインターフェースを提供します。このコマンドラインインターフェースは、インテリジェントなタブ補完機能と、UNIXマニュアルページ形式の完全なドキュメントを備えています。</p>
</dd>
<dt class="hdlist1">
REST API</dt>
<dd>
<p>
Proxmox VEはRESTful APIを採用しております。主要データ形式としてJSONを選択し、
API全体はJSON Schemaを用いて正式に定義されております。これにより、
カスタムホスティング環境などのサードパーティ管理ツールとの
迅速かつ容易な統合が可能となります。</p>
</dd>
<dt class="hdlist1">
ロールベースの管理</dt>
<dd>
<p>
ロールベースのユーザーおよび権限管理を活用することで、
すべてのオブジェクト（仮想マシン、ストレージ、ノードなど）に対して
きめ細かいアクセス権を定義できます。これにより権限を定義し、
オブジェクトへのアクセス制御が可能となります。この概念はアクセス制御リスト（ACL）としても知られており、
各権限は特定のパスにおいて、主体（ユーザーまたはグループ）と
ロール（権限の集合）を指定します。</p>
</dd>
<dt class="hdlist1">
認証レルム</dt>
<dd>
<p>
Proxmox VEは、Microsoft Active Directory、LDAP、Linux PAM標準認証、または組み込みのProxmox VE認証サーバーなど、複数の認証ソースをサポートしております。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_flexible_storage">
<span>1.2. 柔軟なストレージ</span>
<a class="headerlink" href="#_flexible_storage" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEのストレージモデルは非常に柔軟です。仮想マシンイメージは、
1つまたは複数のローカルストレージ、あるいはNFSやSANなどの共有ストレージに
保存できます。制限はなく、必要な数のストレージ定義を設定可能です。
Debian Linuxで利用可能なあらゆるストレージ技術を使用できます。</p></div>
<div class="paragraph">
<p>共有ストレージ上に仮想マシンを保存する主な利点の一つは、
クラスタ内の全ノードが仮想マシンのディスクイメージに直接アクセスできるため、
稼働中のマシンをダウンタイムなしでライブマイグレーションできる点です。</p></div>
<div class="paragraph">
<p>現在、以下のネットワークストレージタイプをサポートしております：</p></div>
<div class="ulist"><ul>
<li>
<p>
LVMグループ（iSCSIターゲットによるネットワークバックアップ）</p>
</li>
<li>
<p>
iSCSIターゲット</p>
</li>
<li>
<p>
NFS共有</p>
</li>
<li>
<p>
CIFS共有</p>
</li>
<li>
<p>
Ceph RBD</p>
</li>
<li>
<p>
CephFS</p>
</li>
<li>
<p>
iSCSI LUN またはファイバー接続 SAN を直接ご利用いただけます。</p>
</li>
</ul></div>
<div class="paragraph">
<p>ローカルストレージとしてサポートされているタイプは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
LVMグループ（ブロックデバイス、FCデバイス、DRBDなどのローカルバックアップデバイス）</p>
</li>
<li>
<p>
ディレクトリ（既存ファイルシステム上のストレージ）</p>
</li>
<li>
<p>
ZFS</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_integrated_backup_and_restore">
<span>1.3. 統合されたバックアップと復元</span>
<a class="headerlink" href="#_integrated_backup_and_restore" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>統合バックアップツール（<span class="monospaced">vzdump</span>）は、稼働中のコンテナおよびKVMゲストの一貫性のあるスナップショットを作成します。基本的には、VM/CT設定ファイルを含むVMまたはCTデータのアーカイブを生成します。</p></div>
<div class="paragraph">
<p>さらに、<a href="#storage_pbs">Proxmox Backup Serverとの連携により</a>高度な機能が提供されます。
具体的には、フルバックアップとデータ重複排除の組み合わせ、
クライアント側暗号化の実行、テープまたはS3オブジェクトストレージへのバックアップ、
および他のオフサイトProxmox Backup Server設置先との同期が可能です。</p></div>
<div class="paragraph">
<p>QEMU/KVMライブバックアップは、NFS、CIFS、iSCSI LUN、Ceph RBD上のVMイメージを含む全てのストレージタイプに対応しております。新たなバックアップ形式は、VMバックアップを迅速かつ効率的に保存するよう最適化されております（スパースファイル、順不同データ、最小限のI/O）。</p></div>
</div>
<div class="sect2">
<h3 id="_high_availability_cluster">
<span>1.4. 高可用性クラスター</span>
<a class="headerlink" href="#_high_availability_cluster" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>マルチノードのProxmox VE HAクラスタにより、高可用性仮想サーバーの定義が可能となります。
Proxmox VE HAクラスタは実績あるLinux HA技術に基づき、
安定した信頼性の高いHAサービスを提供します。</p></div>
</div>
<div class="sect2">
<h3 id="_flexible_networking">
<span>1.5. 柔軟なネットワーク構成</span>
<a class="headerlink" href="#_flexible_networking" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEはブリッジ接続モデルを採用しております。全ての仮想マシンは、各ゲストから仮想ネットワークケーブルが同一スイッチに接続されているかのように、一つのブリッジを共有できます。仮想マシンを外部ネットワークに接続するため、ブリッジは物理ネットワークカードに接続され、TCP/IP設定が割り当てられます。</p></div>
<div class="paragraph">
<p>さらなる柔軟性のため、VLAN（IEEE 802.1q）およびネットワークボンディング/アグリゲーションが可能です。これにより、Linuxネットワークスタックの全機能を活用し、Proxmox VEホスト向けに複雑で柔軟な仮想ネットワークを構築することが可能となります。</p></div>
</div>
<div class="sect2">
<h3 id="_integrated_firewall">
<span>1.6. 統合ファイアウォール</span>
<a class="headerlink" href="#_integrated_firewall" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>統合ファイアウォールにより、任意の仮想マシンまたはコンテナインターフェース上でネットワークパケットをフィルタリングできます。一般的なファイアウォールルールセットは「セキュリティグループ」にグループ化可能です。</p></div>
</div>
<div class="sect2">
<h3 id="chapter_hyper_converged_infrastructure">
<span>1.7. ハイパーコンバージドインフラストラクチャ</span>
<a class="headerlink" href="#chapter_hyper_converged_infrastructure" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEは、コンピューティング、ストレージ、ネットワークリソースを緊密に統合し、
高可用性クラスタ、バックアップ/復元、災害復旧を管理する仮想化プラットフォームです。
すべてのコンポーネントはソフトウェア定義であり、相互に互換性があります。</p></div>
<div class="paragraph">
<p>そのため、一元化されたウェブ管理インターフェースを通じて、
単一システムのように管理することが可能です。これらの機能により、
Proxmox VEはオープンソースの<a href="https://en.wikipedia.org/wiki/Hyper-converged_infrastructure">ハイパーコンバージドインフラストラクチャ</a>（HCI<a href="https://en.wikipedia.org/wiki/Hyper-converged_infrastructure">）</a>の
導入と管理に最適な選択肢となります。</p></div>
<div class="sect3">
<h4 id="_benefits_of_a_hyper_converged_infrastructure_hci_with_proxmox_ve">1.7.1. Proxmox VE によるハイパーコンバージドインフラストラクチャ (HCI) の利点
<a class="headerlink" href="#_benefits_of_a_hyper_converged_infrastructure_hci_with_proxmox_ve" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ハイパーコンバージドインフラストラクチャ（HCI）は、
インフラストラクチャへの要求が高い一方で管理予算が限られている環境、
リモートオフィスや支店などの分散環境、
仮想プライベートクラウドやパブリッククラウドへの導入において特に有用です。</p></div>
<div class="paragraph">
<p>HCIは以下の利点を提供します：</p></div>
<div class="ulist"><ul>
<li>
<p>
スケーラビリティ：コンピューティング、ネットワーク、ストレージデバイスのシームレスな拡張（つまり、サーバーとストレージを迅速かつ互いに独立してスケールアップできます）。</p>
</li>
<li>
<p>
低コスト：Proxmox VEはオープンソースであり、
  コンピューティング、ストレージ、ネットワーク、バックアップ、管理センターなど、
  必要なすべてのコンポーネントを統合しています。高価なコンピューティング/ストレージインフラストラクチャの代替が可能です。</p>
</li>
<li>
<p>
データ保護と効率性：バックアップや災害復旧などのサービスが統合されています。</p>
</li>
<li>
<p>
シンプルさ：容易な設定と集中管理を実現します。</p>
</li>
<li>
<p>
オープンソース：ベンダーロックインがありません。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_hyper_converged_infrastructure_storage">1.7.2. ハイパーコンバージドインフラストラクチャ：ストレージ
<a class="headerlink" href="#_hyper_converged_infrastructure_storage" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEは、ハイパーコンバージドストレージインフラストラクチャの展開を緊密に統合したサポートを提供します。例えば、以下の2つのストレージ技術をWebインターフェースのみを使用して展開および管理することが可能です：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Ceph</strong>：自己修復・自己管理機能を備えた共有型ストレージシステムで、信頼性が高く拡張性に優れています。<a href="#chapter_pveceph">Proxmox VEノード上でのCephサービス管理方法をご確認ください</a>。</p>
</li>
<li>
<p>
<strong>ZFS</strong>：ファイルシステムと論理ボリュームマネージャを統合したシステムで、データ破損に対する広範な保護機能、様々なRAIDモード、高速かつ低コストのスナップショットなど、数多くの特長を備えています。<a href="#chapter_zfs">Proxmox VEノード上でZFSの力を活用する方法</a>をご覧ください。</p>
</li>
</ul></div>
<div class="paragraph">
<p>上記に加え、Proxmox VEは幅広い追加ストレージ技術の統合をサポートしております。
詳細は<a href="#chapter_storage">「ストレージマネージャー」の章でご</a>確認いただけます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_why_open_source">
<span>1.8. オープンソースの利点</span>
<a class="headerlink" href="#_why_open_source" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEはLinuxカーネルを採用し、Debian GNU/Linuxディストリビューションを基盤としております。Proxmox VEのソースコードは<a href="https://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General Public Licenseバージョン3</a>のもとで公開されております<a href="https://www.gnu.org/licenses/agpl-3.0.html">。</a>これにより、お客様はいつでも自由にソースコードを検証したり、プロジェクトへご自身で貢献したりすることが可能となります。</p></div>
<div class="paragraph">
<p>Proxmoxでは、可能な限りオープンソースソフトウェアを採用することをお約束しております。オープンソースソフトウェアの使用により、全ての機能への完全なアクセスが保証されるだけでなく、高いセキュリティと信頼性も確保されます。当社は、ソフトウェアを実行し、それを基盤として構築し、あるいは変更をプロジェクトにフィードバックするために、誰もがソースコードにアクセスする権利を持つべきであると考えております。Proxmoxが製品が常にプロフェッショナルな品質基準を満たすことを保証する一方で、皆様のご貢献を心よりお待ちしております。</p></div>
<div class="paragraph">
<p>オープンソースソフトウェアは、コストを抑え、
中核インフラを単一ベンダーに依存しない状態に保つことにも役立ちます。</p></div>
</div>
<div class="sect2">
<h3 id="_your_benefits_with_proxmox_ve">
<span>1.9. Proxmox VEのメリット</span>
<a class="headerlink" href="#_your_benefits_with_proxmox_ve" title="Permalink to this heading"></a></h3>
<div class="ulist"><ul>
<li>
<p>
オープンソースソフトウェア</p>
</li>
<li>
<p>
ベンダーロックインなし</p>
</li>
<li>
<p>
Linuxカーネル</p>
</li>
<li>
<p>
迅速なインストールと使いやすい操作性</p>
</li>
<li>
<p>
ウェブベースの管理インターフェース</p>
</li>
<li>
<p>
REST API</p>
</li>
<li>
<p>
活発な大規模コミュニティ</p>
</li>
<li>
<p>
管理コストが低く、導入が簡単</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="getting_help">
<span>1.10. サポートについて</span>
<a class="headerlink" href="#getting_help" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_proxmox_ve_wiki">1.10.1. Proxmox VE Wiki
<a class="headerlink" href="#_proxmox_ve_wiki" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>主な情報源は<a href="https://pve.proxmox.com/wiki/">Proxmox VE Wiki</a> です。リファレンス文書とユーザー提供コンテンツを統合したものです。</p></div>
</div>
<div class="sect3">
<h4 id="_community_support_forum">1.10.2. コミュニティサポートフォーラム
<a class="headerlink" href="#_community_support_forum" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE 自体は完全なオープンソースであるため、ユーザーの皆様には常に<a href="https://forum.proxmox.com/">Proxmox VE コミュニティフォーラムでの</a>議論や知識の共有をお勧めしております。このフォーラムは Proxmox サポートチームによって管理され、世界中から多くのユーザーが参加しています。言うまでもなく、このような大規模なフォーラムは情報を得るのに最適な場所です。</p></div>
</div>
<div class="sect3">
<h4 id="_mailing_lists">1.10.3. メーリングリスト
<a class="headerlink" href="#_mailing_lists" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>これはメールを通じてProxmox VEコミュニティと迅速に連絡を取る方法です。</p></div>
<div class="ulist"><ul>
<li>
<p>
ユーザー向けメーリングリスト：
<a href="http://lists.proxmox.com/cgi-bin/mailman/listinfo/pve-user">Proxmox VE ユーザーリスト</a></p>
</li>
</ul></div>
<div class="paragraph">
<p>Proxmox VEは完全なオープンソースであり、貢献を歓迎しております！開発者向けの主なコミュニケーションチャネルは以下です：</p></div>
<div class="ulist"><ul>
<li>
<p>
開発者向けメーリングリスト：
<a href="http://lists.proxmox.com/cgi-bin/mailman/listinfo/pve-devel">Proxmox VE 開発ディスカッション</a></p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_commercial_support">1.10.4. 商用サポート
<a class="headerlink" href="#_commercial_support" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox Server Solutions GmbHでは、
<a href="https://proxmox.com/en/proxmox-virtual-environment/pricing">Proxmox VE サブスクリプションサービスプランとして</a>
エンタープライズ向けサポートも提供しております。
サブスクリプションをご利用の全ユーザー様は
Proxmox<a href="#sysadmin_enterprise_repo">VE エンタープライズリポジトリ</a>にアクセス可能で、
ベーシック、スタンダード、プレミアムの各プランでは
Proxmox カスタマーポータルもご利用いただけます。
カスタマーポータルでは、Proxmox VE 開発者による
保証された応答時間でのヘルプとサポートを提供しております。</p></div>
<div class="paragraph">
<p>ボリュームディスカウントや、その他の詳細情報につきましては、
<a href="mailto:sales@proxmox.com">sales@proxmox.com</a> までお問い合わせください。</p></div>
</div>
<div class="sect3">
<h4 id="_bug_tracker">1.10.5. バグトラッカー
<a class="headerlink" href="#_bug_tracker" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmoxでは公開バグ<a href="https://bugzilla.proxmox.com">トラッカーをhttps://bugzilla.proxmox.comにて</a>運営しております。問題が発生した場合は、そちらにてご報告ください。問題とはバグだけでなく、新機能や機能強化のご要望も含まれます。バグトラッカーは問題の追跡に役立ち、解決時には通知が送信されます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="intro_project_history">
<span>1.11. プロジェクトの沿革</span>
<a class="headerlink" href="#intro_project_history" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>本プロジェクトは2007年に開始され、2008年に最初の安定版がリリースされました。当時はコンテナにOpenVZ、仮想マシンにQEMUとKVMを採用しておりました。クラスタリング機能は限定的で、ユーザーインターフェースも簡素な（サーバー生成のウェブページ）ものでした。</p></div>
<div class="paragraph">
<p>しかし、<a href="https://corosync.github.io/corosync/">Corosyncクラスタ</a>スタックを活用した新機能の開発を迅速に進め、
新たなProxmoxクラスタファイルシステム（pmxcfs）の導入は大きな前進となりました。
これにより、クラスタの複雑さがユーザーから完全に隠蔽されるため、
16ノードのクラスタ管理も単一ノードの管理と同様に簡単に行えるようになりました。</p></div>
<div class="paragraph">
<p>JSON-Schemaで記述された完全な宣言型仕様を備えた新REST APIの導入により、
他社がProxmox VEを自社のインフラに統合できるようになり、
追加サービスの提供も容易になりました。</p></div>
<div class="paragraph">
<p>また、この新しいREST APIにより、従来のユーザーインターフェースを、JavaScriptを使用したモダンなクライアントサイドのシングルページアプリケーションに置き換えることが可能となりました。さらに、旧式のJavaベースのVNCコンソールコード<a href="https://kanaka.github.io/noVNC/">をnoVNCに</a>置き換えました。これにより、仮想マシン（VM）の管理にはウェブブラウザのみが必要となります。</p></div>
<div class="paragraph">
<p>多様なストレージタイプのサポートも重要な取り組みです。特にProxmox VEは2014年、<a href="https://zfsonlinux.org/">Linux上でZFSを</a>デフォルト搭載した初のディストリビューションとなりました。もう一つの画期的な機能は、ハイパーバイザーノード上で<a href="https://ceph.com/">Cephストレージ</a>を実行・管理できる点です。このような構成は極めてコスト効率に優れています。</p></div>
<div class="paragraph">
<p>当プロジェクト開始当時、当社はKVMの商用サポートを提供する先駆的企業の一つでした。KVMプロジェクト自体も継続的に進化を続け、現在では広く利用されるハイパーバイザーとなっています。新機能は各リリースで追加されています。当社が開発したKVMライブバックアップ機能により、あらゆるストレージタイプ上でスナップショットバックアップの作成が可能となりました。</p></div>
<div class="paragraph">
<p>バージョン4.0における最も顕著な変更点は、OpenVZ<a href="https://linuxcontainers.org/">からLXCへの</a>移行でした。
コンテナは現在深く統合され、仮想マシンと同様のストレージおよびネットワーク機能を利用可能です。
同時に、<a href="#chapter_ha_manager">高可用性（HA）</a>環境の構成と管理を簡素化する、
<a href="#chapter_ha_manager">使いやすい高可用性（HA）マネージャー</a>を導入しました。</p></div>
<div class="paragraph">
<p>Proxmox VE 5の開発期間中には、<a href="#chapter_pvesr">非同期ストレージレプリケーションやACME/Let's</a>Encryptを利用した<a href="#sysadmin_certificate_management">自動証明書管理</a>をはじめ、数多くの機能が導入されました。</p></div>
<div class="paragraph">
<p><a href="#chapter_pvesdn">ソフトウェア定義ネットワーク（SDN）</a>スタックは、
コミュニティとの協力のもと開発されました。
バージョン6.2では実験的機能としてウェブインターフェースに統合され、
複雑なネットワーク構成の管理を簡素化しました。
バージョン8.1以降、SDN統合は完全サポートされ、
デフォルトでインストールされるようになりました。</p></div>
<div class="paragraph">
<p>2020年には新たなプロジェクト「<a href="https://www.proxmox.com/en/products/proxmox-backup-server/overview">Proxmox Backup Server」</a>がリリースされました。
これはRustプログラミング言語で記述されており、
Proxmox VEと深く統合されています。
増分バックアップや重複排除などの実装により、
バックアップ機能を大幅に強化しています。</p></div>
<div class="paragraph">
<p>さらに2022年には新たなツール「<a href="https://pom.proxmox.com">Proxmox Offline Mirror</a>」がリリースされ、
パブリックインターネットに接続できないシステムでもサブスクリプションを
利用可能となりました。</p></div>
<div class="paragraph">
<p>ウェブインターフェース向けに要望の多かったダークテーマは2023年に導入されました。
同年後半にはバージョン8.0でCephエンタープライズリポジトリへのアクセスが統合されました。
これにより、最も安定したCephリポジトリへのアクセスが、あらゆるProxmox VEサブスクリプションで利用可能となりました。</p></div>
<div class="paragraph">
<p><a href="#installation_installer">公式ISOインストーラーの</a>自動化・無人インストール機能がバージョン8.2で導入され、
Proxmox VEの大規模導入が大幅に簡素化されました。</p></div>
<div class="paragraph">
<p>同様にバージョン8.2で導入された<a href="#qm_import_virtual_machines">インポートウィザード</a>により、
ユーザーはVMware ESXiなどの他のハイパーバイザーからゲストを直接、
容易かつ効率的に移行できます。<span class="footnote"><br>[Proxmox VEへの移行
<a href="https://pve.proxmox.com/wiki/Migrate_to_Proxmox_VE">https://pve.proxmox.com/wiki/Migrate_to_Proxmox_VE</a>]<br></span> 
さらに、Open Virtualization Format（OVF/OVA）形式のアーカイブを、
ウェブインターフェース上のファイルベースストレージから直接インポートできるようになりました。</p></div>
</div>
<div class="sect2">
<h3 id="howto_improve_pve_docs">
<span>1.12. Proxmox VE ドキュメントの改善</span>
<a class="headerlink" href="#howto_improve_pve_docs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE ドキュメントへの貢献や改善は、常に歓迎しております。
貢献にはいくつかの方法がございます。</p></div>
<div class="paragraph">
<p>本ドキュメントに誤りや改善点をお見つけになりましたら、
修正のご提案を<a href="https://bugzilla.proxmox.com/">Proxmox バグトラッカー</a>にて
バグ報告としてご登録ください。</p></div>
<div class="paragraph">
<p>新規コンテンツの提案をご希望の場合は、以下のいずれかの方法をお選びください：</p></div>
<div class="ulist"><ul>
<li>
<p>
Wikiについて：特定の設定方法、ハウツーガイド、チュートリアルなどに関する情報提供には、Wikiが最適な選択肢となります。</p>
</li>
<li>
<p>
リファレンスドキュメント：すべてのユーザーに役立つ一般的な内容については、リファレンスドキュメントへの貢献をご提案ください。これには、Proxmox VE機能のインストール、設定、使用方法、トラブルシューティングに関するすべての情報が含まれます。リファレンスドキュメントは
<a href="https://en.wikipedia.org/wiki/AsciiDoc">asciidoc形式</a>で記述されています。
ドキュメントを編集するには、
<span class="monospaced">git://git.proxmox.com/git/pve-docs.git</span>
のgitリポジトリをクローンし、
<a href="https://git.proxmox.com/?p=pve-docs.git;a=blob_plain;f=README.adoc;hb=HEAD">README.adoc</a>ファイルの指示に従ってください。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VEのコードベースでの作業にご興味がおありでしたら、
<a href="https://pve.proxmox.com/wiki/Developer_Documentation">開発者向けドキュメントの</a>Wiki記事が
開始方法をご案内いたします。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="translation">
<span>1.13. Proxmox VE の翻訳</span>
<a class="headerlink" href="#translation" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEのユーザーインターフェースはデフォルトで英語表示となります。
しかしながら、コミュニティの皆様のご協力により、
他の言語への翻訳もご利用いただけます。
新言語の追加、最新機能の翻訳、不完全または不一致な翻訳の改善など、
あらゆるご支援を歓迎いたします。</p></div>
<div class="paragraph">
<p>翻訳ファイルの管理には<a href="https://www.gnu.org/software/gettext/">gettextを使用</a>しております。
<a href="https://poedit.net/">Poeditなどの</a>ツールは翻訳ファイルを編集するための使いやすいユーザーインターフェースを提供しますが、
お使いの環境に合わせてお好みのエディタをご利用いただけます。
翻訳作業にプログラミングの知識は不要です。</p></div>
<div class="sect3">
<h4 id="i18n_with_git">1.13.1. gitを使用した翻訳
<a class="headerlink" href="#i18n_with_git" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>言語ファイルは<a href="https://git.proxmox.com/?p=proxmox-i18n.git">gitリポジトリとして</a>公開されております。
gitに精通されている方は、<a href="https://pve.proxmox.com/wiki/Developer_Documentation">開発者向けドキュメント</a>に従い
ご協力いただけますと幸いです。</p></div>
<div class="paragraph">
<p>新しい翻訳を作成するには、以下の手順を行ってください（&amp;lt;LANG&amp;gt;を言語IDに置き換えてください）：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># git clone git://git.proxmox.com/git/proxmox-i18n.git
# cd proxmox-i18n
# make init-&amp;lt;LANG&amp;gt;.po</pre>
</div></div>
<div class="paragraph">
<p>あるいは、お好みのエディターを使用して既存の翻訳を編集することも可能です：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># poedit &amp;lt;LANG&amp;gt;.po</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="i18n_without_git">1.13.2. gitを使用しない翻訳
<a class="headerlink" href="#i18n_without_git" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>gitに慣れていなくても、Proxmox VEの翻訳にご協力いただけます。
まず、<a href="https://git.proxmox.com/?p=proxmox-i18n.git;a=tree">言語ファイルはこちらから</a>ダウンロードいただけます。
改善したい言語を探し、その言語ファイルの「raw」リンクを右クリックして
<em>「リンク先を保存」</em>を選択してください<em>。</em>
ファイルに変更を加えた<em>後</em>、最終的な翻訳を署名済みの
<a href="https://pve.proxmox.com/wiki/Developer_Documentation#Software_License_and_Copyright">貢献者ライセンス契約書</a>と共に
office(at)proxmox.com まで直接お送りください。</p></div>
</div>
<div class="sect3">
<h4 id="_testing_the_translation">1.13.3. 翻訳のテスト
<a class="headerlink" href="#_testing_the_translation" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEで翻訳を反映させるには、まず<span class="monospaced">.po</span>ファイルを<span class="monospaced">.js</span>ファイルに変換する必要があります。
これには、同じリポジトリ内にある以下のスクリプトを実行してください：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># ./po2js.pl -t pve xx.po &amp;gt;pve-lang-xx.js</pre>
</div></div>
<div class="paragraph">
<p>生成されたファイル<span class="monospaced">pve-lang-xx.js</span>は、
テスト目的で Proxmox サーバー上の
<span class="monospaced">/usr/share/pve-i18n</span> ディレクトリにコピーしてください。</p></div>
<div class="paragraph">
<p>あるいは、リポジトリのルートディレクトリから以下のコマンドを実行し、debパッケージをビルドすることも可能です：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># make deb</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">いずれの方法でも動作させるには、システムに以下のPerlパッケージがインストールされている必要があります。Debian/Ubuntuの場合：</td>
</tr></table>
</div>
<div class="literalblock">
<div class="content monospaced">
<pre># apt-get install perl liblocale-po-perl libjson-perl</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_sending_the_translation">1.13.4. 翻訳の送信方法
<a class="headerlink" href="#_sending_the_translation" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>完成した翻訳ファイル（<span class="monospaced">.poファイル</span>）は、署名済みの貢献者ライセンス契約書と共に、
office(at)proxmox.com 宛てにProxmoxチームへお送りください。
あるいは、開発経験をお持ちの場合は、パッチとしてProxmox VE開発メーリングリストへ
送信することも可能です。詳細は
<a href="https://pve.proxmox.com/wiki/Developer_Documentation">開発者向けドキュメントをご参照ください</a>。</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_installation">
2. Proxmox VE のインストール
<a class="headerlink" href="#chapter_installation" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VEはDebianを基盤としております。このため、Proxmoxが提供するインストールディスクイメージ（ISOファイル）には、完全なDebianシステムに加え、必要なProxmox VEパッケージが全て含まれております。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VE リリースと Debian リリースの対応関係については、
<a href="#faq-support-table">FAQ のサポート表</a>をご参照ください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>インストーラーが設定をガイドし、ローカルディスクのパーティション分割、
基本システム設定（タイムゾーン、言語、ネットワークなど）の適用、
必要な全パッケージのインストールを可能にします。このプロセスは数分以内で完了します。
提供されているISOファイルを使用したインストールは、新規ユーザーおよび既存ユーザー双方に推奨される方法です。</p></div>
<div class="paragraph">
<p>あるいは、既存のDebianシステム上にProxmox VEをインストールすることも可能です。
この方法は、Proxmox VEに関する詳細な知識が必要なため、上級ユーザーのみに推奨されます。</p></div>
<div class="sect2">
<h3 id="_system_requirements">
<span>2.1. システム要件</span>
<a class="headerlink" href="#_system_requirements" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEを本番環境で運用される際には、高品質なサーバーハードウェアのご使用をお勧めいたします。
ホスト障害の影響をさらに軽減するため、高可用性（HA）を備えた仮想マシンやコンテナをクラスター環境で運用することが可能です。</p></div>
<div class="paragraph">
<p>Proxmox VE は、ローカルストレージ（DAS）、SAN、NAS、および Ceph RBD のような分散ストレージを利用できます。詳細は<a href="#chapter_storage">ストレージの章</a>をご覧ください。</p></div>
<div class="sect3">
<h4 id="install_minimal_requirements">2.1.1. 評価用最小要件
<a class="headerlink" href="#install_minimal_requirements" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>これらの最小要件は評価目的のみであり、本番環境での使用は推奨されません。</p></div>
<div class="ulist"><ul>
<li>
<p>
CPU: 64ビット (Intel 64 または AMD64)</p>
</li>
<li>
<p>
KVM完全仮想化サポートのため、Intel VT/AMD-V対応CPU/マザーボード</p>
</li>
<li>
<p>
RAM: 1 GB RAM、ゲスト用に追加のRAMが必要</p>
</li>
<li>
<p>
ハードドライブ</p>
</li>
<li>
<p>
ネットワークカード（NIC）1枚</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="install_recommended_requirements">2.1.2. 推奨システム要件
<a class="headerlink" href="#install_recommended_requirements" title="Permalink to this heading"></a></h4>
<div class="ulist"><ul>
<li>
<p>
Intel 64 または AMD64 アーキテクチャで、Intel VT/AMD-V CPU フラグが有効なもの。</p>
</li>
<li>
<p>
メモリ：OSおよびProxmox VEサービス用に最低2GB、さらにゲスト用に割り当てられたメモリが必要です。CephおよびZFSをご利用の場合、追加メモリが必要となります。使用ストレージ1TBあたり約1GBのメモリが必要です。</p>
</li>
<li>
<p>
高速かつ冗長化されたストレージ。最良の結果はSSDで得られます。</p>
</li>
<li>
<p>
OSストレージ：
バッテリー保護付き書き込みキャッシュ（BBU）を備えたハードウェアRAID、
またはZFSを使用した非RAID構成（ZIL用にSSDをオプションで追加）をご利用ください。</p>
</li>
<li>
<p>
VMストレージ：</p>
<div class="ulist"><ul>
<li>
<p>
ローカルストレージには、バッテリーバックアップ付き書き込みキャッシュ（BBU）を備えたハードウェアRAID、
またはZFSおよびCeph用の非RAIDのいずれかをご利用ください。ZFSもCephもハードウェアRAIDコントローラーとは互換性がございません。</p>
</li>
<li>
<p>
共有および分散ストレージは可能です。</p>
</li>
<li>
<p>
良好なパフォーマンスのためには、電源喪失保護機能（PLP）を備えたSSDの使用をお勧めいたします。
一般消費者向けSSDの使用はお控えください。</p>
</li>
</ul></div>
</li>
<li>
<p>
冗長化された（マルチ）ギガビットNICを基本とし、採用するストレージ技術やクラスタ構成に応じて追加NICが必要です。</p>
</li>
<li>
<p>
PCI(e)パススルーの場合、CPUがVT-d/AMD-dフラグをサポートしている必要があります。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_simple_performance_overview">2.1.3. 簡易パフォーマンス概要
<a class="headerlink" href="#_simple_performance_overview" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>インストール済みの Proxmox VE システムにおける CPU およびハードディスクの性能概要を把握するには、同梱の<span class="monospaced">pveperf</span>ツールを実行してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">これはあくまで簡易的な一般的なベンチマークです。より詳細なテスト、特にシステムのI/O性能に関するテストの実施をお勧めいたします。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_supported_web_browsers_for_accessing_the_web_interface">2.1.4. Webインターフェースアクセス対応ブラウザ
<a class="headerlink" href="#_supported_web_browsers_for_accessing_the_web_interface" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ウェブベースのユーザーインターフェースにアクセスするには、以下のブラウザのいずれかをご利用になることをお勧めいたします：</p></div>
<div class="ulist"><ul>
<li>
<p>
Firefox（今年度のリリース版）、または最新の拡張サポートリリース版</p>
</li>
<li>
<p>
Chrome（今年度のリリース版）</p>
</li>
<li>
<p>
Microsoft Edge（Microsoftが現在サポートしているバージョン）</p>
</li>
<li>
<p>
Safari（今年リリースされたバージョン）</p>
</li>
</ul></div>
<div class="paragraph">
<p>モバイルデバイスからアクセスされた場合、Proxmox VEは軽量なタッチベースのインターフェースを表示します。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="installation_prepare_media">
<span>2.2. インストールメディアの準備</span>
<a class="headerlink" href="#installation_prepare_media" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>インストーラーISOイメージは以下からダウンロードしてください：<a href="https://www.proxmox.com/en/downloads/proxmox-virtual-environment/iso">https://www.proxmox.com/en/downloads/proxmox-virtual-environment/iso</a></p></div>
<div class="paragraph">
<p>Proxmox VEのインストールメディアはハイブリッドISOイメージです。以下の2つの方法で動作します：</p></div>
<div class="ulist"><ul>
<li>
<p>
CDまたはDVDに書き込む準備が整ったISOイメージファイルです。</p>
</li>
<li>
<p>
USBフラッシュドライブ（USBメモリ）にコピー可能な生セクタ（IMG）イメージファイルです。</p>
</li>
</ul></div>
<div class="paragraph">
<p>Proxmox VE のインストールには、USB フラッシュドライブの使用が推奨されます。
より高速な方法だからです。</p></div>
<div class="sect3">
<h4 id="_prepare_a_usb_flash_drive_as_installation_medium">2.2.1. インストールメディアとしてUSBフラッシュドライブを準備する
<a class="headerlink" href="#_prepare_a_usb_flash_drive_as_installation_medium" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>フラッシュドライブには、少なくとも1GBの空き容量が必要です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">UNetbootinはご使用にならないでください。Proxmox VEのインストールイメージでは動作しません。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">USBフラッシュドライブがマウントされておらず、
重要なデータが含まれていないことを必ずご確認ください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_instructions_for_gnu_linux">2.2.2. GNU/Linux 向け手順
<a class="headerlink" href="#_instructions_for_gnu_linux" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Unix系オペレーティングシステムでは、<span class="monospaced">dd</span>コマンドを使用してISOイメージをUSBフラッシュドライブにコピーしてください。まず、USBフラッシュドライブの正しいデバイス名を確認します（下記参照）。その後、<span class="monospaced">dd</span>コマンドを実行します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dd bs=1M conv=fdatasync if=./proxmox-ve_*.iso of=/dev/XYZ</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">/dev/XYZ を正しいデバイス名に置き換え、入力ファイル名（<em>およびパス</em>）を適宜変更してください。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">十分ご注意ください。誤ったディスクを上書きしないようご注意ください。</td>
</tr></table>
</div>
<div class="sect4">
<h5 id="_find_the_correct_usb_device_name">正しいUSBデバイス名の確認方法<a class="headerlink" href="#_find_the_correct_usb_device_name" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>USBフラッシュドライブの名称を確認する方法は2つございます。
1つ目は、フラッシュドライブを接続<span class="monospaced">する前後のdmesgコマンド出力の</span>最終行を比較する方法です。
2つ目は、<span class="monospaced">lsblkコマンド</span>の出力を比較する方法です。
ターミナルを開き、以下のコマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lsblk</pre>
</div></div>
<div class="paragraph">
<p>その後、USBフラッシュドライブを接続し、再度コマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lsblk</pre>
</div></div>
<div class="paragraph">
<p>新しいデバイスが表示されます。これが使用すべきデバイスです。万全を期すため、
表示されたサイズがご使用のUSBフラッシュドライブと一致するかご確認ください。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_instructions_for_macos">2.2.3. macOS の手順
<a class="headerlink" href="#_instructions_for_macos" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ターミナルを開きます（Spotlightで「ターミナル」と検索してください）。</p></div>
<div class="paragraph">
<p><span class="monospaced">hdiutil</span> の convert オプションを使用して<span class="monospaced">.iso</span>ファイルを<span class="monospaced">.dmg</span>形式に変換します。
例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># hdiutil convert proxmox-ve_*.iso -format UDRW -o proxmox-ve_*.dmg</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">macOSでは、出力ファイル名に自動的に<em>.dmgが</em>追加される傾向があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>現在のデバイス一覧を取得するには、以下のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># diskutil list</pre>
</div></div>
<div class="paragraph">
<p>次にUSBフラッシュドライブを挿入し、再度このコマンドを実行して、
どのデバイスノードが割り当てられたかを確認します（例：/dev/diskX）。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># diskutil list
# diskutil unmountDisk /dev/diskX</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">最後のコマンドで表示されたディスク番号を X に置き換えてください。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content monospaced">
<pre># sudo dd if=proxmox-ve_*.dmg bs=1M of=/dev/rdiskX</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">最後のコマンドでは、<em>diskX</em> ではなく<em>rdiskX</em> を使用することをお勧めいたします。これにより
書き込み速度が向上します。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_instructions_for_windows">2.2.4. Windows 向け手順
<a class="headerlink" href="#_instructions_for_windows" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="_using_etcher">Etcherの使用
<a class="headerlink" href="#_using_etcher" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Etcherはそのままお使いいただけます。<a href="https://etcher.io">Etcherはhttps://etcher.ioから</a>ダウンロードしてください。ISOファイルとUSBフラッシュドライブの選択プロセスをガイドします。</p></div>
</div>
<div class="sect4">
<h5 id="_using_rufus">Rufusの使用
<a class="headerlink" href="#_using_rufus" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Rufusはより軽量な代替ツールですが、動作させるには<strong>DDモード</strong>を使用する必要があります。<a href="https://rufus.ie/">Rufusはhttps://rufus.ie/</a>からダウンロードできます<a href="https://rufus.ie/">。</a>インストール版またはポータブル版をご利用ください。書き込み先ドライブとProxmox VEのISOファイルを選択します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content"><em>起動</em>後、異なるバージョンのGRUBをダウンロードするかどうかのダイアログが表示されますので、<em>「いいえ」</em>をクリックしてください。次のダイアログでは<em>DD</em>モードを選択します。</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="installation_installer">
<span>2.3. Proxmox VE インストーラの使用</span>
<a class="headerlink" href="#installation_installer" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>インストーラーISOイメージには以下の内容が含まれております：</p></div>
<div class="ulist"><ul>
<li>
<p>
完全なオペレーティングシステム (Debian Linux、64ビット)</p>
</li>
<li>
<p>
Proxmox VE インストーラーは、ローカルディスクを ext4、XFS、BTRFS（技術プレビュー）、または ZFS でパーティション分割し、オペレーティングシステムをインストールします。</p>
</li>
<li>
<p>
KVM および LXC サポート付き Proxmox VE Linux カーネル</p>
</li>
<li>
<p>
仮想マシン、コンテナ、ホストシステム、クラスター、および必要なすべてのリソースを管理するための完全なツールセット</p>
</li>
<li>
<p>
Webベースの管理インターフェース</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">インストールプロセス中に、選択されたドライブ上の既存データはすべて削除されます。
インストーラーは他のオペレーティングシステム用のブートメニューエントリを追加しません。</td>
</tr></table>
</div>
<div class="paragraph">
<p><a href="#installation_prepare_media">準備されたインストールメディア</a>
（例：USBフラッシュドライブまたはCD-ROM）を挿入し、そこから起動してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">サーバーのファームウェア設定において、インストールメディア（例：USB）からの起動が有効になっていることをご確認ください。Proxmox VE バージョン 8.1 以前のインストーラーを起動する際は、セキュアブートを無効にする必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-grub-menu.png">
<img src="images/screenshot/pve-grub-menu.png" alt="screenshot/pve-grub-menu.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>正しい項目（例：<em>USBから起動</em>）を選択すると、Proxmox VEメニューが表示され、
以下のいずれかのオプションを選択できます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Proxmox VE のインストール (グラフィカル)</dt>
<dd>
<p>
通常のインストールを開始します。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">インストールウィザードはキーボードのみでも操作可能です。各ボタンの下線付き<span class="monospaced">文字とALTキーを</span>同時に押すことでボタンをクリックできます。例：<span class="monospaced">次へボタンを押す</span> <span class="monospaced">にはALT + N</span>を押します。</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
Proxmox VE のインストール (ターミナル UI)</dt>
<dd>
<p>
ターミナルモードのインストールウィザードを開始します。グラフィカルインストーラと同様のインストール体験を提供しますが、非常に古いハードウェアや最新のハードウェアとの互換性が一般的に優れています。</p>
</dd>
<dt class="hdlist1">
Proxmox VE のインストール（ターミナル UI、シリアルコンソール）</dt>
<dd>
<p>
ターミナルモードのインストールウィザードを開始します。さらに、Linuxカーネルの設定を行い、マシンの（最初の）シリアルポートを入力出力に使用します。これは、マシンが完全にヘッドレスでシリアルコンソールのみが利用可能な場合に使用できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-tui-installer.png">
<img src="images/screenshot/pve-tui-installer.png" alt="screenshot/pve-tui-installer.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>どちらのモードも、実際のインストールプロセスには同じコードベースを使用しており、
10年以上にわたるバグ修正の恩恵を受け、機能の互換性を確保しています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">グラフィカルインストーラが、例えばドライバの問題などで正常に動作しない場合、<em>ターミナル UI</em>オプションをご利用いただけます。
<a href="#nomodeset_kernel_param"> <span class="monospaced">nomodeset</span>カーネルパラメータの追加についてもご参照</a>ください。</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
詳細オプション：Proxmox VE のインストール（グラフィカル、デバッグモード）</dt>
<dd>
<p>
デバッグモードでインストールを開始します。インストール工程の複数箇所でコンソールが開かれます。これにより、問題発生時の状況分析に役立ちます。デバッグコンソールを終了するには、<span class="monospaced">CTRL-D</span>を押してください。このオプションは、基本的なツールを全て備えたライブシステムを起動するために使用できます。例えば、<a href="#chapter_zfs">劣化したZFS<em>rpoolの</em>修復や</a>、既存のProxmox VE環境の<a href="#sysboot">ブートローダー</a>修正などに活用できます。</p>
</dd>
<dt class="hdlist1">
詳細オプション：Proxmox VE のインストール（ターミナル UI、デバッグモード）</dt>
<dd>
<p>
グラフィカルデバッグモードと同様ですが、代わりにターミナルベースのインストーラを実行する準備を行います。</p>
</dd>
<dt class="hdlist1">
詳細オプション：Proxmox VE のインストール（シリアルコンソールデバッグモード）</dt>
<dd>
<p>
ターミナルベースのデバッグモードと同様ですが、さらにLinuxカーネルを設定し、
マシンの（最初の）シリアルポートを出力および入力に使用します。</p>
</dd>
<dt class="hdlist1">
詳細オプション：Proxmox VE のインストール（自動化）</dt>
<dd>
<p>
ISOが自動インストール用に適切に準備されていない場合でも、インストーラを無人モードで起動します。このオプションはハードウェアの詳細情報を収集したり、自動インストール設定のデバッグに有用です。詳細は<a href="#installation_unattended">無人インストール</a>をご参照ください。</p>
</dd>
<dt class="hdlist1">
詳細オプション：レスキューブート</dt>
<dd>
<p>
このオプションを使用すると、既存のインストール環境を起動できます。接続されている全てのハードディスクを検索し、既存のインストール環境が見つかった場合、ISO内のLinuxカーネルを使用してそのディスクから直接起動します。ブートローダー（<span class="monospaced">GRUB/systemd-boot</span>）に問題がある場合や、BIOS/UEFIがディスクのブートブロックを読み取れない場合に有用です。</p>
</dd>
<dt class="hdlist1">
詳細オプション：メモリテスト（memtest86+）</dt>
<dd>
<p>
<span class="monospaced">memtest86+</span>を実行します<span class="monospaced">。</span>メモリが正常に機能し、エラーがないかを確認するのに有用です。このオプションを実行するには、UEFIファームウェア設定ユーティリティでセキュアブートを無効にする必要があります。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>通常は<strong>「Install Proxmox VE (Graphical)</strong>」を選択してインストールを開始します。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-select-target-disk.png">
<img src="images/screenshot/pve-select-target-disk.png" alt="screenshot/pve-select-target-disk.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>最初のステップは、エンドユーザー使用許諾契約書（EULA）をお読みいただくことです。その後、
インストール対象のハードディスクを選択いただけます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">デフォルトではサーバー全体が使用され、既存のデータはすべて削除されます。
インストールを進める前に、サーバー上に重要なデータが存在しないことをご確認ください。</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">オプションボタンでは</span>、対象ファイルシステムを選択できます。
デフォルトは<span class="monospaced">ext4</span> です。ファイルシステムとして<span class="monospaced">ext4</span>または<span class="monospaced">xfs</span>を選択した場合、
インストーラーは LVM を使用し、LVM スペースを制限する追加オプションを提供します
（<a href="#advanced_lvm_options">下記参照</a>）。</p></div>
<div class="paragraph">
<p>Proxmox VEはZFS上にもインストール可能です。ZFSは複数のソフトウェアRAIDレベルを提供するため、
ハードウェアRAIDコントローラを搭載していないシステム向けの選択肢となります。
対象ディスク<span class="monospaced">はオプションダイアログで</span>選択する必要があります。ZFS固有の詳細設定は
<a href="#advanced_zfs_options"><span class="monospaced">「詳細オプション」</span></a>で変更可能です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">ハードウェアRAID上にZFSを構築することはサポートされておらず、データ損失の原因となる可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-select-location.png">
<img src="images/screenshot/pve-select-location.png" alt="screenshot/pve-select-location.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>次のページでは、お住まいの地域、タイムゾーン、キーボードレイアウトなどの基本設定を尋ねます。地域情報は、更新速度向上のため近隣のダウンロードサーバーを選択するために使用されます。インストーラーは通常これらの設定を自動検出できますので、自動検出が失敗した場合や、お住まいの国で一般的でないキーボードレイアウトを使用したい場合など、ごく稀な状況でのみ変更が必要です。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-set-password.png">
<img src="images/screenshot/pve-set-password.png" alt="screenshot/pve-set-password.png" width=250 style="padding: 0 10px 0 0;float:left;" /></a>
<p>次に、スーパーユーザー（<span class="monospaced">root</span>）のパスワードとメールアドレスを指定する必要があります。
パスワードは最低8文字以上で構成してください。より強力なパスワードの使用を強く推奨します。
ガイドラインは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
パスワードは最低12文字以上でお願いいたします。</p>
</li>
<li>
<p>
小文字と大文字のアルファベット、数字、記号を含めてください。</p>
</li>
<li>
<p>
文字の繰り返し、キーボードのパターン、一般的な辞書語、
  文字や数字の連続、ユーザー名、親族名や愛称、恋愛関係
  （現在または過去）、個人情報（例：ID番号、
  先祖の名前や日付）は避けてください。</p>
</li>
</ul></div>
<div class="paragraph">
<p>メールアドレスは、システム管理者への通知送信に使用されます。
例：</p></div>
<div class="ulist"><ul>
<li>
<p>
利用可能なパッケージ更新に関する情報。</p>
</li>
<li>
<p>
定期的な<em>cron</em>ジョブからのエラーメッセージ。</p>
</li>
</ul></div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-setup-network.png">
<img src="images/screenshot/pve-setup-network.png" alt="screenshot/pve-setup-network.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>これらの通知メールはすべて、指定されたメールアドレス宛に送信されます。</p></div>
<div class="paragraph">
<p>最後のステップはネットワーク設定です。
ドロップダウンメニュー内で<em>「UP」</em>状態のネットワークインターフェースには、
名前前に丸印が表示されます。インストール時にはIPv4またはIPv6アドレスのいずれか一方のみを指定でき、
両方指定することはできませんのでご注意ください。デュアルスタックノードを設定する場合は、
インストール後に追加のIPアドレスを設定してください。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-installation.png">
<img src="images/screenshot/pve-installation.png" alt="screenshot/pve-installation.png" width=250 style="padding: 0 10px 0 0;float:left;" /></a>
<p>次のステップでは、これまで選択されたオプションの概要が表示されます。
すべての設定を再度ご確認いただき、変更が必要な場合は
「<span class="monospaced">前へ</span>」ボタンをご利用ください。</p></div>
<div class="paragraph">
<p><span class="monospaced">「インストール」</span>をクリックすると、インストーラーがディスクのフォーマットを開始し、
パッケージをターゲットディスクにコピーします。このステップが完了するまでお待ちいただき、
その後インストールメディアを取り外し、システムを再起動してください。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-install-summary.png">
<img src="images/screenshot/pve-install-summary.png" alt="screenshot/pve-install-summary.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>パッケージのコピーには通常数分かかります。所要時間は主にインストールメディアの速度と
対象ディスクの性能に依存します。</p></div>
<div class="paragraph">
<p>パッケージのコピーと設定が完了しましたら、サーバーを再起動してください。
デフォルトでは数秒後に自動的に再起動が行われます。</p></div>
<div class="paragraph">
<div class="title">インストール失敗時</div><p>インストールが失敗した場合は、セカンド TTY (<em>CTRL + ALT + F2</em>) で具体的なエラーを確認し、システムが<a href="#install_minimal_requirements">最低要件</a>を満たしていることをご確認ください。</p></div>
<div class="paragraph">
<p>それでもインストールが正常に動作しない場合は、
<a href="#getting_help">「ヘルプの入手方法」の章</a>をご参照ください。</p></div>
<div class="sect3">
<h4 id="_accessing_the_management_interface_post_installation">2.3.1. インストール後の管理インターフェースへのアクセス
<a class="headerlink" href="#_accessing_the_management_interface_post_installation" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-login-window.png">
<img src="images/screenshot/gui-login-window.png" alt="screenshot/gui-login-window.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>システムのインストールと再起動が正常に完了しましたら、Proxmox VEの
ウェブインターフェースを使用して、さらなる設定を行ってください。</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
インストール時に指定されたIPアドレスとポート8006にブラウザをアクセスしてください。
例：<a href="https://youripaddress:8006">https://youripaddress:8006</a></p>
</li>
<li>
<p>
<span class="monospaced">root</span>（realm<em>PAM</em>）ユーザー名とインストール時に設定したパスワードでログインしてください。</p>
</li>
<li>
<p>
エンタープライズリポジトリへのアクセス権を得るため、サブスクリプションキーをアップロードしてください。
  そうしない場合、セキュリティ修正、バグ修正、新機能のアップデートを取得するには、
  テストが不十分な公開パッケージリポジトリのいずれかを設定する必要があります。</p>
</li>
<li>
<p>
IP設定とホスト名をご確認ください。</p>
</li>
<li>
<p>
タイムゾーンをご確認ください。</p>
</li>
<li>
<p>
<a href="#chapter_pve_firewall">ファイアウォールの設定</a>をご確認ください。</p>
</li>
</ol></div>
</div>
<div class="sect3">
<h4 id="advanced_lvm_options">2.3.2. 高度なLVM設定オプション
<a class="headerlink" href="#advanced_lvm_options" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>インストーラーは、<span class="monospaced">pve</span> というボリュームグループ (VG) を作成します。また、<span class="monospaced">ext4</span>または<span class="monospaced">xfs</span>が使用される場合、<span class="monospaced">root</span>、<span class="monospaced">data</span>、<span class="monospaced">swap</span> という追加の論理ボリューム (LV) を作成します。これらのボリュームのサイズを制御するには、以下のコマンドを使用してください:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">hdsize</span></dt>
<dd>
<p>
使用するハードディスクの総容量を定義します。これにより、ハードディスク上に空き領域を確保し、
追加のパーティション分割（例えば、同じハードディスク上に追加のPVおよびVGを作成し、
LVMストレージとして使用可能）を行うことが可能となります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">スワップサイズ</span></dt>
<dd>
<p>
<span class="monospaced">スワップ</span>ボリュームのサイズを定義します。デフォルトはインストール済みメモリのサイズで、最小4GB、最大8GBです。結果の値はハードドライブのサイズの8分の1（<span class="monospaced">hdsize / 8</span>）を超えることはできません。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">0</span>に設定された場合、<span class="monospaced">スワップ</span>ボリュームは作成されません。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
最大ルートサイズ</dt>
<dd>
<p>
オペレーティングシステムを格納する<span class="monospaced">ルート</span>ボリュームの最大サイズを定義します。
利用可能なストレージが48ギガバイトを超える場合、デフォルト値はハードドライブの
サイズの4分の1（<span class="monospaced">hdsize / 4</span>）となり、最大96ギガバイトとなります。
利用可能なストレージが48ギガバイト未満の場合、ルートボリュームのサイズはハードドライブの容量の少なくとも半分（<span class="monospaced">hdsize / 2</span>）となります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">最大仮想メモリ</span></dt>
<dd>
<p>
<span class="monospaced">データ</span>ボリュームの最大サイズを定義します。<span class="monospaced">データ</span>ボリュームの実際のサイズは：</p>
<div class="paragraph">
<p><span class="monospaced">datasize = hdsize - rootsize - swapsize - minfree</span></p></div>
<div class="paragraph">
<p>ここで、<span class="monospaced">datasize は</span> <span class="monospaced">maxvz</span> を超えることはできません。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">LVMシンプロビジョニングの場合、<span class="monospaced">データサイズが</span>4GBを超える場合にのみ<span class="monospaced">データ</span>プールが作成されます。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">0</span>に設定された場合、<span class="monospaced">データ</span>ボリュームは作成されず、
ストレージ構成はそれに応じて調整されます。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">minfree</span></dt>
<dd>
<p>
LVMボリューム<span class="monospaced">グループpve内に</span>確保すべき空き領域の量を定義します。利用可能なストレージ容量が128GBを超える場合、デフォルト値は16GBとなります。それ以外<span class="monospaced">の場合はhdsize/8が</span>使用されます。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">LVMではスナップショット作成にVG内の空き領域が必要です（lvmthinスナップショットは除く）。</td>
</tr></table>
</div>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="advanced_zfs_options">2.3.3. 高度な ZFS 設定オプション
<a class="headerlink" href="#advanced_zfs_options" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFSを使用する場合、インストーラーはZFSプール<span class="monospaced">「rpool」</span>を作成します。スワップ領域は作成されませんが、インストールディスク上に未パーティション領域をスワップ用に確保することは可能です。インストール後にスワップ用zvolを作成することもできますが、問題が発生する可能性があります（<a href="#zfs_swap">ZFSスワップに関する注意事項</a>を参照）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ashift</span></dt>
<dd>
<p>
作成されるプ<span class="monospaced">ールのashift値を</span>定義します。<span class="monospaced">ashiftは</span>、基盤となるディスクのセクタサイズ（<span class="monospaced">ashiftの2乗がセクタサイズ</span>となります）以上、またはプールに追加される可能性のあるディスク（例えば故障ディスクの交換用など）のセクタサイズ以上で設定する必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">圧縮</span></dt>
<dd>
<p>
<span class="monospaced">rpool</span> に対して圧縮を有効にするかどうかを定義します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">チェックサム</span></dt>
<dd>
<p>
<span class="monospaced">rpool</span> で使用するチェックサムアルゴリズムを定義します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">コピー数</span></dt>
<dd>
<p>
<span class="monospaced">rpool</span> の<span class="monospaced">コピー数</span>パラメータを定義します。その意味や、これがディスクレベルの冗長性を置き換えない理由については、<span class="monospaced">zfs(8)</span>マニュアルページをご参照ください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ARC最大サイズ</span></dt>
<dd>
<p>
ARCが成長できる最大サイズを定義し、
それによってZFSが使用するメモリ量を制限します。
詳細は<a href="#sysadmin_zfs_limit_memory_usage">「ZFSメモリ使用量の制限方法</a>」のセクションも
ご参照ください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hdsize</span></dt>
<dd>
<p>
使用されるハードディスクの総容量を定義します。これは、ハードディスク上の空き領域を保存し、
さらなるパーティション分割（例えばスワップパーティションの作成など）に活用するのに有用です。
<span class="monospaced">hdsize は</span>起動可能なディスク（つまり、RAID0、RAID1、RAID10 の最初のディスクまたはミラー、
および RAID-Z[123] の全ディスク）に対してのみ有効です。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="advanced_btrfs_options">2.3.4. 高度な BTRFS 設定オプション
<a class="headerlink" href="#advanced_btrfs_options" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>BTRFSを使用する場合、スワップ領域は作成されませんが、インストールディスク上の未パーティション領域をスワップ用に確保することは可能です。別途パーティションを作成するか、BTRFSサブボリュームを作成するか、<span class="monospaced">btrfsファイルシステムのmkswapfile</span>コマンドを使用してスワップファイルを作成することができます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">圧縮</span></dt>
<dd>
<p>
BTRFSサブボリュームの圧縮機能を有効にするかどうかを定義します。
以下の圧縮アルゴリズムがサポートされています：
<em>on</em>（<em>zlib</em>と同等）、<em>zlib</em>、<em>lzo</em>、<em>zstd</em>。
デフォルトは<em>offです</em>。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hdsize</span></dt>
<dd>
<p>
使用されるハードディスクの総容量を定義します。これは、ハードディスク上の空き領域を保存し、
さらなるパーティション分割（例えば、スワップパーティションの作成など）に活用するのに有用です。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="_zfs_performance_tips">2.3.5. ZFS のパフォーマンスに関するヒント
<a class="headerlink" href="#_zfs_performance_tips" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFSは十分なメモリ環境下で最適な性能を発揮します。ZFSをご利用になる場合は、
十分なRAMを確保してください。目安として、4GBの基本RAMに加え、
RAWディスク容量1TBあたり1GBのRAMを追加することを推奨します。</p></div>
<div class="paragraph">
<p>ZFSは書き込みキャッシュとして専用ドライブ（ZFS Intent Log：ZIL）を利用できます。
高速ドライブ（SSD）を割り当ててください。インストール後に以下のコマンドで追加可能です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool add &amp;lt;プール名&amp;gt; log &amp;lt;/dev/高速SSDのパス&amp;gt;</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="nomodeset_kernel_param">2.3.6.<span class="monospaced">nomodeset</span>カーネルパラメータの追加
<a class="headerlink" href="#nomodeset_kernel_param" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>非常に古いハードウェアや新しいハードウェアでは、グラフィックドライバが原因で問題が発生する可能性があります。
起動中にインストールが停止した場合は、<span class="monospaced">nomodeset</span>パラメータの追加をお試しください。
これにより、Linux カーネルがグラフィックドライバをロードせず、
BIOS/UEFI が提供するフレームバッファの使用を継続するよう強制されます。</p></div>
<div class="paragraph">
<p>Proxmox VE ブートローダーメニューで「<em>Install Proxmox VE (Terminal UI)」</em>を選択し、
編集するには<span class="monospaced">e キー</span>を押してください。矢印キーで「<span class="monospaced">linux</span>」で始まる行に移動し、
カーソルをその行の末尾に合わせ、既存の最後のパラメーターからスペースを空けて
<span class="monospaced">nomodeset</span> パラメーターを追加してください。</p></div>
<div class="paragraph">
<p>その後、<span class="monospaced">Ctrl-X</span>または<span class="monospaced">F10</span>を押して設定を適用し、ブートを続行してください。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="installation_unattended">
<span>2.4. 無人インストール</span>
<a class="headerlink" href="#installation_unattended" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>自動インストール方法により、Proxmox VE を無人環境でインストールすることが可能です。これにより、ベアメタル環境におけるセットアッププロセスを完全に自動化できます。インストールが完了しホストが起動した後、Ansible などの自動化ツールを使用してインストール環境をさらに設定することが可能です。</p></div>
<div class="paragraph">
<p>インストーラーに必要なオプションは、アンサーファイルで指定する必要があります。
このファイルでは、フィルタルールを使用して、使用するディスクやネットワークカードを決定できます。</p></div>
<div class="paragraph">
<p>自動インストールをご利用いただくには、まずアンサーファイルを取得するソースを選択し、その選択内容に基づいてインストール用ISOイメージを作成する必要があります。</p></div>
<div class="paragraph">
<p>ISOの準備が完了すると、初期ブートメニューに「<em>自動インストール」</em>という新しいブートエントリが表示され、10秒間のタイムアウト後に自動的に選択されます。</p></div>
<div class="paragraph">
<p>無人インストールに関する詳細情報につきましては、
<a href="https://pve.proxmox.com/wiki/Automated_Installation">弊社のWikiをご参照ください</a>。</p></div>
</div>
<div class="sect2">
<h3 id="_install_proxmox_ve_on_debian">
<span>2.5. Debian への Proxmox VE のインストール</span>
<a class="headerlink" href="#_install_proxmox_ve_on_debian" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEはDebianパッケージのセットとして提供され、標準的なDebianインストール環境上にインストールすることが可能です。
<a href="#sysadmin_package_repositories">リポジトリの設定後</a>、以下のコマンドを実行する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt-get update
# apt-get install proxmox-ve</pre>
</div></div>
<div class="paragraph">
<p>既存の Debian インストール環境への上書きインストールは一見簡単に見えますが、
これはベースシステムが正しくインストール済みであり、
ローカルストレージの設定方法と使用方法をご存知であることを前提としています。
またネットワーク設定も手動で行う必要があります。</p></div>
<div class="paragraph">
<p>一般的に、これは特に LVM や ZFS を使用する場合、単純な作業ではありません。</p></div>
<div class="paragraph">
<p>詳細な手順については、
<a href="https://pve.proxmox.com/wiki/Install_Proxmox_VE_on_Debian_12_Bookworm">Wiki</a> でご確認いただけます。</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_system_administration">
3. ホストシステムの管理
<a class="headerlink" href="#chapter_system_administration" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>以下のセクションでは、一般的な仮想化タスクに焦点を当て、ホストマシンの管理と運用に関する
Proxmox VE固有の機能について説明いたします。</p></div>
<div class="paragraph">
<p>Proxmox VE<a href="https://www.debian.org/">はDebian GNU/Linuxを</a>基盤としており、Proxmox VE関連パッケージを提供する追加リポジトリを備えています。これにより、セキュリティ更新やバグ修正を含むDebianパッケージの全範囲が利用可能です。
Proxmox VEはUbuntuカーネルを基にした独自のLinuxカーネルを提供します。必要な仮想化機能とコンテナ機能がすべて有効化されており、<a href="https://zfsonlinux.org">ZFSや</a>複数の追加ハードウェアドライバーを含んでいます。</p></div>
<div class="paragraph">
<p>以下のセクションに記載されていないその他のトピックについては、
Debian ドキュメントをご参照ください。
<a href="https://debian-handbook.info/get">Debian Administrator's Handbook</a>はオンラインで入手可能であり、
Debian オペレーティングシステムに関する包括的な入門を提供しています（<a href="#Hertzog13">[Hertzog13]</a> 参照）。</p></div>
<div class="sect2">
<h3 id="sysadmin_package_repositories">
<span>3.1. パッケージリポジトリ</span>
<a class="headerlink" href="#sysadmin_package_repositories" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEは他のDebianベースのシステムと同様に、
パッケージ管理ツールとして<a href="http://en.wikipedia.org/wiki/Advanced_Packaging_Tool">APTを採用しております</a>。</p></div>
<div class="paragraph">
<p>Proxmox VEは毎日自動的にパッケージの更新を確認します。<span class="monospaced">root@pamユーザーには</span>利用可能な更新についてメールで通知されます。GUIからは、<em>変更履歴</em>ボタンを使用して選択した更新の詳細を確認できます。</p></div>
<div class="sect3">
<h4 id="_repositories_in_proxmox_ve">3.1.1. Proxmox VE のリポジトリ
<a class="headerlink" href="#_repositories_in_proxmox_ve" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>リポジトリはソフトウェアパッケージの集合体であり、新規ソフトウェアのインストールに使用できるほか、
更新プログラムの取得にも重要です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">最新のセキュリティ更新プログラム、バグ修正、新機能を入手するには、
有効なDebianおよびProxmoxリポジトリが必要です。</td>
</tr></table>
</div>
<div class="paragraph">
<p>APTリポジトリは、レガシーな単一行形式<span class="monospaced">では/etc/apt/sources.listファイル</span>に、
現代的なdeb822マルチライン<span class="monospaced">形式では/etc/apt/sources.list.d/</span>配下の<span class="monospaced">.sourcesファイル</span>に定義されます。
詳細は<a href="#sysadmin_apt_repo_formats">リポジトリ形式</a>をご参照ください。</p></div>
<div class="sect4">
<h5 id="_repository_management">リポジトリ管理
<a class="headerlink" href="#_repository_management" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-repositories.png">
<img src="images/screenshot/gui-node-repositories.png" alt="screenshot/gui-node-repositories.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VE 7 以降では、ウェブインターフェースでリポジトリの状態を確認できます。
ノード概要パネルでは高レベルのステータス概要が表示され、
<em>別個のリポジトリ</em>パネルでは詳細なステータスと設定済みの全リポジトリのリストが表示されます。</p></div>
<div class="paragraph">
<p>リポジトリの基本的な管理（例：リポジトリの有効化/無効化）もサポートされています。</p></div>
<div class="paragraph">
<p>リポジトリから利用可能なパッケージは、<span class="monospaced">`apt update`</span> を実行することで取得されます。
更新は<span class="monospaced">`apt` を</span>直接使用するか、GUI（ノード → 更新）経由でインストールできます。</p></div>
</div>
<div class="sect4">
<h5 id="sysadmin_apt_repo_formats">リポジトリ形式
<a class="headerlink" href="#sysadmin_apt_repo_formats" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>パッケージリポジトリは、ソースリスト<em>/etc/apt/sources.list</em>および<em>/etc/apt/sources.list.d/</em> 内のファイルで設定できます<em>。</em></p></div>
<div class="paragraph">
<p>サポートされている形式は次の2つです：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
単一行</dt>
<dd>
<p>
単一行形式<span class="monospaced">のsources.list</span>ファイルでは、各行がパッケージリポジトリを定義します。
空行は無視されます。行内のどこ<span class="monospaced">かに#文字があると</span>、その行の残りがコメントとして扱われます。
これはレガシー形式です。Debian 13 Trixie以降、aptはこの形式の使用に対して警告を表示します。
<span class="monospaced">apt modernize-sources</span>コマンドを使用すれば、ほとんどのリポジトリを自動的に移行できます。</p>
</dd>
<dt class="hdlist1">
deb822</dt>
<dd>
<p>
複数行形式の<span class="monospaced">repo.sources</span>ファイルでは、各エントリは複数のキーと値のペアから構成されます。ファイルには、各グループを空白行で区切ることで複数のエントリを含めることができます。これは現代的な形式です。</p>
</dd>
</dl></div>
</div>
<div class="sect4">
<h5 id="_available_repositories">利用可能なリポジトリ
<a class="headerlink" href="#_available_repositories" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Proxmox VEでは、基本のDebianリポジトリに加えて、3つの異なるパッケージリポジトリを提供しております。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_debian_base_repositories">3.1.2. Debian ベースリポジトリ
<a class="headerlink" href="#_debian_base_repositories" title="Permalink to this heading"></a></h4>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/debian.sources</span></div>
<div class="content monospaced">
<pre>タイプ: deb deb-src
URI: http://deb.debian.org/debian/
スイート: trixie trixie-updates
コンポーネント: main non-free-firmware
署名者: /usr/share/keyrings/debian-archive-keyring.gpg

タイプ: deb deb-src
URI: http://security.debian.org/debian-security/
スイート: trixie-security
コンポーネント: main non-free-firmware
署名者: /usr/share/keyrings/debian-archive-keyring.gpg</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="sysadmin_enterprise_repo">3.1.3. Proxmox VE Enterprise リポジトリ
<a class="headerlink" href="#sysadmin_enterprise_repo" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>こちらは推奨リポジトリであり、すべての Proxmox VE サブスクリプション
ユーザーがご利用いただけます。最も安定したパッケージを含み、本番環境での使用に適しています。
<span class="monospaced">pve-enterprise</span>リポジトリはデフォルトで有効化されています：</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/pve-enterprise.sources</span></div>
<div class="content monospaced">
<pre>Types: deb
URIs: https://enterprise.proxmox.com/debian/pve
Suites: trixie
Components: pve-enterprise
Signed-By: /usr/share/keyrings/proxmox-archive-keyring.gpg</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">pve-enterprise</span>リポジトリにアクセスするには、有効なサブスクリプションキーが必要となりますのでご注意ください。
各種サポートレベルをご用意しております。詳細は<a href="https://proxmox.com/en/proxmox-virtual-environment/pricing">https://proxmox.com/en/proxmox-virtual-environment/pricing</a> でご確認いただけます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">上記行の先頭に<span class="monospaced">#</span>を付けてコメントアウトすることで、このリポジトリを無効にできます。これにより、ホストにサブスクリプションキーがない場合のエラーメッセージを回避できます。その場合は、<span class="monospaced">pve-no-subscription</span>リポジトリを設定してください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_no_subscription_repo">3.1.4. Proxmox VE 非サブスクリプションリポジトリ
<a class="headerlink" href="#sysadmin_no_subscription_repo" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>名称が示す通り、このリポジトリへのアクセスにはサブスクリプションキーは不要です。
テスト環境や非本番環境でのご利用に適しています。
これらのパッケージは必ずしも十分にテスト・検証されているわけではないため、
本番サーバーでのご利用はお勧めできません。</p></div>
<div class="paragraph">
<p>このリポジトリの設定は、
<span class="monospaced">/etc/apt/sources.list.d/proxmox.sources</span> ファイルに追加することをお勧めいたします。</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/proxmox.sources</span></div>
<div class="content monospaced">
<pre>Types: deb
URIs: http://download.proxmox.com/debian/pve
Suites: trixie
Components: pve-no-subscription
署名者: /usr/share/keyrings/proxmox-archive-keyring.gpg</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VE Proxmox リポジトリに加えて、常にベースとなる Debian リポジトリが必要となりますのでご注意ください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_test_repo">3.1.5. Proxmox VE テストリポジトリ
<a class="headerlink" href="#sysadmin_test_repo" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このリポジトリには最新のパッケージが含まれており、主に開発者が新機能をテストするために使用されます。設定するには、以下の設定行をファイル<span class="monospaced">/etc/apt/sources.list.d/proxmox.sources</span> に追加してください：</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/proxmox.sources</span></div>
<div class="content monospaced">
<pre>Types: deb
URIs: http://download.proxmox.com/debian/pve
Suites: trixie
Components: pve-test
署名者: /usr/share/keyrings/proxmox-archive-keyring.gpg</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">pve-test</span>リポジトリは（名称が示す通り）新機能やバグ修正のテスト専用としてご利用ください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_package_repositories_ceph">3.1.6. Ceph リポジトリ
<a class="headerlink" href="#sysadmin_package_repositories_ceph" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Ceph 関連パッケージは、事前設定済みの Ceph エンタープライズリポジトリにより最新の状態に保たれています。
プリインストールされたパッケージにより、外部 Ceph クラスターへの接続や、
その<a href="#ceph_rados_block_devices">RBD</a>または<a href="#storage_cephfs">CephFS</a>プールをストレージとして追加することが可能です。
また、Proxmox VE クラスター上で<a href="#chapter_pveceph">Ceph</a>を実行することで、
<a href="#chapter_hyper_converged_infrastructure">ハイパーコンバージドインフラストラクチャ (HCI) を</a>構築することもできます。</p></div>
<div class="paragraph">
<p>本章の情報は以下の場合に役立ちます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
HCI構築のためのCephインストール</dt>
<dd>
<p>
下記で説明するリポジトリと最新のCephリリースを決定し、
<a href="#pve_ceph_install_wizard">ウェブベースのウィザードまたはCLIツール</a>で選択してください。</p>
</dd>
<dt class="hdlist1">
HCIを既に稼働中で、次の<em>Ceph</em>メジャーリリースへアップグレードしたい場合</dt>
<dd>
<p>
関連する<a href="https://pve.proxmox.com/wiki/Category:Ceph_Upgrade">Cephアップグレードガイド</a>に従ってください。</p>
</dd>
<dt class="hdlist1">
HCIを既に運用中で、次の<em>Proxmox VE</em>メジャーリリースへアップグレードしたい場合</dt>
<dd>
<p>
HCI環境では、Proxmox VEの各メジャーリリースに対応する最低限のCephメジャーリリースが必要です。
関連する<a href="https://pve.proxmox.com/wiki/Category:Upgrade">Proxmox VEアップグレードガイド</a>に従ってください。</p>
</dd>
<dt class="hdlist1">
HCI を実行しておらず、外部の Ceph クラスターを利用している場合</dt>
<dd>
<p>
Ceph接続用の最新パッケージをインストールするには、利用可能なシステム更新を適用し、下記のリストからリポジトリとCephリリースを選択してください。その後、<em><a href="#_repository_management">リポジトリ</a></em>パネル経由でノードに追加し、新たに利用可能なシステム更新を適用します。<span class="monospaced">ceph --versionを実行</span>して結果を確認し、古いCephリポジトリを無効化してください。</p>
</dd>
</dl></div>
<div class="paragraph" id="ceph_release_table">
<div class="title">Proxmox VE 9 で利用可能な Ceph リリース</div><p>お使いの Proxmox VE リリースにおける最新版の管理者ガイドをお読みいただくには、
すべてのシステム更新プログラムがインストールされていること、および本ページが再読み込みされていることをご確認ください。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:23%;" />
<col style="width:23%;" />
<col style="width:17%;" />
<col style="width:20%;" />
<col style="width:14%;" />
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="https://docs.ceph.com/en/squid/releases/">推定サポート終了時期</a></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong><span class="monospaced">エンタープライズ</span></strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong><span class="monospaced">no-subscription</span></strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong><span class="monospaced">テスト</span></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><span class="monospaced">ceph-squid</span></strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2026年9月 (v19.2)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">推奨</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">利用可能</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">利用可能</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph">
<div class="title">Proxmox VE 9 向け Ceph リポジトリ</div><p><span class="monospaced">下記のceph.sourcesファイル</span>の内容は参考情報となります（Proxmox VE 9<span class="monospaced">以前はceph.list</span>ファイルが使用されていました）。変更を行う際は、本サブチャプルの冒頭で説明されている状況に応じた手順に従ってください。Web UIでリポジトリを無効化し、かつリストから削除したい場合は、該当するエントリをファイルから手動で削除することも可能です。</p></div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><strong><span class="monospaced">enterprise</span></strong></p></div>
<div class="paragraph">
<p>このリポジトリは本番環境での使用に推奨され、最も安定したパッケージバージョンを含みます。
Proxmox VEノードが有効なサブスクリプション（いずれのレベルでも可）を有している場合にアクセス可能です。
詳細および含まれるカスタマーサポートレベルについては、以下をご覧ください：</p></div>
<div class="paragraph">
<p><a href="https://proxmox.com/en/proxmox-virtual-environment/pricing">https://proxmox.com/en/proxmox-virtual-environment/pricing</a></p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/ceph.sources</span>を編集し、</div>
<div class="content monospaced">
<pre>Types: deb
URIs: https://enterprise.proxmox.com/debian/ceph-squid
Suites: trixie
Components: enterprise
Signed-By: /usr/share/keyrings/proxmox-archive-keyring.gpg</pre>
</div></div>
</div></div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><strong><span class="monospaced">no-subscription</span></strong></p></div>
<div class="paragraph">
<p>このリポジトリはテスト環境および非本番環境でのご利用に適しております。
有効なサブスクリプションを必要とせず、自由にアクセス可能です。
一定期間後、こちらのパッケージバージョンもエンタープライズリポジトリで提供されます。</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/ceph.sources</span></div>
<div class="content monospaced">
<pre>Types: deb
URIs: http://download.proxmox.com/debian/ceph-squid
Suites: trixie
Components: no-subscription
Signed-By: /usr/share/keyrings/proxmox-archive-keyring.gpg</pre>
</div></div>
</div></div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><strong><span class="monospaced">テスト</span></strong></p></div>
<div class="paragraph">
<p>このリポジトリには最新のパッケージバージョンが含まれており、主に開発者が新機能やバグ修正をテストするために使用されます。</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/apt/sources.list.d/ceph.sources</span></div>
<div class="content monospaced">
<pre>タイプ: deb
URI: http://download.proxmox.com/debian/ceph-squid
スイート: trixie
コンポーネント: test
署名者: /usr/share/keyrings/proxmox-archive-keyring.gpg</pre>
</div></div>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">Ceph<strong><span class="monospaced">テストリ</span></strong>ポジトリは（名称が示す通り）新機能やバグ修正のテスト専用としてご利用ください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_debian_firmware_repo">3.1.7. Debian ファームウェアリポジトリ
<a class="headerlink" href="#sysadmin_debian_firmware_repo" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Debian Bookworm（Proxmox VE 8）以降、非フリーファームウェア（<a href="https://www.debian.org/social_contract#guidelines">DFSG</a> による定義）は
新たに作成された Debian リポジトリコンポーネント<span class="monospaced">non-free-firmware</span> に移動されました。</p></div>
<div class="paragraph">
<p>Proxmox VE 9 以降、新規インストール時にはこのリポジトリがデフォルトで有効化され、
<a href="#sysadmin_firmware_cpu">早期の OS マイクロコード更新</a>を取得できるようになっています。</p></div>
<div class="paragraph">
<p>また、プリインストールパッケージ<span class="monospaced">pve-firmware</span> に含まれていない追加の<a href="#sysadmin_firmware_runtime_files">ランタイムファームウェアファイル</a>を入手することも可能です。</p></div>
<div class="paragraph">
<p>このコンポーネントからパッケージをインストールするには、<span class="monospaced">editor /etc/apt/sources.list</span> を実行し、
<span class="monospaced">各 .debian.org</span>リポジトリ行の末尾に<span class="monospaced">non-free-firmware</span>を追加した後、
<span class="monospaced">apt update</span> を実行してください。</p></div>
<div class="paragraph">
<p>Proxmox VE 9 を以前のバージョンからアップグレードし、パッケージリポジトリを新しい deb822 形式に更新された場合は、代わりに<span class="monospaced">/etc/apt/sources.list.d/debian.sources</span>を適宜修正する必要があります。<span class="monospaced">エディ</span>タ<span class="monospaced">で
/etc/apt/sources.list.d/debian.sources</span>を開き、各スタンザの
<span class="monospaced">Components:</span>で始まる行に<span class="monospaced">non-free-firmware</span>を追加してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">パッケージリポジトリの近代化をお勧めいたします。そうしない場合、Debian Trixie の<span class="monospaced">apt は</span>エラーを報告します。これを行うには<span class="monospaced">apt modernize-sources</span>を実行してください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="repos_secure_apt">3.1.8. SecureApt
<a class="headerlink" href="#repos_secure_apt" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>リポジトリ内の<em>Release</em>ファイルはGnuPGで署名されています。APTはこれらの署名を
利用し、全てのパッケージが信頼できるソースからのものであることを検証します。</p></div>
<div class="paragraph">
<p>公式のISOイメージからProxmox VEをインストールされる場合、検証用の鍵は
既にインストールされています。</p></div>
<div class="paragraph">
<p>Debian 上に Proxmox VE をインストールする場合は、以下のコマンドで鍵をダウンロードしインストールしてください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># wget https://enterprise.proxmox.com/debian/proxmox-archive-keyring-trixie.gpg -O /usr/share/keyrings/proxmox-archive-keyring.gpg</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">上記の<span class="monospaced">wget</span>コマンドは、Debian Trixie ベースの Proxmox リリース用キーリングを追加します。
<span class="monospaced">proxmox-archive-keyring</span>パッケージがインストールされると、このファイルは管理されます。
その時点で、新しい Proxmox リリースの鍵が追加または削除されるため、下記のハッシュ値が
このファイルのハッシュ値と一致しなくなる可能性があります。これは意図された動作であり、
<span class="monospaced">apt は</span>信頼された鍵のみが使用されることを保証します。
<strong> <span class="monospaced">proxmox-archive-keyring</span>のインストール後は、このファイルの修正はお控えください。</strong></td>
</tr></table>
</div>
<div class="paragraph">
<p>その後、<span class="monospaced">sha512sum</span>CLIツールでチェックサムを検証してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># sha256sum /usr/share/keyrings/proxmox-archive-keyring.gpg
 136673be77aba35dcce385b28737689ad64fd785a797e57897589aed08db6e45 /usr/share/keyrings/proxmox-archive-keyring.gpg</pre>
</div></div>
<div class="paragraph">
<p>または<span class="monospaced">md5sum</span>CLI ツールで実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># md5sum /usr/share/keyrings/proxmox-archive-keyring.gpg
77c8b1166d15ce8350102ab1bca2fcbf /usr/share/keyrings/proxmox-archive-keyring.gpg</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">鍵をインストールするパスが、リポジトリ設定内の<span class="monospaced">Signed-By:</span>行と一致していることをご確認ください。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="system_software_updates">
<span>3.2. システムソフトウェアの更新</span>
<a class="headerlink" href="#system_software_updates" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmoxでは、すべてのリポジトリに対して定期的に更新を提供しております。更新をインストールするには、ウェブベースのGUIまたは以下のCLIコマンドをご利用ください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt-get update
# apt-get dist-upgrade</pre>
</div></div>
<div class="paragraph">
<p>Ceph を次のメジャーリリースへアップグレードする場合は、
<a href="#sysadmin_package_repositories_ceph">Ceph リポジトリをご参照ください</a>。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">APTパッケージ管理システムは非常に柔軟で、多くの機能を提供しております。<span class="monospaced">詳細はman apt-get</span>、または<a href="#Hertzog13">[Hertzog13]</a>をご参照ください。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">最新のパッチやセキュリティ関連の修正プログラムを入手するためには、定期的な更新が不可欠です。
主要なシステムアップグレードについては、<a href="https://forum.proxmox.com/">Proxmox VE コミュニティフォーラム</a>でお知らせいたします。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="chapter_firmware_updates">
<span>3.3. ファームウェアの更新</span>
<a class="headerlink" href="#chapter_firmware_updates" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>本章に記載のファームウェア更新は、Proxmox VE をベアメタルサーバー上で実行している場合に適用してください。ゲスト内（例：デバイスパススルー使用時）でのファームウェア更新設定の適否は、環境設定に大きく依存するため、本章の範囲外となります。</p></div>
<div class="paragraph">
<p>定期的なソフトウェア更新に加え、ファームウェアの更新も
信頼性と安全な運用において重要です。</p></div>
<div class="paragraph">
<p>ファームウェア更新を入手・適用する際には、可能な限り早期に、あるいは確実に取得できるよう、利用可能なオプションを組み合わせてご利用いただくことをお勧めいたします。</p></div>
<div class="paragraph">
<p>ファームウェアという用語は、通常、言語的にマイクロコード（CPU用）と
ファームウェア（その他のデバイス用）に区分されます。</p></div>
<div class="sect3">
<h4 id="sysadmin_firmware_persistent">3.3.1. パーシステントファームウェア
<a class="headerlink" href="#sysadmin_firmware_persistent" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このセクションは全てのデバイスに適用されます。更新されたマイクロコード（通常はBIOS/UEFI更新に含まれます）はマザーボードに保存され、その他のファームウェアは各デバイスに保存されます。この永続的な方法は特にCPUにおいて重要であり、起動時に更新されたマイクロコードを可能な限り早期に定期的に読み込むことを可能にします。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">BIOS/UEFIやストレージコントローラーなどの更新では、
デバイス設定がリセットされる可能性があります。ベンダーの指示を
厳守し、現在の設定を必ずバックアップしてください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ご利用のベンダーに、どの更新方法が利用可能かご確認ください。</p></div>
<div class="ulist"><ul>
<li>
<p>
サーバー向けの便利な更新方法としては、DellのLifecycle Managerや
HPEのService Packなどが挙げられます。</p>
</li>
<li>
<p>
Linuxユーティリティが利用可能な場合もございます。例として、
NVIDIA ConnectX用<a href="https://network.nvidia.com/support/firmware/mlxup-mft/"><em>mlxup</em></a>、
またはBroadcomネットワークカード<a href="https://techdocs.broadcom.com/us/en/storage-and-ethernet-connectivity/ethernet-nic-controllers/bcm957xxx/adapters/software-installation/updating-the-firmware/manually-updating-the-adapter-firmware-on-linuxesx.html"><em>用</em></a>bnxtnvm/niccli
などが挙げられます。</p>
</li>
<li>
<p>
<a href="https://fwupd.org/lvfs/vendors/">ハードウェアベンダーとの</a>協力関係があり、
<a href="https://fwupd.org/lvfs/devices/">サポート対象ハードウェア</a>を使用している場合には、
<a href="https://fwupd.org">LVFSも</a>選択肢となります。
この技術要件として、システムが2014年以降に製造され、
UEFI経由で起動されていることが必要です。</p>
</li>
</ul></div>
<div class="paragraph">
<p>Proxmox VEは、Proxmox署名キーによるセキュアブートサポートを有効化するため、<span class="monospaced">独自のfwupdパッケージ</span>を提供しております。このパッケージでは、ハイパーバイザー環境での使用時に問題が確認されたため、<span class="monospaced">udisks2パッケージ</span>への依存関係推奨を意図的に削除しております。そのため、<span class="monospaced">/etc/fwupd/daemon.confファイル内でEF</span>Iパーティションの正しいマウントポイントを明示的に設定する必要があります。例：</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/fwupd/daemon.conf</span></div>
<div class="content monospaced">
<pre># EFIシステムパーティション（ESP）のパスに使用される場所を上書きします。
EspLocation=/boot/efi</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">更新手順でホストの再起動が必要な場合は、安全に実行できることをご確認ください。<a href="#ha_manager_node_maintenance">ノードのメンテナンス</a>もご参照ください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_firmware_runtime_files">3.3.2. ランタイムファームウェアファイル
<a class="headerlink" href="#sysadmin_firmware_runtime_files" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>この方法では、ファームウェアは Proxmox VE オペレーティングシステム上に保存され、
デバイスの<a href="#sysadmin_firmware_persistent">永続化ファームウェアが</a>最新でない場合に、
そのファームウェアがデバイスに渡されます。
ネットワークカードやグラフィックカードなどのデバイスではサポートされていますが、
マザーボードやハードディスクなど、永続化ファームウェアに依存するデバイスではサポートされていません。</p></div>
<div class="paragraph">
<p>Proxmox VEでは、パッケージ<span class="monospaced">pve-firmwareが</span>デフォルトで既にインストールされています。したがって、通常の<a href="#system_software_updates">システム更新（APT）</a>により、一般的なハードウェアのファームウェアは自動的に最新の状態に保たれます。</p></div>
<div class="paragraph">
<p>追加の<a href="#sysadmin_debian_firmware_repo">Debianファームウェア</a>リポジトリは存在しますが、デフォルトでは設定されていません。</p></div>
<div class="paragraph">
<p>追加のファームウェアパッケージをインストールしようとした際に競合が発生した場合、APTはインストールを中止します。該当するファームウェアは別の方法で入手できる可能性があります。</p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_firmware_cpu">3.3.3. CPUマイクロコード更新
<a class="headerlink" href="#sysadmin_firmware_cpu" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>マイクロコードの更新は、発見されたセキュリティ脆弱性やその他の深刻なCPUバグを修正することを目的としています。CPUのパフォーマンスに影響が出る可能性はありますが、パッチ適用済みのマイクロコードは、カーネル自体が緩和策を講じなければならないパッチ未適用のマイクロコードよりも、通常は依然として高いパフォーマンスを発揮します。CPUの種類によっては、欠陥のある工場出荷状態でのパフォーマンス結果を、安全でない状態であることを承知の上でCPUを動作させない限り、もはや達成できない可能性があります。</p></div>
<div class="paragraph">
<p>現在のCPUの脆弱性とその緩和策の概要を把握するには、
<span class="monospaced">lscpuを実行してください</span>。実際の既知の脆弱性は、
Proxmox VEホストが<a href="#system_software_updates">最新の状態であり、</a>そのバージョンが
<a href="#faq-support-table">サポート終了しておらず</a>、かつ前回のカーネル更新以降に
少なくとも再起動が行われている場合にのみ表示されます。</p></div>
<div class="paragraph">
<p>推奨される<a href="#sysadmin_firmware_persistent">永続的な</a>BIOS/UEFI更新によるマイクロコード更新に加え、
<strong>「早期OSマイクロコード更新」</strong>による独立した方法も存在します。
この方法は利便性が高く、マザーボードベンダーがBIOS/UEFI更新を提供しなくなった場合にも
非常に有用です。いずれの方法を使用する場合でも、マイクロコード更新を適用するには
必ず再起動が必要です。</p></div>
<div class="sect4">
<h5 id="_set_up_early_os_microcode_updates">Early OS Microcode Updates の設定<a class="headerlink" href="#_set_up_early_os_microcode_updates" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Linuxカーネルが起動時に早期に適用するマイクロコード更新を設定するには、
以下の操作が必要です：</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
<a href="#sysadmin_debian_firmware_repo">Debian ファームウェアリポジトリを</a>有効にする</p>
</li>
<li>
<p>
利用可能な最新パッケージを取得します
<span class="monospaced">apt update</span>(またはウェブインターフェースの
  Node → Updates より実行)</p>
</li>
<li>
<p>
CPUベンダー固有のマイクロコードパッケージをインストールします:</p>
<div class="ulist"><ul>
<li>
<p>
Intel CPUの場合： <span class="monospaced"> apt install intel-microcode</span></p>
</li>
<li>
<p>
AMD CPUの場合： <span class="monospaced"> apt install amd64-microcode</span></p>
</li>
</ul></div>
</li>
<li>
<p>
Proxmox VEホストを再起動してください</p>
</li>
</ol></div>
<div class="paragraph">
<p>今後のマイクロコード更新も、ロードするには再起動が必要となります。</p></div>
</div>
<div class="sect4">
<h5 id="_microcode_version">マイクロコードバージョン
<a class="headerlink" href="#_microcode_version" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>比較やデバッグ目的で現在実行中のマイクロコードリビジョンを確認するには：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># grep microcode /proc/cpuinfo | uniq
microcode       : 0xf0</pre>
</div></div>
<div class="paragraph">
<p>マイクロコードパッケージには様々なCPU向けの更新が含まれますが、
特定のCPU向け更新は頻繁に提供されない場合があります。
そのため、パッケージの日付だけでは、
メーカーが実際にそのCPU向けに更新をリリースした時期を
特定することはできません。</p></div>
<div class="paragraph">
<p>新しいマイクロコードパッケージをインストールし、Proxmox VEホストを再起動した場合、
この新しいマイクロコードが、CPUに組み込まれたバージョンおよびマザーボードのファームウェアのバージョンの両方よりも新しい場合、
システムログに「microcode updated early」というメッセージが表示されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dmesg | grep microcode
[    0.000000] microcode: microcode updated early to revision 0xf0, date = 2021-11-12
[    0.896580] microcode: Microcode Update Driver: v2.2.</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="sysadmin_firmware_troubleshooting">トラブルシューティング
<a class="headerlink" href="#sysadmin_firmware_troubleshooting" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>デバッグ目的で、システム起動時に定期的に適用される「早期OSマイクロコード更新」の設定を一時的に無効化するには、以下の手順に従ってください：</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
ホストを<a href="#ha_manager_node_maintenance">安全に</a>再起動できることを確認してください</p>
</li>
<li>
<p>
ホストを再起動し、GRUBメニューを表示します（非表示の場合は<span class="monospaced">SHIFTキー</span>を押したままにします）</p>
</li>
<li>
<p>
目的のProxmox VEブートエントリで<span class="monospaced">Eキー</span>を押します</p>
</li>
<li>
<p>
<span class="monospaced">linux</span>で始まる行に移動し、スペースを空けて以下を追加してください
<strong><span class="monospaced">dis_uc</span></strong>ode_ldr</p>
</li>
<li>
<p>
<span class="monospaced">CTRL-X</span>を押して、今回は早期OSマイクロコード更新なしで起動してください</p>
</li>
</ol></div>
<div class="paragraph">
<p>最近のマイクロコード更新に関連する問題が疑われる場合、パッケージの削除（<span class="monospaced">`apt purge &amp;lt;intel-microcode|amd64-microcode&amp;gt;`</span>）ではなく、パッケージのダウングレードをご検討ください。そうしないと、より新しいマイクロコードが問題なく動作するにもかかわらず、古すぎるマイクロコードが<a href="#sysadmin_firmware_persistent">永続的に</a>読み込まれる可能性があります。</p></div>
<div class="paragraph">
<p>ダウングレードは、Debianリポジトリに以前のマイクロコードパッケージバージョンが存在する場合に可能です。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt list -a intel-microcode
リスト表示中... 完了
intel-microcode/stable-security,now 3.20230808.1~deb12u1 amd64 [インストール済み]
intel-microcode/stable 3.20230512.1 amd64</pre>
</div></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt install intel-microcode=3.202305*...

'intel-microcode' パッケージのバージョン '3.20230512.1' (Debian:12.1/stable [amd64]) を選択しました
...
dpkg: 警告: intel-microcode を 3.20230808.1~deb12u1 から 3.20230512.1 にダウングレードします...

intel-microcode: マイクロコードは次回の起動時に更新されます
...</pre>
</div></div>
<div class="paragraph">
<p>ホストを<a href="#ha_manager_node_maintenance">安全に</a>再起動できることを（再度）ご確認ください。お使いのCPUタイプに対応するマイクロコードパッケージに含まれる可能性のある古いマイクロコードを適用するには、今すぐ再起動してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="paragraph">
<p>ダウングレードしたパッケージはしばらく保持し、後日より新しいバージョンを再度お試しになることをお勧めいたします。将来的にパッケージのバージョンが同じ場合でも、システム更新によって問題が修正されている可能性があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt-mark hold intel-microcode
intel-microcode の更新を保留状態に設定しました。</pre>
</div></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt-mark unhold intel-microcode
# apt update
# apt full-upgrade</pre>
</div></div>
</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sysadmin_network_configuration">
<span>3.4. ネットワーク設定</span>
<a class="headerlink" href="#sysadmin_network_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEはLinuxネットワークスタックを採用しております。これにより、
Proxmox VEノード上のネットワーク設定に高い柔軟性が提供されます。設定は
GUI経由、またはネットワーク設定全体を記述するファイル<span class="monospaced">/etc/network/interfacesを</span>
手動で編集するいずれの方法でも行えます。<span class="monospaced">interfaces(5)</span>マニュアルページには
完全なフォーマット説明が記載されております。すべての Proxmox VE ツールは、ユーザーによる直接的な変更を避けるよう努めておりますが、
エラーから保護する観点から、GUI の使用が依然として推奨されます。</p></div>
<div class="paragraph">
<p>ゲストを基盤となる物理ネットワークに接続するには、Linux ブリッジインターフェース（一般的に<em>vmbrX</em> と呼ばれます）が必要です。これは、ゲストと物理インターフェースが接続される仮想スイッチと考えることができます。このセクションでは、<a href="#sysadmin_network_bond"><em>ボンディングによる</em></a>冗長化、
<a href="#sysadmin_network_vlan"><em>VLAN</em></a>、
<a href="#sysadmin_network_routed"><em>ルーティング</em></a>、
<a href="#sysadmin_network_masquerading"><em>NAT</em></a>設定など、様々なユースケースに対応するためのネットワーク設定例をいくつかご紹介します。</p></div>
<div class="paragraph">
<p><a href="#chapter_pvesdn">ソフトウェア定義ネットワーク</a>（SDN）は、Proxmox VEクラスターにおけるより複雑な仮想ネットワークの選択肢となります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">不確かな場合には、従来のDebianツール<span class="monospaced">であるifupおよび</span> <span class="monospaced">ifdown</span>の使用はお勧めできません。これらは、<span class="monospaced">ifdown vmbrXを実行すると</span>ゲストの全トラフィックが中断されるものの、後で同じブリッジに対して<span class="monospaced">ifup</span>を実行してもそれらのゲストが再接続されないといった落とし穴があるためです。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_apply_network_changes">3.4.1. ネットワーク変更の適用
<a class="headerlink" href="#_apply_network_changes" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEは変更<span class="monospaced">内容を直接/etc/network/interfacesに</span>書き込まない仕様となっております。代わりに<span class="monospaced">/etc/network/interfaces.new</span>という一時ファイルに書き込むことで、関連する複数の変更を一度に処理することが可能です。これにより、適用前に変更内容の正確性を確認できる利点もございます。誤ったネットワーク設定はノードへのアクセス不能を引き起こす可能性があるためです。</p></div>
<div class="sect4">
<h5 id="_live_reload_network_with_ifupdown2">ifupdown2 を使用したネットワークのライブ再読み込み<a class="headerlink" href="#_live_reload_network_with_ifupdown2" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>推奨される<em>ifupdown2</em>パッケージ（Proxmox VE 7.0 以降の新しいインストールではデフォルト）を使用すれば、
再起動なしでネットワーク設定の変更を適用できます。GUI 経由でネットワーク設定を変更した場合、
<em>「設定を適用」</em>ボタンをクリックできます。これにより、変更内容がステージングファイル
<span class="monospaced">staging/interfaces.new</span>から<span class="monospaced">/etc/network/interfaces</span>に移動され、ライブで適用されます。</p></div>
<div class="paragraph">
<p><span class="monospaced">/etc/network/interfacesファイル</span>に直接手動で変更を加えた場合は、
<span class="monospaced">`ifreload -a`</span>を実行することで適用できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Debian 上に Proxmox VE をインストールした場合、または古い Proxmox VE インストールから Proxmox VE 7.0 にアップグレードした場合は、<em>ifupdown2</em>がインストールされていることをご確認ください:
<span class="monospaced">apt install ifupdown2</span></td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="_reboot_node_to_apply">変更を適用するにはノードを再起動してください
<a class="headerlink" href="#_reboot_node_to_apply" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>新しいネットワーク設定を適用する別の方法として、ノードの再起動が挙げられます。
この場合、systemd サービス<span class="monospaced">pvenetcommit が</span>、
<span class="monospaced">ネットワーク</span>サービスが設定を適用する前に
ステージングファイル<span class="monospaced">interfaces.new</span>をアクティブ化します。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_naming_conventions">3.4.2. 命名規則
<a class="headerlink" href="#_naming_conventions" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>現在、デバイス名には以下の命名規則を採用しております：</p></div>
<div class="ulist"><ul>
<li>
<p>
イーサネットデバイス:<span class="monospaced">en*</span>、systemd ネットワークインターフェース名。この命名規則は
バージョン 5.0 以降の新しい Proxmox VE インストールで使用されています。</p>
</li>
<li>
<p>
イーサネットデバイス:<span class="monospaced">eth[N]</span>（0 ≤ N、<span class="monospaced">eth0</span>,<span class="monospaced">eth1</span>, …）。この命名規則は、バージョン5.0以前のProxmox VEホストで採用されています。5.0へのアップグレード時には、既存の名称がそのまま維持されます。</p>
</li>
<li>
<p>
ブリッジ名：一般的に<span class="monospaced">vmbr[N]</span> の形式で、0 ≤ N ≤ 4094（<span class="monospaced">vmbr0</span>～<span class="monospaced">vmbr4094</span>）となりますが、
最初の文字が英数字で、最大10文字以内の任意の英数字文字列を使用することも可能です。</p>
</li>
<li>
<p>
ボンディング:<span class="monospaced">bond[N]</span>（0 ≤ N、例:<span class="monospaced">bond0</span>,<span class="monospaced">bond1</span>, …）</p>
</li>
<li>
<p>
VLAN: デバイス名にVLAN番号をピリオドで区切って追加します（例:<span class="monospaced">eno1.50</span>,<span class="monospaced">bond1.30</span>）</p>
</li>
</ul></div>
<div class="paragraph">
<p>これにより、デバイス名がデバイス種別を暗示するため、
ネットワーク問題のデバッグが容易になります。</p></div>
<div class="sect4">
<h5 id="systemd_network_interface_names">Systemd ネットワークインターフェース名
<a class="headerlink" href="#systemd_network_interface_names" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Systemdはネットワークデバイス名に対してバージョン管理された命名規則を定義しております。
この規則では、イーサネットネットワークデバイスに対し2文字の接頭辞<span class="monospaced">「en」</span>を使用します。
続く文字列はデバイスドライバ、デバイス位置、その他の属性によって異なります。
主なパターン例は以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">o&amp;lt;index&amp;gt;[n&amp;lt;物理ポート名&amp;gt;|d&amp;lt;デバイスポート&amp;gt;]</span>— ボード上のデバイス</p>
</li>
<li>
<p>
<span class="monospaced">s&amp;lt;slot&amp;gt;[f&amp;lt;function&amp;gt;][n&amp;lt;物理ポート名&amp;gt;|d&amp;lt;デバイスポート&amp;gt;]</span>— ホットプラグ ID によるデバイス</p>
</li>
<li>
<p>
<span class="monospaced">[P&amp;lt;ドメイン&amp;gt;]p&amp;lt;バス&amp;gt;s&amp;lt;スロット&amp;gt;[f&amp;lt;機能&amp;gt;][n&amp;lt;物理ポート名&amp;gt;|d&amp;lt;デバイスポート&amp;gt;]</span>—
バスIDによるデバイス</p>
</li>
<li>
<p>
<span class="monospaced">x&amp;lt;MAC&amp;gt;</span>— MACアドレスによるデバイス</p>
</li>
</ul></div>
<div class="paragraph">
<p>最も一般的なパターンの例をいくつか挙げます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">eno1</span>— 最初のオンボードNICです</p>
</li>
<li>
<p>
<span class="monospaced">enp3s0f1</span>— PCIバス3のスロット0にあるNICの機能1です</p>
</li>
</ul></div>
<div class="paragraph">
<p>可能なデバイス名パターンの完全な一覧については、

<a href="https://manpages.debian.org/stable/systemd/systemd.net-naming-scheme.7.en.html">systemd.net-naming-scheme(7) マニュアルページ</a>をご参照ください。</p></div>
<div class="paragraph">
<p>systemd の新バージョンでは、ネットワークデバイス命名スキームの新たなバージョンが定義され、デフォルトで使用される場合があります。その結果、例えば Proxmox VE のメジャーアップグレード時など、systemd を新しいバージョンに更新すると、ネットワークデバイスの名称が変更され、ネットワーク設定の調整が必要になる可能性があります。命名スキームの新バージョンによる名称変更を回避するには、特定の命名スキームバージョンを手動で固定することができます（<a href="#network_pin_naming_scheme_version">詳細は後述</a>）。</p></div>
<div class="paragraph">
<p>ただし、固定した命名スキームのバージョンがあっても、カーネルやドライバの更新によりネットワークデバイス名が変更される可能性があります。特定のネットワークデバイス名を変更しないようにするには、リンクファイルを使用して手動で名前を上書きすることができます（詳細は<a href="#network_override_device_names">後述</a>）。</p></div>
<div class="paragraph">
<p>ネットワークインターフェース名に関する詳細は、
<a href="https://systemd.io/PREDICTABLE_INTERFACE_NAMES/">「予測可能なネットワークインターフェース名」</a>
をご参照ください。</p></div>
</div>
<div class="sect4">
<h5 id="network_pin_naming_scheme_version">特定の命名規則バージョンの固定
<a class="headerlink" href="#network_pin_naming_scheme_version" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ネットワークデバイスの命名スキームの特定バージョンを固定するには、<a href="#sysboot_edit_kernel_cmdline">カーネルコマンドラインに</a>`<span class="monospaced">net.naming-scheme=&amp;lt;version&amp;gt;`</span>パラメータを追加します。命名スキームのバージョン一覧については、`<a href="https://manpages.debian.org/stable/systemd/systemd.net-naming-scheme.7.en.html">systemd.net-naming-scheme(7)` マニュアルページをご参照ください</a>。</p></div>
<div class="paragraph">
<p>例えば、新規のProxmox VE 8.0インストールにおける最新の命名規則バージョン<span class="monospaced">であるv252</span>を固定するには、以下のカーネルコマンドラインパラメータを追加してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>net.naming-scheme=v252</pre>
</div></div>
<div class="paragraph">
<p>カーネルコマンドラインの編集に関する<a href="#sysboot_edit_kernel_cmdline">こちらのセクション</a>もご参照ください。変更を有効にするには再起動が必要です。</p></div>
</div>
<div class="sect4">
<h5 id="network_override_device_names">ネットワークデバイス名のオーバーライド
<a class="headerlink" href="#network_override_device_names" title="Permalink to this heading"></a></h5>
<div class="sect5">
<h6 id="_using_the_pve_network_interface_pinning_tool">pve-network-interface-pinning ツールの使用
<a class="headerlink" href="#_using_the_pve_network_interface_pinning_tool" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>Proxmox VEでは、ネットワークデバイスの名前を上書きするための.linkファイルを自動生成するツールを提供しております。また、以下のファイル内で旧インターフェース名の出現箇所を自動的に置換します：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">/etc/network/interfaces</span></p>
</li>
<li>
<p>
<span class="monospaced">/etc/pve/nodes/&amp;lt;ノード名&amp;gt;/host.fw</span></p>
</li>
<li>
<p>
<span class="monospaced">/etc/pve/sdn/controllers.cfg</span></p>
</li>
<li>
<p>
<span class="monospaced">/etc/pve/sdn/fabrics.cfg</span></p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">生成されたマッピングは、それが生成されたノードにローカルであるため、
ファイアウォールデータセンター設定（<span class="monospaced">/etc/pve/firewall/cluster.fw</span>）に含まれる
インターフェース名は自動的に<strong>更新されません</strong>。</td>
</tr></table>
</div>
<div class="paragraph">
<p>生成されたリンクファイルは<span class="monospaced">/usr/local/lib/systemd/networkに</span>保存されます。設定ファイルについては、同じ場所に<span class="monospaced">.newサフィックス</span>付きの新しいファイルが生成されます。これにより、diff（またはお好みの差分表示ツール）を使用して設定への変更点を確認できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>diff -y /etc/network/interfaces /etc/network/interfaces.new</pre>
</div></div>
<div class="paragraph">
<p>問題のある変更を確認した場合、<strong>または再起動前に</strong>ピンニングツールによる変更を元に戻したい場合は、
<span class="monospaced">/usr/local/lib/systemd/network</span> ディレクトリから全ての<span class="monospaced">.new</span>ファイルと対応するリンクファイルを
削除してください。</p></div>
<div class="paragraph">
<p>以下のコマンドを実行すると、物理ネットワークインターフェースで
.link ファイルがまだ存在しないもの全てに対して .link ファイルが生成され、
選択した Proxmox VE 設定ファイルが更新されます（上記参照）。
生成される名前にはデフォルトの接頭辞<span class="monospaced">「nic」</span>が使用されるため、
結果として得られるインターフェース名は<span class="monospaced">nic1</span>、<span class="monospaced">nic2</span>、… となります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pve-network-interface-pinning generate</pre>
</div></div>
<div class="paragraph">
<p>デフォルトのプレフィックスは<span class="monospaced">--prefix</span>フラグで上書きできます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pve-network-interface-pinning generate --prefix myprefix</pre>
</div></div>
<div class="paragraph">
<p>特定のインターフェースのみを固定することも可能です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pve-network-interface-pinning generate --interface enp1s0</pre>
</div></div>
<div class="paragraph">
<p>特定のインターフェースを固定する際には、
固定する正確な名前を指定できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pve-network-interface-pinning generate --interface enp1s0 --target-name if42</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">pve-network-interface-pinningによる変更を</span>ネットワーク設定に反映させるには、
ノードの再起動が必要となります。</p></div>
</div>
<div class="sect5">
<h6 id="_manual_method">手動での方法
<a class="headerlink" href="#_manual_method" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>特定のネットワークデバイスに手動で名前を割り当てるには、カスタムの
<a href="https://manpages.debian.org/stable/udev/systemd.link.5.en.html">systemd.link
ファイル</a>を使用します。これにより、最新のネットワークデバイス命名規則に基づいて割り当てられる名前が上書きされます。この方法により、カーネルの更新、ドライバの更新、または命名規則の新しいバージョンによる命名変更を回避できます。</p></div>
<div class="paragraph">
<p>カスタムリンクファイルは<span class="monospaced">/etc/systemd/network/</span>に配置し、
<span class="monospaced">&amp;lt;n&amp;gt;-&amp;lt;id&amp;gt;.link という形式で命名してください</span>。ここで<span class="monospaced">n</span>は<span class="monospaced">99</span>未満の優先度、<span class="monospaced">id は</span>識別子です。
リンクファイルは 2 つのセクションで構成されます：
<span class="monospaced">[Match] セクションは</span>ファイルが適用されるインターフェースを決定し、
<span class="monospaced">[Link] セクションは</span>それらのインターフェースの設定方法（命名を含む）を決定します。</p></div>
<div class="paragraph">
<p>特定のネットワークデバイスに名前を割り当てるには、<span class="monospaced">[Match]</span>セクション内でそのデバイスを一意かつ恒久的に識別する手段が必要です。一つの方法として、MACアドレスが変更される可能性が低いため、<span class="monospaced">MACAddressオプションを使用して</span>デバイスのMACアドレスを一致させる方法が考えられます。</p></div>
<div class="paragraph">
<p>また、<span class="monospaced">[Match]</span>セクションには<span class="monospaced">Typeオプション</span>を含めることで、同じMACアドレスを持つブリッジ/ボンディング/VLANインターフェースではなく、意図した物理インターフェースのみに確実に一致させることが重要です。ほとんどの設定では、イーサネットデバイスのみに一致させるため<span class="monospaced">Typeをetherに設定しますが</span>、他の選択肢が必要な場合もあります。<a href="https://manpages.debian.org/stable/udev/systemd.link.5.en.html">詳細はsystemd.link(5)マニュアルページをご</a>参照ください。</p></div>
<div class="paragraph">
<p>その後、<span class="monospaced">[Link]</span>セクションの<span class="monospaced">Name</span>オプションを使用して名前を割り当てることができます。</p></div>
<div class="paragraph">
<p>リンクファイルは<span class="monospaced">initramfs</span> にコピーされます。そのため、リンクファイルの追加・変更・削除後は、
<span class="monospaced">initramfs</span>を更新することをお勧めいたします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># update-initramfs -u -k all</pre>
</div></div>
<div class="paragraph">
<p>例えば、<span class="monospaced">MACアドレスがaa:bb:cc:dd:ee:ff</span>のイーサネットデバイスに
<span class="monospaced">enwan0という名前を</span>割り当てるには、以下の内容で
<span class="monospaced">/etc/systemd/network/10-enwan0.linkファイル</span>を作成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[Match]
MACAddress=aa:bb:cc:dd:ee:ff
Type=ether

[Link]
Name=enwan0</pre>
</div></div>
<div class="paragraph">
<p>新しい名前を使用するよう<span class="monospaced">/etc/network/interfaces</span>を調整し、
前述の方法で<span class="monospaced">initramfs</span>を更新することをお忘れなく。変更を有効にするには
ノードの再起動が必要です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VE がインターフェースを物理ネットワークデバイスとして認識し、
GUI 経由で設定できるようにするため、
<span class="monospaced">en</span>または<span class="monospaced">eth</span>で始まる名前を割り当てることをお勧めします。
また、将来的に他のインターフェース名と衝突しないよう、
名前を確実に確保してください。
一つの方法として、systemd がネットワークインターフェースに使用する
名前パターン（<a href="#systemd_network_interface_names">上記参照</a>）と一致しない名前を割り当てます。
例えば、上記の例では<span class="monospaced">enwan0</span>などです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>リンクファイルの詳細については、
<a href="https://manpages.debian.org/stable/udev/systemd.link.5.en.html">systemd.link(5)
マニュアルページ</a>をご参照ください。</p></div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_choosing_a_network_configuration">3.4.3. ネットワーク構成の選択
<a class="headerlink" href="#_choosing_a_network_configuration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>現在のネットワーク構成とリソースに応じて、ブリッジ接続、ルーティング接続、またはマスカレード接続のいずれかのネットワーク設定を選択できます。</p></div>
<div class="sect4">
<h5 id="_proxmox_ve_server_in_a_private_lan_using_an_external_gateway_to_reach_the_internet">プライベートLAN内のProxmox VEサーバー（外部ゲートウェイ経由でインターネットに接続）
<a class="headerlink" href="#_proxmox_ve_server_in_a_private_lan_using_an_external_gateway_to_reach_the_internet" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>このケースでは<strong>ブリッジドモデル</strong>が最も合理的であり、
新しいProxmox VEインストール時のデフォルトモードでもあります。
各ゲストシステムには、Proxmox VEブリッジに接続された仮想インターフェースが
割り当てられます。これは、ゲストのネットワークカードを
LAN上の新しいスイッチに直接接続するのと同様の効果を持ち、
Proxmox VEホストがスイッチの役割を果たします。</p></div>
</div>
<div class="sect4">
<h5 id="_proxmox_ve_server_at_hosting_provider_with_public_ip_ranges_for_guests">ホスティングプロバイダーに設置されたProxmox VEサーバー（ゲスト用にパブリックIP範囲を割り当て）
<a class="headerlink" href="#_proxmox_ve_server_at_hosting_provider_with_public_ip_ranges_for_guests" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>この設定では、プロバイダーが許可する内容に応じて、<strong>ブリッジドモデル</strong>または<strong>ルーテッド</strong>モデルのいずれかをご利用いただけます。</p></div>
</div>
<div class="sect4">
<h5 id="_proxmox_ve_server_at_hosting_provider_with_a_single_public_ip_address">ホスティングプロバイダーに設置されたProxmox VEサーバー（単一のパブリックIPアドレスを使用）
<a class="headerlink" href="#_proxmox_ve_server_at_hosting_provider_with_a_single_public_ip_address" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>この場合、ゲストシステムが外部ネットワークにアクセスする唯一の方法は、
<strong>マスカレード</strong>を使用することです。ゲストシステムへの着信ネットワークアクセスについては、
<strong>ポートフォワーディング</strong>の設定が必要となります。</p></div>
<div class="paragraph">
<p>さらなる柔軟性を求める場合には、
VLAN（IEEE 802.1q）やネットワークボンディング（別名「リンクアグリゲーション」）の設定が可能です。
これにより、複雑かつ柔軟な仮想ネットワークの構築が実現できます。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_default_configuration_using_a_bridge">3.4.4. ブリッジを使用したデフォルト構成
<a class="headerlink" href="#_default_configuration_using_a_bridge" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/default-network-setup-bridge.svg">
<img src="images/default-network-setup-bridge.svg" alt="default-network-setup-bridge.svg" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>ブリッジはソフトウェアで実装された物理ネットワークスイッチのようなものです。
すべての仮想ゲストが単一のブリッジを共有することも、複数のブリッジを作成してネットワークドメインを分離することも可能です。各ホストは最大4094個のブリッジを持つことができます。</p></div>
<div class="paragraph">
<p>インストールプログラムは<span class="monospaced">vmbr0</span> という単一のブリッジを作成し、
これは最初のイーサネットカードに接続されます。
<span class="monospaced">/etc/network/interfaces</span>内の対応する設定は以下のようなものになるでしょう：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto lo
iface lo inet loopback

iface eno1 inet manual

auto vmbr0
iface vmbr0 inet static
        address 192.168.10.2/24
        gateway 192.168.10.1
        bridge-ports eno1
        bridge-stp off
        bridge-fd 0</pre>
</div></div>
<div class="paragraph">
<p>仮想マシンは、あたかも物理ネットワークに直接接続されているかのように動作します。
ネットワーク側では、これらの仮想マシンすべてを単一のネットワークケーブルで接続しているにもかかわらず、
各仮想マシンが独自のMACアドレスを持っていると認識します。</p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_network_routed">3.4.5. ルート設定
<a class="headerlink" href="#sysadmin_network_routed" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ほとんどのホスティングプロバイダは上記の設定をサポートしておりません。セキュリティ上の理由から、単一インターフェース上で複数のMACアドレスを検知すると、直ちにネットワーク機能を無効化します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAKZUlEQVRoge2aa3BU5RmAn3Pbs7fs
JmwCRGITk0hVLFAtNWoq6pAiU0cKaYfa6ShT+YN4YbQw9F/8QX+UMv6gM3Q6oxMV6TgIbe10Gq2g
cSzDpRaFgmIk4SKB3LP3Pff+SM66m+xuFvEyzvSbeefsbva8+z7nvXzf934RHMfhmzzEr9uAqx3/
B/i6xzceQP6iFDmT1cBxHNzCkFsgBEHIXnNeC1f7u1cN4DiOY9s2rliWhWVZWRDHcbJGC4KAJElI
koQoioii6IiieFUgnxvAtm3HNdg0Tbq6uuju7ubYsWP09vYyMjKCpmmoqkokEqGhoYGFCxfS2tpK
W1sbiqJkRZIkZxLoikGEK50H3CdumiZ9fX3s3LmT3bt3U1V3A0033cKc2nkEQxV4PSqSJOI4Dpqu
k0gkGLx8kZ4T7zF87iSrV69m3bp1NDY2oqoqHo8HWZa5Uo9cEYBt245lWRiGQUdHB9u2beOe1Y8w
/6bFVAT9xJJpYvEUiVSGjG5gmBY4DqIoonoUfF4PoYAfRRE5/8kp3njlD6xfv54tW7YQCATw+Xyu
R8r2RtkAtm07pmly5MgRHn/8cZSaZpbcfjd+n5f+wVEGRqJkdCMv3vME8t77vB6qQn4+OX6YsXPH
2bp1Ky0tLQQCAVRVdb0xI0RZZdQ1ft++fSxbtozrlqzgrnvvI5nRee9UL+f6h9B0A1EQEIsBiOKE
TL7XdJOBkTg1jYtouu1+1qxZw549e4hGo6TTaUzTxLbtGZ/ujEmca/wvHnqYnz/2DLNn19B74TID
I9HPjCvwlLMls4RHdMNC8IRZ8dBmnnp6E7Zts2rVKgB8Ph+yLDulPFEyhBzHcUzT5PDhwyxbtow1
j3YQqanmozOfEk2kChuLQ3x0lGQihmM7qF4vVdWz8fr9hYFyoK30OG/ufpYXXniB1tZWwuEwXq8X
WZaLJnZJAMuyHE3TuPPOO2lcsoLGpmZO9ZzPM37q0x0ZuISla2xY2077j5ZSFargZM9Znt97gE8u
DBb3ziRIfPAcF4/v59VXX6W6uppQKISqqkiSVBCgaA64odPR0YFS00xjUzNnLlwmmkznxbKYI45j
k04mefaZJ3j04VXMqZ6Fx6Pw3QXXs/3Xv6Tp2rnTALL3T8wDBCLz8M2Zz/bt24nFYjPmQ0EAt9b3
9fWxbds2ltxxD0NjMQbdmC+QlIIgIIkSoWCAH971/Wk6PYrCg/f/oHiVmhSP6qWm/gY6Ozvp6ekh
mUyi6zq2bWeXK+UAYFkWO3fu5N72dQT8Pi5cGp6xuoiiiBoMktH0gl5trp87DbqQBEMRbl32U3bt
2kUikUDTtOzypGwAwzDYvXs3316wiEuDoxiGWVaZrAjP4qW/vFUQ4NAHPdlwKQWiqF4qa+ro6uoi
kUiQTqcxDKM8ADd8Xn/9dWZdewMVwSCDo7GicT8NSBTZt/8oT259jgOHThBNpIgmUjy3dz/P7z2Q
r2My7gs9FNUXoPpbN9Ld3Z0FKBRG0+YBN3y6u7tpWnAr8WR6+gxLfr03TYNMMolhGFimiWVbXDzb
x4G3/4XgOIiyTF3DdW45nHG2RhBQfX6q65o5evQoy5cvn9BtWUiSRG5FLQhg2zbHjh3j+tsfKFrv
3R8EGL7UT23NLNraWmi+ro5r5kSYHakiVOHH7/OiyDKxZIonf9NJIpWZMQcEwOPx4vNXcPr0B2Qy
mdxEzrO34ExsWRa9vb3csjzEaP9w1sUFZ1RBQJJk/vjbTdTXzS2kDoBQwI9HmcEDOSJ7PAiiSH9/
P7quY5omlmVN01soB3Ach5GREbyqiqabM8a+NxAglcmvPOf7h9jR+WdOfNQLwNtHTzIeT+XFfdGC
IAiIogSOQzQaxTRNdy4ozwO2baNpGpIkY1j2RAJTeJ0jCAKRmtmcPHORmkglxz48y/5DJ3jrnUPM
b7iGxx7+MZZls/efR0rG/VQPgwMC2eQtZHxRAABVVbM3lEpgV178azcvvfYOgiCgZTJomsbGR9oR
BIHzl4YYGo2VlcCuWOaE5xVFwbbtqVHiCJOZXBQgEomg6zqSKOIUMrqER+LRKItvaubW78wH4NLQ
WNmx7+q1DB1ZkgmFQohifqS7xhcFEEWRhoYGEokEqkeeWPLmurcEiGPbpJJJfvbAPVl95/qHJyYv
mH5/EdG1FA5QW1ubzZvc8pm1deoHroKFCxcycPkiPlWdnmC5iTxlVk2n0wT9Xu69Y3FW51g8OfH3
ye+WnAgnRcukyKQSNDU1Icty7n65NACAJEm0trbSc/zfVAT9JZ/U1NWklslwx/duxqMoWX0Zzcy/
bwr0VCDT0NDTSS6f/ZBFixZlN/ySJJXnAVEUaWtrY6DvOIoiFlx5FhPLsrjl5uvzdPq8nsLfL6I3
FR1FlhUG+v5LS0tLtmtRlgcEYaL5pCgKq1ev5lzPKfxeT8FwKSQA115Tk6eztjpcsubn6rUMnfj4
MLHxIZYuXYrX683rVpQDIIiiiKIorFu3jn+8vIPKCt+0cCkG4m4Bc0fd3OqCoVIIJDo2iCQrvPu3
F1m5cmVeu6VQz6hgDrj1t7GxkfXr1/Px+wdRPcr02C+wmgxVVnLm3KU8ffNmVxX03lSgRHSEVGyc
oYt9tLe3U19fTzAYzAKUVYVyw0hVVbZs2cJw7/uYyZGSIeCCeFWVd499jGGaWX1zq8OfrYOKeC+T
ijM+cBHHsRju/Q9r164lFAoRDAbdPfEVAQiiKOLxeAgEAmzdupW/v/A7RLPEyjTHuGjKYMfLb3B5
eBzdMNl/+CSmZReN+0wqztDFs4iSxIE9O9mwYQPhcJhwOEwgEMhN4GkEZXUlYrEYe/bs4elfbWLF
Q5tQKyJlVaRy+kSJ6AhjA58iihJdf9rBUxufYPny5cyZM6esrkTJxpabzIFAgFWrVmHbNps3b+bu
n6wnVF2H4lHLmlULgZiGTmxkgGR8DNu2efOV3/PUxo20tbURiUSorKwkEAhkk7fYmLE36rZX0uk0
0WiUgwcP0tHRQcW8G5ndsIBgaBYe1TvtyRYDMXWNZGyU+Ngwkiwz+GkfQ73vsWHDBhYvXkwkEmHW
rFmEw2G3M1eyR1pWczcXIh6PMz4+zvbt2+ns7OS2+x6kanYdqjeA1xdAUb3IioIoSjg42JaJaejo
mTRaOoGeTiHJEvGxYd55rZP29nbWrl1LOBymqqqKyspKKioqyjK+bIBcCE3TSCaTxGIxenp62LVr
F11dXdTUL2BO/Xx8/goEUcSxbYSJ2EGS5IlzgnSC/r4PuXzmOEuXLmXlypXU19cTCoUIh8OEQqEr
7k5/7vOBdDpNMpkkkUiQSCTo7u7m6NGjnD59mv7+fqLRKIZhoCgKoVCI2tpampqaWLRoES0tLfh8
Pvx+P8FgkGAw+OWfD7gj94RG13U0TSOdTpNOp8lMbmQ0TcvbArrrK1mW8Xg8eL3e7BLB5/N9dSc0
uSP3jMwwjKy4G3AXwB0ugAsx5YzMndW//DOy3OFMjGwrxrKs7NX9LBfAneFFUcxec6rU5zqpvCqA
qTCT16/0nPgLA/i6xjf+Xw3+B2ll/uiqTaJTAAAAAElFTkSuQmCC" />
</td>
<td class="content">一部のプロバイダーでは、管理インターフェースを通じて追加のMACアドレスを登録できます。これにより問題は回避できますが、各仮想マシンごとにMACアドレスを登録する必要があるため、設定が煩雑になる可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>この問題を回避するには、すべてのトラフィックを単一のインターフェース経由で「ルーティング」する方法があります。これにより、すべてのネットワークパケットが同一のMACアドレスを使用するようになります。</p></div>
<div class="paragraph">
<a class="image" href="images/default-network-setup-routed.svg">
<img src="images/default-network-setup-routed.svg" alt="default-network-setup-routed.svg" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>一般的なシナリオとして、パブリックIP（本例では<span class="monospaced">198.51.100.5</span>と仮定）と、仮想マシン用の追加IPブロック（<span class="monospaced">203.0.113.16/28</span>）をお持ちの場合が挙げられます。このような状況では、以下の設定をお勧めいたします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto lo
iface lo inet loopback

auto eno0
iface eno0 inet static
        address  198.51.100.5/29
        gateway  198.51.100.1
        post-up echo 1 &amp;gt; /proc/sys/net/ipv4/ip_forward
        post-up echo 1 &amp;gt; /proc/sys/net/ipv4/conf/eno0/proxy_arp


auto vmbr0
iface vmbr0 inet static
        address  203.0.113.17/28
        bridge-ports none
        bridge-stp off
        bridge-fd 0</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="sysadmin_network_masquerading">3.4.6.<span class="monospaced">iptables</span>を使用したマスカレード (NAT)
<a class="headerlink" href="#sysadmin_network_masquerading" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>マスカレード機能により、プライベートIPアドレスのみを持つゲストは、
送信トラフィックにホストのIPアドレスを使用することでネットワークにアクセスできます。
各送信パケット<span class="monospaced">はiptablesによって</span>ホスト発信のように書き換えられ、
応答も同様に書き換えられて元の送信者にルーティングされます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto lo
iface lo inet loopback

auto eno1
#実際のIPアドレス
iface eno1 inet static
        address  198.51.100.5/24
        gateway  198.51.100.1

auto vmbr0
#プライベートサブネットワーク
iface vmbr0 inet static
        address  10.10.10.1/24
        bridge-ports none
        bridge-stp off
        bridge-fd 0

        post-up   echo 1 &amp;gt; /proc/sys/net/ipv4/ip_forward
        post-up   iptables -t nat -A POSTROUTING -s '10.10.10.0/24' -o eno1 -j MASQUERADE
        post-down iptables -t nat -D POSTROUTING -s '10.10.10.0/24' -o eno1 -j MASQUERADE</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ファイアウォールを有効にした一部の偽装設定では、発信接続に接続追跡ゾーンが必要となる場合があります。
そうでない場合、ファイアウォールは発信接続をブロックする可能性があります。
なぜなら、それらの接続は仮想マシンブリッジの<span class="monospaced">POSTROUTING</span>（<span class="monospaced">偽装ではなく</span>）を優先するからです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>この問題を解決するには、<span class="monospaced">/etc/network/interfaces</span>に以下の行を追加してください:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>post-up   iptables -t raw -I PREROUTING -i fwbr+ -j CT --zone 1
post-down iptables -t raw -D PREROUTING -i fwbr+ -j CT --zone 1</pre>
</div></div>
<div class="paragraph">
<p>詳細については、以下のリンクをご参照ください:</p></div>
<div class="paragraph">
<p><a href="https://commons.wikimedia.org/wiki/File:Netfilter-packet-flow.svg">Netfilter パケットフロー</a></p></div>
<div class="paragraph">
<p><a href="https://lwn.net/Articles/370152/">netdevメーリングリストにおけるconntrackゾーン導入パッチ</a></p></div>
<div class="paragraph">
<p><a href="https://web.archive.org/web/20220610151210/https://blog.lobraun.de/2019/05/19/prox/">raw テーブルの TRACE を使用した、わかりやすい説明が掲載されたブログ記事</a></p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_network_bond">3.4.7. Linux Bond
<a class="headerlink" href="#sysadmin_network_bond" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ボンディング（NIC チームングまたはリンクアグリゲーションとも呼ばれます）は、
複数の NIC を 1 つのネットワークデバイスに結合する技術です。
ネットワークのフォールトトレランスを実現したり、
パフォーマンスを向上させたり、あるいはその両方を達成したりといった、
さまざまな目的を実現することが可能です。</p></div>
<div class="paragraph">
<p>ファイバーチャネルなどの高速ハードウェアおよび関連するスイッチング
ハードウェアは、非常に高価になる場合があります。リンクアグリゲーションを行うことにより、2 つの NIC を
1 つの論理インターフェースとして認識させることができ、その結果、速度が 2 倍になります。これは
、ほとんどのスイッチでサポートされている、Linux カーネルのネイティブ機能です。
ノードに複数のイーサネットポートがある場合は、
ネットワークケーブルを異なるスイッチに接続することで
障害発生箇所を分散することができ、ネットワーク障害が発生した場合、ボンディ接続は
一方のケーブルにフェイルオーバーしますノードに複数のイーサネットポートがある場合、
ネットワークケーブルを異なるスイッチに接続することで
障害発生ポイントを分散できます。ネットワーク障害時には、
ボンディング接続が一方のケーブルへフェイルオーバーします。</p></div>
<div class="paragraph">
<p>リンク集約は、ライブマイグレーションの遅延を改善し、
Proxmox VEクラスタノード間のデータ複製速度を向上させます。</p></div>
<div class="paragraph">
<p>ボンディングには7つのモードが存在します：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>ラウンドロビン (balance-rr):</strong>利用可能なネットワークインターフェース(NIC)スレーブを最初のものから最後のものまで順番に、ネットワークパケットを転送します。このモードは負荷分散と耐障害性を提供します。</p>
</li>
<li>
<p>
<strong>アクティブ・バックアップ (active-backup):</strong>ボンディング内のNICスレーブは1つだけがアクティブとなります。アクティブなスレーブが障害を起こした場合に限り、別のスレーブがアクティブになります。単一の論理ボンディングインターフェースのMACアドレスは、ネットワークスイッチでの歪みを避けるため、1つのNIC（ポート）上でのみ外部から可視化されます。このモードはフォールトトレランスを提供します。</p>
</li>
<li>
<p>
<strong>XOR (balance-xor):</strong>ネットワークパケットを、[(送信元MACアドレスと宛先MACアドレスのXOR演算結果) ÷ NICスレーブ数] に基づいて送信します。これにより、各宛先MACアドレスに対して同一のNICスレーブが選択されます。このモードは負荷分散と耐障害性を提供します。</p>
</li>
<li>
<p>
<strong>ブロードキャスト (broadcast):</strong>ネットワークパケットをすべてのスレーブネットワークインターフェースで送信します。このモードは耐障害性を提供します。</p>
</li>
<li>
<p>
<strong>IEEE 802.3ad ダイナミックリンクアグリゲーション (802.3ad)(LACP):</strong>
同一の速度およびデュプレックス設定を共有するアグリゲーショングループを作成します。
802.3ad仕様に基づき、アクティブなアグリゲーターグループ内の全スレーブネットワークインターフェースを活用します。</p>
</li>
<li>
<p>
<strong>適応型送信負荷分散 (balance-tlb):</strong>特別なネットワークスイッチのサポートを必要としない
Linuxボンディングドライバモードです。送信ネットワークパケットトラフィックは、各ネットワークインターフェーススレーブ上の現在の負荷（速度に対して相対的に計算）に応じて分散されます。受信トラフィックは、現在指定されている1つのスレーブネットワークインターフェースによって受信されます。この受信スレーブが故障した場合、別のスレーブが故障した受信スレーブのMACアドレスを引き継ぎます。</p>
</li>
<li>
<p>
<strong>適応型負荷分散 (balance-alb):</strong>balance-tlb に加え、IPv4 トラフィック向けの受信負荷分散 (rlb) を包含し、特別なネットワークスイッチサポートを必要としません。受信負荷分散はARPネゴシエーションにより実現されます。ボンディングドライバは、ローカルシステムから送信されるARP応答を送信途中で捕捉し、送信元ハードウェアアドレスを単一の論理ボンディングインターフェース内のNICスレーブの一つ固有のハードウェアアドレスで上書きします。これにより、異なるネットワークピアがネットワークパケット通信に異なるMACアドレスを使用するようになります。</p>
</li>
</ul></div>
<div class="paragraph">
<p>お使いのスイッチがLACP（IEEE 802.3ad）プロトコルをサポートしている場合、対応するボンディングモード（802.3ad）の使用をお勧めいたします。サポートしていない場合は、一般的にactive-backupモードをご利用ください。</p></div>
<div class="paragraph">
<p>クラスターネットワーク（Corosync）については、複数のネットワークで構成することを推奨いたします。
Corosyncはネットワーク冗長性のためにボンディングを必要としません。
なぜなら、いずれかのネットワークが使用不能になった場合、
自身でネットワークを切り替えることができるためです。
一部のボンディングモードはCorosyncに問題を引き起こすことが知られています。
詳細は「<a href="#pvecm_corosync_over_bonds">Corosync over Bonds</a>」をご参照ください。</p></div>
<div class="paragraph">
<p>以下のボンディング構成は分散型／共有ストレージネットワークとしてご利用いただけます。
これにより速度向上が図れ、ネットワークの耐障害性も確保されます。</p></div>
<div class="listingblock">
<div class="title">例：固定IPアドレスを用いたボンディングの使用</div>
<div class="content monospaced">
<pre>auto lo
iface lo inet loopback

iface eno1 inet manual

iface eno2 inet manual

iface eno3 inet manual

auto bond0
iface bond0 inet static
      bond-slaves eno1 eno2
      address  192.168.1.2/24
      bond-miimon 100
      bond-mode 802.3ad
      bond-xmit-hash-policy layer2+3

auto vmbr0
iface vmbr0 inet static
        address  10.10.10.2/24
        gateway  10.10.10.1
        bridge-ports eno3
        bridge-stp off
        bridge-fd 0</pre>
</div></div>
<div class="paragraph">
<a class="image" href="images/default-network-setup-bond.svg">
<img src="images/default-network-setup-bond.svg" alt="default-network-setup-bond.svg" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>別の方法として、ボンディングを直接ブリッジポートとして使用することも可能です。
これによりゲストネットワークの耐障害性を実現できます。</p></div>
<div class="listingblock">
<div class="title">例：ボンディングをブリッジポートとして使用</div>
<div class="content monospaced">
<pre>auto lo
iface lo inet loopback

iface eno1 inet manual

iface eno2 inet manual

auto bond0
iface bond0 inet manual
      bond-slaves eno1 eno2
      bond-miimon 100
      bond-mode 802.3ad
      bond-xmit-hash-policy layer2+3

auto vmbr0
iface vmbr0 inet static
        address  10.10.10.2/24
        gateway  10.10.10.1
        bridge-ports bond0
        bridge-stp off
        bridge-fd 0</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="sysadmin_network_vlan">3.4.8. VLAN 802.1Q
<a class="headerlink" href="#sysadmin_network_vlan" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>仮想LAN（VLAN）とは、レイヤ2においてネットワーク内で分割・分離されたブロードキャストドメインです。これにより、物理ネットワーク内に複数のネットワーク（最大4096）を相互に独立して構築することが可能となります。</p></div>
<div class="paragraph">
<p>各VLANネットワークは、<em>タグ</em>と呼ばれる番号で識別されます。
ネットワークパケットには、所属する仮想ネットワークを識別するための<em>タグが付けられます</em>。</p></div>
<div class="sect4">
<h5 id="_vlan_for_guest_networks">ゲストネットワーク向けVLAN
<a class="headerlink" href="#_vlan_for_guest_networks" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Proxmox VEは、この設定を標準でサポートしております。仮想マシン作成時にVLANタグを指定することが可能です。VLANタグはゲストネットワーク設定の一部となります。ネットワーク層では、ブリッジ設定に応じてVLANを実装するための異なるモードをサポートしております：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>LinuxブリッジにおけるVLAN対応について：</strong>
この場合、各ゲストの仮想ネットワークカードはVLANタグに割り当てられ、
Linuxブリッジによって透過的にサポートされます。
トランクモードも利用可能ですが、その場合はゲスト側での設定が必要となります。</p>
</li>
<li>
<p>
<strong>Linuxブリッジ上の「従来型」VLAN:</strong>
VLAN認識方式とは異なり、この方式は透過的ではなく、
各VLANごとにブリッジを伴うVLANデバイスを作成します。
例えばVLAN 5上にゲストを作成する場合、
インターフェースeno1.5とvmbr0v5の2つが生成され、
これらは再起動が行われるまで残存します。</p>
</li>
<li>
<p>
<strong>Open vSwitch VLAN:</strong>
このモードではOVSのVLAN機能を利用します。</p>
</li>
<li>
<p>
<strong>ゲスト設定VLAN:</strong>
VLANはゲスト内部で割り当てられます。この場合、設定は完全にゲスト内部で行われ、外部からの影響を受けません。利点は、単一の仮想NIC上で複数のVLANを利用できることです。</p>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="_vlan_on_the_host">ホスト上のVLAN
<a class="headerlink" href="#_vlan_on_the_host" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ホストが分離されたネットワークと通信できるようにするためです。
VLANタグは、あらゆるネットワークデバイス（NIC、Bond、Bridge）に適用可能です。
一般的には、物理NICとの間に抽象化レイヤーが最も少ないインターフェースで
VLANを設定することをお勧めします。</p></div>
<div class="paragraph">
<p>例として、デフォルト設定においてホスト管理アドレスを
別のVLANに配置する場合が挙げられます。</p></div>
<div class="listingblock">
<div class="title">例：従来のLinuxブリッジを使用するProxmox VE管理IPにVLAN 5を適用</div>
<div class="content monospaced">
<pre>auto lo
iface lo inet loopback

iface eno1 inet manual

iface eno1.5 inet manual

auto vmbr0v5
iface vmbr0v5 inet static
        address  10.10.10.2/24
        gateway  10.10.10.1
        bridge-ports eno1.5
        bridge-stp off
        bridge-fd 0

auto vmbr0
iface vmbr0 inet manual
        bridge-ports eno1
        bridge-stp off
        bridge-fd 0</pre>
</div></div>
<div class="listingblock">
<div class="title">例：VLAN対応LinuxブリッジでProxmox VE管理IPにVLAN 5を使用</div>
<div class="content monospaced">
<pre>auto lo
iface lo inet loopback

iface eno1 inet manual


auto vmbr0.5
iface vmbr0.5 inet static
        address  10.10.10.2/24
        gateway  10.10.10.1

auto vmbr0
iface vmbr0 inet manual
        bridge-ports eno1
        bridge-stp off
        bridge-fd 0
        bridge-vlan-aware yes
        bridge-vids 2-4094</pre>
</div></div>
<div class="paragraph">
<p>次の例は同じ設定ですが、ボンディングを使用して
このネットワークをフェイルセーフにしています。</p></div>
<div class="listingblock">
<div class="title">例：従来の Linux ブリッジで Proxmox VE 管理 IP に VLAN 5 を bond0 で使用</div>
<div class="content monospaced">
<pre>auto lo
iface lo inet loopback

iface eno1 inet manual

iface eno2 inet manual

auto bond0
iface bond0 inet manual
      bond-slaves eno1 eno2
      bond-miimon 100
      bond-mode 802.3ad
      bond-xmit-hash-policy layer2+3

iface bond0.5 inet manual

auto vmbr0v5
iface vmbr0v5 inet static
        address  10.10.10.2/24
        gateway  10.10.10.1
        bridge-ports bond0.5
        bridge-stp off
        bridge-fd 0

auto vmbr0
iface vmbr0 inet manual
        bridge-ports bond0
        bridge-stp off
        bridge-fd 0</pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_disabling_ipv6_on_the_node">3.4.9. ノードにおけるIPv6の無効化
<a class="headerlink" href="#_disabling_ipv6_on_the_node" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEは、IPv6が導入されているか否かにかかわらず、
あらゆる環境で正常に動作します。すべての設定はデフォルトのままにしておくことを推奨いたします。</p></div>
<div class="paragraph">
<p>万が一ノード上でIPv6サポートを無効化する必要が生じた場合は、<span class="monospaced">適切なsysctl.conf (5)</span>スニペットファイルを作成し、<a href="https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt">適切なsysctl</a>を設定してください。
例えば、以下の内容<span class="monospaced">で/etc/sysctl.d/disable-ipv6.conf</span>を追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.default.disable_ipv6 = 1</pre>
</div></div>
<div class="paragraph">
<p>この方法は、<a href="https://www.kernel.org/doc/Documentation/networking/ipv6.rst">カーネルコマンドラインで</a>IPv6モジュールの読み込みを無効化するよりも推奨されます。</p></div>
</div>
<div class="sect3">
<h4 id="_disabling_mac_learning_on_a_bridge">3.4.10. ブリッジにおけるMAC学習の無効化
<a class="headerlink" href="#_disabling_mac_learning_on_a_bridge" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトでは、仮想ゲストとそのネットワーク環境を円滑に運用するため、ブリッジ上でMACアドレス学習が有効化されています。</p></div>
<div class="paragraph">
<p>ただし、環境によってはこれが望ましくない場合もございます。Proxmox VE 7.3 以降では、`/etc/network/interfaces` 内のブリッジ設定で `bridge-disable-mac-learning 1` を設定することにより、ブリッジ上の MAC アドレス学習を無効化することが可能です。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ...

auto vmbr0
iface vmbr0 inet static
        address  10.10.10.2/24
        gateway  10.10.10.1
        bridge-ports ens18
        bridge-stp off
        bridge-fd 0
        bridge-disable-mac-learning 1</pre>
</div></div>
<div class="paragraph">
<p>有効化後、Proxmox VE は仮想マシンおよびコンテナから設定された MAC アドレスを
ブリッジの転送データベースに手動で追加し、ゲストが実際の MAC アドレスを使用している場合に限り、
ネットワークを継続して利用できるようにします。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_time_synchronization">
<span>3.5. 時刻同期</span>
<a class="headerlink" href="#_time_synchronization" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEクラスタースタック自体は、すべてのノードの時刻が正確に同期されていることに大きく依存しております。Cephなどの他のコンポーネントも、すべてのノードのローカル時刻が同期されていない場合、正常に動作しません。</p></div>
<div class="paragraph">
<p>ノード間の時刻同期は「ネットワーク時刻プロトコル」（<span class="monospaced">NTP</span>）を用いて実現できます。Proxmox VE 7 ではデフォルトの NTP デーモンとして<span class="monospaced">chrony が</span>使用され、Proxmox VE 6 では<span class="monospaced">systemd-timesyncd が</span>使用されます。いずれも公開サーバー群を使用するよう事前設定されています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAALa0lEQVRogdWZa2wc1RXHfzM7O/te
P9e1vXHSmEdjx3YeDkkaF6REKRRCEDSEFNkRjdSWSsgC2iqoRWqLQKiqIBg1NOQDiMeHtkQIQkRR
S9S4aWwgCQoUgl232KkT28J21l6vd3d2dx79sDuTXdtre03Uqlc62tl53Pv/n3PuOffcKxiGwf9z
E//XAL5sk65WR0a6AaDrOjMtKwgCoigiCAKCIAhXa9wvTcAEHhoc5KMjR7jw3nucf+MN67k/GCS4
YQOr77yTpl27kGUZm81mXC0ywlLnQDbwEwcO0P2b3yz4jV5RwZq2Nm5/5BH8fj+SJGGz2b4UiSUR
MAzD0DSNEwcO8MdHHln8d0AcsAUCfOe551h7yy04HA7sdvuSrVEwAV3XjdDgIC/v2cOl06dznqWA
JCAAMvn9MwlEgF1PP8037rsPt9uN3W5fkjUKIqDrujF+4QLP3XQTU0NDOc8UIAa4y8sJtrQQqK/H
7XQSfv99Pn/nHQRRxNB16/0EEAUatm9n76uv4vP5cDgcBZNYNIF84I0MEK20lIZvf5sNe/dSWlqK
1+vFxBEZHubT3/+evqNHmR4dJRWP55BevW0bra+8gt/vx+l0IknSokksikA+8ElgClixYwc3799P
ZWUlTqczbz+x0VFOPvEEQ6dPE/niCwxdt0jUbd1K68svU1xcXBCJBQnMBz5eWkrL/v2s++Y3KSsr
QxQXlxc7f/5zBjo7CQ8NoadSKKQn943t7dyyf79FYjHuNC8BwzAMVVV56Z57+OzNN3PAJ8vK+FZH
B2s2b55X6/nahRMnOP7TnxLOKEXJyO2/+hVf37uXoqIinE6nmfzyksirMjNUvvGjH+WAVwG1vJxb
Dhxg1bp1uFwuMwQWJCu3bWPN3r24SkoAcGbA/OXXv2bws8+IRqOkUqlZGX1RBAzDMHRd51+nTvHe
wYNX7gPTQMO+faxav56SkpIlgTdlU3s7TXv2IGUs6AGioRDH2tuZmJggFouhqirGPCzyEUBVVX7X
1pZzPwI0fP/7bNmzh7KysrzADh8+zP3338++ffs4ePBg3vdEUWTDD3/IsuZmRLsdW4bEpd5eOp99
lnA4jKIoaJqWl8QsAqb2Txw4kDNp40BxXR0bWlspLy/PC+qZZ55hdHQUSZIYHByko6ODxx57bBZw
cy3kq6xk6y9/ib+qCgQBmbQ7nT50iIs9PUSjUZLJJIZhzEliLgKMDQzwp5/9zLqnkQ51W3/xCwKB
AE6nMy+B3t5exsfH6ezspLe3l3g8zuHDh2cBz5bKpibWtrXhLi0FwA3owNsPP8zExATxeBxVVecy
QC4Bc+L+taNjluvU33031dddN6/2BUGgpKSE/v5+JicncweaA3i2tDz8MIHrr0eU0gsQBzDW10ff
yZNEIhESicScrpRDQNd1xgYG+OC3v7XuJQBXIMDWn/yEioqKeUGMjY0hCAKKoszS1MjIyLzfAmx/
4gmKli0DQcBJOmicfOopJicnicfjJoG5LWBq/+Szz+a8oABNe/bgdrvndR1BEKiqqiIejxOLxWYR
CAaDC0alqjVrqGxowFNWhkDalUKff07f3/5mWSFTLFksLAK6rjN+4UKO9lXAUV7O2tbWeaNOthZl
WZ4FHlh0aN3y4IPIHk+6L8AGvNfRQTgctuZCthVEU/u6rnPutddyBk0A9bt3W4us+QY2fbyurg6v
15vTzw033LBoAsHmZoLNzdgcDgBcQKi/n391dTE9PU0ymcyxgkmAVCrF+4cO5WjfFgiwfoGwOTOy
lJWVUVtba1mkUAKCILClvR1veTkA9owVPnzllZy8YFnA1H5/dzfTw8PWgziwcutWfD4fsiwvCNyU
xsZG3G43lZWVVl933XVXQQSq161j+ebNlhXcwBdnzxIOh60lhmkFEUDTNP7++uvWgBrp6mrNHBk3
H/BsAtFoFEdm8GAwyMaNGwsiIAgCjbt346uosKwgAp8cPWolNj1THInmsqHn6FGLQApY1thIxcqV
+Hy+WX6+0ETesWMHLpcLWZZ54IEHCgYvCAKrbrsNyem0JrQEXMzkhKzlBaKu61z+97+ZHhnJmbwr
tm2zJu5CWp8pra2tNDU1sXPnTtrb25dEQBAEvrplC57MXJCB8XPniEQixONxa6Uq6brOQHd3jvvo
QP2ttxZUpMxsL7zwwpK+AyxLXrt9Oxe6uxFEEXvGZc4fO0bVD35AMplM1wuapjGYtbugAp5AgKLq
aquu/W/JTEs37dqFqihWzSADk8PD1jzQNC3tQtmrThUINDbm+H4h0tfXx6OPPsodd9xBW1sbPT09
BQPPluu2b7fWRxIQ6usjFotZBCRN06wZbbZAfT1FRUWWKQtpzz//PMPDw/T09DA1NcXo6CjHjx+f
11Xma95AwHJjEdB0HUVRrhCYuRGrAiXBoFUqFtq6u7sZHx9nJBMUurq65uxnsX0Hm5v56A9/ANIJ
LXrpEolEwgqlUqZQyPlo6OOPlzx5ly1bxnBWQmxpackBW6hSBEC02axrpqasNZGmaek8kN0kYPDj
j1FVdUlz4Mknn6Surs4Cb5aUhYZiUy59+GGOgm3V1WiadiUPCILAV9autV5wAaM9PXQeOWJprBBp
aGjgxIkTpFIpOjs7aWxsXBJwUwZOnUKZmgLS2zl4vUjSlV1XURRFqtavv3IDKAVe/O53efPxx69a
SCxUBs+c4dV77+Vyfz+xy5eBdG3iX7ECm81m9S2JokiwuZmiujrCPT1AuqgOAqcef5zzL77Imt27
uemhhyipqVnYZ5cw8bPbR0eOcOall7g8MEB4aIhEJAJk9qOAwKZNyLJsHpQgRKNRIxQK0XPmDH/+
3vdQQ6G8na/YtIk199zDypYWVmzceFWAT1y8yMWzZzn/9tv0vfsudqeTlKIQHRvL2QSOAqU7d/K1
W2/l2muvpba2Nl3iJhIJIxKJMDw8TO/Zs3zw4x+jTUzkHVCw2fCUleHw+QiuXYu/upqqhgb8VVUY
hkFNczPFweCs7z556y3r+vyxYwiiyD+PHwdBwNB1krEYhqYRC4UwdB2D9LJmmnRtXHz77VTfeCPL
ly+ntraWmpqa9MaaqqqGoiiEQiGGhoYYHBzk00OHiHR2LkqDNlnG7nJhd7nQswqN+ZogiuipFMlY
DDWRgBl5KEF6woqAUFFByc03U756NZWVlSxfvpyamhoCgQAejwdB13VDVVVisRihUIiRkRGGh4cZ
+sc/GO3qIt7VhZGJAle7mVpWuVKDCBng8jXX4N68Gc8111BUVER5eTnV1dVUV1cTCASuFFqGYaDr
upFKpYjH40xMTDA+Ps7Y2Bjj4+OEw2EmenqYPneO1OAgZCWpxTY9S9QMcLhyHGUDRI8HqbISZ309
zoYGnE4nHo8Hv99PaWkpgUCAiooK6/DE4XCkI1HW2a6hqiqKojA9Pc3k5KQl4XCY6elpotFoetuk
v59UKIR66RLToRBJTcMYHUWIRvMSMPO6rbY2/SsIOFatQpYk5NWrkSQJWZZxOBy43W68Xi9+v5+i
oiJKSkooLi7G5/PhdruRZdnads85HzD3hpLJJIqiEIvFiEajRCIRIpEI0WiUWCxGPB631iOKopBK
pazUbi4Oc7Y+snKCzWbDZrMhSRKSJGG3262w6HK5cLlceDwevF4vPp8Pr9eL2+3G5XLhcDjMkxuE
TNibdcBhnv9qmkYqlSKZTJJIJFAUhXg8jqIoKIpCIpGwSCSTSVRVtWSuk3qTiAnebrfngHc4HDid
TpxOJy6Xy7qWZdk6wZzrxCbvCY1JRNd1NE3LAWgSM69ngp+PgCiK1gF3NhFTzHvmO+Y3wCzw8xLI
JpL5tYCZpEyw2f/nWt1ag2UtM0x3Mq1iAp1j+bH0M7KFCGWDnfmbd8AMnuxfUzL/C0rp/wFnFd4n
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">システムを Proxmox VE 7 にアップグレードされる場合は、
<span class="monospaced">chrony</span>、<span class="monospaced">ntp</span>、または<span class="monospaced">openntpd</span> のいずれかを
手動でインストールされることをお勧めいたします。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_using_custom_ntp_servers">3.5.1. カスタムNTPサーバーの使用
<a class="headerlink" href="#_using_custom_ntp_servers" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>場合によっては、デフォルト以外のNTPサーバーを使用することが望ましい場合があります。例えば、ファイアウォールの制限によりProxmox VEノードがパブリックインターネットにアクセスできない場合、ローカルNTPサーバーを設定し、NTPデーモンにそれらを使用するよう指示する必要があります。</p></div>
<div class="sect4">
<h5 id="_for_systems_using_chrony">chronyを使用しているシステムの場合：<a class="headerlink" href="#_for_systems_using_chrony" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">chrony</span>が使用するサーバーを<span class="monospaced">/etc/chrony/chrony.conf</span> で指定してください:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>サーバー ntp1.example.com iburst
サーバー ntp2.example.com iburst
サーバー ntp3.example.com iburst</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">chrony</span>を再起動します:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># systemctl restart chronyd</pre>
</div></div>
<div class="paragraph">
<p>ジャーナルを確認し、新たに設定したNTPサーバーが使用されていることをご確認ください:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># journalctl --since -1h -u chrony</pre>
</div></div>
<div class="listingblock">
<div class="content monospaced">
<pre>...
Aug 26 13:00:09 node1 systemd[1]: chrony (NTPクライアント/サーバー) を起動しました。
8月26日 13:00:15 node1 chronyd[4873]: ソース 10.0.0.1 (ntp1.example.com) を選択しました
8月26日 13:00:15 node1 chronyd[4873]: システムクロックの TAI オフセットを 37 秒に設定しました
...</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_for_systems_using_systemd_timesyncd">systemd-timesyncdを使用しているシステムの場合：<a class="headerlink" href="#_for_systems_using_systemd_timesyncd" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">/etc/systemd/timesyncd.conf</span> ファイルで<span class="monospaced">systemd-timesyncd</span>が使用するサーバーを指定します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[時刻]
NTP=ntp1.example.com ntp2.example.com ntp3.example.com ntp4.example.com</pre>
</div></div>
<div class="paragraph">
<p>その後、同期サービスを再起動し（<span class="monospaced">systemctl restart systemd-timesyncd</span>）、
ジャーナルを確認して新規設定のNTPサーバーが使用されていることを
ご確認ください（<span class="monospaced">journalctl --since -1h -u systemd-timesyncd</span>）：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>...
10月 07日 14:58:36 node1 systemd[1]: ネットワーク時刻同期を停止中です...
10月 07日 14:58:36 node1 systemd[1]: ネットワーク時刻同期を開始中です...
10月07日 14:58:36 node1 systemd[1]: ネットワーク時刻同期を開始しました。
10月07日 14:58:36 node1 systemd-timesyncd[13514]: NTPサーバー 10.0.0.1:123 (ntp1.example.com) を使用しています。
10月 7日 14:58:36 node1 systemd-timesyncd[13514]: 間隔/差分/遅延/ジッター/ドリフト 64秒/-0.002秒/0.020秒/0.000秒/-31ppm
...</pre>
</div></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="external_metric_server">
<span>3.6. 外部メトリックサーバー</span>
<a class="headerlink" href="#external_metric_server" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-metric-server-list.png">
<img src="images/screenshot/gui-datacenter-metric-server-list.png" alt="screenshot/gui-datacenter-metric-server-list.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VE では、外部メトリックサーバーを定義することが可能です。これにより、ホスト、仮想ゲスト、ストレージに関する様々な統計情報が定期的に受信されます。</p></div>
<div class="paragraph">
<p>現在サポートされているのは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
Graphite（詳細は<a href="https://graphiteapp.org">https://graphiteapp.org</a>をご参照ください）</p>
</li>
<li>
<p>
InfluxDB（詳細は<a href="https://www.influxdata.com/time-series-platform/influxdb/">https://www.influxdata.com/time-series-platform/influxdb/</a>をご参照ください）</p>
</li>
</ul></div>
<div class="paragraph">
<p>外部メトリックサーバーの設定は<em>/etc/pve/status.cfg</em> に保存され、
ウェブインターフェースを通じて編集が可能です。</p></div>
<div class="sect3">
<h4 id="metric_server_graphite">3.6.1. Graphiteサーバーの設定
<a class="headerlink" href="#metric_server_graphite" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-metric-server-graphite.png">
<img src="images/screenshot/gui-datacenter-metric-server-graphite.png" alt="screenshot/gui-datacenter-metric-server-graphite.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>デフォルトのポートは<strong>2003</strong>に設定されており、デフォルトのGraphiteパ<strong>スはproxmoxとなります</strong>。</p></div>
<div class="paragraph">
<p>デフォルトでは、Proxmox VEはUDP経由でデータを送信します。そのため、Graphiteサーバーはこれを許可するよう設定する必要があります。ここでは、標準の<strong>1500</strong>MTUを使用しない環境向けに、最大伝送単位（MTU）を設定できます。</p></div>
<div class="paragraph">
<p>また、プラグインをTCP使用に設定することも可能です。重要な統計収集<span class="monospaced">デーモンであるpvestatdを</span>妨げないよう、ネットワーク障害に対応するためのタイムアウト設定が必要です。</p></div>
</div>
<div class="sect3">
<h4 id="metric_server_influxdb">3.6.2. Influxdb プラグインの設定
<a class="headerlink" href="#metric_server_influxdb" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-metric-server-influxdb.png">
<img src="images/screenshot/gui-datacenter-metric-server-influxdb.png" alt="screenshot/gui-datacenter-metric-server-influxdb.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VEはUDP経由でデータを送信するため、InfluxDBサーバーもこれに対応するよう設定する必要があります。必要に応じて、MTUもここで設定可能です。</p></div>
<div class="paragraph">
<p>以下に、InfluxDBサーバー側での設定例を示します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[[udp]]
   enabled = true
   bind-address = "0.0.0.0:8089"
   database = "proxmox"
   batch-size = 1000
   batch-timeout = "1s"</pre>
</div></div>
<div class="paragraph">
<p>この設定により、サーバーはすべてのIPアドレスのポート8089でリスニングし、
<strong>Proxmoxデータベースに</strong>データを書き込みます。</p></div>
<div class="paragraph">
<p>あるいは、プラグインをInfluxDB 2.xのhttp(s) APIを使用するよう設定することも可能です。
InfluxDB 1.8.xには、このv2 API向けの前方互換性のあるAPIエンドポイントが含まれています。</p></div>
<div class="paragraph">
<p>ご利用の際は、設定に応じて<em>influxdbproto を</em> <em>http</em>または<em>https</em>に設定してください。
デフォルトでは、Proxmox VE は組織名<em>proxmox</em>およびバケット/データベース名<em>proxmox</em>を使用します
（それぞれ設定の<em>organization</em>および<em>bucket</em>で指定可能です）。</p></div>
<div class="paragraph">
<p>InfluxDBのv2 APIは認証が必要となりますため、
該当バケットへの書き込み権限を持つトークンを生成し、設定する必要があります。</p></div>
<div class="paragraph">
<p>1.8.x の v2 互換 API では、<em>トークンとしてユーザー名:パスワード</em>を使用できます（必要な場合）。
また、InfluxDB 1.x では意味を持たないため、<em>組織名は</em>省略可能です。</p></div>
<div class="paragraph">
<p>また、<em>timeout設定でHTTP</em>タイムアウト（デフォルトは1秒）を設定でき、
<em>max-body-size設定で</em>最大バッチサイズ（デフォルト25000000バイト）を設定できます
（これはInfluxDBの同名設定に対応します）。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="disk_health_monitoring">
<span>3.7. ディスクの健全性監視</span>
<a class="headerlink" href="#disk_health_monitoring" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>堅牢で冗長化されたストレージ環境が推奨されますが、
ローカルディスクの健全性を監視することは非常に有益です。</p></div>
<div class="paragraph">
<p>Proxmox VE 4.3 以降では、パッケージ smartmontools<span class="footnote"><br>[smartmontools ホームページ<a href="https://www.smartmontools.org">https://www.smartmontools.org</a>]<br></span>
がインストールされ、必須となります。これはローカルハードディスクの S.M.A.R.T. システムを監視・制御するためのツール群です。</p></div>
<div class="paragraph">
<p>ディスクの状態は、以下のコマンドを実行することで確認できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># smartctl -a /dev/sdX</pre>
</div></div>
<div class="paragraph">
<p>ここで /dev/sdX はローカルディスクのパスです。</p></div>
<div class="paragraph">
<p>出力結果に以下のように表示された場合:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>SMARTサポートは: 無効</pre>
</div></div>
<div class="paragraph">
<p>以下のコマンドで有効にできます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># smartctl -s on /dev/sdX</pre>
</div></div>
<div class="paragraph">
<p>smartctl の使用方法の詳細については、<span class="monospaced">man smartctl</span> をご参照ください。</p></div>
<div class="paragraph">
<p>デフォルトでは、smartmontoolsデーモンであるsmartdは有効化されており、
該当するデバイスを</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">/dev/sd[a-z]</span></p>
</li>
<li>
<p>
<span class="monospaced">/dev/sd[a-z][a-z]</span></p>
</li>
<li>
<p>
<span class="monospaced">/dev/hd[a-t]</span></p>
</li>
<li>
<p>
または<span class="monospaced">/dev/nvme[0-99]</span></p>
</li>
</ul></div>
<div class="paragraph">
<p>エラーや警告をスキャンし、問題を検出するとroot宛てにメールを送信します。</p></div>
<div class="paragraph">
<p>smartdの設定方法の詳細については、<span class="monospaced">man smartd</span>および<span class="monospaced">man smartd.conf</span> を参照してください。</p></div>
<div class="paragraph">
<p>ハードディスクをハードウェア RAID コントローラで使用されている場合、RAID アレイ内のディスクおよびアレイ自体を監視するツールが用意されている可能性が高いです。詳細については、お使いの RAID コントローラのベンダーにお問い合わせください。</p></div>
</div>
<div class="sect2">
<h3 id="chapter_lvm">
<span>3.8. 論理ボリュームマネージャ (LVM)</span>
<a class="headerlink" href="#chapter_lvm" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>多くの方はProxmox VEをローカルディスクに直接インストールされます。Proxmox VEインストールCDではローカルディスク管理に複数のオプションが用意されており、現在のデフォルト設定ではLVMが使用されます。インストーラーではこの設定用に単一ディスクを選択でき、そのディスクを<strong>ボリュームグループ</strong>(VG)<span class="monospaced">「pve」</span>の物理ボリュームとして使用します。以下は8GBの小さなディスクを使用したテストインストールの出力例です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvs
  PV         VG   Fmt  Attr PSize PFree
  /dev/sda3  pve  lvm2 a--  7.87g 876.00m

# vgs
  VG   #PV #LV #SN Attr   VSize VFree
  pve    1   3   0 wz--n- 7.87g 876.00m</pre>
</div></div>
<div class="paragraph">
<p>インストーラーはこのVG内に3つの<strong>論理</strong> <strong>ボリューム</strong>(LV)を割り当てます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lvs
  LV   VG   Attr       LSize   Pool Origin Data%  Meta%
  data pve  twi-a-tz--   4.38g             0.00   0.63
  root pve  -wi-ao----   1.75g
  swap pve  -wi-ao---- 896.00m</pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
root</dt>
<dd>
<p>
<span class="monospaced">ext4</span>でフォーマットされており、オペレーティングシステムが含まれています。</p>
</dd>
<dt class="hdlist1">
スワップ</dt>
<dd>
<p>
スワップパーティション</p>
</dd>
<dt class="hdlist1">
データ</dt>
<dd>
<p>
このボリュームはLVM-thinを使用し、VMイメージの保存に使用されます。LVM-thinはこのタスクに最適です。スナップショットとクローンを効率的にサポートするためです。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>Proxmox VE バージョン 4.1 までは、インストーラーは「data」という標準論理ボリュームを作成し、
これを<span class="monospaced">/var/lib/vz</span> にマウントします。</p></div>
<div class="paragraph">
<p>バージョン4.2以降では、論理ボリューム「data」はLVM-thinプールとなり、
ブロックベースのゲストイメージを保存するために使用されます。
また、<span class="monospaced">/var/lib/vzは</span>単にルートファイルシステム上のディレクトリとなります。</p></div>
<div class="sect3">
<h4 id="_hardware">3.8.1. ハードウェア
<a class="headerlink" href="#_hardware" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このような構成には、ハードウェア RAID コントローラ（BBU 付き）のご利用を強くお勧めいたします。
これによりパフォーマンスが向上し、冗長性が確保され、
ディスクの交換も容易になります（ホットプラグ対応）。</p></div>
<div class="paragraph">
<p>LVM自体に特別なハードウェアは必要なく、メモリ要件も非常に低くなっています。</p></div>
</div>
<div class="sect3">
<h4 id="_bootloader">3.8.2. ブートローダー
<a class="headerlink" href="#_bootloader" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトでは2種類のブートローダーをインストールします。
最初のパーティションには標準のGRUBブートローダーを配置します。
2番目のパーティションは<strong>EFI</strong><strong>システムパーティション</strong>（ESP）であり、
これによりEFIシステムでの起動が可能となり、
ユーザースペースから<a href="#sysadmin_firmware_persistent">永続的なファームウェア更新を</a>適用できます。</p></div>
</div>
<div class="sect3">
<h4 id="_creating_a_volume_group">3.8.3. ボリュームグループの作成
<a class="headerlink" href="#_creating_a_volume_group" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>空のディスク<span class="monospaced">/dev/sdb</span> が存在すると仮定し、
これに「vmdata」という名前のボリュームグループを作成します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">以下のコマンドを実行すると、<span class="monospaced">/dev/sdb</span> 上の既存データがすべて消去されますのでご注意ください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>まずパーティションを作成します。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># sgdisk -N 1 /dev/sdb</pre>
</div></div>
<div class="paragraph">
<p>確認なしで<strong>物理</strong> <strong>ボリューム</strong>（PV）を作成し、メタデータサイズを250Kとします。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvcreate --metadatasize 250k -y -ff /dev/sdb1</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">/dev/sdb1上に</span>「vmdata」という名前のボリュームグループを作成します。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vgcreate vmdata /dev/sdb1</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_creating_an_extra_lv_for_span_class_monospaced_var_lib_vz_span">3.8.4.<span class="monospaced">/var/lib/vz</span>用に追加の論理ボリュームを作成する
<a class="headerlink" href="#_creating_an_extra_lv_for_span_class_monospaced_var_lib_vz_span" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>これは新しいシンLVを作成することで簡単に実現できます。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># lvcreate -n &amp;lt;名前&amp;gt; -V &amp;lt;サイズ[M,G,T]&amp;gt; &amp;lt;VG&amp;gt;/&amp;lt;LVThin_pool&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>実際の使用例：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># lvcreate -n vz -V 10G pve/data</pre>
</div></div>
<div class="paragraph">
<p>次に、LV上にファイルシステムを作成する必要があります。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># mkfs.ext4 /dev/pve/vz</pre>
</div></div>
<div class="paragraph">
<p>最後にマウントする必要があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">/var/lib/vz</span>が空であることを必ずご確認ください。デフォルトのインストール環境では空ではありません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>常にアクセス可能にするため、<span class="monospaced">/etc/fstab</span> に以下の行を追加してください。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># echo '/dev/pve/vz /var/lib/vz ext4 defaults 0 2' &amp;gt;&amp;gt; /etc/fstab</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_resizing_the_thin_pool">3.8.5. シンプールのサイズ変更
<a class="headerlink" href="#_resizing_the_thin_pool" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>LVとメタデータプールは次のコマンドでサイズ変更します：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># lvresize --size +&amp;lt;size[\M,G,T]&amp;gt; --poolmetadatasize +&amp;lt;size[\M,G]&amp;gt; &amp;lt;VG&amp;gt;/&amp;lt;LVThin_pool&amp;gt;</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">データプールを拡張する際には、メタデータプールも併せて拡張する必要があります。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_create_a_lvm_thin_pool">3.8.6. LVM-thin プールの作成
<a class="headerlink" href="#_create_a_lvm_thin_pool" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ボリュームグループ上にシンプールを作成する必要があります。
ボリュームグループの作成方法については、セクションLVMをご参照ください。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># lvcreate -L 80G -T -n vmstore vmdata</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="chapter_zfs">
<span>3.9. Linux 上の ZFS</span>
<a class="headerlink" href="#chapter_zfs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ZFSは、Sun Microsystemsによって設計されたファイルシステムと論理ボリュームマネージャを統合したものです。Proxmox VE 3.4より、ZFSファイルシステムのネイティブLinuxカーネルポートがオプションのファイルシステムとして導入され、ルートファイルシステムの追加選択肢としても提供されています。ZFSモジュールを手動でコンパイルする必要はなく、全てのパッケージが含まれています。</p></div>
<div class="paragraph">
<p>ZFSをご利用いただくことで、低予算のハードウェアでエンタープライズレベルの機能を最大限に実現できるだけでなく、SSDキャッシュやSSDのみの構成を活用することで高性能システムも構築可能です。ZFSは、適度なCPUとメモリ負荷、そして容易な管理性を兼ね備え、高コストなハードウェアRAIDカードを置き換えることができます。</p></div>
<div class="ulist"><div class="title">ZFSの一般的な利点</div><ul>
<li>
<p>
Proxmox VEのGUIおよびCLIによる簡単な設定と管理が可能です。</p>
</li>
<li>
<p>
信頼性</p>
</li>
<li>
<p>
データ破損に対する保護</p>
</li>
<li>
<p>
ファイルシステムレベルでのデータ圧縮</p>
</li>
<li>
<p>
スナップショット</p>
</li>
<li>
<p>
コピー・オン・ライト方式のクローン</p>
</li>
<li>
<p>
各種RAIDレベル：RAID0、RAID1、RAID10、RAIDZ-1、RAIDZ-2、RAIDZ-3、
dRAID、dRAID2、dRAID3</p>
</li>
<li>
<p>
SSDをキャッシュとして使用可能</p>
</li>
<li>
<p>
自己修復機能</p>
</li>
<li>
<p>
継続的な整合性チェック</p>
</li>
<li>
<p>
大容量ストレージ向けに設計されています</p>
</li>
<li>
<p>
ネットワーク経由の非同期レプリケーション</p>
</li>
<li>
<p>
オープンソース</p>
</li>
<li>
<p>
暗号化</p>
</li>
<li>
<p>
…</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_hardware_2">3.9.1. ハードウェア
<a class="headerlink" href="#_hardware_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFSはメモリに大きく依存するため、開始には最低8GBが必要です。
実際には、ハードウェアや予算の範囲で可能な限り多くのメモリを使用してください。
データ破損を防ぐため、高品質のECC RAMの使用をお勧めします。</p></div>
<div class="paragraph">
<p>専用のキャッシュディスクやログディスクを使用する場合は、
エンタープライズクラスのSSDをご利用ください。これにより
全体的なパフォーマンスが大幅に向上します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">ハードウェアRAIDコントローラは独自のキャッシュ管理機能を有しておりますため、その上にZFSを構築することは避けてください。ZFSはディスクと直接通信する必要がございます。HBAアダプタ、あるいは「IT」モードでフラッシュされたLSIコントローラなどがより適しております。</td>
</tr></table>
</div>
<div class="paragraph">
<p>仮想マシン内でのProxmox VEインストール（ネスト型仮想化）を実験される場合、
その仮想マシンのディスクに<span class="monospaced">virtio</span>を使用しないでください。
ZFSではサポートされていません。代わりにIDEまたはSCSIを使用してください
（<span class="monospaced">virtio</span>SCSIコントローラタイプでも動作します）。</p></div>
</div>
<div class="sect3">
<h4 id="_installation_as_root_file_system">3.9.2. ルートファイルシステムとしてのインストール
<a class="headerlink" href="#_installation_as_root_file_system" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEインストーラを使用してインストールする際、ルートファイルシステムにZFSを選択できます。インストール時にRAIDタイプを選択する必要があります：</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
RAID0<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
「ストライピング」とも呼ばれます。このボリュームの容量は、
全ディスクの容量の合計となります。ただしRAID0は冗長性を一切提供しないため、
単一のドライブが故障するとボリューム全体が使用不能となります。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
RAID1<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
「ミラーリング」とも呼ばれます。データは全てのディスクに同一の内容で書き込まれます。このモードには、同じサイズのディスクが最低2台必要です。結果として得られる容量は、単一ディスクの容量となります。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
RAID10<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
RAID0とRAID1の組み合わせです。最低4台のディスクが必要です。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
RAIDZ-1<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
RAID-5のバリエーションで、シングルパリティ方式です。最低3台のディスクが必要です。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
RAIDZ-2<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
RAID-5のバリエーションで、二重パリティ方式です。最低4枚のディスクが必要です。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
RAIDZ-3<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
RAID-5のバリエーションで、三重パリティ方式です。最低5台のディスクが必要です。</p>
</td>
</tr>
</table></div>
<div class="paragraph">
<p>インストーラーは自動的にディスクをパーティション分割し、
<span class="monospaced">rpool</span> という ZFS プールを作成します。
その後、ZFS サブボリューム<span class="monospaced">rpool/ROOT/pve-1</span> に
ルートファイルシステムをインストールします。</p></div>
<div class="paragraph">
<p>仮想マシンイメージを保存するための別のサブボリューム<span class="monospaced">rpool/data</span>が作成されます。
Proxmox VE ツールでこれを利用するために、インストーラーは<span class="monospaced">/etc/pve/storage.cfg</span> に
以下の設定エントリを作成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>zfspool: local-zfs
        pool rpool/data
        sparse
        content images,rootdir</pre>
</div></div>
<div class="paragraph">
<p>インストール後、<span class="monospaced">zpoolコマンドを使用してZFS</span>プールの状態を確認できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool status
  pool: rpool
 state: ONLINE
  scan: none requested
config:

        NAME        STATE     READ WRITE CKSUM
        rpool       ONLINE       0     0     0
          mirror-0  ONLINE       0     0     0
            sda2    ONLINE       0     0     0
            sdb2    ONLINE       0     0     0
          mirror-1  ONLINE       0     0     0
            sdc     ONLINE       0     0     0
            sdd     ONLINE       0     0     0

errors: 既知のデータエラーはありません</pre>
</div></div>
<div class="paragraph">
<p>ZFSファイルシステムの構成と管理<span class="monospaced">にはzfsコマンド</span>を使用します。
インストール後の全ファイルシステムは次のコマンドで一覧表示できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zfs list
NAME               USED  AVAIL  REFER  MOUNTPOINT
rpool             4.94G  7.68T    96K  /rpool
rpool/ROOT         702M  7.68T    96K  /rpool/ROOT
rpool/ROOT/pve-1   702M  7.68T   702M  /
rpool/data          96K  7.68T    96K  /rpool/data
rpool/swap        4.25G  7.69T    64K  -</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="sysadmin_zfs_raid_considerations">3.9.3. ZFS RAID レベルの考慮事項
<a class="headerlink" href="#sysadmin_zfs_raid_considerations" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFSプールのレイアウトを選択する際には、いくつかの要素を考慮する必要があります。ZFSプールの基本構成要素は仮想デバイス（<span class="monospaced">vdev）</span>です。プール内の全てのvdevは均等に使用され、データはそれらにストライピングされます（RAID0）。vdevの詳細については、<span class="monospaced">zpoolconcepts(7)</span>マニュアルページをご参照ください。</p></div>
<div class="sect4">
<h5 id="sysadmin_zfs_raid_performance">パフォーマンス
<a class="headerlink" href="#sysadmin_zfs_raid_performance" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>各<span class="monospaced">vdevタイプは</span>異なるパフォーマンス特性を示します。
注目すべき2つのパラメータは、IOPS（1秒あたりの入出力操作数）と、
データの書き込みまたは読み取りが可能な帯域幅です。</p></div>
<div class="paragraph">
<p><em>ミラー</em>vdev（RAID1）は、データ書き込み時において、両パラメータの点で単一ディスクと同等の挙動を示します。データ読み取り時の性能は、ミラー内のディスク数に比例して直線的に向上します。</p></div>
<div class="paragraph">
<p>一般的な構成として、4台のディスクを使用する場合が挙げられます。これを2つのミラーvdev（RAID10）として設定すると、プールは書き込み時において、IOPSと帯域幅の両面で2台の単一ディスクと同等の特性を示します。読み取り操作においては、4台の単一ディスクに近い挙動となります。</p></div>
<div class="paragraph">
<p>あらゆる冗長性レベルの<em>RAIDZは</em>、IOPSに関しては単一ディスクと同等の動作を示し、高い帯域幅を実現します。具体的な帯域幅は、RAIDZ vdevのサイズと冗長性レベルによって異なります。</p></div>
<div class="paragraph">
<p><em>dRAID</em>プールは、同等の<em>RAIDZ</em>プールと同等の性能を発揮するはずです。</p></div>
<div class="paragraph">
<p>稼働中の仮想マシンにおいては、ほとんどの状況でIOPSがより重要な指標となります。</p></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_raid_size_space_usage_redundancy">サイズ、使用領域、冗長性
<a class="headerlink" href="#sysadmin_zfs_raid_size_space_usage_redundancy" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><em>ミラーvdev</em>で構成されたプールは最高の性能特性を示しますが、
使用可能容量は利用可能なディスクの50%となります。
ミラーvdevが2台以上のディスクで構成される場合（例：3ウェイミラー）、
使用可能容量はさらに減少します。
プールが機能し続けるためには、ミラーごとに少なくとも1台の健全なディスクが必要です。</p></div>
<div class="paragraph">
<p>N台のディスクで構成<em>されるRAIDZタイプの</em>vdevの有効使用領域は、おおよそN-Pとなります。ここでPはRAIDZレベルを表します。RAIDZレベルは、データを失うことなく障害が発生可能なディスクの数を示します。特例として、RAIDZ2を使用した4台のディスクプールが挙げられます。この状況では、有効使用領域が同等となるため、より優れたパフォーマンスを得るために2つのミラーvdevを使用することが通常推奨されます。</p></div>
<div class="paragraph">
<p>いずれのRAIDZレベルを使用する場合でも、VMディスクに用いられるZVOLデータセットの挙動が重要な要素となります。各データブロックに対し、プールは少なくともプールが定義する<span class="monospaced">ashift値による</span>最小ブロックサイズと同等のパリティデータを必要とします。ashiftが12の場合、プールのブロックサイズは4kとなります。ZVOLのデフォルトブロックサイズは8kです。したがって、RAIDZ2では8kブロックを書き込むごとに、追加で2つの4kパリティブロックが書き込まれます。
8k + 4k + 4k = 16kとなります。
これはもちろん簡略化した説明であり、実際の状況ではメタデータや圧縮などが考慮されていないため、
多少異なる結果となるでしょう。</p></div>
<div class="paragraph">
<p>この動作は、ZVOLの以下のプロパティを確認することで観察できます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">volsize</span></p>
</li>
<li>
<p>
<span class="monospaced">再予約</span>（プールがシンプロビジョニングされていない場合）</p>
</li>
<li>
<p>
<span class="monospaced">used</span>（プールがシンプロビジョニングでスナップショットが存在しない場合）</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zfs get volsize,refreservation,used &amp;lt;pool&amp;gt;/vm-&amp;lt;vmid&amp;gt;-disk-X</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">volsizeは</span>VMに提示されるディスクサイズを示し、
<span class="monospaced">refreservationは</span>プール上の予約済み領域（パリティデータ用に
必要とされる予想スペースを含む）を示します。
プールがシンプロビジョニングされている場合、
<span class="monospaced">refreservationは0</span>に設定されます。
この動作を確認する別の方法として、
VM内の使用済みディスク容量<span class="monospaced">とusedプロパティを</span>
比較する方法があります。
ただし、スナップショットは値を歪める可能性がある点にご注意ください。</p></div>
<div class="paragraph">
<p>増加した使用領域に対処する方法はいくつかございます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">volblocksize</span>を増やすことで、データとパリティの比率を改善できます</p>
</li>
<li>
<p>
<em>RAIDZ</em>の代わりに<em>ミラーv</em>devを使用してください</p>
</li>
<li>
<p>
<span class="monospaced">ashift=9</span>（ブロックサイズ512バイト）を使用する</p>
</li>
</ul></div>
<div class="paragraph">
<p><span class="monospaced">volblocksizeプロパティは</span>ZVOL作成時のみ設定可能です。デフォルト値はストレージ構成で変更できますが、この場合ゲスト側の調整が必要となり、ユースケースによっては書き込み増幅の問題がZFS層からゲスト層へ移行する可能性があります。</p></div>
<div class="paragraph">
<p>プール作成時に<span class="monospaced">ashift=9</span>を使用すると、基盤となるディスクによってはパフォーマンスが低下する可能性があり、後から変更することはできません。</p></div>
<div class="paragraph">
<p>ミラー vdev（RAID1、RAID10）は仮想マシンワークロードに適した挙動を示します。
RAIDZ の性能特性が許容される特定の環境要件や特性がない限り、
これらをご利用ください。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_zfs_draid">3.9.4. ZFS dRAID
<a class="headerlink" href="#_zfs_draid" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFS dRAID（デクラスタ化RAID）では、ホットスペアドライブがRAIDに参加します。
これらのスペア容量は確保され、ドライブ障害発生時の再構築に使用されます。
これにより、構成によっては、ドライブ障害発生時にRAIDZと比較して
より高速な再構築が可能となります。詳細は公式のOpenZFSドキュメント<span class="footnote"><br>[OpenZFS</span>dRAID
<span class="footnote"><a href="https://openzfs.github.io/openzfs-docs/Basic%20Concepts/dRAID%20Howto.html">https://openzfs.github.io/openzfs-docs/Basic%20Concepts/dRAID%20Howto.html</a>]</span>をご参照ください。<span class="footnote"><br></span></p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">dRAIDは、10～15枚以上のディスクを想定した構成です。RAIDZの設定は、多くの使用事例において、より少ない枚数のディスクに適していると考えられます。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">GUIでは、最小構成（例：dRAID1は3台）よりも1台多いディスクが必要です。
スペアディスクも追加されることを前提としています。</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">dRAID1</span>または<span class="monospaced">dRAID</span>: 少なくとも 2 台のディスクが必要です。1 台が故障してもデータは失われません。</p>
</li>
<li>
<p>
<span class="monospaced">dRAID2</span>: 少なくとも3台のディスクが必要です。2台が故障してもデータは失われません</p>
</li>
<li>
<p>
<span class="monospaced">dRAID3</span>: 少なくとも4台のディスクが必要です。3台まで故障してもデータは失われません</p>
</li>
</ul></div>
<div class="paragraph">
<p>追加情報はマニュアルページでご確認いただけます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># man zpoolconcepts</pre>
</div></div>
<div class="sect4">
<h5 id="_spares_and_data">スペアとデータ
<a class="headerlink" href="#_spares_and_data" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">スペアの</span>数は、ディスク障害発生時にシステムが待機状態に保つべきディスクの数を示します。デフォルト値は0<span class="monospaced">スペア</span>です。スペアがない場合、再構築の速度向上は期待できません。</p></div>
<div class="paragraph">
<p><span class="monospaced">data は</span>冗長性グループ内のデバイス数を定義します。デフォルト値は 8 です。<span class="monospaced">ディスク数 - パリティ - スペアの合計</span>が 8 未満の場合を除き、より少ない数値が使用されます。一般的に、<span class="monospaced">データ</span>デバイスの数が少ないほど IOPS 向上、圧縮率の向上、リシルバリングの高速化が期待できますが、データデバイス数を少なく設定するとプールの利用可能ストレージ容量が減少します。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_bootloader_2">3.9.5. ブートローダー
<a class="headerlink" href="#_bootloader_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEでは、ブートローダーの設定管理<a href="#sysboot_proxmox_boot_tool"><span class="monospaced">にproxmox-boot-tool</span></a>を使用します。
詳細は「<a href="#sysboot">Proxmox VEホストのブートローダー</a>」の章をご参照ください。</p></div>
</div>
<div class="sect3">
<h4 id="_zfs_administration">3.9.6. ZFSの管理
<a class="headerlink" href="#_zfs_administration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>本セクションでは、一般的なタスクにおける使用例をいくつかご紹介します。ZFS自体は非常に強力で、多くのオプションを提供しています。ZFSを管理する主なコマンドは<span class="monospaced">zfsとzpoolです</span>。どちらのコマンドにも優れたマニュアルページが付属しており、以下のようにして閲覧できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># man zpool
# man zfs</pre>
</div></div>
<div class="sect4">
<h5 id="sysadmin_zfs_create_new_zpool">新しい zpool を作成する<a class="headerlink" href="#sysadmin_zfs_create_new_zpool" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>新しいプールを作成するには、少なくとも1台のディスクが必要です。<span class="monospaced">ashiftは</span>、基盤となるディスクと同じセクタサイズ（<span class="monospaced">ashiftの</span>2乗）以上である必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &amp;lt;pool&amp;gt; &amp;lt;device&amp;gt;</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="paragraph">
<p>プール名は以下の規則に従う必要があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
文字（a-z または A-Z）で始まること</p>
</li>
<li>
<p>
英数字、<span class="monospaced">-</span>、<span class="monospaced">_</span>、<span class="monospaced">.</span>、<span class="monospaced">:</span>、` `（スペース）のみを含みます</p>
</li>
<li>
<p>
<span class="monospaced">mirror</span>、<span class="monospaced">raidz</span>、<span class="monospaced">draid</span>、<span class="monospaced">spare</span> <strong>で始まってはいけません</strong></p>
</li>
<li>
<p>
<span class="monospaced">log</span>ではあってはなりません</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
<div class="paragraph">
<p>圧縮機能を有効にするには（<a href="#zfs_compression">ZFSの圧縮</a>セクションを参照）：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zfs set compression=lz4 &amp;lt;pool&amp;gt;</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_create_new_zpool_raid0">RAID-0 を使用した新しいプールを作成<a class="headerlink" href="#sysadmin_zfs_create_new_zpool_raid0" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>最低1台のディスク</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &amp;lt;pool&amp;gt; &amp;lt;device1&amp;gt; &amp;lt;device2&amp;gt;</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_create_new_zpool_raid1">RAID-1 を使用した新しいプールを作成<a class="headerlink" href="#sysadmin_zfs_create_new_zpool_raid1" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>最低2台</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &amp;lt;pool&amp;gt; mirror &amp;lt;device1&amp;gt; &amp;lt;device2&amp;gt;</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_create_new_zpool_raid10">RAID-10 を使用した新しいプールを作成します<a class="headerlink" href="#sysadmin_zfs_create_new_zpool_raid10" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>最低4枚のディスク</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &amp;lt;pool&amp;gt; mirror &amp;lt;device1&amp;gt; &amp;lt;device2&amp;gt; mirror &amp;lt;device3&amp;gt; &amp;lt;device4&amp;gt;</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_create_new_zpool_raidz1">RAIDZ-1で新しいプールを作成します<a class="headerlink" href="#sysadmin_zfs_create_new_zpool_raidz1" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>最低3台のディスク</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &amp;lt;pool&amp;gt; raidz1 &amp;lt;device1&amp;gt; &amp;lt;device2&amp;gt; &amp;lt;device3&amp;gt;</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_create_a_new_pool_with_raidz_2">RAIDZ-2 を使用した新しいプールを作成します<a class="headerlink" href="#_create_a_new_pool_with_raidz_2" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>最低4台のディスク</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &amp;lt;pool&amp;gt; raidz2 &amp;lt;device1&amp;gt; &amp;lt;device2&amp;gt; &amp;lt;device3&amp;gt; &amp;lt;device4&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>プールを設定する前に、特にRAID-Zモードを使用したい場合、
<a href="#sysadmin_zfs_raid_considerations">ZFS RAIDレベルの考慮事項に関する</a>セクションをお読みいただき、
IOPSと帯域幅の期待値についておおよその見積もりを得ることをお勧めいたします。</p></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_extend_raidz">RAIDZ-N を拡張します<a class="headerlink" href="#sysadmin_zfs_extend_raidz" title="Permalink to this heading"></a></h5>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">この機能は、Proxmox VE 9 (ZFS 2.3.3) 以降でのみ動作します。</td>
</tr></table>
</div>
<div class="paragraph">
<p>既存の<span class="monospaced">&amp;lt;pool&amp;gt;</span>に RAIDZ-N<span class="monospaced">&amp;lt;raidzN-M&amp;gt;</span>vdev が存在する場合、以下の構文で新しい物理ディスク<span class="monospaced">&amp;lt;device&amp;gt;</span>を追加できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>zpool attach &amp;lt;pool&amp;gt; &amp;lt;raidzN-M&amp;gt; &amp;lt;device&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">poolの</span>一般的な<span class="monospaced">成功確認にはzpool status &amp;lt;pool&amp;gt;</span>を、接続済み全ディスクの詳細出力<span class="monospaced">にはzpool list &amp;lt;pool&amp;gt; -vを実行してください。</span>
poolの新規容量<span class="monospaced">を確認するにはzfs list &amp;lt;pool&amp;gt;</span>を実行します。</p></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_create_new_zpool_with_cache">キャッシュ付きの新規プール作成（L2ARC）
<a class="headerlink" href="#sysadmin_zfs_create_new_zpool_with_cache" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>パフォーマンス向上のため、専用デバイスまたはパーティションをセカンドレベルキャッシュとして使用することが可能です。このようなキャッシュデバイスは、主に静的なデータのランダム読み取りワークロードにおいて特に効果的です。実際のストレージとメモリ内のARC（アロケーションキャッシュ）の間に追加のキャッシュ層として機能するため、メモリ制約によりARCを縮小する必要がある場合にも役立ちます。</p></div>
<div class="listingblock">
<div class="title">ディスク上キャッシュ付きZFSプールを作成する</div>
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &amp;lt;pool&amp;gt; &amp;lt;device&amp;gt; cache &amp;lt;cache-device&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>ここでは単一の<span class="monospaced">&amp;lt;device&amp;gt;</span>と単一の<span class="monospaced">&amp;lt;cache-device&amp;gt;</span>のみを使用しましたが、
<a href="#sysadmin_zfs_create_new_zpool_raid0">RAID を使用した新規プール作成で</a>示されているように、
複数のデバイスを使用することも可能です。</p></div>
<div class="paragraph">
<p>なお、キャッシュデバイスにはミラーやRAIDモードは存在せず、
すべて単純に蓄積されます。</p></div>
<div class="paragraph">
<p>いずれかのキャッシュデバイスで読み取りエラーが発生した場合、ZFSはその要求を
下位ストレージ層へ透過的に転送します。</p></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_create_new_zpool_with_log">ログ付きの新規プールを作成します（ZIL）<a class="headerlink" href="#sysadmin_zfs_create_new_zpool_with_log" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ZFS Intent Log（ZIL）用に専用のドライブまたはパーティションを使用することが可能です。
主に安全な同期トランザクションを提供するために使用され、<span class="monospaced">データベースやfsync操作</span>をより頻繁に発行するその他のプログラムなど、
パフォーマンスが重要なパスでよく使用されます。</p></div>
<div class="paragraph">
<p>プールはデフォルトのZIL配置先として使用されますが、ZILのI/O負荷を別のデバイスに振り分けることで、トランザクションの遅延を低減すると同時にメインプールを軽減し、全体的なパフォーマンス向上に寄与することが可能です。</p></div>
<div class="paragraph">
<p>ディスクをログデバイスとして直接、またはパーティション経由で使用する場合、以下の手順をお勧めいたします：</p></div>
<div class="ulist"><ul>
<li>
<p>
電源喪失保護機能付きの高速SSDをご使用ください。これらはコミット遅延が大幅に小さくなります。</p>
</li>
<li>
<p>
パーティション（またはデバイス全体）には少なくとも数GBを使用してください。ただし、
  搭載メモリの半分以上を使用しても、実質的な利点は得られません。</p>
</li>
</ul></div>
<div class="listingblock">
<div class="title">別個のログデバイスを用いたZFSプールの作成</div>
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &amp;lt;pool&amp;gt; &amp;lt;device&amp;gt; log &amp;lt;log-device&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>上記の例では単一の<span class="monospaced">&amp;lt;device&amp;gt;</span>と単一の<span class="monospaced">&amp;lt;log-device&amp;gt;</span>を使用していますが、
<a href="#sysadmin_zfs_create_new_zpool_raid0">「RAIDを使用した新規プール作成</a>」セクションで説明されているように、
他のRAID構成と組み合わせることも可能です。</p></div>
<div class="paragraph">
<p>ログデバイスを複数のデバイスにミラーリングすることも可能です。これは主に、単一のログデバイスが故障した場合でも、パフォーマンスが直ちに低下しないことを保証するために有用です。</p></div>
<div class="paragraph">
<p>すべてのログデバイスが故障した場合、ログデバイスが交換されるまで、
ZFSメインプール自体が再び使用されます。</p></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_add_cache_and_log_dev">既存のプールにキャッシュとログを追加<a class="headerlink" href="#sysadmin_zfs_add_cache_and_log_dev" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>キャッシュとログを持たないプールであっても、いずれか一方または両方をいつでも追加することが可能です。</p></div>
<div class="paragraph">
<p>例えば、電源喪失保護機能を備えた優れたエンタープライズ向けSSDをお持ちで、
これをプールの全体的なパフォーマンス向上に活用したい場合を考えてみましょう。</p></div>
<div class="paragraph">
<p>ログデバイスの最大サイズは、インストールされた物理メモリの約半分であるべきです。
これは、ZIL（ゼロ書き込みキャッシュ）がSSDの比較的小さな部分しか使用しない可能性が高いことを意味し、
残りのスペースはキャッシュとして使用できます。</p></div>
<div class="paragraph">
<p>まず、<span class="monospaced">parted</span>または<span class="monospaced">gdisk</span> を使用して、SSD 上に 2 つの GPT パーティションを作成する必要があります。</p></div>
<div class="paragraph">
<p>その後、これらをプールに追加する準備が整います：</p></div>
<div class="listingblock">
<div class="title">既存のプールに、独立したログデバイスとセカンドレベルキャッシュの両方を追加します</div>
<div class="content monospaced">
<pre># zpool add -f &amp;lt;pool&amp;gt; log &amp;lt;device-part1&amp;gt; cache &amp;lt;device-part2&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">&amp;lt;pool&amp;gt;</span>、<span class="monospaced">&amp;lt;device-part1&amp;gt;</span>、<span class="monospaced">&amp;lt;device-part2&amp;gt;</span>を、プール名およびパーティションへの<span class="monospaced">/dev/disk/by-id/</span>パスに置き換えてください。</p></div>
<div class="paragraph">
<p>ZIL とキャッシュを個別に追加することも可能です。</p></div>
<div class="listingblock">
<div class="title">既存の ZFS プールにログデバイスを追加する場合</div>
<div class="content monospaced">
<pre># zpool add &amp;lt;pool&amp;gt; log &amp;lt;log-device&amp;gt;</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="sysadmin_zfs_change_failed_dev">故障したデバイスの変更
<a class="headerlink" href="#sysadmin_zfs_change_failed_dev" title="Permalink to this heading"></a></h5>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool replace -f &amp;lt;pool&amp;gt; &amp;lt;old-device&amp;gt; &amp;lt;new-device&amp;gt;</pre>
</div></div>
<div class="paragraph">
<div class="title">起動デバイスが故障した場合の変更</div><p>Proxmox VE のインストール方法により、システムブート<span class="monospaced">には systemd-boot</span>または GRUB が使用されます。
<span class="monospaced">Proxmox-boot-tool</span>経由の場合<span class="footnote">（<br>[Proxmox VE 6.4 以降でインストールされたシステム、
Proxmox VE 5.4 以降でインストールされた EFI システム]）</span>、<span class="footnote"><br> または単純な GRUB がブートローダーとして使用されます（</span><a href="#sysboot">ホストブートローダーを参照</a>）。
以下のコマンドを実行して確認できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool の状態を確認します</pre>
</div></div>
<div class="paragraph">
<p>パーティションテーブルのコピー、GUIDの再発行、ZFSパーティションの置換といった初期手順は共通です。
新しいディスクからシステムを起動可能にするためには、使用中のブートローダーに応じて異なる手順が必要となります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># sgdisk &amp;lt;正常な起動可能デバイス&amp;gt; -R &amp;lt;新しいデバイス&amp;gt;
# sgdisk -G &amp;lt;新しいデバイス&amp;gt;
# zpool replace -f &amp;lt;プール&amp;gt; &amp;lt;古いZFSパーティション&amp;gt; &amp;lt;新しいZFSパーティション&amp;gt;</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">新しいディスクのレズィーバリング処理の進捗状況を確認するには、<span class="monospaced">zpool status -v</span>コマンドをご利用ください。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title"><span class="monospaced">proxmox-boot-tool</span> を使用する場合：</div>
<div class="content monospaced">
<pre># proxmox-boot-tool format &amp;lt;新しいディスクのESP&amp;gt;
# proxmox-boot-tool init &amp;lt;新しいディスクのESP&amp;gt; [grub]</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">ESP</span>（EFIシステムパーティション）は、Proxmox VEインストーラーバージョン5.4以降において、起動ディスク上のパーティション#2として設定されます。詳細は「<a href="#sysboot_proxmox_boot_setup">同期化ESPとして使用する新規パーティションの設定」をご参照ください</a>。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">現在のディスクがGRUBを使用していることを
<span class="monospaced">proxmox-boot-tool statusで確認した場合</span>、特にセキュアブートが有効な場合は、
<span class="monospaced">必ずproxmox-boot-tool initにモードとして</span> <em>grub</em>を指定してください。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">通常の GRUB の場合:</div>
<div class="content monospaced">
<pre># grub-install &amp;lt;新しいディスク&amp;gt;</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">プレーンGRUBは、Proxmox VE 6.3以前でインストールされ、
かつまだ手動<span class="monospaced">でproxmox-boot-toolへの</span>移行が行われていないシステムでのみ使用されます。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configure_e_mail_notification">3.9.7. 電子メール通知の設定
<a class="headerlink" href="#_configure_e_mail_notification" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFSにはイベントデーモン<span class="monospaced">ZED</span>が付属しており、ZFSカーネルモジュールによって生成されるイベントを監視します。このデーモンは、プールエラーなどのZFSイベントについてメールを送信することも可能です。
新しいZFSパッケージでは、このデーモンは別個の<span class="monospaced">zfs-zedパッケージ</span>として提供されており、Proxmox VEではデフォルトで既にインストールされているはずです。</p></div>
<div class="paragraph">
<p>お好みのエディタで<span class="monospaced">/etc/zfs/zed.d/zed.rc</span>ファイルを介してデーモンを設定できます。メール通知に必要な設定は<span class="monospaced">ZED_EMAIL_ADDR</span> で、デフォルトでは<span class="monospaced">root</span>に設定されています。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ZED_EMAIL_ADDR="root"</pre>
</div></div>
<div class="paragraph">
<p>なお、Proxmox VE では<span class="monospaced">root</span>宛てのメールは root ユーザーに設定されたメールアドレスに転送されますのでご注意ください。</p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_zfs_limit_memory_usage">3.9.8. ZFSのメモリ使用量の制限
<a class="headerlink" href="#sysadmin_zfs_limit_memory_usage" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFS はデフォルトでホストメモリの<em>50%</em><strong>を適応型置換キャッシュ</strong>(ARC) に使用します。Proxmox VE 8.1 以降の新しいインストールでは、ARC 使用上限はインストール済み物理メモリの<em>10%</em>に設定され、最大<span class="monospaced">16 GiB</span> に制限されます。この値は<span class="monospaced">/etc/modprobe.d/zfs.conf</span> に記述されます。</p></div>
<div class="paragraph">
<p>IOパフォーマンスのためには、ARCに十分なメモリを割り当てることが極めて重要です。
そのため、その値を減らす際には十分ご注意ください。
一般的な目安として、<span class="monospaced">少なくとも2 GiBのベースメモリ＋ストレージ容量（TiB単位）あたり1 GiBを</span>割り当ててください。
例えば、利用可能なストレージ容量<span class="monospaced">が8 TiBの</span>プールをお持ちの場合、
ARC用に<span class="monospaced">10 GiBの</span>メモリを使用すべきです。</p></div>
<div class="paragraph">
<p>ZFSは最低<span class="monospaced">64MiBの</span>値も強制します。</p></div>
<div class="paragraph">
<p>現在のブート時におけるARC使用量の上限（再起動するとこの変更はリセットされます）は、<span class="monospaced">zfs_arc_maxモジュール</span>パラメータに直接書き込むことで変更できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>echo "$[10 * 1024*1024*1024]" &amp;gt;/sys/module/zfs/parameters/zfs_arc_max</pre>
</div></div>
<div class="paragraph">
<p>ARC制限を<strong>恒久的に変更するには</strong>、<span class="monospaced">/etc/modprobe.d/zfs.confに</span>以下の行を追加（または既存の場合は変更）してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>options zfs zfs_arc_max=8589934592</pre>
</div></div>
<div class="paragraph">
<p>この設定例では、使用量を 8 GiB（<em>8 ×<sup>230</sup></em>）に制限します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">ご希望の<span class="monospaced">zfs_arc_max</span>値が<span class="monospaced">zfs_arc_min</span>（デフォルトはシステムメモリの 1/32）以下である場合、<span class="monospaced">zfs_arc_min</span>を最大で<span class="monospaced">zfs_arc_max - 1</span> まで設定しない限り、<span class="monospaced">zfs_arc_max</span>は無視されます。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content monospaced">
<pre>echo "$[8 * 1024*1024*1024 - 1]" &amp;gt;/sys/module/zfs/parameters/zfs_arc_min
echo "$[8 * 1024*1024*1024]" &amp;gt;/sys/module/zfs/parameters/zfs_arc_max</pre>
</div></div>
<div class="paragraph">
<p>この設定例では、総メモリが256 GiBを超えるシステムにおいて、<span class="monospaced">zfs_arc_maxのみ</span>の設定では機能しない場合、使用量を（一時的に）8 GiB（<em>8 *<sup>230</sup></em>）に制限します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAALa0lEQVRogdWZa2wc1RXHfzM7O/te
P9e1vXHSmEdjx3YeDkkaF6REKRRCEDSEFNkRjdSWSsgC2iqoRWqLQKiqIBg1NOQDiMeHtkQIQkRR
S9S4aWwgCQoUgl232KkT28J21l6vd3d2dx79sDuTXdtre03Uqlc62tl53Pv/n3PuOffcKxiGwf9z
E//XAL5sk65WR0a6AaDrOjMtKwgCoigiCAKCIAhXa9wvTcAEHhoc5KMjR7jw3nucf+MN67k/GCS4
YQOr77yTpl27kGUZm81mXC0ywlLnQDbwEwcO0P2b3yz4jV5RwZq2Nm5/5BH8fj+SJGGz2b4UiSUR
MAzD0DSNEwcO8MdHHln8d0AcsAUCfOe551h7yy04HA7sdvuSrVEwAV3XjdDgIC/v2cOl06dznqWA
JCAAMvn9MwlEgF1PP8037rsPt9uN3W5fkjUKIqDrujF+4QLP3XQTU0NDOc8UIAa4y8sJtrQQqK/H
7XQSfv99Pn/nHQRRxNB16/0EEAUatm9n76uv4vP5cDgcBZNYNIF84I0MEK20lIZvf5sNe/dSWlqK
1+vFxBEZHubT3/+evqNHmR4dJRWP55BevW0bra+8gt/vx+l0IknSokksikA+8ElgClixYwc3799P
ZWUlTqczbz+x0VFOPvEEQ6dPE/niCwxdt0jUbd1K68svU1xcXBCJBQnMBz5eWkrL/v2s++Y3KSsr
QxQXlxc7f/5zBjo7CQ8NoadSKKQn943t7dyyf79FYjHuNC8BwzAMVVV56Z57+OzNN3PAJ8vK+FZH
B2s2b55X6/nahRMnOP7TnxLOKEXJyO2/+hVf37uXoqIinE6nmfzyksirMjNUvvGjH+WAVwG1vJxb
Dhxg1bp1uFwuMwQWJCu3bWPN3r24SkoAcGbA/OXXv2bws8+IRqOkUqlZGX1RBAzDMHRd51+nTvHe
wYNX7gPTQMO+faxav56SkpIlgTdlU3s7TXv2IGUs6AGioRDH2tuZmJggFouhqirGPCzyEUBVVX7X
1pZzPwI0fP/7bNmzh7KysrzADh8+zP3338++ffs4ePBg3vdEUWTDD3/IsuZmRLsdW4bEpd5eOp99
lnA4jKIoaJqWl8QsAqb2Txw4kDNp40BxXR0bWlspLy/PC+qZZ55hdHQUSZIYHByko6ODxx57bBZw
cy3kq6xk6y9/ib+qCgQBmbQ7nT50iIs9PUSjUZLJJIZhzEliLgKMDQzwp5/9zLqnkQ51W3/xCwKB
AE6nMy+B3t5exsfH6ezspLe3l3g8zuHDh2cBz5bKpibWtrXhLi0FwA3owNsPP8zExATxeBxVVecy
QC4Bc+L+taNjluvU33031dddN6/2BUGgpKSE/v5+JicncweaA3i2tDz8MIHrr0eU0gsQBzDW10ff
yZNEIhESicScrpRDQNd1xgYG+OC3v7XuJQBXIMDWn/yEioqKeUGMjY0hCAKKoszS1MjIyLzfAmx/
4gmKli0DQcBJOmicfOopJicnicfjJoG5LWBq/+Szz+a8oABNe/bgdrvndR1BEKiqqiIejxOLxWYR
CAaDC0alqjVrqGxowFNWhkDalUKff07f3/5mWSFTLFksLAK6rjN+4UKO9lXAUV7O2tbWeaNOthZl
WZ4FHlh0aN3y4IPIHk+6L8AGvNfRQTgctuZCthVEU/u6rnPutddyBk0A9bt3W4us+QY2fbyurg6v
15vTzw033LBoAsHmZoLNzdgcDgBcQKi/n391dTE9PU0ymcyxgkmAVCrF+4cO5WjfFgiwfoGwOTOy
lJWVUVtba1mkUAKCILClvR1veTkA9owVPnzllZy8YFnA1H5/dzfTw8PWgziwcutWfD4fsiwvCNyU
xsZG3G43lZWVVl933XVXQQSq161j+ebNlhXcwBdnzxIOh60lhmkFEUDTNP7++uvWgBrp6mrNHBk3
H/BsAtFoFEdm8GAwyMaNGwsiIAgCjbt346uosKwgAp8cPWolNj1THInmsqHn6FGLQApY1thIxcqV
+Hy+WX6+0ETesWMHLpcLWZZ54IEHCgYvCAKrbrsNyem0JrQEXMzkhKzlBaKu61z+97+ZHhnJmbwr
tm2zJu5CWp8pra2tNDU1sXPnTtrb25dEQBAEvrplC57MXJCB8XPniEQixONxa6Uq6brOQHd3jvvo
QP2ttxZUpMxsL7zwwpK+AyxLXrt9Oxe6uxFEEXvGZc4fO0bVD35AMplM1wuapjGYtbugAp5AgKLq
aquu/W/JTEs37dqFqihWzSADk8PD1jzQNC3tQtmrThUINDbm+H4h0tfXx6OPPsodd9xBW1sbPT09
BQPPluu2b7fWRxIQ6usjFotZBCRN06wZbbZAfT1FRUWWKQtpzz//PMPDw/T09DA1NcXo6CjHjx+f
11Xma95AwHJjEdB0HUVRrhCYuRGrAiXBoFUqFtq6u7sZHx9nJBMUurq65uxnsX0Hm5v56A9/ANIJ
LXrpEolEwgqlUqZQyPlo6OOPlzx5ly1bxnBWQmxpackBW6hSBEC02axrpqasNZGmaek8kN0kYPDj
j1FVdUlz4Mknn6Surs4Cb5aUhYZiUy59+GGOgm3V1WiadiUPCILAV9autV5wAaM9PXQeOWJprBBp
aGjgxIkTpFIpOjs7aWxsXBJwUwZOnUKZmgLS2zl4vUjSlV1XURRFqtavv3IDKAVe/O53efPxx69a
SCxUBs+c4dV77+Vyfz+xy5eBdG3iX7ECm81m9S2JokiwuZmiujrCPT1AuqgOAqcef5zzL77Imt27
uemhhyipqVnYZ5cw8bPbR0eOcOall7g8MEB4aIhEJAJk9qOAwKZNyLJsHpQgRKNRIxQK0XPmDH/+
3vdQQ6G8na/YtIk199zDypYWVmzceFWAT1y8yMWzZzn/9tv0vfsudqeTlKIQHRvL2QSOAqU7d/K1
W2/l2muvpba2Nl3iJhIJIxKJMDw8TO/Zs3zw4x+jTUzkHVCw2fCUleHw+QiuXYu/upqqhgb8VVUY
hkFNczPFweCs7z556y3r+vyxYwiiyD+PHwdBwNB1krEYhqYRC4UwdB2D9LJmmnRtXHz77VTfeCPL
ly+ntraWmpqa9MaaqqqGoiiEQiGGhoYYHBzk00OHiHR2LkqDNlnG7nJhd7nQswqN+ZogiuipFMlY
DDWRgBl5KEF6woqAUFFByc03U756NZWVlSxfvpyamhoCgQAejwdB13VDVVVisRihUIiRkRGGh4cZ
+sc/GO3qIt7VhZGJAle7mVpWuVKDCBng8jXX4N68Gc8111BUVER5eTnV1dVUV1cTCASuFFqGYaDr
upFKpYjH40xMTDA+Ps7Y2Bjj4+OEw2EmenqYPneO1OAgZCWpxTY9S9QMcLhyHGUDRI8HqbISZ309
zoYGnE4nHo8Hv99PaWkpgUCAiooK6/DE4XCkI1HW2a6hqiqKojA9Pc3k5KQl4XCY6elpotFoetuk
v59UKIR66RLToRBJTcMYHUWIRvMSMPO6rbY2/SsIOFatQpYk5NWrkSQJWZZxOBy43W68Xi9+v5+i
oiJKSkooLi7G5/PhdruRZdnads85HzD3hpLJJIqiEIvFiEajRCIRIpEI0WiUWCxGPB631iOKopBK
pazUbi4Oc7Y+snKCzWbDZrMhSRKSJGG3262w6HK5cLlceDwevF4vPp8Pr9eL2+3G5XLhcDjMkxuE
TNibdcBhnv9qmkYqlSKZTJJIJFAUhXg8jqIoKIpCIpGwSCSTSVRVtWSuk3qTiAnebrfngHc4HDid
TpxOJy6Xy7qWZdk6wZzrxCbvCY1JRNd1NE3LAWgSM69ngp+PgCiK1gF3NhFTzHvmO+Y3wCzw8xLI
JpL5tYCZpEyw2f/nWt1ag2UtM0x3Mq1iAp1j+bH0M7KFCGWDnfmbd8AMnuxfUzL/C0rp/wFnFd4n
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">
<div class="paragraph">
<p>ルートファイルシステムがZFSの場合、この値を変更するたびにinitramfsを更新する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># update-initramfs -u -k all</pre>
</div></div>
<div class="paragraph">
<p>これらの変更を有効にするには、<strong>再起動が必要です</strong>。</p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="zfs_swap">3.9.9. ZFS 上での SWAP 設定
<a class="headerlink" href="#zfs_swap" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>zvol上に作成されたスワップ領域は、サーバーの停止や高いIO負荷の発生など、
問題を引き起こす可能性があります。これは外部ストレージへのバックアップ開始時に
よく見られる現象です。</p></div>
<div class="paragraph">
<p>通常、メモリ不足の状況に陥らないよう、十分なメモリの使用を強くお勧めいたします。スワップの追加が必要な場合やご希望の場合は、物理ディスク上にパーティションを作成し、それをスワップデバイスとして使用することを推奨いたします。この目的のために、インストーラーの詳細オプションで空き領域を確保しておくことが可能です。さらに、「swappiness」の値を下げることができます。サーバーに適した値は10です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># sysctl -w vm.swappiness=10</pre>
</div></div>
<div class="paragraph">
<p>スワップ優先度を永続化するには、お好みのエディタで<span class="monospaced">/etc/sysctl.conf</span>を開き、以下の行を追加してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>vm.swappiness = 10</pre>
</div></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表1. Linuxカーネルの<span class="monospaced">スワップ性</span>パラメータ値</caption>
<col style="width:33%;" />
<col style="width:66%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">値   </th>
<th class="tableblock halign-left valign-top">戦略</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">vm.swappiness = 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">カーネルは<em>メモリ不足</em>状態を回避するためだけにスワップを行います</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">vm.swappiness = 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">完全に無効化しない最小限のスワップ量です。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">vm.swappiness = 10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">システムに十分なメモリが存在する場合、
パフォーマンス向上のためにこの値が推奨されることがあります。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">vm.swappiness = 60</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">デフォルト値となります。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">vm.swappiness = 100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">カーネルは積極的にスワップを行います。</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="zfs_encryption">3.9.10. 暗号化されたZFSデータセット
<a class="headerlink" href="#zfs_encryption" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">Proxmox VEにおけるネイティブZFS暗号化は実験段階です。既知の制限事項および問題点として、暗号化データセットを用いたレプリケーション<span class="footnote"><br>[<a href="https://bugzilla.proxmox.com/show_bug.cgi?id=2350">https://bugzilla.proxmox.com/show_bug.cgi?id=2350</a>]<br></span> 、
ならびにスナップショットまたはZVOL使用時のチェックサムエラーが挙げられます。
<span class="footnote"><br>[<a href="https://github.com/openzfs/zfs/issues/11688">https://github.com/openzfs/zfs/issues/11688</a>]<br></span></td>
</tr></table>
</div>
<div class="paragraph">
<p>ZFS on Linux バージョン 0.8.0 では、データセットのネイティブ暗号化機能が導入されました。
以前の ZFS on Linux バージョンからのアップグレード後、暗号化機能はプール単位で有効化できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zpool get feature@encryption tank
NAME  PROPERTY            VALUE            SOURCE
tank  feature@encryption  disabled         local

# zpool set feature@encryption=enabled

# zpool get feature@encryption tank
NAME  PROPERTY            VALUE            SOURCE
tank  feature@encryption  enabled         local</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">現在、GRUBを使用した暗号化データセットを含むプールからの起動はサポートされておらず、起動時の暗号化データセットの自動ロック解除も限定的なサポートのみとなっております。暗号化機能をサポートしていない旧バージョンのZFSでは、保存されたデータの復号化はできません。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">起動後に手動でストレージデータセットのロックを解除するか、
起動時に必要な鍵情報を<span class="monospaced">zfs load-key</span> に渡すカスタムユニットを作成することを
お勧めいたします。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">本番データの暗号化を有効化する前に、バックアップ手順を確立しテストしてください。関連する鍵素材/パスフレーズ/キーファイルを紛失した場合、暗号化されたデータへのアクセスは不可能となります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>暗号化はデータセット/zvol作成時に設定が必要であり、
デフォルトで子データセットに継承されます。
例えば、暗号化データセット<span class="monospaced">tank/encrypted_data</span>を作成し、
Proxmox VE でストレージとして設定するには、
以下のコマンドを実行してください:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zfs create -o encryption=on -o keyformat=passphrase tank/encrypted_data
Enter passphrase:
Re-enter passphrase:

# pvesm add zfspool encrypted_zfs -pool tank/encrypted_data</pre>
</div></div>
<div class="paragraph">
<p>このストレージ上に作成されるすべてのゲストボリューム/ディスクは、
親データセットの共有鍵素材を用いて暗号化されます。</p></div>
<div class="paragraph">
<p>実際にストレージを利用するには、関連する鍵素材を読み込み、データセットをマウントする必要があります。以下のコマンドで一括処理が可能です:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zfs mount -l tank/encrypted_data
'tank/encrypted_data' のパスフレーズを入力してください:</pre>
</div></div>
<div class="paragraph">
<p>また、作成時または既存データセットに対して<span class="monospaced">zfs change-key</span>を実行する際、
<span class="monospaced">keylocation</span>および<span class="monospaced">keyformat</span>プロパティを設定することで、
パスフレーズの入力を促す代わりに（ランダムな）キーファイルを使用することも可能です:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dd if=/dev/urandom of=/path/to/keyfile bs=32 count=1

# zfs change-key -o keyformat=raw -o keylocation=file:///path/to/keyfile tank/encrypted_data</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">キーファイルを使用する場合、不正アクセスや偶発的な紛失からキーファイルを保護するために特別な注意が必要です。キーファイルがなければ、平文データにアクセスすることはできません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>暗号化データセットの下に作成されたゲストボリュームは、
<span class="monospaced">暗号化ルート</span>プロパティが適切に設定されます。暗号化ルートごとに
キー素材は一度読み込むだけで、その下にある全ての暗号化データセットで
利用可能となります。</p></div>
<div class="paragraph">
<p>詳細および高度な使用方法については、<span class="monospaced">encryptionroot</span>、<span class="monospaced">encryption</span>、<span class="monospaced">keylocation</span>、<span class="monospaced">keyformat</span>、<span class="monospaced">keystatusプロパティ</span>、<span class="monospaced">zfs load-key</span>、<span class="monospaced">zfs unload-key</span>、<span class="monospaced">zfs change-keyコマンド</span>、<span class="monospaced">ならびにman zfsの</span> <span class="monospaced">「暗号化」</span>セクションをご参照ください。</p></div>
</div>
<div class="sect3">
<h4 id="zfs_compression">3.9.11. ZFSにおける圧縮
<a class="headerlink" href="#zfs_compression" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>データセットで圧縮が有効化されている場合、ZFSは<strong>新規</strong>ブロックを書き込み前に圧縮し、読み取り時には復元します。既存データは遡及的に圧縮されません。</p></div>
<div class="paragraph">
<p>圧縮を有効にするには以下を実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zfs set compression=&amp;lt;algorithm&amp;gt; &amp;lt;dataset&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>CPU負荷が非常に少ないため、<span class="monospaced">lz4アルゴリズムの</span>使用をお勧めいたします。
<span class="monospaced">lzjbやgzip-N</span>（<span class="monospaced">Nは1</span>（最速）<span class="monospaced">から9</span>（最高圧縮率）までの整数）といった
他のアルゴリズムも利用可能です。アルゴリズムやデータの圧縮率によっては、
圧縮を有効にすることでI/Oパフォーマンスが向上する場合もございます。</p></div>
<div class="paragraph">
<p>圧縮は無効化することも可能です。以下のコマンドで設定できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># zfs set compression=off &amp;lt;データセット名&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>繰り返しになりますが、この変更は新規ブロックのみに影響します。</p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_zfs_special_device">3.9.12. ZFS 特殊デバイス
<a class="headerlink" href="#sysadmin_zfs_special_device" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バージョン0.8.0以降、ZFS<span class="monospaced">は特殊デバイスを</span>サポートしております。プール内の<span class="monospaced">特殊デバイスは</span>、メタデータ、重複排除テーブル、およびオプションで小ファイルブロックの保存に使用されます。</p></div>
<div class="paragraph">
<p><span class="monospaced">特殊</span>デバイスは、メタデータの変更が頻繁に行われる低速回転ハードディスクで構成されるプールの速度を向上させることが可能です。例えば、多数のファイルの作成、更新、削除を伴うワークロードでは、<span class="monospaced">特殊</span>デバイスの存在が効果を発揮します。ZFSデータセットは、小さなファイル全体を<span class="monospaced">特殊</span>デバイスに保存するよう設定することもでき、これによりパフォーマンスがさらに向上します。<span class="monospaced">特殊</span>デバイスには高速なSSDをご利用ください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">特殊デバイスの</span>冗長性は、プール全体の障害点となる<span class="monospaced">ため</span>、プールの冗長性と一致させる必要があります。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMVUlEQVRogdWZeXDVVZbHP7/f27JB
wtJIiCERRFlbx5FuHRrRBgtBsRIwCCOrFmGmiDBjYVNlQlgiQjU6IjI4xLJxGf5QGp0Cbaftsu3R
hu6aYXqgLZoWEsjyyDP7S972e7/l3vnj5cW3Ji9M/zOn6lRS997fvd/vueece+59ipSS/89iv5mP
ZEQQQsS23RQARVEAUFUVRVFQog0ZyogJSClld3c327Ztw7IsLMuKto90KgBsNhtVVVXMnj2bvLw8
7Ha7HBEJKWXGKoSQXV1dcsuWLfLSpUsyKkKIIdWyrLTqdrvlU089Jc+cOSM9Ho8Mh8NSCCEzxTRi
8JWVlbKtre0vAt6yLGmapmxtbZXr1q2TZ86ckW1tbSMikTH4GzduyKqqqkHwsSA1TZOhUChOg8Hg
oBqGIQ3DSAk+VleuXDliEspwviullD09PbzwwgscO3Yszt91XScQCNDZ2YlhGIPfuFwu7Pb48FJV
lZycnEG/z8/PRwiBqqqDYzweD88//zyrV69m7ty5jBs3DofDMWRgD0lASik9Hg979uzh2LFjcYEa
CoVob2/n2q9+hbZ585BGSCWltbVMr61NtSYbN25k7dq1zJkzZ1gSaqrGWPD79+9PAh8MBuns7OTi
e+8R2rwZCYOaqTTt3cuf6+qSwAMcP36co0eP8vXXX9Pd3Y1hGMg0lk65A1HwdXV1vPHGG0mW7+jo
4A8/+xn2BAAAI0riQOnu3cyork7Zt3btWtavX89dd92VdieSCEgppdvt5sCBAxw5ciSuLxQK0dTU
RMOHHyJ37hwh1NSiAKU7djDzxRdT9q9YsYJt27YxY8aMlCTiCEgp5eXLl6mvr+fVV1+NmygYDNLW
1sY3J09ipLEYQDPw2sBfCTwMLARKgKwhiNxWU8OsXbvi2qLYnnzySSorK1PvRGyqvH79uty6dWtS
Lg8EAvLKlSvyo1275M8hSV8H+eMBvRPkP9Vslp0tV6W3u12+c7hOTgT5NyAXgtwE8gTIUyn0D9XV
0jAMqet6klZUVMjPP/88KcWqUcs3NjZy+PBhDh06FGeFqNtcOnECY8+euICVwDWgFtj/m1/wD+8f
5xtg6uy5ZI+5BSkkU6fexgu7tvLWhd/x1tXL5P/905wAggnzSODavn388Sc/SblDL7/8Mq+99hqX
L1+OC2zb7t27uX79+u7Dhw+ndJvW1lYaP/qI0EDKS1z0XeDjC7/l9llz+d6EWxjv0imdcgeFRcVo
fR46vm1Cx8ndP5hP3qjR/GDuX/GbC5/iberl1qirxGjv73+PYRjc8tBDcVhGjRpFRUUF27dvp7i4
mPz8fFwuV2QHVq1aldLyDQ0NXDt5En91NRIQCRqNHld2HsLUCfu6GD9mNIoVQggDy9RQpYLTbkdV
7Vh6CH9vJ/fcfz/vALsAN2AlzHv1wAEu1tTExUI0Hl555RXq6upobm4mEAhECEyePDkOvK7rtLS0
cOP0aby1tUnAo2oNkFAUSTjoRfN+ix7wgjRBShACVVFQRGSkHvTypwtnmXHPQhrbb3D0k1McAdpi
DBLVhp/+lIvV1UlV7oQJE8jNzcXtduPz+ZIPMtM0aWhooPH99+mtrU1ymVRqUxUQFlJYSBFGCivG
OSyEaSCFAGlhd+Vy7w/n43BmM3POXWx69hl8AyMTDXTl4EEu7t2bCBGAQCCAruupCdjtdrp3705r
+ViN22YhsUwdyzRBCpACyzIRMnpngCxXNjYlMk4L+ggoYXxp5pbAlX37cDgcSQSEEAxmoVgQg/9n
AP67bVdAUcFmQ3W6IgtIiWUKLCGwLGvQj69e+m+EsBB6iGB/N/3e9oyNlIgRYm5kiR2JH0L6MkFY
Ei0UQKAycdJUbIodT3Mjpu6n3xfCptoRlomQCqZpRkhLCykMhLBQSV1HJbalKnvSF3MpNO0OSIEw
DWyuPCaVzCRv7ER8Ph+mtJM35lZsdjvuxktYhobDkYOCgqJEDWLLaAfSVc1p78SJO2AAvUBggLUN
KIx2Kgqjv3crY2wOiqaqKKoKihKJCctCC/npbW+jq7sbS7UjkGCZCCkQQkdJsV6mRWHGBH4HLHpx
F3LcGDq6u7nw2S85++V/4gb0kB9hFoAZwuZwgc2BqjpQVRWbzYXd4cDlysHn7WJi0W2EfH24XA6E
jKySqhTPtDRPIjB4XUtoPw3sKV/O+KJipJT4V63mq3/7Obu21/LN/5xl9l/PIys7G2fOaBS7E5vN
QrU7UW0KNlUFp5P8MeO5/8HFhPo7CXr7MMIaQW8neSkMlqnEEYj1s8QJbwXaWpopmDgJh93OqHGF
LFy9jjunTeHNo2uAvUy54/uMuaUYV24BUpVYpoVEwaY4UVUbitNJ9ugxOBw2tEAPfX29QCjuVB9O
EmNBTdeRGEj3A56OdkwtgDDCCKFjz8ql6N55/G3VcRouX+SXH72Ht6udcCg4cJiJSPIn8oCloIKU
KAhURUUIiVCjx128pjtrEiVtFkrMNNOBA+s34XG3YIRDSMtAkSbOrDzuvOchHnmiklEFY3n76G7O
f/nv9Ht7EMJCSjGoljCxjOBAnaSjhYPowevDZrx04FMSGLwnJEzmAOYCn33wAUYoiGXoSMsEoeNw
ZTO2aDrzFpWxck0VJVOn4fd2E/T7oneNyOFlGkjLwNTD6FoILRQEa/hDcyhJIuB0OlFVNeVE04B3
XjnC+d9+hRYKYJlhpDBBGDidDiaUfp/xk24nJ3c0eaPzsKsgzEhtZJkGIuzDNDRCAR99fb309XYh
NAYPsnQ6IgJSSgoKCihavDilJZ4Aajf8HVf/fAnLCCNNAyktECaqIsgbV8So0WMHrn2RGLBMHREO
YBg6eiiIFgzQ7/US8vmYoEDuENa/u6oqcwJRPysoKOC+N9+kcNGiJGvkAQuADY+twn3tCuFg/4CV
DbB0VKHhzHbhdGVhs6kgDKTuR9f86KEAWtBHd0c73p52pB5Av5KewJxnnmHeoUOEw+EkjHEEYi8M
EHlFKyws5IfHjlG4cGHSxJOA1cATPy7nT388j+73YoYDCEuP1DhSRrKOlFhmmLAWQNMCBHw9tHtu
8K2nBcsI8uGxf8HoiRBINNTtjz7KQ/X1xL6iRDHGvubZAfr7+1Nuz+TJk6G+nv/atInmX/86rq8A
WAlUrahk/Fio/8XHjM4fi93pHCgRFCzLQtd1tFAQLeCjs9NNb4cHxdL44J8PozfD7XyXRqNy97p1
PPz220gp0XU9zriKogw+SaqqGtmB48ePU15enkRASklRURH31tcz6cEHk1JrAfAUcEcPLLjvMU69
/694uzsI+X3093TS5blBl8eNt72VHk8Tfd9eR+vv4MQ/HkZpiJwttgTL3/Hoo2nBNzY2smjRIhYs
WEBBQQEulyvyLuT3+2VTUxM7d+7k5MmTKXNuS0sL555+mtYvv0zqE0A7kavhqFL4oAlCCWOygGIi
qTiHyMnuTBgz/bHHKDt9GillnN8D+P1+ysrKWLJkCdOmTWPWrFmUlpZGCAghpN/vp7m5mZqaGl5/
/XUKCwtJFLfbzX+sX8+Nr75K6rtZiXr49KVLKf/4Y4QQ6LqeBP6RRx6hvLycadOmMXPmTEpKSsjN
zf3uZS6WRHV1NadOnUpaTEpJa2sr5zZupOkmSaQqk2csWcLyTz4BQNO0uL7GxkbWr1+fErzNZlMG
w1lVVSUvL4+SkhL27dvH8uXL8Xg8ceABiouLue+ttyieN2+IK2Z6TRx/5+LFacE3NDRQWVmZFjwk
nAOxJF566SW2bNnChQsXkmKipKSEB959l9vmzcvo1pZOpz/8ME98+mla8Bs2bGDZsmVpwUOa5/VE
d0oXE319fXxWXs43Z88m9Q0n03/0I1YPJIRE8OfOnWPHjh2UlZUNCT4tgUQSO3fupKqqigceeGCw
P/a7VM8emUg0VcbK+fPn2bp1KytWrBgW/JAEEknU1NTw7LPPMn/+/GFBZQI8lZw/f57nnnuO5cuX
M2XKlGHBD0sgkURdXR2PP/44FRUVNwV+qP7Tp09z8ODBjNxmRAQSSRw4cIBly5axdOnSvwh4RVH4
4osv2L9/P2VlZRlbfkQEEkls376djo4OQqHE83bk4nK5EEKwZs0aSktLRwR+RATgOxItLS1cu3aN
vr6+wTfK/4tEfzeeMmUKkydPzhg8jJAAREgEg0H6+vrQNC2pFL8ZUVWVrKws8vPzycnJQVXVjH/s
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">プールへの<span class="monospaced">特殊</span>デバイスの追加は取り消せません。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title"><span class="monospaced">特殊</span>デバイスとRAID-1を使用したプールの作成方法:</div>
<div class="content monospaced">
<pre># zpool create -f -o ashift=12 &amp;lt;pool&amp;gt; mirror &amp;lt;device1&amp;gt; &amp;lt;device2&amp;gt; special mirror &amp;lt;device3&amp;gt; &amp;lt;device4&amp;gt;</pre>
</div></div>
<div class="listingblock">
<div class="title">既存のRAID-1プールに<span class="monospaced">特殊</span>デバイスを追加する方法:</div>
<div class="content monospaced">
<pre># zpool add &amp;lt;pool&amp;gt; special mirror &amp;lt;device1&amp;gt; &amp;lt;device2&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>ZFSデータセット<span class="monospaced">にはspecial_small_blocks=&amp;lt;size&amp;gt;</span>プロパティが用意されています。<span class="monospaced">sizeには</span><span class="monospaced">0</span> <span class="monospaced">を指定すると特殊デバイスへの</span>小ファイルブロック保存が無効化され、<span class="monospaced">512B</span>～<span class="monospaced">1Mの</span>範囲で2の累乗値を指定できます。プロパティ設定後<span class="monospaced">、size未満の</span>新しいファイルブロックは<span class="monospaced">特殊デバイス上に</span>割り当てられます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">special_small_blocks</span>の値がデータセットの<span class="monospaced">レコードサイズ</span>（デフォルト<span class="monospaced">128K</span>）以上である場合、
<strong>すべての</strong>データが<span class="monospaced">特殊</span>デバイスに書き込まれますので、ご注意ください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>プールで<span class="monospaced">special_small_blocks</span>プロパティを設定すると、
そのプロパティのデフォルト値がすべての子 ZFS データセットに適用されます
（例：プール内のすべてのコンテナが小ファイルブロックを有効化）。</p></div>
<div class="listingblock">
<div class="title">プール全体で4Kブロック未満のファイルをすべて対象とする場合：</div>
<div class="content monospaced">
<pre># zfs set special_small_blocks=4K &amp;lt;pool&amp;gt;</pre>
</div></div>
<div class="listingblock">
<div class="title">単一データセットでの小ファイルブロックの適用:</div>
<div class="content monospaced">
<pre># zfs set special_small_blocks=4K &amp;lt;pool&amp;gt;/&amp;lt;filesystem&amp;gt;</pre>
</div></div>
<div class="listingblock">
<div class="title">単一データセットのみ小ファイルブロックを無効化する場合:</div>
<div class="content monospaced">
<pre># zfs set special_small_blocks=0 &amp;lt;pool&amp;gt;/&amp;lt;filesystem&amp;gt;</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="sysadmin_zfs_features">3.9.13. ZFS プールの機能
<a class="headerlink" href="#sysadmin_zfs_features" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFSにおけるディスク上のフォーマット変更は、メジャーバージョン変更時のみ行われ、
<strong>機能（feature）</strong>を通じて指定されます。全ての機能および一般的な仕組みは、
<span class="monospaced">zpool-features(5)</span>マニュアルページに詳細に記載されています。</p></div>
<div class="paragraph">
<p>新機能の有効化により、古いバージョンのZFSではプールをインポートできなくなる可能性があるため、
<span class="monospaced">管理者がプールに対してzpool upgradeを実行することで</span>、
積極的にこの操作を行う必要があります（<span class="monospaced">zpool-upgrade(8)</span>マニュアルページを参照）。</p></div>
<div class="paragraph">
<p>新しい機能の1つを利用する必要がない限り、それらを有効化することによるメリットはありません。</p></div>
<div class="paragraph">
<p>実際、新機能を有効化することにはいくつかのデメリットがあります：</p></div>
<div class="ulist"><ul>
<li>
<p>
ZFS上にrootを配置したシステムで、GRUBを使用して起動している場合、
rpool上で新機能が有効になっていると、GRUBにおけるZFSの実装が互換性を欠くため、
起動不能となる可能性があります。</p>
</li>
<li>
<p>
古いカーネル（旧式のZFSモジュールを搭載）で起動した場合、
システムはアップグレードされたプールをインポートできません。</p>
</li>
<li>
<p>
同様に、起動不能なシステムを修復するために古いバージョンのProxmox VE ISOから起動することもできません。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">システムがまだGRUBで起動している場合、rpoolをアップグレード<strong>しないでください</strong>。システムが起動不能になります。これには、Proxmox VE 5.4以前にインストールされたシステムや、レガシーBIOSブートで起動するシステムも含まれます（<a href="#sysboot_determine_bootloader_used">ブートローダーの確認方法についてはこちらを参照</a>）。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">ZFS プールで新機能を有効化する方法:</div>
<div class="content monospaced">
<pre># zpool upgrade &amp;lt;pool&amp;gt;</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="chapter_btrfs">
<span>3.10.</span>BTRFS
<a class="headerlink" href="#chapter_btrfs" title="Permalink to this heading"></a></h3>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">BTRFSの統合は、現在Proxmox VEにおいて<strong>技術プレビュー段階</strong>となっております。</td>
</tr></table>
</div>
<div class="paragraph">
<p>BTRFSは、Linuxカーネルがネイティブでサポートする最新のコピー・オン・ライト方式のファイルシステムであり、スナップショット、組み込みRAID、データおよびメタデータのチェックサムによる自己修復機能などを実装しています。Proxmox VE 7.0より、BTRFSはルートファイルシステムのオプションとして導入されました。</p></div>
<div class="ulist"><div class="title">BTRFS の一般的な利点</div><ul>
<li>
<p>
メインシステムのセットアップは、従来の ext4 ベースのセットアップとほぼ同一です。</p>
</li>
<li>
<p>
スナップショット</p>
</li>
<li>
<p>
ファイルシステムレベルでのデータ圧縮</p>
</li>
<li>
<p>
コピー・オン・ライト方式によるクローン</p>
</li>
<li>
<p>
RAID0、RAID1、および RAID10</p>
</li>
<li>
<p>
データ破損に対する保護</p>
</li>
<li>
<p>
自己修復機能</p>
</li>
<li>
<p>
Linuxカーネルによるネイティブサポート</p>
</li>
</ul></div>
<div class="ulist"><div class="title">注意点</div><ul>
<li>
<p>
RAIDレベル5/6は実験的かつ危険なため、<a href="https://btrfs.readthedocs.io/en/latest/Status.html">BTRFSステータス</a>をご参照ください</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_installation_as_root_file_system_2">3.10.1. ルートファイルシステムとしてのインストール
<a class="headerlink" href="#_installation_as_root_file_system_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE インストーラを使用してインストールする場合、ルートファイルシステムに BTRFS を選択できます。インストール時に RAID タイプを選択する必要があります：</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
RAID0<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
「ストライピング」とも呼ばれます。このボリュームの容量は、
全ディスクの容量の合計となります。ただしRAID0は冗長性を一切提供しないため、
単一のドライブが故障するとボリューム全体が使用不能になります。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
RAID1<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
「ミラーリング」とも呼ばれます。データは全てのディスクに同一の内容で書き込まれます。このモードには、同じサイズのディスクが最低2台必要です。結果として得られる容量は、単一ディスクの容量となります。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
RAID10<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
RAID0とRAID1の組み合わせです。最低4台のディスクが必要です。</p>
</td>
</tr>
</table></div>
<div class="paragraph">
<p>インストーラーは自動的にディスクをパーティション分割し、
<span class="monospaced">/var/lib/pve/local-btrfs</span> に追加のサブボリュームを作成します。
Proxmox VE ツールでこれを利用するため、
インストーラーは<span class="monospaced">/etc/pve/storage.cfg</span> に以下の設定エントリを作成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ディレクトリ: local
        パス /var/lib/vz
        内容 iso,vztmpl,backup
        無効化

btrfs: local-btrfs
        パス /var/lib/pve/local-btrfs
        内容 iso,vztmpl,backup,images,rootdir</pre>
</div></div>
<div class="paragraph">
<p>これにより、デフォルトの<span class="monospaced">ローカル</span>ストレージが無効化され、追加サブボリューム上のBTRFS専用ストレージエントリが優先的に使用されます。</p></div>
<div class="paragraph">
<p><span class="monospaced">btrfs</span>コマンドは BTRFS ファイルシステムの構成および管理に使用されます。
インストール後、以下のコマンドで追加サブボリュームをすべて一覧表示できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># btrfs subvolume list /
ID 256 gen 6 トップレベル 5 パス var/lib/pve/local-btrfs</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_btrfs_administration">3.10.2. BTRFSの管理
<a class="headerlink" href="#_btrfs_administration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>本セクションでは、一般的なタスクに関する使用例をいくつかご紹介します。</p></div>
<div class="sect4">
<h5 id="_creating_a_btrfs_file_system">BTRFS ファイルシステムの作成
<a class="headerlink" href="#_creating_a_btrfs_file_system" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>BTRFSファイルシステムを作成するには、<span class="monospaced">mkfs.btrfsが</span>使用されます。<span class="monospaced">-d</span>および<span class="monospaced">-m</span>パラメータは、それぞれメタデータとデータのプロファイルを設定するために使用されます。オプションの<span class="monospaced">-L</span>パラメータを使用すると、ラベルを設定できます。</p></div>
<div class="paragraph">
<p>一般的に、以下のモードがサポートされています：<span class="monospaced">single</span>、<span class="monospaced">raid0</span>、<span class="monospaced">raid1</span>、
<span class="monospaced">raid10</span>。</p></div>
<div class="paragraph">
<p>単一ディスク<span class="monospaced">/dev/sdb</span>上にラベル<span class="monospaced">My-Storage</span> を持つ BTRFS ファイルシステムを作成します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># mkfs.btrfs -m single -d single -L My-Storage /dev/sdb</pre>
</div></div>
<div class="paragraph">
<p>あるいは、2つのパーティション<span class="monospaced">/dev/sdb1</span>と<span class="monospaced">/dev/sdc1</span> 上に RAID1 を構築します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># mkfs.btrfs -m raid1 -d raid1 -L My-Storage /dev/sdb1 /dev/sdc1</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_mounting_a_btrfs_file_system">BTRFS ファイルシステムのマウント
<a class="headerlink" href="#_mounting_a_btrfs_file_system" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>新しいファイルシステムは、手動でマウントすることも可能です。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># mkdir /my-storage
 # mount /dev/sdb /my-storage</pre>
</div></div>
<div class="paragraph">
<p>BTRFSは他のマウントポイントと同様に<span class="monospaced">/etc/fstabに</span>追加し、起動時に自動マウントすることも可能です。ブロックデバイスパスではなく、特にBTRFS構成に複数のディスクが含まれる場合は、<span class="monospaced">mkfs.btrfs</span>コマンドが表示した<span class="monospaced">UUID値</span>を使用することを推奨します。</p></div>
<div class="paragraph">
<p>例：</p></div>
<div class="listingblock">
<div class="title">ファイル<span class="monospaced">/etc/fstab</span></div>
<div class="content monospaced">
<pre># ... 簡略化のため他のマウントポイントは省略

# mkfs.btrfs 出力の UUID を使用されることを強くお勧めいたします
UUID=e2c0c3ff-2114-4f54-b767-3a203e49f6f3 /my-storage btrfs defaults 0 0</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">UUIDが確認できない場合は、<span class="monospaced">blkidツール</span>を使用してブロックデバイスの全プロパティを一覧表示できます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>その後、最初のマウントを実行するには以下を実行します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>mount /my-storage</pre>
</div></div>
<div class="paragraph">
<p>次回再起動後は、システムが起動時に自動的に処理します。</p></div>
</div>
<div class="sect4">
<h5 id="_adding_a_btrfs_file_system_to_proxmox_ve">Proxmox VE への BTRFS ファイルシステムの追加
<a class="headerlink" href="#_adding_a_btrfs_file_system_to_proxmox_ve" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>既存のBTRFSファイルシステムをProxmox VEに追加するには、ウェブインターフェースまたはCLIを使用できます。
例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvesm add btrfs my-storage --path /my-storage</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_creating_a_subvolume">サブボリュームの作成
<a class="headerlink" href="#_creating_a_subvolume" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>サブボリュームを作成すると、BTRFS ファイルシステム内のパスにリンクされ、
通常のディレクトリとして表示されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># btrfs サブボリューム作成 /some/path</pre>
</div></div>
<div class="paragraph">
<p>その後、<span class="monospaced">/some/path は</span>通常のディレクトリと同様に動作します。</p></div>
</div>
<div class="sect4">
<h5 id="_deleting_a_subvolume">サブボリュームの削除
<a class="headerlink" href="#_deleting_a_subvolume" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">rmdir</span> コマンドで削除されるディレクトリとは異なり、サブボリュームは空である必要がなく、
<span class="monospaced">btrfs</span>コマンドで削除できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># btrfs subvolume delete /some/path</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_creating_a_snapshot_of_a_subvolume">サブボリュームのスナップショットを作成する
<a class="headerlink" href="#_creating_a_snapshot_of_a_subvolume" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>BTRFSはスナップショットと通常のサブボリュームを区別しないため、
スナップショットの作成はサブボリュームの任意のコピーを作成するものと見なせます。
慣例として、Proxmox VEはゲストディスクやサブボリュームのスナップショット作成時に
読み取り専用フラグを使用しますが、このフラグは後から変更することも可能です。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># btrfs subvolume snapshot -r /some/path /a/new/path</pre>
</div></div>
<div class="paragraph">
<p>これにより、<span class="monospaced">/some/path</span>上のサブボリュームの読み取り専用「クローン」が
<span class="monospaced">/a/new/path</span> に作成されます。<span class="monospaced">/some/path</span>に対する今後の変更は、
変更前にデータをコピーしてから行われます。</p></div>
<div class="paragraph">
<p>読み取り専用 (<span class="monospaced">-r</span>) オプションを省略した場合、両方のサブボリュームは書き込み可能となります。</p></div>
</div>
<div class="sect4">
<h5 id="_enabling_compression">圧縮の有効化
<a class="headerlink" href="#_enabling_compression" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>デフォルトでは、BTRFS はデータを圧縮しません。圧縮を有効にするには、
<span class="monospaced">`compress`</span>マウントオプションを追加できます。既に書き込まれたデータは
事後的に圧縮されない点にご注意ください。</p></div>
<div class="paragraph">
<p>デフォルトでは、ルートファイルシステムは<span class="monospaced">/etc/fstab</span>に以下のように記載されます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>UUID=&amp;lt;ルートファイルシステムのUUID&amp;gt; / btrfs defaults 0 1</pre>
</div></div>
<div class="paragraph">
<p>上記の<span class="monospaced">デフォルト設定</span>に<span class="monospaced">compress=zstd</span>、<span class="monospaced">compress=lzo</span>、または<span class="monospaced">compress=zlib</span>を追加するだけで設定可能です。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>UUID=&amp;lt;ルートファイルシステムのUUID&amp;gt; / btrfs defaults,compress=zstd 0 1</pre>
</div></div>
<div class="paragraph">
<p>この変更は再起動後に有効となります。</p></div>
</div>
<div class="sect4">
<h5 id="_checking_space_usage">使用容量の確認
<a class="headerlink" href="#_checking_space_usage" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">従来のdfツールでは</span>、一部のBTRFS設定において混乱を招く出力が表示される場合があります。
より正確な使用量を確認するには、<span class="monospaced">btrfs filesystem usage /PATHコマンド</span>をご利用ください。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># btrfs fi usage /my-storage</pre>
</div></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="proxmox_node_management">
<span>3.11. Proxmoxノード管理</span>
<a class="headerlink" href="#proxmox_node_management" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE ノード管理ツール（<span class="monospaced">pvenode</span>）を使用すると、ノード固有の設定やリソースを制御できます。</p></div>
<div class="paragraph">
<p>現在、<span class="monospaced">pvenodeではノ</span>ードの説明文の設定、ノード上のゲストに対する各種一括操作の実行、ノードのタスク履歴の表示、
APIおよび<span class="monospaced">pveproxy</span>経由のWeb GUIで使用されるノードのSSL証明書の管理が可能です。</p></div>
<div class="sect3">
<h4 id="_wake_on_lan">3.11.1. ウェイクオンLAN
<a class="headerlink" href="#_wake_on_lan" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Wake-on-LAN（WoL）は、マジックパケットを送信することで、ネットワーク上のスリープ状態のコンピュータを起動することを可能にします。少なくとも1つのNICがこの機能をサポートしている必要があり、コンピュータのファームウェア（BIOS/UEFI）設定で対応するオプションを有効にする必要があります。オプション名は「<em>Enable Wake-on-Lan」</em>から「<em>Power On By PCIE Device</em>」まで様々です。不明な場合はマザーボードのベンダーマニュアルをご確認ください。
WoL設定の確認には<span class="monospaced">ethtoolを使用</span>できます。対象インターフェース（<span class="monospaced">&amp;lt;interface&amp;gt;）</span>に対して以下を実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ethtool &amp;lt;インターフェース&amp;gt; | grep Wake-on</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">pvenode</span>を使用すると、WoL 経由でクラスタの休止状態メンバーを起動できます。
以下のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode wakeonlan &amp;lt;ノード名&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>これにより、UDPポート9でWoLマジックパケットがブロードキャストされます。
このパケットには、<span class="monospaced">wakeonlanプロパティから</span> <span class="monospaced">取得した&amp;lt;node&amp;gt;</span>のMACアドレスが含まれます。
<span class="monospaced">ノード固有のwakeonlanプロパティは</span>、以下のコマンドで設定できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode config set -wakeonlan XX:XX:XX:XX:XX:XX</pre>
</div></div>
<div class="paragraph">
<p>WoLパケットの送信インターフェースはデフォルトルートから決定されます。
以下のコマンドで<span class="monospaced">バインドインターフェース</span>を設定することにより上書き可能です:
`pvenode bind-interface<span class="monospaced">=</span>&lt;インターフェース名&gt;`</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode config set -wakeonlan XX:XX:XX:XX:XX:XX,bind-interface=&amp;lt;iface-name&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>WoLパケット送信時に使用するブロードキャストアドレス（デフォルト<span class="monospaced">255.255.255.255</span>）は、
以下のコマンドで<span class="monospaced">明示的に設定することで</span>変更可能です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode config set -wakeonlan XX:XX:XX:XX:XX:XX,broadcast-address=&amp;lt;ブロードキャストアドレス&amp;gt;</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_task_history">3.11.2. タスク履歴
<a class="headerlink" href="#_task_history" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>サーバーの問題（例：バックアップジョブの失敗）をトラブルシューティングする際には、
以前に実行されたタスクのログが役立つことがよくあります。Proxmox VEでは、
<span class="monospaced">pvenode taskコマンド</span>を通じてノードのタスク履歴にアクセスできます。</p></div>
<div class="paragraph">
<p><span class="monospaced">listサブコマンド</span>を使用すると、ノードの完了済みタスクをフィルタリングしたリストを取得できます。
例えば、VM<em></em>100に関連するエラーで終了したタスクのリストを取得するには、以下のコマンドを実行します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode タスク一覧表示 --エラー表示 --vmid 100</pre>
</div></div>
<div class="paragraph">
<p>タスクのログは、そのUPIDを使用して出力できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode タスク ログ UPID:pve1:00010D94:001CA6EA:6124E1B9:vzdump:100:root@pam:</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_bulk_guest_power_management">3.11.3. ゲストの一括電源管理
<a class="headerlink" href="#_bulk_guest_power_management" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>多数の仮想マシン/コンテナを管理している場合、ゲストの起動・停止は
<span class="monospaced">pvenode</span> の<span class="monospaced">startall</span>および<span class="monospaced">stopall</span>サブコマンドによる一括操作で実行可能です。
デフォルトでは、<span class="monospaced">pvenode startall は</span>起動時に自動起動設定されている仮想マシン/コンテナのみを起動します（<a href="#qm_startup_and_shutdown">仮想マシンの自動起動とシャットダウンを参照</a>）。
ただし、<span class="monospaced">--force</span>フラグでこの動作を上書きできます。
両コマンドには<span class="monospaced">--vms</span>オプションもあり、
指定した VMID のゲストのみを停止/起動対象に制限します。</p></div>
<div class="paragraph">
<p>例えば、VMID<em>100</em>、<em>101</em>、<em>102</em> を起動する場合（<span class="monospaced">onboot</span>の設定に関わらず）、以下のコマンドを使用できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode startall --vms 100,101,102 --force</pre>
</div></div>
<div class="paragraph">
<p>これらのゲスト（および実行中のその他のゲスト）を停止するには、以下のコマンドを使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode stopall</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">stopallコマンドは、まずクリーンなシャットダウンを実行しようと試み、その後、
すべてのゲストが正常にシャットダウンするか、または上書き可能なタイムアウト（デフォルトは3分）が
経過するまで待機します。その時点で、force-stopパラメータが明示的に0（false）に設定されていない場合、
まだ実行中のすべての仮想ゲストは強制的に停止されます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="first_guest_boot_delay">3.11.4. ゲスト初回起動遅延
<a class="headerlink" href="#first_guest_boot_delay" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>仮想マシンやコンテナが起動に時間がかかる外部リソース（例：NFSサーバー）に依存している場合、Proxmox VEの起動から自動起動設定された最初の仮想マシン/コンテナが起動するまでの間に、ノードごとの遅延を設定することも可能です（<a href="#qm_startup_and_shutdown">仮想マシンの自動起動と自動停止</a>を参照）。</p></div>
<div class="paragraph">
<p>以下の設定により実現できます（<span class="monospaced">10は</span>秒単位の遅延を表します）：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode config set --startall-onboot-delay 10</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_bulk_guest_migration">3.11.5. ゲストの一括移行
<a class="headerlink" href="#_bulk_guest_migration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>アップグレード作業において、ゲストマシンをあるノードから別のノードへ一括移行する必要が生じた場合、<span class="monospaced">pvenodeにはbul</span>k migration（一括移行）用の<span class="monospaced">migrateallサブコマンド</span>が用意されています。デフォルトでは、システム上の全ゲストマシンが移行先ノードへ移行されますが、特定のゲストマシンのみを選択して移行するよう設定することも可能です。</p></div>
<div class="paragraph">
<p>例えば、VM<em>100</em>、<em>101</em>、<em>102</em> をノード<em>pve2</em> へ移行し、
ローカルディスクのライブマイグレーションを有効にするには、以下を実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode migrateall pve2 --vms 100,101,102 --with-local-disks</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="ballooning-target">3.11.6. バルーニングのRAM使用量目標
<a class="headerlink" href="#ballooning-target" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><a href="#qm_ballooning">自動メモリ割り当ての</a>目標値はデフォルトで80%に設定されています。
ノードごとにこの目標値をカスタマイズするには、<span class="monospaced">ballooning-targetプロパティ</span>を設定します。
例えば、ホストメモリ使用率を90%に設定する場合：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode config set --ballooning-target 90</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="sysadmin_certificate_management">
<span>3.12. 証明書管理</span>
<a class="headerlink" href="#sysadmin_certificate_management" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_certificates_for_intra_cluster_communication">3.12.1. クラスタ内通信用証明書
<a class="headerlink" href="#_certificates_for_intra_cluster_communication" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>各 Proxmox VE クラスターはデフォルトで独自の（自己署名）認証局（CA）を作成し、
前述の CA によって署名される各ノードの証明書を生成します。
これらの証明書は、クラスターの<span class="monospaced">pveproxy</span>サービスとの暗号化通信、
および SPICE を使用する場合の Shell/コンソール機能に使用されます。</p></div>
<div class="paragraph">
<p>CA証明書と鍵は、<a href="#chapter_pmxcfs">Proxmoxクラスタファイルシステム（pmxcfs）</a>に保存されております。</p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_certs_api_gui">3.12.2. API および Web GUI 用証明書
<a class="headerlink" href="#sysadmin_certs_api_gui" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>REST API および Web GUI は、各ノード上で動作する<span class="monospaced">pveproxy</span>サービスによって提供されます。</p></div>
<div class="paragraph">
<p><span class="monospaced">pveproxy</span> が使用する証明書については、以下のオプションがご利用いただけます：</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
デフォルトでは、
<span class="monospaced">/etc/pve/nodes/NODENAME/pve-ssl.pem</span>に存在するノード固有の証明書が使用されます。この証明書はクラスタCAによって署名されているため、
ブラウザやオペレーティングシステムによって自動的に信頼されることはありません。</p>
</li>
<li>
<p>
外部提供の証明書（例：商用CAによる署名済み）をご利用ください。</p>
</li>
<li>
<p>
ACME（Let’s Encrypt）を使用して自動更新機能付きの信頼された証明書を取得することも可能です。これは Proxmox VE API および Web インターフェースにも統合されています。</p>
</li>
</ol></div>
<div class="paragraph">
<p>オプション 2 および 3 では、ファイル<span class="monospaced">/etc/pve/local/pveproxy-ssl.pem</span>（および
パスワードなしである必要がある<span class="monospaced">/etc/pve/local/pveproxy-ssl.key</span>）が使用されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">/etc/pve/local</span>はノード固有のシンボリックリンクであり、
<span class="monospaced">/etc/pve/nodes/NODENAME</span> を指している点にご留意ください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>証明書は、Proxmox VE ノード管理コマンド（<span class="monospaced">pvenode(1)</span>マニュアルページをご参照ください）で管理されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">/etc/pve/local/pve-ssl.pem</span>および<span class="monospaced">/etc/pve/local/pve-ssl.key</span>に自動生成されるノード証明書ファイル、
ならびに<span class="monospaced">/etc/pve/pve-root-ca.pem</span>および<span class="monospaced">/etc/pve/priv/pve-root-ca.key</span> に格納されるクラスターCAファイルを
置換または手動で変更しないでください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_certs_upload_custom">3.12.3. カスタム証明書のアップロード
<a class="headerlink" href="#sysadmin_certs_upload_custom" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEノードで使用したい既存の証明書をお持ちの場合は、
ウェブインターフェースから簡単にアップロードできます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-certs-upload-custom.png">
<img src="images/screenshot/gui-node-certs-upload-custom.png" alt="screenshot/gui-node-certs-upload-custom.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>なお、証明書キーファイルは、提供される場合、パスワードで保護されてはいけません。</p></div>
</div>
<div class="sect3">
<h4 id="sysadmin_certs_get_trusted_acme_cert">3.12.4. Let’s Encrypt (ACME) による信頼済み証明書
<a class="headerlink" href="#sysadmin_certs_get_trusted_acme_cert" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEには、<strong>自動証明書管理環境ACMEプロトコ</strong>ルの実装が含まれており、
Proxmox VE管理者はLet's EncryptなどのACMEプロバイダーを利用することで、
最新のオペレーティングシステムやウェブブラウザで標準的に受け入れられ信頼される
TLS証明書の簡単な設定が可能となります。</p></div>
<div class="paragraph">
<p>現在実装されている2つのACMEエンドポイントは、
<a href="https://letsencrypt.org">Let’s Encrypt（LE）</a>本番環境およびそのステージング環境です。
当社のACMEクライアントは、組み込みWebサーバー<span class="monospaced">を使用したhttp-01チャレンジの検証</span>と、
<a href="https://acme.sh">acme.shがサポートする</a>すべてのDNS APIエンドポイントに対応したDNSプラグインを使用した
<span class="monospaced">dns-01チャレンジ</span>の検証をサポートしております。</p></div>
<div class="sect4">
<h5 id="sysadmin_certs_acme_account">ACMEアカウント<a class="headerlink" href="#sysadmin_certs_acme_account" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-acme-register-account.png">
<img src="images/screenshot/gui-datacenter-acme-register-account.png" alt="screenshot/gui-datacenter-acme-register-account.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>各クラスターごとに、ご利用になるエンドポイントでACMEアカウントを登録する必要があります。
そのアカウントに登録されたメールアドレスは、ACMEエンドポイントからの更新期限や
同様の通知の連絡先として使用されます。</p></div>
<div class="paragraph">
<p>ACMEアカウントの登録および無効化は、ウェブインターフェース（<span class="monospaced">データセンター → ACME）</span>または<span class="monospaced">pvenode</span>コマンドラインツールを使用して行えます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvenode acme account register account-name mail@example.com</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content"><a href="https://letsencrypt.org/docs/rate-limits/">レート制限</a>のため、実験目的やACMEを初めてご利用になる場合は、LE<span class="monospaced">ステージング</span>をご利用ください。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="sysadmin_certs_acme_plugins">ACMEプラグイン
<a class="headerlink" href="#sysadmin_certs_acme_plugins" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ACMEプラグインの役割は、お客様、ひいてはお客様が運用するProxmox VEクラスターがドメインの正当な所有者であることを自動的に検証することです。これは自動証明書管理の基盤となる構成要素です。</p></div>
<div class="paragraph">
<p>ACMEプロトコルでは、さまざまな種類のチャレンジが規定されています。例えば、
<span class="monospaced">http-01チャレンジでは</span>、ウェブサーバーが特定のコンテンツを含むファイルを提供し、
ドメインを管理していることを証明します。技術的な制約や、レコードのアドレスが
パブリックインターネットから到達できない場合など、これが不可能な場合もあります。このような場合には、<span class="monospaced">dns-01チャレンジ</span>が利用可能です。このチャレンジは、ドメインのゾーンに特定のDNSレコードを作成することで満たされます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-acme-overview.png">
<img src="images/screenshot/gui-datacenter-acme-overview.png" alt="screenshot/gui-datacenter-acme-overview.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VE は、これらのチャレンジタイプを標準でサポートしております。プラグインの設定は、ウェブインターフェースの<span class="monospaced">「データセンター」→「ACME」</span>から、または `<span class="monospaced">pvenode acme plugin add</span>` コマンドを使用して行うことが可能です。</p></div>
<div class="paragraph">
<p>ACMEプラグインの設定は<span class="monospaced">/etc/pve/priv/acme/plugins.cfg</span>に保存されます。
クラスタ内の全ノードでプラグインが利用可能です。</p></div>
</div>
<div class="sect4">
<h5 id="_node_domains">Node Domains
<a class="headerlink" href="#_node_domains" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>各ドメインはノード固有です。新規ドメインの追加や既存ドメインの管理は、
「<span class="monospaced">ノード」＞「証明書」</span>または `<span class="monospaced">pvenode config</span>` コマンドで行えます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-certs-add-domain.png">
<img src="images/screenshot/gui-node-certs-add-domain.png" alt="screenshot/gui-node-certs-add-domain.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>ノードに必要なドメインを設定し、
適切なACMEアカウントが選択されていることを確認後、
ウェブインターフェースから新規証明書の発行を依頼できます。
成功すると、インターフェースは10秒後に再読み込みされます。</p></div>
<div class="paragraph">
<p>更新は<a href="#sysadmin_certs_acme_automatic_renewal">自動的に</a>行われます。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_certs_acme_http_challenge">3.12.5. ACME HTTP チャレンジプラグイン
<a class="headerlink" href="#sysadmin_certs_acme_http_challenge" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ポート80で起動される組み込みウェブサーバーを介した<span class="monospaced">http-01</span>チャレンジの検証用に、
常に暗黙的に設定された<span class="monospaced">スタンドアロンプラグイン</span>が存在します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">スタンドアロンという</span>名称は、サードパーティのサービスに依存せず、
単独で検証を提供できることを意味します。したがって、このプラグインは
クラスタノードでも動作します。</td>
</tr></table>
</div>
<div class="paragraph">
<p>Let's EncryptのACMEによる証明書管理にこれを利用するには、
いくつかの前提条件がございます。</p></div>
<div class="ulist"><ul>
<li>
<p>
アカウント登録には、Let's Encryptの利用規約（ToS）への同意が必要となります。</p>
</li>
<li>
<p>
ノードの<strong>ポート80は</strong>インターネットからアクセス可能である必要があります。</p>
</li>
<li>
<p>
ポート80には他のリスナーが存在<strong>してはいけません</strong>。</p>
</li>
<li>
<p>
要求された（サブ）ドメインは、ノードのパブリックIPに解決される必要があります。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="sysadmin_certs_acme_dns_challenge">3.12.6. ACME DNS API チャレンジプラグイン
<a class="headerlink" href="#sysadmin_certs_acme_dns_challenge" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">http-01方式による</span>検証のための外部アクセスが不可能な、または望ましくないシステムでは、
<span class="monospaced">dns-01検証方式</span>を使用することが可能です。
この検証方式には、APIを介して<span class="monospaced">TXTレコード</span>のプロビジョニングを許可するDNSサーバーが必要です。</p></div>
<div class="sect4">
<h5 id="sysadmin_certs_acme_dns_api_config">検証のための ACME DNS API の設定<a class="headerlink" href="#sysadmin_certs_acme_dns_api_config" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Proxmox VEは、<span class="monospaced">acme.shプロジェクト</span>（<span class="footnote"><br>[acme.sh<a href="https://github.com/acmesh-official/acme.sh">https://github.com/acmesh-official/acme.sh</a>]<br></span>）向けに開発されたDNSプラグインを再利用しております。
特定のAPI設定の詳細につきましては、同プロジェクトのドキュメントをご参照ください。</p></div>
<div class="paragraph">
<p>DNS API を使用した新しいプラグインを設定する最も簡単な方法は、ウェブインターフェース（<span class="monospaced">データセンター → ACME</span>）をご利用いただくことです。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-acme-add-dns-plugin.png">
<img src="images/screenshot/gui-datacenter-acme-add-dns-plugin.png" alt="screenshot/gui-datacenter-acme-add-dns-plugin.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>チャレンジタイプとして<span class="monospaced">「DNS」</span>を選択してください。その後、APIプロバイダーを選択し、
そのAPI経由でアカウントにアクセスするための認証情報を入力します。
検証遅延は、DNSレコードを設定してからACMEプロバイダーに検証を促すまでの時間を秒単位で指定します。
プロバイダーはレコードを自社インフラに反映させるのに時間を要する場合があるためです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">プロバイダーのAPI認証情報を取得する方法の詳細については、
acme.shの<a href="https://github.com/acmesh-official/acme.sh/wiki/dnsapi#how-to-use-dns-api">「DNS APIの使用方法」</a>
wikiをご参照ください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>DNSプロバイダーやAPIエンドポイントは多数存在するため、Proxmox VEでは一部のプロバイダー向けに認証情報入力フォームを自動生成します。その他のプロバイダーでは大きなテキストエリアが表示されますので、認証情報の<span class="monospaced">KEY=VALUE</span>ペアを全てそこにコピーしてください。</p></div>
</div>
<div class="sect4">
<h5 id="_dns_validation_through_cname_alias">CNAMEエイリアスによるDNS検証<a class="headerlink" href="#_dns_validation_through_cname_alias" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>プライマリ/実際のDNSがAPI経由のプロビジョニングに対応していない場合、
別のドメイン/DNSサーバーで検証を処理するための特別な<span class="monospaced">エイリアスモード</span>をご利用いただけます。手動で永続的な<span class="monospaced">CNAMEレコード</span>を設定し、
<span class="monospaced">_acme-challenge.domain1.example を</span> <span class="monospaced">_acme-challenge.domain2.example</span>へ指すようにします。
さらに、対応<span class="monospaced">するacmedomainXキーの</span> <span class="monospaced">エイリアスプロパティを</span>、
Proxmox VEノード設定ファイル内で<span class="monospaced">domain2.example</span>に設定します<span class="monospaced">。</span>
これにより、<span class="monospaced">domain2.exampleの</span>DNSサーバーが<span class="monospaced">domain1.exampleの</span>全チャレンジを検証できるようになります。</p></div>
</div>
<div class="sect4">
<h5 id="_combination_of_plugins">プラグインの組み合わせ<a class="headerlink" href="#_combination_of_plugins" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ノードが異なる要件/DNSプロビジョニング機能を持つ複数のドメイン経由でアクセス可能な場合、
<span class="monospaced">http</span> <span class="monospaced">-01検証とdns-01検証の</span>併用が可能です。
また、ドメインごとに異なるプラグインインスタンスを指定することで、
複数プロバイダーまたはインスタンスのDNS APIを混在させることも可能です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">同一サービスを複数ドメインで利用することは複雑性を増すため、
可能な限り避けるべきです。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="sysadmin_certs_acme_automatic_renewal">3.12.7. ACME証明書の自動更新
<a class="headerlink" href="#sysadmin_certs_acme_automatic_renewal" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ノードが ACME 提供の証明書で正常に設定された場合（pvenode または GUI 経由）、証明書は<span class="monospaced">pve-daily-update.service</span> によって自動的に更新されます。現在、更新は証明書が既に失効している場合、または今後 30 日以内に失効する場合に試行されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">短寿命証明書を発行するカスタムディレクトリをご利用の場合、
再起動後の証明書更新漏れを防ぐため、
<span class="monospaced">pve-daily-update.timer</span>ユニットのランダム遅延を無効化されることを
お勧めいたします。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_acme_examples_with_span_class_monospaced_pvenode_span">3.12.8.<span class="monospaced">pvenode</span>を使用した ACME の例
<a class="headerlink" href="#_acme_examples_with_span_class_monospaced_pvenode_span" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="_example_sample_span_class_monospaced_pvenode_span_invocation_for_using_let_8217_s_encrypt_certificates">例：Let’s Encrypt証明書を使用するための<span class="monospaced">pvenode</span>実行サンプル
<a class="headerlink" href="#_example_sample_span_class_monospaced_pvenode_span_invocation_for_using_let_8217_s_encrypt_certificates" title="Permalink to this heading"></a></h5>
<div class="listingblock">
<div class="content monospaced">
<pre>root@proxmox:~# pvenode acme account register default mail@example.invalid
ディレクトリ エンドポイント:
0) Let's Encrypt V2 (https://acme-v02.api.letsencrypt.org/directory)
1) Let's Encrypt V2 ステージング (https://acme-staging-v02.api.letsencrypt.org/directory)
2) カスタム
選択を入力してください: 1

利用規約: https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf
上記の利用規約に同意されますか？ [y|N]y...

タスク完了
root@proxmox:~# pvenode config set --acme domains=example.invalid
root@proxmox:~# pvenode acme cert order
ACMEアカウントの詳細を読み込み中
ACME注文を発行中...

ステータスは「有効」です！

すべてのドメインが検証されました！...

証明書をダウンロード中
pveproxyの証明書と鍵を設定中
pveproxyを再起動中
タスク完了</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_example_setting_up_the_ovh_api_for_validating_a_domain">例：ドメイン検証用のOVH API設定
<a class="headerlink" href="#_example_setting_up_the_ovh_api_for_validating_a_domain" title="Permalink to this heading"></a></h5>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">アカウント登録手順は、使用するプラグインに関わらず共通ですので、
ここでは繰り返しません。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">OVH_AK</span>および<span class="monospaced">OVH_AS は</span>、OVH API ドキュメントに従い OVH から取得する必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>まず、Proxmox VE が API にアクセスできるよう、必要な情報をすべて入手する必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>root@proxmox:~# cat /path/to/api-token
OVH_AK=XXXXXXXXXXXXXXXX
OVH_AS=YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY
root@proxmox:~# source /path/to/api-token
root@proxmox:~# curl -XPOST -H"X-Ovh-Application: $OVH_AK" -H "Content-type: application/json" \
https://eu.api.ovh.com/1.0/auth/credential  -d '{
  "accessRules": [
    {"method": "GET","path": "/auth/time"},
    {"method": "GET","path": "/domain"},
    {"method": "GET","path": "/domain/zone/*"},
    {"method":"GET","path": "/domain/zone/*/record"},
    {"method": "POST","path": "/domain/zone/*/record"},
    {"method": "POST","path": "/domain/zone/*/refresh"},
    {"method":"PUT","path": "/domain/zone/*/record/"},
    {"method": "DELETE","path": "/domain/zone/*/record/*"}
]
}'
{"consumerKey":"ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ","state":"pendingValidation","validationUrl":"https://eu.api.ovh.com/auth/?credentialToken=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"}

(検証用URLを開き、アプリケーションキーとアカウント/コンシューマーキーを連携する手順に従ってください)

root@proxmox:~# echo "OVH_CK=ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ" &amp;gt;&amp;gt; /path/to/api-token</pre>
</div></div>
<div class="paragraph">
<p>次に、ACMEプラグインを設定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>root@proxmox:~# pvenode acme plugin add dns example_plugin --api ovh --data /path/to/api_token
root@proxmox:~# pvenode acme plugin config example_plugin
┌────────┬──────────────────────────────────────────┐
│ キー    │ 値                                    │
╞════════╪══════════════════════════════════════════╡
│ api    │ ovh                                      │
├────────┼──────────────────────────────────────────┤
│ data   │ OVH_AK=XXXXXXXXXXXXXXXX                  │
│        │ OVH_AS=YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY  │
│        │ OVH_CK=ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ  │
├────────┼──────────────────────────────────────────┤
│ ダッシュ │ 867fcf556363ca1bea866863093fcab83edf47a1 │
├────────┼──────────────────────────────────────────┤
│ プラグイン │ example_plugin                           │
├────────┼──────────────────────────────────────────┤
│ type   │ dns                                      │
└────────┴──────────────────────────────────────────┘</pre>
</div></div>
<div class="paragraph">
<p>最後に、証明書を取得したいドメインを設定し、
そのドメインに対して証明書を注文します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>root@proxmox:~# pvenode config set -acmedomain0 example.proxmox.com,plugin=example_plugin
root@proxmox:~# pvenode acme cert order
ACME アカウントの詳細を読み込み中
ACME注文を発行中
注文URL: https://acme-staging-v02.api.letsencrypt.org/acme/order/11111111/22222222

'https://acme-staging-v02.api.letsencrypt.org/acme/authz-v3/33333333' から認証情報を取得中
example.proxmox.com の検証が保留中です！
[2020年4月22日(水) 09:25:30 CEST] OVH エンドポイントを使用中: ovh-eu
[2020年4月22日(水) 09:25:30 CEST] 認証を確認中
[2020年4月22日(水) 09:25:30 CEST] コンシューマーキーは正常です。
[2020年4月22日(水) 09:25:31 CEST] レコードを追加中
[2020年4月22日(水) 09:25:32 CEST] レコードを追加しました。10秒待機します。
追加するTXTレコード: _acme-challenge.example.proxmox.com
検証をトリガー中
5秒間待機中
ステータスが「有効」になりました！
[2020年4月22日(水) 09:25:48 CEST] OVHエンドポイントを使用中: ovh-eu
[2020年4月22日(水) 09:25:48 CEST] 認証を確認中
[2020年4月22日(水) 09:25:48 CEST] コンシューマーキーは正常です。
TXTレコードの削除: _acme-challenge.example.proxmox.com

すべてのドメインの検証が完了しました！

CSRの作成中
注文状況の確認中
注文準備完了、注文を確定中
有効です！

証明書のダウンロード中
pveproxyの証明書と鍵の設定中
pveproxyを再起動中
タスク完了</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="sysadmin_certs_acme_switch_from_staging">例：<span class="monospaced">ステージング用ディレクトリ</span>から通常ACMEディレクトリへの切り替え<a class="headerlink" href="#sysadmin_certs_acme_switch_from_staging" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>アカウントのACMEディレクトリ変更はサポートされていませんが、Proxmox VEは複数アカウントをサポートしているため、本番用（信頼済み）ACMEディレクトリをエンドポイントとする新規アカウントを作成できます。また、ステージングアカウントを無効化して再作成することも可能です。</p></div>
<div class="listingblock">
<div class="title">例：<span class="monospaced">pvenode</span>を使用して<span class="monospaced">デフォルトの</span>ACME アカウントを<span class="monospaced">staging</span>から directory に変更する</div>
<div class="content monospaced">
<pre>root@proxmox:~# pvenode acme account deactivate default
アカウントファイルを '/etc/pve/priv/acme/default' から '/etc/pve/priv/acme/_deactivated_default_4' にリネーム中
タスク完了

root@proxmox:~# pvenode acme account register default example@proxmox.com
ディレクトリエンドポイント:
0) Let's Encrypt V2 (https://acme-v02.api.letsencrypt.org/directory)
1) Let's Encrypt V2 ステージング (https://acme-staging-v02.api.letsencrypt.org/directory)
2) カスタム
選択を入力してください: 0

利用規約: https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf
上記の利用規約に同意されますか？ [y|N]y...

タスク完了</pre>
</div></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sysboot">
<span>3.13. ホストブートローダー</span>
<a class="headerlink" href="#sysboot" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE は現在、インストーラで選択されたディスク設定に応じて、
2 種類のブートローダーのいずれかを使用しております。</p></div>
<div class="paragraph">
<p>EFIシステムでZFSをルートファイルシステムとしてインストールする場合、セキュアブートが有効でない限り<span class="monospaced">systemd-bootが</span>使用されます。その他のすべてのデプロイメントでは標準のGRUBブートローダーが使用されます（これは通常、Debian上にインストールされたシステムにも適用されます）。</p></div>
<div class="sect3">
<h4 id="sysboot_installer_part_scheme">3.13.1. インストーラが使用するパーティション構成
<a class="headerlink" href="#sysboot_installer_part_scheme" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE インストーラーは、インストール対象として選択されたすべてのディスク上に
3つのパーティションを作成します。</p></div>
<div class="paragraph">
<p>作成されるパーティションは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
1 MB の BIOS ブートパーティション (gdisk タイプ EF02)</p>
</li>
<li>
<p>
512 MB の EFI システムパーティション (ESP、gdisk タイプ EF00)</p>
</li>
<li>
<p>
<span class="monospaced">hdsize</span>パラメータで設定された領域、または残りの空き領域全体にまたがる第三のパーティション
    選択されたストレージタイプに使用されます</p>
</li>
</ul></div>
<div class="paragraph">
<p>ZFSをルートファイルシステムとして使用するシステムは、512MBのEFIシステムパーティション（ESP）に保存されたカーネルとinitrdイメージで起動します。レガシーBIOSシステムおよびセキュアブートが有効なEFIシステムではGRUBが使用され、セキュアブートが有効でないEFIシステムでは<span class="monospaced">systemd-bootが</span>使用されます。いずれもESPを指すようにインストールおよび設定されます。</p></div>
<div class="paragraph">
<p>BIOSモードのGRUB（<span class="monospaced">--target i386-pc</span>）は、GRUBで起動する全システムにおいて、選択された全ディスクのBIOSブートパーティションにインストールされます。<span class="footnote"><br>[これらは全て、ルートファイルシステムが<span class="monospaced">ext4または</span> <span class="monospaced">xfs</span>であるインストール、および非EFIシステムでルートファイルシステムがZFSであるインストールです]<br></span> 。</p></div>
</div>
<div class="sect3">
<h4 id="sysboot_proxmox_boot_tool">3.13.2.<span class="monospaced">proxmox-boot-tool</span>による ESP 内容の同期
<a class="headerlink" href="#sysboot_proxmox_boot_tool" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">proxmox-boot-toolは</span>、EFIシステムパーティションの内容を適切に構成・同期させるためのユーティリティです。特定のカーネルバージョンを全てのESPにコピーし、対応するブートローダーを<span class="monospaced">vfat</span>フォーマット<span class="monospaced">された</span>ESPから起動するよう設定します。ZFSをルートファイルシステムとして使用する場合、これは
GRUB内のZFS実装で利用可能なサブセットではなく、
ルートプール上のすべてのオプション機能を利用できることを意味します。
あるいは、別途小さなブートプールを作成する必要もありません。<span class="footnote"><br>[GRUBでルートにZFSを起動する]
<a href="https://openzfs.github.io/openzfs-docs/Getting%20Started/Debian/Debian%20Bookworm%20Root%20on%20ZFS.html">https://openzfs.github.io/openzfs-docs/Getting%20Started/Debian/Debian%20Bookworm%20Root%20on%20ZFS.html]</a><br></span> 。</p></div>
<div class="paragraph">
<p>冗長構成では、インストーラにより全てのディスクにESP（Extended System Partition）が作成されます。これにより、最初の起動デバイスが故障した場合や、BIOSが特定のディスクからのみ起動可能な場合でも、システムが確実に起動します。</p></div>
<div class="paragraph">
<p>通常動作時にはESPはマウントされたままにされません。これにより、システムクラッシュ時に<span class="monospaced">vfat</span>フォーマットされたESPのファイルシステム破損を防ぐことができ、またプライマリブートデバイスが故障した場合に手動で<span class="monospaced">/etc/fstab</span>を調整する必要がなくなります。</p></div>
<div class="paragraph">
<p><span class="monospaced">proxmox-boot-tool</span>は以下のタスクを処理します：</p></div>
<div class="ulist"><ul>
<li>
<p>
新しいパーティションのフォーマットと設定</p>
</li>
<li>
<p>
新しいカーネルイメージとinitrdイメージを、リストされた全てのESPにコピーおよび設定</p>
</li>
<li>
<p>
カーネルのアップグレード時やその他のメンテナンス作業における設定の同期</p>
</li>
<li>
<p>
同期対象となるカーネルバージョンのリスト管理</p>
</li>
<li>
<p>
特定のカーネルバージョンを起動するようブートローダーを設定（ピンニング）</p>
</li>
</ul></div>
<div class="paragraph">
<p>現在設定されているESPとその状態は、以下のコマンドを実行して確認できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool status</pre>
</div></div>
<div class="paragraph" id="sysboot_proxmox_boot_setup">
<div class="title">同期ESPとして使用する新規パーティションの設定</div><p>パーティションを同期型ESPとしてフォーマットおよび初期化するには、例えばrpool内の故障したvdevを交換した後や、同期メカニズム導入以前に構築された既存システムを変換する場合などに、<span class="monospaced">proxmox-kernel-helperに含まれる</span> <span class="monospaced">proxmox-boot-tool</span>を使用できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">formatコマンドは</span> <span class="monospaced">&amp;lt;partition&amp;gt;</span>をフォーマットします。正しいデバイス/パーティションを指定してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>例えば、空のパーティション<span class="monospaced">/dev/sda2</span>を ESP としてフォーマットするには、以下を実行します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool format /dev/sda2</pre>
</div></div>
<div class="paragraph">
<p>既存のアンマウント済みESP（<span class="monospaced">/dev/sda2</span>）をProxmox VEのカーネル更新同期メカニズムに組み込む設定には、以下を実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool init /dev/sda2</pre>
</div></div>
<div class="paragraph">
<p>または</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool init /dev/sda2 grub</pre>
</div></div>
<div class="paragraph">
<p>Secure Boot サポートなど、<span class="monospaced">systemd-boot</span> ではなく GRUB による初期化を強制する場合：</p></div>
<div class="paragraph">
<p>その後、<span class="monospaced">`/etc/kernel/proxmox-boot-uuids</span>` ファイルには、新たに追加されたパーティションの UUID が記載された新しい行が追加されます。また、`<span class="monospaced">init`</span>コマンドを実行すると、設定済みのすべての ESP の更新が自動的にトリガーされます。</p></div>
<div class="paragraph" id="sysboot_proxmox_boot_refresh">
<div class="title">すべてのESPの設定を更新するには</div><p>起動可能なすべてのカーネルをコピー・設定し、
<span class="monospaced">/etc/kernel/proxmox-boot-uuids</span>にリストされている全ESPを同期状態に保つには、以下のコマンドを実行するだけで結構です:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool リフレッシュ</pre>
</div></div>
<div class="paragraph">
<p>（ルートファイルシステムが<span class="monospaced">ext4</span>または<span class="monospaced">xfs</span>の場合、<span class="monospaced">update-grub</span>systems を実行するのと同じ効果があります）。</p></div>
<div class="paragraph">
<p>カーネルコマンドラインを変更した場合、または全てのカーネルと initrd を同期させたい場合に必要となります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">update-initramfs</span>および<span class="monospaced">apt</span>（必要な場合）は自動的に
更新をトリガーします。</td>
</tr></table>
</div>
<div class="paragraph">
<div class="title"><span class="monospaced">proxmox-boot-tool</span>が考慮するカーネルバージョン</div><p>デフォルトで設定されるカーネルバージョンは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
現在実行中のカーネル</p>
</li>
<li>
<p>
パッケージ更新時に新たにインストールされるバージョン</p>
</li>
<li>
<p>
既にインストール済みの最新カーネル２つ</p>
</li>
<li>
<p>
該当する場合、2つ前のカーネルシリーズの最新版（例：5.0、5.3）</p>
</li>
<li>
<p>
手動で選択されたカーネル</p>
</li>
</ul></div>
<div class="paragraph">
<div class="title">手動でカーネルの起動可能状態を維持する方法</div><p>特定のカーネルおよび initrd イメージを起動可能なカーネルのリストに追加したい場合は、
<span class="monospaced">proxmox-boot-tool kernel add</span> を使用してください。</p></div>
<div class="paragraph">
<p>例えば、ABI バージョン<span class="monospaced">5.0.15-1-pve</span>のカーネルをインストール状態を維持し、
すべての ESP に同期するカーネルリストに追加するには、
以下のコマンドを実行してください:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool カーネル追加 5.0.15-1-pve</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">proxmox-boot-tool kernel list</span>を実行すると、現在ブート用に選択されている
すべてのカーネルバージョンが一覧表示されます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool kernel list
手動で選択されたカーネル:
5.0.15-1-pve

自動で選択されたカーネル:
5.0.12-1-pve
4.15.18-18-pve</pre>
</div></div>
<div class="paragraph">
<p>手動で選択されたカーネルのリストからカーネルを削除するには、<span class="monospaced">proxmox-boot-tool kernel remove</span>を実行してください。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool kernel remove 5.0.15-1-pve</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">上記の手動によるカーネルの追加または削除後、すべての EFI システムパーティション (ESP) を更新するには、<span class="monospaced">proxmox-boot-tool refresh</span>の実行が必須となります。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="sysboot_determine_bootloader_used">3.13.3. 使用されているブートローダーの確認方法
<a class="headerlink" href="#sysboot_determine_bootloader_used" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/boot-grub.png">
<img src="images/screenshot/boot-grub.png" alt="screenshot/boot-grub.png" width=250 style="padding: 0 10px 0 0;float:left;" /></a>
<p>使用されているブートローダーを特定する最も簡単で確実な方法は、
Proxmox VE ノードの起動プロセスを観察することです。</p></div>
<div class="paragraph">
<p>GRUB の青いボックスが表示されるか、
<span class="monospaced">systemd-boot</span> のシンプルな白地に黒の表示が確認できます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/boot-systemdboot.png">
<img src="images/screenshot/boot-systemdboot.png" alt="screenshot/boot-systemdboot.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>稼働中のシステムからブートローダーを特定することは、100%正確ではない可能性があります。
最も確実な方法は、以下のコマンドを実行することです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># efibootmgr -v</pre>
</div></div>
<div class="paragraph">
<p>「EFI変数がサポートされていません」というメッセージが返された場合、GRUBはBIOS/レガシーモードで使用されています。</p></div>
<div class="paragraph">
<p>出力に以下のような行が含まれている場合、GRUB が UEFI モードで使用されています。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>Boot0005* proxmox       [...] ファイル（\EFI\proxmox\grubx64.efi）</pre>
</div></div>
<div class="paragraph">
<p>出力に以下のような行が含まれている場合、<span class="monospaced">systemd-boot</span>が使用されています。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>Boot0006* Linux Boot Manager    [...] File(\EFI\systemd\systemd-bootx64.efi)</pre>
</div></div>
<div class="paragraph">
<p>以下のコマンドを実行することで、</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool status</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">proxmox-boot-tool</span>が設定されているかどうかを確認できます。これはシステムの起動方法を判断する上で有用な指標となります。</p></div>
</div>
<div class="sect3">
<h4 id="sysboot_grub">3.13.4. GRUB
<a class="headerlink" href="#sysboot_grub" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>GRUBは長年にわたりLinuxシステムの起動における事実上の標準であり、
非常に充実したドキュメントが提供されています。
<span class="footnote"><br>[GRUBマニュアル<a href="https://www.gnu.org/software/grub/manual/grub/grub.html">https://www.gnu.org/software/grub/manual/grub/grub.html</a>]<br></span> 。</p></div>
<div class="sect4">
<h5 id="_configuration">設定
<a class="headerlink" href="#_configuration" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>GRUB設定の変更は、デフォルト設定ファイル
<span class="monospaced">/etc/default/grub</span>または<span class="monospaced">/etc/default/grub.d</span> 内の設定スニペットを通じて行います。設定変更後に設定ファイルを再生成するには、<span class="footnote"><br> を実行してください。
</span><span class="footnote">[<span class="monospaced">proxmox-boot-tool</span>を使用しているシステムでは、<span class="monospaced">update-grub</span> 実行時に<span class="monospaced">proxmox-boot-tool
refresh が</span>呼び出されます。]<br></span></p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># update-grub</pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="sysboot_systemd_boot">3.13.5. Systemd-boot
<a class="headerlink" href="#sysboot_systemd_boot" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">systemd-bootは</span>軽量なEFIブートローダーです。カーネルとinitrdイメージを、
インストール先のEFIサービスパーティション（ESP）から直接読み込みます。
ESPから直接カーネルをロードする主な利点は、ストレージアクセス用ドライバを
再実装する必要がない点です。Proxmox VEでは<a href="#sysboot_proxmox_boot_tool"><span class="monospaced">proxmox-boot-tool</span></a>を使用し、
ESP上の設定を同期状態に保ちます。</p></div>
<div class="sect4">
<h5 id="sysboot_systemd_boot_config">設定<a class="headerlink" href="#sysboot_systemd_boot_config" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">systemd-boot は</span>、EFI システムパーティション (ESP) のルートディレクトリにある<span class="monospaced">loader/loader.conf</span>ファイルで設定されます。詳細は<span class="monospaced">loader.conf(5)</span>マニュアルページをご参照ください。</p></div>
<div class="paragraph">
<p>各ブートローダーエントリは、
<span class="monospaced">loader/entries/</span>ディレクトリ内の個別のファイルに配置されます。</p></div>
<div class="paragraph">
<p>entry.conf の例は以下のようになります（<span class="monospaced">/</span>は ESP のルートを指します）：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>title    Proxmox
version  5.0.15-1-pve
options   root=ZFS=rpool/ROOT/pve-1 boot=zfs
linux    /EFI/proxmox/5.0.15-1-pve/vmlinuz-5.0.15-1-pve
initrd   /EFI/proxmox/5.0.15-1-pve/initrd.img-5.0.15-1-pve</pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="sysboot_edit_kernel_cmdline">3.13.6. カーネルコマンドラインの編集
<a class="headerlink" href="#sysboot_edit_kernel_cmdline" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>使用しているブートローダーに応じて、以下の場所でカーネルコマンドラインを変更できます：</p></div>
<div class="paragraph">
<div class="title">GRUB</div><p>カーネルコマンドラインは、ファイル<span class="monospaced">/etc/default/grub</span> 内の変数
<span class="monospaced">GRUB_CMDLINE_LINUX_DEFAULT</span>に記述する必要があります。
<span class="monospaced">update-grub</span>を実行すると、その内容が<span class="monospaced">/boot/grub/grub.cfg</span> 内の
すべての<span class="monospaced">linux</span>エントリに追加されます。</p></div>
<div class="paragraph">
<div class="title">Systemd-boot</div><p>カーネルコマンドラインは、<span class="monospaced">/etc/kernel/cmdline</span> ファイルに1行で記述する必要があります。
変更を適用するには、<span class="monospaced">proxmox-boot-tool refresh</span> を実行してください。これにより、
<span class="monospaced">loader/entries/proxmox-*.conf</span> 内のすべての設定ファイルの<span class="monospaced">オプション</span>行として設定されます。</p></div>
<div class="paragraph">
<p>カーネルパラメータの完全なリストは、
<em>https://www.kernel.org/doc/html/v&amp;lt;YOUR-KERNEL-VERSION&amp;gt;/admin-guide/kernel-parameters.html</em>
でご確認いただけます。
&amp;lt;YOUR-KERNEL-VERSION&amp;gt; はメジャー・マイナーバージョンで置き換えてください。
例えばバージョン 6.5 ベースのカーネルの場合、URL は以下のようになります：
<a href="https://www.kernel.org/doc/html/v6.5/admin-guide/kernel-parameters.html">https://www.kernel.org/doc/html/v6.5/admin-guide/kernel-parameters.html</a></p></div>
<div class="paragraph">
<p>カーネルバージョンは、ウェブインターフェース（<em>Node → Summary</em>）で確認するか、
以下のコマンドを実行して確認できます：
`nmap 192.16.1.10.0 192.</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># uname -r</pre>
</div></div>
<div class="paragraph">
<p>出力の先頭にある最初の2つの数字をご利用ください。</p></div>
</div>
<div class="sect3">
<h4 id="sysboot_kernel_pin">3.13.7. 次回起動時のカーネルバージョンの上書き
<a class="headerlink" href="#sysboot_kernel_pin" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>現在デフォルト設定されていないカーネルを選択するには、以下のいずれかの方法をご利用ください：</p></div>
<div class="ulist"><ul>
<li>
<p>
ブートプロセスの開始時に表示されるブートローダーメニューをご利用ください。
プロキシモックス・ブートツールを使用して、システムを特定のカーネルバージョンに固定することができます。
これは一時的に、またはピン設定が解除</p>
</li>
<li>
<p>
<span class="monospaced">プロクモックス・ブートツール</span>を使用して、システムを特定のカーネルバージョンに<span class="monospaced">固定してください</span>。
  これは一時的に、または永続的に（固定設定が解除されるまで）行うことが可能です。</p>
</li>
</ul></div>
<div class="paragraph">
<p>これにより、新しいカーネルバージョンとハードウェア間の互換性問題を回避できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このような固定は、最新のカーネルのすべての現在のセキュリティパッチがシステムにも適用されるよう、できるだけ早く解除されるべきです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>例：バージョン<span class="monospaced">5.15.30-1-pve</span>を起動時に恒久的に選択するには、
以下のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool カーネル pin 5.15.30-1-pve</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">この固定機能は、ESPの内容を同期するために<span class="monospaced">proxmox-boot-tool</span>を使用しているシステムだけでなく、すべてのProxmox VEシステムで動作します。お使いのシステムが同期<span class="monospaced">にproxmox-boot-tool</span>を使用していない場合、最終段階での<span class="monospaced">proxmox-boot-toolの更新</span>呼び出しをスキップすることも可能です。</td>
</tr></table>
</div>
<div class="paragraph">
<p>また、次回システム起動時のみ特定のカーネルバージョンを起動するよう設定することも可能です。
これは、更新されたカーネルが当初バージョンを<span class="monospaced">固定した</span>原因となった問題を解決したかどうかをテストする場合などに有用です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool kernel pin 5.15.30-1-pve --next-boot</pre>
</div></div>
<div class="paragraph">
<p>固定されたバージョンの設定を解除するには、<span class="monospaced">unpin</span>サブコマンドを使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool kernel unpin</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">unpin コマンドには</span> <span class="monospaced">--next-boot</span>オプションも存在しますが、これは<span class="monospaced">--next-boot</span> で設定された固定バージョンを解除するために使用されます。この処理は起動時に自動的に行われるため、手動で実行する意味はほとんどありません。</p></div>
<div class="paragraph">
<p>固定バージョンを設定または解除した後は、<span class="monospaced">refreshサブコマンド</span>を実行してESP上のコンテンツと設定を同期させる必要があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">プロキシモックス・ブートツールで</span>管理されているシステムについては、ツールを対話形式で呼び出すと、自動的に実行するよう促されます。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool refresh</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="sysboot_secure_boot">3.13.8. セキュアブート
<a class="headerlink" href="#sysboot_secure_boot" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE 8.1 以降では、署名付きパッケージと<span class="monospaced">proxmox-boot-tool</span> への統合により、
セキュアブートが標準でサポートされています。</p></div>
<div class="paragraph">
<p>セキュアブートを機能させるには、以下のパッケージが必要です。
「proxmox-secure-boot-support」メタパッケージを使用すれば、
これらをまとめてインストールできます。</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">shim-signed</span>(Microsoft 署名付き shim ブートローダー)</p>
</li>
<li>
<p>
<span class="monospaced">shim-helpers-amd64-signed</span>(Proxmox による署名付きフォールバックブートローダーおよび MOKManager)</p>
</li>
<li>
<p>
<span class="monospaced">grub-efi-amd64-signed</span>(Proxmox により署名された GRUB EFI ブートローダー)</p>
</li>
<li>
<p>
<span class="monospaced">proxmox-kernel-6.X.Y-Z-pve-signed</span>(カーネルイメージ、Proxmox により署名済み)</p>
</li>
</ul></div>
<div class="paragraph">
<p>標準でサポートされているブートローダーは GRUB のみとなります。他のブートローダーは
現時点でセキュアブートコード署名に対応しておりません。</p></div>
<div class="paragraph">
<p>Proxmox VE の新規インストール時には、上記のパッケージがすべて自動的に含まれます。</p></div>
<div class="paragraph">
<p>セキュアブートの動作詳細や設定のカスタマイズ方法については、
<a href="https://pve.proxmox.com/wiki/Secure_Boot_Setup">弊社のWikiでご</a>確認いただけます。</p></div>
<div class="sect4">
<h5 id="_switching_an_existing_installation_to_secure_boot">既存のインストール環境をセキュアブートへ移行する方法
<a class="headerlink" href="#_switching_an_existing_installation_to_secure_boot" title="Permalink to this heading"></a></h5>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">正しく設定されない場合、起動不能なインストール環境となる可能性があります。ホストの再インストール時には、利用可能な場合、追加操作なしでSecure Bootが自動的に設定されます。<strong>Proxmox VEホストの正常動作が確認済みで十分にテストされたバックアップを必ずお持ちください。</strong></td>
</tr></table>
</div>
<div class="paragraph">
<p>既存の UEFI インストール環境は、必要に応じてセキュアブートへ切り替えることが可能です。
Proxmox VE を最初から再インストールする必要はありません。</p></div>
<div class="paragraph">
<p>まず、システム全体が最新の状態であることをご確認ください。次に、
<span class="monospaced">proxmox-secure-boot-support を</span>インストールしてください。GRUB は、デフォルトの shim 経由で起動するために必要な EFI ブートエントリを自動的に作成します。</p></div>
<div class="paragraph">
<div class="title">systemd-boot</div><p><span class="monospaced">systemd-boot</span>をブートローダーとして使用している場合（
<a href="#sysboot_determine_bootloader_used">使用されているブートローダーの確認
を参照</a>）、追加の設定が必要となります。これは、Proxmox VE が ZFS-on-root でインストールされた場合にのみ該当します。</p></div>
<div class="paragraph">
<p>後者を確認するには、以下を実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># findmnt /</pre>
</div></div>
<div class="paragraph">
<p>ホストが実際にルートファイルシステムとしてZFSを使用している場合、<span class="monospaced">FSTYPE</span>列には<span class="monospaced">zfs</span>と表示されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ターゲット ソース           FSTYPE オプション
/      rpool/ROOT/pve-1 zfs    rw,relatime,xattr,noacl,casesensitive</pre>
</div></div>
<div class="paragraph">
<p>次に、適切な潜在的なESP（EFIシステムパーティション）を見つける必要があります。
<span class="monospaced">これはlsblkコマンドを使用して</span>以下のように実行できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lsblk -o +FSTYPE</pre>
</div></div>
<div class="paragraph">
<p>出力は以下のような形式になります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS FSTYPE
sda      8:0    0   32G  0 disk
├─sda1   8:1    0 1007K  0 パーティション
├─sda2   8:2    0  512M  0 パーティション             vfat
└─sda3   8:3    0 31.5G  0 パーティション             zfs_member
sdb      8:16   0   32G  0 ディスク
├─sdb1   8:17   0 1007K  0 パーティション
├─sdb2   8:18   0  512M  0 パーティション             vfat
└─sdb3   8:19   0 31.5G  0 パーティション             zfs_member</pre>
</div></div>
<div class="paragraph">
<p>この例では、パーティション<span class="monospaced">sda2</span>と<span class="monospaced">sdb2</span>が対象となります。これらはサイズが 512M であり、<span class="monospaced">FSTYPE</span>が<span class="monospaced">vfat</span> である点（この場合は ZFS RAID-1 構成上）で識別できます。</p></div>
<div class="paragraph">
<p>これらのパーティションは、<span class="monospaced">proxmox-boot-tool</span> を使用して GRUB 経由で起動できるよう適切に設定する必要があります。
このコマンド（例として<span class="monospaced">sda2</span>を使用）は、個々の ESP ごとに別々に実行する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-boot-tool init /dev/sda2 grub</pre>
</div></div>
<div class="paragraph">
<p>その後、以下のコマンドを実行して設定の整合性を確認できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># efibootmgr -v</pre>
</div></div>
<div class="paragraph">
<p>このリストには、以下のようなエントリが含まれているはずです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[..]
Boot0009* proxmox       HD(2,GPT,..,0x800,0x100000)/File(\EFI\proxmox\shimx64.efi)
[..]</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">従来の<span class="monospaced">systemd-boot</span>ブートローダーは維持されますが、GRUB が優先されます。これにより、何らかの理由でセキュアブートモードでの GRUB 起動が失敗した場合でも、セキュアブートを無効化した状態で<span class="monospaced">systemd-boot</span>による起動が可能です。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ホストを再起動し、UEFIファームウェア設定ユーティリティでセキュアブートを有効にすることができます。
再起動後、UEFIファームウェアのブートメニューに「proxmox」という新しい項目が表示され、事前署名済みEFI</p></div>
<div class="paragraph">
<p>再起動後、UEFIファームウェアのブートメニューに「<span class="monospaced">proxmox」</span>という新しい項目が表示され、
事前署名済みEFIシムを使用して起動できるようになります。</p></div>
<div class="paragraph">
<p>何らかの理由でUEFIブートメニュー<span class="monospaced">にproxmoxエントリ</span>が見つからない場合、
ファームウェアが対応している場合は、<span class="monospaced">\EFI\proxmox\shimx64.efiファイルをカスタム</span>ブートエントリとして追加することで、
手動で追加を試みることができます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">一部のUEFIファームウェアでは、再起動<span class="monospaced">時にProxmoxブートオプションが</span>消えることが知られています。
これは、<span class="monospaced">Proxmoxブートエントリが</span>ディスク上のGRUBインストールを指している場合で、
そのディスク自体がブートオプションとして設定されていない場合に発生する可能性があります。
可能であれば、UEFIファームウェア設定ユーティリティでそのディスクをブートオプションとして追加し、
<span class="monospaced">再度proxmox-boot-tool</span>を実行してみてください。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">カスタムキーを登録するには、付属の
<a href="https://pve.proxmox.com/wiki/Secure_Boot_Setup#Setup_instructions_for_db_key_variant">Secure
Boot Wikiページ</a>をご参照ください。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="_using_dkms_third_party_modules_with_secure_boot">セキュアブート環境でのDKMS/サードパーティモジュールの使用方法<a class="headerlink" href="#_using_dkms_third_party_modules_with_secure_boot" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>セキュアブートが有効なシステムでは、カーネルは信頼された鍵で署名されていないモジュールの読み込みを拒否します。カーネルパッケージに同梱されるデフォルトのモジュールセットは、カーネルイメージに埋め込まれた一時的な鍵で署名されており、その特定のカーネルイメージバージョンによって信頼されています。</p></div>
<div class="paragraph">
<p>DKMSでビルドされたモジュールや手動でビルドされたモジュールなど、他のモジュールをロードするには、
Secure Bootスタックが信頼する鍵で署名されている必要があります。これを実現する最も簡単な方法は、
<span class="monospaced">mokutilを使用して</span>それらをマシン所有者鍵（<span class="monospaced">MOK</span>）として登録することです。</p></div>
<div class="paragraph">
<p><span class="monospaced">dkmsツールは自動的に</span>鍵ペアと証明書を生成し、
<span class="monospaced">/var/lib/dkms/mok.key</span>および<span class="monospaced">/var/lib/dkms/mok.pub</span>に配置します。
これにより、ビルドおよびインストールされるカーネルモジュールへの署名が行われます。</p></div>
<div class="paragraph">
<p>証明書の内容は次のコマンドで確認できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># openssl x509 -in /var/lib/dkms/mok.pub -noout -text</pre>
</div></div>
<div class="paragraph">
<p>以下のコマンドでシステムに登録できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># mokutil --import /var/lib/dkms/mok.pub
パスワードを入力してください:
パスワードを再入力してください:</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">mokutilコマンドは</span>（一時的な）パスワードを2回要求します。このパスワードは、
プロセスの次のステップでもう一度入力する必要があります。システムを再起動すると、自動的に<span class="monospaced">MOKManager</span>EFI バイナリが起動します。
これにより、鍵/証明書を検証し、<span class="monospaced">mokutil</span> による登録開始時に選択したパスワードを使用して登録を確認できます。
その後、カーネルは DKMS で構築されたモジュール（登録済みの<span class="monospaced">MOK</span> で署名されたもの）のロードを許可するはずです。
必要に応じて、<span class="monospaced">MOK</span>を使用してカスタム EFI バイナリやカーネルイメージに署名することも可能です。</p></div>
<div class="paragraph">
<p>DKMSで管理されていないカスタム/サードパーティ製モジュールに対しても同様の手順が適用可能ですが、
その場合は鍵/証明書の生成および署名ステップを手動で行う必要があります。</p></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="kernel_samepage_merging">
<span>3.14. カーネル・セームページ・マージング（KSM）</span>
<a class="headerlink" href="#kernel_samepage_merging" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>カーネル・セームページ・マージング（KSM）は、Linux カーネルが提供するオプションのメモリ重複排除機能であり、Proxmox VE ではデフォルトで有効化されています。KSM は、物理メモリページの範囲をスキャンして同一の内容を検出し、それらにマップされている仮想ページを特定することで機能します。同一のページが見つかった場合、対応する仮想ページはすべて同じ物理ページを指すように再マッピングされ、古いページは解放されます。仮想ページは「コピーオンライト」としてマークされるため、それらへの書き込みはメモリの新しい領域に書き込まれ、共有されている物理ページはそのまま維持されます。</p></div>
<div class="sect3">
<h4 id="_implications_of_ksm">3.14.1. KSM の影響
<a class="headerlink" href="#_implications_of_ksm" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>KSMは仮想化環境におけるメモリ使用量を最適化できます。これは、類似のオペレーティングシステムやワークロードを実行する複数の仮想マシンが、多くの共通メモリページを共有する可能性があるためです。</p></div>
<div class="paragraph">
<p>しかしながら、KSMはメモリ使用量を削減できる一方で、セキュリティ上のリスクも伴います。
具体的には、仮想マシンをサイドチャネル攻撃に晒す可能性があります。
研究により、KSMの特定の特性を悪用することで、同一ホスト上の別の仮想マシンから
稼働中の仮想マシンに関する情報を推測できることが示されています。</p></div>
<div class="paragraph">
<p>したがって、Proxmox VEを使用してホスティングサービスを提供されている場合、ユーザーに追加のセキュリティを提供するため、KSMを無効化することをご検討ください。
さらに、KSMの無効化が法的要件となる可能性があるため、お住まいの国の規制をご確認ください。</p></div>
</div>
<div class="sect3">
<h4 id="_disabling_ksm">3.14.2. KSM の無効化
<a class="headerlink" href="#_disabling_ksm" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>KSMが有効かどうかを確認するには、以下の出力をご確認ください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># systemctl status ksmtuned</pre>
</div></div>
<div class="paragraph">
<p>有効な場合、以下のコマンドで即時無効化が可能です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># systemctl disable --now ksmtuned</pre>
</div></div>
<div class="paragraph">
<p>最後に、現在マージされているすべてのページを解除するには、以下を実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># echo 2 &amp;gt; /sys/kernel/mm/ksm/run</pre>
</div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_gui">
4. グラフィカルユーザーインターフェース
<a class="headerlink" href="#chapter_gui" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VEはシンプルです。別途管理ツールをインストールする必要はなく、
すべてウェブブラウザ（最新版のFirefoxまたはGoogle Chromeが推奨されます）から
操作が可能です。ゲストコンソールへのアクセスには、
組み込みのHTML5コンソールが使用されます。代替手段として、
<a href="https://www.spice-space.org/">SPICEも</a>ご利用いただけます。</p></div>
<div class="paragraph">
<p>Proxmoxクラスタファイルシステム（pmxcfs）を採用しているため、
どのノードに接続してもクラスタ全体の管理が可能です。各ノードが
クラスタ全体を管理できます。専用の管理ノードは不要です。</p></div>
<div class="paragraph">
<p>ウェブベースの管理インターフェースは、最新のブラウザであればどれでもご利用いただけます。Proxmox VEがモバイルデバイスからの接続を検知した場合、よりシンプルなタッチ操作対応のユーザーインターフェースへ自動的にリダイレクトされます。</p></div>
<div class="paragraph">
<p>ウェブインターフェースは<a href="https://youripaddress:8006">https://youripaddress:8006</a>からアクセス可能です
（デフォルトのログイン名は<em>root</em>、パスワードはインストールプロセス中に指定されます）。</p></div>
<div class="sect2">
<h3 id="_features">
<span>4.1. 機能</span>
<a class="headerlink" href="#_features" title="Permalink to this heading"></a></h3>
<div class="ulist"><ul>
<li>
<p>
Proxmox VEクラスターのシームレスな統合と管理</p>
</li>
<li>
<p>
リソースの動的更新のためのAJAX技術</p>
</li>
<li>
<p>
SSL暗号化（https）による
すべての仮想マシンおよびコンテナへの安全なアクセス</p>
</li>
<li>
<p>
高速検索駆動インターフェースにより、数百台、
 おそらく数千台もの仮想マシンを処理可能</p>
</li>
<li>
<p>
安全なHTML5コンソールまたはSPICE</p>
</li>
<li>
<p>
すべてのオブジェクト（仮想マシン、ストレージ、ノードなど）に対する
ロールベースの権限管理</p>
</li>
<li>
<p>
複数の認証ソース（例：ローカル、MS ADS、LDAPなど）のサポート</p>
</li>
<li>
<p>
二要素認証（OATH、Yubikey）</p>
</li>
<li>
<p>
ExtJS 7.x JavaScript フレームワークを基盤としております</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_login">
<span>4.2.</span>ログイン
<a class="headerlink" href="#_login" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-login-window.png">
<img src="images/screenshot/gui-login-window.png" alt="screenshot/gui-login-window.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>サーバーに接続すると、まずログイン画面が表示されます。
Proxmox VEは様々な認証バックエンド（<em>Realm</em>）をサポートしており、
ここで言語を選択できます。GUIは20以上の言語に対応しています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">画面下部のチェックボックスを選択することで、
ユーザー名をクライアント側に保存できます。
これにより次回ログイン時の入力が省けます。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_gui_overview">
<span>4.3. GUI</span>概要
<a class="headerlink" href="#_gui_overview" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-summary.png">
<img src="images/screenshot/gui-datacenter-summary.png" alt="screenshot/gui-datacenter-summary.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VEのユーザーインターフェースは、4つの領域で構成されています。</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
ヘッダー<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
上部には、ステータス情報が表示され、主要な操作を行うためのボタンが配置されています。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
リソースツリー<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
左側には、特定のオブジェクトを選択できるナビゲーションツリーが表示されます。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
コンテンツパネル<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
中央領域。選択されたオブジェクトの設定オプションとステータスが表示されます。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ログパネル<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
下部には、直近のタスクのログエントリが表示されます。
これらのログエントリをダブルクリックすると詳細を確認したり、
実行中のタスクを中止したりできます。</p>
</td>
</tr>
</table></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">リソースツリーとログパネルのサイズを縮小・拡大したり、ログパネルを完全に非表示にしたりできます。これは、小さな画面で作業する際、他のコンテンツを表示するスペースを確保したい場合に便利です。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_header">4.3.1. ヘッダー
<a class="headerlink" href="#_header" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>左上にはまずProxmoxのロゴが表示されます。
その隣には現在稼働中のProxmox VEのバージョンが表示されます。
近くの検索バーでは特定のオブジェクト（VM、コンテナ、ノードなど）を
検索できます。これはリソースツリーからオブジェクトを選択するよりも
場合によっては迅速です。</p></div>
<div class="paragraph">
<p>ヘッダーの右側には4つのボタンが配置されています：</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
ドキュメント<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
参照ドキュメントを表示する新しいブラウザウィンドウが開きます。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
仮想マシンの作成<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
仮想マシン作成ウィザードを開きます。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
CTの作成<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
コンテナ作成ウィザードを開きます。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ユーザーメニュー<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
現在ログイン中のユーザーの識別情報を表示します。
クリックするとユーザー固有のオプションメニューが開きます。</p>
<div class="paragraph">
<p>ユーザーメニューには、ローカルのUI設定を行う「<em>マイ設定」</em>ダイアログがございます。
その下には、二要素認証（<em>TFA</em>）<em>とパスワード自己管理の</em>ショートカットが配置されております。
また、<em>言語や</em> <em>カラースキーム</em>を変更するオプションもご利用いただけます<em>。</em>
最後に、メニューの最下部には<em>ログアウトオプション</em>がございます。</p></div>
</td>
</tr>
</table></div>
</div>
<div class="sect3">
<h4 id="gui_my_settings">4.3.2. マイ設定
<a class="headerlink" href="#gui_my_settings" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-my-settings.png">
<img src="images/screenshot/gui-my-settings.png" alt="screenshot/gui-my-settings.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p><em>「マイ設定」</em>ウィンドウでは、ローカルに保存される設定を調整できます。これには<em>「ダッシュボードストレージ」</em>が含まれ、データセンター概要に表示される合計容量に特定ストレージを含めるか除外するかを選択できます。いずれのストレージもチェックされていない場合、合計は全ストレージの合計となり、すべてのストレージを有効にした場合と同じ結果となります。</p></div>
<div class="paragraph">
<p>ダッシュボード設定の下には、保存されたユーザー名とそれをクリアするボタン、
およびGUI内のすべてのレイアウトをデフォルトにリセットするボタンがあります。</p></div>
<div class="paragraph">
<p>右側には<em>xterm.js 設定</em>があります。以下のオプションが含まれます：</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
フォントファミリー <br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
xterm.jsで使用するフォント（例：Arial）。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
フォントサイズ<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
使用する推奨フォントサイズです。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
文字間隔 <br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
テキスト内の文字間隔を広くしたり狭くしたりします。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
行間<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
行の絶対的な高さを指定します。</p>
</td>
</tr>
</table></div>
</div>
<div class="sect3">
<h4 id="_resource_tree">4.3.3. リソースツリー
<a class="headerlink" href="#_resource_tree" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>こちらがメインナビゲーションツリーとなります。ツリー上部では、
あらかじめ定義されたビューを選択することができ、
選択に応じて下部のツリー構造が変化します。
デフォルトのビューは<strong>サーバービューであり</strong>、
以下のオブジェクトタイプを表示します：</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
データセンター<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
クラスタ全体の設定を含みます（すべてのノードに関連します）。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ノード<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
クラスタ内のホストを表し、ゲストが実行されます。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ゲスト<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
仮想マシン、コンテナ、およびテンプレート。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ストレージ<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
データストレージ。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
プール<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
管理を簡素化するため、プールを使用してゲストをグループ化することが可能です。</p>
</td>
</tr>
</table></div>
<div class="paragraph">
<p>以下のビュータイプが利用可能です：</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
サーバービュー<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ノードごとにグループ化された、あらゆる種類のオブジェクトを表示します。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
フォルダ表示<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
オブジェクトタイプ別にグループ化された、あらゆる種類のオブジェクトを表示します。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
プール表示<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
プールごとにグループ化された仮想マシンとコンテナを表示します。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
タグ表示<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
タグごとにグループ化された仮想マシンとコンテナを表示します。</p>
</td>
</tr>
</table></div>
</div>
<div class="sect3">
<h4 id="_log_panel">4.3.4. ログパネル
<a class="headerlink" href="#_log_panel" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ログパネルの主な目的は、クラスタ内で現在進行中の処理を表示することです。
新しい仮想マシンの作成などの操作はバックグラウンドで実行され、
このようなバックグラウンドジョブを「<em>タスク」</em>と呼びます。</p></div>
<div class="paragraph">
<p>タスクからの出力はすべて個別のログファイルに保存されます。
タスクログエントリをダブルクリックするだけで、
そのログを閲覧できます。また、実行中のタスクを
ここで中止することも可能です。</p></div>
<div class="paragraph">
<p>なお、こちらでは全クラスターノードからの最新タスクを表示しております。
そのため、他のユーザーが別のクラスターノードで作業している状況を
リアルタイムでご確認いただけます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ログパネルでは、リストを簡潔に保つため、古いタスクや完了したタスクは削除しております。
ただし、それらのタスクはノードパネル内の「<em>タスク履歴</em>」から引き続きご確認いただけます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>短時間で完了する一部の操作は、単にログを全クラスターメンバーに送信します。
それらのメッセージは<em>クラスターログ</em>パネルで確認できます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_content_panels">
<span>4.4. コンテンツパネル</span>
<a class="headerlink" href="#_content_panels" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>リソースツリーから項目を選択すると、対応するオブジェクトの設定および状態情報がコンテンツパネルに表示されます。以下のセクションでは、この機能の概要を簡潔にご説明いたします。より詳細な情報につきましては、リファレンスドキュメントの該当章をご参照ください。</p></div>
<div class="sect3">
<h4 id="_datacenter">4.4.1. データセンター
<a class="headerlink" href="#_datacenter" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-search.png">
<img src="images/screenshot/gui-datacenter-search.png" alt="screenshot/gui-datacenter-search.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>データセンターレベルでは、クラスタ全体の設定や情報にアクセスできます。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>検索：</strong>クラスタ全体のノード、仮想マシン、コンテナ、ストレージデバイス、プールを対象に検索を実行します。</p>
</li>
<li>
<p>
<strong>概要:</strong>クラスタの健全性とリソース使用状況の概要を簡潔に表示します。</p>
</li>
<li>
<p>
<strong>クラスター：</strong>クラスターの作成または参加に必要な機能と情報を提供します。</p>
</li>
<li>
<p>
<strong>オプション：</strong>クラスタ全体のデフォルト設定を表示・管理します。</p>
</li>
<li>
<p>
<strong>ストレージ：</strong>クラスタストレージを管理するためのインターフェースを提供します。</p>
</li>
<li>
<p>
<strong>バックアップ:</strong>バックアップジョブのスケジュール設定を行います。これはクラスタ全体で動作するため、スケジュール設定時に仮想マシンやコンテナがクラスタ内のどこにあるかは問題になりません。</p>
</li>
<li>
<p>
<strong>レプリケーション:</strong>レプリケーションジョブを確認および管理します。</p>
</li>
<li>
<p>
<strong>権限:</strong>ユーザー、グループ、APIトークンの権限、ならびにLDAP、
   MS-AD、二要素認証を管理します。</p>
</li>
<li>
<p>
<strong>HA:</strong>Proxmox VE の高可用性（HA）を管理します。</p>
</li>
<li>
<p>
<strong>ACME:</strong>サーバーノード向けにACME（Let's Encrypt）証明書の設定を行います。</p>
</li>
<li>
<p>
<strong>ファイアウォール：</strong>クラスター全体のProxmoxファイアウォール設定およびテンプレート作成を行います。</p>
</li>
<li>
<p>
<strong>メトリックサーバー：</strong>Proxmox VE用の外部メトリックサーバーを定義します。</p>
</li>
<li>
<p>
<strong>通知:</strong>Proxmox VE の通知動作と送信先を設定します。</p>
</li>
<li>
<p>
<strong>サポート：</strong>お客様のサポート契約に関する情報を表示します。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_nodes">4.4.2. ノード
<a class="headerlink" href="#_nodes" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-summary.png">
<img src="images/screenshot/gui-node-summary.png" alt="screenshot/gui-node-summary.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>クラスタ内のノードは、このレベルで個別に管理できます。</p></div>
<div class="paragraph">
<p>上部ヘッダーには、<em>再起動</em>、<em>シャットダウン</em>、<em>シェル</em>、<em>一括操作</em>、<em>ヘルプなどの</em>便利なボタンが配置されています。
<em>シェル</em> <em>にはnoVNC</em>、<em>SPICE</em>、<em>xterm.jsの</em>オプションがあります。
<em>一括操作には</em> <em>一括起動</em>、<em>一括シャットダウン</em>、<em>一括移行の</em>オプションがあります。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>検索:</strong>ノード内の仮想マシン、コンテナ、ストレージデバイス、プールを検索します。</p>
</li>
<li>
<p>
<strong>概要：</strong>ノードのリソース使用状況の概要を表示します。</p>
</li>
<li>
<p>
<strong>メモ:</strong> <a href="#markdown_basics">Markdown構文</a>でカスタムコメントを記述します。</p>
</li>
<li>
<p>
<strong>シェル:</strong>ノードのシェルインターフェースにアクセスします。</p>
</li>
<li>
<p>
<strong>システム:</strong>ネットワーク、DNS、時刻設定の構成、およびシステムログへのアクセスを行います。</p>
</li>
<li>
<p>
<strong>更新:</strong>システムのアップグレードおよび利用可能な新規パッケージの確認を行います。</p>
</li>
<li>
<p>
<strong>ファイアウォール:</strong>特定ノードの Proxmox ファイアウォールを管理します。</p>
</li>
<li>
<p>
<strong>ディスク:</strong>接続されているディスクの概要を確認し、使用方法を管理します。</p>
</li>
<li>
<p>
<strong>Ceph:</strong>ホストにCephサーバーをインストールされている場合のみご利用いただけます。
   この場合、Cephクラスターの管理やステータスの確認がこちらで行えます。</p>
</li>
<li>
<p>
<strong>レプリケーション:</strong>レプリケーションジョブを確認・管理します。</p>
</li>
<li>
<p>
<strong>タスク履歴:</strong>過去のタスクの一覧を確認できます。</p>
</li>
<li>
<p>
<strong>サブスクリプション：</strong>サブスクリプションキーをアップロードし、サポートケースで使用するシステムレポートを生成します。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_guests">4.4.3. ゲスト
<a class="headerlink" href="#_guests" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-summary.png">
<img src="images/screenshot/gui-qemu-summary.png" alt="screenshot/gui-qemu-summary.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>ゲストには2種類あり、いずれもテンプレートに変換することが可能です。
一つはカーネルベース仮想マシン（KVM）、もう一つはLinuxコンテナ（LXC）です。
これらの操作手順はほぼ共通しており、一部のオプションのみが異なります。</p></div>
<div class="paragraph">
<p>各種ゲスト管理インターフェースにアクセスするには、左側のメニューから
仮想マシンまたはコンテナを選択してください。</p></div>
<div class="paragraph">
<p>ヘッダーには、電源管理、移行、コンソールアクセスとタイプ、クローン作成、HA（高可用性）、ヘルプなどの項目に対するコマンドが含まれています。
これらのボタンの中にはドロップダウンメニューを備えたものもあります。例えば、<em>「シャットダウン」には</em>その他の電源オプションも含まれており、<em>「コンソール」</em>には異なるコンソールタイプ（<em>SPICE</em>、<em>noVNC</em>、<em>xterm.js</em>）が含まれています。</p></div>
<div class="paragraph">
<p>右側のパネルには、左側のメニューから選択された項目に対応するインターフェースが表示されます。</p></div>
<div class="paragraph">
<p>利用可能なインターフェースは以下の通りです。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>概要:</strong>VMの活動概要と、<a href="#markdown_basics">Markdown構文による</a>コメント用の<span class="monospaced">「メモ」</span>フィールドを提供します。</p>
</li>
<li>
<p>
<strong>コンソール：</strong>VM/コンテナ用の対話型コンソールにアクセスします。</p>
</li>
<li>
<p>
<strong>(KVM)ハードウェア:</strong>KVM VM が利用可能なハードウェアを定義します。</p>
</li>
<li>
<p>
<strong>(LXC)リソース:</strong>LXCが利用可能なシステムリソースを定義します。</p>
</li>
<li>
<p>
<strong>(LXC)ネットワーク:</strong>コンテナのネットワーク設定を構成します。</p>
</li>
<li>
<p>
<strong>(LXC)DNS:</strong>コンテナのDNS設定を構成します。</p>
</li>
<li>
<p>
<strong>オプション:</strong>ゲストオプションを管理します。</p>
</li>
<li>
<p>
<strong>タスク履歴：</strong>選択したゲストに関連する過去のタスクをすべて表示します。</p>
</li>
<li>
<p>
<strong>(KVM) モニター:</strong>KVM プロセスとの対話型通信インターフェースです。</p>
</li>
<li>
<p>
<strong>バックアップ:</strong>システムのバックアップを作成および復元します。</p>
</li>
<li>
<p>
<strong>レプリケーション:</strong>選択したゲストのレプリケーションジョブを表示および管理します。</p>
</li>
<li>
<p>
<strong>スナップショット：</strong>仮想マシンのスナップショットを作成および復元します。</p>
</li>
<li>
<p>
<strong>ファイアウォール：</strong>仮想マシンレベルでのファイアウォール設定を行います。</p>
</li>
<li>
<p>
<strong>権限：</strong>選択したゲストの権限を管理します。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_storage">4.4.4. ストレージ
<a class="headerlink" href="#_storage" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-storage-summary-local.png">
<img src="images/screenshot/gui-storage-summary-local.png" alt="screenshot/gui-storage-summary-local.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>ゲストインターフェースと同様に、ストレージインターフェースは左側に特定のストレージ要素のメニュー、
右側にそれらの要素を管理するインターフェースで構成されています。</p></div>
<div class="paragraph">
<p>このビューでは、2つのパーティションによる分割表示を採用しております。
左側にはストレージオプションが表示され、
右側には選択されたオプションの内容が表示されます。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>概要：</strong>ストレージに関する重要な情報（種類、使用状況、保存されているコンテンツなど）を表示します。</p>
</li>
<li>
<p>
<strong>コンテンツ：</strong>ストレージが保存する各コンテンツタイプ（例：バックアップ、ISOイメージ、CTテンプレート）ごとのメニュー項目です。</p>
</li>
<li>
<p>
<strong>権限：</strong>ストレージの権限を管理します。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_pools">4.4.5. プール
<a class="headerlink" href="#_pools" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-pool-summary-development.png">
<img src="images/screenshot/gui-pool-summary-development.png" alt="screenshot/gui-pool-summary-development.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>同様に、プールビューも2つの領域で構成されています：左側のメニューと、
右側の各メニュー項目に対応するインターフェースです。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>概要：</strong>プールの説明を表示します。</p>
</li>
<li>
<p>
<strong>メンバー:</strong>プールメンバー（ゲストおよびストレージ）の表示と管理を行います。</p>
</li>
<li>
<p>
<strong>権限：</strong>プールの権限を管理します。</p>
</li>
</ul></div>
</div>
</div>
<div class="sect2">
<h3 id="gui_tags">
<span>4.5. タグ</span>
<a class="headerlink" href="#gui_tags" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-summary-tags-edit.png">
<img src="images/screenshot/gui-qemu-summary-tags-edit.png" alt="screenshot/gui-qemu-summary-tags-edit.png" width=250 style="padding: 0 10px 0 0;float:left;" /></a>
<p>管理上の目的で、ゲストに<span class="monospaced">タグ</span>を設定することが可能です。
現時点では、これらのタグはユーザーにとって情報提供のみを目的としています。
タグはウェブインターフェースの2か所に表示されます：<span class="monospaced">リソースツリー</span>内と、
ゲストが選択された際のステータス行です。</p></div>
<div class="paragraph">
<p>ゲストのステータス行では、<span class="monospaced">鉛筆アイコン</span>をクリックすることでタグの追加・編集・削除が可能です。
複数のタグを追加するには<span class="monospaced">「+」</span>ボタンを、削除するには<span class="monospaced">「-」</span>ボタンを押してください。
変更を保存またはキャンセルするには、それぞれ<span class="monospaced">「✓」</span>ボタンと<span class="monospaced">「x」</span>ボタンをご利用いただけます。</p></div>
<div class="paragraph">
<p>タグはCLIからも設定可能です。複数のタグはセミコロンで区切ります。
例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set ID --tags 'myfirsttag;mysecondtag'</pre>
</div></div>
<div class="sect3">
<h4 id="_style_configuration">4.5.1. スタイル設定
<a class="headerlink" href="#_style_configuration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-tag-style.png">
<img src="images/screenshot/gui-datacenter-tag-style.png" alt="screenshot/gui-datacenter-tag-style.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>デフォルトでは、タグの色はテキストから決定論的な方法で導出されます。
リソースツリーにおける色、形状、大文字小文字の区別、およびタグの並べ替え方法はカスタマイズ可能です。
これはウェブインターフェースの「<em>データセンター → オプション → タグスタイルオーバーライド</em>」で設定できます。
あるいはCLIからも設定可能です。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesh set /cluster/options --tag-style color-map=example:000000:FFFFFF</pre>
</div></div>
<div class="paragraph">
<p>例として、タグ<span class="monospaced">「example</span>」の背景色を黒（#000000）、文字色を白（#FFFFFF）に設定します。</p></div>
</div>
<div class="sect3">
<h4 id="_permissions">4.5.2. 権限設定
<a class="headerlink" href="#_permissions" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-options.png">
<img src="images/screenshot/gui-datacenter-options.png" alt="screenshot/gui-datacenter-options.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>デフォルトでは、ゲスト（<span class="monospaced">/vms/ID</span>）に対して<span class="monospaced">VM.Config.Options</span>権限を持つユーザーは、任意のタグを設定できます（<a href="#pveum_permission_management">権限管理を参照</a>）。この動作を制限したい場合は、<em>データセンター → オプション → ユーザータグアクセスで</em>適切な権限を設定できます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">自由</span>: ユーザーはタグの設定に制限を受けません（デフォルト）</p>
</li>
<li>
<p>
<span class="monospaced">リスト</span>: あらかじめ定義されたタグリストに基づいてタグを設定できます</p>
</li>
<li>
<p>
<span class="monospaced">既存</span>: リストと同様ですが、ユーザーは既存のタグも使用できます</p>
</li>
<li>
<p>
<span class="monospaced">なし</span>: ユーザーはタグの使用が制限されます</p>
</li>
</ul></div>
<div class="paragraph">
<p>同様の設定は CLI からも行えます。</p></div>
<div class="paragraph">
<p>なお、<span class="monospaced">/</span>に対して<span class="monospaced">Sys.Modify</span>権限を持つユーザーは、こちらの設定に関わらず常に任意のタグを設定または削除できます。さらに、<span class="monospaced">/</span> に対して<span class="monospaced">Sys.Modify</span>権限を持つユーザーのみが追加・削除可能な<span class="monospaced">登録済みタグのリストが</span>設定可能です。登録済みタグのリストは、<em>データセンター → オプション → 登録済みタグ</em>または CLI 経由で編集できます。</p></div>
<div class="paragraph">
<p>CLI における具体的なオプションの詳細および呼び出し方法については、
<a href="#datacenter_configuration_file">「データセンター設定」</a>をご参照ください。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="gui_consent_banner">
<span>4.6. 同意バナー</span>
<a class="headerlink" href="#gui_consent_banner" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ログイン前に同意が必要なカスタム同意バナーは、
「<em>データセンター → オプション → 同意テキスト」</em>で設定できます。
内容がない場合、同意バナーは表示されません。
テキストは<span class="monospaced">/etc/pve/datacenter.cfg</span>設定ファイルに
base64 文字列として保存されます。</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_pvecm">
5. クラスターマネージャー<a class="headerlink" href="#chapter_pvecm" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VEクラスタ管理<span class="monospaced">ツールであるpvecmは</span>、物理サーバーのグループを作成するためのツールです。
このようなグループは<strong>クラスタ</strong>と呼ばれます。信頼性の高いグループ間通信のため、
<a href="http://www.corosync.org">Corosyncクラスタエンジン</a>を採用しております。クラスタ内のノード数に明示的な制限はございません。
実際の運用では、ホストおよびネットワークの性能によって、
可能なノード数が制限される場合があります。現在（2021年）、
ハイエンドのエンタープライズハードウェアを使用した50ノード以上のクラスターが
本番環境で稼働しているという報告があります。</p></div>
<div class="paragraph">
<p><span class="monospaced">pvecm</span>を使用すると、新しいクラスターの作成、ノードのクラスターへの参加、
クラスターからの離脱、ステータス情報の取得、その他様々なクラスター関連の
タスクを実行できます。<strong>Proxmox</strong> <strong>Cluster</strong> <strong>File</strong> <strong>System</strong>（「pmxcfs」）は、
クラスター構成をすべてのクラスターノードに透過的に配布するために使用されます。</p></div>
<div class="paragraph">
<p>ノードをクラスタにグループ化することには、以下の利点があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
集中型ウェブベース管理</p>
</li>
<li>
<p>
マルチマスタークラスタ：各ノードが全ての管理タスクを実行可能</p>
</li>
<li>
<p>
構成ファイルの保存にデータベース駆動型ファイルシステム「<span class="monospaced">pmxcfs</span>」を採用
 <span class="monospaced"> corosyncにより</span>全ノードへリアルタイムに複製</p>
</li>
<li>
<p>
物理ホスト間での仮想マシンおよびコンテナの容易な移行</p>
</li>
<li>
<p>
迅速なデプロイメント</p>
</li>
<li>
<p>
ファイアウォールや高可用性（HA）などクラスタ全体のサービス</p>
</li>
</ul></div>
<div class="sect2">
<h3 id="pvecm_cluster_requirements">
<span>5.1.</span>要件
<a class="headerlink" href="#pvecm_cluster_requirements" title="Permalink to this heading"></a></h3>
<div class="ulist"><ul>
<li>
<p>
すべてのノードは、corosync が機能するために、UDP ポート 5405-5412 経由で相互に接続できる必要があります。</p>
</li>
<li>
<p>
日付と時刻は同期されている必要があります。</p>
</li>
<li>
<p>
ノード間ではTCPポート22を使用したSSHトンネルが必須です。</p>
</li>
<li>
<p>
高可用性（HA）をご検討の場合、信頼性の高いクォーラムを確保するため、
少なくとも3ノードが必要です。
全ノードは同一バージョンであることが望ましいです。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">小規模な2ノードクラスターの場合、<a href="#_corosync_external_vote_support">Q</a>Deviceを使用して3つ目の投票権を提供することが可能です。</td>
</tr></table>
</div>
</li>
<li>
<p>
クラスタ通信用に物理NICを専用化することを推奨いたします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VEクラスターの通信にはCorosyncプロトコルが使用されます。一貫した低遅延が必要ですが、大量の帯域幅は求められません。専用1Gbit NICがほとんどの状況で十分です。これにより、他のサービスが利用可能な帯域幅を全て消費してしまう状況を回避できます。それがCorosyncパケットの遅延増加につながるためです。</td>
</tr></table>
</div>
</li>
<li>
<p>
クラスタトラフィック用の追加リンクは、専用ネットワークがダウンした場合の冗長性を提供します。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Corosyncは最大8つのリンクをサポートします。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">信頼性の高いCorosync冗長性を確保するためには、
少なくとも別の物理ネットワーク上に追加のリンクを配置することが不可欠です。
これにより、専用ネットワークがダウンした場合でも、
Corosyncはクラスター通信を維持することが可能となります。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ボンディングで構成された単一リンクは、特定の障害シナリオにおいて問題を引き起こす可能性があります。詳細は<a href="#pvecm_corosync_over_bonds">「Corosync Over Bonds</a>」をご参照ください。</td>
</tr></table>
</div>
</li>
<li>
<p>
ノード追加にはクラスタノードのルートパスワードが必要です。</p>
</li>
<li>
<p>
仮想マシンのオンライン移行は、ノードのCPUが同一ベンダー製の場合にのみサポートされます。
異なる場合でも動作する可能性はありますが、保証されることはありません。</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_preparing_nodes">
<span>5.2. ノードの準備</span>
<a class="headerlink" href="#_preparing_nodes" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>まず、すべてのノードに Proxmox VE をインストールしてください。各ノードは最終的なホスト名と IP 設定でインストールされていることを確認してください。クラスタ作成後のホスト名や IP の変更はできません。</p></div>
<div class="paragraph">
<p>通常、<span class="monospaced">/etc/hosts</span>ファイルで全ノード名と IP を参照設定する（または他の方法で名前解決を可能にする）ことが一般的ですが、クラスターの動作には必須ではありません。ただし、覚えやすいノード名を使用して SSH でノード間接続が可能になるため、有用な場合があります（<a href="#pvecm_corosync_addresses">リンクアドレスの種類もご参照ください</a>）。クラスタ設定においては、常にノードをIPアドレスで参照されることをお勧めいたします。</p></div>
</div>
<div class="sect2">
<h3 id="pvecm_create_cluster">
<span>5.3. クラスタの作成</span>
<a class="headerlink" href="#pvecm_create_cluster" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>クラスターは、コンソール（<span class="monospaced">SSH</span>経由でログイン）上で作成するか、
Proxmox VEウェブインターフェース（<em>データセンター → クラスター</em>）のAPIを通じて作成できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">クラスタには一意の名前をご使用ください。この名前は後から変更できません。
クラスタ名はノード名と同じ命名規則に従います。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="pvecm_cluster_create_via_gui">5.3.1. Web GUI による作成
<a class="headerlink" href="#pvecm_cluster_create_via_gui" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-create.png">
<img src="images/screenshot/gui-cluster-create.png" alt="screenshot/gui-cluster-create.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>「<em>データセンター」→「クラスタ」</em>で<strong>「クラスタの作成」</strong>をクリックします。<strong>クラスタ</strong>名を入力し、ドロップダウンリストからメインクラスタネットワーク（リンク0）として使用するネットワーク接続を選択します。デフォルトではノードのホスト名で解決されたIPが設定されます。</p></div>
<div class="paragraph">
<p>Proxmox VE 6.2 以降では、クラスターに最大 8 つのフォールバックリンクを追加できます。冗長リンクを追加するには、<em>[追加]</em>ボタンをクリックし、各フィールドからリンク番号と IP アドレスを選択してください。Proxmox VE 6.2 以前では、2つ目のリンクをフォールバックとして追加するには、
<em>[詳細設定]</em>チェックボックスを選択し、追加のネットワークインターフェース
（リンク 1、<a href="#pvecm_redundancy">Corosync レダンダンシーも</a>参照）を選択できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">クラスタ通信用に選択されたネットワークは、
ネットワークストレージやライブマイグレーションなど、
高トラフィック用途に使用されないようご注意ください。
クラスタネットワーク自体は少量のデータしか生成しませんが、
レイテンシの影響を非常に受けやすくなっています。
<a href="#pvecm_cluster_network_requirements">クラスタネットワークの完全な要件</a>をご確認ください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pvecm_cluster_create_via_cli">5.3.2. コマンドラインによる作成
<a class="headerlink" href="#pvecm_cluster_create_via_cli" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>最初の Proxmox VE ノードに<span class="monospaced">SSH</span>でログインし、以下のコマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>hp1# pvecm create CLUSTERNAME</pre>
</div></div>
<div class="paragraph">
<p>新規クラスターの状態を確認するには、以下を実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>hp1# pvecm status</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_multiple_clusters_in_the_same_network">5.3.3. 同一ネットワーク内での複数クラスター
<a class="headerlink" href="#_multiple_clusters_in_the_same_network" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>同一の物理的または論理的ネットワーク内に複数のクラスターを作成することが可能です。
この場合、クラスター通信スタックにおける衝突を回避するため、各クラスターには固有の名前を付ける必要があります。
さらに、クラスターを明確に区別できるようにすることで、人為的な混乱を防ぐことができます。</p></div>
<div class="paragraph">
<p>Corosyncクラスタの帯域幅要件は比較的低いものの、
パケットの遅延および秒間パケット数（PPS）が制限要因となります。
同一ネットワーク内の異なるクラスタはこれらのリソースを競合するため、
大規模クラスタでは物理ネットワークインフラを分離することが依然として有効です。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pvecm_join_node_to_cluster">
<span>5.4. クラスタへのノード追加</span>
<a class="headerlink" href="#pvecm_join_node_to_cluster" title="Permalink to this heading"></a></h3>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">クラスタに参加する際、<span class="monospaced">/etc/pve</span>内の既存設定はすべて上書きされます。
特に、参加するノードはゲストを保持できません。ゲスト ID の競合が発生する可能性があるためです。
また、ノードはクラスタのストレージ設定を継承します。既存ゲストが存在するノードをクラスタに追加する場合の回避策として、
各ゲストのバックアップ（<span class="monospaced">vzdump</span> を使用）を作成し、追加後に異なる ID で復元することが可能です。
ノードのストレージレイアウトが異なる場合、ノードのストレージを再追加し、
各ストレージのノード制限を、そのストレージが実際に利用可能なノードを反映するように調整する必要があります。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_join_node_to_cluster_via_gui">5.4.1. GUI 経由でのノードのクラスタへの参加
<a class="headerlink" href="#_join_node_to_cluster_via_gui" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-join-information.png">
<img src="images/screenshot/gui-cluster-join-information.png" alt="screenshot/gui-cluster-join-information.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>既存のクラスターノードでウェブインターフェースにログインします。
<em>「データセンター」→「クラスター</em>」の下部にある<strong>「参加情報」</strong>ボタンをクリックし、
<strong>「情報をコピー</strong>」ボタンを選択してください。
または<em>「情報」</em>フィールドの文字列を手動でコピーすることも可能です。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-join.png">
<img src="images/screenshot/gui-cluster-join.png" alt="screenshot/gui-cluster-join.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>次に、追加したいノードのWebインターフェースにログインします。
<em>「データセンター」→「クラスタ」</em>の下にある<strong>「クラスタに参加</strong>」をクリックします。
<em>「情報」</em>フィールドに、先ほどコピーした<em>「参加情報」</em>テキストを入力します。
クラスタ参加に必要な設定の大半は自動的に入力されます。
セキュリティ上の理由から、クラスタパスワードは手動で入力する必要があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なデータをすべて手動で入力するには、
「<em>アシスト付き参加」</em>チェックボックスを無効にできます。</td>
</tr></table>
</div>
<div class="paragraph">
<p><strong>「参加」</strong>ボタンをクリックすると、クラスター参加プロセスが直ちに開始されます。ノードがクラスターに参加すると、現在のノード証明書はクラスター認証局（CA）で署名された証明書に置き換えられます。これにより、現在のセッションは数秒後に動作を停止します。その後、ウェブインターフェースを強制再読み込みし、クラスターの認証情報で再度ログインする必要が生じる可能性があります。</p></div>
<div class="paragraph">
<p>これで、お使いのノードが「<em>データセンター → クラスター</em>」の下に表示されるはずです。</p></div>
</div>
<div class="sect3">
<h4 id="_join_node_to_cluster_via_command_line">5.4.2. コマンドラインによるノードのクラスタへの参加
<a class="headerlink" href="#_join_node_to_cluster_via_command_line" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>既存のクラスターに参加させたいノードに、<span class="monospaced">SSH経由で</span>ログインしてください。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvecm add IP-ADDRESS-CLUSTER</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">IP-ADDRESS-CLUSTERには</span>、既存クラスターノードのIPアドレスまたはホスト名をご使用ください。
IPアドレスの使用をお勧めいたします（<a href="#pvecm_corosync_addresses">リンクアドレスの種類</a>を参照）。</p></div>
<div class="paragraph">
<p>クラスターの状態を確認するには以下を実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvecm status</pre>
</div></div>
<div class="listingblock">
<div class="title">4ノード追加後のクラスタ状態</div>
<div class="content monospaced">
<pre># pvecm status
クラスタ情報
~~~~~~~~~~~~~~~~~~~
名称:             prod-central
構成バージョン:   3
トランスポート:    knet
セキュア認証:      有効

クォーラム情報
~~~~~~~~~~~~~~~~~~
日付:             2021年9月14日(火) 11:06:47
クォーラムプロバイダ:  corosync_votequorum
ノード数:            4
ノードID:          0x00000001
リングID:          1.1a8
クォーラム成立:      はい

投票クォーラム情報
~~~~~~~~~~~~~~~~~~~~~~
必要投票数:   4
最大必要投票数: 4
総投票数:      4
クォーラム:          3
フラグ:            クォーラム成立

メンバーシップ情報
~~~~~~~~~~~~~~~~~~~~~~
    ノードID      投票数  名前
0x00000001          1 192.168.15.91
0x00000002          1 192.168.15.92 (ローカル)
0x00000003          1 192.168.15.93
0x00000004          1 192.168.15.94</pre>
</div></div>
<div class="paragraph">
<p>ノードの一覧のみを表示したい場合は、以下を使用してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvecm ノード</pre>
</div></div>
<div class="listingblock">
<div class="title">クラスタ内のノード一覧</div>
<div class="content monospaced">
<pre># pvecm ノード

メンバーシップ情報
~~~~~~~~~~~~~~~~~~~~~~
    ノードID      投票数    名前
         1          1            hp1
         2          1            hp2 (ローカル)
         3          1            hp3
         4          1            hp4</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pvecm_adding_nodes_with_separated_cluster_network">5.4.3. クラスタネットワークを分離したノードの追加
<a class="headerlink" href="#pvecm_adding_nodes_with_separated_cluster_network" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>分離されたクラスターネットワークを持つクラスターにノードを追加する場合、
<em>リンク0</em>パラメータを使用して、そのネットワーク上のノードのアドレスを設定する必要があります：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900"># pvecm add IP-ADDRESS-CLUSTER --link0 LOCAL-IP-ADDRESS-LINK0</span></span></tt></pre></div></div>
<div class="paragraph">
<p>Kronosnetトランスポート層の組み込み<a href="#pvecm_redundancy">冗長性</a>を利用する場合は、
<em>link1パラメータも</em>併せてご使用ください。</p></div>
<div class="paragraph">
<p>GUIを使用する場合、<strong>クラスタ参加</strong>ダイアログの対応する
「<em>Link X</em>」フィールドから正しいインターフェースを選択できます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_remove_a_cluster_node">
<span>5.5. クラスタノードの削除</span>
<a class="headerlink" href="#_remove_a_cluster_node" title="Permalink to this heading"></a></h3>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAKdUlEQVRoge1Ze1AV1x3+zt279wEi
DWCYGzRVktqa1MEmmtbWR22ncXxUrTDWV/5IqG2wUAUfmUwSkk6V+EAJCEQC6figwZBqZtRxqukf
tebRZBpFG1S0hiRErwiaKK977+6eX//YPXt37+UiIJlMZnpmdnb33PP4vt97z2VEhG9yc3zdAO60
/Z/A192+8QScX8Wifr+fWltbzffU1FT4fD72Vew15ASampqovr4eBw8eNPvGjRuHzMxMmj9//tCT
IKIhu958801yuVwEoNdr48aNNJT7EdHQEdi/fz/JshwTvLiKioqGlMSQLFJfX0+MMRvQsWNSqXLz
H2jez78fRWLTpk1DRuKOF6irqyOn02kDOP8XGdTz+VFSP91Hatu79NRvZ0SR2LJly5CQuKPJtbW1
JEmSDdivHp1AwctHSblYSsqFElLOF5PavIvWZU+LIrF169Y7JjHoibt3744CnzXrIQpeOUbKhVJS
mkpIPV9MyrnNpJwtIuVSNa15/MdRJLZt23ZHJBjRwIu5N954gxYvXgzOudm3aO5E1L5SBNZ1Hoxr
INLAyH6HJxVP/WkXtu9+37ZeSUkJVq9ePagQO+BMXFNTEwV+ybxHsPeVIjg6zwOkgSWNhuOuUUBC
KhxJY0AggDSgpwWbn1mO1csftq1ZUFCA0tLSQZXFA0pkVVVVlJOTA6vWsmY9hF07N0AS4OU48LgR
WLO+FPFxboxMS8G5hlPYmPMI4jwM1P0Jtj67DJyrKHvtNADdjPPz8+FwOCgvL29gmuivrVVUVESF
yqxZD1PoyjFSL+7QHbapmJTml+n9EzVRtl676ZekNKwl5VQ+KSfzKHR2E+UutodYxhiVl5cPyCf6
ZUJlZWWUm5trk/wTi6bgtVdf1M2Gq2DEwUgDNBWhUDBqjfSRwwGoIOEP3c3Y/uxirFw0zibMvLw8
VFZW9tucbkugoqKCVq1aZQO/YslUVJU+D9bVBIDroLgK4hygEDweybYGY8AD6d8yftfASL+j+2O8
9NwiPJk51kYiNzcXO3fu7BeJPgkUFxdTbm6ure/JZdNRub0QrOMcGFcBrgLgAHEAGqD2ID7OZZsz
Ji0RcR6HAV4DkaqPJxXouoSywkz8buF9NhIrV65EVVXVbUnEJHDixAlat26drS9n+U+xo/hZMMNh
yZA+uAbAIKOGMCJlmG3eA/clAYaJEamGBlRdC6QBXZewo3AhVswfbSORk5ODDz/8sE8SvRLw+/1U
XV0dBb5MgOe6LUNIEqpOwgCUlOCESw4HuAfG3KX7B2kAGaTJ0Jro77yI8ucX4DfzRtlIHD58GH6/
PyaJXgk0NjZi79695vuUiffrkr91Vt8cHAwc4FZJGiZEKqDcwsi0ZHP+d749POy8MS7iGtBxARWF
8/CDsQnm3BdeeAHWj6N+EYhspSVbgI5zYYkZGmAwzIEbwA0tUM9NfO+7aeb89HuGRQBWLcSNZxj3
zvOYMzk5NpjBEHi99mXD5lXdjqGDJh42h7CEOXhnK3448X5z/shUb1jSpIEM8yFuzOUcjAsNcnR0
KXdG4MEHH8TEiRPN9z0H3sfRE41m+GNcs9i0LjkGTTcrUoGem5g7/V5z/ohElw4O+jxGYQ3qJqmB
jN/+cbINtcfCJvPYY4+hr3qtVwI+n49lZmaa71fbbuH3hX/FycbPQKSCoIIMQEQcehjVo5Gw8/F3
3cSvH03H2HuHY1icQzcvYWKGIMiITMwQwjtnruPpqk9w/ZZq7p2RkYEJEyaAYrCIWY36/X7KyMhA
W1ub2XfP3Qmo3ZKFaQ+P0gmYIdSoOkU4lWSwxGRAdqHL/xm86k27w0blAw3/PncD6yo/xrsfdZj7
paSkoLGxESNGjAgDZsxWK8X0AZ/Px44fP460tLAzXrnWgUX5r+PYuxf1mG/Gf80sofWy2YuWbg/+
uONtPLHhPRw+0WIHL8hbwG95rcUGPiEhAYcOHUJSUhI456YZRWqiz+8BIqLm5mZMmjQJN27cMPsT
E9zYtWE25k4bYzh3mABIBRwOHPgPx+LH/6yDiXPi6pHZcEpk+I5qmtGpCzdQecCPPUevmevLsowj
R45gypQpcDgc5mVowKaJmBoQTEePHo2GhgaMGxcuum52BLHsqUOoP3oWgLB9Sz7QgpgxJoThw/SS
IutnaXBKZEpcgD998Uvs+3ubDbzT6URNTQ0mTZoEVVWhaRo459A0TeCy4etVA+JH8RvnHK2trZgz
Zw5Onz5tjnPJDrxSOAPLZt1nSVIqwDmIVJw6dx1nLt3A3J/cjZThkhE29cvf3o2KA59ja91lcz3G
GDZv3oylS5fC7XbD6XTC6XRCkiRIktS7Jm5HQLDXNA3Xr19HVlYWPvjgA4vEGLav+RHmTxsJX4rb
8AsO4kbOIG6GzTD4HvzlmB/PVH9q2zc/Px/Z2dnwer1wu92QZRkulwuSJEGWZZMEY8wkEGVCVvCC
AOcciqIgPj4e+/btw9SpU83xqkpYteU9HHm7Bf62rnC2RjikisTFSMPV9m4ceucannvVDn7p0qVY
uHAhgsEggsEgQqFQlAlZnVm0PjOxIKFpGogIqqrC5XKhuroa06dPt4wDcl78F+qPNeNKe6cRoTjs
ZYOKK+3dON7wBQrKm2H5pMbMmTOxZMkSBAIB9PT0oKenB4FAAIqiQFEUU4hRRyq3I2AlIZ4553A6
nSgvL8fs2bNtY9eVNaDub58YmhDZWpe+v70bJ5tu4clt/4WihqU4efJkrFixAkRkAg4Gg1AUBaqq
muDF/pGtX7WQNXeIZ0mSUFRUhAULFtjGPl3ZiJdev4QrbZ16zUQqrrZ342JLN5ZvaEJ3ICz68ePH
IycnB5qmmZIW4EOhUJTZWEKo+Rx1KsEYY9Zk4XA4IEmSKXnOuRkVJElCYWEhvF4v6urqzDVK9n2M
zu4Qnl5+L9q/7MHltgBWbr9kA5+eno7c3FzIsoyI5GrTeCzgosU8VmGMmSGLiEwSsixH2WNBQQEA
2EhUH/wc7330BaaOH479/2zHtS/CFabP58OaNWvg9Xp1EE4nZFmGLMtwu93wer1wuVy2ECpJko2I
iTNWJrZGI+HEwi6FisUVCAQQCASwZ88eVFZW9lk9JicnY/369fD5fPB4PCbo+Ph4k4TH44HL5YLX
64XX6zXH9EKE9aUBRkTEGLNJP1Kd4nI4HMjOzkZ8fDyKi4ttJ3eiJSYmYu3atRg1apQJzuv1wuPx
wOPxwOFwmEBFHnA6nXC5XGYSiywlbns2SnoDANN0hMNZnS0UCpkaOnPmDN566y20tLSY2ktLS8OM
GTOQkpICt9uNuLg4M2EJ8CJZSZJkZmFBwkrAWpH2+3BXEBEkRIhTVdVMOCL5qKqKy5cvQ1EUaJoG
VVWRnKx/Jlpt3eVy2QCKu9C68AFr9o0spwd0Oh1ZYggCIlNaiQktiXdhZgKQABcp3ci7LMtM7B0J
fsAErJoAYItG1mdr+hfvVlACtHDIXkploYXbHvQOikDEe6/ZmjFmAhf9ZvJxOk2Qol88W4kYz32S
GNQfHLG+TyMTkAVEr88xQfVnkBg7GAKixSIykDYQsL21/wFkW/B5QqT9lwAAAABJRU5ErkJggg==" />
</td>
<td class="content">操作を進める前に手順を十分にご確認ください。
ご希望や必要とされる内容と異なる可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>対象ノードから全ての仮想マシンを移動してください。
保持したいローカルデータやバックアップは必ずコピーを取っておきましょう。
加えて、削除対象ノードへのスケジュールされたレプリケーションジョブは
全て解除してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">対象ノードを削除する前に、そのノードへのレプリケーションジョブを削除しない場合、
当該レプリケーションジョブは削除不能となります。特にご注意ください。
レプリケートされた仮想マシンが移行されると、レプリケーションは自動的に方向を切り替えます。
したがって、削除予定のノードからレプリケートされた仮想マシンを移行すると、
そのノードへのレプリケーションジョブが自動的に設定されます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>削除対象のノードが<a href="#chapter_pveceph">Ceph用に</a>構成されている場合：</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
動作中のOSD（<span class="monospaced">アップ状態</span>かつ<span class="monospaced">稼働中</span>）を備えた十分な数のProxmox VEノードが
引き続き存在することをご確認ください。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">デフォルトでは、Cephプール<span class="monospaced">はsize/min</span> <span class="monospaced">_sizeを3/2とし</span>、オブジェクト<a href="#pve_ceph_device_classes">バランサーCRUSHにおいて</a>フルノードを<span class="monospaced">障害ドメイン</span>として設定されています。したがって、稼働中のOSDを持つノード<span class="monospaced">がsize</span>（<span class="monospaced">3</span>）未満の場合、データの冗長性が低下します。<span class="monospaced">min_size</span>未満の場合、プールのI/Oがブロックされ、影響を受けたゲストがクラッシュする可能性があります。</td>
</tr></table>
</div>
</li>
<li>
<p>
十分な<a href="#pve_ceph_monitors">数のモニター</a>、
<a href="#pve_ceph_manager">マネージャー</a>、およびCephFSを使用している場合は
<a href="#pveceph_fs_mds">メタデータサーバーが</a>利用可能な状態を維持してください。</p>
</li>
<li>
<p>
データの冗長性を維持するため、OSDを破棄するたびに、特にノード上で最後のOSDを破棄した際には、データの再バランスがトリガーされます。したがって、残存ノード上のOSDに十分な空き容量が残っていることをご確認ください。</p>
</li>
<li>
<p>
削除対象ノードからCephを削除するには、まず
そのノード上のOSDを順次<a href="#pve_ceph_osd_destroy">破壊してください</a>。</p>
</li>
<li>
<p>
<a href="#pve_ceph_mon_and_ts">CEPHステータスが</a>再び<span class="monospaced">HEALTH_OK</span>となった後、
以下の手順を実行してください：</p>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
<em>Ceph → CephFS</em>の Web インターフェース経由で<a href="#pveceph_fs_mds">メタデータサーバーを</a>破壊するか、
以下のコマンドを実行することで破壊できます：</p>
<div class="listingblock">
<div class="content monospaced">
<pre># pveceph mds destroy &amp;lt;ローカルホスト名&amp;gt;</pre>
</div></div>
</li>
<li>
<p>
<a href="#pveceph_destroy_mon">その監視機能を破壊する</a></p>
</li>
<li>
<p>
<a href="#pveceph_destroy_mgr">そのマネージャーを破壊する</a></p>
</li>
</ol></div>
</li>
<li>
<p>
最後に、空になったバケット（削除対象のProxmox VEノード）をCRUSH階層から削除します。
以下のコマンドを実行してください：</p>
<div class="listingblock">
<div class="content monospaced">
<pre># ceph osd crush remove &amp;lt;ホスト名&amp;gt;</pre>
</div></div>
</li>
</ol></div>
<div class="paragraph">
<p>以下の例では、クラスターからノード hp4 を削除します。</p></div>
<div class="paragraph">
<p><strong>別の</strong>クラスターノード（hp4以外）にログインし、<span class="monospaced">pvecm nodes</span>コマンドを実行して削除対象のノードIDを特定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>hp1# pvecm nodes

メンバーシップ情報
~~~~~~~~~~~~~~~~~~~~~~
    Nodeid      Votes Name
         1          1 hp1 (local)
         2          1 hp2
         3          1 hp3
         4          1 hp4</pre>
</div></div>
<div class="paragraph">
<p>この時点で、hp4の電源をオフにし、現在の構成のまま（ネットワーク上で）
再度起動しないことを確認する必要があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAALa0lEQVRogdWZa2wc1RXHfzM7O/te
P9e1vXHSmEdjx3YeDkkaF6REKRRCEDSEFNkRjdSWSsgC2iqoRWqLQKiqIBg1NOQDiMeHtkQIQkRR
S9S4aWwgCQoUgl232KkT28J21l6vd3d2dx79sDuTXdtre03Uqlc62tl53Pv/n3PuOffcKxiGwf9z
E//XAL5sk65WR0a6AaDrOjMtKwgCoigiCAKCIAhXa9wvTcAEHhoc5KMjR7jw3nucf+MN67k/GCS4
YQOr77yTpl27kGUZm81mXC0ywlLnQDbwEwcO0P2b3yz4jV5RwZq2Nm5/5BH8fj+SJGGz2b4UiSUR
MAzD0DSNEwcO8MdHHln8d0AcsAUCfOe551h7yy04HA7sdvuSrVEwAV3XjdDgIC/v2cOl06dznqWA
JCAAMvn9MwlEgF1PP8037rsPt9uN3W5fkjUKIqDrujF+4QLP3XQTU0NDOc8UIAa4y8sJtrQQqK/H
7XQSfv99Pn/nHQRRxNB16/0EEAUatm9n76uv4vP5cDgcBZNYNIF84I0MEK20lIZvf5sNe/dSWlqK
1+vFxBEZHubT3/+evqNHmR4dJRWP55BevW0bra+8gt/vx+l0IknSokksikA+8ElgClixYwc3799P
ZWUlTqczbz+x0VFOPvEEQ6dPE/niCwxdt0jUbd1K68svU1xcXBCJBQnMBz5eWkrL/v2s++Y3KSsr
QxQXlxc7f/5zBjo7CQ8NoadSKKQn943t7dyyf79FYjHuNC8BwzAMVVV56Z57+OzNN3PAJ8vK+FZH
B2s2b55X6/nahRMnOP7TnxLOKEXJyO2/+hVf37uXoqIinE6nmfzyksirMjNUvvGjH+WAVwG1vJxb
Dhxg1bp1uFwuMwQWJCu3bWPN3r24SkoAcGbA/OXXv2bws8+IRqOkUqlZGX1RBAzDMHRd51+nTvHe
wYNX7gPTQMO+faxav56SkpIlgTdlU3s7TXv2IGUs6AGioRDH2tuZmJggFouhqirGPCzyEUBVVX7X
1pZzPwI0fP/7bNmzh7KysrzADh8+zP3338++ffs4ePBg3vdEUWTDD3/IsuZmRLsdW4bEpd5eOp99
lnA4jKIoaJqWl8QsAqb2Txw4kDNp40BxXR0bWlspLy/PC+qZZ55hdHQUSZIYHByko6ODxx57bBZw
cy3kq6xk6y9/ib+qCgQBmbQ7nT50iIs9PUSjUZLJJIZhzEliLgKMDQzwp5/9zLqnkQ51W3/xCwKB
AE6nMy+B3t5exsfH6ezspLe3l3g8zuHDh2cBz5bKpibWtrXhLi0FwA3owNsPP8zExATxeBxVVecy
QC4Bc+L+taNjluvU33031dddN6/2BUGgpKSE/v5+JicncweaA3i2tDz8MIHrr0eU0gsQBzDW10ff
yZNEIhESicScrpRDQNd1xgYG+OC3v7XuJQBXIMDWn/yEioqKeUGMjY0hCAKKoszS1MjIyLzfAmx/
4gmKli0DQcBJOmicfOopJicnicfjJoG5LWBq/+Szz+a8oABNe/bgdrvndR1BEKiqqiIejxOLxWYR
CAaDC0alqjVrqGxowFNWhkDalUKff07f3/5mWSFTLFksLAK6rjN+4UKO9lXAUV7O2tbWeaNOthZl
WZ4FHlh0aN3y4IPIHk+6L8AGvNfRQTgctuZCthVEU/u6rnPutddyBk0A9bt3W4us+QY2fbyurg6v
15vTzw033LBoAsHmZoLNzdgcDgBcQKi/n391dTE9PU0ymcyxgkmAVCrF+4cO5WjfFgiwfoGwOTOy
lJWVUVtba1mkUAKCILClvR1veTkA9owVPnzllZy8YFnA1H5/dzfTw8PWgziwcutWfD4fsiwvCNyU
xsZG3G43lZWVVl933XVXQQSq161j+ebNlhXcwBdnzxIOh60lhmkFEUDTNP7++uvWgBrp6mrNHBk3
H/BsAtFoFEdm8GAwyMaNGwsiIAgCjbt346uosKwgAp8cPWolNj1THInmsqHn6FGLQApY1thIxcqV
+Hy+WX6+0ETesWMHLpcLWZZ54IEHCgYvCAKrbrsNyem0JrQEXMzkhKzlBaKu61z+97+ZHhnJmbwr
tm2zJu5CWp8pra2tNDU1sXPnTtrb25dEQBAEvrplC57MXJCB8XPniEQixONxa6Uq6brOQHd3jvvo
QP2ttxZUpMxsL7zwwpK+AyxLXrt9Oxe6uxFEEXvGZc4fO0bVD35AMplM1wuapjGYtbugAp5AgKLq
aquu/W/JTEs37dqFqihWzSADk8PD1jzQNC3tQtmrThUINDbm+H4h0tfXx6OPPsodd9xBW1sbPT09
BQPPluu2b7fWRxIQ6usjFotZBCRN06wZbbZAfT1FRUWWKQtpzz//PMPDw/T09DA1NcXo6CjHjx+f
11Xma95AwHJjEdB0HUVRrhCYuRGrAiXBoFUqFtq6u7sZHx9nJBMUurq65uxnsX0Hm5v56A9/ANIJ
LXrpEolEwgqlUqZQyPlo6OOPlzx5ly1bxnBWQmxpackBW6hSBEC02axrpqasNZGmaek8kN0kYPDj
j1FVdUlz4Mknn6Surs4Cb5aUhYZiUy59+GGOgm3V1WiadiUPCILAV9autV5wAaM9PXQeOWJprBBp
aGjgxIkTpFIpOjs7aWxsXBJwUwZOnUKZmgLS2zl4vUjSlV1XURRFqtavv3IDKAVe/O53efPxx69a
SCxUBs+c4dV77+Vyfz+xy5eBdG3iX7ECm81m9S2JokiwuZmiujrCPT1AuqgOAqcef5zzL77Imt27
uemhhyipqVnYZ5cw8bPbR0eOcOall7g8MEB4aIhEJAJk9qOAwKZNyLJsHpQgRKNRIxQK0XPmDH/+
3vdQQ6G8na/YtIk199zDypYWVmzceFWAT1y8yMWzZzn/9tv0vfsudqeTlKIQHRvL2QSOAqU7d/K1
W2/l2muvpba2Nl3iJhIJIxKJMDw8TO/Zs3zw4x+jTUzkHVCw2fCUleHw+QiuXYu/upqqhgb8VVUY
hkFNczPFweCs7z556y3r+vyxYwiiyD+PHwdBwNB1krEYhqYRC4UwdB2D9LJmmnRtXHz77VTfeCPL
ly+ntraWmpqa9MaaqqqGoiiEQiGGhoYYHBzk00OHiHR2LkqDNlnG7nJhd7nQswqN+ZogiuipFMlY
DDWRgBl5KEF6woqAUFFByc03U756NZWVlSxfvpyamhoCgQAejwdB13VDVVVisRihUIiRkRGGh4cZ
+sc/GO3qIt7VhZGJAle7mVpWuVKDCBng8jXX4N68Gc8111BUVER5eTnV1dVUV1cTCASuFFqGYaDr
upFKpYjH40xMTDA+Ps7Y2Bjj4+OEw2EmenqYPneO1OAgZCWpxTY9S9QMcLhyHGUDRI8HqbISZ309
zoYGnE4nHo8Hv99PaWkpgUCAiooK6/DE4XCkI1HW2a6hqiqKojA9Pc3k5KQl4XCY6elpotFoetuk
v59UKIR66RLToRBJTcMYHUWIRvMSMPO6rbY2/SsIOFatQpYk5NWrkSQJWZZxOBy43W68Xi9+v5+i
oiJKSkooLi7G5/PhdruRZdnads85HzD3hpLJJIqiEIvFiEajRCIRIpEI0WiUWCxGPB631iOKopBK
pazUbi4Oc7Y+snKCzWbDZrMhSRKSJGG3262w6HK5cLlceDwevF4vPp8Pr9eL2+3G5XLhcDjMkxuE
TNibdcBhnv9qmkYqlSKZTJJIJFAUhXg8jqIoKIpCIpGwSCSTSVRVtWSuk3qTiAnebrfngHc4HDid
TpxOJy6Xy7qWZdk6wZzrxCbvCY1JRNd1NE3LAWgSM69ngp+PgCiK1gF3NhFTzHvmO+Y3wCzw8xLI
JpL5tYCZpEyw2f/nWt1ag2UtM0x3Mq1iAp1j+bH0M7KFCGWDnfmbd8AMnuxfUzL/C0rp/wFnFd4n
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">前述の通り、ノードの<strong>削除前には必ず</strong>電源を切り、
現在の構成のまま（既存のクラスターネットワーク内で）
<strong>再起動しないことを確認することが</strong>極めて重要です。
ノードをそのまま電源投入すると、クラスターが破損する可能性があり、
正常な状態への復旧が困難になる恐れがあります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ノード hp4 の電源を切った後、クラスタから安全に削除できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>hp1# pvecm delnode hp4
ノード4を削除中</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">この時点で、
<span class="monospaced">「Could not kill node (error = CS_ERR_NOT_EXIST)</span>」というエラーメッセージが表示される可能性があります。これはノード削除自体の失敗ではなく、
corosyncがオフラインノードを強制終了しようとした際の失敗を示しています。したがって、安全に無視して構いません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ノード一覧を再度確認するには、`<span class="monospaced">pvecm nodes</span>` または `<span class="monospaced">pvecm status`</span>をご利用ください。
以下のような表示になるはずです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>hp1# pvecm status...



投票クォーラム情報
~~~~~~~~~~~~~~~~~~~~~~
必要投票数:   3
最高必要投票数: 3
総投票数:      3
クォーラム:           2
フラグ:            クォーラム成立

メンバーシップ情報
~~~~~~~~~~~~~~~~~~~~~~
    ノードID      投票数        名前
0x00000001          1        192.168.15.90 (ローカル)
0x00000002          1        192.168.15.91
0x00000003          1        192.168.15.92</pre>
</div></div>
<div class="paragraph">
<p>何らかの理由でこのサーバーを再度同じクラスターに追加したい場合は、
以下の手順が必要です：</p></div>
<div class="ulist"><ul>
<li>
<p>
Proxmox VEを新たにインストールし、</p>
</li>
<li>
<p>
その後、前のセクションで説明した手順に従ってノードを再参加させてください。</p>
</li>
</ul></div>
<div class="paragraph">
<p>削除したノードの設定ファイルは、
<em>/etc/pve/nodes/hp4</em> に残ります。必要な設定を復元した後、
このディレクトリを削除してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ノード削除後も、そのSSHフィンガープリントは他の<em>ノードのknown_hosts</em>に残存します。同一IPまたはホスト名でノードを再参加させた後にSSHエラーが発生した場合は、再追加したノード<span class="monospaced">でpvecm updatecertsを</span>一度実行し、フィンガープリントをクラスター全体で更新してください。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="pvecm_separate_node_without_reinstall">5.5.1. 再インストールせずにノードを分離する
<a class="headerlink" href="#pvecm_separate_node_without_reinstall" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">これは推奨される方法<strong>ではありませんので</strong>、十分ご注意ください。
ご不明な点がございましたら、前の方法をご利用ください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>クラスタからノードを分離する際、再インストールを最初から行う必要はありません。ただし、クラスタからノードを削除した後も、共有ストレージへのアクセス権は残ります。ノードをクラスタから削除する前に、この問題を解決する必要があります。Proxmox VEクラスタは、ストレージロックがクラスタ境界を越えて機能しないため、同一のストレージを別のクラスタと共有できません。さらに、VMIDの競合を引き起こす可能性もあります。</p></div>
<div class="paragraph">
<p>分離対象のノードのみがアクセス可能な新規ストレージの作成をお勧めします。
例として、NFS上の新規エクスポートや新規Cephプールなどが挙げられます。
重要なのは、同一のストレージが複数のクラスターからアクセスされないことです。
このストレージ設定後、対象ノード上の全データと仮想マシンを移行してください。
その後、ノードをクラスターから分離する準備が整います。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">すべての共有リソースが明確に分離されていることを必ずご確認ください。
さもなければ競合や問題が発生する可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>まず、対象ノード上でcorosyncおよびpve-clusterサービスを停止します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>systemctl stop pve-cluster
systemctl stop corosync</tt></pre></div></div>
<div class="paragraph">
<p>クラスターファイルシステムをローカルモードで再起動します:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pmxcfs -l</tt></pre></div></div>
<div class="paragraph">
<p>corosyncの設定ファイルを削除します:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>rm /etc/pve/corosync<span style="color: #990000">.</span>conf
rm -r<span style="color: #990000">/etc/corosync/*</span></tt></pre></div></div>
<div class="paragraph">
<p>これでファイルシステムを通常のサービスとして再起動できます:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>killall pmxcfs
systemctl start pve-cluster</tt></pre></div></div>
<div class="paragraph">
<p>これでノードはクラスターから分離されました。クラスター内の残りのノードから削除するには、以下のコマンドを実行してください:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pvecm delnode oldnode</tt></pre></div></div>
<div class="paragraph">
<p>残存ノードでクォーラム喪失によりコマンドが失敗した場合、
回避策として期待投票数を1に設定できます:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pvecm<span style="color: #993399">1</span>を期待しています</tt></pre></div></div>
<div class="paragraph">
<p>その後、<em>pvecm delnode</em>コマンドを再度実行してください。</p></div>
<div class="paragraph">
<p>次に分離したノードに戻り、残存するクラスター関連ファイルをすべて削除してください。
これにより、当該ノードを別のクラスターに問題なく再追加できるようになります。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>rm<span style="color: #990000">/var/lib/corosync/*</span></tt></pre></div></div>
<div class="paragraph">
<p>他のノードの設定ファイルはクラスタファイルシステム内に残っているため、
それらも削除されることをお勧めいたします。正しいノード名を十分に確認された後、
<em>/etc/pve/nodes/NODENAME</em> ディレクトリ全体を再帰的に削除していただければ結構です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ノードのSSHキー<em>はauthorized_keyファイル</em>に残ります。
これにより、ノード間では公開鍵認証による接続が
引き続き可能となります。この状態を修正するには、
<em>/etc/pve/priv/authorized_keysファイル</em>から
該当するキーを削除してください。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quorum">
<span>5.6.</span>クォ<span>ーラム</span>
<a class="headerlink" href="#_quorum" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE は、クォーラムベースの手法を用いて、すべてのクラスターノード間で一貫した状態を提供します。</p></div>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>クォーラムとは、分散システムにおいて分散トランザクションが操作を実行するために必要となる最小限の投票数を指します。</p></div>
</div>
<div class="attribution">
<em>クォーラム（分散コンピューティング）</em><br>
— ウィキペディアより</div></div>
<div class="paragraph">
<p>ネットワーク分割が発生した場合、状態変更には過半数のノードがオンラインであることが必要です。クォーラムを失った場合、クラスターは読み取り専用モードに切り替わります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VEでは、デフォルトで各ノードに1票が割り当てられます。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="pvecm_cluster_network">
<span>5.7. クラスターネットワーク</span>
<a class="headerlink" href="#pvecm_cluster_network" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>クラスターネットワークはクラスターの中核です。このネットワークを介して送信されるすべてのメッセージは、
各ノードに確実かつ適切な順序で配信されなければなりません。Proxmox VE では、
この部分は corosync によって実現されています。これは高性能、低オーバーヘッド、
高可用性を備えた開発ツールキットの実装であり、分散型設定ファイルシステム
(<span class="monospaced">pmxcfs</span>) を支えています。</p></div>
<div class="sect3">
<h4 id="pvecm_cluster_network_requirements">5.7.1. ネットワーク要件
<a class="headerlink" href="#pvecm_cluster_network_requirements" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEクラスタスタックは、安定した動作のため、全ノード間で5ミリ秒未満の遅延（LAN性能）を有する信頼性の高いネットワークを必要とします。ノード数が少ない環境では遅延の大きいネットワークでも<em>動作する場合がありますが</em>、これは保証されず、ノード数が3を超える場合や遅延が約10ミリ秒を超えると動作が不安定になる可能性が高くなります。</p></div>
<div class="paragraph">
<p>ネットワークは他のメンバーによって過度に使用されないようにしてください。corosyncは帯域幅を多く消費しませんが、遅延の変動に敏感です。理想的には、corosyncは物理的に分離された専用のネットワーク上で動作させるべきです。特に、corosyncとストレージを共有ネットワークで使用しないでください（<a href="#pvecm_redundancy">冗長</a>構成における潜在的な低優先度フォールバックとして使用する場合を除きます）。</p></div>
<div class="paragraph">
<p>クラスタ設定前に、ネットワークが目的用途に適しているか確認することが推奨されます。クラスタネットワーク上でノード間接続を保証するため、<span class="monospaced">ping</span>ツールによる相互接続性テストを実施できます。</p></div>
<div class="paragraph">
<p>Proxmox VEのファイアウォールが有効な場合、corosync用のACCEPTルールは自動的に生成されます。手動での操作は不要です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Corosyncはバージョン3.0以前（Proxmox VE 6.0で導入）ではマルチキャストを使用しておりました。
最新バージョンではクラスタ通信<a href="https://kronosnet.org/">にKronosnetを採用</a>しており、現時点では通常のUDPユニキャストのみをサポートしております。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content"><a href="#pvecm_edit_corosync_conf">corosync.conf</a> ファイルでトランスポートを<span class="monospaced">udp</span>または<span class="monospaced">udpu</span>に設定することで、
マルチキャストまたはレガシーユニキャストを有効にすることは可能です。
ただし、これにより暗号化および冗長性サポートがすべて無効化される点にご留意ください。
したがって、この方法は推奨されません。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pvecm_corosync_over_bonds">5.7.2. ボンディング経由のCorosync
<a class="headerlink" href="#pvecm_corosync_over_bonds" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="_recommendations">推奨事項
<a class="headerlink" href="#_recommendations" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>プライマリ Corosync リンクには、少なくとも 1 つの専用物理 NIC の使用を推奨いたします。
詳細は<a href="#pvecm_cluster_requirements">「要件」</a>をご参照ください。
冗長性を高めるため、<a href="#sysadmin_network_bond">ボンディングを</a>
追加リンクとして使用することも可能です。<strong>ただし、Corosync トラフィックにボンディングを使用する場合</strong>、以下の注意点に留意する必要があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
ボンディングモード<strong>のactive-backupは</strong>、特定の障害シナリオにおいて期待される冗長性を提供しない可能性があります。詳細は以下をご参照ください。</p>
</li>
<li>
<p>
Corosyncトラフィックには、バランスモードの<strong>balance-rr</strong>、<strong>balance-xor</strong>、
<strong>balance-tlb</strong>、<strong>balance-alb</strong> <strong>の使用はお勧めできません</strong>。これらは特定の障害シナリオにおいて問題を引き起こすことが知られており、詳細は以下をご参照ください。</p>
</li>
<li>
<p>
<strong>IEEE 802.3ad (LACP)</strong>: CorosyncトラフィックにLACPボンディングを使用する場合、
<strong>Proxmox VE</strong> <strong>ノードおよびスイッチにおいて</strong> <span class="monospaced">bond-lacp-rateをfastに設定されることを</span>強く推奨いたします。
デフォルト設定<span class="monospaced">のbond-lacp-rate slowでは</span>、特定の障害シナリオにおいて問題が発生することが確認されています。詳細は以下をご参照ください。</p>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="_background">背景
<a class="headerlink" href="#_background" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>特定の障害シナリオにおいて、<a href="#sysadmin_network_bond">ボンディングを</a>Corosyncリンクとして使用することは問題を引き起こす可能性があります。例えば、ボンディングされたインターフェースの1つが障害を起こしパケット送信を停止したものの、リンク状態は「アップ」のまま維持され、他のCorosyncリンクが利用できない状況を考えてみてください。このシナリオでは、一部のボンディングモードが非対称接続状態を引き起こす恐れがあり、クラスタノードが他のノードの異なるサブセットとしか通信できなくなる可能性があります。影響を受けるのは負荷分散を提供するボンディングモードです。これらのモードでは、障害発生したインターフェース経由で一部のパケット送信を試み続ける可能性があります。非対称接続状態では、Corosyncがクラスタ内で安定したクォーラムを形成できなくなる恐れがあります。この状態が持続し、HAが有効な場合、ボンディングに問題のないノードでさえフェンスアウトする可能性があります。最悪の場合、クラスタ全体がフェンスアウトする恐れがあります。</p></div>
<div class="paragraph">
<p>ボンディングモード<strong>active-backup は</strong>、上記の障害シナリオにおいて非対称接続<strong>を引き起こしません</strong>。ただし、障害が発生したインターフェースを持つボンディングがバックアップリンクに切り替わらない可能性があります。その結果、ノードがクラスタとの接続を失い、HA が有効な場合、フェンス状態になる可能性があります。</p></div>
<div class="paragraph">
<p>バランスモード（<strong>balance-rr</strong>、<strong>balance-xor</strong>、<strong>balance_tlb</strong>、<strong>balance-alb</strong>）は、上記の障害シナリオにおいて非対称接続を引き起こす可能性があり、HAが有効な場合、予期せぬフェンシングが発生する恐れがあります。</p></div>
<div class="paragraph">
<p>ボンディングモード<strong>IEEE 802.3ad (LACP)</strong>は、上記の障害シナリオにおいて非対称接続を引き起こす可能性がありますが、この状態からは回復可能です。ボンディングの両側（Proxmox VE ノードとスイッチ）は、ボンディングされたインターフェース上で連続して 3 つの LACPDU を受信しなかった場合、そのインターフェースの使用を停止できるためです。ただし、デフォルト設定では
LACPDUは30秒ごとにのみ送信されるため、フェイルオーバー時間は90秒となります。
これは長すぎます。HAリソースを持つノードは、安定したクォーラムが約1分間維持されない場合、
すでにフェンシングを実行してしまうためです。CorosyncトラフィックにLACPボンディングを使用する場合、
<strong>Proxmox VEノード</strong>と<strong>スイッチの両方</strong> <span class="monospaced">でbond-lacp-rateをfast</span>に設定することを推奨いたします。片側でこのオプションを設定すると、
相手側に毎秒LACPDUを送信するよう要求します。双方で設定すれば、
前述のシナリオにおけるフェイルオーバー時間を3秒に短縮でき、
フェンシングを防止できます。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_separate_cluster_network">5.7.3. 独立したクラスターネットワーク
<a class="headerlink" href="#_separate_cluster_network" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>パラメータなしでクラスタを作成する場合、corosyncクラスタネットワークは通常、WebインターフェースおよびVMのネットワークと共有されます。設定によっては、ストレージトラフィックさえも同一ネットワーク経由で送信される可能性があります。corosyncは時間依存のリアルタイムアプリケーションであるため、この設定を変更することを推奨いたします。</p></div>
<div class="sect4">
<h5 id="_setting_up_a_new_network">新しいネットワークの設定
<a class="headerlink" href="#_setting_up_a_new_network" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>まず、新しいネットワークインターフェースを設定する必要があります。物理的に分離されたネットワーク上に配置してください。お使いのネットワーク<a href="#pvecm_cluster_network_requirements">がクラスタネットワーク要件</a>を満たしていることをご確認ください。</p></div>
</div>
<div class="sect4">
<h5 id="_separate_on_cluster_creation">クラスタ作成時に分離する
<a class="headerlink" href="#_separate_on_cluster_creation" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>これは、新しいクラスタを作成する際に使用する<em>pvecm create</em>コマンドの<em>linkX</em>パラメータで設定可能です。</p></div>
<div class="paragraph">
<p>10.10.10.1/25 の静的アドレスで追加 NIC を設定し、
すべてのクラスタ通信をこのインターフェース経由で送受信したい場合、
以下のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pvecm create<span style="font-weight: bold"><span style="color: #0000FF">test</span></span><span style="color: #993399">--link0</span> <span style="color: #993399">10.10</span><span style="color: #990000">.</span><span style="color: #993399">10.1</span></tt></pre></div></div>
<div class="paragraph">
<p>正常に動作しているか確認するには、以下を実行してください：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>systemctl status corosync</tt></pre></div></div>
<div class="paragraph">
<p>その後、上記の手順に従い、
<a href="#pvecm_adding_nodes_with_separated_cluster_network">分離されたクラスタネットワークでノードを追加してください</a>。</p></div>
</div>
<div class="sect4">
<h5 id="pvecm_separate_cluster_net_after_creation">クラスタ作成後の分離
<a class="headerlink" href="#pvecm_separate_cluster_net_after_creation" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>既にクラスタを作成済みで、クラスタ全体の再構築を行わずに通信ネットワークを切り替えたい場合にこの方法が利用可能です。
この変更により、クラスタ内でクォーラム喪失が短時間発生する可能性があります。各ノードが新しいネットワーク上でcorosyncを再起動し、順次起動する必要があるためです。</p></div>
<div class="paragraph">
<p><a href="#pvecm_edit_corosync_conf">まずcorosync.confファイルの編集方法をご</a>確認ください。
その後ファイルを開くと、以下のような内容が表示されます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>logging {
  debug: off
  to_syslog: yes
}

nodelist {

  node {
    name: due
    nodeid: 2
    quorum_votes: 1
    ring0_addr: due
  }

  node {
    name: tre
    nodeid: 3
    quorum_votes: 1
    ring0_addr: tre
  }

  node {
    name: uno
    nodeid: 1
    quorum_votes: 1
    ring0_addr: uno
  }

}

quorum {
  provider: corosync_votequorum
}

totem {
  クラスタ名: testcluster
  設定バージョン: 3
  IPバージョン: ipv4-6
  secauth: 有効
  バージョン: 2
  インターフェース {
    リンク番号: 0
  }

}</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">ringX_addr</span>は実際に corosync<strong>リンクアドレスを指定します</strong>。「ring」という名称は、
古いバージョンの corosync から引き継がれたもので、下位互換性のために維持されています。</td>
</tr></table>
</div>
<div class="paragraph">
<p>まず、ノードエントリに<em>名前</em>プロパティがまだ存在しない場合は追加してください。
これらはノード名と一致している<strong>必要があります</strong>。</p></div>
<div class="paragraph">
<p>次に、全ノードの<em>ring0_addr</em>プロパティに記載されているアドレスを
新しいアドレスに置き換えてください。ここでは単純なIPアドレスまたはホスト名を使用できます。
ホスト名を使用する場合、全ノードから解決可能であることを確認してください（詳細は
<a href="#pvecm_corosync_addresses">「リンクアドレスの種類」</a>も参照）。</p></div>
<div class="paragraph">
<p>この例では、クラスタ通信を10.10.10.0/25ネットワークに切り替えるため、
各ノードの<em>ring0_addrを</em>それぞれ変更します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">全く同じ手順で<em>他のringX_addr値</em>も変更可能です。ただし、問題発生時の復旧を容易にするため、
リンクアドレスは一度に1つだけ変更されることをお勧めいたします。</td>
</tr></table>
</div>
<div class="paragraph">
<p><em>config_version</em>プロパティを増加させた後、新しい設定ファイルは
以下のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ログ設定 {
  デバッグレベル: オフ
  システムログ出力: はい
}

ノードリスト {

  ノード {
    名前: due
    ノードID: 2
    クォーラム投票数: 1
    リング0アドレス: 10.10.10.2
  }

  ノード {
    名前: tre
    ノードID: 3
    クォーラム投票数: 1
    リング0アドレス: 10.10.10.3
  }

  ノード {
    名前: uno
    ノードID: 1
    クォーラム投票数: 1
    リング0アドレス: 10.10.10.1
  }

}

クォーラム {
  プロバイダー: corosync_votequorum
}

トーテム {
  クラスター名: testcluster
  設定バージョン: 4
  IPバージョン: ipv4-6
  secauth: on
  バージョン: 2
  インターフェース {
    リンク番号: 0
  }

}</pre>
</div></div>
<div class="paragraph">
<p>その後、変更した情報がすべて正しいことを最終確認し、
保存します。再度、
<a href="#pvecm_edit_corosync_conf">corosync.confファイルの編集</a>セクションの手順に従い、
変更を有効化します。</p></div>
<div class="paragraph">
<p>変更はライブで適用されるため、corosyncの再起動は厳密には必要ありません。
他の設定も変更した場合や、corosyncにエラーが発生していることに気付いた場合は、
任意で再起動をトリガーできます。</p></div>
<div class="paragraph">
<p>単一ノード上で以下を実行してください:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>systemctl restart corosync</tt></pre></div></div>
<div class="paragraph">
<p>次に正常動作を確認します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>systemctl status corosync</tt></pre></div></div>
<div class="paragraph">
<p>corosyncが再び動作し始めたら、他のすべてのノードでも再起動してください。
その後、新しいネットワーク上でノードが順次クラスタメンバーシップに参加します。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pvecm_corosync_addresses">5.7.4. Corosync アドレス
<a class="headerlink" href="#pvecm_corosync_addresses" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>corosyncリンクアドレス（下位互換性のため<span class="monospaced">corosync.confでは</span> <em>ringX_addrと</em>表記）は、以下の2つの方法で指定できます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>IPv4/v6 アドレスは</strong>直接使用できます。これらは静的であり、通常は不用意に変更されないため、推奨されます。</p>
</li>
<li>
<p>
<strong>ホスト名は</strong> <span class="monospaced">getaddrinfo</span> を使用して解決されます。これはデフォルトで、利用可能な場合 IPv6 アドレスが優先的に使用されることを意味します（<span class="monospaced">man gai.conf</span> も参照）。既存のクラスターを IPv6 にアップグレードする際は特に、この点にご留意ください。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ホスト名は慎重にご利用ください。ホスト名が解決されるアドレスは、
corosyncやそれが動作するノードを変更せずに変更される可能性があります。
これにより、corosyncへの影響を考慮せずにアドレスが変更される状況が生じる恐れがあります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ホスト名を優先される場合、corosync専用に別の静的ホスト名を設定されることを推奨いたします。また、クラスタ内の全ノードが全てのホスト名を正しく解決できることをご確認ください。</p></div>
<div class="paragraph">
<p>Proxmox VE 5.1以降、ホスト名はサポートされていますが、
登録時に解決されます。設定に保存されるのは解決されたIPアドレスのみです。</p></div>
<div class="paragraph">
<p>以前のバージョンでクラスターに参加したノードは、<span class="monospaced">corosync.conf</span>内で未解決のホスト名を使用している可能性があります。前述のように、それらをIPアドレスまたは別のホスト名に置き換えることをお勧めします。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pvecm_redundancy">
<span>5.8. Corosync の冗長性</span>
<a class="headerlink" href="#pvecm_redundancy" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Corosyncは、統合されたKronosnetレイヤーを介した冗長ネットワークをデフォルトでサポートしております（従来のudp/udpuトランスポートではサポートされておりません）。これを有効にするには、複数のリンクアドレスを指定します。方法は以下のいずれかです：
-<span class="monospaced">pvecm</span> の<em>--linkX</em>パラメータを使用する
- GUI<strong>でリンク 1 を</strong>指定する（クラスタ作成時または新規ノード追加時）
-<span class="monospaced">corosync.conf</span> で複数の<em>ringX_addr</em>を指定する</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">効果的なフェイルオーバーを実現するためには、各リンクを物理的に独立したネットワーク接続上に配置することが推奨されます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>リンクは優先度設定に従って使用されます。この優先度は、<span class="monospaced">corosync.conf</span>の対応するインターフェースセクションで<em>knet_link_priority</em>を設定するか、推奨される方法として、<span class="monospaced">pvecmで</span>クラスタを作成<em>する際にpriority</em>パラメータを使用することで設定できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvecm create CLUSTERNAME --link0 10.10.10.1,priority=15 --link1 10.20.20.1,priority=20</pre>
</div></div>
<div class="paragraph">
<p>これにより、優先度が高い<em>link1</em>が最初に使用されます。</p></div>
<div class="paragraph">
<p>手動で優先度を設定していない場合（または2つのリンクの優先度が同じ場合）、
リンクは番号順に使用され、番号が小さいほど優先度が高くなります。</p></div>
<div class="paragraph">
<p>たとえ全てのリンクが正常に動作していても、最も優先度の高いリンクのみが
corosyncトラフィックを処理します。リンクの優先度は混在できません。つまり、
異なる優先度を持つリンク間では通信が行えません。</p></div>
<div class="paragraph">
<p>優先度の低いリンクは、より高い優先度のリンクがすべて障害状態になった場合にのみトラフィックを処理します。この特性を利用し、他のタスク（仮想マシン、ストレージなど）に使用するネットワークを低優先度リンクとして指定する戦略が有効です。最悪の事態が発生した場合、遅延が大きい、あるいは輻輳している接続であっても、接続が全くない状態よりはましである可能性があります。</p></div>
<div class="sect3">
<h4 id="_adding_redundant_links_to_an_existing_cluster">5.8.1. 既存クラスターへの冗長リンク追加
<a class="headerlink" href="#_adding_redundant_links_to_an_existing_cluster" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>稼働中の構成に新しいリンクを追加するには、まず<a href="#pvecm_edit_corosync_conf">corosync.confファイルの編集方法</a>をご確認ください。</p></div>
<div class="paragraph">
<p>次に、<span class="monospaced">nodelistセ</span>クション内の各ノードに新しい<em>ringX_addr</em>を追加します。
追加するすべてのノードで<em>Xが</em>同一であり、かつ各ノードで一意であることを
必ずご確認ください。</p></div>
<div class="paragraph">
<p>最後に、<span class="monospaced">totemセクションに</span>下記のように新しい<em>インターフェース</em>を追加し、
<em>Xを</em>上記で選択したリンク番号に置き換えてください。</p></div>
<div class="paragraph">
<p>リンク番号1を追加した場合、新しい設定ファイルは以下のような内容になります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>logging {
  debug: off
  to_syslog: yes
}

nodelist {

  node {
    name: due
    nodeid: 2
    quorum_votes: 1
    ring0_addr: 10.10.10.2
    ring1_addr: 10.20.20.2
  }

  node {
    name: tre
    nodeid: 3
    quorum_votes: 1
    ring0_addr: 10.10.10.3
    ring1_addr: 10.20.20.3
  }

  node {
    name: uno
    nodeid: 1
    quorum_votes: 1
    ring0_addr: 10.10.10.1
    ring1_addr: 10.20.20.1
  }

}

quorum {
  provider: corosync_votequorum
}

totem {
  クラスタ名: testcluster
  設定バージョン: 4
  IPバージョン: ipv4-6
  secauth: on
  バージョン: 2
  インターフェース {
    リンク番号: 0
  }
  インターフェース {
    リンク番号: 1
  }
}</pre>
</div></div>
<div class="paragraph">
<p>最後のステップである<a href="#pvecm_edit_corosync_conf">corosync.conf ファイルの編集を</a>完了すると、新しいリンクは直ちに有効になります。再起動は不要です。corosync が新しいリンクを読み込んだことを確認するには、以下のコマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>journalctl -b -u corosync</pre>
</div></div>
<div class="paragraph">
<p>新しいリンクをテストするには、一時的に
いずれかのノードで古いリンクを切断し、
切断中もステータスがオンライン状態を維持していることを確認するのが
良い方法かもしれません：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvecm の状態</pre>
</div></div>
<div class="paragraph">
<p>クラスタの状態が正常であることを確認できれば、新しいリンクが使用されていることを意味します。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_role_of_ssh_in_proxmox_ve_clusters">
<span>5.9. Proxmox VE クラスターにおける SSH の役割</span>
<a class="headerlink" href="#_role_of_ssh_in_proxmox_ve_clusters" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEは、様々な機能においてSSHトンネルを利用しております。</p></div>
<div class="ulist"><ul>
<li>
<p>
コンソール/シェルセッションのプロキシング（ノードおよびゲスト）</p>
<div class="paragraph">
<p>ノードAに接続した状態でノードBのシェルを使用する場合、ノードA上のターミナルプロキシに接続します。このプロキシは、非対話型SSHトンネルを介してノードB上のログインシェルに接続されます。</p></div>
</li>
<li>
<p>
<em>セキュア</em>モードにおけるVMおよびCTのメモリおよびローカルストレージの移行。</p>
<div class="paragraph">
<p>移行時には、移行情報交換およびメモリ・ディスク内容転送のため、
ソースノードとターゲットノードの間に1つ以上のSSHトンネルが確立されます。</p></div>
</li>
<li>
<p>
ストレージレプリケーション</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_ssh_setup">5.9.1. SSHの設定
<a class="headerlink" href="#_ssh_setup" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEシステムでは、SSH設定/セットアップに以下の変更が加えられます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">rootユーザーの</span>SSHクライアント設定は、<span class="monospaced">Cha</span>Cha20よりも<span class="monospaced">AES</span>を優先するよう設定されます。
rootユーザーのauthorized_keysファイルは/etc/pve/priv/authorized_keysにリンクされ、
クラスタ内の</p>
</li>
<li>
<p>
<span class="monospaced">root</span>ユーザーの<span class="monospaced">authorized_keys</span>ファイルは
 <span class="monospaced"> /etc/pve/priv/authorized_keys</span>にリンクされ、クラスタ内の全認証鍵が統合されます</p>
</li>
<li>
<p>
<span class="monospaced">sshd は</span>、root ユーザーがパスワードでログインできるように設定されます</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">古いシステムでは、<span class="monospaced">/etc/ssh/ssh_known_hosts</span>がシンボリックリンクとして設定され、
すべてのノードのホストキーを統合した<span class="monospaced">/etc/pve/priv/known_hosts</span> を指している場合があります。このシステムは<span class="monospaced">pve-cluster &amp;lt;&amp;lt;INSERT VERSION&amp;gt;&amp;gt;</span> において明示的なホストキー固定に置き換えられました。シンボリックリンクがまだ存在する場合は、<span class="monospaced">pvecm updatecerts --unmerge-known-hosts</span> を実行することで設定を解除できます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_pitfalls_due_to_automatic_execution_of_span_class_monospaced_bashrc_span_and_siblings">5.9.2.<span class="monospaced">.bashrc</span>および関連ファイルの自動実行による落とし穴
<a class="headerlink" href="#_pitfalls_due_to_automatic_execution_of_span_class_monospaced_bashrc_span_and_siblings" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>カスタムの<span class="monospaced">.bashrcや</span>、設定されたシェルによってログイン時に実行される類似のファイルがある場合、<span class="monospaced">SSHは</span>セッションが正常に確立されると自動的にそれらを実行します。これにより、上記の操作のいずれかがroot権限で実行される可能性があり、予期しない動作を引き起こす恐れがあります。問題となる副作用が生じる可能性があります！</p></div>
<div class="paragraph">
<p>このような問題を回避するため、<span class="monospaced">/root/.bashrc</span>ファイルにセッションが対話型であることを確認するチェックを追加し、その場合にのみ<span class="monospaced">.bashrc</span>コマンドを実行することをお勧めいたします。</p></div>
<div class="paragraph">
<p>以下のスニペットを<span class="monospaced">.bashrc</span>ファイルの先頭に追加できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># インタラクティブに実行されていない場合、副作用を避けるため早期終了します！
case $- in
    *i*) ;;
      *) return;;
esac</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_corosync_external_vote_support">
<span>5.10. Corosync 外部投票サポート</span>
<a class="headerlink" href="#_corosync_external_vote_support" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>本セクションでは、Proxmox VE クラスタに外部投票者（external voter）を導入する方法について説明します。
設定が完了すると、クラスタ通信の安全性を損なうことなく、より多くのノード障害に耐えることが可能となります。</p></div>
<div class="paragraph">
<p>これを実現するには、以下の2つのサービスが関与します：</p></div>
<div class="ulist"><ul>
<li>
<p>
各 Proxmox VE ノード上で動作する QDevice デーモン</p>
</li>
<li>
<p>
独立したサーバー上で動作する外部投票デーモン</p>
</li>
</ul></div>
<div class="paragraph">
<p>その結果、小規模な構成（例えば2+1ノード）においても、より高い可用性を実現することが可能となります。</p></div>
<div class="sect3">
<h4 id="_qdevice_technical_overview">5.10.1. QDeviceの技術概要
<a class="headerlink" href="#_qdevice_technical_overview" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Corosync クォーラムデバイス（QDevice）は、クラスタの各ノード上で動作するデーモンです。
外部で動作するサードパーティ製アービトレータの決定に基づき、
設定された数の投票権をクラスタのクォーラムサブシステムに提供します。
主な用途は、標準のクォーラム規則が許容するよりも多くのノード障害を
クラスターが耐えられるようにすることです。外部デバイスは全ノードを監視できるため、
投票権を付与するノードセットを安全に選択できます。
この操作は、当該ノードセットがサードパーティの投票権を受け取った後、
（再び）クォーラムを維持できる場合にのみ実行されます。</p></div>
<div class="paragraph">
<p>現在、サードパーティの仲裁装置としてサポートされているのは<em>QDevice Net</em>のみです。これはデーモンであり、ネットワーク経由でパーティションメンバーに到達可能な場合、クラスタパーティションに投票を提供します。QDevice Netは、クラスタの1つのパーティションに対してのみ、同時に投票を行います。
複数のクラスタをサポートするよう設計されており、設定や状態管理がほぼ不要です。
新しいクラスタは動的に処理され、QDeviceを実行するホスト上で設定ファイルは不要です。</p></div>
<div class="paragraph">
<p>外部ホストの要件は、クラスタへのネットワークアクセスとcorosync-qnetdパッケージの利用可能性のみです。Debianベースのホスト向けパッケージを提供しており、その他のLinuxディストリビューションでも各パッケージマネージャー経由で入手可能です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">corosync本体とは異なり、QDeviceはTCP/IP経由でクラスターに接続します。
このデーモンはクラスターのLAN外でも実行可能であり、
corosyncの低遅延要件に縛られません。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_supported_setups">5.10.2. サポート対象の構成
<a class="headerlink" href="#_supported_setups" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>QDeviceはノード数が偶数のクラスタをサポートしており、高可用性を必要とする2ノードクラスタでのご利用をお勧めいたします。
奇数ノード数のクラスタでは、現時点ではQDeviceの使用を推奨しておりません。
その理由は、クラスタタイプごとにQDeviceが提供する投票数の差異にあります。
偶数ノードのクラスタでは追加投票が1票のみ増加しますが、
これは可用性を向上させるのみです。なぜならQDevice自体が故障した場合、
QDeviceが存在しない場合と状況が変わらないためです。</p></div>
<div class="paragraph">
<p>一方、奇数ノード数のクラスタでは、QDeviceは<em>(N-1)</em>票を提供します（<em>Nは</em>クラスタノード数に対応）。この代替動作は合理的です。追加票が1票のみの場合、クラスタがスプリットブレイン状態に陥る可能性があるためです。このアルゴリズムでは、QDevice自体を除く全ノードが1つを除いて障害を起こすことが許容されます。ただし、これには2つの欠点があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
QNetデーモン自体が障害を起こした場合、他のノードが障害を起こすとクラスタは直ちにクォーラムを失います。例えば15ノードのクラスタでは、7ノードが障害を起こすまでクォーラムは維持されます。しかし、ここにQDeviceが設定されており、それ自体が障害を起こした場合、15ノードのうち<strong>1ノードも</strong>障害を起こす<strong>ことはできません</strong>。この場合、QDeviceはほぼ単一障害点として機能します。</p>
</li>
<li>
<p>
1ノードとQDeviceを除く全てが障害を起こしても問題ないという点は一見魅力的に思えますが、
これはHAサービスの一斉復旧を引き起こす可能性があり、
残存する単一ノードに過負荷がかかる恐れがあります。さらに、
Cephサーバーはオンライン状態のノード数が<em>((N-1)/2)</em>以下になると
サービス提供を停止します。</p>
</li>
</ul></div>
<div class="paragraph">
<p>これらの欠点と影響を理解された上で、奇数ノードクラスタ構成において本技術を採用されるか否かをご自身で判断いただけます。</p></div>
</div>
<div class="sect3">
<h4 id="_qdevice_net_setup">5.10.3. QDevice-Net 設定
<a class="headerlink" href="#_qdevice_net_setup" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>corosync-qdevice に投票を提供するデーモンは、非特権ユーザーとして実行することを推奨いたします。Proxmox VE および Debian では、既にそのように設定済みのパッケージが提供されています。
Proxmox VE における QDevice の安全かつ確実な統合を確保するため、デーモンとクラスター間の通信は暗号化する必要があります。</p></div>
<div class="paragraph">
<p>まず、外部サーバーに<em>corosync-qnetdパッケージ</em>をインストールし</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>external# apt install corosync-qnetd</pre>
</div></div>
<div class="paragraph">
<p>次に、クラスタの全ノードに<em>corosync-qdevice</em>パッケージをインストールしてください</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pve# apt install corosync-qdevice</pre>
</div></div>
<div class="paragraph">
<p>その後、クラスタ内の全ノードがオンライン状態であることをご確認ください。</p></div>
<div class="paragraph">
<p>次に、Proxmox VEノードのいずれかで以下のコマンドを実行し、QDeviceの設定を行ってください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pve# pvecm qdevice setup &amp;lt;QDEVICE-IP&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>クラスタのSSHキーは自動的にQDeviceにコピーされます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">外部サーバーのrootユーザーには、必ず鍵ベースのアクセスを設定するか、設定フェーズ中は一時的にパスワードによるrootログインを許可してください。
この段階で「<em>Host key verification failed.」</em>などのエラーが発生した場合、<span class="monospaced">pvecm updatecertsを実行することで</span>問題が解決する可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>すべての手順が正常に完了すると、「Done」と表示されます。QDeviceの設定が完了したことを、以下のコマンドで確認できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pve# pvecm status...



投票クォーラム情報
~~~~~~~~~~~~~~~~~~~~~
必要投票数:   3
最高必要投票数: 3
総投票数:      3
クォーラム:           2
フラグ:            Quorate Qdevice

メンバーシップ情報
~~~~~~~~~~~~~~~~~~~~~~
    ノードID      投票数    Qdevice名
    0x00000001      1    A,V,NMW 192.168.22.180 (ローカル)
    0x00000002      1    A,V,NMW 192.168.22.181
    0x00000000      1            Qdevice</pre>
</div></div>
<div class="sect4">
<h5 id="pvecm_qdevice_status_flags">QDevice Status Flags
<a class="headerlink" href="#pvecm_qdevice_status_flags" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>上記のQDeviceの状態出力には、通常以下の3つの列が含まれます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">A</span>/<span class="monospaced">NA</span>: Alive（稼働中）または Not Alive（非稼働中）。外部にある
 <span class="monospaced">   corosync-qnetd</span>デーモンとの通信が機能しているかどうかを示します。</p>
</li>
<li>
<p>
<span class="monospaced">V</span>/<span class="monospaced">NV</span>: QDevice がノードに対して投票を行うかどうかを示します。ノード間の corosync 接続がダウンしているものの、両ノードが外部<span class="monospaced">corosync-qnetd</span>デーモンと通信可能なスプリットブレイン状態では、投票権を得られるのは一方のノードのみとなります。</p>
</li>
<li>
<p>
<span class="monospaced">MW</span>/<span class="monospaced">NMW</span>: マスターが勝利する (<span class="monospaced">MV</span>) またはしない (<span class="monospaced">NMW</span>)。デフォルトは<span class="monospaced">NMW</span> です。詳細は
 <span class="footnote"> <br> [<span class="monospaced">votequorum_qdevice_master_wins</span>マニュアルページ
 <a href="https://manpages.debian.org/stable/libvotequorum-dev/votequorum_qdevice_master_wins.3.en.html">  https://manpages.debian.org/stable/libvotequorum-dev/votequorum_qdevice_master_wins.3.en.html</a>]<br></span> をご参照ください。</p>
</li>
<li>
<p>
<span class="monospaced">NR</span>: QDevice が登録されていません。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">QDeviceが「<span class="monospaced">Not Alive</span>」（<span class="monospaced">上記</span>出力<span class="monospaced">ではNA</span>）と表示されている場合、
外部サーバーのポート<span class="monospaced">5403</span>（qnetdサーバーのデフォルトポート）が
TCP/IP経由で到達可能であることをご確認ください。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_frequently_asked_questions">5.10.4. よくあるご質問
<a class="headerlink" href="#_frequently_asked_questions" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="_tie_breaking">タイブレーク<a class="headerlink" href="#_tie_breaking" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>同数の場合、つまり同じサイズのクラスタパーティション2つが互いに認識できないが
QDeviceを認識できる場合、QDeviceはそれらのパーティションからランダムに1つを選択し、
それに投票を提供します。</p></div>
</div>
<div class="sect4">
<h5 id="_possible_negative_implications">想定される悪影響
<a class="headerlink" href="#_possible_negative_implications" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ノード数が偶数のクラスタにおいて、QDeviceを使用しても
悪影響は生じません。動作に失敗した場合、QDeviceを全く
使用していない状態と同じとなります。</p></div>
</div>
<div class="sect4">
<h5 id="_adding_deleting_nodes_after_qdevice_setup">QDevice設定後のノード追加/削除
<a class="headerlink" href="#_adding_deleting_nodes_after_qdevice_setup" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>QDeviceが設定されたクラスタに新規ノードを追加、または既存ノードを削除する場合は、
まずQDeviceを削除する必要があります。その後、通常通りノードの追加・削除を行えます。
ノード数が再び偶数になった時点で、前述の手順に従いQDeviceを再設定できます。</p></div>
</div>
<div class="sect4">
<h5 id="_removing_the_qdevice">QDevice の削除<a class="headerlink" href="#_removing_the_qdevice" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>公式の<span class="monospaced">pvecm</span>ツールを使用して QDevice を追加した場合、以下のコマンドを実行することで削除できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pve# pvecm qdevice remove</pre>
</div></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_corosync_configuration">
<span>5.11. Corosyncの設定</span>
<a class="headerlink" href="#_corosync_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">/etc/pve/corosync.conf</span>ファイルは、Proxmox VE クラスターにおいて中心的な役割を果たします。
このファイルはクラスターのメンバーシップとそのネットワークを制御します。
詳細については、corosync.conf のマニュアルページをご参照ください:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>man corosync<span style="color: #990000">.</span>conf</tt></pre></div></div>
<div class="paragraph">
<p>ノードの参加に関しては、常にProxmox VEが<span class="monospaced">提供するpvecmツール</span>をご利用ください。
その他の変更については、設定ファイルを手動で編集する必要が生じる場合があります。
その際のベストプラクティスをいくつかご紹介します。</p></div>
<div class="sect3">
<h4 id="pvecm_edit_corosync_conf">5.11.1. corosync.conf の編集
<a class="headerlink" href="#pvecm_edit_corosync_conf" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>corosync.confファイルの編集は、必ずしも簡単ではありません。各クラスタノードには2つのファイルが存在し、1つは<span class="monospaced">/etc/pve/corosync.conf</span>、もう1つは<span class="monospaced">/etc/corosync/corosync.confにあります</span>。クラスタファイルシステム内のファイルを編集すると、変更はローカルファイルに反映されますが、逆は適用されません。</p></div>
<div class="paragraph">
<p>ファイルが変更されると、設定は自動的に更新されます。
これは、稼働中のcorosyncに統合可能な変更が即座に反映されることを意味します。
したがって、編集中にファイルを保存した際に意図しない変更を引き起こすのを避けるため、
常にコピーを作成し、そのコピーを編集することをお勧めします。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cp /etc/pve/corosync<span style="color: #990000">.</span>conf /etc/pve/corosync<span style="color: #990000">.</span>conf<span style="color: #990000">.</span>new</tt></pre></div></div>
<div class="paragraph">
<p>次に、お好みのエディタ（例：<span class="monospaced">nano</span>や<span class="monospaced">vim.tiny</span>）で設定ファイルを開いてください。
これらのエディタは、すべての Proxmox VE ノードにプリインストールされています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">設定変更後は必ず<em>config_version</em>番号をインクリメントしてください。
これを省略すると問題が発生する可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>必要な変更を加えた後、現在の動作中の設定ファイルの別のコピーを作成してください。
これは、新しい設定の適用に失敗した場合や他の問題が発生した場合のバックアップとして機能します。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cp /etc/pve/corosync<span style="color: #990000">.</span>conf /etc/pve/corosync<span style="color: #990000">.</span>conf<span style="color: #990000">.</span>bak</tt></pre></div></div>
<div class="paragraph">
<p>その後、古い設定ファイルを新しいものと置き換えます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>mv /etc/pve/corosync<span style="color: #990000">.</span>conf<span style="color: #990000">.</span>new /etc/pve/corosync<span style="color: #990000">.</span>conf</tt></pre></div></div>
<div class="paragraph">
<p>変更が自動的に適用可能かどうかは、以下のコマンドで確認できます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>systemctl status corosync
journalctl -b -u corosync</tt></pre></div></div>
<div class="paragraph">
<p>変更が自動適用できない場合、corosyncサービスを再起動する必要がある可能性があります。
以下のコマンドで実行してください:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>systemctl restart corosync</tt></pre></div></div>
<div class="paragraph">
<p>エラーが発生した場合は、下記のトラブルシューティングセクションをご確認ください。</p></div>
</div>
<div class="sect3">
<h4 id="_troubleshooting">5.11.2. トラブルシューティング
<a class="headerlink" href="#_troubleshooting" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="_issue_em_quorum_expected_votes_must_be_configured_em">問題:<em>quorum.expected_votes の設定が必要です</em>
<a class="headerlink" href="#_issue_em_quorum_expected_votes_must_be_configured_em" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>corosync の起動に失敗し、システムログに以下のメッセージが表示される場合：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[...]
corosync[1647]:  [QUORUM] クォーラムプロバイダ: corosync_votequorum の初期化に失敗しました。
corosync[1647]:  [SERV  ] サービスエンジン 'corosync_quorum' のロードに失敗しました。理由:
    '設定エラー: nodelist または quorum.expected_votes を設定する必要があります!'
[...]</pre>
</div></div>
<div class="paragraph">
<p>これは、設定で corosync<em>リングの X_addr</em>に指定したホスト名が
解決できなかったことを意味します。</p></div>
</div>
<div class="sect4">
<h5 id="_write_configuration_when_not_quorate">クォーラム未達成時の設定書き込み
<a class="headerlink" href="#_write_configuration_when_not_quorate" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>クォーラムのないノードで<em>/etc/pve/corosync.conf を</em>変更する必要があり、
その操作内容を理解されている場合は、以下を実行してください:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pvecm は<span style="color: #993399">1 を</span>期待していました</tt></pre></div></div>
<div class="paragraph">
<p>これにより、必要な投票数を1に設定し、クラスタをクォーラム状態にします。その後、設定を修正するか、最後に正常に動作していたバックアップ状態に戻すことが可能です。</p></div>
<div class="paragraph">
<p>ただし、corosync が起動しなくなった場合には、この方法だけでは不十分です。
その場合は、corosync が再起動できるよう、
<em>/etc/corosync/corosync.conf</em> にあるローカルコピーの corosync 設定を編集することをお勧めします。
スプリットブレイン状態を回避するため、すべてのノードでこの設定内容が同一であることを必ずご確認ください。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pvecm_corosync_conf_glossary">5.11.3. Corosync設定用語集
<a class="headerlink" href="#pvecm_corosync_conf_glossary" title="Permalink to this heading"></a></h4>
<div class="dlist"><dl>
<dt class="hdlist1">
リングXアドレス</dt>
<dd>
<p>
これはノード間のKronosnet接続における異なるリンクアドレスを指定します。</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_cluster_cold_start">
<span>5.12. クラスターのコールドスタート</span>
<a class="headerlink" href="#_cluster_cold_start" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>すべてのノードがオフラインの状態では、クラスタがクォーラムを満たしていないことは明らかです。
これは停電後の一般的なケースです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">この状態を回避するためには、特に高可用性（HA）を実現したい場合には、
無停電電源装置（UPS、別名バッテリーバックアップ）の使用が常に推奨されます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ノード起動時、<span class="monospaced">pve-guests</span>サービスが開始され、クォーラムを待機します。
クォーラムが達成されると、<span class="monospaced">onboot</span>フラグが設定されている全てのゲストを起動します。</p></div>
<div class="paragraph">
<p>ノードの電源投入時や停電復旧時には、一部のノードが他より早く起動する可能性があります。
クォーラムが達成されるまでゲストの起動は遅延される点にご留意ください。</p></div>
</div>
<div class="sect2">
<h3 id="pvecm_next_id_range">
<span>5.13. ゲスト VMID の自動選択</span>
<a class="headerlink" href="#pvecm_next_id_range" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>新規ゲスト作成時、ウェブインターフェースは自動的にバックエンドに空きVMIDを要求します。
デフォルトの検索範囲は<span class="monospaced">100から</span> <span class="monospaced">1000000</span>（スキーマで強制される最大許容VMIDより低い値）です。</p></div>
<div class="paragraph">
<p>管理者が新しいVMIDを別の範囲で割り当てたい場合もあります。
例えば、一時的なVMと手動でVMIDを選択するVMを簡単に分離するためです。
また、安定した長さのVMIDを提供したい場合もあり、
その際には下限を例えば<span class="monospaced">100000</span>に設定することで、より多くの余裕が生まれます。</p></div>
<div class="paragraph">
<p>このユースケースに対応するため、<span class="monospaced">datacenter.cfg設定</span>ファイルにて下限値、上限値、または両方の境界値を設定することが可能です。この設定ファイルは、ウェブインターフェースの「<em>Datacenter</em>→<em>Options</em>」より編集いただけます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">この範囲は next-id API 呼び出しにのみ使用されるため、厳密な制限値ではありません。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_guest_migration">
<span>5.14. ゲストの移行</span>
<a class="headerlink" href="#_guest_migration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>仮想ゲストを他のノードへ移行する機能は、クラスタ環境において有用です。
このような移行の動作を制御する設定が存在します。
これは設定<span class="monospaced">ファイルdatacenter.cfg</span>経由で、
あるいは特定の移行に対してはAPIやコマンドラインパラメータ経由で
行うことが可能です。</p></div>
<div class="paragraph">
<p>ゲストがオンライン状態かオフライン状態か、あるいはローカルリソース（ローカルディスクなど）を所有しているか否かによって、動作が異なります。</p></div>
<div class="paragraph">
<p>仮想マシンの移行に関する詳細は、
「<a href="#qm_migration">QEMU/KVM 移行」の章</a>をご参照ください。</p></div>
<div class="paragraph">
<p>コンテナ移行の詳細については、
「<a href="#pct_migration">コンテナ移行」の章</a>をご覧ください。</p></div>
<div class="sect3">
<h4 id="_migration_type">5.14.1. 移行タイプ
<a class="headerlink" href="#_migration_type" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>移行タイプは、移行データを暗号化（<span class="monospaced">セキュア</span>）チャネル経由で送信するか、非暗号化（<span class="monospaced">インセキュア</span>）チャネル経由で送信するかを定義します。
移行タイプ<span class="monospaced">をインセキュアに設定すると</span>、仮想ゲストのRAM内容も非暗号化で転送されるため、ゲスト内部の機密データ（例：パスワードや暗号化キー）の情報漏洩につながる可能性があります。</p></div>
<div class="paragraph">
<p>従いまして、ネットワークを完全に管理できず、
盗聴の可能性がある場合は、
セキュアなチャネルの使用を強く推奨いたします。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ストレージの移行は、この設定に従いません。現在、ストレージの内容は常にセキュアなチャネル経由で送信されます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>暗号化には多大な計算能力を要するため、パフォーマンス向上のためにこの設定を<span class="monospaced">非安全</span>に変更されるケースが少なくありません。現代のシステムではAES暗号化をハードウェアで実装しているため、影響は軽減されています。特に10Gbps以上の高速ネットワーク環境では、パフォーマンスへの影響が顕著に現れます。</p></div>
</div>
<div class="sect3">
<h4 id="pvecm_migration_network">5.14.2. 移行ネットワーク
<a class="headerlink" href="#pvecm_migration_network" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトでは、Proxmox VE はクラスタ通信が行われるネットワークを移行トラフィックの送信にも使用します。これは、機密性の高いクラスタ通信が妨害される可能性があり、またこのネットワークがノード上で利用可能な最適な帯域幅を提供していない可能性があるため、最適とは言えません。</p></div>
<div class="paragraph">
<p>移行ネットワークパラメータを設定することで、すべての移行トラフィックに専用ネットワークを使用できるようになります。メモリに加え、オフライン移行時のストレージトラフィックにも影響します。</p></div>
<div class="paragraph">
<p>移行ネットワークはCIDR表記を用いたネットワークとして設定されます。
これにより、各ノードに個別のIPアドレスを設定する必要がなくなる利点があります。
Proxmox VEは、CIDR形式で指定されたネットワークから、
移行先ノードの実際のアドレスを自動的に特定できます。
これを有効にするには、各ノードが該当ネットワーク内に正確に1つのIPアドレスを
持つようにネットワークを指定する必要があります。</p></div>
<div class="sect4">
<h5 id="_example">例<a class="headerlink" href="#_example" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ここでは3ノード構成を想定し、3つの独立したネットワークが存在します。1つはインターネットとのパブリック通信用、1つはクラスタ通信用、そして非常に高速なネットワークを移行専用のネットワークとして使用します。</p></div>
<div class="paragraph">
<p>このような構成におけるネットワーク設定の一例は以下の通りです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>iface eno1 inet manual

# 公開ネットワーク
auto vmbr0
iface vmbr0 inet static
    address 192.X.Y.57/24
    gateway 192.X.Y.1
    bridge-ports eno1
    bridge-stp off
    bridge-fd 0

# クラスタネットワーク
auto eno2
iface eno2 inet static
    address  10.1.1.1/24

# 高速ネットワーク
auto eno3
iface eno3 inet static
    address  10.1.2.1/24</pre>
</div></div>
<div class="paragraph">
<p>ここでは、10.1.2.0/24 ネットワークを移行ネットワークとして使用します。
単一の移行を行う場合、コマンドラインツールの<span class="monospaced">migration_network</span>パラメータを使用して設定できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm migrate 106 tre --online --migration_network 10.1.2.0/24</pre>
</div></div>
<div class="paragraph">
<p>クラスタ内の全移行処理におけるデフォルトネットワークとして設定するには、
<span class="monospaced">/etc/pve/datacenter.cfg</span>ファイルの<span class="monospaced">migration</span>プロパティを次のように設定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># 専用移行ネットワークを使用
migration: secure,network=10.1.2.0/24</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">移行ネットワークが<span class="monospaced">/etc/pve/datacenter.cfg</span> で設定されている場合、
移行タイプは常に設定する必要があります。</td>
</tr></table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_pmxcfs">
6. Proxmox クラスターファイルシステム (pmxcfs)
<a class="headerlink" href="#chapter_pmxcfs" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox Cluster ファイルシステム（「pmxcfs」）は、設定ファイルを保存するためのデータベース駆動型ファイルシステムであり、<span class="monospaced">corosync</span> を使用してすべてのクラスターノードにリアルタイムで複製されます。これを使用して、Proxmox VE 関連のすべての設定ファイルを保存します。</p></div>
<div class="paragraph">
<p>ファイルシステムは全てのデータをディスク上の永続データベース内に保存しますが、
データのコピーはRAMにも保持されます。これにより最大サイズに制限が生じ、
現在は128 MiBとなっています。それでも数千台の仮想マシンの設定を保存するには
十分な容量です。</p></div>
<div class="paragraph">
<p>このシステムは以下の利点を提供します：</p></div>
<div class="ulist"><ul>
<li>
<p>
すべての構成設定を全ノードへリアルタイムでシームレスに複製</p>
</li>
<li>
<p>
VM IDの重複を回避するための強力な整合性チェックを提供します</p>
</li>
<li>
<p>
ノードがクォーラムを失った場合、読み取り専用モードに移行します</p>
</li>
<li>
<p>
すべてのノードへの Corosync クラスタ構成の自動更新</p>
</li>
<li>
<p>
分散ロック機構を含みます</p>
</li>
</ul></div>
<div class="sect2">
<h3 id="_posix_compatibility">
<span>6.1. POSIX互換性</span>
<a class="headerlink" href="#_posix_compatibility" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ファイルシステムはFUSEを基盤としておりますため、動作はPOSIXに準拠しております。ただし、
必要性がないため実装されていない機能もございます：</p></div>
<div class="ulist"><ul>
<li>
<p>
通常のファイルやディレクトリは生成できますが、シンボリックリンクなどは生成できません。</p>
</li>
<li>
<p>
空でないディレクトリの名前変更はできません（これによりVMIDの一意性を保証しやすくなります）。</p>
</li>
<li>
<p>
ファイルの権限を変更することはできません（権限はパスに基づいています）。</p>
</li>
<li>
<p>
<span class="monospaced">O_EXCL</span>による作成はアトミックではありません（旧式 NFS と同様）</p>
</li>
<li>
<p>
<span class="monospaced">O_TRUNC</span>による作成はアトミックではありません（FUSE の制限）</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_file_access_rights">
<span>6.2. ファイルアクセス権限</span>
<a class="headerlink" href="#_file_access_rights" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>すべてのファイルおよびディレクトリは<span class="monospaced">root</span>ユーザーが所有し、グループは<span class="monospaced">www-data</span> となります。root ユーザーのみが書き込み権限を持ちますが、<span class="monospaced">www-data</span>グループはほとんどのファイルを読み取ることができます。以下のパス以下のファイルは root ユーザーのみがアクセス可能です：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>/etc/pve/priv/
/etc/pve/nodes/${NAME}/priv/</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_technology">
<span>6.3.</span>技術
<a class="headerlink" href="#_technology" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>クラスタ通信には<a href="https://www.corosync.org">Corosyncクラスタエンジンを</a>、
データベースファイルには<a href="https://www.sqlite.org">SQLite</a>を使用しております。
ファイルシステムは<a href="https://github.com/libfuse/libfuse">FUSEを用いて</a>ユーザー空間で実装されております。</p></div>
</div>
<div class="sect2">
<h3 id="_file_system_layout">
<span>6.4. ファイルシステム構成</span>
<a class="headerlink" href="#_file_system_layout" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ファイルシステムは以下にマウントされます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>/etc/pve</pre>
</div></div>
<div class="sect3">
<h4 id="_files">6.4.1. ファイル
<a class="headerlink" href="#_files" title="Permalink to this heading"></a></h4>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:50%;" />
<col style="width:50%;" />
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">authkey.pub</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">チケットシステムで使用される公開鍵</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ceph.conf</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cephの設定ファイル（注：/etc/ceph/ceph.confはこのファイルへのシンボリックリンクです）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">corosync.conf</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Corosyncクラスタ設定ファイル（Proxmox VE 4.x以前では、このファイルはcluster.confと呼ばれていました）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">datacenter.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE データセンター全体の設定（キーボードレイアウト、プロキシなど）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">domains.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE 認証ドメイン</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">firewall/cluster.fw</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">すべてのノードに適用されるファイアウォール設定</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">firewall/&amp;lt;NAME&amp;gt;.fw</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">個々のノード向けのファイアウォール設定</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">firewall/&amp;lt;VMID&amp;gt;.fw</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">仮想マシンおよびコンテナ用のファイアウォール設定</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ha/crm_commands</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CRMによって現在実行中のHA操作を表示します</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ha/manager_status</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスタ上の HA サービスに関する JSON 形式の情報</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ha/resources.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">高可用性によって管理されているリソースとその現在の状態</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ha/rules.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HA マネージャーによる HA リソースのスケジューリングに制約を設けるルール</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&amp;lt;NAME&amp;gt;/config</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ノード固有の設定</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&amp;lt;NAME&amp;gt;/lxc/&amp;lt;VMID&amp;gt;.conf</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LXC コンテナの VM 設定データ</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&amp;lt;NAME&amp;gt;/openvz/</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE 4.0 以前では、コンテナ設定データに使用されていました（非推奨、まもなく削除予定）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&amp;lt;NAME&amp;gt;/pve-ssl.key</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">pve-ssl.pem</span>のプライベート SSL キー</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&amp;lt;NAME&amp;gt;/pve-ssl.pem</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web サーバー用の公開 SSL 証明書（クラスタ CA によって署名されています）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&amp;lt;NAME&amp;gt;/pveproxy-ssl.key</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">pveproxy-ssl.pem</span>のプライベート SSL キー（オプション）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&amp;lt;NAME&amp;gt;/pveproxy-ssl.pem</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web サーバー用の公開 SSL 証明書（チェーン）（<span class="monospaced">pve-ssl.pem</span> のオプションによる上書き）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&amp;lt;NAME&amp;gt;/qemu-server/&amp;lt;VMID&amp;gt;.conf</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KVM VM の構成データ</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/authkey.key</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">チケットシステムで使用される秘密鍵</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/authorized_keys</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">認証用のクラスタメンバーの SSH キー</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/ceph*</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ceph 認証キーおよび関連する権限</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/known_hosts</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスタメンバーの検証用SSH鍵</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/lock/*</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">安全なクラスター全体の運用を確保するために各種サービスが使用するロックファイル</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/pve-root-ca.key</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスタ CA の秘密鍵</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/shadow.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PVE Realm ユーザー用のシャドウパスワードファイル</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/storage/&amp;lt;STORAGE-ID&amp;gt;.pw</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ストレージのパスワードを平文で保持しています</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/tfa.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base64 エンコードされた二要素認証の設定</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">priv/token.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">すべてのトークンの API トークン秘密鍵</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">pve-root-ca.pem</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスタ CA の公開証明書</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">pve-www.key</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSRFトークン生成に使用される秘密鍵</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">sdn/*</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ソフトウェア定義ネットワーク（SDN）用の共有設定ファイル</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">status.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE 外部メトリクスサーバーの設定</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">storage.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE ストレージ設定</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">user.cfg</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE アクセス制御設定（ユーザー/グループ/…）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">virtual-guest/cpu-models.conf</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">カスタム CPU モデルを保存するための設定ファイル</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">vzdump.cron</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスタ全体の vzdump バックアップジョブのスケジュール</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_symbolic_links">6.4.2. シンボリックリンク
<a class="headerlink" href="#_symbolic_links" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>クラスタファイルシステム内の特定のディレクトリでは、シンボリックリンクを使用してノード自身の設定ファイルを指すように構成されています。したがって、下記の表で参照されているファイルは、クラスタの各ノード上で異なるファイルを指しています。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:50%;" />
<col style="width:50%;" />
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">local</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&amp;lt;LOCAL_HOST_NAME&amp;gt;</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">lxc</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">ノード/&amp;lt;ローカルホスト名&amp;gt;/lxc/</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">openvz</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&amp;lt;ローカルホスト名&amp;gt;/openvz/</span>(非推奨、まもなく削除予定)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">qemu-server</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">nodes/&amp;lt;ローカルホスト名&amp;gt;/qemu-server/</span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_special_status_files_for_debugging_json">6.4.3. デバッグ用特殊ステータスファイル (JSON)
<a class="headerlink" href="#_special_status_files_for_debugging_json" title="Permalink to this heading"></a></h4>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:50%;" />
<col style="width:50%;" />
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">.version</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファイルバージョン（ファイルの変更を検出するため）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">.members</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスタメンバーに関する情報</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">.vmlist</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">すべての仮想マシンのリスト</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">.clusterlog</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスタログ（直近50件）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">.rrd</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RRDデータ（最新のエントリ）</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_enable_disable_debugging">6.4.4. デバッグの有効化/無効化
<a class="headerlink" href="#_enable_disable_debugging" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>詳細なsyslogメッセージを有効にするには、以下を実行してください:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>echo "1" &amp;gt;/etc/pve/.debug</pre>
</div></div>
<div class="paragraph">
<p>詳細なシステムログメッセージを無効にするには、以下のように実行します:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>echo "0" &amp;gt;/etc/pve/.debug</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_recovery">
<span>6.5.</span>リカバリ
<a class="headerlink" href="#_recovery" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEホストにハードウェア問題など重大な障害が発生した場合、
pmxcfsデータベースファイル
<span class="monospaced">/var/lib/pve-cluster/config.db</span> をコピーし、
新しいProxmox VEホストへ移動することが有効な対策となります。新しいホスト（何も実行されていない状態）では、
<span class="monospaced">pve-cluster</span>サービスを停止し、<span class="monospaced">config.db</span>ファイルを置き換える必要があります（必要な権限は<span class="monospaced">0600</span>）。
その後、失われた Proxmox VE ホストに合わせて<span class="monospaced">/etc/hostname</span>および<span class="monospaced">/etc/hosts</span>を調整し、
再起動して確認してください（VM/CT データのバックアップをお忘れなく）。</p></div>
<div class="sect3">
<h4 id="_remove_cluster_configuration">6.5.1. クラスタ構成の削除
<a class="headerlink" href="#_remove_cluster_configuration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>推奨される方法は、クラスタからノードを削除した後、
そのノードを再インストールすることです。これにより、
すべての秘密のクラスタ/SSHキーおよび共有設定データが
確実に破棄されます。</p></div>
<div class="paragraph">
<p>場合によっては、再インストールせずにノードをローカルモードに戻すことを選択されるかもしれません。その手順については、
<a href="#pvecm_separate_node_without_reinstall">「再インストールせずにノードを分離する</a>」</p></div>
</div>
<div class="sect3">
<h4 id="_recovering_moving_guests_from_failed_nodes">6.5.2. 障害発生ノードからのゲスト復旧/移動
<a class="headerlink" href="#_recovering_moving_guests_from_failed_nodes" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ゲスト設定ファイル（VMの場合は<span class="monospaced">nodes/&amp;lt;NAME&amp;gt;/qemu-server/</span>、コンテナの場合は<span class="monospaced">nodes/&amp;lt;NAME&amp;gt;/lxc/</span>）については、Proxmox VE は該当するゲストの所有者として、そのゲストを含むノード<span class="monospaced">&amp;lt;NAME&amp;gt;</span>を認識します。この概念により、ゲスト設定の同時変更を防ぐために、高コストなクラスター全体のロックではなく、ローカルロックの使用が可能となります。</p></div>
<div class="paragraph">
<p>その結果、ゲストの所有ノードが障害（例：停電、フェンシングイベントなど）で停止した場合、通常のマイグレーションは実行できません（たとえ全てのディスクが共有ストレージ上に存在する場合でも）。これは、（オフライン状態の）所有ノードに対するローカルロックを取得できないためです。ただし、HA管理対象のゲストについては問題となりません。Proxmox VEの高可用性スタックには、フェンシングされたノードからのゲストの正確かつ自動的な復旧を保証するために必要な（クラスタ全体の）ロック機能とウォッチドッグ機能が組み込まれているためです。</p></div>
<div class="paragraph">
<p>非HA管理ゲストが共有ディスクのみを所有している場合（障害発生ノードでのみ利用可能なローカルリソースを他に持たない場合）、手動での復旧が可能です。具体的には、<span class="monospaced">障害発生ノードの/etc/pve/ディレクトリから</span>ゲスト設定ファイルをオンラインノードのディレクトリへ移動するだけで、ゲストの論理的所有者または配置先を変更できます。</p></div>
<div class="paragraph">
<p>例えば、<span class="monospaced">オフラインノード1</span>から<span class="monospaced">別のノード2</span>へID<span class="monospaced">100の</span>仮想マシンを復旧させるには、クラスタ内の任意のメンバノードでroot権限にて以下のコマンドを実行します：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>mv /etc/pve/nodes/node1/qemu-server/100.conf /etc/pve/nodes/node2/qemu-server/</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このようなゲストを手動で復旧させる前に、
障害が発生したソースノードが確実に電源オフ/フェンス状態であることを
必ずご確認ください。そうしないと、Proxmox VEのロック原理が
<span class="monospaced">mvコマンド</span>によって破られ、予期せぬ結果を招く可能性があります。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMVUlEQVRogdWZeXDVVZbHP7/f27JB
wtJIiCERRFlbx5FuHRrRBgtBsRIwCCOrFmGmiDBjYVNlQlgiQjU6IjI4xLJxGf5QGp0Cbaftsu3R
hu6aYXqgLZoWEsjyyDP7S972e7/l3vnj5cW3Ji9M/zOn6lRS997fvd/vueece+59ipSS/89iv5mP
ZEQQQsS23RQARVEAUFUVRVFQog0ZyogJSClld3c327Ztw7IsLMuKto90KgBsNhtVVVXMnj2bvLw8
7Ha7HBEJKWXGKoSQXV1dcsuWLfLSpUsyKkKIIdWyrLTqdrvlU089Jc+cOSM9Ho8Mh8NSCCEzxTRi
8JWVlbKtre0vAt6yLGmapmxtbZXr1q2TZ86ckW1tbSMikTH4GzduyKqqqkHwsSA1TZOhUChOg8Hg
oBqGIQ3DSAk+VleuXDliEspwviullD09PbzwwgscO3Yszt91XScQCNDZ2YlhGIPfuFwu7Pb48FJV
lZycnEG/z8/PRwiBqqqDYzweD88//zyrV69m7ty5jBs3DofDMWRgD0lASik9Hg979uzh2LFjcYEa
CoVob2/n2q9+hbZ585BGSCWltbVMr61NtSYbN25k7dq1zJkzZ1gSaqrGWPD79+9PAh8MBuns7OTi
e+8R2rwZCYOaqTTt3cuf6+qSwAMcP36co0eP8vXXX9Pd3Y1hGMg0lk65A1HwdXV1vPHGG0mW7+jo
4A8/+xn2BAAAI0riQOnu3cyork7Zt3btWtavX89dd92VdieSCEgppdvt5sCBAxw5ciSuLxQK0dTU
RMOHHyJ37hwh1NSiAKU7djDzxRdT9q9YsYJt27YxY8aMlCTiCEgp5eXLl6mvr+fVV1+NmygYDNLW
1sY3J09ipLEYQDPw2sBfCTwMLARKgKwhiNxWU8OsXbvi2qLYnnzySSorK1PvRGyqvH79uty6dWtS
Lg8EAvLKlSvyo1275M8hSV8H+eMBvRPkP9Vslp0tV6W3u12+c7hOTgT5NyAXgtwE8gTIUyn0D9XV
0jAMqet6klZUVMjPP/88KcWqUcs3NjZy+PBhDh06FGeFqNtcOnECY8+euICVwDWgFtj/m1/wD+8f
5xtg6uy5ZI+5BSkkU6fexgu7tvLWhd/x1tXL5P/905wAggnzSODavn388Sc/SblDL7/8Mq+99hqX
L1+OC2zb7t27uX79+u7Dhw+ndJvW1lYaP/qI0EDKS1z0XeDjC7/l9llz+d6EWxjv0imdcgeFRcVo
fR46vm1Cx8ndP5hP3qjR/GDuX/GbC5/iberl1qirxGjv73+PYRjc8tBDcVhGjRpFRUUF27dvp7i4
mPz8fFwuV2QHVq1aldLyDQ0NXDt5En91NRIQCRqNHld2HsLUCfu6GD9mNIoVQggDy9RQpYLTbkdV
7Vh6CH9vJ/fcfz/vALsAN2AlzHv1wAEu1tTExUI0Hl555RXq6upobm4mEAhECEyePDkOvK7rtLS0
cOP0aby1tUnAo2oNkFAUSTjoRfN+ix7wgjRBShACVVFQRGSkHvTypwtnmXHPQhrbb3D0k1McAdpi
DBLVhp/+lIvV1UlV7oQJE8jNzcXtduPz+ZIPMtM0aWhooPH99+mtrU1ymVRqUxUQFlJYSBFGCivG
OSyEaSCFAGlhd+Vy7w/n43BmM3POXWx69hl8AyMTDXTl4EEu7t2bCBGAQCCAruupCdjtdrp3705r
+ViN22YhsUwdyzRBCpACyzIRMnpngCxXNjYlMk4L+ggoYXxp5pbAlX37cDgcSQSEEAxmoVgQg/9n
AP67bVdAUcFmQ3W6IgtIiWUKLCGwLGvQj69e+m+EsBB6iGB/N/3e9oyNlIgRYm5kiR2JH0L6MkFY
Ei0UQKAycdJUbIodT3Mjpu6n3xfCptoRlomQCqZpRkhLCykMhLBQSV1HJbalKnvSF3MpNO0OSIEw
DWyuPCaVzCRv7ER8Ph+mtJM35lZsdjvuxktYhobDkYOCgqJEDWLLaAfSVc1p78SJO2AAvUBggLUN
KIx2Kgqjv3crY2wOiqaqKKoKihKJCctCC/npbW+jq7sbS7UjkGCZCCkQQkdJsV6mRWHGBH4HLHpx
F3LcGDq6u7nw2S85++V/4gb0kB9hFoAZwuZwgc2BqjpQVRWbzYXd4cDlysHn7WJi0W2EfH24XA6E
jKySqhTPtDRPIjB4XUtoPw3sKV/O+KJipJT4V63mq3/7Obu21/LN/5xl9l/PIys7G2fOaBS7E5vN
QrU7UW0KNlUFp5P8MeO5/8HFhPo7CXr7MMIaQW8neSkMlqnEEYj1s8QJbwXaWpopmDgJh93OqHGF
LFy9jjunTeHNo2uAvUy54/uMuaUYV24BUpVYpoVEwaY4UVUbitNJ9ugxOBw2tEAPfX29QCjuVB9O
EmNBTdeRGEj3A56OdkwtgDDCCKFjz8ql6N55/G3VcRouX+SXH72Ht6udcCg4cJiJSPIn8oCloIKU
KAhURUUIiVCjx128pjtrEiVtFkrMNNOBA+s34XG3YIRDSMtAkSbOrDzuvOchHnmiklEFY3n76G7O
f/nv9Ht7EMJCSjGoljCxjOBAnaSjhYPowevDZrx04FMSGLwnJEzmAOYCn33wAUYoiGXoSMsEoeNw
ZTO2aDrzFpWxck0VJVOn4fd2E/T7oneNyOFlGkjLwNTD6FoILRQEa/hDcyhJIuB0OlFVNeVE04B3
XjnC+d9+hRYKYJlhpDBBGDidDiaUfp/xk24nJ3c0eaPzsKsgzEhtZJkGIuzDNDRCAR99fb309XYh
NAYPsnQ6IgJSSgoKCihavDilJZ4Aajf8HVf/fAnLCCNNAyktECaqIsgbV8So0WMHrn2RGLBMHREO
YBg6eiiIFgzQ7/US8vmYoEDuENa/u6oqcwJRPysoKOC+N9+kcNGiJGvkAQuADY+twn3tCuFg/4CV
DbB0VKHhzHbhdGVhs6kgDKTuR9f86KEAWtBHd0c73p52pB5Av5KewJxnnmHeoUOEw+EkjHEEYi8M
EHlFKyws5IfHjlG4cGHSxJOA1cATPy7nT388j+73YoYDCEuP1DhSRrKOlFhmmLAWQNMCBHw9tHtu
8K2nBcsI8uGxf8HoiRBINNTtjz7KQ/X1xL6iRDHGvubZAfr7+1Nuz+TJk6G+nv/atInmX/86rq8A
WAlUrahk/Fio/8XHjM4fi93pHCgRFCzLQtd1tFAQLeCjs9NNb4cHxdL44J8PozfD7XyXRqNy97p1
PPz220gp0XU9zriKogw+SaqqGtmB48ePU15enkRASklRURH31tcz6cEHk1JrAfAUcEcPLLjvMU69
/694uzsI+X3093TS5blBl8eNt72VHk8Tfd9eR+vv4MQ/HkZpiJwttgTL3/Hoo2nBNzY2smjRIhYs
WEBBQQEulyvyLuT3+2VTUxM7d+7k5MmTKXNuS0sL555+mtYvv0zqE0A7kavhqFL4oAlCCWOygGIi
qTiHyMnuTBgz/bHHKDt9GillnN8D+P1+ysrKWLJkCdOmTWPWrFmUlpZGCAghpN/vp7m5mZqaGl5/
/XUKCwtJFLfbzX+sX8+Nr75K6rtZiXr49KVLKf/4Y4QQ6LqeBP6RRx6hvLycadOmMXPmTEpKSsjN
zf3uZS6WRHV1NadOnUpaTEpJa2sr5zZupOkmSaQqk2csWcLyTz4BQNO0uL7GxkbWr1+fErzNZlMG
w1lVVSUvL4+SkhL27dvH8uXL8Xg8ceABiouLue+ttyieN2+IK2Z6TRx/5+LFacE3NDRQWVmZFjwk
nAOxJF566SW2bNnChQsXkmKipKSEB959l9vmzcvo1pZOpz/8ME98+mla8Bs2bGDZsmVpwUOa5/VE
d0oXE319fXxWXs43Z88m9Q0n03/0I1YPJIRE8OfOnWPHjh2UlZUNCT4tgUQSO3fupKqqigceeGCw
P/a7VM8emUg0VcbK+fPn2bp1KytWrBgW/JAEEknU1NTw7LPPMn/+/GFBZQI8lZw/f57nnnuO5cuX
M2XKlGHBD0sgkURdXR2PP/44FRUVNwV+qP7Tp09z8ODBjNxmRAQSSRw4cIBly5axdOnSvwh4RVH4
4osv2L9/P2VlZRlbfkQEEkls376djo4OQqHE83bk4nK5EEKwZs0aSktLRwR+RATgOxItLS1cu3aN
vr6+wTfK/4tEfzeeMmUKkydPzhg8jJAAREgEg0H6+vrQNC2pFL8ZUVWVrKws8vPzycnJQVXVjH/s
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">ローカルディスク（またはオフラインノードでのみ利用可能なその他のローカルリソース）を持つゲストは、この方法では復旧できません。障害発生ノードがクラスターに再参加するのを待つか、バックアップから該当ゲストを復元してください。</td>
</tr></table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_storage">
7. Proxmox VE ストレージ
<a class="headerlink" href="#chapter_storage" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VEのストレージモデルは非常に柔軟です。仮想マシンイメージは、
1つまたは複数のローカルストレージに保存することも、NFSやiSCSI（NAS、SAN）などの
共有ストレージに保存することも可能です。制限はなく、
お好きなだけストレージプールを設定いただけます。Debian Linuxで利用可能な
あらゆるストレージ技術をご利用いただけます。</p></div>
<div class="paragraph">
<p>共有ストレージに仮想マシンを保存する主な利点の一つは、
クラスタ内の全ノードが仮想マシンのディスクイメージに直接アクセスできるため、
稼働中のマシンをダウンタイムなしでライブマイグレーションできる点です。
仮想マシンイメージデータのコピーが不要なため、この場合ライブマイグレーションは非常に高速です。</p></div>
<div class="paragraph">
<p>ストレージライブラリ（パッケージ<span class="monospaced">libpve-storage-perl</span>）は柔軟なプラグインシステムを採用し、
あらゆるストレージタイプに対して共通インターフェースを提供します。これにより、
将来的に新たなストレージタイプを容易に追加することが可能です。</p></div>
<div class="sect2">
<h3 id="_storage_types">
<span>7.1. ストレージの種類</span>
<a class="headerlink" href="#_storage_types" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージタイプには基本的に2種類あります：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ファイルレベルストレージ</dt>
<dd>
<p>
ファイルレベルベースのストレージ技術は、完全な機能を備えた（POSIX準拠の）
ファイルシステムへのアクセスを可能にします。これらは一般的に、あらゆるブロックレベルストレージ（下記参照）よりも柔軟性が高く、あらゆるタイプのコンテンツを保存できます。ZFSはおそらく最も先進的なシステムであり、スナップショットとクローンを完全にサポートしています。</p>
</dd>
<dt class="hdlist1">
ブロックレベルストレージ</dt>
<dd>
<p>
大規模な<em>生</em>イメージの保存が可能です。通常、このようなストレージタイプでは他のファイル（ISO、バックアップなど）を保存することはできません。
最新のブロックレベルストレージの実装のほとんどは、スナップショットとクローンをサポートしています。
Ceph RADOSは分散システムであり、ストレージデータを異なるノードに複製し、RBD（RADOSブロックデバイス）としてアクセスできます。</p>
</dd>
</dl></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 2. 利用可能なストレージの種類</caption>
<col style="width:28%;" />
<col style="width:14%;" />
<col style="width:14%;" />
<col style="width:14%;" />
<col style="width:14%;" />
<col style="width:14%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">説明    </th>
<th class="tableblock halign-left valign-top">プラグインタイプ </th>
<th class="tableblock halign-left valign-top">レベル  </th>
<th class="tableblock halign-left valign-top">共有</th>
<th class="tableblock halign-left valign-top">スナップショット</th>
<th class="tableblock halign-left valign-top">安定版</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZFS (ローカル)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">zfspool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><sup>both1</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ディレクトリ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">ディレクトリ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファイル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい<sup>２</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BTRFS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">btrfs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファイル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><sup>TP5</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NFS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">NFS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファイル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい<sup>２</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIFS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">CIFS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファイル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい<sup>２</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox バックアップ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">pbs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">両方</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">該当なし</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CephFS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">cephfs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファイル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LVM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">lvm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブロック</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><sup>いいえ3</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><sup>はい4</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LVM-thin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">lvmthin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブロック</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">iSCSI/カーネル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">iscsi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブロック</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">iSCSI/libiscsi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">iscsidirect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブロック</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ceph/RBD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">rbd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブロック</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZFS over iSCSI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">zfs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブロック</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph">
<p><sup>1</sup>: VM用ディスクイメージはZFSボリューム（zvol）データセットに保存され、
ブロックデバイス機能を提供します。</p></div>
<div class="paragraph">
<p><sup>2</sup>: ファイルベースのストレージでは、<em>qcow2</em>形式によるスナップショットが可能です。
内部スナップショット機能を使用するか、ボリューム<sup>チェーンとして</sup>スナップショットを作成します。</p></div>
<div class="paragraph">
<p><sup>3</sup>: iSCSIまたはFCベースのストレージ上にLVMを使用することが可能です。
<span class="monospaced">これにより共有LVMストレージが</span>実現されます</p></div>
<div class="paragraph">
<p><sup>4</sup>: Proxmox VE 9以降、仮想マシン向けにボリュームチェーン方式のスナップショットが利用可能となりました。
この方式ではスナップショットデータ用に独立したボリュームを使用し、それらを階層化します。
<a href="#pvesm_lvm_config">詳細はLVM設定セクションの</a> <span class="monospaced">「snapshot-as-volume-chain」</span>説明をご参照ください。</p></div>
<div class="paragraph">
<p><sup>5</sup>ベストエフォートサポートによる技術プレビューです。</p></div>
<div class="sect3">
<h4 id="_thin_provisioning">7.1.1. シンプロビジョニング
<a class="headerlink" href="#_thin_provisioning" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>複数のストレージおよびQEMUイメージ<span class="monospaced">フォーマットqcow2は</span>、<em>シンプロビジョニング</em>をサポートしております。シンプロビジョニングを有効化すると、ゲストシステムが実際に使用するブロックのみがストレージに書き込まれます。</p></div>
<div class="paragraph">
<p>例えば、32GBのハードディスクを持つ仮想マシンを作成し、
ゲストOSをインストールした後、仮想マシンのルートファイルシステムに
3GBのデータしか含まれていない場合、ゲストVMが32GBのハードドライブを認識していても、ストレージに書き込まれるのは3GBのみとなります。このように、シンプロビジョニングにより、現在利用可能なストレージブロックよりも大きなディスクイメージを作成することが可能です。VM用に大きなディスクイメージを作成し、必要が生じた際に、VMのファイルシステムをリサイズすることなく、ストレージにディスクを追加することができます。</p></div>
<div class="paragraph">
<p>「スナップショット」機能を備えたすべてのストレージタイプは、シンプロビジョニングもサポートしております。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ストレージが満杯になると、そのストレージ上のボリュームを使用しているすべてのゲストが
IOエラーを受け取ります。これによりファイルシステムに不整合が生じ、
データが破損する可能性があります。そのため、ストレージリソースの過剰プロビジョニングを避けるか、
空き容量を注意深く監視してこのような状態を回避することをお勧めします。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_storage_configuration">
<span>7.2. ストレージ構成</span>
<a class="headerlink" href="#_storage_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEに関連するすべてのストレージ設定は、<span class="monospaced">/etc/pve/storage.cfgという</span>単一のテキストファイル内に保存されます。このファイルは<span class="monospaced">/etc/pve/ディレクトリ</span>内にあるため、自動的にすべてのクラスターノードに配布されます。したがって、すべてのノードが同一のストレージ設定を共有します。</p></div>
<div class="paragraph">
<p>共有ストレージの場合、同じ「共有」ストレージが全ノードからアクセス可能であるため、
ストレージ設定の共有は極めて合理的です。
ローカルストレージタイプにおいても有用です。
この場合、そのようなローカルストレージは全ノードで利用可能ですが、
物理的には異なり、全く異なる内容を持つ可能性があります。</p></div>
<div class="sect3">
<h4 id="_storage_pools">7.2.1. ストレージプール
<a class="headerlink" href="#_storage_pools" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>各ストレージプールには<span class="monospaced">&amp;lt;type&amp;gt;</span> が設定され、<span class="monospaced">&amp;lt;STORAGE_ID&amp;gt;</span> によって一意に識別されます。プール構成は次のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>&amp;lt;type&amp;gt;: &amp;lt;STORAGE_ID&amp;gt;
        &amp;lt;property&amp;gt; &amp;lt;value&amp;gt;
        &amp;lt;property&amp;gt; &amp;lt;value&amp;gt;
        &amp;lt;property&amp;gt;
        ...</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">&amp;lt;type&amp;gt;: &amp;lt;STORAGE_ID&amp;gt;</span>行でプール定義が始まり、その後プロパティのリストが続きます。ほとんどのプロパティには値が必要です。合理的なデフォルト値が設定されているものについては、値を省略できます。</p></div>
<div class="paragraph">
<p>より具体的に説明しますと、インストール後のデフォルトのストレージ設定をご参照ください。
これには<span class="monospaced">「local」</span>という特別なローカルストレージプールが含まれており、
<span class="monospaced">/var/lib/vz</span>ディレクトリを指し、常に利用可能です。
Proxmox VE インストーラーは、インストール時に選択されたストレージタイプに応じて
追加のストレージエントリを作成します。</p></div>
<div class="listingblock">
<div class="title">デフォルトのストレージ設定 (<span class="monospaced">/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>ディレクトリ: local
        パス /var/lib/vz
        内容 iso,vztmpl,backup

# LVMベースのインストールにおけるデフォルトイメージストア
lvmthin: local-lvm
        thinpool data
        vgname pve
        content rootdir,images

# ZFSベースのインストールにおけるデフォルトイメージストア
zfspool: local-zfs
        pool rpool/data
        sparse
        content images,rootdir</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">同一の基盤ストレージを指す複数のストレージ構成が存在することは問題となります。このような<em>エイリアスされたストレージ</em>構成では、同一のディスクイメージを指す2つの異なるボリュームID（<em>volid</em>）が生成される可能性があります。Proxmox VEでは、イメージが指すボリュームIDが一意であることを前提としています。<em>エイリアスされた</em>ストレージ構成で異なるコンテンツタイプを選択することは可能ですが、推奨されません。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_common_storage_properties">7.2.2. 共通ストレージプロパティ
<a class="headerlink" href="#_common_storage_properties" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>いくつかのストレージプロパティは、異なるストレージタイプ間で共通しています。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ノード</dt>
<dd>
<p>
このストレージが利用可能／アクセス可能なクラスタノード名のリストです。
このプロパティを使用して、ストレージへのアクセスを特定のノード群に制限することが可能です。</p>
</dd>
<dt class="hdlist1">
content</dt>
<dd>
<p>
ストレージは複数のコンテンツタイプ（例：仮想ディスクイメージ、CD-ROM ISOイメージ、コンテナテンプレート、コンテナルートディレクトリ）をサポート可能です。全てのストレージタイプが全てのコンテンツタイプをサポートするわけではありません。このプロパティを設定することで、当該ストレージの使用目的を選択できます。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
images</dt>
<dd>
<p>
QEMU/KVM VM イメージ。</p>
</dd>
<dt class="hdlist1">
ルートディレクトリ</dt>
<dd>
<p>
コンテナデータの保存を許可します。</p>
</dd>
<dt class="hdlist1">
vztmpl</dt>
<dd>
<p>
コンテナテンプレート。</p>
</dd>
<dt class="hdlist1">
バックアップ</dt>
<dd>
<p>
バックアップファイル（<span class="monospaced">vzdump</span>）。</p>
</dd>
<dt class="hdlist1">
iso</dt>
<dd>
<p>
ISOイメージ</p>
</dd>
<dt class="hdlist1">
スニペット</dt>
<dd>
<p>
スニペットファイル（例：ゲストフックスクリプト）</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
共有</dt>
<dd>
<p>
すべてのノード（または<em>nodes</em>オプションで列挙されたノード）に同一コンテンツが存在する単一ストレージであることを示します。ローカルストレージのコンテンツを自動的に他のノードからアクセス可能にするものではなく、既に共有されているストレージをそのようにマークするだけです。</p>
</dd>
<dt class="hdlist1">
無効化</dt>
<dd>
<p>
このフラグを使用すると、ストレージを完全に無効化できます。</p>
</dd>
<dt class="hdlist1">
バックアップの削除</dt>
<dd>
<p>
バックアップの保持期間設定です。詳細は
「<a href="#vzdump_retention">バックアップの保持期間</a>」をご参照ください。</p>
</dd>
<dt class="hdlist1">
フォーマット</dt>
<dd>
<p>
デフォルトのイメージ形式（<span class="monospaced">raw|qcow2|vmdk</span>）</p>
</dd>
<dt class="hdlist1">
事前割り当て</dt>
<dd>
<p>
ファイルベースストレージ上の<span class="monospaced">raw</span> <span class="monospaced">およびqcow2イメージ</span>に対する事前割り当てモード（<span class="monospaced">off|metadata|falloc|full</span>）。デフォルト<span class="monospaced">はmetadataで</span>、<span class="monospaced">raw</span>イメージでは<span class="monospaced">offと同様に</span>扱われます。大規模な<span class="monospaced">qcow2イメージ</span>とネットワークストレージを併用する場合、<span class="monospaced">off</span>を使用するとタイムアウト回避に有効です。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">異なる Proxmox VE クラスタ間で同一のストレージプールを使用することは推奨されません。一部のストレージ操作では排他アクセスが必要となるため、適切なロック処理が求められます。これは同一クラスタ内では実装されていますが、異なるクラスタ間では機能しません。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_volumes">
<span>7.3.</span>ボリューム
<a class="headerlink" href="#_volumes" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージデータの参照には特別な表記法を使用します。ストレージプールからデータを割り当てると、ボリューム識別子が返されます。<span class="monospaced">ボリュームは&amp;lt;STORAGE_ID&amp;gt;</span>に、ストレージタイプに応じたボリューム名をコロンで区切って続けます。<span class="monospaced">有効な&amp;lt;VOLUME_ID&amp;gt;</span>の形式は以下の通りです：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>local:230/example-image.raw</pre>
</div></div>
<div class="literalblock">
<div class="content monospaced">
<pre>local:iso/debian-501-amd64-netinst.iso</pre>
</div></div>
<div class="literalblock">
<div class="content monospaced">
<pre>local:vztmpl/debian-5.0-joomla_1.5.9-1_i386.tar.gz</pre>
</div></div>
<div class="literalblock">
<div class="content monospaced">
<pre>iscsi-storage:0.0.2.scsi-14f504e46494c4500494b5042546d2d646744372d31616d61</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">&amp;lt;VOLUME_ID&amp;gt;</span>のファイルシステムパスを取得するには、以下を使用します:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm パス &amp;lt;VOLUME_ID&amp;gt;</pre>
</div></div>
<div class="sect3">
<h4 id="_volume_ownership">7.3.1. ボリュームの所有権
<a class="headerlink" href="#_volume_ownership" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">イメージタイプの</span>ボリュームには所有権の関係が存在します。
各ボリュームは仮想マシン（VM）またはコンテナによって所有されます。
例えば、ボリューム<span class="monospaced">local:230/example-image.raw</span>は仮想マシン 230 によって所有されています。
ほとんどのストレージバックエンドでは、この所有権情報をボリューム名にエンコードします。</p></div>
<div class="paragraph">
<p>仮想マシンまたはコンテナを削除すると、システムはその仮想マシンまたはコンテナが所有する関連するすべてのボリュームも削除します。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_using_the_command_line_interface">
<span>7.4. コマンドラインインターフェースの使用方法</span>
<a class="headerlink" href="#_using_the_command_line_interface" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールとボリューム識別子の概念を理解されることをお勧めいたしますが、実際の運用では、コマンドライン上でこれらの低レベル操作を強制されることはありません。通常、ボリュームの割り当てや削除は、仮想マシンおよびコンテナ管理ツールによって行われます。</p></div>
<div class="paragraph">
<p>ただし、<span class="monospaced">pvesm</span>（「Proxmox VE Storage Manager」）と呼ばれるコマンドラインツールが用意されており、一般的なストレージ管理タスクを実行することが可能です。</p></div>
<div class="sect3">
<h4 id="_examples">7.4.1. 例<a class="headerlink" href="#_examples" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ストレージプールの追加</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm add &amp;lt;TYPE&amp;gt; &amp;lt;STORAGE_ID&amp;gt; &amp;lt;OPTIONS&amp;gt;
pvesm add dir &amp;lt;STORAGE_ID&amp;gt; --path &amp;lt;PATH&amp;gt;
pvesm add nfs &amp;lt;STORAGE_ID&amp;gt; --path &amp;lt;PATH&amp;gt;--server &amp;lt;サーバー名&amp;gt;--export &amp;lt;エクスポート名&amp;gt;
pvesm add lvm &amp;lt;ストレージID&amp;gt; --vgname &amp;lt;ボリュームグループ名&amp;gt;
pvesm add iscsi &amp;lt;ストレージID&amp;gt; --portal &amp;lt;ホスト[:ポート]&amp;gt; --target &amp;lt;ターゲット&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>ストレージプールの無効化</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm set &amp;lt;STORAGE_ID&amp;gt; --disable 1</pre>
</div></div>
<div class="paragraph">
<p>ストレージプールの有効化</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm set &amp;lt;STORAGE_ID&amp;gt; --disable 0</pre>
</div></div>
<div class="paragraph">
<p>ストレージオプションの変更/設定</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm set &amp;lt;STORAGE_ID&amp;gt; &amp;lt;OPTIONS&amp;gt;
pvesm set &amp;lt;STORAGE_ID&amp;gt; --shared 1
pvesm set local --format qcow2
pvesm set &amp;lt;STORAGE_ID&amp;gt; --content iso</pre>
</div></div>
<div class="paragraph">
<p>ストレージプールの削除。これによりデータが削除されることはなく、
接続解除やアンマウントも行われません。ストレージ設定が削除されるだけです。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm remove &amp;lt;STORAGE_ID&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>ボリュームの割り当て</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm alloc &amp;lt;STORAGE_ID&amp;gt; &amp;lt;VMID&amp;gt; &amp;lt;name&amp;gt; &amp;lt;size&amp;gt; [--format &amp;lt;raw|qcow2&amp;gt;]</pre>
</div></div>
<div class="paragraph">
<p>ローカルストレージに4GBのボリュームを割り当てます。
<span class="monospaced">&amp;lt;name&amp;gt;</span>に空の文字列を指定した場合、名前は自動生成されます</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm alloc local &amp;lt;VMID&amp;gt; '' 4G</pre>
</div></div>
<div class="paragraph">
<p>ボリュームを解放する</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm free &amp;lt;VOLUME_ID&amp;gt;</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">これにより、すべてのボリュームデータが完全に破壊されます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ストレージ状態の一覧表示</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm ステータス</pre>
</div></div>
<div class="paragraph">
<p>ストレージの内容を表示します</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm list &amp;lt;STORAGE_ID&amp;gt; [--vmid &amp;lt;VMID&amp;gt;]</pre>
</div></div>
<div class="paragraph">
<p>VMID ごとに割り当てられたボリュームの一覧表示</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm list &amp;lt;STORAGE_ID&amp;gt; --vmid &amp;lt;VMID&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>ISOイメージの一覧表示</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm list &amp;lt;STORAGE_ID&amp;gt; --content iso</pre>
</div></div>
<div class="paragraph">
<p>コンテナテンプレートのリスト表示</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm list &amp;lt;STORAGE_ID&amp;gt; --content vztmpl</pre>
</div></div>
<div class="paragraph">
<p>ボリュームのファイルシステムパスを表示</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm path &amp;lt;VOLUME_ID&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>ボリューム<span class="monospaced">local:103/vm-103-disk-0.qcow2</span>をファイル<span class="monospaced">target</span> へエクスポートします。
これは主に<span class="monospaced">pvesm import</span> との内部連携で使用されます。
ストリーム形式 qcow2+size は qcow2 形式とは異なります。
したがって、エクスポートされたファイルは単純に VM にアタッチすることはできません。
これは他の形式についても同様です。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm export local:103/vm-103-disk-0.qcow2 qcow2+size target --with-snapshots 1</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_directory">
<span>7.5. ディレクトリ・バックエンド</span>
<a class="headerlink" href="#storage_directory" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールタイプ:<span class="monospaced">dir</span></p></div>
<div class="paragraph">
<p>Proxmox VEでは、ローカルディレクトリまたはローカルにマウントされた共有をストレージとして使用できます。ディレクトリはファイルレベルのストレージであるため、仮想ディスクイメージ、コンテナ、テンプレート、ISOイメージ、バックアップファイルなど、あらゆる種類のコンテンツを保存できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">追加のストレージは、標準的な Linux<span class="monospaced"> の /etc/fstab</span> 経由でマウントし、
そのマウントポイント用のディレクトリストレージを定義することができます。
この方法により、Linux がサポートするあらゆるファイルシステムをご利用いただけます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>このバックエンドは、基盤となるディレクトリがPOSIX互換であることを前提としていますが、それ以外の要件はありません。これは、ストレージレベルでのスナップショット作成が不可能であることを意味します。ただし、<span class="monospaced">qcow2ファイル</span>形式を使用するVMイメージについては、この形式が内部的にスナップショットをサポートしているため、回避策が存在します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">一部のストレージタイプは<span class="monospaced">O_DIRECT</span> をサポートしていないため、
そのようなストレージではキャッシュモード<span class="monospaced">none</span>を使用できません。
代わりにキャッシュモード<span class="monospaced">writeback</span>をご利用ください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>異なるコンテンツタイプを別々のサブディレクトリに格納するため、
事前定義されたディレクトリレイアウトを採用しております。
このレイアウトは全てのファイルレベルストレージバックエンドで
共通して使用されます。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 3. ディレクトリ構成</caption>
<col style="width:50%;" />
<col style="width:50%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツタイプ        </th>
<th class="tableblock halign-left valign-top">サブディレクトリ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">仮想マシンイメージ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">images/&amp;lt;VMID&amp;gt;/</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISOイメージ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">template/iso/</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">コンテナテンプレート</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">template/cache/</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">バックアップファイル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">dump/</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">スニペット</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced"><span class="monospaced">snippets/</span></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_configuration_2">7.5.1. 設定
<a class="headerlink" href="#_configuration_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドは、すべての一般的なストレージプロパティをサポートし、さらに2つの追加プロパティを提供します。
<span class="monospaced">path</span>プロパティはディレクトリを指定するために使用されます。
これは絶対ファイルシステムパスである必要があります。</p></div>
<div class="paragraph">
<p>オプションの<span class="monospaced">content-dirs</span>プロパティにより、デフォルトのレイアウトを変更できます。
これは以下の形式の識別子をカンマ区切りで列挙したリストで構成されます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vtype=パス</pre>
</div></div>
<div class="paragraph">
<p>ここで、<span class="monospaced">vtype</span>はストレージで許可されているコンテンツタイプの一つであり、
<span class="monospaced">path</span>はストレージのマウントポイントに対する相対パスです。</p></div>
<div class="listingblock">
<div class="title">設定例 (<span class="monospaced">/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>ディレクトリ: バックアップ
        パス /mnt/backup
        内容 バックアップ
        古いバックアップの削除 過去7日間分のみ保持
        保護対象の最大バックアップ数 3
        バックアップ用カスタムディレクトリ バックアップ=カスタム/バックアップ/ディレクトリ</pre>
</div></div>
<div class="paragraph">
<p>上記の設定では、<span class="monospaced">backup</span> という名前のストレージプールを定義しています。このプールでは、VM あたり最大 7 つの通常バックアップ（<span class="monospaced">keep-last=7</span>）と 3 つの保護バックアップを保存できます。バックアップファイルの実際のパスは<span class="monospaced">/mnt/backup/custom/backup/dir/....</span> となります。</p></div>
</div>
<div class="sect3">
<h4 id="_file_naming_conventions">7.5.2. ファイル命名規則
<a class="headerlink" href="#_file_naming_conventions" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドは、VMイメージに対して明確に定義された命名規則を採用しております：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vm-&amp;lt;VMID&amp;gt;-&amp;lt;NAME&amp;gt;.&amp;lt;FORMAT&amp;gt;</pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;VMID&amp;gt;</span></dt>
<dd>
<p>
これは所有者 VM を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;NAME&amp;gt;</span></dt>
<dd>
<p>
スペースを含まない任意の文字（<span class="monospaced">ASCII</span>）で指定できます。
バックエンドではデフォルトで<span class="monospaced">disk-[N]</span>が使用され、<span class="monospaced">[N]</span>は一意な名前を付けるための整数に置き換えられます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;フォーマット&amp;gt;</span></dt>
<dd>
<p>
イメージ形式を指定します（<span class="monospaced">raw|qcow2|vmdk</span>）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>VMテンプレートを作成する際、全てのVMイメージは読み取り専用であることを示すように名前が変更され、
クローン用のベースイメージとして使用できます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>base-&amp;lt;VMID&amp;gt;-&amp;lt;NAME&amp;gt;.&amp;lt;FORMAT&amp;gt;</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このようなベースイメージはクローンイメージの生成に使用されます。
従いまして、これらのファイルは読み取り専用であり、決して変更されないことが重要です。
バックエンドはアクセスモード<span class="monospaced">を0444</span>に変更し、ストレージが対応している場合には不変フラグ（<span class="monospaced">chattr +i</span>）を設定します。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_storage_features">7.5.3. ストレージ機能<a class="headerlink" href="#_storage_features" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>前述の通り、ほとんどのファイルシステムは標準ではスナップショットをサポートしておりません。この問題を回避するため、本バックエンドは<span class="monospaced">qcow2の</span>内部スナップショット機能を利用可能です。</p></div>
<div class="paragraph">
<p>クローンについても同様です。本バックエンドは<span class="monospaced">qcow2の</span>ベースイメージ機能を利用してクローンを作成します。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 4.<span class="monospaced">バックエンドディレクトリ</span>用のストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツタイプ                              </th>
<th class="tableblock halign-left valign-top">画像フォーマット         </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップショット </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">イメージ ルートディレクトリ vztmpl iso バックアップ スニペット</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">RAW qcow2 vmdk サブボリューム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">なし</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">qcow2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">qcow2</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_examples_2">7.5.4. 例
<a class="headerlink" href="#_examples_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ストレージ<span class="monospaced">local</span> 上に 4GB のイメージを割り当てるには、以下のコマンドをご利用ください:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesm alloc local 100 vm-100-disk10.raw 4G
'/var/lib/vz/images/100/vm-100-disk10.raw' のフォーマット中、fmt=raw size=4294967296
'local:100/vm-100-disk10.raw' の作成に成功しました</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">イメージ名は上記の命名規則に準拠する必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>実際のファイルシステムパスは以下で確認できます:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesm path local:100/vm-100-disk10.raw
/var/lib/vz/images/100/vm-100-disk10.raw</pre>
</div></div>
<div class="paragraph">
<p>また、イメージの削除は次のコマンドで行えます:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesm free local:100/vm-100-disk10.raw</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_nfs">
<span>7.6. NFS</span>バックエンド
<a class="headerlink" href="#storage_nfs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールタイプ:<span class="monospaced">nfs</span></p></div>
<div class="paragraph">
<p>NFSバックエンドはディレクトリバックエンドを基盤としておりますため、
ほとんどの特性を共有しております。ディレクトリ構成とファイル命名規則は
同一です。主な利点は、NFSサーバーのプロパティを直接設定できる点であり、
これによりバックエンドが共有リソースを自動的にマウントすることが可能となります。<span class="monospaced">/etc/fstab を</span>変更する必要はありません。また、
このバックエンドはサーバーがオンラインであるかどうかのテストも実行でき、
エクスポートされた共有をサーバーに問い合わせる方法も提供します。</p></div>
<div class="sect3">
<h4 id="_configuration_3">7.6.1. 設定
<a class="headerlink" href="#_configuration_3" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>本バックエンドは、常に設定済みの共有フラグを除く、
すべての一般的なストレージプロパティをサポートしております。
さらに、NFSサーバーの設定には以下のプロパティが使用されます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
サーバー</dt>
<dd>
<p>
サーバーのIPアドレスまたはDNS名。DNSルックアップの遅延を避けるため、
通常はDNS名ではなくIPアドレスを使用することが推奨されます。
ただし、非常に信頼性の高いDNSサーバーを使用している場合、
またはサーバーをローカルの<span class="monospaced">/etc/hosts</span>ファイルにリストしている場合は例外です。</p>
</dd>
<dt class="hdlist1">
エクスポート</dt>
<dd>
<p>
NFSエクスポートパス（<span class="monospaced">pvesm nfsscan</span> で表示されるパス）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>NFSマウントオプションの設定も可能です:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
path</dt>
<dd>
<p>
ローカルのマウントポイント（デフォルトは<span class="monospaced">/mnt/pve/&amp;lt;STORAGE_ID&amp;gt;/</span>）。</p>
</dd>
<dt class="hdlist1">
content-dirs</dt>
<dd>
<p>
デフォルトのディレクトリ構成に対する上書き設定。オプションです。</p>
</dd>
<dt class="hdlist1">
オプション</dt>
<dd>
<p>
NFS マウントオプション（<span class="monospaced">man nfs</span> をご参照ください）。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例 (<span class="monospaced">/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>NFS: iso-templates
        パス /mnt/pve/iso-templates
        サーバー 10.0.0.10
        エクスポート /space/iso-templates
        オプション vers=3,soft
        コンテンツ iso,vztmpl</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">NFSリクエストがタイムアウトした後、デフォルトではNFSリクエストは無制限に再試行されます。これによりクライアント側で予期せぬ停止が発生する可能性があります。読み取り専用コンテンツの場合、再試行回数を3回に制限する<span class="monospaced">NFSのsoftオプション</span>のご利用をご検討ください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_storage_features_2">7.6.2. ストレージ機能
<a class="headerlink" href="#_storage_features_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>NFSはスナップショットをサポートしておりませんが、
本バックエンドは<span class="monospaced">qcow2の機能</span>を活用し、
スナップショットとクローンを実装しております。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 5. バックエンド<span class="monospaced">NFS</span>のストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類                              </th>
<th class="tableblock halign-left valign-top">画像形式  </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップショット </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">イメージ ルートディレクトリ vztmpl iso バックアップ スニペット</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">raw qcow2 vmdk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">qcow2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">qcow2</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_examples_3">7.6.3. 例
<a class="headerlink" href="#_examples_3" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>エクスポートされた NFS 共有の一覧は次のコマンドで取得できます:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesm scan nfs &amp;lt;サーバー名&amp;gt;</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_cifs">
<span>7.7. CIFS</span>バックエンド
<a class="headerlink" href="#storage_cifs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールタイプ:<span class="monospaced">cifs</span></p></div>
<div class="paragraph">
<p>CIFSバックエンドはディレクトリバックエンドを拡張するため、
CIFSマウントの手動設定は不要です。このようなストレージは、
Proxmox VE APIまたはWeb UIを通じて直接追加でき、
サーバーのハートビートチェックやエクスポート済み共有の
快適な選択など、当社のバックエンドの利点をすべて備えています。</p></div>
<div class="sect3">
<h4 id="_configuration_4">7.7.1. 設定
<a class="headerlink" href="#_configuration_4" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドは、常に設定されている共有フラグを除き、
すべての一般的なストレージプロパティをサポートしています。
さらに、以下のCIFS専用プロパティが利用可能です:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
サーバー</dt>
<dd>
<p>
サーバーのIPアドレスまたはDNS名。必須。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">DNSの解決遅延を避けるため、通常はDNS名ではなくIPアドレスを使用されることをお勧めいたします。ただし、非常に信頼性の高いDNSサーバーをご利用の場合、またはサーバーをローカルの<span class="monospaced">/etc/hosts</span>ファイルに記述されている場合はこの限りではありません。</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
共有</dt>
<dd>
<p>
使用するCIFS共有（利用可能な共有<span class="monospaced">はpvesm scan cifs &amp;lt;アドレス&amp;gt;</span>またはWeb UIで取得）。必須。</p>
</dd>
<dt class="hdlist1">
ユーザー名</dt>
<dd>
<p>
CIFSストレージのユーザー名。オプション、デフォルトは「guest」です。</p>
</dd>
<dt class="hdlist1">
パスワード</dt>
<dd>
<p>
ユーザーパスワード。オプション。
rootのみが読み取り可能なファイル（<span class="monospaced">/etc/pve/priv/storage/&amp;lt;STORAGE-ID&amp;gt;.pw</span>）に保存されます。</p>
</dd>
<dt class="hdlist1">
ドメイン</dt>
<dd>
<p>
このストレージのユーザードメイン（ワークグループ）を設定します。オプションです。</p>
</dd>
<dt class="hdlist1">
SMBバージョン</dt>
<dd>
<p>
SMBプロトコルのバージョン。オプション、デフォルトは<span class="monospaced">3</span>です。
SMB1はセキュリティ上の問題によりサポートされていません。</p>
</dd>
<dt class="hdlist1">
パス</dt>
<dd>
<p>
ローカルマウントポイント。オプション、デフォルトは<span class="monospaced">/mnt/pve/&amp;lt;STORAGE_ID&amp;gt;/</span> です。</p>
</dd>
<dt class="hdlist1">
コンテンツディレクトリ</dt>
<dd>
<p>
デフォルトのディレクトリ構成を上書きします。オプションです。</p>
</dd>
<dt class="hdlist1">
オプション</dt>
<dd>
<p>
追加の CIFS マウントオプション（<span class="monospaced">man mount.cifs</span> をご参照ください）。一部のオプションは自動的に設定されるため、こちらで設定する必要はありません。Proxmox VE は常に<span class="monospaced">soft</span> オプションを設定します。設定内容に応じて、以下のオプションは自動的に設定されます：
<span class="monospaced">username</span>、<span class="monospaced">credentials</span>、<span class="monospaced">guest</span>、<span class="monospaced">domain</span>、<span class="monospaced">vers</span>。</p>
</dd>
<dt class="hdlist1">
サブディレクトリ</dt>
<dd>
<p>
マウントする共有のサブディレクトリ。オプション。デフォルトは共有のルートディレクトリです。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例 (<span class="monospaced">/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>cifs: バックアップ
        パス /mnt/pve/backup
        サーバー 10.0.0.11
        共有名 VMData
        コンテンツ バックアップ
        オプション noserverino,echo_interval=30
        ユーザー名 anna
        SMBバージョン 3
        サブディレクトリ /data</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_storage_features_3">7.7.2. ストレージ機能
<a class="headerlink" href="#_storage_features_3" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>CIFSはストレージレベルでのスナップショットをサポートしておりません。ただし、
スナップショットやクローン機能を利用したい場合には、<span class="monospaced">qcow2</span>バックアップファイルを
使用することが可能です。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 6. バックエンド<span class="monospaced">CIFS</span>のストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツの種類                             </th>
<th class="tableblock halign-left valign-top">画像形式   </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップショット </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">イメージ ルートディレクトリ vztmpl iso バックアップ スニペット</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">raw qcow2 vmdk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">qcow2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">qcow2</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_examples_4">7.7.3. 事例
<a class="headerlink" href="#_examples_4" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>エクスポートされた CIFS 共有の一覧は、以下のコマンドで取得できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesm scan cifs &amp;lt;サーバー名&amp;gt; [--username &amp;lt;ユーザー名&amp;gt;] [--password]</pre>
</div></div>
<div class="paragraph">
<p>次に、これらの共有のいずれかを Proxmox VE クラスター全体のストレージとして追加するには、以下のコマンドを実行します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesm add cifs &amp;lt;ストレージ名&amp;gt; --server &amp;lt;サーバー&amp;gt; --share &amp;lt;共有名&amp;gt; [--username &amp;lt;ユーザー名&amp;gt;] [--password]</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_pbs">
<span>7.8. Proxmox バックアップサーバー</span>
<a class="headerlink" href="#storage_pbs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールタイプ:<span class="monospaced">pbs</span></p></div>
<div class="paragraph">
<p>このバックエンドにより、
Proxmox
<a href="https://www.proxmox.com/en/products/proxmox-backup-server/overview">バックアップサーバーを</a>他のストレージと同様に
Proxmox VEに直接統合することが可能です。</p></div>
<div class="paragraph">
<p>Proxmox Backupストレージは、Proxmox VE API、CLI、またはウェブインターフェースを通じて直接追加することが可能です。</p></div>
<div class="sect3">
<h4 id="_configuration_5">7.8.1. 設定
<a class="headerlink" href="#_configuration_5" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドは、常に設定される共有フラグを除き、
すべての一般的なストレージプロパティをサポートします。
さらに、Proxmox Backup Server 向けの以下の特殊プロパティが利用可能です：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
サーバー</dt>
<dd>
<p>
サーバーのIPアドレスまたはDNS名。必須です。</p>
</dd>
<dt class="hdlist1">
ポート</dt>
<dd>
<p>
デフォルトのポート（例：<span class="monospaced">8007</span>）の代わりにこのポートを使用します。オプションです。</p>
</dd>
<dt class="hdlist1">
ユーザー名</dt>
<dd>
<p>
Proxmox Backup Server ストレージ用のユーザー名。必須です。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">ユーザー名にレルムを追加することをお忘れなく。例：<span class="monospaced">root@pam</span>または
<span class="monospaced">archiver@pbs</span>。</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
パスワード</dt>
<dd>
<p>
ユーザーパスワード。この値は
<span class="monospaced">/etc/pve/priv/storage/&amp;lt;STORAGE-ID&amp;gt;.pw</span>ファイルに保存され、root ユーザーのみがアクセス可能です。必須。</p>
</dd>
<dt class="hdlist1">
データストア</dt>
<dd>
<p>
使用する Proxmox Backup Server データストアの ID。必須。</p>
</dd>
<dt class="hdlist1">
フィンガープリント</dt>
<dd>
<p>
Proxmox Backup Server API TLS証明書のフィンガープリントです。サーバーダッシュボードまたは
<span class="monospaced">proxmox-backup-manager cert infoコマンド</span>で取得できます。自己署名証明書、またはホストが
サーバーのCAを信頼しない場合に必要な設定です。</p>
</dd>
<dt class="hdlist1">
暗号化キー</dt>
<dd>
<p>
クライアント側でバックアップデータを暗号化するための鍵です。
現在、パスワード保護されていないもの（鍵導出関数（kdf）なし）のみがサポートされています。
<span class="monospaced">/etc/pve/priv/storage/&amp;lt;STORAGE-ID&amp;gt;.enc</span>ファイルに保存され、
root ユーザーのみがアクセス可能です。  マジック値「<span class="monospaced">autogen」</span>を使用すると、
<span class="monospaced">proxmox-backup-client key create --kdf none &amp;lt;path&amp;gt;</span> コマンドで自動的に新規生成されます。
オプションです。</p>
</dd>
<dt class="hdlist1">
マスター公開鍵</dt>
<dd>
<p>
バックアップタスクの一環としてバックアップ暗号化キーを暗号化するために使用される公開RSAキーです。
<span class="monospaced">/etc/pve/priv/storage/&amp;lt;STORAGE-ID&amp;gt;.master.pem</span>ファイルに保存され、
rootユーザーのみがアクセス可能です。
暗号化されたバックアップ暗号化キーのコピーは、復元目的で各バックアップに追加され、
Proxmox Backup Server インスタンスに保存されます。
オプション、<span class="monospaced">暗号化キー</span>が必要です。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例 (<span class="monospaced">/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>pbs: バックアップ
        データストア main
        サーバー enya.proxmox.com
        コンテンツ バックアップ
        フィンガープリント 09:54:ef:..snip..:88:af:47:fe:4c:3b:cf:8b:26:88:0b:4e:3c:b2
        バックアップの削除 keep-all=1
        ユーザー名 archiver@pbs
        暗号化キー a9:ee:c8:02:13:..snip..:2d:53:2c:98
        マスター公開鍵 1</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_storage_features_4">7.8.2. ストレージ機能
<a class="headerlink" href="#_storage_features_4" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox Backup Server はバックアップのみをサポートしており、ブロックレベルまたはファイルレベルベースで実行可能です。Proxmox VE では仮想マシンにはブロックレベル、コンテナにはファイルレベルが使用されます。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 7. バックエンド<span class="monospaced">pbs</span>のストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツタイプ </th>
<th class="tableblock halign-left valign-top">画像形式 </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップショット </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">バックアップ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">該当なし</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">該当なし</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">該当なし</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="storage_pbs_encryption">7.8.3. 暗号化
<a class="headerlink" href="#storage_pbs_encryption" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/storage-pbs-encryption-with-key.png">
<img src="images/screenshot/storage-pbs-encryption-with-key.png" alt="screenshot/storage-pbs-encryption-with-key.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>オプションとして、GCMモードのAES-256によるクライアント側暗号化を設定できます。
暗号化はウェブインターフェース経由、またはCLIの<span class="monospaced">encryption-keyオプション</span>（上記参照）で設定可能です。
鍵は<span class="monospaced">/etc/pve/priv/storage/&amp;lt;STORAGE-ID&amp;gt;.encファイル</span>に保存され、
rootユーザーのみがアクセス可能です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">鍵がない場合、バックアップデータにはアクセスできません。したがって、鍵は整理して保管し、バックアップ対象のデータとは別の場所に保管してください。例えば、システム全体のバックアップを、そのシステム上の鍵を使用して行う場合があります。その後、何らかの理由でシステムにアクセスできなくなり、復元が必要になった場合、破損したシステムと共に暗号化鍵も失われるため、復元は不可能となります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>迅速な災害復旧のため、鍵は安全かつ容易にアクセス可能な場所に保管されることを推奨いたします。このため、パスワードマネージャーへの保存が最適です。パスワードマネージャーでは即座に復旧が可能です。バックアップとして、USBフラッシュドライブに鍵を保存し、安全な場所に保管することも必要です。これにより、システムから切り離されつつ、緊急時にも容易に復旧が可能となります。最後に、最悪の事態に備えて、
鍵の紙媒体コピーを安全な場所に保管することもご検討ください。
<span class="monospaced">paperkey</span>サブコマンドを使用すると、鍵のQRコード版を作成できます。
以下のコマンドは、<span class="monospaced">paperkey</span>コマンドの出力をテキストファイルに送信し、
印刷を容易にします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># proxmox-backup-client key paperkey /etc/pve/priv/storage/&amp;lt;STORAGE-ID&amp;gt;.enc --output-format text &amp;gt; qrkey.txt</pre>
</div></div>
<div class="paragraph">
<p>さらに、鍵復旧目的で単一のRSAマスター鍵ペアを使用することも可能です。暗号化バックアップを行う全クライアントを単一の公開マスター鍵で使用するよう設定すると、以降の暗号化バックアップには使用されたAES暗号化鍵のRSA暗号化コピーが含まれます。対応する秘密マスター鍵があれば、クライアントシステムが利用できなくなった場合でもAES鍵を復元し、バックアップを復号できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">マスターキーペアの保管ルールは、通常の暗号化キーと同様に厳守してください。秘密鍵のコピーがなければ復元は不可能です！<span class="monospaced">paperkey</span>コマンドは、物理的な安全な場所に保管するためのマスター秘密鍵の紙媒体コピー生成をサポートしています。</td>
</tr></table>
</div>
<div class="paragraph">
<p>暗号化処理はクライアント側で管理されるため、サーバー上の同一データストアを、異なる鍵で暗号化されたバックアップと非暗号化バックアップの両方に使用できます。ただし、異なる鍵で暗号化されたバックアップ間の重複排除は不可能なため、別々のデータストアを作成されることをお勧めいたします。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">暗号化にメリットがない場合、例えば信頼できるネットワーク内でローカルにサーバーを運用している場合などは、暗号化を使用しないでください。暗号化されていないバックアップからの復旧は、常に容易です。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_example_add_storage_over_cli">7.8.4. 例：CLI によるストレージの追加
<a class="headerlink" href="#_example_add_storage_over_cli" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>利用可能な Proxmox Backup Server データストアの一覧は、以下のコマンドで取得できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesm scan pbs &amp;lt;サーバー名&amp;gt; &amp;lt;ユーザー名&amp;gt; [--password &amp;lt;文字列&amp;gt;] [--fingerprint &amp;lt;文字列&amp;gt;]</pre>
</div></div>
<div class="paragraph">
<p>次に、これらのデータストアのいずれかを Proxmox VE クラスタ全体のストレージとして追加するには、以下のコマンドを実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesm add pbs &amp;lt;id&amp;gt; --server &amp;lt;server&amp;gt; --datastore &amp;lt;datastore&amp;gt; --username &amp;lt;username&amp;gt; --fingerprint 00:B4:... --password</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_zfspool">
<span>7.9. ローカル ZFS プール</span>バックエンド
<a class="headerlink" href="#storage_zfspool" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールタイプ:<span class="monospaced">zfspool</span></p></div>
<div class="paragraph">
<p>このバックエンドにより、ローカルのZFSプール（またはそのようなプール内のZFSファイルシステム）にアクセスすることが可能となります。</p></div>
<div class="sect3">
<h4 id="_configuration_6">7.9.1. 設定
<a class="headerlink" href="#_configuration_6" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックエンドは、一般的なストレージ<span class="monospaced">プロパティであるcontent</span>、<span class="monospaced">nodes</span>、<span class="monospaced">disable</span>、および以下のZFS固有のプロパティをサポートしています：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
プール</dt>
<dd>
<p>
ZFSプール/ファイルシステムを選択してください。すべての割り当ては当該プール内で行われます。</p>
</dd>
<dt class="hdlist1">
ブロックサイズ</dt>
<dd>
<p>
ZFSのブロックサイズパラメータを設定します。</p>
</dd>
<dt class="hdlist1">
スパース</dt>
<dd>
<p>
ZFSのシンプロビジョニングを使用します。スパースボリュームとは、予約領域がボリュームサイズと等しくないボリュームを指します。</p>
</dd>
<dt class="hdlist1">
マウントポイント</dt>
<dd>
<p>
ZFSプール/ファイルシステムのマウントポイントです。これを変更しても、<span class="monospaced">zfsが認識</span>するデータセットの<span class="monospaced">マウントポイントプロパティには</span>影響しません。
デフォルト<span class="monospaced">は/&amp;lt;pool&amp;gt;</span>です。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例 (<span class="monospaced">/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>zfspool: vmdata
        pool tank/vmdata
        content rootdir,images
        sparse</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_file_naming_conventions_2">7.9.2. ファイル命名規則
<a class="headerlink" href="#_file_naming_conventions_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドは、VMイメージに対して以下の命名規則を採用しております：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vm-&amp;lt;VMID&amp;gt;-&amp;lt;NAME&amp;gt;      // 通常の VM イメージ
base-&amp;lt;VMID&amp;gt;-&amp;lt;NAME&amp;gt;    // テンプレート VM イメージ（読み取り専用）
subvol-&amp;lt;VMID&amp;gt;-&amp;lt;NAME&amp;gt;  // サブボリューム（コンテナ用 ZFS ファイルシステム）</pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;VMID&amp;gt;</span></dt>
<dd>
<p>
所有者仮想マシンを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;NAME&amp;gt;</span></dt>
<dd>
<p>
空白を含まない任意の名称（<span class="monospaced">ASCII</span>）を指定できます。
バックエンドではデフォルトで<span class="monospaced">disk[N]</span>を使用します。
<span class="monospaced">[N] は</span>一意の名称とするため整数で置き換えられます。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="_storage_features_5">7.9.3. ストレージ機能
<a class="headerlink" href="#_storage_features_5" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFSはスナップショットとクローンに関して、おそらく最も先進的なストレージタイプです。
このバックエンドは、VMイメージ（<span class="monospaced">フォーマットraw</span>）とコンテナデータ（<span class="monospaced">フォーマットsubvol</span>）の両方にZFSデータセットを使用します。
ZFSプロパティは親データセットから継承されるため、親データセットでデフォルトを設定するだけで済みます。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 8. バックエンド<span class="monospaced">zfs</span>のストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツタイプ  </th>
<th class="tableblock halign-left valign-top">画像形式  </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップショット </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">画像のルートディレクトリ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">RAWサブボリューム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_examples_5">7.9.4. 例
<a class="headerlink" href="#_examples_5" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VMイメージの保存用に追加のZFSファイルシステムを作成することを推奨いたします：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># zfs create tank/vmdata</pre>
</div></div>
<div class="paragraph">
<p>新たに割り当てたファイルシステムで圧縮を有効にするには:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># zfs set compression=on tank/vmdata</pre>
</div></div>
<div class="paragraph">
<p>利用可能な ZFS ファイルシステムのリストは以下で取得できます:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesm scan zfs</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_lvm">
<span>7.10. LVM</span>バックエンド
<a class="headerlink" href="#storage_lvm" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールタイプ:<span class="monospaced">lvm</span></p></div>
<div class="paragraph">
<p>LVMは、ハードディスクおよびパーティションの上に構築される軽量なソフトウェア層です。
利用可能なディスク領域をより小さな論理ボリュームに分割するために使用できます。</p></div>
<div class="paragraph">
<p>別の使用例としては、大規模な iSCSI LUN（論理ユニット番号）やファイバーチャネル経由で接続された SAN（ストレージエリアネットワーク）の上に LVM を配置する方法があります。これにより、iSCSI LUN 上の領域を容易に管理することが可能となります。これは、iSCSI 仕様が領域割り当てのための管理インターフェースを定義していないため、通常は不可能なことです。</p></div>
<div class="sect3">
<h4 id="pvesm_lvm_config">7.10.1. 構成
<a class="headerlink" href="#pvesm_lvm_config" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>LVMバックエンドは、一般的なストレージ<span class="monospaced">プロパティであるcontent</span>、<span class="monospaced">nodes</span>、<span class="monospaced">disableに加え</span>、以下のLVM固有のプロパティをサポートします：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
vgname</dt>
<dd>
<p>
LVMボリュームグループ名。既存のボリュームグループを指す必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">base</span></dt>
<dd>
<p>
ベースボリューム。ストレージにアクセスする前に自動的にアクティブ化されます。
主に、LVMボリュームグループがリモートiSCSIサーバー上に存在する場合に有用です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">安全な削除</span></dt>
<dd>
<p>
Web UIでは「削除済みボリュームのワイプ」と呼ばれます。LV削除時にデータをゼロクリアします。
ボリューム削除時に、すべてのデータが確実に消去され、後で作成される他のLV（たまたま同じ物理エクステントが割り当てられる場合）からアクセスできないようにします。これはコストのかかる操作ですが、特定の環境ではセキュリティ対策として必要となる場合があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">安全な削除</span>のスループット</dt>
<dd>
<p>
ワイプのスループット（<span class="monospaced">cstream -t</span>パラメータ値）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">スナップショット・アズ・ボリューム・チェーン</span></dt>
<dd>
<p>
このフラグを設定すると、ボリューム・バッキング・チェーンを持つLVM上の仮想マシンでスナップショット機能が有効になります。
この設定により、スナップショットを取得すると、現在の状態がスナップショット名の下に永続化され、そのスナップショットをバッキングとする新しいボリュームが開始されます。</p>
<div class="paragraph">
<p>スナップショットに基づくボリュームは、親となるスナップショットボリュームを
その基盤となるボリュームとして参照し、その基盤ボリュームに対する差分のみを記録します。
スナップショットボリュームは現在、厚いプロビジョニングのLVM論理ボリュームですが、
基盤となるブロックストレージは薄いプロビジョニングを提供する場合があります。</p></div>
<div class="paragraph">
<p>この設計により、ネイティブ LVM スナップショットに伴う問題、例えば
著しい入出力（I/O）ペナルティや、事前割り当て領域の枯渇時に発生する
予期せぬ危険な動作を回避できます。</p></div>
<div class="paragraph">
<p>スナップショットをボリュームチェーンとして扱うことで、ブロックストレージをサポートするあらゆるストレージシステムにおいてベンダー非依存のスナップショット機能を実現します。これにはiSCSIやファイバーチャネル接続のSANも含まれます。</p></div>
<div class="paragraph">
<p>なお、この機能はqcow2に依存していますが、qcow2のスナップショット機能ではなく、
バックアップチェーン内で複数のボリュームを階層化する機能のみを利用しています。
スナップショット機能はPVEストレージシステムによって管理されます。</p></div>
<div class="paragraph">
<p>このフラグの有効化または無効化は、新しく作成される仮想ディスクボリュームにのみ影響します。</p></div>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例 (<span class="monospaced">/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>lvm: myspace
        vgname myspace
        content rootdir,images</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_file_naming_conventions_3">7.10.2. ファイル命名規則
<a class="headerlink" href="#_file_naming_conventions_3" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドは基本的に、ZFSプールバックエンドと同様の命名規則を採用しております。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vm-&amp;lt;VMID&amp;gt;-&amp;lt;NAME&amp;gt;      // 通常の VM イメージ</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_storage_features_6">7.10.3. ストレージ機能
<a class="headerlink" href="#_storage_features_6" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>LVMは典型的なブロックストレージシステムです。
残念ながら、通常のスナップショットは非効率的であり、
スナップショットが有効な間はボリュームグループ全体の書き込み操作に干渉するため、
著しいI/O性能の低下を引き起こします。
このため、LVMはリンクドクローンをサポートしておらず、Proxmox VEではスナップショットをボリュームチェーンとしてサポートする機能が追加されました。この機能は、ストレージプラグインを通じてスナップショットボリュームを管理し、qcow2を使用して個別のボリュームをバッキングチェーンとして階層化します。これにより、ゲストに公開される単一のディスク状態が作成されます。</p></div>
<div class="paragraph">
<p>LVMの利点の一つは、共有ストレージとの併用が可能な点です。
例えばiSCSI LUNなどが該当します。構成でストレージが共有とマークされている場合、
バックエンドは適切なクラスタ全体のロックを実装します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">非共有のローカルストレージには LVM-thin バックエンドをご利用いただけます。
スナップショットとリンクドクローンをサポートしております。</td>
</tr></table>
</div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 9. バックエンド<span class="monospaced">LVM</span>のストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツタイプ  </th>
<th class="tableblock halign-left valign-top">イメージ形式  </th>
<th class="tableblock halign-left valign-top">共有   </th>
<th class="tableblock halign-left valign-top">スナップショット </th>
<th class="tableblock halign-left valign-top">完全クローン </th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">リンクドクローン</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">イメージのルートディレクトリ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RAW、QCow2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">可能です</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><sup>はい1</sup></p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph">
<p><sup>1</sup>: Proxmox VE 9以降、VM向けにボリュームチェーンとしてのスナップショットが利用可能となりました。詳細は<a href="#pvesm_lvm_config">LVM設定</a>セクションをご参照ください。</p></div>
</div>
<div class="sect3">
<h4 id="_examples_6">7.10.4. 例
<a class="headerlink" href="#_examples_6" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>利用可能なLVMボリュームグループのリストは以下で取得できます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesm scan lvm</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_lvmthin">
<span>7.11. LVM スリム</span>バックエンド
<a class="headerlink" href="#storage_lvmthin" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールタイプ:<span class="monospaced">lvmthin</span></p></div>
<div class="paragraph">
<p>LVMは通常、ボリューム作成時にブロックを割り当てます。これに対し、LVMシンプールはブロックが書き込まれる際に割り当てを行います。この動作はシンプロビジョニングと呼ばれ、物理的に利用可能な領域よりもはるかに大きなボリュームを作成できるためです。</p></div>
<div class="paragraph">
<p>通常の LVM コマンドラインツールを使用して、LVM スリムプールの管理や作成が可能です（詳細は<span class="monospaced">man lvmthin</span>を参照してください）。既に<span class="monospaced">pve</span> という名前の LVM ボリュームグループが存在すると仮定した場合、以下のコマンドで<span class="monospaced">data</span> という名前の新しい LVM スリムプール（サイズ 100G）を作成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>lvcreate -L 100G -n data pve
lvconvert --type thin-pool pve/data</pre>
</div></div>
<div class="sect3">
<h4 id="_configuration_7">7.11.1. 構成
<a class="headerlink" href="#_configuration_7" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>LVM thin バックエンドは、一般的なストレージプロパティである<span class="monospaced">content</span>、<span class="monospaced">nodes</span>、<span class="monospaced">disable</span>、および以下の LVM 固有のプロパティをサポートします：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
vgname</dt>
<dd>
<p>
LVMボリュームグループ名。既存のボリュームグループを指す必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">thinpool</span></dt>
<dd>
<p>
LVM thin プールの名称。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例 (<span class="monospaced">/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>lvmthin: local-lvm
        thinpool data
        vgname pve
        content rootdir,images</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_file_naming_conventions_4">7.11.2. ファイル命名規則
<a class="headerlink" href="#_file_naming_conventions_4" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックエンドの基本的な命名規則は、ZFSプールバックエンドと同様です。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vm-&amp;lt;VMID&amp;gt;-&amp;lt;NAME&amp;gt;      // 通常の VM イメージ</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_storage_features_7">7.11.3. ストレージ機能
<a class="headerlink" href="#_storage_features_7" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>LVM thin はブロックストレージですが、スナップショットとクローンを効率的に完全にサポートします。
新しいボリュームは自動的にゼロで初期化されます。</p></div>
<div class="paragraph">
<p>なお、LVM thinプールは複数ノード間で共有できないため、ローカルストレージとしてのみご利用いただけます。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 10. バックエンド<span class="monospaced">lvmthin</span>のストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツタイプ  </th>
<th class="tableblock halign-left valign-top">画像形式  </th>
<th class="tableblock halign-left valign-top">共有   </th>
<th class="tableblock halign-left valign-top">スナップショット </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">イメージのルートディレクトリ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">RAW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_examples_7">7.11.4. 例
<a class="headerlink" href="#_examples_7" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>利用可能なLVMシンプールのリストは、ボリュームグループ「<span class="monospaced">pve」</span>上で以下のコマンドで取得できます:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesm scan lvmthin pve</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_open_iscsi">
<span>7.12. Open-iSCSI</span>イニシエーター
<a class="headerlink" href="#storage_open_iscsi" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールタイプ:<span class="monospaced">iscsi</span></p></div>
<div class="paragraph">
<p>iSCSIは、ストレージサーバーへの接続に広く採用されている技術です。
ほぼ全てのストレージベンダーがiSCSIをサポートしております。
また、オープンソースのiSCSIターゲットソリューションも利用可能です。
例えば、Debianを基盤とする<a href="https://www.openmediavault.org/">OpenMediaVaultなどが</a>挙げられます。</p></div>
<div class="paragraph">
<p>このバックエンドをご利用になるには、
<a href="https://www.open-iscsi.com/">Open-iSCSI</a>(<span class="monospaced">open-iscsi</span>) パッケージのインストールが必要です。
これは標準的な Debian パッケージですが、
リソース節約のためデフォルトではインストールされません。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># apt-get install open-iscsi</pre>
</div></div>
<div class="paragraph">
<p>低レベルのiSCSI管理タスクは、<span class="monospaced">iscsiadm</span>ツールを使用して実行できます。</p></div>
<div class="sect3">
<h4 id="_configuration_8">7.12.1. 設定
<a class="headerlink" href="#_configuration_8" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドは、一般的なストレージ<span class="monospaced">プロパティであるcontent</span>、<span class="monospaced">nodes</span>、<span class="monospaced">disableに加え</span>、以下のiSCSI固有のプロパティをサポートします：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ポータル</dt>
<dd>
<p>
iSCSI ポータル（IP または DNS 名、オプションでポート指定）。</p>
</dd>
<dt class="hdlist1">
ターゲット</dt>
<dd>
<p>
iSCSIターゲット。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例 (<span class="monospaced">/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>iscsi: mynas
     ポート 10.10.10.1
     ターゲット iqn.2006-01.openfiler.com:tsn.dcb5aaaddd
     コンテンツ なし</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">iSCSI 上で LVM を使用する場合、<span class="monospaced">content を none に</span>設定することをお勧めいたします。
これにより、iSCSI LUN を直接使用した仮想マシンの作成が不可能となります。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_file_naming_conventions_5">7.12.2. ファイル命名規則
<a class="headerlink" href="#_file_naming_conventions_5" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>iSCSIプロトコルは、データの割り当てや削除を行うインターフェースを定義しておりません。
その処理はターゲット側で実施する必要があり、ベンダー固有の仕様となります。
ターゲットは単にそれらを番号付きLUNとしてエクスポートします。
したがって、Proxmox VEのiSCSIボリューム名は、Linuxカーネルが認識するLUNに関する
情報を符号化したものに過ぎません。</p></div>
</div>
<div class="sect3">
<h4 id="_storage_features_8">7.12.3. ストレージ機能
<a class="headerlink" href="#_storage_features_8" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>iSCSIはブロックレベルのストレージであり、管理インターフェースを提供しません。
そのため、通常は1つの大きなLUNをエクスポートし、そのLUN上にLVMを設定するのが最適です。
その後、LVMプラグインを使用して、そのiSCSI LUN上のストレージを管理できます。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 11. バックエンド<span class="monospaced">iSCSI</span>のストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツタイプ  </th>
<th class="tableblock halign-left valign-top">画像形式  </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップショット </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">images none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">raw</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_examples_8">7.12.4. 例
<a class="headerlink" href="#_examples_8" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>リモート iSCSI ポータルをスキャンし、利用可能なターゲットの一覧を取得するには、以下のコマンドを実行します:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>pvesm scan iscsi &amp;lt;HOST[:PORT]&amp;gt;</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_iscsidirect">
<span>7.13. ユーザーモード iSCSI</span><span>バック</span>エンド
<a class="headerlink" href="#storage_iscsidirect" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールタイプ:<span class="monospaced">iscsidirect</span></p></div>
<div class="paragraph">
<p>このバックエンドは基本的にOpen-iSCSIバックエンドと同様の機能を提供しますが、
ユーザーレベルライブラリを用いて実装されています。このバックエンドをご利用になるには、
<span class="monospaced">libiscsi-binパッケージの</span>インストールが必要となります。</p></div>
<div class="paragraph">
<p>なお、カーネルドライバは一切関与しないため、
パフォーマンス最適化と見なすことができます。ただし、
この方式では、このようなiSCSI LUN上にLVMを使用できないという欠点があります。
したがって、すべてのスペース割り当てはストレージサーバー側で管理する必要があります。</p></div>
<div class="sect3">
<h4 id="_configuration_9">7.13.1. 設定
<a class="headerlink" href="#_configuration_9" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ユーザーモードのiSCSIバックエンドは、Open-iSCSIバックエンドと同じ設定オプションを使用します。</p></div>
<div class="listingblock">
<div class="title">設定例 (<span class="monospaced">/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>iscsidirect: faststore
     ポート 10.10.10.1
     ターゲット iqn.2006-01.openfiler.com:tsn.dcb5aaaddd</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_storage_features_9">7.13.2. ストレージ機能
<a class="headerlink" href="#_storage_features_9" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このバックエンドは仮想マシンのみに対応しております。コンテナでは本ドライバをご利用いただけません。</td>
</tr></table>
</div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 12. バックエンド<span class="monospaced">iscsidirect</span>のストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツタイプ  </th>
<th class="tableblock halign-left valign-top">画像形式  </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップショット </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">画像</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">raw</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ceph_rados_block_devices">
<span>7.14. Ceph RADOS ブロックデバイス (RBD)</span>
<a class="headerlink" href="#ceph_rados_block_devices" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールタイプ:<span class="monospaced">rbd</span></p></div>
<div class="paragraph">
<p><a href="https://ceph.com">Cephは</a>優れたパフォーマンス、信頼性、スケーラビリティを提供するために設計された分散オブジェクトストアおよびファイルシステムです。RADOSブロックデバイスは機能豊富なブロックレベルストレージを実現し、以下の利点を得られます：</p></div>
<div class="ulist"><ul>
<li>
<p>
シンプロビジョニング</p>
</li>
<li>
<p>
リサイズ可能なボリューム</p>
</li>
<li>
<p>
分散および冗長化（複数のOSDにストライピング）</p>
</li>
<li>
<p>
完全なスナップショットおよびクローン機能</p>
</li>
<li>
<p>
自己修復機能</p>
</li>
<li>
<p>
単一障害点なし</p>
</li>
<li>
<p>
エクサバイトレベルまで拡張可能</p>
</li>
<li>
<p>
カーネルおよびユーザースペース実装が利用可能</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">小規模な導入環境では、CephサービスをProxmox VEノード上で直接実行することも可能です。近年のハードウェアは十分なCPU能力とRAMを備えておりますため、ストレージサービスと仮想マシンを同一ノード上で稼働させることも可能です。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="storage_rbd_config">7.14.1. 設定
<a class="headerlink" href="#storage_rbd_config" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドは、一般的なストレージプロパティである<span class="monospaced">nodes</span>、<span class="monospaced">disable</span>、<span class="monospaced">content</span>、および以下の<span class="monospaced">rbd</span>固有のプロパティをサポートします：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
monhost</dt>
<dd>
<p>
監視デーモン IP のリスト。オプションであり、Ceph が Proxmox VE クラスター上で動作していない場合にのみ必要です。</p>
</dd>
<dt class="hdlist1">
プール</dt>
<dd>
<p>
Ceph プール名。</p>
</dd>
<dt class="hdlist1">
ユーザー名</dt>
<dd>
<p>
RBD ユーザー ID。オプションです。Proxmox VE クラスター上で Ceph が稼働していない場合にのみ必要となります。
ユーザー ID のみを使用する必要がある点にご注意ください。「client.」タイプの接頭辞は省略してください。</p>
</dd>
<dt class="hdlist1">
krbd</dt>
<dd>
<p>
krbd カーネルモジュールを介した Rados ブロックデバイスへのアクセスを強制します。オプションです。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンテナは、このオプションの値に関わらず<span class="monospaced">krbd</span>を使用します。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">外部 Ceph クラスターの設定例 (<span class="monospaced">/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>rbd: ceph-external
        monhost 10.1.1.20 10.1.1.21 10.1.1.22
        pool ceph-external
        content images
        username admin</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">低レベルな管理タスクには<span class="monospaced">rbd</span>ユーティリティをご利用いただけます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_authentication">7.14.2. 認証
<a class="headerlink" href="#_authentication" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">CephがProxmox VEクラスタにローカルでインストールされている場合、ストレージ追加時に以下の処理が自動的に行われます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>デフォルトで有効になっている<span class="monospaced">cepx</span>認証を使用する場合、
外部 Ceph クラスタのキーリングを提供する必要があります。</p></div>
<div class="paragraph">
<p>CLI経由でストレージを設定するには、まずキーリングを含むファイルを
利用可能な状態にする必要があります。一つの方法は、外部Cephクラスタから
ファイルをProxmox VEノードの1つに直接コピーすることです。以下の例では、
実行する<span class="monospaced">ノードの/rootディレクトリに</span>コピーします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># scp &amp;lt;外部 Ceph サーバー&amp;gt;:/etc/ceph/ceph.client.admin.keyring /root/rbd.keyring</pre>
</div></div>
<div class="paragraph">
<p>次に、<span class="monospaced">pvesm</span>CLIツールを使用して外部RBDストレージを設定する際、
<span class="monospaced">--keyringパラメータ</span>を指定します。このパラメータには、
コピーしたキーリングファイルへのパスを指定する必要があります。
例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesm add rbd &amp;lt;name&amp;gt; --monhost "10.1.1.20 10.1.1.21 10.1.1.22" --content images --keyring /root/rbd.keyring</pre>
</div></div>
<div class="paragraph">
<p>GUI経由で外部RBDストレージを設定する際には、キーリングをコピーして適切なフィールドに貼り付けることが可能です。</p></div>
<div class="paragraph">
<p>キーリングは以下に保存されます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/priv/ceph/&amp;lt;STORAGE_ID&amp;gt;.keyring</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">外部クラスターに接続する際は、必要な機能のみを備えたキーリングの作成をお勧めします。
Cephユーザー管理の詳細については、Cephドキュメントをご参照ください。<span class="footnote" id="_footnote_cephusermgmt"><br>[<a href="https://docs.ceph.com/en/squid/rados/operations/user-management/">Ceph User Management</a>]<br></span></td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_ceph_client_configuration_optional">7.14.3. Cephクライアント設定（任意）
<a class="headerlink" href="#_ceph_client_configuration_optional" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>外部Cephストレージへの接続では、外部クラスターのconfig DBにクライアント固有のオプションを設定できない場合があります。ストレージのCephクライアント設定を変更するには、Cephキーリングの隣に<span class="monospaced">ceph.conf</span>を追加できます。</p></div>
<div class="paragraph">
<p>ceph.conf は、ストレージと同じ名前である必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/priv/ceph/&amp;lt;STORAGE_ID&amp;gt;.conf</pre>
</div></div>
<div class="paragraph">
<p>設定可能な項目については、RBD設定リファレンス<span class="footnote"><br>[RBD設定リファレンス
<a href="https://docs.ceph.com/en/squid/rbd/rbd-config-ref/">https://docs.ceph.com/en/squid/rbd/rbd-config-ref/</a>]<br></span>をご参照ください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">これらの設定は軽率に変更しないでください。Proxmox VE は
&amp;lt;STORAGE_ID&amp;gt;.conf をストレージ設定とマージします。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_storage_features_10">7.14.4. ストレージ機能
<a class="headerlink" href="#_storage_features_10" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">rbd</span>バックエンドはブロックレベルストレージであり、完全なスナップショットおよびクローン機能を実装しています。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表13. バックエンド<span class="monospaced">RBD</span>のストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツタイプ  </th>
<th class="tableblock halign-left valign-top">画像形式  </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップショット </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">画像のルートディレクトリ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">raw</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="storage_cephfs">
<span>7.15. Ceph ファイルシステム (CephFS)</span>
<a class="headerlink" href="#storage_cephfs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールタイプ:<span class="monospaced">cephfs</span></p></div>
<div class="paragraph">
<p>CephFSはPOSIX準拠のファイルシステムを実装し、<a href="https://ceph.com">Cephストレージ</a>クラスターを利用してデータを保存します。CephFSはCephを基盤としているため、その特性のほとんどを共有しています。これには冗長性、スケーラビリティ、自己修復機能、高可用性が含まれます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VE は<a href="#chapter_pveceph">Ceph の設定を管理できます</a>。これにより、
CephFS ストレージの設定が容易になります。現代のハードウェアは
多くの処理能力と RAM を提供するため、ストレージサービスと VM を
同じノード上で実行しても、大きなパフォーマンスへの影響はありません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>CephFSストレージプラグインをご利用になるには、
標準のDebian Cephクライアントを、
<a href="#sysadmin_package_repositories_ceph">弊社のCephリポジトリ</a>を追加して置き換える必要があります。
追加後、最新のパッケージを取得するため、
<span class="monospaced">apt update</span> を実行し、続いて<span class="monospaced">apt dist-upgrade を</span>実行してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">他の Ceph リポジトリが設定されていないことを必ずご確認ください。
設定されている場合、インストールが失敗するか、ノード上でパッケージのバージョンが混在し、
予期しない動作を引き起こす可能性があります。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="storage_cephfs_config">7.15.1. 設定
<a class="headerlink" href="#storage_cephfs_config" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドは、<span class="monospaced">ノード</span>、<span class="monospaced">無効化</span>、<span class="monospaced">コンテンツといった</span>一般的なストレージプロパティに加え、
以下の<span class="monospaced">CephFS</span>固有のプロパティをサポートします：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
fs-name</dt>
<dd>
<p>
Cephファイルシステムの名称。</p>
</dd>
<dt class="hdlist1">
monhost</dt>
<dd>
<p>
モニターデーモンアドレスの一覧。オプションであり、CephがProxmox VEクラスター上で動作していない場合にのみ必要となります。</p>
</dd>
<dt class="hdlist1">
path</dt>
<dd>
<p>
ローカルマウントポイント。オプションです。デフォルトは<span class="monospaced">/mnt/pve/&amp;lt;STORAGE_ID&amp;gt;/</span> となります。</p>
</dd>
<dt class="hdlist1">
username</dt>
<dd>
<p>
Ceph ユーザー ID。オプションです。Proxmox VE クラスター上で Ceph が実行されていない場合にのみ必要です。
その場合、デフォルトは<span class="monospaced">admin</span> となります。</p>
</dd>
<dt class="hdlist1">
サブディレクトリ</dt>
<dd>
<p>
マウントするCephFSサブディレクトリ。オプション。デフォルトは<span class="monospaced">「/」</span>です。</p>
</dd>
<dt class="hdlist1">
fuse</dt>
<dd>
<p>
カーネルクライアントではなくFUSE経由でCephFSにアクセスします。オプション、デフォルトは<span class="monospaced">0です</span>。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">外部 Ceph クラスターの設定例 (<span class="monospaced">/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>cephfs: cephfs-external
        monhost 10.1.1.20 10.1.1.21 10.1.1.22
        path /mnt/pve/cephfs-external
        content backup
        username admin
        fs-name cephfs</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">cephxが無効化されていない場合、クライアントの秘密鍵ファイルの設定をお忘れなく。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_authentication_2">7.15.2. 認証
<a class="headerlink" href="#_authentication_2" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">CephがProxmox VEクラスターにローカルインストールされている場合、ストレージ追加時に以下の処理が自動的に行われます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>デフォルトで有効になっている<span class="monospaced">cepx</span>認証を使用する場合、
外部 Ceph クラスタのシークレットを提供する必要があります。</p></div>
<div class="paragraph">
<p>CLI経由でストレージを設定するには、まずシークレットを含むファイルを
利用可能な状態にする必要があります。一つの方法は、外部Cephクラスタから
ファイルを直接Proxmox VEノードの一つにコピーすることです。以下の例では、
実行するノ<span class="monospaced">ードの/rootディレクトリに</span>コピーします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># scp &amp;lt;外部 Ceph サーバー&amp;gt;:/etc/ceph/cephfs.secret /root/cephfs.secret</pre>
</div></div>
<div class="paragraph">
<p>次に、<span class="monospaced">pvesm</span>CLIツールを使用して外部RBDストレージを設定する際、
<span class="monospaced">--keyringパラメータ</span>を指定します。このパラメータには、コピーしたシークレットファイルへのパスを指定する必要があります。
例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesm add cephfs &amp;lt;name&amp;gt; --monhost "10.1.1.20 10.1.1.21 10.1.1.22" --content backup --keyring /root/cephfs.secret</pre>
</div></div>
<div class="paragraph">
<p>GUI経由で外部RBDストレージを設定する際は、
シークレットをコピーして適切なフィールドに貼り付けることが可能です。</p></div>
<div class="paragraph">
<p>秘密鍵は鍵そのもののみを指し、<span class="monospaced">[client.userid]</span>セクション<span class="monospaced">を含むRBDバックエンド</span>とは異なります。</p></div>
<div class="paragraph">
<p>シークレットは以下に保存されます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/priv/ceph/&amp;lt;STORAGE_ID&amp;gt;.secret</pre>
</div></div>
<div class="paragraph">
<p>シークレットは、Cephクラスタ管理者として以下のコマンドを実行することで取得できます。ここで<span class="monospaced">useridは</span>、クラスタへのアクセス用に設定済みのクライアントIDです。Cephユーザー管理の詳細については、Cephドキュメントをご参照ください。<span class="footnoteref"><br><a href="#_footnote_cephusermgmt">[cephusermgmt]</a><br></span></p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ceph auth get-key client.userid &amp;gt; cephfs.secret</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_storage_features_11">7.15.3. ストレージ機能
<a class="headerlink" href="#_storage_features_11" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">cephfs</span>バックエンドは、Ceph クラスター上に構築された POSIX 準拠のファイルシステムです。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 14. バックエンド<span class="monospaced">cephfs</span>のストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツタイプ              </th>
<th class="tableblock halign-left valign-top">画像形式  </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップショット </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">vztmpl iso バックアップ スニペット</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">なし</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい<sup>[1]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph">
<p><sup>[1]</sup>既知のバグは存在しませんが、スナップショットは十分なテストが行われていないため、安定性が保証されていません。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_btrfs">
<span>7.16. BTRFS</span>バックエンド
<a class="headerlink" href="#storage_btrfs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールタイプ:<span class="monospaced">btrfs</span></p></div>
<div class="paragraph">
<p>表面上、このストレージタイプはディレクトリストレージタイプと非常に似ておりますので、
一般的な概要についてはディレクトリバックエンドのセクションをご参照ください。</p></div>
<div class="paragraph">
<p>主な相違点は、このストレージタイプでは、スナップショットの取得やスナップショットを保持したままオフラインストレージ移行をサポートするため、
フォーマット済みの<span class="monospaced">生ディスクが</span>サブボリューム内に配置される点です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">BTRFS はファイルを開く際に<span class="monospaced">O_DIRECT</span>フラグを尊重します。これは、仮想マシンが
キャッシュモード<span class="monospaced">none</span> を使用すべきでないことを意味します。そうしないと、チェックサムエラーが発生します。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_configuration_10">7.16.1. 設定
<a class="headerlink" href="#_configuration_10" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このバックエンドの設定はディレクトリストレージと同様です。
BTRFSストレージとしてディレクトリを追加する場合（そのディレクトリ自体がマウントポイントではない場合）、
<span class="monospaced">is_mountpointオプションを使用して実際の</span>マウントポイントを指定することを強く推奨いたします。</p></div>
<div class="paragraph">
<p>例えば、BTRFSファイルシステムが<span class="monospaced">/mnt/data2に</span>マウントされており、
<span class="monospaced">そのpve-storage/</span>サブディレクトリ（スナップショットであることが推奨されます）を
<span class="monospaced">data2という</span>ストレージプールとして追加する場合、以下のエントリを使用できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>btrfs: data2
        path /mnt/data2/pve-storage
        content rootdir,images
        is_mountpoint /mnt/data2</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_snapshots">7.16.2. スナップショット
<a class="headerlink" href="#_snapshots" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>サブボリュームまたは<span class="monospaced">生</span>ファイルのスナップショットを作成する場合、
スナップショットは読み取り専用サブボリュームとして作成され、
元のパスに<span class="monospaced">「@」</span>とスナップショット名が追加されます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="storage_zfs">
<span>7.17. ZFS over ISCSI</span>バックエンド
<a class="headerlink" href="#storage_zfs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ストレージプールタイプ:<span class="monospaced">zfs</span></p></div>
<div class="paragraph">
<p>このバックエンドは、ZFSプールをストレージとして持つリモートマシンにアクセスし、<span class="monospaced">SSH経由でiSCSI</span>ターゲットを実装します。各ゲストディスクに対してZVOLを作成し、iSCSI LUNとしてエクスポートします。このLUNは、Proxmox VEがゲストディスクとして使用します。</p></div>
<div class="paragraph">
<p>以下の iSCSI ターゲット実装がサポートされています：</p></div>
<div class="ulist"><ul>
<li>
<p>
LIO (Linux)</p>
</li>
<li>
<p>
IET (Linux)</p>
</li>
<li>
<p>
ISTGT (FreeBSD)</p>
</li>
<li>
<p>
Comstar (Solaris)</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このプラグインはZFS対応のリモートストレージアプライアンスを必要とします。通常のストレージアプライアンス/SAN上にZFSプールを作成するために使用することはできません。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_configuration_11">7.17.1. 設定
<a class="headerlink" href="#_configuration_11" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFS over iSCSI プラグインをご利用になるには、リモートマシン（ターゲット）が Proxmox VE ノードからの<span class="monospaced">SSH</span>接続を受け入れるよう設定する必要があります。Proxmox VE はターゲットに接続し、ZVOL を作成して iSCSI 経由でエクスポートします。
認証は、<span class="monospaced">/etc/pve/priv/zfs/&amp;lt;ターゲットIP&amp;gt;_id_rsa</span>に保存された
sshキー（パスワード保護なし）を通じて行われます。</p></div>
<div class="paragraph">
<p>以下の手順でSSH鍵を作成し、IPアドレス192.0.2.1のストレージマシンに配布します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>mkdir /etc/pve/priv/zfs
ssh-keygen -f /etc/pve/priv/zfs/192.0.2.1_id_rsa
ssh-copy-id -i /etc/pve/priv/zfs/192.0.2.1_id_rsa.pub root@192.0.2.1
ssh -i /etc/pve/priv/zfs/192.0.2.1_id_rsa root@192.0.2.1</pre>
</div></div>
<div class="paragraph">
<p>バックエンドは、一般的な<span class="monospaced">ストレージプロパティであるcontent</span>、<span class="monospaced">nodes</span>、<span class="monospaced">disableに加え</span>、
以下のZFS over ISCSI固有のプロパティをサポートします：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
プール</dt>
<dd>
<p>
iSCSIターゲット上のZFSプール/ファイルシステム。すべての割り当ては当該プール内で実施されます。</p>
</dd>
<dt class="hdlist1">
ポータル</dt>
<dd>
<p>
iSCSI ポータル（IP または DNS 名、オプションでポート）。</p>
</dd>
<dt class="hdlist1">
ターゲット</dt>
<dd>
<p>
iSCSIターゲット。</p>
</dd>
<dt class="hdlist1">
iscsiprovider</dt>
<dd>
<p>
リモートマシンで使用されるiSCSIターゲットの実装</p>
</dd>
<dt class="hdlist1">
comstar_tg</dt>
<dd>
<p>
comstarビュー用のターゲットグループ。</p>
</dd>
<dt class="hdlist1">
コムスター_HG</dt>
<dd>
<p>
comstarビュー用のホストグループ。</p>
</dd>
<dt class="hdlist1">
リオ_TPG</dt>
<dd>
<p>
Linux LIOターゲット用のターゲットポータルグループ</p>
</dd>
<dt class="hdlist1">
書き込みキャッシュ不可</dt>
<dd>
<p>
ターゲットでの書き込みキャッシュを無効化します</p>
</dd>
<dt class="hdlist1">
ブロックサイズ</dt>
<dd>
<p>
ZFSのブロックサイズパラメータを設定します。</p>
</dd>
<dt class="hdlist1">
スパース</dt>
<dd>
<p>
ZFSのシンプロビジョニングを使用します。スパースボリュームとは、
予約領域がボリュームサイズと等しくないボリュームを指します。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title">設定例 (<span class="monospaced">/etc/pve/storage.cfg</span>)</div>
<div class="content monospaced">
<pre>zfs: lio
   blocksize 4k
   iscsiprovider LIO
   pool tank
   portal 192.0.2.111
   target iqn.2003-01.org.linux-iscsi.lio.x8664:sn.xxxxxxxxxxxx
   content images
   lio_tpg tpg1
   sparse 1

zfs: solaris
   blocksize 4k
   target iqn.2010-08.org.illumos:02:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx:tank1
   pool tank
   iscsiprovider comstar
   portal 192.0.2.112
   content images

zfs: freebsd
   ブロックサイズ 4k
   ターゲット iqn.2007-09.jp.ne.peach.istgt:tank1
   プール tank
   iscsiprovider istgt
   ポータル 192.0.2.113
   コンテンツイメージ

zfs: iet
   ブロックサイズ 4k
   ターゲット iqn.2001-04.com.example:tank1
   プール tank
   iscsiprovider iet
   ポータル 192.0.2.114
   コンテンツイメージ</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_storage_features_12">7.17.2. ストレージ機能
<a class="headerlink" href="#_storage_features_12" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ZFS over iSCSIプラグインは、スナップショット機能を備えた共有ストレージを提供します。
ZFSアプライアンスがデプロイメントにおける単一障害点とならないよう、
十分な配慮が必要です。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表15. バックエンド<span class="monospaced">iSCSI</span>のストレージ機能</caption>
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">コンテンツタイプ  </th>
<th class="tableblock halign-left valign-top">画像形式  </th>
<th class="tableblock halign-left valign-top">共有 </th>
<th class="tableblock halign-left valign-top">スナップショット </th>
<th class="tableblock halign-left valign-top">クローン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">イメージ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">raw</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">いいえ</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_pveceph">
8. ハイパーコンバージド Ceph クラスターの展開
<a class="headerlink" href="#chapter_pveceph" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction">
<span>8.1.</span>はじめに
<a class="headerlink" href="#_introduction" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ceph-status-dashboard.png">
<img src="images/screenshot/gui-ceph-status-dashboard.png" alt="screenshot/gui-ceph-status-dashboard.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VEは、コンピューティングシステムとストレージシステムを統合します。つまり、クラスター内の同一物理ノードを、コンピューティング（仮想マシンやコンテナの処理）と複製ストレージの両方に使用できます。従来、分離されていたコンピューティングリソースとストレージリソースを、単一のハイパーコンバージドアプライアンスに統合することが可能です。
独立したストレージネットワーク（SAN）やネットワーク接続ストレージ（NAS）経由の接続は不要となります。オープンソースのソフトウェア定義ストレージプラットフォームであるCephの統合により、Proxmox VEはハイパーバイザーノード上で直接Cephストレージを実行・管理する機能を備えています。</p></div>
<div class="paragraph">
<p>Cephは優れたパフォーマンス、信頼性、スケーラビリティを提供するために設計された分散オブジェクトストアおよびファイルシステムです。</p></div>
<div class="ulist"><div class="title">Proxmox VE 上での Ceph の主な利点は以下の通りです：</div><ul>
<li>
<p>
CLIおよびGUIによる簡単な設定と管理</p>
</li>
<li>
<p>
シンプロビジョニング</p>
</li>
<li>
<p>
スナップショットのサポート</p>
</li>
<li>
<p>
自己修復機能</p>
</li>
<li>
<p>
エクサバイトレベルまで拡張可能</p>
</li>
<li>
<p>
ブロック、ファイルシステム、オブジェクトストレージを提供します</p>
</li>
<li>
<p>
異なるパフォーマンスと冗長性特性を持つプールを設定</p>
</li>
<li>
<p>
データは複製されるため、耐障害性を備えています</p>
</li>
<li>
<p>
汎用ハードウェア上で動作します</p>
</li>
<li>
<p>
ハードウェアRAIDコントローラーは不要です</p>
</li>
<li>
<p>
オープンソースです</p>
</li>
</ul></div>
<div class="paragraph">
<p>小規模から中規模の展開においては、Proxmox VEクラスターノード上に直接Cephサーバーをインストールし、RADOSブロックデバイス（RBD）またはCephFSを利用することが可能です（詳細は<a href="#ceph_rados_block_devices">「Ceph RADOSブロックデバイス（RBD）」</a>をご参照ください）。
近年のハードウェアは高いCPU性能とRAMを備えているため、ストレージサービスと仮想ゲストを同一ノード上で稼働させることが可能です。</p></div>
<div class="paragraph">
<p>管理を簡素化するため、Proxmox VEではネイティブ統合により、
組み込みのWebインターフェース<em>またはpvecephコマンドライン</em>ツールを通じて、
Proxmox VEノード上で<a href="http://ceph.com">Ceph</a>サービスをインストールおよび管理できます。</p></div>
</div>
<div class="sect2">
<h3 id="_terminology">
<span>8.2. 用語</span>
<a class="headerlink" href="#_terminology" title="Permalink to this heading"></a></h3>
<div class="ulist"><div class="title">Cephは複数のデーモンで構成され、RBDストレージとして利用されます：</div><ul>
<li>
<p>
Ceph Monitor (ceph-mon、または MON)</p>
</li>
<li>
<p>
Ceph Manager（ceph-mgr、または MGS）</p>
</li>
<li>
<p>
Cephメタデータサービス（ceph-mds、またはMDS）</p>
</li>
<li>
<p>
Cephオブジェクトストレージデーモン（ceph-osd、またはOSD）</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">Cephについて、以下の資料でその概要、アーキテクチャ、用語集をぜひご一読ください。
・Cephの概要：<span class="footnote"><br>[Ceph intro<a href="https://docs.ceph.com/en/squid/start/">https://docs.ceph.com/en/squid/start/</a>]<br></span> ・アーキテクチャ：<span class="footnote"><br>[Ceph architecture<a href="https://docs.ceph.com/en/squid/architecture/">https://docs.ceph.com/en/squid/architecture/</a>]<br></span>・用語集：<span class="footnote"><br>[Ceph glossary<a href="https://docs.ceph.com/en/squid/glossary">https://docs.ceph.com/en/squid/glossary</a>]<br></span></td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_recommendations_for_a_healthy_ceph_cluster">
<span>8.3. 健全な Ceph クラスターのための推奨事項</span>
<a class="headerlink" href="#_recommendations_for_a_healthy_ceph_cluster" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ハイパーコンバージドな Proxmox + Ceph クラスターを構築するには、設定に少なくとも 3 台の（できれば）同一仕様のサーバーを使用する必要があります。</p></div>
<div class="paragraph">
<p><a href="https://docs.ceph.com/en/squid/start/hardware-recommendations/">Cephの公式ウェブサイト</a>に記載されている推奨事項もご確認ください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">以下の推奨事項は、ハードウェア選択における大まかな指針としてご参照ください。
従いまして、お客様の具体的なニーズに合わせて調整することが依然として重要です。
設定のテストを実施し、システムの健全性とパフォーマンスを継続的に監視されることをお勧めいたします。</td>
</tr></table>
</div>
<div class="paragraph" id="pve_ceph_recommendation_cpu">
<div class="title">CPU</div><p>Cephサービスは主に2つのカテゴリに分類されます：</p></div>
<div class="ulist"><ul>
<li>
<p>
高負荷なCPU使用を伴う処理。高いCPUベース周波数と複数のコアが効果的です。該当するカテゴリーは以下の通りです：</p>
<div class="ulist"><ul>
<li>
<p>
オブジェクトストレージデーモン（OSD）サービス</p>
</li>
<li>
<p>
CephFSに使用されるメタデータサービス（MDS）</p>
</li>
</ul></div>
</li>
<li>
<p>
中程度のCPU使用量で、複数のCPUコアを必要としないもの。これには以下が含まれます：</p>
<div class="ulist"><ul>
<li>
<p>
Monitor (MON) サービス</p>
</li>
<li>
<p>
マネージャー (MGR) サービス</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="paragraph">
<p>経験則として、安定した耐久性のあるCephパフォーマンスに必要な最小限のリソースを確保するため、
各Cephサービスには少なくとも1つのCPUコア（またはスレッド）を割り当てることをお勧めします。</p></div>
<div class="paragraph">
<p>例えば、1ノード上でCephモニター、Cephマネージャー、および6つのCeph OSDサービスを
実行する場合、基本的で安定したパフォーマンスを目標とするなら、Ceph専用に8つのCPUコアを
確保する必要があります。</p></div>
<div class="paragraph">
<p>なお、OSDのCPU使用率は主にディスクの性能に依存します。ディスクの可能なIOPS（<strong>1秒あたりの</strong> <strong>入出力操作数</strong>）が高いほど、OSDサービスがより多くのCPUを利用できます。
NVMeのような最新のエンタープライズ向けSSDディスクは、10万を超える高いIOPS負荷を
ミリ秒未満のレイテンシで永続的に維持できるため、各OSDは複数のCPUスレッドを
使用できます。例えば、非常に高性能なディスクでは、NVMe搭載OSDあたり4～6個のCPUスレッドが
利用される可能性があります。</p></div>
<div class="paragraph" id="pve_ceph_recommendation_memory">
<div class="title">メモリ</div><p>特にハイパーコンバージド環境においては、メモリ消費量を慎重に計画し監視する必要があります。仮想マシンやコンテナの予測メモリ使用量に加え、Cephが優れた安定したパフォーマンスを提供するために十分なメモリを確保することも考慮しなければなりません。</p></div>
<div class="paragraph">
<p>目安として、<strong>約1TiBのデータに対して、OSDは1GiBのメモリ</strong>を使用します。通常時は使用量が少ない場合もありますが、リカバリ、リバランス、バックフィルなどの重要な操作時には最大使用量に達します。
つまり、通常動作時ですでに利用可能なメモリを最大化せず、障害発生時に備えて余裕を持たせる必要があります。</p></div>
<div class="paragraph">
<p>OSDサービス自体も追加メモリを消費します。デーモンのCeph BlueStoreバックエンドはデフォルトで<strong>3～5GiBのメモリ</strong>を必要とします（調整可能）。</p></div>
<div class="paragraph" id="pve_ceph_recommendation_network">
<div class="title">ネットワーク</div><p>Cephトラフィック専用に、最低10Gbps以上のネットワーク帯域幅を確保されることを推奨いたします。メッシュ型ネットワーク構成
<span class="footnote"><br>[Ceph用フルメッシュネットワーク<a href="https://pve.proxmox.com/wiki/Full_Mesh_Network_for_Ceph_Server">https://pve.proxmox.com/wiki/Full_Mesh_Network_for_Ceph_Server</a>]<br></span>10 Gbps以上のスイッチが利用できない場合、3～5ノードのクラスターでは
この構成も選択肢となります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAALa0lEQVRogdWZa2wc1RXHfzM7O/te
P9e1vXHSmEdjx3YeDkkaF6REKRRCEDSEFNkRjdSWSsgC2iqoRWqLQKiqIBg1NOQDiMeHtkQIQkRR
S9S4aWwgCQoUgl232KkT28J21l6vd3d2dx79sDuTXdtre03Uqlc62tl53Pv/n3PuOffcKxiGwf9z
E//XAL5sk65WR0a6AaDrOjMtKwgCoigiCAKCIAhXa9wvTcAEHhoc5KMjR7jw3nucf+MN67k/GCS4
YQOr77yTpl27kGUZm81mXC0ywlLnQDbwEwcO0P2b3yz4jV5RwZq2Nm5/5BH8fj+SJGGz2b4UiSUR
MAzD0DSNEwcO8MdHHln8d0AcsAUCfOe551h7yy04HA7sdvuSrVEwAV3XjdDgIC/v2cOl06dznqWA
JCAAMvn9MwlEgF1PP8037rsPt9uN3W5fkjUKIqDrujF+4QLP3XQTU0NDOc8UIAa4y8sJtrQQqK/H
7XQSfv99Pn/nHQRRxNB16/0EEAUatm9n76uv4vP5cDgcBZNYNIF84I0MEK20lIZvf5sNe/dSWlqK
1+vFxBEZHubT3/+evqNHmR4dJRWP55BevW0bra+8gt/vx+l0IknSokksikA+8ElgClixYwc3799P
ZWUlTqczbz+x0VFOPvEEQ6dPE/niCwxdt0jUbd1K68svU1xcXBCJBQnMBz5eWkrL/v2s++Y3KSsr
QxQXlxc7f/5zBjo7CQ8NoadSKKQn943t7dyyf79FYjHuNC8BwzAMVVV56Z57+OzNN3PAJ8vK+FZH
B2s2b55X6/nahRMnOP7TnxLOKEXJyO2/+hVf37uXoqIinE6nmfzyksirMjNUvvGjH+WAVwG1vJxb
Dhxg1bp1uFwuMwQWJCu3bWPN3r24SkoAcGbA/OXXv2bws8+IRqOkUqlZGX1RBAzDMHRd51+nTvHe
wYNX7gPTQMO+faxav56SkpIlgTdlU3s7TXv2IGUs6AGioRDH2tuZmJggFouhqirGPCzyEUBVVX7X
1pZzPwI0fP/7bNmzh7KysrzADh8+zP3338++ffs4ePBg3vdEUWTDD3/IsuZmRLsdW4bEpd5eOp99
lnA4jKIoaJqWl8QsAqb2Txw4kDNp40BxXR0bWlspLy/PC+qZZ55hdHQUSZIYHByko6ODxx57bBZw
cy3kq6xk6y9/ib+qCgQBmbQ7nT50iIs9PUSjUZLJJIZhzEliLgKMDQzwp5/9zLqnkQ51W3/xCwKB
AE6nMy+B3t5exsfH6ezspLe3l3g8zuHDh2cBz5bKpibWtrXhLi0FwA3owNsPP8zExATxeBxVVecy
QC4Bc+L+taNjluvU33031dddN6/2BUGgpKSE/v5+JicncweaA3i2tDz8MIHrr0eU0gsQBzDW10ff
yZNEIhESicScrpRDQNd1xgYG+OC3v7XuJQBXIMDWn/yEioqKeUGMjY0hCAKKoszS1MjIyLzfAmx/
4gmKli0DQcBJOmicfOopJicnicfjJoG5LWBq/+Szz+a8oABNe/bgdrvndR1BEKiqqiIejxOLxWYR
CAaDC0alqjVrqGxowFNWhkDalUKff07f3/5mWSFTLFksLAK6rjN+4UKO9lXAUV7O2tbWeaNOthZl
WZ4FHlh0aN3y4IPIHk+6L8AGvNfRQTgctuZCthVEU/u6rnPutddyBk0A9bt3W4us+QY2fbyurg6v
15vTzw033LBoAsHmZoLNzdgcDgBcQKi/n391dTE9PU0ymcyxgkmAVCrF+4cO5WjfFgiwfoGwOTOy
lJWVUVtba1mkUAKCILClvR1veTkA9owVPnzllZy8YFnA1H5/dzfTw8PWgziwcutWfD4fsiwvCNyU
xsZG3G43lZWVVl933XVXQQSq161j+ebNlhXcwBdnzxIOh60lhmkFEUDTNP7++uvWgBrp6mrNHBk3
H/BsAtFoFEdm8GAwyMaNGwsiIAgCjbt346uosKwgAp8cPWolNj1THInmsqHn6FGLQApY1thIxcqV
+Hy+WX6+0ETesWMHLpcLWZZ54IEHCgYvCAKrbrsNyem0JrQEXMzkhKzlBaKu61z+97+ZHhnJmbwr
tm2zJu5CWp8pra2tNDU1sXPnTtrb25dEQBAEvrplC57MXJCB8XPniEQixONxa6Uq6brOQHd3jvvo
QP2ttxZUpMxsL7zwwpK+AyxLXrt9Oxe6uxFEEXvGZc4fO0bVD35AMplM1wuapjGYtbugAp5AgKLq
aquu/W/JTEs37dqFqihWzSADk8PD1jzQNC3tQtmrThUINDbm+H4h0tfXx6OPPsodd9xBW1sbPT09
BQPPluu2b7fWRxIQ6usjFotZBCRN06wZbbZAfT1FRUWWKQtpzz//PMPDw/T09DA1NcXo6CjHjx+f
11Xma95AwHJjEdB0HUVRrhCYuRGrAiXBoFUqFtq6u7sZHx9nJBMUurq65uxnsX0Hm5v56A9/ANIJ
LXrpEolEwgqlUqZQyPlo6OOPlzx5ly1bxnBWQmxpackBW6hSBEC02axrpqasNZGmaek8kN0kYPDj
j1FVdUlz4Mknn6Surs4Cb5aUhYZiUy59+GGOgm3V1WiadiUPCILAV9autV5wAaM9PXQeOWJprBBp
aGjgxIkTpFIpOjs7aWxsXBJwUwZOnUKZmgLS2zl4vUjSlV1XURRFqtavv3IDKAVe/O53efPxx69a
SCxUBs+c4dV77+Vyfz+xy5eBdG3iX7ECm81m9S2JokiwuZmiujrCPT1AuqgOAqcef5zzL77Imt27
uemhhyipqVnYZ5cw8bPbR0eOcOall7g8MEB4aIhEJAJk9qOAwKZNyLJsHpQgRKNRIxQK0XPmDH/+
3vdQQ6G8na/YtIk199zDypYWVmzceFWAT1y8yMWzZzn/9tv0vfsudqeTlKIQHRvL2QSOAqU7d/K1
W2/l2muvpba2Nl3iJhIJIxKJMDw8TO/Zs3zw4x+jTUzkHVCw2fCUleHw+QiuXYu/upqqhgb8VVUY
hkFNczPFweCs7z556y3r+vyxYwiiyD+PHwdBwNB1krEYhqYRC4UwdB2D9LJmmnRtXHz77VTfeCPL
ly+ntraWmpqa9MaaqqqGoiiEQiGGhoYYHBzk00OHiHR2LkqDNlnG7nJhd7nQswqN+ZogiuipFMlY
DDWRgBl5KEF6woqAUFFByc03U756NZWVlSxfvpyamhoCgQAejwdB13VDVVVisRihUIiRkRGGh4cZ
+sc/GO3qIt7VhZGJAle7mVpWuVKDCBng8jXX4N68Gc8111BUVER5eTnV1dVUV1cTCASuFFqGYaDr
upFKpYjH40xMTDA+Ps7Y2Bjj4+OEw2EmenqYPneO1OAgZCWpxTY9S9QMcLhyHGUDRI8HqbISZ309
zoYGnE4nHo8Hv99PaWkpgUCAiooK6/DE4XCkI1HW2a6hqiqKojA9Pc3k5KQl4XCY6elpotFoetuk
v59UKIR66RLToRBJTcMYHUWIRvMSMPO6rbY2/SsIOFatQpYk5NWrkSQJWZZxOBy43W68Xi9+v5+i
oiJKSkooLi7G5/PhdruRZdnads85HzD3hpLJJIqiEIvFiEajRCIRIpEI0WiUWCxGPB631iOKopBK
pazUbi4Oc7Y+snKCzWbDZrMhSRKSJGG3262w6HK5cLlceDwevF4vPp8Pr9eL2+3G5XLhcDjMkxuE
TNibdcBhnv9qmkYqlSKZTJJIJFAUhXg8jqIoKIpCIpGwSCSTSVRVtWSuk3qTiAnebrfngHc4HDid
TpxOJy6Xy7qWZdk6wZzrxCbvCY1JRNd1NE3LAWgSM69ngp+PgCiK1gF3NhFTzHvmO+Y3wCzw8xLI
JpL5tYCZpEyw2f/nWt1ag2UtM0x3Mq1iAp1j+bH0M7KFCGWDnfmbd8AMnuxfUzL/C0rp/wFnFd4n
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">トラフィック量、特に復旧時のトラフィック量は、
同一ネットワーク上の他のサービスに影響を及ぼす可能性があります。
特に遅延に敏感な Proxmox VE の corosync クラスタスタックが影響を受け、
クラスタのクォーラム喪失を引き起こす恐れがあります。
Ceph トラフィックを専用かつ物理的に分離されたネットワークに移行することで、
corosync だけでなく、仮想ゲストが提供するネットワークサービスに対しても、
このような干渉を回避できます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>必要な帯域幅を推定する際には、ディスクの性能を考慮に入れる必要があります。
単一のHDDでは1Gbリンクを飽和させられないかもしれませんが、ノードあたり複数のHDD OSD（オペレーティングシステムディスク）を使用すると、10Gbpsリンクさえも飽和させる可能性があります。
最新のNVMe接続SSDを使用する場合、単体で10 Gbps以上の帯域幅を飽和させる可能性があります。このような高性能構成では、少なくとも25 Gbpsを推奨いたします。基盤となるディスクの性能を最大限に活用するには、40 Gbpsや100 Gbps以上が必要となる場合もございます。</p></div>
<div class="paragraph">
<p>不確かな場合は、高性能なセットアップにおいて物理的に分離された3つのネットワークの使用をお勧めいたします：</p></div>
<div class="ulist"><ul>
<li>
<p>
Ceph（内部）クラスタートラフィック用に、非常に高い帯域幅（25+ Gbps）のネットワークを1つ用意します。</p>
</li>
<li>
<p>
1.  CephサーバーとCephクライアント間のストレージ通信（パブリックトラフィック）用に、高帯域幅（10+ Gbps）ネットワークを1つ用意します。必要に応じて、仮想ゲストのトラフィックやVMライブマイグレーションのトラフィックをホストするためにも使用できます。
2.  遅延に敏感なCeph Corosyncクラスター通信専用に、中程度の帯域幅（1 Gbps）ネットワークを1つ用意します。</p>
</li>
<li>
<p>
遅延に敏感な Corosync クラスター通信専用の、中程度の帯域幅（1 Gbps）ネットワークを1つ。</p>
</li>
</ul></div>
<div class="paragraph" id="pve_ceph_recommendation_disk">
<div class="title">ディスク</div><p>Cephクラスターの規模を計画する際には、復旧時間を考慮することが重要です。特に小規模なクラスターでは、復旧に時間がかかる可能性があります。復旧時間を短縮し、復旧中に次の障害が発生する可能性を最小限に抑えるため、小規模な環境ではHDDではなくSSDの使用をお勧めします。</p></div>
<div class="paragraph">
<p>一般的に、SSDは回転式ディスクよりも高いIOPSを提供します。この点を踏まえ、コストが高いという点を除けば、<a href="#pve_ceph_device_classes">クラスベースの</a>プール分離を実施することが合理的である可能性があります。OSDの高速化を図る別の方法として、ジャーナルや<strong>DB/書き込み事前ログデバイス</strong>として高速ディスクを使用する方法があります。詳細は「<a href="#pve_ceph_osds">Ceph OSDの作成</a>」をご参照ください。
複数のOSDで高速ディスクを共有する場合、OSDとWAL/DB（またはジャーナル）ディスクの適切なバランスを選択する必要があります。さもないと、高速ディスクが関連する全OSDのボトルネックとなります。</p></div>
<div class="paragraph">
<p>ディスクの種類とは別に、Cephはノードごとに均等なサイズで均等に分散されたディスク数で最高のパフォーマンスを発揮します。例えば、各ノード内に500GBディスク4台を配置する構成は、1TBディスク1台と250GBディスク3台を混在させる構成よりも優れています。</p></div>
<div class="paragraph">
<p>OSDの数と単一OSDの容量のバランスも考慮する必要があります。容量を増やすことでストレージ密度を高められますが、一方で単一OSDの障害が発生した場合、Cephが一度に復旧すべきデータ量が増加することを意味します。</p></div>
<div class="paragraph" id="pve_ceph_recommendation_raid">
<div class="title">RAIDの使用は避けてください</div><p>Cephはデータオブジェクトの冗長性とディスク（OSD）への複数並列書き込みを独自に処理するため、RAIDコントローラーの使用は通常、パフォーマンスや可用性の向上にはつながりません。むしろ、Cephは中間抽象化層なしでディスク全体を直接扱うよう設計されています。RAIDコントローラはCephのワークロード向けに設計されておらず、書き込みやキャッシュアルゴリズムがCephの動作と干渉する可能性があるため、状況を複雑化させ、場合によってはパフォーマンスを低下させる恐れがあります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">RAID コントローラはご使用にならないようお願いいたします。代わりにホストバスアダプタ（HBA）をご利用ください。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="pve_ceph_install_wizard">
<span>8.4. Ceph の初期インストールと設定</span>
<a class="headerlink" href="#pve_ceph_install_wizard" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_using_the_web_based_wizard">8.4.1. Webベースのウィザードの使用
<a class="headerlink" href="#_using_the_web_based_wizard" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-ceph-install.png">
<img src="images/screenshot/gui-node-ceph-install.png" alt="screenshot/gui-node-ceph-install.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VEでは、Ceph用の使いやすいインストールウィザードをご利用いただけます。
クラスタノードのいずれかをクリックし、メニューツリー内のCephセクションへお進みください。
Cephがまだインストールされていない場合、インストールを促すプロンプトが表示されます。</p></div>
<div class="paragraph">
<p>ウィザードは複数のセクションに分かれており、
Ceph を使用するには各セクションを正常に完了させる必要があります。</p></div>
<div class="paragraph">
<p>まず、インストールするCephのバージョンを選択する必要があります。他のノードと同じバージョンを選択するか、Cephを初めてインストールするノードの場合は最新版を選択することをお勧めします。</p></div>
<div class="paragraph">
<p>インストールを開始すると、ウィザードが Proxmox VE の Ceph リポジトリから必要なパッケージをすべてダウンロードし、インストールします。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-ceph-install-wizard-step0.png">
<img src="images/screenshot/gui-node-ceph-install-wizard-step0.png" alt="screenshot/gui-node-ceph-install-wizard-step0.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>インストールステップ完了後、設定ファイルの作成が必要となります。
この設定はクラスタごとに一度だけ行えば十分です。Proxmox VEの<a href="#chapter_pmxcfs">クラスタ設定ファイルシステム（pmxcfs）</a>を通じて、
残りのクラスタメンバー全てに自動的に配布されるためです。</p></div>
<div class="paragraph">
<p>設定ステップでは以下の設定を行います：</p></div>
<div class="ulist" id="pve_ceph_wizard_networks"><ul>
<li>
<p>
<strong>パブリックネットワーク：</strong>このネットワークは、パブリックストレージ通信（例：Ceph RBD バックアップディスクを使用する仮想マシン、または CephFS マウント）および異なる Ceph サービス間の通信に使用されます。この設定は必須です。 <br>
  CephトラフィックをProxmox VEクラスタ通信（corosync）および仮想ゲストのフロントエンド（パブリック）ネットワークから分離することを強く推奨いたします。そうしない場合、Cephの高帯域幅I/Oトラフィックが、低遅延を必要とする他のサービスに干渉を引き起こす可能性があります。</p>
</li>
<li>
<p>
<strong>クラスターネットワーク：</strong> <a href="#pve_ceph_osds">OSD</a>レプリケーションおよびハートビート通信も分離するために指定します。この設定は任意です。 <br>
  物理的に分離されたネットワークの使用をお勧めいたします。これにより、
Cephパブリックネットワークおよび仮想ゲストネットワークの負荷が軽減されるとともに、
Cephのパフォーマンスが大幅に向上します。 <br>
  Cephクラスタネットワークは後から設定変更し、物理的に分離された別のネットワークへ移行することが可能です。</p>
</li>
</ul></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-ceph-install-wizard-step2.png">
<img src="images/screenshot/gui-node-ceph-install-wizard-step2.png" alt="screenshot/gui-node-ceph-install-wizard-step2.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>さらに2つのオプションがありますが、これらは高度な設定とみなされます。
したがって、その内容を十分に理解している場合にのみ変更してください。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>レプリカ数</strong>: オブジェクトが複製される頻度を定義します。</p>
</li>
<li>
<p>
<strong>最小レプリカ数</strong>: I/Oが完了とマークされるために必要な最小レプリカ数を定義します。</p>
</li>
</ul></div>
<div class="paragraph">
<p>さらに、最初のモニターノードを選択する必要があります。このステップは必須です。</p></div>
<div class="paragraph">
<p>以上です。最終ステップとして成功ページが表示され、
今後の手順に関する詳細な指示が確認できます。これでシステムはCephの使用準備が整いました。
開始するには、追加の<a href="#pve_ceph_monitors">モニターノード</a>、<a href="#pve_ceph_osds">OSDノード</a>、
および少なくとも1<a href="#pve_ceph_pools">つのプール</a>を作成する必要があります。</p></div>
<div class="paragraph">
<p>本章の残りの部分では、Proxmox VEベースのCeph環境を最大限に活用する方法についてご案内いたします。これには前述のヒントに加え、新規Cephクラスターに有用な追加機能である<a href="#pveceph_fs">CephFS</a>などの詳細が含まれます。</p></div>
</div>
<div class="sect3">
<h4 id="pve_ceph_install">8.4.2. CLI による Ceph パッケージのインストール
<a class="headerlink" href="#pve_ceph_install" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ウェブインターフェースで提供されている推奨の Proxmox VE Ceph インストールウィザードの代わりに、各ノードで以下の CLI コマンドを使用することも可能です：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph install</tt></pre></div></div>
<div class="paragraph">
<p>これにより、<span class="monospaced">/etc/apt/sources.list.d/ceph.sources</span>に<span class="monospaced">apt</span>パッケージリポジトリが設定され、必要なソフトウェアがインストールされます。</p></div>
</div>
<div class="sect3">
<h4 id="_initial_ceph_configuration_via_cli">8.4.3. CLI による初期 Ceph 設定
<a class="headerlink" href="#_initial_ceph_configuration_via_cli" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE Ceph インストールウィザード（推奨）をご利用いただくか、
いずれかのノードで以下のコマンドを実行してください:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph init --network<span style="color: #993399">10.10</span><span style="color: #990000">.</span><span style="color: #993399">10.</span><span style="color: #993399">0/24</span></tt></pre></div></div>
<div class="paragraph">
<p>これにより、Ceph専用ネットワークを設定した初期構成<span class="monospaced">が/etc/pve/ceph.confに</span>作成されます。
<a href="#chapter_pmxcfs">このファイルはpmxcfsを介して</a>全Proxmox VEノードに自動配布されます。
また、同コマンド<span class="monospaced">は/etc/ceph/ceph.confに</span>シンボリックリンクを作成し、
当該ファイルを指し示します。
従いまして、構成ファイルを指定することなく、
Cephコマンドを直接実行することが可能となります。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pve_ceph_monitors">
<span>8.5. Ceph</span>Monitor
<a class="headerlink" href="#pve_ceph_monitors" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ceph-monitor.png">
<img src="images/screenshot/gui-ceph-monitor.png" alt="screenshot/gui-ceph-monitor.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>Cephモニター（MON）<span class="footnote"><br>[Ceph Monitor<a href="https://docs.ceph.com/en/squid/rados/configuration/mon-config-ref/">https://docs.ceph.com/en/squid/rados/configuration/mon-config-ref/</a>]<br></span>はクラスターマップのマスターコピーを管理します。高可用性を確保するためには、
少なくとも3台のモニターが必要です。インストールウィザードをご利用の場合、
1台のモニターは既にインストール済みです。
クラスターが小規模から中規模である限り、
3台以上のモニターは必要ありません。
これ以上のモニターが必要となるのは、
非常に大規模なクラスターのみです。</p></div>
<div class="sect3">
<h4 id="pveceph_create_mon">8.5.1. モニターの作成
<a class="headerlink" href="#pveceph_create_mon" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>モニターを設置したい各ノード（3台のモニターが推奨されます）において、
GUIの「<em>Ceph」→「Monitor」</em>タブを使用するか、以下のコマンドを実行してモニターを作成してください:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph mon create</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="pveceph_destroy_mon">8.5.2. モニターの削除
<a class="headerlink" href="#pveceph_destroy_mon" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>GUI 経由で Ceph モニターを削除するには、まずツリービューでノードを選択し、
<strong>Ceph → Monitor</strong>パネルに移動します。対象の MON を選択し、
<strong>Destroy</strong>ボタンをクリックしてください。</p></div>
<div class="paragraph">
<p>CLIでCephモニターを削除するには、まずMONが稼働しているノードに接続します。
その後、以下のコマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph mon destroy</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">クォーラムには少なくとも3台のモニターが必要です。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pve_ceph_manager">
<span>8.6. Ceph マネージャー</span>
<a class="headerlink" href="#pve_ceph_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Managerデーモンはモニターと共に動作します。クラスターを監視するためのインターフェースを提供します。Ceph Luminousのリリース以降、少なくとも1つのceph-mgrデーモンが必要です。<span class="footnote"><br>[Ceph Manager<a href="https://docs.ceph.com/en/squid/mgr/">https://docs.ceph.com/en/squid/mgr/</a>]<br></span></p></div>
<div class="sect3">
<h4 id="pveceph_create_mgr">8.6.1. マネージャーの作成
<a class="headerlink" href="#pveceph_create_mgr" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>複数のマネージャーをインストールすることは可能ですが、
同時にアクティブになるマネージャーは1つだけです。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph mgr create</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Ceph マネージャーはモニターノードにインストールすることを推奨いたします。
高可用性を実現するため、複数のマネージャーをインストールしてください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pveceph_destroy_mgr">8.6.2. マネージャーの削除
<a class="headerlink" href="#pveceph_destroy_mgr" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>GUI 経由で Ceph マネージャーを削除するには、まずツリービューでノードを選択し、
<strong>Ceph → Monitor</strong>パネルに移動します。マネージャーを選択し、
<strong>Destroy</strong>ボタンをクリックします。</p></div>
<div class="paragraph">
<p>CLI 経由で Ceph モニターを削除するには、まずマネージャーが稼働しているノードに接続します。その後、以下のコマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph マネージャーの削除</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">マネージャーは必須要件ではありませんが、PG自動スケーリング、デバイス健全性監視、テレメトリなどの重要な機能を扱うため、Cephクラスターにとって極めて重要です。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pve_ceph_osds">
<span>8.7. Ceph</span>OSD
<a class="headerlink" href="#pve_ceph_osds" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ceph-osd-status.png">
<img src="images/screenshot/gui-ceph-osd-status.png" alt="screenshot/gui-ceph-osd-status.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>Ceph<strong>オブジェクト</strong> <strong>ストレージ</strong> <strong>デーモンは</strong>、ネットワーク経由でCephのオブジェクトを保存します。物理ディスク1台につき1つのOSDを使用することを推奨いたします。</p></div>
<div class="sect3">
<h4 id="pve_ceph_osd_create">8.7.1. OSDの作成
<a class="headerlink" href="#pve_ceph_osd_create" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>OSD は、Proxmox VE のウェブインターフェースまたは<span class="monospaced">pveceph</span> を使用した CLI のいずれかで作成できます。例：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph osd create /dev/sd<span style="color: #990000">[</span>X<span style="color: #990000">]</span></tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">Cephクラスターは、少なくとも3ノードと12以上のOSDを推奨いたします。
OSDはノード間で均等に分散配置してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ディスクが以前使用されていた場合（ZFSやOSDとしてなど）、まずその使用痕跡をすべて消去する必要があります。パーティションテーブル、ブートセクター、その他のOSDの残骸を削除するには、以下のコマンドを使用できます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph-volume lvm zap /dev/sd<span style="color: #990000">[</span>X<span style="color: #990000">]</span>--destroy</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMVUlEQVRogdWZeXDVVZbHP7/f27JB
wtJIiCERRFlbx5FuHRrRBgtBsRIwCCOrFmGmiDBjYVNlQlgiQjU6IjI4xLJxGf5QGp0Cbaftsu3R
hu6aYXqgLZoWEsjyyDP7S972e7/l3vnj5cW3Ji9M/zOn6lRS997fvd/vueece+59ipSS/89iv5mP
ZEQQQsS23RQARVEAUFUVRVFQog0ZyogJSClld3c327Ztw7IsLMuKto90KgBsNhtVVVXMnj2bvLw8
7Ha7HBEJKWXGKoSQXV1dcsuWLfLSpUsyKkKIIdWyrLTqdrvlU089Jc+cOSM9Ho8Mh8NSCCEzxTRi
8JWVlbKtre0vAt6yLGmapmxtbZXr1q2TZ86ckW1tbSMikTH4GzduyKqqqkHwsSA1TZOhUChOg8Hg
oBqGIQ3DSAk+VleuXDliEspwviullD09PbzwwgscO3Yszt91XScQCNDZ2YlhGIPfuFwu7Pb48FJV
lZycnEG/z8/PRwiBqqqDYzweD88//zyrV69m7ty5jBs3DofDMWRgD0lASik9Hg979uzh2LFjcYEa
CoVob2/n2q9+hbZ585BGSCWltbVMr61NtSYbN25k7dq1zJkzZ1gSaqrGWPD79+9PAh8MBuns7OTi
e+8R2rwZCYOaqTTt3cuf6+qSwAMcP36co0eP8vXXX9Pd3Y1hGMg0lk65A1HwdXV1vPHGG0mW7+jo
4A8/+xn2BAAAI0riQOnu3cyork7Zt3btWtavX89dd92VdieSCEgppdvt5sCBAxw5ciSuLxQK0dTU
RMOHHyJ37hwh1NSiAKU7djDzxRdT9q9YsYJt27YxY8aMlCTiCEgp5eXLl6mvr+fVV1+NmygYDNLW
1sY3J09ipLEYQDPw2sBfCTwMLARKgKwhiNxWU8OsXbvi2qLYnnzySSorK1PvRGyqvH79uty6dWtS
Lg8EAvLKlSvyo1275M8hSV8H+eMBvRPkP9Vslp0tV6W3u12+c7hOTgT5NyAXgtwE8gTIUyn0D9XV
0jAMqet6klZUVMjPP/88KcWqUcs3NjZy+PBhDh06FGeFqNtcOnECY8+euICVwDWgFtj/m1/wD+8f
5xtg6uy5ZI+5BSkkU6fexgu7tvLWhd/x1tXL5P/905wAggnzSODavn388Sc/SblDL7/8Mq+99hqX
L1+OC2zb7t27uX79+u7Dhw+ndJvW1lYaP/qI0EDKS1z0XeDjC7/l9llz+d6EWxjv0imdcgeFRcVo
fR46vm1Cx8ndP5hP3qjR/GDuX/GbC5/iberl1qirxGjv73+PYRjc8tBDcVhGjRpFRUUF27dvp7i4
mPz8fFwuV2QHVq1aldLyDQ0NXDt5En91NRIQCRqNHld2HsLUCfu6GD9mNIoVQggDy9RQpYLTbkdV
7Vh6CH9vJ/fcfz/vALsAN2AlzHv1wAEu1tTExUI0Hl555RXq6upobm4mEAhECEyePDkOvK7rtLS0
cOP0aby1tUnAo2oNkFAUSTjoRfN+ix7wgjRBShACVVFQRGSkHvTypwtnmXHPQhrbb3D0k1McAdpi
DBLVhp/+lIvV1UlV7oQJE8jNzcXtduPz+ZIPMtM0aWhooPH99+mtrU1ymVRqUxUQFlJYSBFGCivG
OSyEaSCFAGlhd+Vy7w/n43BmM3POXWx69hl8AyMTDXTl4EEu7t2bCBGAQCCAruupCdjtdrp3705r
+ViN22YhsUwdyzRBCpACyzIRMnpngCxXNjYlMk4L+ggoYXxp5pbAlX37cDgcSQSEEAxmoVgQg/9n
AP67bVdAUcFmQ3W6IgtIiWUKLCGwLGvQj69e+m+EsBB6iGB/N/3e9oyNlIgRYm5kiR2JH0L6MkFY
Ei0UQKAycdJUbIodT3Mjpu6n3xfCptoRlomQCqZpRkhLCykMhLBQSV1HJbalKnvSF3MpNO0OSIEw
DWyuPCaVzCRv7ER8Ph+mtJM35lZsdjvuxktYhobDkYOCgqJEDWLLaAfSVc1p78SJO2AAvUBggLUN
KIx2Kgqjv3crY2wOiqaqKKoKihKJCctCC/npbW+jq7sbS7UjkGCZCCkQQkdJsV6mRWHGBH4HLHpx
F3LcGDq6u7nw2S85++V/4gb0kB9hFoAZwuZwgc2BqjpQVRWbzYXd4cDlysHn7WJi0W2EfH24XA6E
jKySqhTPtDRPIjB4XUtoPw3sKV/O+KJipJT4V63mq3/7Obu21/LN/5xl9l/PIys7G2fOaBS7E5vN
QrU7UW0KNlUFp5P8MeO5/8HFhPo7CXr7MMIaQW8neSkMlqnEEYj1s8QJbwXaWpopmDgJh93OqHGF
LFy9jjunTeHNo2uAvUy54/uMuaUYV24BUpVYpoVEwaY4UVUbitNJ9ugxOBw2tEAPfX29QCjuVB9O
EmNBTdeRGEj3A56OdkwtgDDCCKFjz8ql6N55/G3VcRouX+SXH72Ht6udcCg4cJiJSPIn8oCloIKU
KAhURUUIiVCjx128pjtrEiVtFkrMNNOBA+s34XG3YIRDSMtAkSbOrDzuvOchHnmiklEFY3n76G7O
f/nv9Ht7EMJCSjGoljCxjOBAnaSjhYPowevDZrx04FMSGLwnJEzmAOYCn33wAUYoiGXoSMsEoeNw
ZTO2aDrzFpWxck0VJVOn4fd2E/T7oneNyOFlGkjLwNTD6FoILRQEa/hDcyhJIuB0OlFVNeVE04B3
XjnC+d9+hRYKYJlhpDBBGDidDiaUfp/xk24nJ3c0eaPzsKsgzEhtZJkGIuzDNDRCAR99fb309XYh
NAYPsnQ6IgJSSgoKCihavDilJZ4Aajf8HVf/fAnLCCNNAyktECaqIsgbV8So0WMHrn2RGLBMHREO
YBg6eiiIFgzQ7/US8vmYoEDuENa/u6oqcwJRPysoKOC+N9+kcNGiJGvkAQuADY+twn3tCuFg/4CV
DbB0VKHhzHbhdGVhs6kgDKTuR9f86KEAWtBHd0c73p52pB5Av5KewJxnnmHeoUOEw+EkjHEEYi8M
EHlFKyws5IfHjlG4cGHSxJOA1cATPy7nT388j+73YoYDCEuP1DhSRrKOlFhmmLAWQNMCBHw9tHtu
8K2nBcsI8uGxf8HoiRBINNTtjz7KQ/X1xL6iRDHGvubZAfr7+1Nuz+TJk6G+nv/atInmX/86rq8A
WAlUrahk/Fio/8XHjM4fi93pHCgRFCzLQtd1tFAQLeCjs9NNb4cHxdL44J8PozfD7XyXRqNy97p1
PPz220gp0XU9zriKogw+SaqqGtmB48ePU15enkRASklRURH31tcz6cEHk1JrAfAUcEcPLLjvMU69
/694uzsI+X3093TS5blBl8eNt72VHk8Tfd9eR+vv4MQ/HkZpiJwttgTL3/Hoo2nBNzY2smjRIhYs
WEBBQQEulyvyLuT3+2VTUxM7d+7k5MmTKXNuS0sL555+mtYvv0zqE0A7kavhqFL4oAlCCWOygGIi
qTiHyMnuTBgz/bHHKDt9GillnN8D+P1+ysrKWLJkCdOmTWPWrFmUlpZGCAghpN/vp7m5mZqaGl5/
/XUKCwtJFLfbzX+sX8+Nr75K6rtZiXr49KVLKf/4Y4QQ6LqeBP6RRx6hvLycadOmMXPmTEpKSsjN
zf3uZS6WRHV1NadOnUpaTEpJa2sr5zZupOkmSaQqk2csWcLyTz4BQNO0uL7GxkbWr1+fErzNZlMG
w1lVVSUvL4+SkhL27dvH8uXL8Xg8ceABiouLue+ttyieN2+IK2Z6TRx/5+LFacE3NDRQWVmZFjwk
nAOxJF566SW2bNnChQsXkmKipKSEB959l9vmzcvo1pZOpz/8ME98+mla8Bs2bGDZsmVpwUOa5/VE
d0oXE319fXxWXs43Z88m9Q0n03/0I1YPJIRE8OfOnWPHjh2UlZUNCT4tgUQSO3fupKqqigceeGCw
P/a7VM8emUg0VcbK+fPn2bp1KytWrBgW/JAEEknU1NTw7LPPMn/+/GFBZQI8lZw/f57nnnuO5cuX
M2XKlGHBD0sgkURdXR2PP/44FRUVNwV+qP7Tp09z8ODBjNxmRAQSSRw4cIBly5axdOnSvwh4RVH4
4osv2L9/P2VlZRlbfkQEEkls376djo4OQqHE83bk4nK5EEKwZs0aSktLRwR+RATgOxItLS1cu3aN
vr6+wTfK/4tEfzeeMmUKkydPzhg8jJAAREgEg0H6+vrQNC2pFL8ZUVWVrKws8vPzycnJQVXVjH/s
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">上記のコマンドはディスク上の全データを破壊します！</td>
</tr></table>
</div>
<div class="paragraph">
<div class="title">Ceph Bluestore</div><p>Ceph Kraken リリースより、Bluestore と呼ばれる新しい Ceph OSD ストレージタイプが導入されました。<span class="footnote"><br>[Ceph Bluestore<a href="https://ceph.com/community/new-luminous-bluestore/">https://ceph.com/community/new-luminous-bluestore/</a>]<br></span> 。
Ceph Luminous 以降、OSD 作成時のデフォルト設定となります。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph osd 作成 /dev/sd<span style="color: #990000">[</span>X<span style="color: #990000">]</span></tt></pre></div></div>
<div class="paragraph">
<div class="title">Block.db と block.wal</div><p>OSD用に別個のDB/WALデバイスを使用したい場合、<em>-db</em> <em>_dev</em> <em>および</em> <em>-wal_devオプション</em>で指定できます。WALは、別途指定がない場合、DBと同じデバイス上に配置されます。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph osd 作成 /dev/sd<span style="color: #990000">[</span>X<span style="color: #990000">]</span>-db_dev /dev/sd<span style="color: #990000">[</span>Y<span style="color: #990000">]</span>-wal_dev /dev/sd<span style="color: #990000">[</span>Z<span style="color: #990000">]</span></tt></pre></div></div>
<div class="paragraph">
<p><em>-db_size</em>および<em>-wal_size</em>パラメータでそれぞれサイズを直接指定できます。指定がない場合、以下の値（順序通り）が使用されます：</p></div>
<div class="ulist"><ul>
<li>
<p>
Ceph設定におけるbluestore_block_{db,wal}_size…</p>
<div class="ulist"><ul>
<li>
<p>
… データベース、セクション<em>osd</em></p>
</li>
<li>
<p>
… データベース、<em>global</em>セクション</p>
</li>
<li>
<p>
… ファイル、セクション<em>osd</em></p>
</li>
<li>
<p>
… ファイル、<em>global</em>セクション</p>
</li>
</ul></div>
</li>
<li>
<p>
OSDサイズの10%（DB）/1%（WAL）</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">DBはBlueStoreの内部メタデータを格納し、WALはBlueStoreの内部ジャーナル（書き込み事前ログ）です。
パフォーマンス向上のため、高速なSSDまたはNVRAMの使用をお勧めいたします。</td>
</tr></table>
</div>
<div class="paragraph">
<div class="title">Ceph Filestore</div><p>Ceph Luminous 以前では、Filestore が Ceph OSD のデフォルトストレージタイプとして使用されていました。
Ceph Nautilus 以降、Proxmox VE は<em>pveceph</em>によるこのような OSD の作成をサポートしていません。
それでも Filestore OSD を作成したい場合は、<em>ceph-volume</em>を直接ご利用ください。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph-volume lvm create --filestore --data /dev/sd<span style="color: #990000">[</span>X<span style="color: #990000">]</span>--journal /dev/sd<span style="color: #990000">[</span>Y<span style="color: #990000">]</span></tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="pve_ceph_osd_destroy">8.7.2. OSD の削除
<a class="headerlink" href="#pve_ceph_osd_destroy" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>OSD またはそのディスクに問題が発生した場合は、まず<a href="#pve_ceph_mon_and_ts">トラブルシューティング</a>を行い、
<a href="#pve_ceph_osd_replace">交換</a>が必要かどうかを判断してください。</p></div>
<div class="paragraph">
<p>OSDを破棄するには、該当するOSDが存在するノード上で、<em>&amp;lt;Node&amp;gt; → Ceph → OSDパネル</em>に移動するか、前述のCLIコマンドをご利用ください。</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
OSDの削除処理を実行する前に、クラスターに十分な空き容量があることをご確認ください。
<em>Ceph → OSDパネル</em>にて、削除対象のOSDが<span class="monospaced">稼働中</span>（<span class="monospaced">AVAILが0以外</span>）の場合、
<span class="monospaced">全OSDのUsed(%)</span>値が<span class="monospaced">デフォルトのnearfull_ratio</span>（<span class="monospaced">85%）</span>を大幅に下回っていることを確認してください<span class="monospaced">。</span></p>
<div class="paragraph">
<p>この方法により、今後のリバランスに伴うリスクを軽減できます。リバランスにより
OSDが満杯状態となり、Cephプール上のI/Oがブロックされる可能性があります。</p></div>
<div class="paragraph">
<p>CLI で同様の情報を取得するには、以下のコマンドをご利用ください：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph osd df tree</tt></pre></div></div>
</li>
<li>
<p>
破棄予定のOSDがまだ<span class="monospaced">アウト状態になっていない</span>場合は、該当OSDを選択し<strong>「アウト</strong>」をクリックしてください。これによりデータ分散から除外され、リバランスが開始されます。</p>
<div class="paragraph">
<p>以下のコマンドでも同様の結果が得られます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph osd out<span style="color: #990000">&amp;lt;</span><span style="color: #990000">id&amp;gt;</span></tt></pre></div></div>
</li>
<li>
<p>
可能であれば、Cephによるリバランスが完了し、常に十分なレプリカが確保されるまでお待ちください。OSDは空の状態となり、その時点で<em>PG数が0と</em>表示されます。</p>
</li>
<li>
<p>
「<strong>停止」</strong>をクリックしてください。停止が安全でない場合、警告が表示されますので「<strong>キャンセル</strong>」をクリックしてください。しばらくしてから再度お試しください。</p>
<div class="paragraph">
<p>OSDの停止が安全かどうかを確認し、停止するには以下のコマンドを使用できます:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph osd ok-to-stop<span style="color: #990000">&amp;lt;</span><span style="color: #990000">id&amp;gt;</span>
pveceph stop --service osd<span style="color: #990000">.&amp;lt;</span><span style="color: #990000">id&amp;gt;</span></tt></pre></div></div>
</li>
<li>
<p>
最後に：</p>
<div class="paragraph">
<p>OSDをCephから削除し、ディスク上の全データを消去するには、まず
<strong>[詳細] → [破棄]</strong>をクリックしてください。パーティションテーブルやその他の構造体をクリーンアップするには、クリーンアップオプションを有効にしてください。これにより、Proxmox VEでディスクを直ちに再利用することが可能になります。
その後、[<strong>削除]</strong>をクリックしてください。</p></div>
<div class="paragraph">
<p>OSD を破棄する CLI コマンドは以下の通りです:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph osd 破壊<span style="color: #990000">&amp;lt;</span><span style="color: #990000">id&amp;gt;</span> <span style="color: #990000">[</span>--cleanup<span style="color: #990000">]</span></tt></pre></div></div>
</li>
</ol></div>
</div>
</div>
<div class="sect2">
<h3 id="pve_ceph_pools">
<span>8.8. Cephプール</span>
<a class="headerlink" href="#pve_ceph_pools" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ceph-pools.png">
<img src="images/screenshot/gui-ceph-pools.png" alt="screenshot/gui-ceph-pools.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>プールはオブジェクトを格納するための論理的なグループです。
これは<strong>配置</strong> <strong>グループ</strong>（<span class="monospaced">PG</span>、<span class="monospaced">pg_num</span>）として知られるオブジェクトの集合を保持します。</p></div>
<div class="sect3">
<h4 id="_create_and_edit_pools">8.8.1. プールの作成と編集
<a class="headerlink" href="#_create_and_edit_pools" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>プールは、任意の Proxmox VE ホストの<strong>Ceph → Pools</strong> にあるコマンドラインまたはウェブインターフェースから作成および編集できます。</p></div>
<div class="paragraph">
<p>オプションを指定しない場合、デフォルトで<strong>128個のPG</strong>、<strong>3レプリカサイズ</strong>、
<strong>2レプリカのmin_size</strong>を設定します。これにより、いずれかのOSDが故障しても
データ損失が発生しないよう保証されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><strong>min_size を 1 に設定しないでください</strong>。min_size が 1 のレプリケートプールでは、
オブジェクトが 1 つのレプリカしか持たない状態で I/O 操作を許可してしまいます。
これにより、データ損失、不完全な PG、またはオブジェクトが見つからない状態が発生する可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>PGオートスケーラーを有効にするか、ご自身の環境に基づいてPG数を計算されることをお勧めいたします。計算式とPG計算ツールはオンラインで確認できます：<span class="footnote"><br>[PG計算ツール<a href="https://web.archive.org/web/20210301111112/http://ceph.com/pgcalc/">https://web.archive.org/web/20210301111112/http://ceph.com/pgcalc/</a>]<br></span>Ceph Nautilus以降では、PG数を変更できます：
<span class="footnote" id="_footnote_placement_groups"><br>[配置グループ<a href="https://docs.ceph.com/en/squid/rados/operations/placement-groups/">https://docs.ceph.com/en/squid/rados/operations/placement-groups/</a>]<br></span>を変更できます。</p></div>
<div class="paragraph">
<p>PGオートスケーラー<span class="footnote" id="_footnote_autoscaler"><br>[自動スケーリング<a href="https://docs.ceph.com/en/squid/rados/operations/placement-groups/#automated-scaling">https://docs.ceph.com/en/squid/rados/operations/placement-groups/#automated-scaling</a>]<br></span>は、
バックグラウンドでプールのPG数を自動的に調整します。
<span class="monospaced">ターゲットサイズまたは</span> <span class="monospaced">ターゲット比率の</span>詳細パラメータを設定することで、
PGオートスケーラーがより適切な判断を行うのに役立ちます。</p></div>
<div class="listingblock">
<div class="title">CLI を使用したプール作成例</div>
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph pool create<span style="color: #990000">&amp;lt;</span><span style="color: #990000">pool-name&amp;gt;</span>--add_storages</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">プール用のストレージを自動定義したい場合は、
ウェブインターフェースで「ストレージとして追加」チェックボックスをオンにしたままにするか、
プール作成時にコマンドラインオプション<em>--add_storages</em>をご利用ください。</td>
</tr></table>
</div>
<div class="sect4">
<h5 id="_pool_options">プールオプション<a class="headerlink" href="#_pool_options" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ceph-pool-create.png">
<img src="images/screenshot/gui-ceph-pool-create.png" alt="screenshot/gui-ceph-pool-create.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>以下のオプションは、プール作成時に利用可能であり、一部はプール編集時にも利用可能です。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
名前</dt>
<dd>
<p>
プールの名前。これは一意である必要があり、後から変更できません。</p>
</dd>
<dt class="hdlist1">
サイズ</dt>
<dd>
<p>
オブジェクトごとのレプリカ数。Cephは常にこの数のオブジェクトコピーを保持しようとします。デフォルト:<span class="monospaced">3</span>。</p>
</dd>
<dt class="hdlist1">
PG 自動スケーリングモード</dt>
<dd>
<p>
プールの自動PGスケーリングモード<span class="footnoteref"><br><a href="#_footnote_autoscaler">[autoscaler]</a><br></span> <span class="monospaced">warnに設定すると</span>、プールのPG数が最適でない場合に警告メッセージが表示されます。
デフォルト:<span class="monospaced">warn</span>。</p>
</dd>
<dt class="hdlist1">
ストレージとして追加</dt>
<dd>
<p>
新しいプールを使用して VM またはコンテナのストレージを設定します。
デフォルト:<span class="monospaced">true</span>(作成時のみ表示されます)。</p>
</dd>
</dl></div>
<div class="dlist"><div class="title">詳細オプション</div><dl>
<dt class="hdlist1">
最小サイズ</dt>
<dd>
<p>
オブジェクトごとの最小レプリカ数。PGのレプリカ数がこの数未満の場合、Cephは当該プールへのI/Oを拒否します。デフォルト:<span class="monospaced">2</span>。</p>
</dd>
<dt class="hdlist1">
圧縮ルール</dt>
<dd>
<p>
クラスタ内でのオブジェクト配置をマッピングする際に使用するルールです。これらのルールは、データがクラスタ内にどのように配置されるかを定義します。デバイスベースのルールに関する情報は、<a href="#pve_ceph_device_classes">Ceph CRUSH およびデバイスクラス</a>をご参照ください。</p>
</dd>
<dt class="hdlist1">
PGの数</dt>
<dd>
<p>
プールが初期に持つべき配置グループの数です。<span class="footnoteref"><br><a href="#_footnote_placement_groups">[placement_groups]</a><br></span>デフォルト:<span class="monospaced">128</span>。</p>
</dd>
<dt class="hdlist1">
目標比率</dt>
<dd>
<p>
プールに予想されるデータの比率です。PGオートスケーラーは、他の比率セットとの相対的な比率を使用します。両方が設定されている場合、<span class="monospaced">目標サイズ</span>よりも優先されます。</p>
</dd>
<dt class="hdlist1">
目標サイズ</dt>
<dd>
<p>
プールに存在するデータの推定量です。PGオートスケーラーはこのサイズを基に最適なPG数を推定します。</p>
</dd>
<dt class="hdlist1">
最小PG数</dt>
<dd>
<p>
配置グループの最小数です。この設定は、
当該プールにおけるPG数の下限値を微調整するために使用されます。PGオートスケーラーは、
この閾値を下回るPGをマージしません。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>Ceph プール操作に関する詳細情報は、Ceph プール操作マニュアル<span class="footnote"><br>[Ceph pool</span>operation
<span class="footnote"><a href="https://docs.ceph.com/en/squid/rados/operations/pools/">https://docs.ceph.com/en/squid/rados/operations/pools/</a>]<br></span>でご確認いただけます。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pve_ceph_ec_pools">8.8.2. 消去符号化プール
<a class="headerlink" href="#pve_ceph_ec_pools" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>エラー訂正符号（EC）は「前方誤り訂正」コードの一種であり、
一定量のデータ損失から回復することを可能にします。
エラー訂正符号化プールは複製プールと比較して
より多くの使用可能領域を提供できますが、
その代償としてパフォーマンスが低下します。</p></div>
<div class="paragraph">
<p>比較のためご説明いたします：従来の複製プールではデータの複数レプリカが保存されます（<span class="monospaced">サイズ</span>）。一方、消去符号化プールではデータは<span class="monospaced">k個のデータ</span>チャンクに分割され、<span class="monospaced">さらにm個の</span>符号化（チェック）チャンクが追加されます。これらの符号化チャンクは、データチャンクが欠損した場合にデータを再構築するために使用されます。</p></div>
<div class="paragraph">
<p>符号化チャンクの数を<span class="monospaced">表すmは</span>、データを一切失うことなく失うことができるOSDの数を定義します。保存されるオブジェクトの総量は<span class="monospaced">k + mとなります</span>。</p></div>
<div class="sect4">
<h5 id="_creating_ec_pools">ECプールの作成
<a class="headerlink" href="#_creating_ec_pools" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>EC（Erasure coded）プールは、<span class="monospaced">pveceph</span>CLIツールを使用して作成できます。
ECプールの計画においては、レプリケートプールとは動作が異なる点に留意する必要があります。</p></div>
<div class="paragraph">
<p>ECプールのデフォルト<span class="monospaced">の最小サイズ（min_size）</span> <span class="monospaced">はm</span>パラメータに依存します。<span class="monospaced">m = 1</span>の場合、ECプールの<span class="monospaced">最小サイズは</span> <span class="monospaced">k</span>となります。<span class="monospaced">m &gt; 1の場合</span>、<span class="monospaced">最小サイズは</span> <span class="monospaced">k + 1</span>となります。Cephのドキュメントでは、保守的な<span class="monospaced">最小サイズとして</span> <span class="monospaced">k + 2を</span>推奨しています。
<span class="footnote"><br>[Ceph Erasure Coded Pool</span> Recovery
<span class="footnote"><a href="https://docs.ceph.com/en/squid/rados/operations/erasure-code/#erasure-coded-pool-recovery">https://docs.ceph.com/en/squid/rados/operations/erasure-code/#erasure-coded-pool-recovery</a>]<br></span> 。</p></div>
<div class="paragraph">
<p>利用可能なOSDが<span class="monospaced">min_size</span>未満の場合、プールへのI/Oは十分なOSDが再び利用可能になるまでブロックされます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">エラー訂正付きコードプールを計画する際は、<span class="monospaced">min_size</span>に十分ご注意ください。
これは利用可能なOSDの必要数を定義するためです。これを満たさない場合、
I/Oがブロックされる可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>例えば、ECプール<span class="monospaced">でk = 2</span>、<span class="monospaced">m = 1の場合</span>、<span class="monospaced">サイズ = 3</span>、
<span class="monospaced">最小サイズ = 2となり</span>、1つのOSDが故障しても動作を継続します。
プール<span class="monospaced">がk = 2</span>、<span class="monospaced">m = 2</span>で構成されている場合、<span class="monospaced">サイズ = 4</span>、
<span class="monospaced">最小サイズ = 3</span>となり、1つのOSDが失われても動作を継続します。</p></div>
<div class="paragraph">
<p>新しいECプールを作成するには、以下のコマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph pool create<span style="color: #990000">&amp;lt;</span><span style="color: #990000">pool-name&amp;gt;</span>--erasure-coding<span style="color: #993399">k=2</span><span style="color: #990000">,</span><span style="color: #993399">m=1</span></tt></pre></div></div>
<div class="paragraph">
<p>オプションのパラメータとして、<span class="monospaced">failure-domain</span>および<span class="monospaced">device-class</span> が指定可能です。
プールで使用される EC プロファイル設定を変更する必要がある場合は、
新しいプロファイルで新規プールを作成する必要があります。</p></div>
<div class="paragraph">
<p>これにより、新しいECプールに加え、RBDのオムマップやその他のメタデータを保存するために必要なレプリケートプールが作成されます。最終的には、<span class="monospaced">&amp;lt;プール名&amp;gt;-data</span><span class="monospaced">プールと&amp;lt;プール名&amp;gt;-metadataプール</span>が存在することになります。デフォルトでは、対応するストレージ構成も作成されます。
この動作を望まない場合は、<span class="monospaced">--add_storages 0</span>パラメータを指定することで無効化できます。
ストレージ構成を手動で設定する際は、<span class="monospaced">data-pool</span>パラメータの設定が必要であることを
ご留意ください。これにより初めて、EC プールがデータオブジェクトの保存に使用されます。
例：</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">オプションパラメータ<span class="monospaced">--size</span>、<span class="monospaced">--min_size</span>、<span class="monospaced">--crush_rule</span>は
レプリケートされたメタデータプールには適用されますが、
エラー訂正符号化データプールには適用されません。
データプールの<span class="monospaced">min_size を</span>変更する必要がある場合は、後から変更可能です。
<span class="monospaced">サイズおよび</span> <span class="monospaced">crush_rule</span>パラメータは、エラー訂正符号化プールでは
変更できません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ECプロファイルをさらにカスタマイズする必要がある場合は、
Cephツール（<span class="footnote"><br>[Ceph Erasure Code</span> Profile
<span class="footnote"><a href="https://docs.ceph.com/en/squid/rados/operations/erasure-code/#erasure-code-profiles">https://docs.ceph.com/en/squid/rados/operations/erasure-code/#erasure-code-profiles</a>]<br></span> ）で直接作成し、
<span class="monospaced">profileパラメータで</span>使用するプロファイルを指定することで実現できます。</p></div>
<div class="paragraph">
<p>例：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph pool create<span style="color: #990000">&amp;lt;</span><span style="color: #990000">pool-name&amp;gt;</span>--erasure-coding<span style="color: #990000"> profile=&amp;lt;</span><span style="color: #990000">profile-name&amp;gt;</span></tt></pre></div></div>
</div>
<div class="sect4">
<h5 id="_adding_ec_pools_as_storage">ECプールをストレージとして追加
<a class="headerlink" href="#_adding_ec_pools_as_storage" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>既存のECプールをProxmox VEのストレージとして追加することも可能です。
<span class="monospaced">RBDプールの</span>追加と同様の方法で動作しますが、<span class="monospaced">追加でdata-poolオプション</span>が必要です。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pvesm add rbd<span style="color: #990000">&amp;lt;</span><span style="color: #990000">ストレージ名&amp;gt;</span>--pool<span style="color: #990000">&amp;lt;</span><span style="color: #990000">レプリケートプール&amp;gt;</span>--data-pool<span style="color: #990000">&amp;lt;</span><span style="color: #990000">ECプール&amp;gt;</span></tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">ローカルの Proxmox VE クラスタで管理されていない外部 Ceph クラスタについては、<span class="monospaced">キーリングおよび</span> <span class="monospaced">monhost</span>オプションの追加をお忘れなく。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_destroy_pools">8.8.3. プールの破棄
<a class="headerlink" href="#_destroy_pools" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>GUI 経由でプールを削除するには、ツリービューでノードを選択し、
「<strong>Ceph → Pools</strong>」パネルに移動します。削除するプールを選択し、
<strong>「Destroy」</strong>ボタンをクリックしてください。プールの削除を確定するには、
プール名の入力が必要です。</p></div>
<div class="paragraph">
<p>プールを削除するには、以下のコマンドを実行してください。関連するストレージも削除するには、<em>-remove_storages</em>オプションを指定してください。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph pool destroy<span style="color: #990000">&amp;lt;</span><span style="color: #990000">name&amp;gt;</span></tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">プールの削除はバックグラウンドで実行され、時間がかかる場合があります。
この処理の間、クラスタ内のデータ使用量が減少していくことに気づかれるでしょう。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_pg_autoscaler">8.8.4. PGオートスケーラー
<a class="headerlink" href="#_pg_autoscaler" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>PGオートスケーラーは、クラスターが各プールに保存されている（予想される）データ量を考慮し、適切なpg_num値を自動的に選択することを可能にします。
Ceph Nautilus以降で利用可能です。</p></div>
<div class="paragraph">
<p>調整が反映される前に、PGオートスケーラーモジュールの有効化が必要となる場合があります。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph mgr module<span style="font-weight: bold"><span style="color: #0000FF">enable</span></span>pg_autoscaler</tt></pre></div></div>
<div class="paragraph">
<p>オートスケーラーはプールごとに設定され、以下のモードがあります：</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
警告<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
提案された<span class="monospaced">pg_num</span>の値が現在の値から大きく異なる場合、
健康状態に関する警告が表示されます。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
on<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
<span class="monospaced">pg_num</span>は手動操作を必要とせず自動的に調整されます。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
オン
オフ<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
自動的な<span class="monospaced">pg_num</span>の調整は行われず、PG カウントが最適でない場合でも警告は発行されません。</p>
</td>
</tr>
</table></div>
<div class="paragraph">
<p>将来のデータ保存を容易にするため、
スケーリング係数は<span class="monospaced">target_size</span>、<span class="monospaced">target_size_ratio</span>、および<span class="monospaced">pg_num_min</span>オプションで調整可能です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">デフォルトでは、オートスケーラーはプール内のPG数が3倍の差がある場合に調整を検討します。
これによりデータ配置に大幅な変化が生じ、クラスターに高負荷がかかる可能性があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>Cephのブログにて、PGオートスケーラーに関するより詳細な紹介をご覧いただけます -
<a href="https://ceph.io/rados/new-in-nautilus-pg-merging-and-autotuning/">Nautilusの新機能: PGマージと自動チューニング</a>。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pve_ceph_device_classes">
<span>8.9. Ceph CRUSH およびデバイスクラス</span>
<a class="headerlink" href="#pve_ceph_device_classes" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ceph-config.png">
<img src="images/screenshot/gui-ceph-config.png" alt="screenshot/gui-ceph-config.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p><span class="footnote"><br></span> <strong></strong> <span class="footnote">[<a href="https://ceph.com/assets/pdfs/weil-crush-sc06.pdf">https://ceph.com/assets/pdfs/weil-crush-sc06.pdf</a>]<br></span>(Controlled
<strong>Replication</strong> <strong>Under</strong> <strong>Scalable</strong> <strong>Hashing</strong>) アルゴリズムは、
Cephの基盤を成しております。</p></div>
<div class="paragraph">
<p>CRUSHはデータの保存先と取得先を決定します。これにより、
中央集権的なインデックスサービスが不要となる利点があります。CRUSHは、
OSD（オブジェクトストレージデバイス）、バケット（デバイス配置場所）、
およびプール用のルールセット（データ複製設定）のマップを用いて動作します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">詳細な情報は、Cephドキュメントの「CRUSHマップ」セクション（<span class="footnote"><br>[CRUSHマップ<a href="https://docs.ceph.com/en/squid/rados/operations/crush-map/">https://docs.ceph.com/en/squid/rados/operations/crush-map/</a>]<br></span> ）でご確認いただけます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>このマップは、異なるレプリケーション階層を反映するように変更可能です。オブジェクトのレプリカは分離可能（例：障害ドメイン）でありながら、望ましい分散を維持します。</p></div>
<div class="paragraph">
<p>一般的な設定として、異なるCephプールに異なるクラスのディスクを使用することが挙げられます。このため、Cephではルミナスと共にデバイスクラスを導入し、ルールセットの容易な生成ニーズに対応しました。</p></div>
<div class="paragraph">
<p>デバイスクラスは、<em>ceph osd tree</em>コマンドの出力で確認できます。これらのクラスは
それぞれ独自のルートバケットを表しており、以下のコマンドで確認可能です。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph osd crush tree --show-shadow</tt></pre></div></div>
<div class="paragraph">
<p>上記コマンドの出力例：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ID  CLASS WEIGHT  TYPE NAME
<span style="color: #993399">-16</span> nvme<span style="color: #993399">2.18307</span>root default<span style="color: #990000">~</span>nvme
<span style="color: #993399">-13</span> nvme<span style="color: #993399">0.72769</span>    host sumi1<span style="color: #990000">~</span>nvme
<span style="color: #993399">12</span> nvme<span style="color: #993399">0.72769</span>        osd<span style="color: #990000">.</span><span style="color: #993399">12</span>
<span style="color: #993399">-</span><span style="color: #993399">14  nvme</span>0<span style="color: #993399">.72769     host</span>sumi2~<span style="color: #990000">n</span>vme
<span style="color: #993399">13  nvme</span>0<span style="color: #993399">.72769         osd</span>.13
<span style="color: #993399">-15  nvme</span>0<span style="color: #993399">.72769     host</span>sumi3~<span style="color: #990000">nvme</span>
<span style="color: #993399">14  nvme</span>0<span style="color: #993399">.72769         osd</span>.<span style="color: #993399">14</span>
<span style="color: #990000">-</span>1 <span style="color: #993399">     </span>7.<span style="color: #993399">70544 ルート</span>デフォルト
 -3 <span style="color: #993399">     </span> 2.<span style="color: #993399">56848     ホスト</span>sumi1
 12 <span style="color: #993399"> nvme</span>0.<span style="color: #993399">72769         osd</span>.12
<span style="color: #993399">-5</span><span style="color: #993399">     </span> 2.<span style="color: #993399">56848     ホスト</span>sumi2
 13 <span style="color: #993399"> nvme</span>0.<span style="color: #993399">72769         osd</span>.<span style="color: #990000">13</span>
 -7 <span style="color: #993399">      2</span>.<span style="color: #993399">56848     ホスト</span>sumi3
 14 <span style="color: #993399"> nvme</span>0.<span style="color: #993399">72769         osd</span>.<span style="color: #990000">14</span></tt></pre></div></div>
<div class="paragraph">
<p>特定のデバイスクラス上でのみオブジェクトを分散させるようプールに指示するには、
まずそのデバイスクラス用のルールセットを作成する必要があります：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph osd crush rule create-replicated<span style="color: #990000">&amp;lt;</span><span style="color: #990000">ルール名&amp;gt;</span> <span style="color: #990000">&amp;lt;</span><span style="color: #990000">ルート&amp;gt;</span> <span style="color: #990000">&amp;lt;</span><span style="color: #990000">障害ドメイン&amp;gt;</span> <span style="color: #990000">&amp;lt;</span><span style="color: #990000">クラス&amp;gt;</span></tt></pre></div></div>
<div style="overflow-x:auto">
<table class="tableblock frame-none grid-none" style="
margin-left:0; margin-right:auto;
width:100%;
">
<col style="width:30%;" />
<col style="width:70%;" />
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;lt;rule-name&amp;gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">プール接続用のルール名（GUI および CLI で表示されます）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;lt;root&amp;gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">属するクラッシュルート（デフォルトは Ceph ルート「default」）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;lt;failure-domain&amp;gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">オブジェクトを分散させる障害ドメイン（通常はホスト）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;lt;class&amp;gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">使用するOSDバッキングストアの種類（例：nvme、ssd、hdd）</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph">
<p>ルールが CRUSH マップに登録されたら、プールにそのルールセットを使用するよう指示できます。</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph osd pool<span style="font-weight: bold"><span style="color: #0000FF">set</span></span> <span style="color: #990000">&amp;lt;</span><span style="color: #990000">プール名&amp;gt;</span>crush_rule<span style="color: #990000">&amp;lt;</span><span style="color: #990000">ルール名&amp;gt;</span></tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">プールに既にオブジェクトが存在する場合、それらを適切に移動する必要があります。
環境によっては、これによりクラスターのパフォーマンスに大きな影響が生じる可能性があります。
代替手段として、新しいプールを作成し、ディスクを個別に移動する方法もご利用いただけます。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_ceph_client">
<span>8.10. Cephクライアント</span>
<a class="headerlink" href="#_ceph_client" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ceph-log.png">
<img src="images/screenshot/gui-ceph-log.png" alt="screenshot/gui-ceph-log.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>前節の設定に従い、Proxmox VE を構成して、
このようなプールを VM およびコンテナイメージの保存に使用できます。
GUI を使用して新しい<span class="monospaced">RBD</span>ストレージを追加するだけです（
セクション「<a href="#ceph_rados_block_devices">Ceph RADOS ブロックデバイス (RBD)</a>」を参照）。</p></div>
<div class="paragraph">
<p>また、外部Cephクラスター用にキーリングを事前定義された場所にコピーする必要があります。CephがProxmoxノード自体にインストールされている場合、これは自動的に行われます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ファイル名は<span class="monospaced">&amp;lt;storage_id&amp;gt; + `.keyring`</span> とする必要があり、ここで<span class="monospaced">&amp;lt;storage_id&amp;gt;</span>は
<span class="monospaced">/etc/pve/storage.cfg</span> 内の<em>rbd:</em>の後の式です。以下の例では、
<span class="monospaced">my-ceph-storage</span>が<span class="monospaced">&amp;lt;storage_id&amp;gt;</span> となります:</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>mkdir /etc/pve/priv/ceph
cp /etc/ceph/ceph<span style="color: #990000">.</span>client<span style="color: #990000">.</span>admin<span style="color: #990000">.</span>keyring /etc/pve/priv/ceph/my-ceph-storage<span style="color: #990000">.</span>keyring</tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="pveceph_fs">
<span>8.11.</span>CephFS
<a class="headerlink" href="#pveceph_fs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Cephはファイルシステムも提供しており、これはRADOSブロックデバイスと同様のオブジェクトストレージ上で動作します。<strong>メタデータサーバー</strong>（<span class="monospaced">MDS</span>）がRADOSで管理されるオブジェクトをファイルやディレクトリにマッピングし、Cephが
POSIX準拠のレプリケートされたファイルシステムを提供します。これにより、クラスタ化された高可用性共有ファイルシステムを容易に構成できます。Cephのメタデータサーバーは、ファイルがCephクラスタ全体に均等に分散されることを保証します。その結果、高負荷時でも単一ホストに負荷が集中することはありません。これは、<span class="monospaced">NFSなどの</span>従来の共有ファイルシステム手法では問題となり得る点です。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-node-ceph-cephfs-panel.png">
<img src="images/screenshot/gui-node-ceph-cephfs-panel.png" alt="screenshot/gui-node-ceph-cephfs-panel.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VEでは、ハイパーコンバージドCephFSの作成と、<a href="#storage_cephfs">既存のCephFSを</a>バックアップ、ISOファイル、コンテナテンプレートの<a href="#storage_cephfs">保存用ストレージとして利用する</a>両方の方法がサポートされています。</p></div>
<div class="sect3">
<h4 id="pveceph_fs_mds">8.11.1. メタデータサーバー（MDS）
<a class="headerlink" href="#pveceph_fs_mds" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>CephFSが正常に機能するためには、少なくとも1台のメタデータサーバー（MDS）が設定され、稼働している必要があります。
MDSは、Proxmox VEのWeb GUIの<span class="monospaced">「ノード」→「CephFS」</span>パネルから、または以下のコマンドラインから作成できます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph mds create</tt></pre></div></div>
<div class="paragraph">
<p>クラスター内では複数のメタデータサーバーを作成できますが、デフォルト設定では同時にアクティブにできるのは1台のみです。MDSまたはそのノードが応答しなくなった場合（またはクラッシュした場合）、別の<span class="monospaced">スタンバイ</span>MDSが<span class="monospaced">アクティブに</span>昇格します。
アクティブMDSとスタンバイMDS間の引き継ぎを高速化するには、作成<em>時にhotstandbyパラメータ</em>オプションを使用するか、既に作成済みの場合は以下の設定を追加してください：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>mds standby replay<span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span></tt></pre></div></div>
<div class="paragraph">
<p><span class="monospaced">これにより</span>、指定されたMDSは<span class="monospaced">待機状態</span>を維持し、アクティブMDSをポーリングします。
これにより、問題発生時に迅速に制御を引き継ぐことが可能となります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このアクティブなポーリングは、お客様のシステムおよびアクティブな<span class="monospaced">MDS</span>に追加のパフォーマンス影響を及ぼします。</td>
</tr></table>
</div>
<div class="paragraph">
<div class="title">複数のアクティブMDS</div><p>Luminous (12.2.x) 以降では、複数のアクティブメタデータサーバーを同時に稼働させることが可能ですが、これは通常、多数のクライアントが並行して稼働している場合にのみ有用です。そうでない場合、<span class="monospaced">MDSが</span>システムのボトルネックとなることは稀です。この設定をご希望の場合は、Cephの公式ドキュメントをご参照ください。
<span class="footnote"><br>[複数アクティブMDSデーモンの設定方法
<a href="https://docs.ceph.com/en/squid/cephfs/multimds/">https://docs.ceph.com/en/squid/cephfs/multimds/</a>]<br></span></p></div>
</div>
<div class="sect3">
<h4 id="pveceph_fs_create">8.11.2. CephFSの作成
<a class="headerlink" href="#pveceph_fs_create" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE の CephFS 統合により、ウェブインターフェース、CLI、または外部 API インターフェースを使用して簡単に CephFS を作成できます。これを機能させるには、いくつかの前提条件が必要です：</p></div>
<div class="ulist"><div class="title">CephFS 設定を成功させるための前提条件：</div><ul>
<li>
<p>
<a href="#pve_ceph_install">Cephパッケージのインストール</a>- 既に以前に行った場合でも、
最新のシステム環境で再実行されることをお勧めいたします。
これにより、CephFS関連パッケージが全て確実にインストールされます。</p>
</li>
<li>
<p>
<a href="#pve_ceph_monitors">モニターの設定</a></p>
</li>
<li>
<p>
<a href="#pve_ceph_monitors">OSD の設定</a></p>
</li>
<li>
<p>
<a href="#pveceph_fs_mds">少なくとも1つのMDSを設定する</a></p>
</li>
</ul></div>
<div class="paragraph">
<p>これらが完了しましたら、Web GUIの<span class="monospaced">「ノード」→「CephFS」</span>パネル、またはコマンドラインツール<span class="monospaced">pveceph</span>のいずれかを通じて、CephFSを簡単に作成できます。
例：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph fs create --pg_num<span style="color: #993399">128</span>--add-storage</tt></pre></div></div>
<div class="paragraph">
<p>これにより、データ用プール「<em>cephfs_data</em>」（<em>128の</em>配置グループ）とメタデータ用プール<em>「cephfs_metadata</em>」（データプールの4分の1の配置<span class="monospaced">グループ数である32</span>）を使用した「<em>cephfs」</em>という名前のCephFSが作成されます。
適切な配置グループ数（<span class="monospaced">pg_num</span>）の設定に関する詳細は、
<a href="#pve_ceph_pools">Proxmox VE管理下Cephプール章をご参照いただくか</a>、
Ceph公式ドキュメントをご確認ください：<span class="footnoteref"><br><a href="#_footnote_placement_groups">[placement_groups]</a><br></span> なお、<em>--add-storageパラメータ</em>を指定すると、
CephFSの作成成功後にProxmox VEのストレージ構成に自動的に追加されます。</p></div>
</div>
<div class="sect3">
<h4 id="_destroy_cephfs">8.11.3. CephFS の破棄
<a class="headerlink" href="#_destroy_cephfs" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">CephFS を破棄すると、そのデータはすべて使用不能になります。
この操作は元に戻せません！</td>
</tr></table>
</div>
<div class="paragraph">
<p>CephFSを完全に、かつ適切に削除するには、以下の手順が必要です：</p></div>
<div class="ulist"><ul>
<li>
<p>
Proxmox VE以外のクライアントをすべて切断してください（例：ゲストマシンでCephFSをアンマウント）。</p>
</li>
<li>
<p>
関連するすべての CephFS Proxmox VE ストレージエントリを無効にしてください（自動マウントを防止するため）。</p>
</li>
<li>
<p>
破棄対象のCephFS上に存在するゲスト（例：ISO）から、使用中のリソースをすべて削除してください。</p>
</li>
<li>
<p>
クラスタノード上のCephFSストレージをすべて手動でアンマウントしてください。</p>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>umount<span style="color: #990000">/mnt/pve/&amp;lt;</span><span style="color: #990000">ストレージ名&amp;gt;</span></tt></pre></div></div>
<div class="paragraph">
<p><span class="monospaced">&amp;lt;STORAGE-NAME&amp;gt;</span>は、Proxmox VE 内の CephFS ストレージの名前です。</p></div>
</li>
<li>
<p>
次に、該当するCephFSのメタデータサーバー（<span class="monospaced">MDS</span>）が稼働していないことを確認してください。
停止または破棄のいずれかの方法で対応可能です。
ウェブインターフェースから行うか、
コマンドラインインターフェースから行う場合は、
以下のコマンドを実行してください：</p>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph stop --service mds<span style="color: #990000">.</span>NAME</tt></pre></div></div>
<div class="paragraph">
<p>停止するには、または</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph mds 破壊 NAME</tt></pre></div></div>
<div class="paragraph">
<p>それらを削除します。</p></div>
<div class="paragraph">
<p>なお、アクティブな<span class="monospaced">MDS</span>が停止または削除されると、スタンバイサーバーは自動的にアクティブに昇格されます。そのため、まずすべてのスタンバイサーバーを停止することをお勧めいたします。</p></div>
</li>
<li>
<p>
これで、以下のコマンドでCephFSを破棄できます：</p>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveceph fs destroy NAME --remove-storages --remove-pools</tt></pre></div></div>
<div class="paragraph">
<p>これにより、基盤となる Ceph プールが自動的に破棄されるとともに、
pve 設定からストレージが削除されます。</p></div>
</li>
</ul></div>
<div class="paragraph">
<p>これらの手順を完了すると、CephFSは完全に削除されます。他のCephFSインスタンスが存在する場合、停止したメタデータサーバーを再起動し、スタンバイとして機能させることが可能です。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_ceph_maintenance">
<span>8.12. Cephのメンテナンス</span>
<a class="headerlink" href="#_ceph_maintenance" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="pve_ceph_osd_replace">8.12.1. OSD の交換
<a class="headerlink" href="#pve_ceph_osd_replace" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>以下の手順により、OSDのディスクを交換することが可能です。これはCephにおける最も一般的なメンテナンスタスクの一つです。OSDに問題が発生しているものの、そのディスクがまだ正常に見える場合は、まず<a href="#pve_ceph_mon_and_ts">トラブルシューティングの</a>セクションをお読みください。</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
ディスクが故障した場合は、
<a href="#pve_ceph_recommendation_disk">推奨される</a>交換用ディスクを
同じタイプおよびサイズで入手してください。</p>
</li>
<li>
<p>
問題のOSDを<a href="#pve_ceph_osd_destroy">破棄します</a>。</p>
</li>
<li>
<p>
サーバーから古いディスクを取り外し、新しいディスクを取り付けてください。</p>
</li>
<li>
<p>
OSDを再度<a href="#pve_ceph_osd_create">作成します</a>。</p>
</li>
<li>
<p>
自動再バランス後、クラスター状態は
<span class="monospaced">HEALTH_OK</span>に戻ります。リストに残っているクラッシュは、
以下のコマンドを実行することで承認できます：</p>
</li>
</ol></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph crash archive-all</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_trim_discard">8.12.2. トリム/ディスカード
<a class="headerlink" href="#_trim_discard" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>仮想マシン（VM）やコンテナでは、<em>定期的にfstrim</em>（ディスクの破棄）を実行することが推奨されます。
これにより、ファイルシステムが使用しなくなったデータブロックが解放され、
データ使用量とリソース負荷が軽減されます。
最新のオペレーティングシステムの多くは、定期的にディスクに対してこのような破棄コマンドを発行します。
仮想マシン側で<a href="#qm_hard_disk_discard">ディスク破棄オプションが</a>有効になっていることを確認するだけで十分です。</p></div>
</div>
<div class="sect3">
<h4 id="pveceph_scrub">8.12.3. スクラブおよびディープスクラブ
<a class="headerlink" href="#pveceph_scrub" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Cephは配置グループの<em>スクラブ</em>によりデータ整合性を確保します。CephはPG内の全オブジェクトの健全性を確認します。スクラブには2形態があり、日次実行の低コストなメタデータチェックと週次実行の徹底的なデータチェックです。週次詳細スクラブではオブジェクトを読み取り、チェックサムを用いてデータ整合性を確認します。実行中のスクラブが業務（パフォーマンス）要件に支障をきたす場合、スクラブの実行時間を調整することが可能です。<span class="footnote"><br>[Ceph scrubbing<a href="https://docs.ceph.com/en/squid/rados/configuration/osd-config-ref/#scrubbing">https://docs.ceph.com/en/squid/rados/configuration/osd-config-ref/#scrubbing</a>]<br></span></p></div>
</div>
<div class="sect3">
<h4 id="pveceph_shutdown">8.12.4. Proxmox VE + Ceph HCIクラスターのシャットダウン
<a class="headerlink" href="#pveceph_shutdown" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE + Cephクラスター全体をシャットダウンするには、まず全てのCephクライアントを停止してください。これらは主に仮想マシン（VM）とコンテナとなります。追加のクライアントでCephファイルシステム（FS）やインストール済みのRADOSゲートウェイ（GW）にアクセスする可能性がある場合は、それらも停止してください。
高可用性ゲストは、Proxmox VEツールを使用して電源をオフにすると、状態が<em>「停止」</em>に切り替わります。</p></div>
<div class="paragraph">
<p>すべてのクライアント（VM およびコンテナ）が停止状態、または Ceph クラスターにアクセスしなくなったことを確認後、Ceph クラスターが健全な状態にあることを検証してください。Web UI または CLI を通じて行います：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph -s</tt></pre></div></div>
<div class="paragraph">
<p>シャットダウン時およびその後の電源投入フェーズで復旧処理が発生しないよう、<em>noout</em>OSDフラグを有効にしてください。<strong>Ceph → OSD</strong>パネルの「<strong>グローバルフラグの管理</strong>」ボタンから、またはCLIで設定できます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph osd noout<span style="font-weight: bold"><span style="color: #0000FF">設定</span></span></tt></pre></div></div>
<div class="paragraph">
<p>モニター（MON）を搭載していないノードから順に電源をオフにしてください。これらのノードが停止した後、モニターを搭載したノードのシャットダウンを続行します。</p></div>
<div class="paragraph">
<p>クラスターの電源投入時には、モニターノード（MON）から先に起動してください。
全ノードの起動が完了したら、Cephサービスが正常に稼働していることを確認します。
最終的にCephに関する警告は、<em>nooutフラグが</em>設定されたままの状態のみとなるはずです。
<em>Web</em>UIまたはCLIでこの設定を解除できます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph osd<span style="font-weight: bold"><span style="color: #0000FF">unset</span></span>noout</tt></pre></div></div>
<div class="paragraph">
<p>ゲストの起動を開始できます。高可用性ゲストは電源投入時に状態が「<em>起動済み</em>」に変わります。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pve_ceph_mon_and_ts">
<span>8.13. Ceph の監視とトラブルシューティング</span>
<a class="headerlink" href="#pve_ceph_mon_and_ts" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Ceph のデプロイメントの健全性は、初期段階から継続的に監視することが重要です。
Ceph ツールを使用するか、Proxmox VE<a href="api-viewer/index.html">API</a> を通じてステータスにアクセスすることで
監視が可能です。</p></div>
<div class="paragraph">
<p>以下の Ceph コマンドを使用すると、クラスターが健全な状態（<em>HEALTH_OK</em>）、警告状態（<em>HEALTH_WARN</em>）、あるいはエラー状態（<em>HEALTH_ERR</em>）にあるかを確認できます。クラスターが健全でない状態の場合、下記のステータスコマンドは現在のイベントの概要と取るべきアクションも提供します。
実行を停止するには、CTRL-C を押してください。</p></div>
<div class="paragraph">
<p>クラスタの状態を継続的に監視します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>watch ceph --status</tt></pre></div></div>
<div class="paragraph">
<p>クラスタ状態を一度だけ出力（更新されません）し、状態イベントの行を継続的に追加します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph --watch</tt></pre></div></div>
<div class="sect3">
<h4 id="pve_ceph_ts">8.13.1. トラブルシューティング
<a class="headerlink" href="#pve_ceph_ts" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>本セクションでは、頻繁に使用されるトラブルシューティング情報を記載しております。
詳細は公式Cephウェブサイトの「トラブルシューティング」セクションをご参照ください：<span class="footnote"><br>[Cephトラブルシューティング<a href="https://docs.ceph.com/en/squid/rados/troubleshooting/">https://docs.ceph.com/en/squid/rados/troubleshooting/</a>]<br></span>.</p></div>
<div class="ulist" id="pve_ceph_ts_logs"><div class="title">影響を受けたノードの関連ログ</div><ul>
<li>
<p>
<a href="#disk_health_monitoring">ディスクの健全性監視</a></p>
</li>
<li>
<p>
<em>システム → システムログ</em>または CLI 経由で、例えば過去2日間のログを確認できます：</p>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>journalctl --since<span style="color: #FF0000">"2日前"</span></tt></pre></div></div>
</li>
<li>
<p>
IPMIおよびRAIDコントローラーのログ</p>
</li>
</ul></div>
<div class="paragraph">
<p>Cephサービスのクラッシュは、以下のコマンドを実行することで一覧表示および詳細確認が可能です：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph crash ls
ceph crash info<span style="color: #990000">&amp;lt;</span><span style="color: #990000">クラッシュID&amp;gt;</span></tt></pre></div></div>
<div class="paragraph">
<p>新規に記録されたクラッシュは、以下のコマンドで確認いただけます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph crash archive-all</tt></pre></div></div>
<div class="paragraph">
<p>より詳細な情報を得るには、各Cephサービスには
<span class="monospaced">/var/log/ceph/</span>
にログファイルがございます<span class="monospaced">。</span>詳細が必要な場合は、ログレベルを<span class="footnote"><br>[Cephのログとデバッグ<a href="https://docs.ceph.com/en/squid/rados/troubleshooting/log-and-debug/">https://docs.ceph.com/en/squid/rados/troubleshooting/log-and-debug/</a>]<br></span> で調整できます。</p></div>
<div class="ulist" id="pve_ceph_ts_causes"><div class="title">Ceph 問題の一般的な原因</div><ul>
<li>
<p>
輻輳、スイッチの故障、シャットダウンしたインターフェース、
またはブロックしているファイアウォールなどのネットワーク問題。
すべての Proxmox VE ノードが、
<a href="#pvecm_cluster_network">corosync クラスターネットワーク上</a>および
<a href="#pve_ceph_install_wizard">Ceph パブリックネットワークとクラスターネットワーク</a>上で
確実に到達可能かどうかを確認してください。</p>
</li>
<li>
<p>
ディスクまたは接続部品が以下の状態である場合：</p>
<div class="ulist"><ul>
<li>
<p>
不良</p>
</li>
<li>
<p>
確実にマウントされていません</p>
</li>
<li>
<p>
高負荷時におけるI/O性能の不足（例：HDDの使用時、
一般向けハードウェアの使用時、
<a href="#pve_ceph_recommendation_raid">推奨されないRAIDコントローラー</a>の使用時など）</p>
</li>
</ul></div>
</li>
<li>
<p>
健全なCephクラスターの<a href="#_recommendations_for_a_healthy_ceph_cluster">推奨事項</a>を満たしていない状態。</p>
</li>
</ul></div>
<div class="dlist" id="pve_ceph_ts_problems"><div class="title">よくある Ceph の問題</div><dl>
<dt class="hdlist1">
 
</dt>
<dd>
<div class="dlist"><dl>
<dt class="hdlist1">
OSDが<span class="monospaced">停止/クラッシュしました</span></dt>
<dd>
<p>
障害のあるOSDは<span class="monospaced">ダウン状態</span>として報告され、多くの場合10分後に（自動で）<span class="monospaced">アウト状態となります</span>。原因によっては、<span class="monospaced">自動的にアップ状態</span>に戻り、再び<span class="monospaced">イン状態になる</span>こともあります。ウェブインターフェース経由で手動起動を試みるには、<em>[Any node] → [Ceph] → [OSD]</em> に移動し、該当OSDを選択の上、<strong>[Start]</strong>、<strong>[In]</strong>、<strong>[Reload]</strong> をクリックしてください。シェルを使用する場合は、影響を受けたノードで以下のコマンドを実行してください：</p>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>ceph-volume lvm activate --all</tt></pre></div></div>
<div class="paragraph">
<p>障害が発生したOSDを再起動させるには、
該当ノードを<a href="#ha_manager_node_maintenance">安全に再起動させるか</a>、
最終手段として
OSD<a href="#pve_ceph_osd_replace">を再作成または交換</a>する必要がある場合があります。</p></div>
</dd>
</dl></div>
</dd>
</dl></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_pvesr">
9. ストレージのレプリケーション
<a class="headerlink" href="#chapter_pvesr" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="monospaced">pvesr</span>コマンドラインツールは、Proxmox VE のストレージレプリケーションフレームワークを管理します。ストレージレプリケーションは、ローカルストレージを使用するゲストに対して冗長性を提供し、移行時間を短縮します。</p></div>
<div class="paragraph">
<p>ゲストボリュームを別のノードに複製するため、共有ストレージを使用せずに
すべてのデータを利用可能にします。レプリケーションではスナップショットを利用し、
ネットワーク経由のトラフィックを最小限に抑えます。したがって、
初期の完全同期後は、新規データのみが増分的に送信されます。ノード障害が発生した場合でも、
複製されたノード上でゲストデータは引き続き利用可能です。</p></div>
<div class="paragraph">
<p>レプリケーションは設定可能な間隔で自動的に実行されます。
最小レプリケーション間隔は1分、最大間隔は週1回です。
これらの間隔を指定する形式は<span class="monospaced">systemd</span>カレンダーイベントのサブセットです。
詳細は<a href="#pvesr_schedule_time_format">「スケジュール形式」</a>セクションをご参照ください：</p></div>
<div class="paragraph">
<p>ゲストを複数のターゲットノードにレプリケートすることは可能ですが、
同一ターゲットノードへの二重レプリケーションはできません。</p></div>
<div class="paragraph">
<p>各レプリケーションの帯域幅は制限可能であり、ストレージやサーバーの過負荷を回避できます。</p></div>
<div class="paragraph">
<p>ゲストが既にレプリケーションされているノードへ移行する場合、
前回のレプリケーション以降の変更部分（いわゆる<span class="monospaced">差分</span>）のみを転送すれば
済みます。これにより所要時間が大幅に短縮されます。
ゲストをレプリケーション対象ノードへ移行すると、
レプリケーションの方向は自動的に切り替わります。</p></div>
<div class="paragraph">
<p>例：VM100が現在<span class="monospaced">ノードA上に</span>あり、<span class="monospaced">ノードBへ</span>レプリケーションされている場合、
これを<span class="monospaced">ノードBへ</span>移行すると、自動的に<span class="monospaced">ノードBから</span> <span class="monospaced">ノードAへ</span>逆レプリケーションが開始されます。</p></div>
<div class="paragraph">
<p>ゲストが複製されていないノードへ移行する場合、ディスクデータ全体を転送する必要があります。移行後、複製ジョブは設定されたノードへのゲスト複製を継続します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">
<div class="paragraph">
<p>高可用性はストレージ複製と併用可能ですが、
最終同期時刻からノード障害発生時刻の間に
データ損失が発生する可能性があります。</p></div>
</td>
</tr></table>
</div>
<div class="sect2">
<h3 id="_supported_storage_types">
<span>9.1. サポート対象のストレージタイプ</span>
<a class="headerlink" href="#_supported_storage_types" title="Permalink to this heading"></a></h3>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表 16. ストレージの種類</caption>
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">説明    </th>
<th class="tableblock halign-left valign-top">プラグインタイプ </th>
<th class="tableblock halign-left valign-top">スナップショット</th>
<th class="tableblock halign-left valign-top">安定版</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZFS (ローカル)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">zfspool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">はい</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="pvesr_schedule_time_format">
<span>9.2. スケジュール形式</span>
<a class="headerlink" href="#pvesr_schedule_time_format" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>レプリケーションは、スケジュール設定に<a href="#chapter_calendar_events">カレンダーイベント</a>を利用します。</p></div>
</div>
<div class="sect2">
<h3 id="_error_handling">
<span>9.3. エラー処理</span>
<a class="headerlink" href="#_error_handling" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>レプリケーションジョブに問題が発生した場合、エラー状態となります。
この状態では、設定されたレプリケーション間隔が一時的に停止されます。
失敗したレプリケーションは30分間隔で繰り返し再試行されます。
成功すると、元のスケジュールが再び有効化されます。</p></div>
<div class="sect3">
<h4 id="_possible_issues">9.3.1. 発生しうる問題
<a class="headerlink" href="#_possible_issues" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>最も一般的な問題の一部は下記のリストに記載されています。環境によっては別の原因が考えられます。</p></div>
<div class="ulist"><ul>
<li>
<p>
ネットワークが機能していません。</p>
</li>
<li>
<p>
レプリケーション対象ストレージの空き容量が不足しております。</p>
</li>
<li>
<p>
ターゲットノード上で同一のストレージIDを持つストレージが利用できません。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">問題の原因を特定するには、レプリケーションログをご参照ください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_migrating_a_guest_in_case_of_error">9.3.2. エラー発生時のゲスト移行
<a class="headerlink" href="#_migrating_a_guest_in_case_of_error" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>重大なエラーが発生した場合、仮想ゲストが障害発生ノード上で停止する可能性があります。
その際は、手動で正常なノードへ再度移動させる必要があります。</p></div>
</div>
<div class="sect3">
<h4 id="_example_2">9.3.3. 例
<a class="headerlink" href="#_example_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ノード A で 2 つのゲスト（VM 100 と CT 200）が稼働し、ノード B にレプリケートされていると仮定します。
ノード A が障害を起こし、オンラインに戻せなくなった場合、ゲストを手動でノード B に移行する必要があります。</p></div>
<div class="ulist"><ul>
<li>
<p>
SSHでノードBに接続するか、Web UIからそのシェルを開いてください</p>
</li>
<li>
<p>
クラスタがクォーラム状態にあるかご確認ください</p>
<div class="listingblock">
<div class="content monospaced">
<pre># pvecm status</pre>
</div></div>
</li>
<li>
<p>
クォーラムが確保されていない場合、まずこの問題を修正し、
  ノードを再び動作可能な状態にされることを強くお勧めいたします。
  現時点でそれが不可能な場合に限り、以下のコマンドを使用して
  現在のノードでクォーラムを強制的に確保することが可能です：</p>
<div class="listingblock">
<div class="content monospaced">
<pre># pvecm 期待値 1</pre>
</div></div>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">クォーラムに影響を与える変更（ノード・ストレージ・仮想ゲストの追加/削除など）は、
<span class="monospaced">予想投票数が設定</span>されている場合、絶対に避けてください。
この操作は、重要なゲストの再起動やクォーラム問題自体の解決にのみ使用してください。</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
元のノードAからゲスト構成ファイルを両方ともノードBに移動してください:</p>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/nodes/A/qemu-server/100.conf を /etc/pve/nodes/B/qemu-server/100.conf に移動
# /etc/pve/nodes/A/lxc/200.conf を /etc/pve/nodes/B/lxc/200.conf に移動</pre>
</div></div>
</li>
<li>
<p>
これでゲストを再起動できます：</p>
<div class="listingblock">
<div class="content monospaced">
<pre># qm start 100
# pct start 200</pre>
</div></div>
</li>
</ul></div>
<div class="paragraph">
<p>VMID およびノード名は、実際の環境に合わせて置き換えてください。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_jobs">
<span>9.4. ジョブの管理</span>
<a class="headerlink" href="#_managing_jobs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-add-replication-job.png">
<img src="images/screenshot/gui-qemu-add-replication-job.png" alt="screenshot/gui-qemu-add-replication-job.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>レプリケーションジョブの作成、変更、削除は、ウェブGUIで簡単に行うことができます。
さらに、コマンドラインインターフェース（CLI）<span class="monospaced">ツールであるpvesrも</span>
この操作に使用できます。</p></div>
<div class="paragraph">
<p>ウェブGUIでは、全階層（データセンター、ノード、仮想ゲスト）でレプリケーションパネルをご利用いただけます。表示されるジョブの種類（全ジョブ、ノード固有ジョブ、ゲスト固有ジョブ）が各階層で異なります。</p></div>
<div class="paragraph">
<p>新しいジョブを追加する際には、対象ノードに加え、ゲストが未選択の場合はゲストも指定する必要があります。<span class="monospaced">デフォルトの「15分ごと」以外の</span><a href="#pvesr_schedule_time_format">レプリケーションスケジュールを</a>設定することも可能です。レプリケーションジョブにはレート制限を適用できます。この制限により、ストレージへの負荷を許容範囲内に保つことが可能です。</p></div>
<div class="paragraph">
<p>レプリケーションジョブはクラスタ全体で一意のIDによって識別されます。このIDはVMIDとジョブ番号で構成されます。
このIDはCLIツールを使用する場合にのみ手動で指定する必要があります。</p></div>
</div>
<div class="sect2">
<h3 id="_network">
<span>9.5.</span>ネットワーク
<a class="headerlink" href="#_network" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>レプリケーション通信は、ライブゲスト移行と同じネットワークを利用します。
デフォルトでは管理ネットワークとなります。移行に別のネットワークを使用するには、
ウェブインターフェースの<span class="monospaced">「データセンター」→「オプション」→「移行設定」</span>または
<span class="monospaced">datacenter.cfg</span> にて<span class="monospaced">移行ネットワーク</span>を設定してください。詳細は<a href="#pvecm_migration_network">移行ネットワーク</a>をご参照ください。</p></div>
</div>
<div class="sect2">
<h3 id="_command_line_interface_examples">
<span>9.6. コマンドラインインターフェースの例</span>
<a class="headerlink" href="#_command_line_interface_examples" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ゲストID 100に対して、5分間隔で実行され、帯域幅を10 Mbps（メガバイト毎秒）に制限したレプリケーションジョブを作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesr create-local-job 100-0 pve1 --schedule "*/5" --rate 10</pre>
</div></div>
<div class="paragraph">
<p>アクティブなジョブID<span class="monospaced">100-0を</span>無効化します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesr disable 100-0</pre>
</div></div>
<div class="paragraph">
<p>ID<span class="monospaced">100-0</span> の無効化されたジョブを有効にしてください。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesr enable 100-0</pre>
</div></div>
<div class="paragraph">
<p>ジョブID<span class="monospaced">100-0</span>のスケジュール間隔を1時間ごとに変更します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesr update 100-0 --schedule '*/00'</pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_virtual_machines">
10. QEMU/KVM 仮想マシン
<a class="headerlink" href="#chapter_virtual_machines" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>QEMU（Quick Emulatorの略称）は、物理コンピュータをエミュレートするオープンソースのハイパーバイザーです。QEMUが動作するホストシステムの観点から見ると、QEMUはパーティション、ファイル、ネットワークカードなどのローカルリソースにアクセスできるユーザープログラムであり、これらのリソースはエミュレートされたコンピュータに渡され、あたかも実デバイスであるかのように認識されます。</p></div>
<div class="paragraph">
<p>エミュレートされたコンピュータ上で動作するゲストオペレーティングシステムは、これらのデバイスにアクセスし、あたかも実ハードウェア上で動作しているかのように動作します。例えば、ISOイメージをQEMUのパラメータとして渡すことで、エミュレートされたコンピュータ内で動作するOSは、CDドライブに挿入された実物のCD-ROMを認識します。</p></div>
<div class="paragraph">
<p>QEMUはARMからSparcまで多様なハードウェアをエミュレート可能ですが、Proxmox VEではサーバーハードウェアの大多数を占める32ビットおよび64ビットのPCクローンエミュレーションに限定されています。PCクローンエミュレーションは、ホストアーキテクチャと同一のエミュレートアーキテクチャにおいてプロセッサ拡張機能を利用できるため、QEMUの処理速度が大幅に向上し、最も高速なエミュレーションの一つとなっています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><em>KVM</em>（カーネルベース仮想マシン）という用語を目にされることがあるかもしれません。
これは、Linux KVMモジュールを介して仮想化プロセッサ拡張機能のサポートのもとでQEMUが動作していることを意味します。
Proxmox VEにおいては、<em>QEMUとKVMは</em>互換性を持って使用できます。
Proxmox VE内のQEMUは常にKVMモジュールの読み込みを試みるためです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>Proxmox VE 内の QEMU は、ブロックデバイスや PCI デバイスへのアクセスに必要であるため、root プロセスとして実行されます。</p></div>
<div class="sect2">
<h3 id="_emulated_devices_and_paravirtualized_devices">
<span>10.1. エミュレートされたデバイスと準仮想化されたデバイス</span>
<a class="headerlink" href="#_emulated_devices_and_paravirtualized_devices" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>QEMUによってエミュレートされるPCハードウェアには、マザーボード、ネットワークコントローラ、
SCSI、IDE、SATAコントローラ、シリアルポート（完全なリスト<span class="monospaced">はkvm(1)</span>マニュアルページでご確認いただけます）が含まれ、
これら全てがソフトウェアでエミュレートされます。これらのデバイスはすべて、
既存のハードウェアデバイスと完全に同等のソフトウェアであり、
ゲスト内で動作するOSが適切なドライバを備えている場合、
あたかも実ハードウェア上で動作しているかのようにデバイスを利用します。
これによりQEMUは、<em>変更を加えていない</em>オペレーティングシステムを実行することが可能となります。</p></div>
<div class="paragraph">
<p>ただし、ハードウェアで動作するはずの機能をソフトウェアで実行するため、ホストCPUに多くの追加処理が発生し、パフォーマンス上のコストが生じます。これを軽減するため、QEMUはゲストOSに対して<em>準仮想化デバイスを</em>提供できます。これによりゲストOSはQEMU内部で動作していることを認識し、ハイパーバイザーと連携します。</p></div>
<div class="paragraph">
<p>QEMUはvirtio仮想化標準に依存しており、これにより準仮想化されたvirtioデバイスを提供できます。これには準仮想化された汎用ディスクコントローラ、準仮想化されたネットワークカード、準仮想化されたシリアルポート、準仮想化されたSCSIコントローラなどが含まれます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">可能な限りvirtioデバイスをご利用いただく<strong>ことを強くお勧めいたします</strong>。
これらは大幅なパフォーマンス向上をもたらし、一般的にメンテナンスが充実しております。
virtio汎用ディスクコントローラをエミュレートされたIDEコントローラと比較した場合、
<span class="monospaced">bonnie++(8)</span>による測定では、シーケンシャル書き込みスループットが2倍となります。virtioネットワークインターフェースを使用すると、
エミュレートされたIntel E1000ネットワークカードと比較して、
最大3倍のスループットを実現できます（<span class="monospaced">iperf(1)</span>による測定<span class="monospaced">）</span>。<span class="footnote"><br>[KVMウィキのベンチマーク結果はこちらをご覧ください：
<a href="https://www.linux-kvm.org/page/Using_VirtIO_NIC">https://www.linux-kvm.org/page/Using_VirtIO_NIC</a>]<br></span></td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="qm_virtual_machines_settings">
<span>10.2. 仮想マシンの設定</span>
<a class="headerlink" href="#qm_virtual_machines_settings" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>一般的に、Proxmox VE は仮想マシン（VM）に対して適切なデフォルト設定を選択するよう努めております。変更される設定の意味を必ずご理解ください。パフォーマンスの低下やデータの危険に晒される可能性があります。</p></div>
<div class="sect3">
<h4 id="qm_general_settings">10.2.1. 基本設定
<a class="headerlink" href="#qm_general_settings" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-vm-general.png">
<img src="images/screenshot/gui-create-vm-general.png" alt="screenshot/gui-create-vm-general.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>仮想マシン（VM）の一般的な設定には以下が含まれます</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>ノード</strong>：仮想マシンが動作する物理サーバー</p>
</li>
<li>
<p>
<strong>VM ID</strong>: この Proxmox VE インストール環境内で VM を識別するための一意の番号</p>
</li>
<li>
<p>
<strong>名前</strong>：VM を記述するために使用できる自由形式のテキスト文字列</p>
</li>
<li>
<p>
<strong>リソースプール</strong>：仮想マシンの論理的なグループ</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="qm_os_settings">10.2.2. OS設定
<a class="headerlink" href="#qm_os_settings" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-vm-os.png">
<img src="images/screenshot/gui-create-vm-os.png" alt="screenshot/gui-create-vm-os.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>仮想マシン（VM）を作成する際、適切なオペレーティングシステム（OS）を設定することで、
Proxmox VEはいくつかの低レベルパラメータを最適化できます。例えば、Windows OSはBIOSクロックが現地時間を使用することを想定していますが、
UnixベースのOSはBIOSクロックがUTC時間を持つことを想定しています。</p></div>
</div>
<div class="sect3">
<h4 id="qm_system_settings">10.2.3. システム設定
<a class="headerlink" href="#qm_system_settings" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>仮想マシン作成時には、新規VMの基本システムコンポーネントを変更できます。
<a href="#qm_display">使用するディスプレイタイプ</a>を指定することが可能です。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-vm-system.png">
<img src="images/screenshot/gui-create-vm-system.png" alt="screenshot/gui-create-vm-system.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>さらに、<a href="#qm_hard_disk">SCSIコントローラーの</a>変更も可能です。
QEMUゲストエージェントのインストールを予定している場合、または選択したISOイメージが
既に同エージェントを自動インストールする仕様である場合は、<em>QEMUエージェントの</em>チェックボックスを
選択することをお勧めいたします。これにより、Proxmox VEは同エージェントの機能を活用し、
より詳細な情報の表示や、シャットダウンやスナップショットなどの操作をより効率的に実行できます。</p></div>
<div class="paragraph">
<p>Proxmox VEでは、異なるファームウェアおよびマシンタイプ（<a href="#qm_bios_and_uefi">具体的にはSeaBIOSとOVMF</a>）で仮想マシンを起動することが可能です。
ほとんどの場合、デフォルトのSeaBIOSからOVMFに切り替える必要があるのは、
<a href="#qm_pci_passthrough">PCIeパススルー</a>を使用する予定がある場合のみです。</p></div>
<div class="sect4">
<h5 id="qm_machine_type">マシンタイプ<a class="headerlink" href="#qm_machine_type" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>仮想マシンの<em>マシンタイプは</em>、仮想マザーボードのハードウェア構成を定義します。デフォルトの<a href="https://en.wikipedia.org/wiki/Intel_440FX">Intel 440FX</a>チップセットか、仮想PCIeバスを提供する<a href="https://ark.intel.com/content/www/us/en/ark/products/31918/intel-82q35-graphics-and-memory-controller.html">Q35チップセット</a>から選択可能です。PCIeハードウェアのパススルーを必要とする場合、後者が適している場合があります。
さらに、<a href="#qm_pci_viommu">vIOMMU</a>の実装も選択できます。</p></div>
<div class="sect5">
<h6 id="_machine_version">マシンバージョン
<a class="headerlink" href="#_machine_version" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>各マシンタイプはQEMU内でバージョン管理されており、特定のQEMUバイナリは複数のマシンバージョンをサポートします。新バージョンでは新機能のサポート、修正、または全般的な改善が提供される場合があります。ただし、仮想ハードウェアのプロパティも変更されます。ゲストの観点から突然の変更を避け、VMの状態、ライブマイグレーション、RAMを使用したスナップショットの互換性を確保するため、新しいQEMUインスタンスでも同じマシンバージョンが引き続き使用されます。</p></div>
<div class="paragraph">
<p>Windowsゲストの場合、マシンバージョンは作成時に固定されます。
これはWindowsが仮想ハードウェアの変更に敏感であるためです（コールドブート間でも影響を受けます）。
例えば、ネットワークデバイスの列挙順序がマシンバージョンによって異なる場合があります。
Linuxなどの他のOSは通常、このような変更に問題なく対応できます。
これらのOSでは、デフォルトで<em>最新の</em>マシンバージョンが使用されます。
これは、新規起動後にはQEMUバイナリがサポートする最新のマシンバージョンが使用されることを意味します（例：QEMU 8.1がサポートする最新のマシンバージョンは、各マシンタイプごとにバージョン8.1となります）。</p></div>
<div class="paragraph">
<p>また、ハードウェア構成を変更する新機能や修正を実装する際の安全策として、マシンバージョンは後方互換性を確保するために使用されます。
稼働中の仮想マシンに対する操作（ライブマイグレーションなど）では、稼働中のマシンバージョンが保存されます。これにより、QEMU仮想化の観点だけでなく、Proxmox VEがQEMU仮想マシンインスタンスをどのように作成するかという観点からも、仮想マシンが正確に元の状態に復元されることが保証されます。</p></div>
<div class="paragraph">
<div class="title">PVE マシンリビジョン</div><p>Proxmox VEでは、新しいQEMUリリースの待ち時間なくハードウェアレイアウトの変更やオプションの修正が必要な場合があります。このため、Proxmox VEでは<span class="monospaced">+pveX形式の</span>追加ダウンストリームリビジョンを導入しております。
これらのリビジョンでは、<span class="monospaced">X</span>は各新しい QEMU マシンバージョンごとに 0 となり、この場合は省略されます。例えば、マシンバージョン<span class="monospaced">pc-q35-9.2 は</span>、マシンバージョン<span class="monospaced">pc-q35-9.2+pve0</span> と同じになります。</p></div>
<div class="paragraph">
<p>Proxmox VEがハードウェアレイアウトやデフォルトオプションを変更する場合、リビジョンをインクリメントし、新規作成されるゲスト、または常に最新のマシンバージョンを使用するVMの再起動時に適用されます。</p></div>
</div>
<div class="sect5">
<h6 id="_qemu_machine_version_deprecation">QEMU マシンバージョンの非推奨について<a class="headerlink" href="#_qemu_machine_version_deprecation" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>QEMU 10.1以降、マシンバージョンはアップストリームQEMUから6年後に削除されます。Proxmox VEではメジャーリリースが約2年ごとに発生するため、Proxmox VEのメジャーリリースでは、過去2つのメジャーリリースにおけるマシンバージョンがサポートされます。</p></div>
<div class="paragraph">
<p>新しいメジャーリリースへアップグレードする前に、
次のメジャーリリースで廃止されるマシンバージョンをすべて回避するよう
仮想マシンの設定を更新してください。これにより、そのリリース期間中も
ゲストを継続して使用できるようになります。詳細は<a href="#qm_machine_update">「新しいマシンバージョンへの更新</a>」セクションをご参照ください。</p></div>
<div class="paragraph">
<p>Proxmox VE 8 では廃止ポリシーはまだ適用されていません。そのため、サポート対象となるマシンバージョンの基準は 2.4 です。
Proxmox VE 9向けにリリースされる最後のQEMUバイナリはQEMU 11.2となる見込みです。このQEMUバイナリでは6.0より古いマシンバージョンのサポートが終了するため、6.0がProxmox VE 9リリースライフサイクルの基準となります。この基準は、Proxmox VEのメジャーリリースごとに2バージョンずつ引き上げられる予定です（例：Proxmox VE 10では8.0）。</p></div>
</div>
<div class="sect5">
<h6 id="qm_machine_update">新しいマシンバージョンへの更新<a class="headerlink" href="#qm_machine_update" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>非推奨警告が表示された場合は、マシンバージョンを新しいものに変更してください。
まず正常に動作するバックアップを確保し、ゲストがハードウェアを認識する方法が変更される可能性に備えてください。
状況によっては、特定のドライバの再インストールが必要になる場合があります。
また、これらのマシンバージョン（つまり<span class="monospaced">runningmachine</span>設定エントリ）で作成された RAM を含むスナップショットの有無も確認してください。
残念ながら、スナップショットのマシンバージョンを変更する方法はありません。
そのため、スナップショットからデータを救出するには、そのスナップショットをロードする必要があります。</p></div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="qm_hard_disk">10.2.4. ハードディスク
<a class="headerlink" href="#qm_hard_disk" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="qm_hard_disk_bus">バス/コントローラ<a class="headerlink" href="#qm_hard_disk_bus" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>QEMUは複数のストレージコントローラをエミュレートできます：</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">パフォーマンス上の理由と、より適切なメンテナンスが行われていることから、<strong>VirtIO SCSI</strong>または<strong>VirtIO Block</strong>コントローラの使用を強くお勧めいたします。</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<strong>IDEコントロー</strong>ラは、1984年のPC/ATディスクコントローラに遡る設計を採用しております。
このコントローラは近年の設計に取って代わられておりますが、
あらゆるOSがサポートしているため、
2003年以前にリリースされたOSを実行する場合に最適な選択肢となります。
このコントローラには最大4台のデバイスを接続可能です。</p>
</li>
<li>
<p>
<strong>SATA</strong>（シリアルATA）コントローラーは2003年に登場したより現代的な設計で、
より高いスループットと多数のデバイス接続を可能にします。
このコントローラーには最大6台のデバイスを接続できます。</p>
</li>
<li>
<p>
<strong>SCSI</strong>コントローラーは1985年に設計され、サーバーグレードのハードウェアに広く採用されており、最大14台のストレージデバイスを接続できます。Proxmox VEではデフォルトでLSI 53C895Aコントローラーをエミュレートします。</p>
<div class="paragraph">
<p>パフォーマンスを重視される場合、
接続されたディスクに対して<em>VirtIO SCSIシングル</em>タイプのSCSIコントローラを使用し、
<a href="#qm_hard_disk_iothread">IOスレッド設定</a>を有効化されることをお勧めいたします。
これはProxmox VE 7.3以降で新規作成されるLinux仮想マシンにおけるデフォルト設定です。
各ディスクは独自の<em>VirtIO SCSI</em>コントローラを持ち、
QEMUが専用スレッドでディスクのI/O処理を管理します。Linuxディストリビューションでは2012年以降、FreeBSDでは2014年以降、このコントローラがサポートされています。Windows OSの場合は、インストール時にドライバを含む追加のISOイメージを提供する必要があります。</p></div>
</li>
<li>
<p>
<strong>VirtIOブロック</strong>コントローラ（しばしば単にVirtIOまたはvirtio-blkと呼ばれます）は、
より古いタイプの準仮想化コントローラです。機能面では、
VirtIO SCSIコントローラに取って代わられています。</p>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="qm_hard_disk_formats">イメージ形式<a class="headerlink" href="#qm_hard_disk_formats" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>各コントローラには、設定済みのストレージ上に存在するファイルまたはブロックデバイスを裏付けとする、複数のエミュレートされたハードディスクを接続します。ストレージタイプの選択により、ハードディスクイメージのフォーマットが決定されます。ブロックデバイスを提供するストレージ（LVM、ZFS、Ceph）では、
<strong>生ディスクイメージ形式</strong>が必要となります。一方、ファイルベースのストレージ（Ext4、XFS、NFS、CIFSなど）では、
<strong>生ディスクイメージ</strong> <strong>形式またはQEMUイメージ形式の</strong>いずれかを選択できます。</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>QEMUイメージフォーマットは</strong>コピーオンライト方式を採用しており、スナップショットの作成や
ディスクイメージのスライシングプロビジョニングを可能にします。</p>
</li>
<li>
<p>
<strong>生ディスクイメージは</strong>、ハードディスクのビット単位のイメージであり、Linux でブロックデバイスに対して<span class="monospaced">dd</span>コマンドを実行した際に得られるものと類似しています。この形式自体はシンプロビジョニングやスナップショットをサポートしておらず、これらのタスクにはストレージ層との連携が必要です。ただし、<strong>QEMU イメージ形式よりも</strong>最大 10% 高速である可能性があります。<span class="footnote"><br>[詳細についてはこちらのベンチマークをご参照ください
<a href="https://events.static.linuxfound.org/sites/events/files/slides/CloudOpen2013_Khoa_Huynh_v3.pdf">https://events.static.linuxfound.org/sites/events/files/slides/CloudOpen2013_Khoa_Huynh_v3.pdf</a>]<br></span></p>
</li>
<li>
<p>
<strong>VMwareイメージ形式は</strong>、ディスクイメージを他のハイパーバイザーにインポート/エクスポートする予定がある場合にのみ、意味があります。</p>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="qm_hard_disk_cache">キャッシュモード<a class="headerlink" href="#qm_hard_disk_cache" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ハードドライブの<strong>キャッシュ</strong>モード設定は、ホストシステムがゲストシステムにブロック書き込み完了を通知する方法に影響します。デフォルトの<strong>「キャッシュなし」</strong>設定では、各ブロックが物理ストレージの書き込みキューに到達した時点で書き込み完了が通知され、ホストのページキャッシュは無視されます。これにより、安全性と速度のバランスが適切に保たれます。</p></div>
<div class="paragraph">
<p>Proxmox VEのバックアップマネージャーが仮想マシンのバックアップ時に特定のディスクをスキップするように設定したい場合、
そのディスクに対して「<strong>バックアップ対象外」</strong>オプションを設定できます。</p></div>
<div class="paragraph">
<p>Proxmox VEのストレージレプリケーション機能において、レプリケーションジョブ開始時に特定のディスクをスキップしたい場合、
そのディスクに対して<strong>「レプリケーションをスキップ」</strong>オプションを設定できます。
Proxmox VE 5.0以降、レプリケーションにはディスク<span class="monospaced">イメージがzfspoolタイプの</span>ストレージ上に存在することが必要です。
したがって、レプリケーションが設定されたVMのディスクイメージを他のストレージに追加する場合、
そのディスクイメージのレプリケーションをスキップする必要があります。</p></div>
</div>
<div class="sect4">
<h5 id="qm_hard_disk_discard">トリム/ディスカード<a class="headerlink" href="#qm_hard_disk_discard" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>お使いのストレージ<em>がシンプロビジョニング</em>をサポートしている場合（Proxmox VEガイドのストレージ章をご参照ください）、ドライブ上で<strong>「破棄」</strong>オプションを有効にできます。<strong>破棄が設定され</strong>、<em>TRIM対応の</em>ゲストOS（<span class="footnote"><br>[TRIM, UNMAP, and discard]</span>）が動作している場合、
<span class="footnote"><a href="https://en.wikipedia.org/wiki/Trim_%28computing%29">https://en.wikipedia.org/wiki/Trim_%28computing%29]</a><br></span> をご参照ください）、VMのファイルシステムがファイル削除後にブロックを未使用としてマークすると、コントローラーがこの情報をストレージに伝達し、ストレージはそれに応じてディスクイメージを縮小します。
ゲストが<em>TRIMコマンド</em>を発行できるようにするには、ドライブの<strong>Discardオプションを</strong>有効にする必要があります。一部のゲストOSでは、<strong>SSDエミュレーション</strong>フラグの設定も必要となる場合があります。なお、<strong>VirtIOブロックドライブ</strong> <strong>におけるDiscard機能は</strong>、Linuxカーネル5.0以降を使用するゲストでのみサポートされています。</p></div>
<div class="paragraph">
<p>ゲストに対してドライブを回転式ハードディスクではなくソリッドステートドライブとして提示したい場合、
<strong>該当ドライブのSSDエミュレーションオプション</strong>を設定できます。
基盤となるストレージが実際にSSDで構成されている必要はなく、
あらゆる物理メディアでこの機能を利用可能です。
なお、<strong>VirtIOブロックドライブでは</strong> <strong>SSDエミュレーションは</strong>サポートされません。</p></div>
</div>
<div class="sect4">
<h5 id="qm_hard_disk_iothread">IOスレッド<a class="headerlink" href="#qm_hard_disk_iothread" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><strong>IO Thread</strong>オプションは、<strong>VirtIO</strong>コントローラを使用するディスク、またはエミュレートされたコントローラタイプ<strong>がVirtIO SCSI singleである</strong> <strong>SCSI</strong>コントローラを使用する場合にのみ利用可能です。<strong>IO Threadを</strong>有効にすると、QEMUはメインイベントループやvCPUスレッドですべてのI/Oを処理する代わりに、ストレージコントローラごとに1つのI/Oスレッドを作成します。これにより、基盤となるストレージの作業分散と利用効率が向上します。もう一つの利点は、非常にI/O集約的なホストワークロードにおいて、ゲスト側の遅延（ハング）が軽減されることです。メインスレッドもvCPUスレッドも、ディスクI/Oによってブロックされることがないためです。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="qm_cpu">10.2.5. CPU
<a class="headerlink" href="#qm_cpu" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-vm-cpu.png">
<img src="images/screenshot/gui-create-vm-cpu.png" alt="screenshot/gui-create-vm-cpu.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p><strong>CPUソケットとは</strong>、PCマザーボード上に存在する物理的なスロットであり、ここにCPUを差し込むことができます。
このCPUには1つまたは複数の<strong>コア</strong>が含まれており、これらは独立した処理ユニットです。
4コアのCPUソケットを1つ搭載するか、2コアのCPUソケットを2つ搭載するかは、
パフォーマンスの観点からはほとんど関係ありません。
ただし、一部のソフトウェアライセンスはマシンのソケット数に依存します。
その場合は、ライセンスが許可するソケット数に設定することが適切です。</p></div>
<div class="paragraph">
<p>仮想CPU（コア数およびソケット数）の増加は、通常パフォーマンスの向上をもたらしますが、
これは仮想マシンの使用方法に大きく依存します。
マルチスレッドアプリケーションは、仮想CPU数を増やすことで当然ながら恩恵を受けます。追加する仮想CPUごとに、QEMUはホストシステム上で新たな実行スレッドを生成するためです。仮想マシンのワークロードが不明な場合、<strong>総コア数を</strong>2に設定するのが一般的に安全な選択となります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">すべての仮想マシンの<em>コア総数が</em>サーバーのコア数を超える場合（例：8コアのマシン上で4コアの仮想マシンを4台（合計16コア）実行する場合）、全く問題ございません。この場合、ホストシステムは標準的なマルチスレッドアプリケーションを実行する場合と同様に、サーバーコア間でQEMU実行スレッドをバランス配分します。ただし、Proxmox VEでは物理的に利用可能なコア数を超える仮想CPUコア数を持つ仮想マシンの起動は制限されます。これはコンテキストスイッチのコストによりパフォーマンスが低下する可能性があるためです。</td>
</tr></table>
</div>
<div class="sect4">
<h5 id="qm_cpu_resource_limits">リソース制限
<a class="headerlink" href="#qm_cpu_resource_limits" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><strong>cpulimit</strong></p></div>
<div class="paragraph">
<p>仮想コア数に加え、<strong>cpulimitオプションにより</strong>VMが利用可能な「ホストCPU時間」の総量を設定できます。これはCPU時間をパーセントで表す浮動小数点値であり、<span class="monospaced">1.0は</span> <span class="monospaced">100%</span>、<span class="monospaced">2.5は</span><span class="monospaced">250%に</span>相当します。単一のプロセスが1つのコアを完全に使用する場合、そのCPU<span class="monospaced">使用率は100%となります</span>。4コアのVMが全コアを完全に利用する場合、理論上は<span class="monospaced">400%</span>の使用率となります<span class="monospaced">。</span>実際には、QEMUがvCPUコア用以外にVM周辺機器用の追加スレッドを持つ可能性があるため、使用率がさらに若干高くなる場合があります。</p></div>
<div class="paragraph">
<p>この設定は、仮想マシンが複数のプロセスを並行して実行するため複数のvCPUを必要とする場合、
しかし仮想マシン全体として全てのvCPUを同時に100%で稼働させることは望ましくない場合に有用です。</p></div>
<div class="paragraph">
<p>例えば、仮想マシンが8つの仮想CPUを有効活用できる場合でも、
サーバーに負荷がかかり他の仮想マシンやコンテナのCPU時間が不足するのを防ぐため、
8コア全てを最大負荷で稼働させたくない場合があります。
この問題を解決するには、<span class="monospaced">cpulimitを4.0</span>（=400%）<strong>に設定します</strong>。これにより、仮想マシンが8つのプロセスを同時に実行して8つの仮想CPUを完全に利用した場合でも、各vCPUが物理コアから受け取るCPU時間は最大50%となります。ただし、仮想マシンのワークロードが4つの仮想CPUのみを完全に利用している場合、物理コアから最大100%のCPU時間を受け取ることが可能であり、合計で400%となります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">仮想マシン（VM）は、その構成によっては、ネットワークや入出力操作、さらにはライブマイグレーションなど、追加のスレッドを使用する場合があります。そのため、VMが使用するCPU時間が、割り当てられた仮想CPU（vCPU）が使用できる時間よりも多く見えることがあります。VMが割り当てられたvCPUよりも多くのCPU時間を使用しないようにするには、<strong>cpulimitを</strong>コア総数と同じ値に設定してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p><strong>cpuunits</strong></p></div>
<div class="paragraph">
<p><strong>cpuunitsオプション</strong>（現在ではCPUシェアまたはCPUウェイトと呼ばれることが多い）を使用すると、
他の稼働中のVMと比較して、VMが割り当てられるCPU時間を制御できます。
これは相対的な重みであり、<span class="monospaced">デフォルト値は100です</span>（ホストがレガシーcgroup v1を使用している場合は<span class="monospaced">1024</span>）。
VMのこの値を増加させると、スケジューラによって、より低い重みを持つ他のVMと比較して優先されます。</p></div>
<div class="paragraph">
<p>例えば、VM 100 がデフォルトの<span class="monospaced">100</span>を設定し、VM 200 を<span class="monospaced">200</span> に変更した場合、後者の VM 200 は前者の VM 100 の 2 倍の CPU 帯域幅を受け取ることになります。</p></div>
<div class="paragraph">
<p>詳細は<span class="monospaced">man systemd.resource-control</span> を参照ください。ここで<span class="monospaced">CPUQuota は</span> <span class="monospaced">cpulimit</span>に、<span class="monospaced">CPUWeight は</span> <span class="monospaced">cpuunits</span>設定に対応します。参照先や実装の詳細については、同ドキュメントの Notes セクションをご覧ください。</p></div>
<div class="paragraph">
<p><strong>アフィニティ</strong></p></div>
<div class="paragraph">
<p><strong>アフィニティオプション</strong>を使用すると、VMのvCPUを実行するために使用される物理CPUコアを指定できます。I/O処理などの周辺VMプロセスはこの設定の影響を受けません。なお、<strong>CPUアフィニティはセキュリティ機能ではありません</strong>。</p></div>
<div class="paragraph">
<p>特定の状況では<strong>CPUアフィニティの</strong>強制が有効な場合もありますが、
複雑性と保守負担の増加を伴います。例えば、後からVMを追加する場合や、
CPUコア数が少ないノードへVMを移行する場合などが該当します。また、
一部のCPUが完全に利用されている一方で他のCPUがほぼアイドル状態の場合、
非同期状態となり、結果としてシステムパフォーマンスが制限される可能性が
高くなります。</p></div>
<div class="paragraph">
<p><strong>アフィニティ</strong> <span class="monospaced">はtaskset</span>CLIツールで設定します。このツールは<span class="monospaced">man cpuset</span>に記載の<span class="monospaced">リスト形式で</span>ホストCPU番号（<span class="monospaced">lscpu</span>参照）を受け付けます。このASCII十進リストには個別の番号だけでなく範囲指定も可能です。<strong>例えば</strong>、アフィニティ
<span class="monospaced">0-1,8-11</span>（<span class="monospaced">展開すると0, 1, 8, 9, 10, 11</span>）と指定すると、VMはこれらの特定の6つのホストコア上でのみ実行可能となります。</p></div>
</div>
<div class="sect4">
<h5 id="_cpu_type">CPUタイプ
<a class="headerlink" href="#_cpu_type" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>QEMUは486から最新のXeonプロセッサまで、様々な<strong>CPUタイプを</strong>エミュレートできます。各新世代プロセッサは、ハードウェア支援3Dレンダリング、乱数生成、メモリ保護などの新機能を追加します。また現行世代は、バグ修正やセキュリティ修正を含む<a href="#chapter_firmware_updates">マイクロコード更新により</a>アップグレード可能です。</p></div>
<div class="paragraph">
<p>通常、仮想マシンにはホストシステムのCPUに可能な限り近いプロセッサタイプを選択されることをお勧めいたします。これにより、ホストCPUの機能（<em>CPUフラグ</em>とも呼ばれます）が仮想マシンでも利用可能となります。完全に一致させたい場合は、CPUタイプを<strong>「ホスト」</strong>に設定することで、仮想マシンがホストシステムと全く同一のCPU<em>フラグ</em>を持つようになります。</p></div>
<div class="paragraph">
<p>ただし、これには欠点があります。異なるホスト間で仮想マシンのライブマイグレーションを行う場合、新しいシステムでは異なるCPUタイプやマイクロコードバージョンが使用される可能性があります。
ゲストに渡されるCPUフラグが不足している場合、QEMUプロセスは停止します。この問題を解決するため、QEMUには独自の仮想CPUタイプが用意されており、Proxmox VEではこれがデフォルトで使用されます。</p></div>
<div class="paragraph">
<p>バックエンドのデフォルトは<em>kvm64</em>で、基本的に全ての x86_64 ホスト CPU で動作します。
また、新しい VM 作成時の UI デフォルトは<em>x86-64-v2-AES</em> であり、
Intel では Westmere 以降のホスト CPU、AMD では少なくとも第4世代 Opteron が必要です。</p></div>
<div class="paragraph">
<p>要約しますと：</p></div>
<div class="paragraph">
<p>ライブマイグレーションを必要としない場合、または全ノードが同一のCPUとマイクロコードバージョンを持つ均質なクラスター環境では、CPUタイプをホストに設定してください。理論上、これによりゲストマシンが最高のパフォーマンスを発揮します。</p></div>
<div class="paragraph">
<p>ライブマイグレーションとセキュリティを重視され、かつインテル製CPUのみ、またはAMD製CPUのみをご利用の場合は、クラスター内で最も低世代のCPUモデルをお選びください。</p></div>
<div class="paragraph">
<p>セキュリティを重視せずライブマイグレーションのみを重視される場合、またはインテルとAMDの混在クラスターをお持ちの場合は、互換性のある仮想QEMU CPUタイプの中で最も低いものを選択してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">IntelとAMDのホストCPU間でのライブマイグレーションは、動作を保証できません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>関連情報
<a href="#chapter_qm_vcpu_list">QEMU で定義されている AMD および Intel CPU タイプの一覧</a></p></div>
</div>
<div class="sect4">
<h5 id="_qemu_cpu_types">QEMU CPU タイプ
<a class="headerlink" href="#_qemu_cpu_types" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>QEMUは仮想CPUタイプも提供しており、IntelとAMDの両方のホストCPUと互換性があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">仮想CPUタイプにおけるSpectre脆弱性を軽減するには、
関連するCPUフラグを追加する必要があります。詳細は
<a href="#qm_meltdown_spectre">Meltdown / Spectre関連CPUフラグをご参照ください</a>。</td>
</tr></table>
</div>
<div class="paragraph">
<p>従来、Proxmox VEでは<em>kvm64</em>CPUモデルが採用されており、Pentium 4レベルのCPUフラグが有効化されていたため、特定のワークロードではパフォーマンスが十分ではありませんでした。</p></div>
<div class="paragraph">
<p>2020年夏、AMD、Intel、Red Hat、SUSEは共同で、x86-64ベースライン上に3つのx86-64マイクロアーキテクチャレベルを定義し、最新のフラグを有効化しました。詳細は
<a href="https://gitlab.com/x86-psABIs/x86-64-ABI">x86-64-ABI仕様書</a></p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">CentOS 9などの一部の新しいディストリビューションでは、
最低要件としてx86-64<em>-</em>v2フラグが組み込まれています。</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>kvm64 (x86-64-v1)</em>: Intel CPU Pentium 4 以降、AMD CPU Phenom 以降と互換性があります。</p>
</li>
<li>
<p>
<em>x86-64-v2</em>: Intel CPU Nehalem以降、AMD CPU Opteron_G3以降に対応。
<em>x86-64-v1と比較して追加されたCPUフラグ</em>:<em>+cx16</em>,<em>+lahf-lm</em>,<em>+popcnt</em>,<em>+pni</em>,
<em>+sse4.1</em>,<em>+sse4.2</em>,<em>+ssse3</em>。</p>
</li>
<li>
<p>
<em>x86-64-v2-AES</em>: Intel CPU Westmere以降、AMD CPU Opteron_G4以降と互換性があります。
<em>x86-64-v2と比較</em>した追加のCPUフラグ:<em>+aes</em>。</p>
</li>
<li>
<p>
<em>x86-64-v3</em>: インテル CPU Haswell 以降、AMD CPU EPYC 以降に対応。
<em>x86-64-v2-AES</em> との比較で追加された CPU フラグ:<em>+avx</em>,<em>+avx2</em>,<em>+bmi1</em>,<em>+bmi2</em>,
<em>+f16c</em>,<em>+fma</em>,<em>+movbe</em>,<em>+xsave</em>.</p>
</li>
<li>
<p>
<em>x86-64-v4</em>: Intel CPU Skylake以降、AMD CPU EPYC v4 Genoa以降に対応。
<em>x86-64-v3と比較した</em>追加CPUフラグ:<em>+avx512f</em>,<em>+avx512bw</em>,<em>+avx512cd</em>,
<em>+avx512dq</em>,<em>+avx512vl</em>。</p>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="_custom_cpu_types">カスタム CPU タイプ
<a class="headerlink" href="#_custom_cpu_types" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>カスタマイズ可能な機能セットを備えたカスタムCPUタイプを指定できます。これらは管理者によって設定ファイル<span class="monospaced">/etc/pve/virtual-guest/cpu-models.conf</span>で管理されます。フォーマットの詳細については<span class="monospaced">man cpu-models.conf</span>を参照してください。</p></div>
<div class="paragraph">
<p>指定されたカスタムタイプは、<span class="monospaced">/nodes</span> 上で<span class="monospaced">Sys.Audit</span>特権を持つユーザーが選択可能です。CLI または API 経由で VM にカスタム CPU タイプを設定する際は、名前を<em>custom-</em> で始まるようにする必要があります<em>。</em></p></div>
</div>
<div class="sect4">
<h5 id="qm_meltdown_spectre">Meltdown / Spectre 関連の CPU フラグ
<a class="headerlink" href="#qm_meltdown_spectre" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>MeltdownおよびSpectre脆弱性に関連する複数のCPUフラグが存在します。<span class="footnote"><br>[Meltdown Attack<a href="https://meltdownattack.com/">https://meltdownattack.com/</a>]<br></span>これらは、選択したVMのCPUタイプがデフォルトで有効化していない場合、
手動で設定する必要があります。</p></div>
<div class="paragraph">
<p>これらのCPUフラグを使用するには、以下の2つの要件を満たす必要があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
ホストCPUは当該機能をサポートし、ゲストの仮想CPUへ伝達する必要があります。</p>
</li>
<li>
<p>
ゲストオペレーティングシステムは、攻撃を緩和し、CPU機能を利用できるバージョンに更新する必要があります。</p>
</li>
</ul></div>
<div class="paragraph">
<p>そうでない場合は、仮想CPUの希望するCPUフラグを設定する必要があります。
方法としては、Web UIでCPUオプションを編集するか、
VM設定ファイル内の<em>cpu</em>オプションの<em>flags</em>プロパティを設定する方法があります。</p></div>
<div class="paragraph">
<p>Spectre v1、v2、v4 対策については、CPU またはシステムベンダーが
CPU 向けの「マイクロコード更新」を提供している必要もあります。詳細は
<a href="#chapter_firmware_updates">「ファームウェアの更新」の章をご参照ください</a>。なお、影響を受けるすべての CPU が
spec-ctrl サポートに向けて更新できるわけではありません。</p></div>
<div class="paragraph">
<p>Proxmox VEホストが脆弱性の影響を受けるかどうかを確認するには、root権限で以下のコマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>for f in /sys/devices/system/cpu/vulnerabilities/*; doecho "${f##*/} -" $(cat "$f"); done</pre>
</div></div>
<div class="paragraph">
<p>ホストが依然として脆弱であるかどうかを検出するためのコミュニティスクリプトも利用可能です。<span class="footnote"><br>[spectre-meltdown-checker<a href="https://meltdown.ovh/">https://meltdown.ovh/</a>]<br></span></p></div>
</div>
<div class="sect4">
<h5 id="_intel_processors">インテル製プロセッサ
<a class="headerlink" href="#_intel_processors" title="Permalink to this heading"></a></h5>
<div class="ulist"><ul>
<li>
<p>
pcid</p>
<div class="paragraph">
<p>これにより、<em>カーネルページテーブル分離（KPTI）</em>と呼ばれるMeltdown（CVE-2017-5754）対策のパフォーマンスへの影響が軽減されます。KPTIはカーネルメモリをユーザー空間から効果的に隠蔽します。PCIDなしでは、KPTIは非常に負荷の高いメカニズムとなります。<span class="footnote"><br>[PCIDは現在x86アーキテクチャにおいて重要なパフォーマンス/セキュリティ機能です]
<a href="https://groups.google.com/forum/m/#!topic/mechanical-sympathy/L9mHTbeQLNU">https://groups.google.com/forum/m/#!topic/mechanical-sympathy/L9mHTbeQLNU]</a><br></span> 。</p></div>
<div class="paragraph">
<p>Proxmox VEホストがPCIDをサポートしているか確認するには、root権限で以下のコマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># grep ' pcid ' /proc/cpuinfo</pre>
</div></div>
<div class="paragraph">
<p>空の文字列が返されない場合、お使いのホストの CPU は<em>PCID</em> をサポートしています。</p></div>
</li>
<li>
<p>
<em>spec</em>-ctrl</p>
<div class="paragraph">
<p>Retpolines だけでは不十分な場合、Spectre v1 (CVE-2017-5753) および Spectre v2 (CVE-2017-5715) の修正を有効にするために必要です。
-IBRS サフィックス付きの Intel CPU モデルではデフォルトで有効です。
-IBRS サフィックスのない Intel CPU モデルでは明示的に有効にする必要があります。
ホスト CPU のマイクロコード更新（intel-microcode ≥ 20180425）が必要です。</p></div>
</li>
<li>
<p>
ssbd</p>
<div class="paragraph">
<p>Spectre V4（CVE-2018-3639）の修正を有効化するために必要です。
どのインテルCPUモデルにもデフォルトでは含まれておりません。
全てのインテルCPUモデルにおいて明示的に有効化する必要があります。
更新されたホストCPUマイクロコード（intel-microcode &amp;gt;= 20180703）が必要です。</p></div>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="_amd_processors">AMDプロセッサ
<a class="headerlink" href="#_amd_processors" title="Permalink to this heading"></a></h5>
<div class="ulist"><ul>
<li>
<p>
<em>ibp</em>b</p>
<div class="paragraph">
<p>Spectre v1 (CVE-2017-5753) および Spectre v2 (CVE-2017-5715) 対策の有効化に必要です。
retpolines だけでは不十分な場合に適用されます。
-IBPB サフィックス付きの AMD CPU モデルではデフォルトで有効です。
-IBPB サフィックスのない AMD CPU モデルでは明示的に有効にする必要があります。
ゲスト CPU で使用するには、ホスト CPU マイクロコードがこの機能をサポートしている必要があります。</p></div>
</li>
<li>
<p>
<em>virt</em>-ssbd</p>
<div class="paragraph">
<p>Spectre v4 (CVE-2018-3639) 対策の有効化に必須です。
デフォルトでは、どの AMD CPU モデルにも含まれておりません。
全ての AMD CPU モデルにおいて、明示的に有効化する必要があります。
ゲストの互換性を最大限に高めるため、amd-ssbdが提供されている場合でも、ゲストに本機能を必ず提供してください。
なお、「host」CPUモデルを使用する際には、物理CPUには存在しない仮想機能であるため、明示的に有効化する必要があります。</p></div>
</li>
<li>
<p>
amd-ssbd</p>
<div class="paragraph">
<p>Spectre v4 (CVE-2018-3639) 修正を有効化するために必要です。
デフォルトでは、いかなる AMD CPU モデルにも含まれておりません。すべての AMD CPU モデルにおいて明示的に有効化する必要があります。
virt-ssbd よりも高いパフォーマンスを提供します。そのため、これをサポートするホストは、可能な限り常にゲストに公開すべきです。
ただし、一部のカーネルは virt-ssbd しか認識しないため、ゲストの互換性を最大限に高めるために virt-ssbd も公開しておくことをお勧めします。</p></div>
</li>
<li>
<p>
amd-no-ssb</p>
<div class="paragraph">
<p>ホストがSpectre V4（CVE-2018-3639）の影響を受けないことを示すために推奨されます。
AMD CPUモデルにはデフォルトで含まれておりません。
将来のCPUハードウェア世代はCVE-2018-3639の影響を受けないため、
ゲストに対してamd-no-ssbを有効化し、緩和策を適用しないよう指示する必要があります。
これはvirt-ssbdおよびamd-ssbdと排他的です。</p></div>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="_numa">NUMA
<a class="headerlink" href="#_numa" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>また、VM内で<strong>NUMAアーキテクチャを</strong>エミュレートすることも可能です。<span class="footnote"><br>[<a href="https://en.wikipedia.org/wiki/Non-uniform_memory_access">https://en.wikipedia.org/wiki/Non-uniform_memory_access</a>]<br></span>NUMAアーキテクチャの基本的な仕組みは、すべてのコアが共有するグローバルメモリプールではなく、メモリが各ソケットに近いローカルバンクに分散されることです。
これによりメモリバスがボトルネックとならなくなるため、速度向上が期待できます。お使いのシステムが NUMA アーキテクチャを採用している場合（<span class="footnote"><br>[コマンド<span class="monospaced">numactl --hardware | grep available</span>の結果が複数のノードを示す場合、ホストシステムは NUMA アーキテクチャを採用しています]<br></span>）、このオプションを有効化することをお勧めいたします。これにより、ホストシステム上で VM リソースが適切に分散されます。
また、このオプションは VM 内のコアや RAM をホットプラグする際に必要となります。</p></div>
<div class="paragraph">
<p>NUMAオプションを使用する場合、ソケット数をホストシステムのノード数に設定することを推奨いたします。</p></div>
</div>
<div class="sect4">
<h5 id="_vcpu_hot_plug">vCPUのホットプラグ
<a class="headerlink" href="#_vcpu_hot_plug" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>現代のオペレーティングシステムでは、稼働中のシステムにおいてCPUのホットプラグおよび一定範囲でのホットアンプラグが可能となりました。仮想化技術により、このようなシナリオで実ハードウェアが引き起こす可能性のある多くの（物理的な）問題を回避できます。
しかしながら、これは比較的新しい複雑な機能であるため、その使用は絶対に必要な場合に限定すべきです。ほとんどの機能は、十分にテストされ複雑さの少ない他の機能で再現可能です（<a href="#qm_cpu_resource_limits">リソース制限を参照</a>）。</p></div>
<div class="paragraph">
<p>Proxmox VE では、接続可能な CPU の最大数は常に「<span class="monospaced">コア数 × ソケット数</span>」となります。
この合計コア数未満の CPU で VM を起動するには、<strong>vcpus</strong>設定を使用できます。
これは VM 起動時に接続すべき vCPU の数を指定します。</p></div>
<div class="paragraph">
<p>現在、この機能はLinuxでのみサポートされており、カーネルバージョン3.10以降が必要です。カーネルバージョン4.7以降が推奨されます。</p></div>
<div class="paragraph">
<p>ゲスト内で新しい CPU を自動的にオンライン設定するには、以下の udev ルールをご利用いただけます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>SUBSYSTEM=="cpu", ACTION=="add", TEST=="online", ATTR{online}=="0", ATTR{online}="1"</pre>
</div></div>
<div class="paragraph">
<p>このルールを /etc/udev/rules.d/ 配下に<span class="monospaced">.rules</span> 拡張子で保存してください。</p></div>
<div class="paragraph">
<p>注記: CPUのホットリムーブはマシン依存であり、ゲストOSの協力が必要です。削除コマンドはCPUの物理的除去を保証するものではなく、通常はx86/amd64におけるACPIなど、ターゲット依存のメカニズムを介してゲストOSに要求が転送されます。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="qm_memory">10.2.6. メモリ
<a class="headerlink" href="#qm_memory" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>各仮想マシン（VM）に対して、固定サイズのメモリを設定するか、
ホストの現在のRAM使用量に基づいて
Proxmox VEに動的にメモリを割り当てさせるかを選択できます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-vm-memory.png">
<img src="images/screenshot/gui-create-vm-memory.png" alt="screenshot/gui-create-vm-memory.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<div class="title">固定メモリ割り当て</div><p>メモリと最小メモリを同じ量に設定した場合、
Proxmox VEは指定された量をそのまま仮想マシンに割り当てます。</p></div>
<div class="paragraph">
<p>固定メモリサイズを使用する場合でも、バルーニングデバイスは仮想マシンに追加されます。これは、ゲストが実際に使用するメモリ量などの有用な情報を提供するからです。
一般的に、<strong>バルーニングは</strong>有効のままにしておくべきですが、無効にしたい場合（デバッグ目的など）は、設定で<strong>「バルーニングデバイス」の</strong>チェックを外すか、</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>balloon: 0</pre>
</div></div>
<div class="paragraph">
<p>設定で「自動メモリ割り当て」を選択してください。</p></div>
<div class="paragraph" id="qm_ballooning">
<div class="title">自動メモリ割り当て</div><p>最小メモリをメモリ量より低く設定した場合、Proxmox VEは指定した最小量が常にVMに確保されるよう保証します。また、ホストのRAM使用率が特定の目標パーセンテージを下回った場合、指定された最大メモリ量まで動的にゲストにメモリを追加します。目標パーセンテージはデフォルトで80%に設定されており、<a href="#ballooning-target">ノードオプションで</a>変更可能です。</p></div>
<div class="paragraph">
<p>ホストのRAMが不足した場合、仮想マシンはホストにメモリを解放します。
必要に応じて実行中のプロセスをスワップし、最終手段としてoomキラーを起動します。
ホストとゲスト間のメモリのやり取りは、ゲスト内で動作する特別な<span class="monospaced">バルーンドライバ</span>によって行われ、
ホストからメモリページを取得または解放します。
<span class="footnote"><br>[バルーンドライバの内部動作に関する詳しい説明はこちらでご覧いただけます<a href="https://rwmj.wordpress.com/2010/07/17/virtio-balloon/">https://rwmj.wordpress.com/2010/07/17/virtio-balloon/</a>]<br></span></p></div>
<div class="paragraph">
<p>複数の仮想マシンが自動割り当て機能を利用する場合、各仮想マシンがホストの空きメモリから相対的に使用する量を示す<strong>シェア</strong>係数を設定することが可能です。例えば、4台の仮想マシンがあり、そのうち3台がHTTPサーバーを実行し、最後の1台がデータベースサーバーであると仮定します。ホストはRAM使用率を80%に設定するよう構成されています。データベースサーバーのRAMにより多くのデータベースブロックをキャッシュするため、空きRAMが利用可能な場合にデータベースVMを優先的に割り当てたいとします。このため、データベースVMにシェア値3000を割り当て、他のVMにはデフォルトのシェア値1000を適用します。ホストサーバーのRAMは32GBで、現在16GBを使用しているため、32
* 80/100 - 16 = 9GB の RAM が、各 VM に設定された最小メモリ量に加えて割り当てられます。データベース VM は 9 * 3000 / (3000 + 1000 + 1000 + 1000) = 4.5 GB の追加 RAM の恩恵を受け、各 HTTP サーバーは 1.5 GB ずつ受けます。</p></div>
<div class="paragraph">
<p>2010年以降にリリースされた全てのLinuxディストリビューションには、バルーンドライバーが標準搭載されております。Windows OSの場合、バルーンドライバーは手動で追加する必要があり、ゲストの動作速度低下を招く可能性があるため、重要なシステムでの使用はお勧めいたしません。</p></div>
<div class="paragraph">
<p>仮想マシンにRAMを割り当てる際には、ホストに常に1GBのRAMを
確保しておくことが良い目安となります。</p></div>
</div>
<div class="sect3">
<h4 id="qm_memory_encryption">10.2.7. メモリ暗号化
<a class="headerlink" href="#qm_memory_encryption" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="qm_memory_encryption_sev">AMD SEV<a class="headerlink" href="#qm_memory_encryption_sev" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>SEV（Secure Encrypted Virtualization）は、AES-128暗号化とAMDセキュアプロセッサを用いて、VMごとにメモリ暗号化を可能にします。</p></div>
<div class="paragraph">
<p>SEV-ES（Secure Encrypted Virtualization - Encrypted State）はさらに、
すべての CPU レジスタの内容を暗号化し、ハイパーバイザーへの情報漏洩を防止します。</p></div>
<div class="paragraph">
<p>SEV-SNP（Secure Encrypted Virtualization - Secure Nested Paging）は、ソフトウェアベースの完全性攻撃の防止も試みます。詳細は

<a href="https://www.amd.com/content/dam/amd/en/documents/epyc-business-docs/white-papers/SEV-SNP-strengthening-vm-isolation-with-integrity-protection-and-more.pdf">AMD SEV SNP ホワイトペーパー</a>をご参照ください。</p></div>
<div class="paragraph">
<p><strong>ホスト要件：</strong></p></div>
<div class="ulist"><ul>
<li>
<p>
AMD EPYC CPU</p>
</li>
<li>
<p>
SEV-ESは、AMD EPYC 7002シリーズ以降のEPYC CPUでのみサポートされております</p>
</li>
<li>
<p>
SEV-SNP は AMD EPYC 7003 シリーズ以降の EPYC CPU でのみサポートされています</p>
</li>
<li>
<p>
SEV-SNP はホストカーネルバージョン 6.11 以降が必要です。</p>
</li>
<li>
<p>
ホストマシンのBIOS設定においてAMDメモリ暗号化を設定してください</p>
</li>
<li>
<p>
デフォルトで有効になっていない場合は、カーネルパラメータに「kvm_amd.sev=1」を追加してください</p>
</li>
<li>
<p>
ホスト（SME）のメモリを暗号化したい場合は、カーネルパラメータに「mem_encrypt=on」を追加してください
詳細は<a href="https://www.kernel.org/doc/Documentation/x86/amd-memory-encryption.txt">https://www.kernel.org/doc/Documentation/x86/amd-memory-encryption.txt</a>をご参照ください</p>
</li>
<li>
<p>
必要に応じて SWIOTLB を増加させることをご検討ください。詳細は<a href="https://github.com/AMDESE/AMDSEV#faq-4">https://github.com/AMDESE/AMDSEV#faq-4</a>をご参照ください。</p>
</li>
</ul></div>
<div class="paragraph">
<p>ホストでSEVが有効化されているか確認するには、dmesgで<span class="monospaced">「sev</span>」を検索し、
kvm_amdのSEVカーネルパラメータを出力してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dmesg | grep -i sev
[...] ccp 0000:45:00.1: sev enabled
[...] ccp 0000:45:00.1: SEV API: &amp;lt;buildversion&amp;gt;
[...] SEV 対応: &amp;lt;number&amp;gt; ASIDs
[...] SEV-ES 対応: &amp;lt;number&amp;gt; ASIDs
# cat /sys/module/kvm_amd/parameters/sev
Y</pre>
</div></div>
<div class="paragraph">
<p><strong>ゲスト要件:</strong></p></div>
<div class="ulist"><ul>
<li>
<p>
edk2-OVMF</p>
</li>
<li>
<p>
Q35の使用をお勧めいたします</p>
</li>
<li>
<p>
ゲストオペレーティングシステムはSEVサポートを含む必要があります。</p>
</li>
</ul></div>
<div class="paragraph">
<p><strong>制限事項:</strong></p></div>
<div class="ulist"><ul>
<li>
<p>
メモリが暗号化されているため、ホスト上のメモリ使用量は常に誤った値となります。</p>
</li>
<li>
<p>
スナップショットやライブマイグレーションなど、メモリの保存や復元を伴う操作は、
まだ機能しないか、
<a href="https://github.com/PSPReverse/amd-sev-migration-attack">攻撃を受けやすい状態です</a>。</p>
</li>
<li>
<p>
PCIパススルーはサポートされていません。</p>
</li>
<li>
<p>
SEV-ES および SEV-SNP は非常に実験的な段階です。</p>
</li>
<li>
<p>
SEV-SNPではEFIディスクはサポートされていません。</p>
</li>
<li>
<p>
SEV-SNP 環境では、VM 内での<span class="monospaced">再起動コマンドは</span>単に VM をシャットダウンします。</p>
</li>
</ul></div>
<div class="paragraph">
<p><strong>設定例（SEV）：</strong></p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &amp;lt;vmid&amp;gt; -amd-sev type=std,no-debug=1,no-key-sharing=1,kernel-hashes=1</pre>
</div></div>
<div class="paragraph">
<p><strong>type</strong>パラメータは暗号化技術種別を定義します（「type=」は不要です）。
利用可能なオプションは std、es、snp です。</p></div>
<div class="paragraph">
<p>QEMUの<strong>policy</strong>パラメータは、<strong>no-debug</strong><strong>およびno-key-sharing</strong>パラメータを用いて計算されます。
これらのパラメータはpolicy-bit 0および1に対応します。
<strong>type</strong> <strong>がes</strong>の場合、policy-bit 2は1に設定され、SEV-ESが有効となります。
ポリシービット3（nosend）は、マイグレーション攻撃を防ぐため常に1に設定されます。ポリシーの計算方法の詳細については、
<a href="https://www.amd.com/system/files/TechDocs/55766_SEV-KM_API_Specification.pdf">AMD SEV API仕様書 第3章</a></p></div>
<div class="paragraph">
<p><strong>カーネルハッシュオプションは</strong>、カーネル/initrdを計測しない古いOVMFイメージやゲストとの下位互換性のため、デフォルトでは無効になっております。
詳細は<a href="https://lists.gnu.org/archive/html/qemu-devel/2021-11/msg02598.html">以下</a>をご参照ください：
<a href="https://lists.gnu.org/archive/html/qemu-devel/2021-11/msg02598.html">https://lists.gnu.org/archive/html/qemu-devel/2021-11/msg02598.html</a></p></div>
<div class="paragraph">
<p><strong>VM 内で SEV が機能しているか確認する</strong></p></div>
<div class="paragraph">
<p>方法 1 - dmesg:</p></div>
<div class="paragraph">
<p>出力は以下のような形式になります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dmesg | grep -i sev
AMDメモリ暗号化機能有効: SEV</pre>
</div></div>
<div class="paragraph">
<p>方法 2 - MSR 0xc0010131 (MSR_AMD64_SEV):</p></div>
<div class="paragraph">
<p>出力値は 1 である必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt install msr-tools
# modprobe msr
# rdmsr -a 0xc0010131
1</pre>
</div></div>
<div class="paragraph">
<p><strong>設定例 (SEV-SNP):</strong></p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &amp;lt;vmid&amp;gt; -amd-sev type=snp,allow-smt=1,no-debug=1,kernel-hashes=1</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">allow-smt</span>ポリシービットはデフォルトで設定されています。これを無効化するために
<span class="monospaced">allow-smt を</span> <span class="monospaced">0</span> に設定した場合、VM を実行するためにはホスト上で SMT を無効化する必要があります。</p></div>
<div class="paragraph">
<p><strong>仮想マシンでSEV-SNPが動作しているか確認してください</strong></p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dmesg | grep -i snp
メモリ暗号化機能が有効です: AMD SEV SEV-ES SEV-SNP
SEV: SNP CPUID テーブルを使用中、29 エントリが存在します。
SEV: SNP ゲストプラットフォームデバイスが初期化されました。</pre>
</div></div>
<div class="paragraph">
<p>関連リンク:</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="https://developer.amd.com/sev/">https://developer.amd.com/sev/</a></p>
</li>
<li>
<p>
<a href="https://github.com/AMDESE/AMDSEV">https://github.com/AMDESE/AMDSEV</a></p>
</li>
<li>
<p>
<a href="https://www.qemu.org/docs/master/system/i386/amd-memory-encryption.html">https://www.qemu.org/docs/master/system/i386/amd-memory-encryption.html</a></p>
</li>
<li>
<p>
<a href="https://www.amd.com/system/files/TechDocs/55766_SEV-KM_API_Specification.pdf">https://www.amd.com/system/files/TechDocs/55766_SEV-KM_API_Specification.pdf</a></p>
</li>
<li>
<p>
<a href="https://documentation.suse.com/sles/15-SP1/html/SLES-amd-sev/index.html">https://documentation.suse.com/sles/15-SP1/html/SLES-amd-sev/index.html</a></p>
</li>
<li>
<p>

<a href="https://www.amd.com/content/dam/amd/en/documents/epyc-technical-docs/specifications/56860.pdf">SEV セキュアネステッドペイジングファームウェア ABI 仕様</a></p>
</li>
</ul></div>
</div>
</div>
<div class="sect3">
<h4 id="qm_network_device">10.2.8. ネットワークデバイス
<a class="headerlink" href="#qm_network_device" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-vm-network.png">
<img src="images/screenshot/gui-create-vm-network.png" alt="screenshot/gui-create-vm-network.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>各仮想マシンには、4種類の<em>ネットワークインターフェースコントローラ</em>（NIC）を複数搭載できます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Intel E1000</strong>はデフォルトであり、Intel ギガビットネットワークカードをエミュレートします。</p>
</li>
<li>
<p>
最高のパフォーマンスを目指す場合は、<strong>VirtIO</strong>パラバーチャル化 NIC をご利用ください。
他の VirtIO デバイスと同様に、ゲスト OS には適切なドライバがインストールされている必要があります。</p>
</li>
<li>
<p>
<strong>Realtek 8139</strong>は旧式の 100 MB/s ネットワークカードをエミュレートし、
旧式オペレーティングシステム（2002 年以前にリリースされたもの）のエミュレーション時のみ
ご利用ください。</p>
</li>
<li>
<p>
<strong>vmxnet3は</strong>別の準仮想化デバイスであり、他のハイパーバイザーから仮想マシンをインポートする場合にのみ使用すべきです。</p>
</li>
</ul></div>
<div class="paragraph">
<p>Proxmox VEは各NICに対してランダムな<strong>MACアドレス</strong>を生成します。これにより、
VMはイーサネットネットワーク上でアドレス指定可能となります。</p></div>
<div class="paragraph">
<p>仮想マシンに追加するネットワークインターフェースは、以下の2つのモデルのいずれかに従います：</p></div>
<div class="ulist"><ul>
<li>
<p>
デフォルトの<strong>ブリッジモード</strong>では、各仮想NICはホスト上で<em>tapデバイス</em>（イーサネットNICをシミュレートするソフトウェアループバックデバイス）によってサポートされます。このtapデバイスはブリッジ（Proxmox VEではデフォルトでvmbr0）に追加されます。このモードでは、仮想マシンはホストが存在するイーサネットLANに直接アクセスできます。</p>
</li>
<li>
<p>
代替となる<strong>NATモード</strong>では、各仮想NICはQEMUユーザーネットワークスタックとのみ通信します。
このスタックには組み込みルーターとDHCPサーバーが実装されており、
ネットワークアクセスを提供します。この組み込みDHCPはプライベート範囲
10.0.2.0/24のアドレスを割り当てます。NATモードはブリッジモードよりも大幅に速度が低下するため、
テスト目的でのみご利用ください。このモードはCLIまたはAPI経由でのみ利用可能で、
Web UIからは設定できません。</p>
</li>
</ul></div>
<div class="paragraph">
<p>仮想マシン作成時に<strong>「ネットワークデバイスなし」</strong>を選択することで、
<strong>ネットワークデバイスの</strong>追加を省略することも可能です。</p></div>
<div class="paragraph">
<p>各仮想マシンネットワークデバイスごとに、<strong>MTU</strong>設定を手動で上書きすることが可能です。
このフィールドを空のままにするか、<span class="monospaced">mtu=1</span>を設定すると、基盤となるブリッジからMTUを継承します。
このオプションは<strong>VirtIO</strong>ネットワークデバイスでのみご利用いただけます。</p></div>
<div class="paragraph">
<div class="title">マルチキュー</div><p>VirtIOドライバをご利用の場合、<strong>オプションでマルチキュー機能を</strong>有効化できます。
この機能により、ゲストOSは複数の仮想CPUを使用してネットワークパケットを処理でき、
転送されるパケットの総数が増加します。</p></div>
<div class="paragraph">
<p>Proxmox VE で VirtIO ドライバーを使用する場合、各 NIC のネットワークキューはホストカーネルに渡され、vhost ドライバーによって生成されたカーネルスレッドによって処理されます。このオプションを有効にすると、各 NIC<em>に対して複数の</em>ネットワークキューをホストカーネルに渡すことが可能となります。</p></div>
<div class="paragraph">
<p>マルチキューを使用する際は、ゲストの仮想CPU数と同等の値に設定することをお勧めいたします。仮想CPU数は、ソケット数にVM用に設定されたコア数を乗じた値となります。また、VM内の各VirtIO NICにおけるマルチパーパスチャネルの数を、以下のethtoolコマンドで設定する必要があります：</p></div>
<div class="paragraph">
<p><span class="monospaced">ethtool -L ens1 combined X</span></p></div>
<div class="paragraph">
<p>ここで X は VM の vCPU 数です。</p></div>
<div class="paragraph">
<p>Windowsゲストでマルチキューを構成するには、
<a href="https://pve.proxmox.com/wiki/Windows_VirtIO_Drivers">Redhat VirtIO Ethernet
アダプタドライバ</a>をインストールした後、NICの設定を以下のように調整します。
デバイスマネージャを開き、「ネットワークアダプタ」下のNICを右クリックし、
「プロパティ」を選択します。次に「詳細設定」タブを開き、
左側のリストから「受信側スケーリング」を選択します。
「有効」に設定されていることを確認してください。次に、リスト内の
「RSSキューの最大数」に移動し、
VMのvCPU数に設定してください。設定が正しいことを確認したら、
「OK」をクリックして確定します。</p></div>
<div class="paragraph">
<p>なお、マルチキューパラメータを1より大きい値に設定すると、トラフィックの増加に伴いホストおよびゲストシステムのCPU負荷が増加します。このオプションは、仮想マシンがルーター、リバースプロキシ、またはロングポーリングを行う高負荷のHTTPサーバーとして動作するなど、多数の着信接続を処理する必要がある場合にのみ設定することをお勧めします。</p></div>
</div>
<div class="sect3">
<h4 id="qm_display">10.2.9. ディスプレイ
<a class="headerlink" href="#qm_display" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>QEMUはいくつかの種類のVGAハードウェアを仮想化できます。例としては以下が挙げられます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>std</strong>（デフォルト）は、Bochs VBE拡張機能を備えたカードをエミュレートします。</p>
</li>
<li>
<p>
<strong>cirrus</strong> はかつてデフォルトでしたが、非常に古いハードウェアモジュールをエミュレートするため、
その問題点をすべて引き継ぎます。この表示タイプは、本当に必要な場合のみご使用ください。<span class="footnote"><br>[<a href="https://www.kraxel.org/blog/2014/10/qemu-using-cirrus-considered-harmful/">https://www.kraxel.org</a></span>/blog/2014/10/qemu-using-cirrus-considered-harmful/
<span class="footnote">qemu: cirrusの使用は有害と考えられる]<br></span> 例えば、Windows XP 以前を使用する場合などです。</p>
</li>
<li>
<p>
<strong>vmware</strong> は、VMWare SVGA-II 互換アダプタです。</p>
</li>
<li>
<p>
<strong>qxl は</strong>、QXL パラバーチャライゼーション対応グラフィックカードです。
これを選択すると、VM 向けに<a href="https://www.spice-space.org/">SPICE</a>（リモートビューアプロトコル）も有効になります。</p>
</li>
<li>
<p>
<strong>virtio-gl</strong>（VirGLとも呼ばれる）<strong>は</strong>、仮想マシン内で使用される仮想3D GPUです。
特別な（高価な）モデルやドライバを必要とせず、ホストGPUを完全に占有することもありません。
これにより、ホストGPUへのワークロードのオフロードが可能となり、
複数のゲスト間やホストとの間で再利用が可能です。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">VirGLのサポートには、デフォルトではインストールされない追加ライブラリが必要です。これらは比較的大容量であること、また全てのGPUモデル/ベンダー向けにオープンソースとして提供されていないためです。ほとんどの環境では以下の操作で対応可能です：
<span class="monospaced">apt install libgl1 libegl1</span></td>
</tr></table>
</div>
</li>
</ul></div>
<div class="paragraph">
<p>仮想GPUに割り当てるメモリ量は、<em>memory</em>オプションの設定で変更可能です。これにより、特にSPICE/QXL環境において、仮想マシン内でより高い解像度を実現できます。</p></div>
<div class="paragraph">
<p>メモリは表示デバイスごとに確保されるため、SPICEでマルチモニターモード（例：デュアルモニター用の<span class="monospaced">qxl2</span>）を選択すると、以下の影響が生じます：</p></div>
<div class="ulist"><ul>
<li>
<p>
Windowsではモニターごとにデバイスが必要となります。そのため、<em>ホストタイプが</em>Windowsの何らかのバージョンである場合、Proxmox VEはモニターごとに追加デバイスをVMに割り当てます。各デバイスには指定されたメモリ量が割り当てられます。</p>
</li>
<li>
<p>
Linux VMでは、常に仮想モニターを追加で有効化できますが、
マルチモニターモードを選択すると、デバイスに割り当てられるメモリが
モニター数に応じて増加します。</p>
</li>
</ul></div>
<div class="paragraph">
<p><em>表示タイプとして</em> <span class="monospaced">serialX</span>を選択すると、VGA出力が無効化され、
Webコンソールが選択したシリアルポートにリダイレクトされます。
この場合、設定済みのディスプレイ<em>メモリ設定は</em>無視されます。</p></div>
<div class="paragraph">
<div class="title">VNCクリップボード</div><p><span class="monospaced">クリップボードを</span> <span class="monospaced">vncに設定</span>することで、VNCクリップボードを有効にできます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &amp;lt;vmid&amp;gt; -vga &amp;lt;displaytype&amp;gt;,clipboard=vnc</pre>
</div></div>
<div class="paragraph">
<p>クリップボード機能をご利用いただくには、まずSPICEゲストツールのインストールが必要です。
Debianベースのディストリビューションでは、<span class="monospaced">spice-vdagent</span>をインストールすることで実現できます。
その他のオペレーティングシステムでは、公式リポジトリで検索するか、
<a href="https://www.spice-space.org/download.html">https://www.spice-space.org/download.html</a>をご参照ください。</p></div>
<div class="paragraph">
<p>SPICEゲストツールのインストールが完了しましたら、VNCクリップボード機能（例：noVNCコンソールパネル内）をご利用いただけます。ただし、SPICE、virtio、またはvirglをご利用の場合、使用するクリップボードを選択する必要があります。これは、<span class="monospaced">クリップボード設定</span> <span class="monospaced">がvnc</span>に設定されている場合、デフォルト<strong>のSPICE</strong>クリップボード<strong>がVNC</strong>クリップボードに置き換えられるためです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">VNCクリップボードを有効化するため、QEMUはqemu-vdagentデバイスを使用するよう設定されています。
<a href="https://lists.gnu.org/archive/html/qemu-devel/2021-08/msg05393.html">現在、qemu-vdagentデバイスはライブマイグレーションをサポートしておりません。</a>
これは、VNCクリップボードが有効化されたVMは現時点ではライブマイグレーションできないことを意味します。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="qm_usb_passthrough">10.2.10. USBパススルー
<a class="headerlink" href="#qm_usb_passthrough" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>USBパススルーデバイスには2種類あります：</p></div>
<div class="ulist"><ul>
<li>
<p>
ホストUSBパススルー</p>
</li>
<li>
<p>
SPICE USBパススルー</p>
</li>
</ul></div>
<div class="paragraph">
<p>ホストUSBパススルーは、ホストのUSBデバイスを仮想マシンに提供する方式です。
これはベンダーIDとプロダクトIDによる方法、または
ホストバスとポートによる方法のいずれかで実現されます。</p></div>
<div class="paragraph">
<p>ベンダー/プロダクトIDは次のような形式です：<strong>0123:abcd</strong>
ここで<strong>0123は</strong>ベンダーID、<strong>abcdは</strong>プロダクトIDを表し、
同じUSBデバイスでも異なるIDを持つ場合があります。</p></div>
<div class="paragraph">
<p>バス/ポートは次のような形式です：<strong>1-2.3.4</strong>。ここで<strong>1は</strong>バス、<strong>2.3.4は</strong>ポートパスを表します。これはホストの物理ポート（USBコントローラの内部順序に依存します）を示しています。</p></div>
<div class="paragraph">
<p>仮想マシン起動時に構成にデバイスが存在しても、
ホストにそのデバイスが存在しない場合、仮想マシンは問題なく起動します。
ホストでデバイス/ポートが利用可能になると、
直ちにパススルーされます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">この種のUSBパススルーを使用する場合、ハードウェアはVMが現在稼働しているホストでのみ利用可能なため、
オンライン状態でVMを別のホストに移動することはできません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>2つ目のパススルー方式はSPICE USBパススルーです。仮想マシンに1つ以上のSPICE USBポートを追加すると、SPICEクライアントからローカルUSBデバイスを動的に仮想マシンへパススルーできます。入力デバイスやハードウェアドングルを一時的にリダイレクトする場合に有用です。</p></div>
<div class="paragraph">
<p>クラスタレベルでのデバイスマッピングも可能です。これにより、高可用性（HA）環境での適切な利用、ハードウェア変更の検出、非rootユーザーによる設定が可能となります。詳細については<a href="#resource_mapping">リソースマッピング</a>をご参照ください。</p></div>
</div>
<div class="sect3">
<h4 id="qm_bios_and_uefi">10.2.11. BIOS および UEFI
<a class="headerlink" href="#qm_bios_and_uefi" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>コンピューターを適切にエミュレートするためには、QEMUはファームウェアを使用する必要があります。
一般的なPCではBIOSまたは(U)EFIとして知られ、VM起動時の初期ステップとして実行されます。
基本的なハードウェア初期化を実行し、オペレーティングシステム向けに
ファームウェアおよびハードウェアへのインターフェースを提供する役割を担います。
デフォルトでは、QEMUはオープンソースのx86 BIOS実装<strong>であるSeaBIOS</strong>を使用します。
SeaBIOSは、ほとんどの標準的な設定において適切な選択肢です。</p></div>
<div class="paragraph">
<p>一部のオペレーティングシステム（Windows 11など）では、UEFI互換の実装の使用が求められる場合があります。そのような場合には、代わりにオープンソースのUEFI実装<strong>であるOVMF</strong>を使用する必要があります。<span class="footnote"><br>[OVMFプロジェクトについてはこちらをご覧ください<a href="https://github.com/tianocore/tianocore.github.io/wiki/OVMF">https://github.com/tianocore/tianocore.github.io/wiki/OVMF</a>]<br></span></p></div>
<div class="paragraph">
<p>SeaBIOS が起動に最適なファームウェアではない場合も
あります。たとえば、VGA パススルーを実行したい場合などです。<span class="footnote"><br>[Alex
ウィリアムソン氏がこの件について優れたブログ記事を
書いています<a href="https://vfio.blogspot.co.at/2014/08/primary-graphics-assignment-without-vga.html">https://vfio.blogspot.co.at/2014/08/primary-graphics-assignment-without-vga.html</a>]<br></span></p></div>
<div class="paragraph">
<p>OVMF を使用したい場合、考慮すべき点がいくつかあります。</p></div>
<div class="paragraph">
<p><strong>ブート順序などを</strong>保存するには、EFI ディスクが必要です。
このディスクはバックアップやスナップショットに含まれ、1 つしか存在できません。</p></div>
<div class="paragraph">
<p>このディスクは、以下のコマンドで作成できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &amp;lt;vmid&amp;gt; -efidisk0 &amp;lt;storage&amp;gt;:1,format=&amp;lt;format&amp;gt;,efitype=4m,pre-enrolled-keys=1</pre>
</div></div>
<div class="paragraph">
<p>ここで<strong>&amp;lt;storage&amp;gt;</strong>はディスクを配置するストレージ、
<strong>&amp;lt;format&amp;gt;</strong>はストレージがサポートするフォーマットです。
あるいは、VM のハードウェアセクションで
<em>[追加]</em>→<em>[EFI ディスク]</em>を選択し、
ウェブインターフェースから作成することも可能です。</p></div>
<div class="paragraph">
<p><strong>efitypeオプションは</strong>、使用するOVMFファームウェアのバージョンを指定します。
新規VMでは、Secure Bootをサポートし将来の開発を見据えた容量を確保するため、
<em>常に4mを選択してください</em>（GUIではこれがデフォルトです）。</p></div>
<div class="paragraph">
<p><strong>pre-enroll-keys は</strong>、EFIディスクにディストリビューション固有およびMicrosoft標準のセキュアブートキーを事前ロードするかどうかを指定します。また、デフォルトでセキュアブートを有効にします（ただし、VM内のOVMFメニューで無効化することは可能です）。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">既存の仮想マシン（<em>2m</em>efidiskをまだ使用しているもの）でセキュアブートを使用開始するには、efidiskを再作成する必要があります。これを行うには、古いものを削除し（<span class="monospaced">qm set &amp;lt;vmid&amp;gt; -delete efidisk0</span>）、上記の手順に従って新しいものを追加してください。これにより、OVMFメニューで設定したカスタム設定はリセットされます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>仮想ディスプレイ（VGAパススルーなし）でOVMFを使用する場合、
OVMFメニュー（起動中にESCキーを押すことでアクセス可能）でクライアント解像度を設定するか、
ディスプレイタイプとしてSPICEを選択する必要があります。</p></div>
</div>
<div class="sect3">
<h4 id="qm_tpm">10.2.12. 信頼できるプラットフォームモジュール（TPM）
<a class="headerlink" href="#qm_tpm" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><strong>トラステッド・プラットフォーム・モジュール</strong>（TPM）とは、暗号化キーなどの機密データを安全に保管し、システム起動の検証に耐タンパー性機能を提供するデバイスです。</p></div>
<div class="paragraph">
<p>特定のオペレーティングシステム（Windows 11など）では、物理マシンまたは仮想マシンに関わらず、
このようなデバイスが接続されていることが要求されます。</p></div>
<div class="paragraph">
<p>TPM は<strong>tpmstate</strong>ボリュームを指定することで追加されます。これは efidisk と同様に、
一度作成すると変更（削除のみ可能）できません。以下のコマンドで追加できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &amp;lt;vmid&amp;gt; -tpmstate0 &amp;lt;storage&amp;gt;:1,version=&amp;lt;version&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>ここで<strong>&amp;lt;storage&amp;gt;</strong>は状態を配置するストレージ、<strong>&amp;lt;version&amp;gt;</strong>は<em>v1.2</em>または<em>v2.0</em> を指定します。
また、Web インターフェースから追加することも可能です。
VM のハードウェアセクションで<em>[追加]</em>→<em>[TPM 状態]</em>を選択してください。</p></div>
<div class="paragraph">
<p><em>v2.0</em>TPM仕様はより新しく、サポートも優れています。<em>特定のv1.2</em>TPM実装が必要な場合を除き、こちらを優先されることをお勧めいたします。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">物理TPMと比較した場合、エミュレートされたTPMは実質的なセキュリティ上の利点<strong>を提供しません</strong>。TPMの本質的な意義は、TPM仕様で規定されたコマンド以外では容易にデータを変更できない点にあります。エミュレートデバイスではデータ保存が通常のボリューム上で行われるため、アクセス権限を持つ者であれば誰でも編集する可能性があります。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="qm_ivshmem">10.2.13. 仮想マシン間共有メモリ
<a class="headerlink" href="#qm_ivshmem" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ホストとゲスト間、あるいは複数のゲスト間でメモリを共有できる、
仮想マシン間共有メモリデバイス（<span class="monospaced">ivshmem</span>）を追加できます。</p></div>
<div class="paragraph">
<p>この種のデバイスを追加するには、<span class="monospaced">qm</span>: を使用します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &amp;lt;vmid&amp;gt; -ivshmem size=32,name=foo</pre>
</div></div>
<div class="paragraph">
<p>ここでサイズはMiB単位です。ファイルは
<span class="monospaced">/dev/shm/pve-shm-$name</span>（デフォルト名はvmid）に配置されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">現在、このデバイスは、それを使用している仮想マシンがシャットダウンまたは停止されるとすぐに削除されます。開いている接続は引き続き維持されますが、全く同じデバイスへの新規接続はできなくなります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>このデバイスの使用例として、Looking Glass
<span class="footnote"><br>[Looking Glass:<a href="https://looking-glass.io/">https://looking-glass.io/</a>]<br></span>プロジェクトが挙げられます。
これはホストとゲスト間で高性能かつ低遅延のディスプレイミラーリングを実現します。</p></div>
</div>
<div class="sect3">
<h4 id="qm_audio_device">10.2.14. オーディオデバイス
<a class="headerlink" href="#qm_audio_device" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>オーディオデバイスを追加するには、以下のコマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set &amp;lt;vmid&amp;gt; -audio0 device=&amp;lt;device&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>サポートされているオーディオデバイスは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">ich9-intel-hda</span>: Intel HD Audio Controller、ICH9をエミュレート</p>
</li>
<li>
<p>
<span class="monospaced">intel-hda</span>: Intel HD Audio Controller、ICH6をエミュレート</p>
</li>
<li>
<p>
<span class="monospaced">AC97</span>: オーディオコーデック '97、Windows XPなどの古いオペレーティングシステムで有用です</p>
</li>
</ul></div>
<div class="paragraph">
<p>利用可能なバックエンドは以下の2種類です：</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>spice</em></p>
</li>
<li>
<p>
<em>なし</em></p>
</li>
</ul></div>
<div class="paragraph">
<p><em>spice</em>バックエンドは<a href="#qm_display">SPICE</a>と組み合わせて使用でき、<em>none</em>バックエンドは、特定のソフトウェア動作のために VM 内でオーディオデバイスが必要な場合に有用です。ホストの物理オーディオデバイスを使用するには、デバイスパススルー（<a href="#qm_pci_passthrough">PCI パススルーおよび</a><a href="#qm_usb_passthrough">USB パススルー</a>を参照）をご利用ください。Microsoft の RDP などのリモートプロトコルには、サウンド再生のオプションが用意されています。</p></div>
</div>
<div class="sect3">
<h4 id="qm_virtio_rng">10.2.15. VirtIO RNG
<a class="headerlink" href="#qm_virtio_rng" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>RNG（乱数生成器）とは、システムにエントロピー（<em>ランダム性</em>）を提供するデバイスです。仮想ハードウェアRNGを使用することで、ホストシステムからゲストVMへこのエントロピーを供給できます。これにより、特にゲストの起動プロセス中に発生する可能性のあるエントロピー不足の問題（十分なエントロピーが得られず、システムの動作が遅くなったり問題が発生したりする状況）を回避できます。</p></div>
<div class="paragraph">
<p>VirtIOベースのエミュレートRNGを追加するには、以下のコマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set &amp;lt;vmid&amp;gt; -rng0 source=&amp;lt;source&amp;gt;[,max_bytes=X,period=Y]</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">source</span>はホスト上でエントロピーを読み取る場所を指定し、以下のいずれかである必要があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">/dev/urandom</span>: 非ブロッキングカーネルエントロピープール（推奨）</p>
</li>
<li>
<p>
<span class="monospaced">/dev/random</span>: ブロック型カーネルプール（推奨されません。ホストシステムでエントロピー枯渇を引き起こす可能性があります）</p>
</li>
<li>
<p>
<span class="monospaced">/dev/hwrng</span>: ホストに接続されたハードウェア乱数生成器（RNG）をパススルーします（複数利用可能な場合、
 <span class="monospaced"> /sys/devices/virtual/misc/hw_random/rng_current</span>で選択されたものが使用されます）</p>
</li>
</ul></div>
<div class="paragraph">
<p><span class="monospaced">max_bytes</span>および<span class="monospaced">period</span>パラメータで制限を指定できます。これらは「<span class="monospaced">1 期間</span>（ミリ秒単位）あたり<span class="monospaced">max_bytes</span>」として解釈されます。ただし、これは直線的な関係を表すものではありません。例えば 1024B/1000ms の場合、1 秒間隔で最大 1 KiB のデータが利用可能になることを意味し、1 秒間に 1 KiB がゲストにストリーミングされることを意味するわけではありません。したがって、<span class="monospaced">期間を</span>短縮することで、ゲストシステムへのエントロピー注入速度を向上させることが可能です。</p></div>
<div class="paragraph">
<p>デフォルトでは、制限は1000ミリ秒あたり1024バイト（1 KiB/秒）に設定されています。ゲストがホストのリソースを過剰に使用するのを防ぐため、常にリミッターを使用されることをお勧めいたします。必要に応じて、<span class="monospaced">max_bytesに</span> <em>0の</em>値を設定することで、すべての制限を無効にすることができます。</p></div>
</div>
<div class="sect3">
<h4 id="qm_virtiofs">10.2.16. Virtiofs
<a class="headerlink" href="#qm_virtiofs" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Virtiofsは仮想環境向けに設計された共有ファイルシステムです。ホスト上で利用可能なディレクトリツリーを仮想マシン内にマウントすることで共有を可能とします。ネットワークスタックを使用せず、ソースファイルシステムと同等のパフォーマンスとセマンティクスを提供することを目的としています。</p></div>
<div class="paragraph">
<p>virtiofs を使用するには、バックグラウンドで<a href="https://gitlab.com/virtio-fs/virtiofsd">virtiofsd</a>デーモンを実行する必要があります。Proxmox VE では、virtiofs マウントを使用して VM を起動すると、自動的に実行されます。</p></div>
<div class="paragraph">
<p>カーネル 5.4 以降を搭載した Linux VM はデフォルトで virtiofs をサポートしております（<a href="https://www.kernelconfig.io/CONFIG_VIRTIO_FS">virtiofs カーネルモジュール</a>）。ただし、一部の機能にはより新しいカーネルが必要となります。</p></div>
<div class="paragraph">
<p>virtiofs を使用するには、Proxmox VE ホストに virtiofsd がインストールされていることをご確認ください:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt install virtiofsd</pre>
</div></div>
<div class="paragraph">
<p>Windows VM で virtiofs を利用する方法については、
<a href="https://github.com/virtio-win/kvm-guest-drivers-windows/wiki/Virtiofs:-Shared-file-system">ガイド</a>
が用意されています。</p></div>
<div class="sect4">
<h5 id="_known_limitations">既知の制限事項
<a class="headerlink" href="#_known_limitations" title="Permalink to this heading"></a></h5>
<div class="ulist"><ul>
<li>
<p>
virtiofsd がクラッシュした場合、そのマウントポイントは仮想マシンが完全に停止するまで
  仮想マシン内でハング状態となります。</p>
</li>
<li>
<p>
virtiofsd が応答しない場合、VM 内でマウントがハングする可能性があります。これは、
  到達不能な NFS と同様の状況です。</p>
</li>
<li>
<p>
virtiofs との組み合わせではメモリホットプラグは機能しません（同様にアクセスが停止する結果となります）。</p>
</li>
<li>
<p>
ライブマイグレーション、スナップショット、ハイバネートなどのメモリ関連機能は、
virtiofsデバイスではご利用いただけません。</p>
</li>
<li>
<p>
Windows は virtiofs のコンテキストにおける ACL を認識できません。従いまして、Windows VM に対して ACL を公開しないでください。そうしないと、virtiofs デバイスが VM 内から見えなくなります。</p>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="_add_mapping_for_shared_directories">共有ディレクトリのマッピング追加
<a class="headerlink" href="#_add_mapping_for_shared_directories" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>共有ディレクトリのマッピングを追加するには、<a href="#resource_mapping">リソースマッピングセクション</a>に記載されている通り、
<span class="monospaced">pvesh</span>を使用して API を直接操作できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvesh create /cluster/mapping/dir --id dir1 \
    --map node=node1,path=/path/to/share1 \
    --map node=node2,path=/path/to/share2 \</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_add_virtiofs_to_a_vm">仮想マシンへのvirtiofsの追加<a class="headerlink" href="#_add_virtiofs_to_a_vm" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>virtiofs を使用してディレクトリを共有するには、VM 設定にパラメータ<span class="monospaced">virtiofs&amp;lt;N&amp;gt;</span>（N は 0 から 9 の間の任意の数字）を追加し、リソースマッピングで設定済みのディレクトリ ID（dirid）を使用します。さらに、<span class="monospaced">キャッシュオプションを</span>
要件に応じて<span class="monospaced">always</span>、<span class="monospaced">never</span>、<span class="monospaced">metadata</span>、<span class="monospaced">またはauto</span>（デフォルト:<span class="monospaced">auto</span>）に設定できます。
各キャッシュモードの動作については<a href="https://lwn.net/Articles/774495/">、こちらの「Caching Modes」セクションをご</a>参照ください。
virtiofsdはACLおよびxattrパススルーをサポートしており（expose-aclおよびexpose-xattrオプションで有効化可能）、
ゲストが基盤となるホストファイルシステムのACLやxattrにアクセスできるようになります。</p></div>
<div class="paragraph">
<p><span class="monospaced">virtiofsd</span>は ACL および xattr のパススルーをサポートしており（<span class="monospaced">expose-acl</span>および<span class="monospaced">expose-xattr</span>オプションで有効化可能）、基盤となるホストファイルシステムがこれらをサポートしている場合、ゲストが ACL および xattr にアクセスすることを可能にします。ただし、これらはゲストファイルシステムとも互換性がある必要があります（例：ほとんどの Linux ファイルシステムは ACL をサポートしますが、Windows ファイルシステムはサポートしません）。</p></div>
<div class="paragraph">
<p><span class="monospaced">expose-acl</span>オプションは自動的に<span class="monospaced">expose-xattr</span> を意味します。つまり、<span class="monospaced">expose-acl が</span> <span class="monospaced">1</span> に設定されている場合、<span class="monospaced">expose-xattr を</span> <span class="monospaced">0</span>に設定しても違いはありません。</p></div>
<div class="paragraph">
<p>virtiofs に<span class="monospaced">O_DIRECT</span>フラグを有効にしたい場合は、<span class="monospaced">direct-io</span>パラメータを<span class="monospaced">1</span>に設定できます（デフォルト:<span class="monospaced">0</span>）。これによりパフォーマンスは低下しますが、アプリケーションが独自のキャッシュ処理を行う場合に有用です。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set &amp;lt;vmid&amp;gt; -virtiofs0 dirid=&amp;lt;dirid&amp;gt;,cache=always,direct-io=1
qm set &amp;lt;vmid&amp;gt; -virtiofs1 &amp;lt;dirid&amp;gt;,cache=never,expose-xattr=1
qm set &amp;lt;vmid&amp;gt; -virtiofs2 &amp;lt;dirid&amp;gt;,expose-acl=1</pre>
</div></div>
<div class="paragraph">
<p>ゲスト VM 内で Linux カーネルの virtiofs ドライバを使用して virtiofs を一時的にマウントするには、ゲスト内で以下のコマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>mount -t virtiofs &amp;lt;dirid&amp;gt; &amp;lt;マウントポイント&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>永続的なvirtiofsマウントを実現するには、fstabエントリを作成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>&amp;lt;dirid&amp;gt; &amp;lt;マウントポイント&amp;gt; virtiofs rw,relatime 0 0</pre>
</div></div>
<div class="paragraph">
<p>現在のノード上のパスに関連付けられたdiridは、マウントタグ（ゲスト上でデバイスをマウントする際に使用する名前）としても使用されます。</p></div>
<div class="paragraph">
<p>利用可能なvirtiofsdパラメータの詳細については、
<a href="https://gitlab.com/virtio-fs/virtiofsd">GitLab virtiofsdプロジェクトページ</a>をご参照ください。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="qm_bootorder">10.2.17. デバイスの起動順序
<a class="headerlink" href="#qm_bootorder" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>QEMUはゲストに対して、どのデバイスから起動すべきか、またその順序を指示できます。
これは設定ファイル内の<span class="monospaced">boot</span>プロパティで指定可能です。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>boot: order=scsi0;net0;hostpci0</pre>
</div></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-edit-bootorder.png">
<img src="images/screenshot/gui-qemu-edit-bootorder.png" alt="screenshot/gui-qemu-edit-bootorder.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>この設定により、ゲストOSはまず<span class="monospaced">ディスクscsi0</span>からの起動を試みます。
これが失敗した場合、次にネットワークブート（<span class="monospaced">net0</span>）を試行し、
さらに失敗した場合には、最終手段としてパススルーされたPCIeデバイス（NVMeの場合はディスクとして認識、
それ以外の場合はオプションROMへの起動を試行）からの起動を試みます。</p></div>
<div class="paragraph">
<p>GUIでは、ドラッグ＆ドロップエディタを使用して起動順序を指定でき、チェックボックスで特定のデバイスを起動対象として有効化または無効化できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">ゲストOSが複数のディスクを使用してOSを起動したりブートローダーをロードする場合、
ゲストが起動できるようにするためには、それらのディスク全てが<em>起動可能として</em>マークされている必要があります（つまり、チェックボックスが有効になっているか、設定のリストに表示されている必要があります）。
これは、最近のSeaBIOSおよびOVMFのバージョンでは、<em>起動可能として</em>マークされているディスクのみを初期化するためです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>いずれの場合も、リストに表示されないデバイスやチェックが外れているデバイスであっても、ゲストのオペレーティングシステムが起動し初期化を完了すれば、ゲスト側で利用可能となります。<em>ブータブル</em>フラグはゲストのBIOSとブートローダーにのみ影響します。</p></div>
</div>
<div class="sect3">
<h4 id="qm_startup_and_shutdown">10.2.18. 仮想マシンの自動起動およびシャットダウン
<a class="headerlink" href="#qm_startup_and_shutdown" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>仮想マシンを作成後、ホストシステムの起動時に自動的に起動させたい場合、
ウェブインターフェースの仮想マシン<em>「オプション」タブで</em> <em>「起動時に開始」</em>を選択するか、
以下のコマンドで設定してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &amp;lt;vmid&amp;gt; -onboot 1</pre>
</div></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-edit-start-order.png">
<img src="images/screenshot/gui-qemu-edit-start-order.png" alt="screenshot/gui-qemu-edit-start-order.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<div class="title">起動およびシャットダウン順序</div><p>場合によっては、仮想マシンの起動順序を微調整する必要が生じることがあります。例えば、ある仮想マシンが他のゲストシステムに対してファイアウォールやDHCPを提供している場合などが該当します。このためには、以下のパラメータをご利用いただけます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>起動/シャットダウン順序</strong>：起動順序の優先度を定義します。例えば、VMを最初に起動させたい場合は1に設定します（シャットダウン時は逆の起動順序を使用するため、起動順序1のマシンは最後にシャットダウンされます）。ホスト上で複数のVMに同じ順序が定義されている場合、<em>VMIDの</em>昇順で追加的に並べ替えられます。</p>
</li>
<li>
<p>
<strong>起動遅延</strong>: この仮想マシンの起動と、その後起動する仮想マシンとの間隔を定義します。
例えば、他の仮想マシンの起動を240秒間待機したい場合は、240と設定してください。</p>
</li>
<li>
<p>
<strong>シャットダウンタイムアウト</strong>: Proxmox VEがシャットダウンコマンドを発行した後、仮想マシンがオフラインになるまで待機する秒数を定義します。デフォルト値は180に設定されており、Proxmox VEはシャットダウン要求を発行し、マシンがオフラインになるまで180秒間待機します。タイムアウト後もマシンがオンラインのままの場合、強制的に停止されます。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">HAスタックで管理されている仮想マシンは、現在のところ<em>起動時の自動起動設定や</em><em>起動順序オプション</em>の対象外となります。これらの仮想マシンは、HAマネージャー自体が起動と停止を管理するため、起動/シャットダウン処理の対象から除外されます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>起動/シャットダウン順序パラメータが設定されていないマシンは、
パラメータが設定されているマシンよりも常に後から起動します。
なお、このパラメータは同一ホスト上で動作する仮想マシン間でのみ有効であり、
クラスター全体には適用されません。</p></div>
<div class="paragraph">
<p>ホスト起動と最初の仮想マシンの起動の間に遅延が必要な場合は、
「<a href="#first_guest_boot_delay">Proxmox VE ノード管理</a>」のセクションをご参照ください。</p></div>
</div>
<div class="sect3">
<h4 id="qm_qemu_agent">10.2.19. QEMU ゲストエージェント
<a class="headerlink" href="#qm_qemu_agent" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>QEMUゲストエージェントは、仮想マシン内で動作するサービスであり、
ホストとゲスト間の通信チャネルを提供します。情報の交換に使用され、
ホストがゲストに対してコマンドを発行することを可能にします。</p></div>
<div class="paragraph">
<p>例えば、VM概要パネルに表示されるIPアドレスはゲストエージェント経由で取得されます。</p></div>
<div class="paragraph">
<p>また、バックアップを開始する際には、ゲストエージェントを介してゲストに指示が伝えられ、
<em>fs-freeze</em>および<em>fs-thaw</em>コマンドによって未処理の書き込みを同期させます。</p></div>
<div class="paragraph">
<p>ゲストエージェントを正常に動作させるには、以下の手順が必要です：</p></div>
<div class="ulist"><ul>
<li>
<p>
ゲストにエージェントをインストールし、正常に動作していることをご確認ください。</p>
</li>
<li>
<p>
Proxmox VE においてエージェント経由の通信を有効にしてください</p>
</li>
</ul></div>
<div class="sect4">
<h5 id="_install_guest_agent">ゲストエージェントのインストール
<a class="headerlink" href="#_install_guest_agent" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ほとんどの Linux ディストリビューションでは、ゲストエージェントが利用可能です。
パッケージ名は通常<span class="monospaced">qemu-guest-agent</span> となります。</p></div>
<div class="paragraph">
<p>Windows では、<a href="https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/stable-virtio/virtio-win.iso">Fedora VirtIO ドライバ ISO</a> からインストールできます。</p></div>
</div>
<div class="sect4">
<h5 id="qm_qga_enable">ゲストエージェント通信の有効化
<a class="headerlink" href="#qm_qga_enable" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Proxmox VE とゲストエージェント間の通信は、仮想マシンの<strong>オプション</strong>パネルで有効化できます。変更を反映させるには、仮想マシンの再起動が必要です。</p></div>
</div>
<div class="sect4">
<h5 id="qm_qga_auto_trim">QGAを使用した自動TRIM
<a class="headerlink" href="#qm_qga_auto_trim" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><em>「ゲストトリムの実行」オプション</em>を有効化することが可能です。これを有効にすると、
Proxmox VEは以下の操作後にゲストに対してトリムコマンドを発行します。
これらの操作はストレージにゼロを書き込む可能性があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
ディスクを別のストレージに移動する</p>
</li>
<li>
<p>
ローカルストレージを持つ別のノードへの仮想マシンのライブマイグレーション</p>
</li>
</ul></div>
<div class="paragraph">
<p>シンプロビジョニングされたストレージでは、これにより未使用領域を解放できる場合があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Linux の ext4 には注意点がございます。これは重複した TRIM 要求を発行しないよう、メモリ内最適化を使用しているためです。ゲストは基盤となるストレージの変更を認識しないため、最初のゲスト TRIM のみが期待通りに動作します。その後、次の再起動までは、それ以降に変更されたファイルシステムの一部のみが考慮されます。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="qm_qga_fsfreeze">バックアップ時のファイルシステム凍結・解凍
<a class="headerlink" href="#qm_qga_fsfreeze" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>デフォルトでは、バックアップ実行時に<em>fs-freeze</em>QEMUゲストエージェントコマンドを介してゲストファイルシステムが同期され、一貫性が保たれます。</p></div>
<div class="paragraph">
<p>Windowsゲストでは、一部のアプリケーションがWindows VSS（ボリュームシャドウコピーサービス）レイヤーにフックすることで一貫性のあるバックアップを独自に処理する場合があり、<em>fs-freezeの実行が</em>これに干渉する可能性があります。例えば、特定のSQL Server<em>でfs-freeze</em>を呼び出すと、VSSがSQL Writer VSSモジュールを特定のモードで呼び出し、差分バックアップにおけるSQL Serverのバックアップチェーンが破綻する事例が確認されています。</p></div>
<div class="paragraph">
<p>このような状況に対処するには、2つの選択肢がございます。</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
QEMUゲストエージェントの設定を変更し、他のVSSユーザーと競合しない別のVSSバリアントを使用してください。詳細については<a href="https://pve.proxmox.com/wiki/VM_Backup_Consistency">Proxmox VEのWikiをご参照</a>ください。</p>
</li>
<li>
<p>
あるいは、バックアップ時に凍結・解凍サイクルを実行しないよう、Proxmox VE を設定することも可能です。<span class="monospaced">凍結ファイルシステムをバックアップ時に凍結する</span>QGA オプションを<span class="monospaced">0</span> に設定してください。これは GUI からも、「<em>一貫性のためにバックアップ時にゲストファイルシステムを凍結/解凍する</em>」オプションで実行できます。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションを無効にすると、
ファイルシステムに不整合が生じたバックアップが作成される可能性があります。
そのため、ゲスト内のQEMUゲストエージェント設定を適応させる方法が
推奨されます。</td>
</tr></table>
</div>
</li>
</ol></div>
</div>
<div class="sect4">
<h5 id="_troubleshooting_2">トラブルシューティング
<a class="headerlink" href="#_troubleshooting_2" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<div class="title">仮想マシンをシャットダウンしない場合</div><p>ゲストエージェントがインストールされ、実行されていることをご確認ください。</p></div>
<div class="paragraph">
<p>ゲストエージェントが有効になると、Proxmox VE は<em>シャットダウンなどの</em>電源コマンドをゲストエージェント経由で送信します。ゲストエージェントが動作していない場合、コマンドは正常に実行されず、シャットダウンコマンドはタイムアウトします。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="qm_spice_enhancements">10.2.20. SPICE の機能強化
<a class="headerlink" href="#qm_spice_enhancements" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>SPICEの拡張機能は、リモートビューアの操作性を向上させるオプション機能です。</p></div>
<div class="paragraph">
<p>GUI 経由で有効にするには、仮想マシンの<strong>オプション</strong>パネルに移動してください。CLI 経由で有効にするには、以下のコマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set &amp;lt;vmid&amp;gt; -spice_enhancements foldersharing=1,videostreaming=all</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">これらの機能をご利用いただくには、仮想マシンの<a href="#qm_display"><strong>表示方式を</strong></a>
SPICE (qxl) に設定する必要があります。</td>
</tr></table>
</div>
<div class="sect4">
<h5 id="_folder_sharing">フォルダ共有
<a class="headerlink" href="#_folder_sharing" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ゲストとローカルフォルダーを共有します。ゲスト側には<span class="monospaced">spice-webdavd</span>デーモンをインストールする必要があります。これにより、共有フォルダーが<a href="http://localhost:9843">http://localhost:9843</a> に配置されたローカル WebDAV サーバー経由で利用可能になります。</p></div>
<div class="paragraph">
<p>Windowsゲストの場合、<em>Spice WebDAVデーモンのインスト</em>ーラーは
<a href="https://www.spice-space.org/download.html#windows-binaries">公式SPICEウェブサイトから</a>
ダウンロード可能です。</p></div>
<div class="paragraph">
<p>ほとんどのLinuxディストリビューションには<span class="monospaced">spice-webdavd</span>というパッケージが存在し、インストールが可能です。</p></div>
<div class="paragraph">
<p>Virt-Viewer（リモートビューア）でフォルダを共有するには、<em>[ファイル] → [設定]</em> を選択してください。
共有するフォルダを選択し、チェックボックスを有効にしてください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">フォルダ共有機能は、現時点ではLinux版Virt-Viewerでのみ動作いたします。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">実験的機能です！現在、この機能は安定して動作しません。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="_video_streaming">ビデオストリーミング
<a class="headerlink" href="#_video_streaming" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>高速更新領域はビデオストリームにエンコードされます。以下の2つのオプションが存在します：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>all</strong>: 高速リフレッシュ領域はすべてビデオストリームにエンコードされます。</p>
</li>
<li>
<p>
<strong>filter</strong>: ビデオストリーミングの適用可否を判断する追加フィルターが使用されます（現在は小さなウィンドウ表面のみがスキップ対象です）。</p>
</li>
</ul></div>
<div class="paragraph">
<p>ビデオストリーミングを有効にするべきか、またどのオプションを選択すべきかについて、
一般的な推奨事項は提示できません。具体的な状況によって結果が異なる場合があります。</p></div>
</div>
<div class="sect4">
<h5 id="_troubleshooting_3">トラブルシューティング
<a class="headerlink" href="#_troubleshooting_3" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<div class="title">共有フォルダが表示されない場合</div><p>ゲストOSでWebDAVサービスが有効化され、実行されていることをご確認ください。Windowsでは「<em>Spice webdav proxy</em>」、Linuxでは「<em>spice-webdavd」</em>と呼ばれますが、ディストリビューションによって名称が異なる場合があります。</p></div>
<div class="paragraph">
<p>サービスが稼働している場合、ゲストのブラウザで
<a href="http://localhost:9843">http://localhost:9843</a>を開き、WebDAVサーバーを確認してください。</p></div>
<div class="paragraph">
<p>SPICEセッションを再起動すると改善する場合がございます。</p></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="qm_migration">
<span>10.3.</span>移行
<a class="headerlink" href="#qm_migration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-migrate.png">
<img src="images/screenshot/gui-qemu-migrate.png" alt="screenshot/gui-qemu-migrate.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>クラスタ環境をご利用の場合、仮想マシンを別のホストへ移行することができます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm migrate &amp;lt;vmid&amp;gt; &amp;lt;target&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>これには一般的に二つの方法がございます</p></div>
<div class="ulist"><ul>
<li>
<p>
オンライン移行（別名：ライブ移行）</p>
</li>
<li>
<p>
オフライン移行</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_online_migration">10.3.1. オンライン移行
<a class="headerlink" href="#_online_migration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>仮想マシンが稼働中で、ローカルにバインドされたリソース（パススルーデバイスなど）が設定されていない場合、<span class="monospaced">qm migration</span>コマンドの実行時に<span class="monospaced">--online</span>フラグを指定することでライブマイグレーションを開始できます。Web インターフェースでは、仮想マシンが稼働中の場合、デフォルトでライブマイグレーションが選択されます。</p></div>
<div class="sect4">
<h5 id="_how_it_works">動作原理
<a class="headerlink" href="#_how_it_works" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>オンライン移行ではまず、ターゲットホスト上で「<em>incoming</em>」フラグ付きの新しいQEMUプロセスを開始します。このプロセスはゲストvCPUを一時停止したまま基本初期化のみを実行し、その後ソース仮想マシンのゲストメモリおよびデバイス状態データストリームを待機します。
ディスクなどのその他リソースは、VMの実行時状態移行開始前に共有済みか既に送信済みです。したがって転送対象はメモリ内容とデバイス状態のみとなります。</p></div>
<div class="paragraph">
<p>この接続が確立されると、ソースはメモリ内容をターゲットへ非同期的に送信し始めます。ソース側のゲストメモリが変更された場合、該当セクションは変更済みとしてマークされ、ゲストメモリデータを送信するための追加のパスが実行されます。
このループは、稼働中のソースVMと受信側ターゲットVM間のデータ差分が
数ミリ秒で送信可能な程度に小さくなるまで繰り返されます。
その時点でソースVMは完全に一時停止でき、ユーザーやプログラムが
停止を感知することなく、残りのデータをターゲットに送信し、
その後ターゲットVMのCPUを再開して、1秒を大幅に下回る時間で
新たな稼働VMとすることができます。</p></div>
</div>
<div class="sect4">
<h5 id="_requirements">要件
<a class="headerlink" href="#_requirements" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ライブマイグレーションを機能させるには、以下の要件があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
VMには移行できないローカルリソースは存在しません。例えば、
PCIやUSBデバイスなどのパススルーデバイスは現在ライブマイグレーションを妨げます。
一方、ローカルディスクはターゲットに送信することで問題なく移行可能です。</p>
</li>
<li>
<p>
ホストは同一の Proxmox VE クラスター内に配置されています。</p>
</li>
<li>
<p>
ホスト間には正常に機能する（かつ信頼性の高い）ネットワーク接続が確立されています。</p>
</li>
<li>
<p>
ターゲットホストには、Proxmox VEパッケージの同一バージョンまたは上位バージョンがインストールされている必要があります。逆方向でも動作する場合がありますが、保証はできません。</p>
</li>
<li>
<p>
ホストは、同一ベンダー製で同等の性能を持つCPUを搭載している必要があります。異なるベンダー製の場合、実際のモデルや設定されたVMのCPUタイプによっては<strong>動作する可能性もありますが</strong>、保証はできません。そのため、本番環境でこのような構成を展開される前に、必ずテストを行ってください。</p>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="_conntrack_state_migration">接続追跡状態の移行<a class="headerlink" href="#_conntrack_state_migration" title="Permalink to this heading"></a></h5>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">接続追跡状態の移行はベストエフォート方式のみとみなされ、ネットワーク設定に大きく依存するため、正常に動作しない可能性があります。例えば、ホスト上で<a href="#sysadmin_network_masquerading">送信元アドレスマスカレード（SNAT）</a>を使用している設定では、おそらく<strong>動作しません</strong>。</td>
</tr></table>
</div>
<div class="paragraph">
<p>接続追跡（Conntrack）は、個々の接続を追跡することでステートフルファイアウォールを可能にするLinuxカーネルの仕組みです。稼働中のVMをライブマイグレーションする際、アクティブな入出力接続は、VMがターゲットホスト上で動作を開始した直後に中断される<strong>可能性があります</strong>。これは、新しいホストノードが同じ接続追跡エントリを持たないため、ファイアウォールがパケットをドロップする可能性があるためです。</p></div>
<div class="paragraph">
<p>接続追跡状態移行では、ライブ移行対象のVMに関するホスト上の全接続追跡エントリをターゲットノードへコピーし、その後ソースノードの接続追跡テーブルから移行済みエントリを消去します。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_offline_migration">10.3.2. オフライン移行
<a class="headerlink" href="#_offline_migration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ローカルリソースが利用可能な場合、すべてのディスクが両ホストで定義されたストレージ上にある限り、
オフラインでの仮想マシン移行も可能です。
この場合、移行プロセスではオンライン移行と同様に、ネットワーク経由でディスクをターゲットホストへコピーします。
ハードウェアパススルー設定については、ターゲットホスト上のデバイス位置に合わせて調整が必要となる場合がありますのでご注意ください。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="qm_copy_and_clone">
<span>10.4. コピーとクローン</span>
<a class="headerlink" href="#qm_copy_and_clone" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-full-clone.png">
<img src="images/screenshot/gui-qemu-full-clone.png" alt="screenshot/gui-qemu-full-clone.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>仮想マシンのインストールは通常、オペレーティングシステムベンダー提供のインストールメディア（CD-ROM）を使用して行われます。OSによっては、この作業に時間がかかる場合があり、避けたいと思うかもしれません。</p></div>
<div class="paragraph">
<p>同一タイプの仮想マシンを多数展開する簡単な方法は、既存の仮想マシンを複製することです。
このような複製を「<em>クローン」</em>と呼び、<em>リンククローンと</em> <em>フルクローン</em>に区別します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
完全クローン</dt>
<dd>
<p>
このコピーの結果、独立した仮想マシンが作成されます。
新しい仮想マシンは元の仮想マシンとストレージリソースを一切共有しません。</p>
<div class="paragraph">
<p><strong>ターゲットストレージ</strong>を選択することが可能です。これにより、
仮想マシンを全く異なるストレージへ移行することが可能です。また、
ストレージドライバが複数のフォーマットをサポートしている場合、
ディスク<strong>イメージのフォーマット</strong>を変更することも可能です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">完全クローンは、すべての VM イメージデータを読み取りコピーする必要があります。
これは通常、リンククローンを作成するよりも大幅に時間がかかります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>一部のストレージタイプでは特定の<strong>スナップショットの</strong>コピーが可能です。
デフォルトでは<em>現在の</em>VMデータが対象となります。
これは最終的なコピーに元のVMからの追加スナップショットが
一切含まれないことを意味します。</p></div>
</dd>
<dt class="hdlist1">
リンクドクローン</dt>
<dd>
<p>
最新のストレージドライバは、高速なリンクドクローンを生成する方法をサポートしております。
このクローンは書き込み可能なコピーであり、初期内容は元のデータと同一です。
リンクドクローンの作成はほぼ瞬時に行われ、初期段階では追加のスペースを消費しません。</p>
<div class="paragraph">
<p>これらは<em>リンクされている</em>と呼ばれます。新しいイメージは依然として元のイメージを参照しているためです。変更されていないデータブロックは元のイメージから読み込まれますが、変更は新しい場所から書き込まれ（その後読み込まれます）。この技術は<em>コピー・オン・ライト</em>と呼ばれます。</p></div>
<div class="paragraph">
<p>この方式では元のボリュームが読み取り専用であることが必要です。Proxmox VEでは、
任意の仮想マシンを読み取り専用<a href="#qm_templates">テンプレート</a>に変換することが可能です。
このようなテンプレートは、後でリンククローンを効率的に作成するために使用できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">リンク済みクローンが存在する間は、
元のテンプレートを削除することはできません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>リンクドクローンでは<strong>ターゲットストレージ</strong>の変更はできません。
これはストレージ内部の機能であるためです。</p></div>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ターゲットノード</strong>オプションを使用すると、
別のノード上に新しいVMを作成できます。唯一の制限事項は、
VMが共有ストレージ上に存在し、かつそのストレージが
ターゲットノードでも利用可能であることです。</p></div>
<div class="paragraph">
<p>リソース競合を回避するため、すべてのネットワークインターフェースのMACアドレスはランダム化され、
VM BIOS（smbios1）設定用に新しい<em>UUID</em>が生成されます。</p></div>
</div>
<div class="sect2">
<h3 id="qm_templates">
<span>10.5. 仮想マシンテンプレート</span>
<a class="headerlink" href="#qm_templates" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>仮想マシンをテンプレートに変換することが可能です。
このようなテンプレートは読み取り専用となり、
リンクドクローンを作成するためにご利用いただけます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">テンプレートの起動は、ディスクイメージを変更することになるため、
実行できません。テンプレートを変更したい場合は、
リンクされたクローンを作成し、それを変更してください。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_vm_generation_id">
<span>10.6. VM 生成</span>ID
<a class="headerlink" href="#_vm_generation_id" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE は仮想マシン向け Virtual Machine Generation ID (<em>vmgenid</em>)<span class="footnote"><br>[</span>公式
<span class="footnote"><em>vmgenid</em>仕様
<a href="https://docs.microsoft.com/en-us/windows/desktop/hyperv_v2/virtual-machine-generation-identifier">https://docs.microsoft.com/en-us/windows/desktop/hyperv_v2/virtual-machine-generation-identifier</a>]<br></span>をサポートしております。
これはゲスト OS が、バックアップの復元やスナップショットのロールバックなど、
タイムシフトを引き起こすイベントを検出するために使用できます。</p></div>
<div class="paragraph">
<p>新しい仮想マシンを作成する際には、<em>vmgenid</em>が自動的に生成され、
その設定ファイルに保存されます。</p></div>
<div class="paragraph">
<p>既存の<em>仮想マシンにvmgenidを作成・追加するには</em>、特別な値「1」を指定してProxmox VEに自動生成させるか、<span class="footnote"><br>[オンラインGUID生成ツール<a href="http://guid.one/">http://guid.one/</a>]<br></span> <em>を使用してUUID</em>を手動で設定し、
その値を指定します。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -vmgenid 1
# qm set VMID -vmgenid 00000000-0000-0000-0000-000000000000</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">既存の仮想<em>マシンへのvmgenidデバイスの</em>初回追加は、
スナップショットのロールバックやバックアップの復元などと同様の効果をもたらす可能性があります。
仮想マシンがこれを世代変更と解釈する可能性があるためです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>稀<em>にvmgenidメカニズムが不要な</em>場合、VM作成時に値として「0」を指定するか、
設定ファイルから後からプロパティを削除することも可能です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -delete vmgenid</pre>
</div></div>
<div class="paragraph">
<p><em>vmgenid</em>の最も代表的な使用例は、新しい Microsoft Windows オペレーティングシステムです。
これらは、時間依存性のあるサービスやレプリケーションサービス（データベースやドメインコントローラーなど）における問題を回避するために vmgenid を使用します。
<span class="footnote"><br>[<a href="https://docs.microsoft.com/en-us/windows-server/identity/ad-ds/get-started/virtual-dc/virtualized-domain-controller-architecture">https://docs.microsoft.com/en-us/windows-server/identity/ad-ds/get-started/virtual-dc/virtualized-domain-controller-architecture</a>]<br></span>)
スナップショットのロールバック、バックアップの復元、または仮想マシン全体のクローン操作時に発生する問題を回避するために使用します。</p></div>
</div>
<div class="sect2">
<h3 id="qm_import_virtual_machines">
<span>10.7. 仮想マシンのインポート</span>
<a class="headerlink" href="#qm_import_virtual_machines" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>外部ハイパーバイザーや他のProxmox VEクラスターから既存の仮想マシンをインポートするには、様々な方法が利用可能です。最も一般的な方法は以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
ESXi専用ストレージなどが提供する<em>インポート</em>コンテンツタイプを利用する
ネイティブインポートウィザードの使用。</p>
</li>
<li>
<p>
ソース側でバックアップを実行し、ターゲット側で復元する方法。
この方法は、別の Proxmox VE インスタンスからの移行に最適です。</p>
</li>
<li>
<p>
<span class="monospaced">qm</span>コマンドラインツールの OVF 専用インポートコマンドを使用する方法。</p>
</li>
</ul></div>
<div class="paragraph">
<p>他のハイパーバイザーから Proxmox VE に仮想マシンをインポートされる場合は、
<a href="https://pve.proxmox.com/wiki/Migrate_to_Proxmox_VE#Concepts">Proxmox VE の概念について</a>
事前にご確認いただくことをお勧めいたします。</p></div>
<div class="sect3">
<h4 id="_import_wizard">10.7.1. インポートウィザード
<a class="headerlink" href="#_import_wizard" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-import-wizard-general.png">
<img src="images/screenshot/gui-import-wizard-general.png" alt="screenshot/gui-import-wizard-general.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VEは、ストレージプラグインシステムを利用した統合型VMインポーターを提供しており、
APIおよびWebベースのユーザーインターフェースへのネイティブ統合を実現します。
これにより、VM全体をインポートすることが可能で、その設定の大半がProxmox VEの設定モデルにマッピングされ、
ダウンタイムを削減できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">インポートウィザードはProxmox VE 8.2の開発サイクル中に追加され、
技術プレビュー段階にあります。既に有望で安定した動作を見せていますが、
現在も活発に開発が進められています。</td>
</tr></table>
</div>
<div class="paragraph">
<p>インポートウィザードをご利用になるには、まずインポートソース用の新規ストレージを設定する必要があります。
ウェブインターフェースの「<em>データセンター」→「ストレージ」→「追加」</em>で設定可能です。</p></div>
<div class="paragraph">
<p>次に、リソースツリーで新規ストレージを選択し、[<em>仮想ゲスト</em>]コンテンツタブでインポート可能なゲストをすべて表示できます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-import-wizard-advanced.png">
<img src="images/screenshot/gui-import-wizard-advanced.png" alt="screenshot/gui-import-wizard-advanced.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>対象を選択し、<em>[インポート]</em>ボタン（またはダブルクリック）でインポートウィザードを開きます。
ここでは利用可能なオプションの一部を変更し、インポートを開始できます。
なお、より高度な変更はインポート完了後にも行えます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">ESXiインポートウィザードは、ESXiバージョン6.5から8.0まででテスト済みです。vSANストレージを使用しているゲストは直接インポートできませんのでご注意ください。それらのディスクはまず別のストレージに移動する必要があります。vCenterをインポートソースとして使用することは可能ですが、パフォーマンスが大幅に低下します（5～10倍遅くなります）。</td>
</tr></table>
</div>
<div class="paragraph">
<p>仮想ゲストを新しいハイパーバイザーに適合させる手順とヒントについては、
「<a href="https://pve.proxmox.com/wiki/Migrate_to_Proxmox_VE#Migration">Proxmox VE への移行」
ウィキ記事</a>をご参照ください。</p></div>
<div class="sect4">
<h5 id="_ova_ovf_import">OVA/OVFインポート
<a class="headerlink" href="#_ova_ovf_import" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>OVA/OVFファイルをインポートするには、まず<em>インポートコンテンツ</em>タイプが設定されたファイルベースストレージが必要です。このストレージには<em>インポートフォルダ</em>が作成され、OVAファイルまたはOVFファイルを対応するイメージと共にフラット構造で配置できます。あるいはWeb UIから直接OVAファイルをアップロード/ダウンロードすることも可能です。その後Web UIで該当ファイルを選択し、インポートウィザードを使用してゲストをインポートします。</p></div>
<div class="paragraph">
<p>OVAファイルの場合、イメージを一時的に展開するための追加スペースが必要となります。
これには<em>「イメージ」</em>コンテンツタイプが設定されたファイルベースストレージが必要です。
デフォルトではソースストレージが選択されますが、
実際のターゲットストレージへのインポート前にイメージを展開する
<em>「インポート作業用ストレージ」</em>を指定することも可能です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">OVA/OVFファイルの構造や内容は常に適切に維持・定義されているとは限らないため、
ゲスト設定の一部を手動で調整する必要が生じる可能性があります。
例えば、SCSIコントローラタイプはOVA/OVFファイルで定義されていない場合がほとんどですが、
デフォルト設定ではOVMF（UEFI）で起動できません。そのため、
このようなケースでは<em>Virtio</em> <em>SCSIまたはVMware PVSCSI</em>を選択する必要があります。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_import_ovf_ova_through_cli">10.7.2. CLI による OVF/OVA インポート
<a class="headerlink" href="#_import_ovf_ova_through_cli" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>外部ハイパーバイザーからの仮想マシンのエクスポートは、通常、1つ以上のディスクイメージと、仮想マシンの設定（RAM、コア数など）を記述した設定ファイルの形式となります。<br>
ディスクイメージの形式は、VMwareまたはVirtualBox由来の場合はvmdk形式、KVMハイパーバイザー由来の場合はqcow2形式となります。
VMエクスポートで最も普及している設定形式はOVF標準ですが、実際には相互運用性が制限されています。
その理由は、多くの設定項目が標準自体に実装されておらず、ハイパーバイザーが補足情報を非標準の拡張機能でエクスポートするためです。</p></div>
<div class="paragraph">
<p>フォーマットの問題に加え、エミュレートされるハードウェアがハイパーバイザー間で大きく異なる場合、他ハイパーバイザーからのディスクイメージインポートが失敗する可能性があります。特にWindows VMはこの問題に注意が必要です。OSがハードウェア変更に対して非常に敏感であるためです。この問題は、エクスポート前にインターネットから入手可能なMergeIDE.zipユーティリティをインストールし、インポートしたWindows VMを起動する前にハードディスクタイプ<strong>をIDEに</strong>選択することで解決できる場合があります。</p></div>
<div class="paragraph">
<p>最後に、準仮想化ドライバの問題があります。これはエミュレートされたシステムの速度を向上させ、ハイパーバイザー固有のものです。
GNU/Linuxおよびその他のフリーUnix OSでは、必要なドライバがすべてデフォルトでインストールされており、VMのインポート直後に準仮想化ドライバに切り替えることができます。Windows VMの場合、Windows準仮想化ドライバを自身でインストールする必要があります。</p></div>
<div class="paragraph">
<p>GNU/Linuxおよびその他のフリーUnixは通常、問題なくインポート可能です。
ただし、上記の課題により、Windows VMのインポート/エクスポートが
全てのケースで成功することを保証できない点にご留意ください。</p></div>
<div class="sect4">
<h5 id="_step_by_step_example_of_a_windows_ovf_import">Windows OVFインポートの手順例<a class="headerlink" href="#_step_by_step_example_of_a_windows_ovf_import" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>マイクロソフトでは、
Windows 開発を始めるための
<a href="https://developer.microsoft.com/en-us/windows/downloads/virtual-machines/">仮想マシンのダウンロード</a>を提供しております。
OVF インポート機能のデモには、
そのうちの 1 つを使用いたします。</p></div>
<div class="sect5">
<h6 id="_download_the_virtual_machine_zip">仮想マシンのzipファイルをダウンロードしてください<a class="headerlink" href="#_download_the_virtual_machine_zip" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>利用規約をご確認の上、<em>VMwareプラットフォーム向けにWindows 10 Enterprise（評価版 - ビルド）</em>を選択し、zipファイルをダウンロードしてください。</p></div>
</div>
<div class="sect5">
<h6 id="_extract_the_disk_image_from_the_zip">zip ファイルからディスクイメージを抽出してください
<a class="headerlink" href="#_extract_the_disk_image_from_the_zip" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>お好みの解凍ユーティリティ（<span class="monospaced">unzip</span>など）で ZIP ファイルを展開し、
SSH/SCP 経由で OVF ファイルと VMDK ファイルを Proxmox VE ホストにコピーしてください。</p></div>
</div>
<div class="sect5">
<h6 id="_import_the_virtual_machine">仮想マシンをインポートします
<a class="headerlink" href="#_import_the_virtual_machine" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>これにより、OVFマニフェストから読み取ったコア数、メモリ容量、VM名を使用した新しい仮想マシンが作成され、ディスクが<span class="monospaced">ローカルLVM</span>ストレージにインポートされます。ネットワーク設定は手動で行う必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm importovf 999 WinDev1709Eval.ovf local-lvm</pre>
</div></div>
<div class="paragraph">
<p>これで仮想マシンの起動準備が整います。</p></div>
</div>
<div class="sect5">
<h6 id="_adding_an_external_disk_image_to_a_virtual_machine">仮想マシンへの外部ディスクイメージの追加
<a class="headerlink" href="#_adding_an_external_disk_image_to_a_virtual_machine" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>既存のディスクイメージを仮想マシンに追加することも可能です。
これは他社のハイパーバイザーから取得したもの、またはご自身で作成したものでも構いません。</p></div>
<div class="paragraph">
<p>例えば、<em>vmdebootstrapツール</em>を使用してDebian/Ubuntuディスクイメージを作成した場合：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vmdebootstrap --verbose \
 --size 10GiB --serial-console \
 --grub --no-extlinux \
 --package openssh-server \
 --package avahi-daemon \
 --package qemu-guest-agent \
 --hostname vm600 --enable-dhcp \
 --customize=./copy_pub_ssh.sh \
 --sparse --image vm600.raw</pre>
</div></div>
<div class="paragraph">
<p>新しいターゲット仮想マシンを作成し、イメージをストレージ<span class="monospaced">pvedir</span>にインポートして、
仮想マシンの SCSI コントローラに接続することができます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm create 600 --net0 virtio,bridge=vmbr0 --name vm600 --serial0 socket \
   --boot order=scsi0 --scsihw virtio-scsi-pci --ostype l26 \
   --scsi0 pvedir:0,import-from=/path/to/dir/vm600.raw</pre>
</div></div>
<div class="paragraph">
<p>仮想マシンは起動準備が整いました。</p></div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="qm_cloud_init">
<span>10.8. Cloud-Init のサポート</span>
<a class="headerlink" href="#qm_cloud_init" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><a href="https://cloudinit.readthedocs.io">Cloud-Initは</a>、仮想マシンインスタンスの初期設定を処理する事実上の標準パッケージです。Cloud-Initを使用することで、ハイパーバイザー側でのネットワークデバイスの設定やSSHキーの管理が可能となります。仮想マシンが初めて起動する際、VM内部のCloud-Initソフトウェアがこれらの設定を適用します。</p></div>
<div class="paragraph">
<p>多くのLinuxディストリビューションでは、<em>主にOpenStack向けに</em>設計された
すぐに使用可能なCloud-Initイメージを提供しています。これらのイメージは
Proxmox VEでも動作します。このような既製のイメージを入手することは
便利に思えるかもしれませんが、通常はご自身でイメージを準備されることを
お勧めいたします。その利点は、インストールされた内容を正確に把握でき、
後々ご自身のニーズに合わせてイメージを容易にカスタマイズできる点にあります。</p></div>
<div class="paragraph">
<p>Cloud-Initイメージを作成したら、それをVMテンプレートに変換することをお勧めします。VMテンプレートからリンクドクローンを迅速に作成できるため、新しいVMインスタンスを展開する効率的な方法となります。新しいVMを起動する前に、ネットワーク設定（および必要に応じてSSHキー）を構成するだけで済みます。</p></div>
<div class="paragraph">
<p>Cloud-InitでプロビジョニングされたVMへのログインには、SSHキーベースの認証の使用をお勧めします。パスワードの設定も可能ですが、Proxmox VEがCloud-Initデータ内に暗号化されたパスワードを保存する必要があるため、SSHキーベースの認証ほど安全ではありません。</p></div>
<div class="paragraph">
<p>Proxmox VEは、Cloud-Initデータを仮想マシンに渡すためにISOイメージを生成します。この目的のため、すべてのCloud-Init仮想マシンにはCD-ROMドライブが割り当てられている必要があります。
通常、シリアルコンソールを追加し、ディスプレイとして使用する必要があります。多くの Cloud-Init イメージはこれに依存しており、OpenStack の要件でもあります。ただし、他のイメージではこの設定で問題が発生する可能性があります。シリアルコンソールの使用が機能しない場合は、デフォルトのディスプレイ設定に戻してください。</p></div>
<div class="sect3">
<h4 id="_preparing_cloud_init_templates">10.8.1. Cloud-Initテンプレートの準備
<a class="headerlink" href="#_preparing_cloud_init_templates" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>最初のステップは、仮想マシンの準備です。基本的にどの仮想マシンでもご利用いただけます。
準備<strong>したい仮想マシン内に</strong>、Cloud-Initパッケージをインストールしてください。Debian/Ubuntuベースのシステムでは、以下のように簡単に行えます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt-get install cloud-init</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このコマンドは Proxmox VE ホスト上で実行する<strong>ものではなく</strong>、
VM 内部でのみ実行してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>既に多くのディストリビューションでは、すぐに使用可能なCloud-Initイメージ（<span class="monospaced">.qcow2ファイル</span>として提供）が用意されています。そのため、代わりにそのようなイメージをダウンロードしてインポートすることも可能です。以下の例では、Ubuntuが提供するクラウドイメージ（<a href="https://cloud-images.ubuntu.com">https://cloud-images.ubuntu.com</a>）を使用します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># イメージをダウンロードします
wget https://cloud-images.ubuntu.com/bionic/current/bionic-server-cloudimg-amd64.img

# VirtIO SCSI コントローラを備えた新しい仮想マシンを作成します
qm create 9000 --memory 2048 --net0 virtio,bridge=vmbr0 --scsihw virtio-scsi-pci

# ダウンロードしたディスクを local-lvm ストレージにインポートし、SCSI ドライブとして接続します
qm set 9000 --scsi0 local-lvm:0,import-from=/path/to/bionic-server-cloudimg-amd64.img</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Ubuntu Cloud-Init イメージでは、SCSI ドライブ用に<span class="monospaced">virtio-scsi-pci</span>コントローラタイプが必要です。</td>
</tr></table>
</div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cloudinit-hardware.png">
<img src="images/screenshot/gui-cloudinit-hardware.png" alt="screenshot/gui-cloudinit-hardware.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<div class="title">Cloud-Init CD-ROMドライブの追加</div><p>次のステップでは、Cloud-InitデータをVMに渡すために使用するCD-ROMドライブを設定します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 9000 --ide2 local-lvm:cloudinit</pre>
</div></div>
<div class="paragraph">
<p>Cloud-Initイメージから直接起動できるようにするには、<span class="monospaced">ブートパラメータ</span>を<span class="monospaced">order=scsi0</span>に設定し、BIOSがこのディスクからのみ起動するように制限します。これにより、VM BIOSが起動可能なCD-ROMのテストをスキップするため、起動が高速化されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 9000 --boot order=scsi0</pre>
</div></div>
<div class="paragraph">
<p>多くのCloud-Initイメージでは、シリアルコンソールの設定と表示装置としての使用が必須となります。ただし、特定のイメージで設定が機能しない場合は、代わりにデフォルトの表示装置に戻してください。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 9000 --serial0 socket --vga serial0</pre>
</div></div>
<div class="paragraph">
<p>最終段階として、VMをテンプレートに変換することが有効です。
このテンプレートから、リンクドクローンを迅速に作成できます。
VMテンプレートからの展開は、完全なクローン（コピー）を作成するよりも
はるかに高速です。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm template 9000</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_deploying_cloud_init_templates">10.8.2. Cloud-Initテンプレートの展開
<a class="headerlink" href="#_deploying_cloud_init_templates" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cloudinit-config.png">
<img src="images/screenshot/gui-cloudinit-config.png" alt="screenshot/gui-cloudinit-config.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>このようなテンプレートは、クローンを作成することで簡単に展開できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm clone 9000 123 --name ubuntu2</pre>
</div></div>
<div class="paragraph">
<p>次に、認証に使用するSSH公開鍵を設定し、
IP設定を構成します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 123 --sshkey ~/.ssh/id_rsa.pub
qm set 123 --ipconfig0 ip=10.0.10.123/24,gw=10.0.10.1</pre>
</div></div>
<div class="paragraph">
<p>Cloud-Initオプションは単一コマンドで一括設定することも可能です。
上記の例は行数を減らすため、コマンドを分割して表示しています。
また、ご自身の環境に合わせてIP設定を必ず適用してください。</p></div>
</div>
<div class="sect3">
<h4 id="_custom_cloud_init_configuration">10.8.3. カスタム Cloud-Init 設定
<a class="headerlink" href="#_custom_cloud_init_configuration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Cloud-Initの統合により、自動生成された設定ファイルの代わりにカスタム設定ファイルを使用することも可能です。これはコマンドラインの`<span class="monospaced">cicustom`</span>オプションで実現します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 9000 --cicustom "user=&amp;lt;ボリューム名&amp;gt;,network=&amp;lt;ボリューム名&amp;gt;,meta=&amp;lt;ボリューム名&amp;gt;"</pre>
</div></div>
<div class="paragraph">
<p>カスタム設定ファイルは、スニペットをサポートするストレージ上に存在し、
VMが移行されるすべてのノードで利用可能である必要があります。
そうでない場合、VMは起動できません。
例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 9000 --cicustom "user=local:snippets/userconfig.yaml"</pre>
</div></div>
<div class="paragraph">
<p>Cloud-Initには3種類の設定があります。最初のものは上記の例にある<span class="monospaced">ユーザー設定です</span>。2つ目は<span class="monospaced">ネットワーク設定</span>、3つ目は<span class="monospaced">メタ設定</span>です。これらはすべて一緒に指定することも、必要に応じて組み合わせて指定することも可能です。
カスタム設定ファイルが指定されていない項目については、自動生成された設定が使用されます。</p></div>
<div class="paragraph">
<p>生成された設定は、カスタム設定のベースとして出力可能です:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm cloudinit ダンプ 9000 ユーザー</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">ネットワーク設定</span>および<span class="monospaced">メタ設定</span>についても同様のコマンドが存在します。</p></div>
</div>
<div class="sect3">
<h4 id="_cloud_init_on_windows">10.8.4. Windows における Cloud-Init
<a class="headerlink" href="#_cloud_init_on_windows" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Windows向けにCloud-Initを再実装した「<a href="https://cloudbase.it/">cloudbase-init</a>」が利用可能です。Cloudbase-InitではCloud-Initの全機能が提供されているわけではなく、一部の機能はCloud-Initとは異なります。</p></div>
<div class="paragraph">
<p>Cloudbase-Initでは、<span class="monospaced">ostypeを</span>任意のWindowsバージョンに設定するとともに、
<span class="monospaced">city</span> <span class="monospaced">peをconfigdrive2に設定</span>する必要があります。
これは、<span class="monospaced">Windowsのostypeであれば</span>デフォルトで設定されます。</p></div>
<div class="paragraph">
<p>Windows用の無料の既製クラウドイメージは存在しません。Cloudbase-Initを使用するには、
Windowsゲストを手動でインストールおよび設定する必要があります。</p></div>
</div>
<div class="sect3">
<h4 id="_preparing_cloudbase_init_templates">10.8.5. Cloudbase-Init テンプレートの準備
<a class="headerlink" href="#_preparing_cloudbase_init_templates" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>最初のステップは、仮想マシン（VM）に Windows をインストールすることです。ゲスト内で Cloudbase-Init をダウンロードし、インストールしてください。ベータ版のインストールが必要になる場合があります。
インストール終了時に Sysprep を実行しないでください。代わりに、まず Cloudbase-Init を設定してください。</p></div>
<div class="paragraph">
<p>設定する一般的なオプションの例は以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>username</em>: 管理者グループのユーザー名を設定します</p>
</li>
<li>
<p>
<em>groups</em>: ユーザーを<span class="monospaced">Administrators</span>グループに追加できます</p>
</li>
<li>
<p>
<em>inject_user_password</em>:<span class="monospaced">true</span>に設定すると、VM 設定でパスワードを設定できます</p>
</li>
<li>
<p>
<em>first_logon_behaviour</em>: ログイン時に新しいパスワードを要求しないようにするには、<span class="monospaced">no</span>に設定してください</p>
</li>
<li>
<p>
<em>rename_admin_user</em>: この設定を<span class="monospaced">true</span>にすると、デフォルト<span class="monospaced">の管理者</span>ユーザー<span class="monospaced">名を</span>
<span class="monospaced">username</span>で指定したユーザー名に変更できます</p>
</li>
<li>
<p>
<em>metadata_services</em>: Cloudbase-Init が最初にこのサービスを確認するように設定します。
<span class="monospaced">cloudbaseinit.metadata.services.configdrive.ConfigDriveService</span>
（デフォルトは false）。設定しない場合、起動後のシステム構成に数分かかる可能性があります。</p>
</li>
</ul></div>
<div class="paragraph">
<p>SetHostnamePluginなどの一部のプラグインは再起動を必要とし、自動的に再起動を行います。Cloudbase-Initによる自動再起動を無効化するには、<span class="monospaced">allow_rebootをfalseに設定</span>してください。</p></div>
<div class="paragraph">
<p>設定オプションの完全な一覧は、公式の
<a href="https://cloudbase-init.readthedocs.io/en/latest/config.html">cloudbase-init ドキュメント</a>
でご確認いただけます。</p></div>
<div class="paragraph">
<p>設定後にスナップショットを作成しておくと、設定の一部を調整する必要が生じた場合に便利です。
Cloudbase-Initの設定後、テンプレートの作成を開始できます。Windowsゲストをシャットダウンし、Cloud-Initディスクを追加してテンプレート化してください。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 9000 --ide2 local-lvm:cloudinit
qm template 9000</pre>
</div></div>
<div class="paragraph">
<p>テンプレートを新しい VM にクローンします:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm clone 9000 123 --name windows123</pre>
</div></div>
<div class="paragraph">
<p>その後、パスワード、ネットワーク設定、SSHキーを設定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>qm set 123 --cipassword &amp;lt;password&amp;gt;
qm set 123 --ipconfig0 ip=10.0.10.123/24,gw=10.0.10.1
qm set 123 --sshkey ~/.ssh/id_rsa.pub</pre>
</div></div>
<div class="paragraph">
<p>パスワード設定前に、<span class="monospaced">OSタイプが</span>「任意のWindowsバージョン」に設定されていることをご確認ください。設定されていない場合、パスワードが暗号化され、Cloudbase-Initが暗号化されたパスワードを平文パスワードとして使用してしまいます。</p></div>
<div class="paragraph">
<p>すべての設定が完了したら、クローンしたゲストを起動します。初回起動時にはログインが機能せず、ホスト名変更のため自動的に再起動します。
再起動後、新しいパスワードが設定され、ログインが可能になります。</p></div>
</div>
<div class="sect3">
<h4 id="_cloudbase_init_and_sysprep">10.8.6. Cloudbase-Init と Sysprep
<a class="headerlink" href="#_cloudbase_init_and_sysprep" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Sysprepは、Windowsの設定をリセットし<span class="monospaced">新しい</span>システムを提供する機能です。
Cloudbase-Initと組み合わせて使用することで、クリーンなテンプレートを作成できます。</p></div>
<div class="paragraph">
<p>Sysprep を使用する際には、2 つの設定ファイルを適応させる必要があります。
1 つ目は通常の設定ファイル、2 つ目は<span class="monospaced">-unattend.conf</span> で終わるファイルです。</p></div>
<div class="paragraph">
<p>Cloudbase-Init は 2 段階の処理を実行します。まず<span class="monospaced">-unattend.conf</span>を使用した Sysprep ステップを実行し、その後、プライマリ設定ファイルを使用した通常のステップを実行します。</p></div>
<div class="paragraph">
<p><span class="monospaced">Windows Server</span>では、提供されている<span class="monospaced">Unattend.xml</span>ファイルを使用して Sysprep を実行すれば、そのまま動作するはずです。ただし、通常の Windows バージョンでは追加の手順が必要です：</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
PowerShell インスタンスを開きます</p>
</li>
<li>
<p>
管理者ユーザーの有効化:</p>
<div class="listingblock">
<div class="content monospaced">
<pre>`net user Administrator /active:yes`</pre>
</div></div>
</li>
<li>
<p>
管理者ユーザーを使用してCloudbase-Initをインストールします</p>
</li>
<li>
<p>
sysprep後の初回起動時に管理者ユーザーを有効化するコマンドを
<span class="monospaced">Unattend.xmlに</span>追加してください：</p>
<div class="listingblock">
<div class="content monospaced">
<pre>&amp;lt;RunSynchronousCommand wcm:action="add"&amp;gt;
  &amp;lt;Path&amp;gt;net user administrator /active:yes&amp;lt;/Path&amp;gt;
  &amp;lt;Order&amp;gt;1&amp;lt;/Order&amp;gt;
  &amp;lt;Description&amp;gt;管理者ユーザーの有効化&amp;lt;/Description&amp;gt;
&amp;lt;/RunSynchronousCommand&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">&amp;lt;Order&amp;gt;</span>が他の同期コマンドと競合しないことをご確認ください。
Cloudbase-Init コマンドの<span class="monospaced">&amp;lt;Order&amp;gt;</span>を変更し、このコマンドの後に実行されるよう、
数値を大きい値に増やしてください：<span class="monospaced">&amp;lt;Order&amp;gt;2&amp;lt;/Order&amp;gt;</span></p></div>
</li>
<li>
<p>
(Windows 11のみ) 競合するMicrosoft.OneDriveSyncパッケージを削除します:</p>
<div class="listingblock">
<div class="content monospaced">
<pre>Get-AppxPackage -AllUsers Microsoft.OneDriveSync | Remove-AppxPackage -AllUsers</pre>
</div></div>
</li>
<li>
<p>
Cloudbase-Init設定ディレクトリ<span class="monospaced">に移動します</span>:</p>
<div class="listingblock">
<div class="content monospaced">
<pre>cd 'C:\Program Files\Cloudbase Solutions\Cloudbase-Init\conf'</pre>
</div></div>
</li>
<li>
<p>
(オプション) 設定ミスに備え、Sysprep 実行前に VM のスナップショットを作成</p>
</li>
<li>
<p>
Sysprepを実行します：</p>
<div class="listingblock">
<div class="content monospaced">
<pre>C:\Windows\System32\Sysprep\sysprep.exe /generalize /oobe /unattend:Unattend.xml</pre>
</div></div>
</li>
</ol></div>
<div class="paragraph">
<p>上記の手順を完了すると、Sysprep の影響で仮想マシンはシャットダウン状態になります。
この状態でテンプレート化、クローン作成、必要に応じた設定を行ってください。</p></div>
</div>
<div class="sect3">
<h4 id="_cloud_init_specific_options">10.8.7. Cloud-Init固有のオプション
<a class="headerlink" href="#_cloud_init_specific_options" title="Permalink to this heading"></a></h4>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">cicustom</span>:<span class="monospaced">[メタデータ=&amp;lt;ボリューム&amp;gt;] [,ネットワーク=&amp;lt;ボリューム&amp;gt;] [,ユーザー=&amp;lt;ボリューム&amp;gt;] [,ベンダー=&amp;lt;ボリューム&amp;gt;]</span></dt>
<dd>
<p>
起動時に自動生成されるファイルを置き換えるカスタムファイルを指定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">meta=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
クラウド初期化（cloud-init）経由で仮想マシン（VM）に渡される全メタデータを含むカスタムファイルを指定します。これはプロバイダー固有の設定であり、configdrive2とnocloudでは異なります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ネットワーク=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
クラウドイニシャライザ経由で、すべてのネットワークデータを含むカスタムファイルを仮想マシンに渡すには。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ネットワーク=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
クラウドイニシャライザ経由で、すべてのユーザーデータを含むカスタムファイルをVMに渡すには。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ベンダー=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
クラウドイニシャライザ経由で、すべてのベンダーデータを含むカスタムファイルを仮想マシンに渡す場合。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">cipassword</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ユーザーに割り当てるパスワード。通常は使用を推奨しておりません。代わりにSSHキーをご利用ください。また、古いバージョンのcloud-initではハッシュ化されたパスワードをサポートしていない点にご注意ください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">citype</span>:<span class="monospaced">&amp;lt;configdrive2 | nocloud | opennebula&amp;gt;</span></dt>
<dd>
<p>
cloud-init設定フォーマットを指定します。デフォルトは設定されたOSタイプ（<span class="monospaced">ostype</span>）に依存します。Linux<span class="monospaced">ではnocloud</span>フォーマット、Windowsでは<span class="monospaced">configdrive2フォーマット</span>を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ciupgrade</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
初回起動後に自動パッケージアップグレードを実行します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ciuser</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
イメージに設定されたデフォルトユーザーではなく、SSHキーとパスワードを変更するユーザー名を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ipconfig[n]</span>:<span class="monospaced">[ゲートウェイIPv4] [,ゲートウェイIPv6] [,IPv4アドレス/CIDR] [,IPv6アドレス/CIDR]</span></dt>
<dd>
<p>
対応するインターフェースのIPアドレスとゲートウェイを指定します。</p>
<div class="paragraph">
<p>IPアドレスはCIDR表記を使用し、ゲートウェイはオプションですが、同じタイプのIPアドレスを指定する必要があります。</p></div>
<div class="paragraph">
<p>IP アドレスに DHCP を使用する場合は、特別な文字列<em>「dhcp」</em>を使用できます。この場合、明示的なゲートウェイは指定しないでください。
IPv6 では、特別な文字列<em>「auto」</em>を使用してステートレス自動設定を利用できます。これには cloud-init 19.4 以降が必要です。</p></div>
<div class="paragraph">
<p>cloud-init が有効化されており、IPv4 アドレスも IPv6 アドレスも指定されていない場合、デフォルトでは IPv4 で DHCP が使用されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">gw=&amp;lt;ゲートウェイIPv4アドレス&amp;gt;</span></dt>
<dd>
<p>
IPv4トラフィック用のデフォルトゲートウェイ。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">必要なオプション:<span class="monospaced">ip</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">gw6=&amp;lt;ゲートウェイIPv6&amp;gt;</span></dt>
<dd>
<p>
IPv6トラフィック用のデフォルトゲートウェイ。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">ip6</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip=&amp;lt;IPv4フォーマット/CIDR&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">dhcp</span>)</dt>
<dd>
<p>
CIDR形式のIPv4アドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip6=&amp;lt;IPv6フォーマット/CIDR&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">dhcp</span>)</dt>
<dd>
<p>
CIDR形式のIPv6アドレス。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">nameserver</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのDNSサーバーIPアドレスを設定します。searchdomainおよびnameserverの両方が設定されていない場合、作成時にはホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">searchdomain</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのDNS検索ドメインを設定します。searchdomainとnameserverの両方が設定されていない場合、作成時にはホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">sshkeys</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
公開SSH鍵の設定（1行につき1鍵、OpenSSH形式）。</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="qm_pci_passthrough">
<span>10.9. PCI(e)</span>パススルー
<a class="headerlink" href="#qm_pci_passthrough" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>PCI(e)パススルーは、仮想マシンがホストからPCIデバイスを制御できるようにする仕組みです。仮想化されたハードウェアを使用する場合と比較して、例えば低遅延、高パフォーマンス、またはより多くの機能（例：オフロード）といった利点があります。</p></div>
<div class="paragraph">
<p>ただし、デバイスを仮想マシンにパススルーした場合、
そのデバイスはホスト上や他の仮想マシンでは使用できなくなります。</p></div>
<div class="paragraph">
<p>なお、PCIパススルーはi440fxおよびq35マシンで利用可能ですが、PCIeパススルーはq35マシンのみで利用可能です。これは、PCIデバイスとしてパススルーされたPCIe対応デバイスがPCI速度でしか動作しないことを意味するものではありません。デバイスをPCIeとしてパススルーすることは、ゲストに対して「このデバイスは『非常に高速なレガシーPCIデバイス』ではなくPCIeデバイスである」というフラグを設定するだけです。一部のゲストアプリケーションはこの恩恵を受けます。</p></div>
<div class="sect3">
<h4 id="_general_requirements">10.9.1. 一般的な要件
<a class="headerlink" href="#_general_requirements" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>パススルーは実ハードウェア上で実行されるため、
いくつかの要件を満たす必要があります。
これらの要件の概要を以下に示します。
特定のデバイスに関する詳細情報は、
<a href="https://pve.proxmox.com/wiki/PCI_Passthrough">PCIパススルーの例をご参照ください</a>。</p></div>
<div class="sect4">
<h5 id="_hardware_3">ハードウェア
<a class="headerlink" href="#_hardware_3" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>お使いのハードウェアは、<span class="monospaced">IOMMU</span>（<strong>I</strong> <strong>/</strong><strong>Oメモリ管理ユニット</strong>）による割り込み再マッピングをサポートしている必要があります。これにはCPUとマザーボードが含まれます。</p></div>
<div class="paragraph">
<p>一般的に、VT-dをサポートするインテルシステムおよびAMD-ViをサポートするAMDシステムでは対応しております。
しかしながら、ハードウェア実装の不備や、ドライバーの欠如・低品質といった理由により、
すべての環境で問題なく動作するとは保証できません。</p></div>
<div class="paragraph">
<p>さらに、サーバーグレードのハードウェアはコンシューマーグレードのハードウェアよりもサポートが充実していることが多いですが、それでも多くの最新システムではこの機能をサポートしています。</p></div>
<div class="paragraph">
<p>ご使用のハードウェアベンダーに、
Linux環境における本機能のサポート状況について、
具体的な設定内容に基づきご確認ください。</p></div>
</div>
<div class="sect4">
<h5 id="_determining_pci_card_address">PCIカードのアドレス確認方法
<a class="headerlink" href="#_determining_pci_card_address" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>最も簡単な方法は、GUIを使用して仮想マシンのハードウェアタブに「ホストPCI」タイプのデバイスを追加することです。
あるいは、コマンドラインを使用することも可能です。</p></div>
<div class="paragraph">
<p>お使いのカードは以下で確認できます</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>lspci</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_configuration_12">設定
<a class="headerlink" href="#_configuration_12" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ハードウェアがパススルーをサポートしていることを確認したら、PCI(e)パススルーを有効にするためにいくつかの設定が必要です。</p></div>
<div class="paragraph">
<div class="title">IOMMU</div><p>BIOS/UEFIでIOMMUサポートを有効にする必要があります。通常、対応する設定<span class="monospaced">は</span> <span class="monospaced">IOMMUまたはVT-d</span>と呼ばれますが、正確なオプション名はマザーボードのマニュアルでご確認ください。</p></div>
<div class="paragraph">
<p>AMD CPUではIOMMUはデフォルトで有効です。最近のカーネル（6.8以降）では、
Intel CPUでも同様です。古いカーネルでは、Intel CPUで有効にするために、
<a href="#sysboot_edit_kernel_cmdline">カーネルコマンドラインに</a>以下を追加する必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>intel_iommu=on</pre>
</div></div>
<div class="paragraph">
<div class="title">IOMMUパススルーモード</div><p>お使いのハードウェアがIOMMUパススルーモードをサポートしている場合、このモードを有効にするとパフォーマンスが向上する可能性があります。
これは、仮想マシンが（デフォルトで）ハイパーバイザーによって通常行われるDMA変換をバイパスし、代わりにDMA要求をハードウェアIOMMUに直接渡すためです。これらのオプションを有効にするには、以下の行をカーネルコマンドラインに追加してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>iommu=pt</pre>
</div></div>
<div class="paragraph">
<p><a href="#sysboot_edit_kernel_cmdline">カーネルコマンドライン</a>に追加してください。</p></div>
<div class="paragraph">
<div class="title">カーネルモジュール</div><p>以下のモジュールが確実にロードされるようにする必要があります。
これには、それらを『<em>/etc/modules</em>』に追加することで実現できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="title">仲介デバイスパススルー</div>
<div class="paragraph">
<p>仲介デバイス（例：vGPU）を経由する場合、以下の設定は不要です。
このような場合、デバイスは適切なホストドライバによって直接管理されます。</p></div>
</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content monospaced">
<pre>vfio
 vfio_iommu_type1
 vfio_pci</pre>
</div></div>
<div class="paragraph" id="qm_pci_passthrough_update_initramfs">
<p>モジュール関連の設定を変更した後は、<span class="monospaced">initramfs</span> を更新する必要があります。
Proxmox VE では、以下のコマンドを実行することで更新が可能です:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># update-initramfs -u -k all</pre>
</div></div>
<div class="paragraph">
<p>モジュールがロードされているか確認するには、</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lsmod | grep vfio</pre>
</div></div>
<div class="paragraph">
<p>上記の4つのモジュールが含まれていることを確認してください。</p></div>
<div class="paragraph">
<div class="title">設定の完了</div><p>最後に再起動して変更を有効化し、実際に有効になっていることを確認してください。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dmesg | grep -e DMAR -e IOMMU -e AMD-Vi</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">IOMMU</span>、<span class="monospaced">Directed I/O</span>、または<span class="monospaced">割り込み再マッピングが</span>有効であることが表示されます。ハードウェアやカーネルによって、正確なメッセージは異なる場合があります。</p></div>
<div class="paragraph">
<p>IOMMUが意図した通りに動作しているかを確認またはトラブルシューティングする方法については、
当社のWikiにある<a href="https://pve.proxmox.com/wiki/PCI_Passthrough#Verifying_IOMMU_parameters">「IOMMUパラメータの確認」</a>
セクションをご参照ください。</p></div>
<div class="paragraph">
<p>また、パススルー対象のデバイスが
<strong>別</strong> <span class="monospaced">個のIOMMUグループ</span>に属していることも重要です。これはProxmox VE APIを呼び出すことで確認できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesh get /nodes/{nodename}/hardware/pci --pci-class-blacklist ""</pre>
</div></div>
<div class="paragraph">
<p>デバイスが、その機能（例：GPUとHDMIオーディオデバイス）やルートポート、PCI(e)<span class="monospaced">ブリッジと同一のIOMMUグループに</span>属している場合は問題ありません。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="title">PCI(e) スロット</div>
<div class="paragraph">
<p>一部のプラットフォームでは物理 PCI(e) スロットの扱いが異なります。そのため、
意図した<span class="monospaced">IOMMU</span>グループ分離が得られない場合、カードを別の PCI(e) スロットに
挿入すると改善されることがあります。</p></div>
</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">
<div class="title">非安全割り込み</div>
<div class="paragraph">
<p>一部のプラットフォームでは、安全でない割り込みを許可する必要が生じる場合があります。
この場合、<strong>/etc/modprobe.d/</strong> ディレクトリ内の「.conf」で終わるファイルに以下の行を追加してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>options vfio_iommu_type1 allow_unsafe_interrupts=1</pre>
</div></div>
<div class="paragraph">
<p>このオプションはシステムの不安定化を招く可能性がある点にご留意ください。</p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="_gpu_passthrough_notes">GPUパススルーに関する注意事項<a class="headerlink" href="#_gpu_passthrough_notes" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Proxmox VEのウェブインターフェースでは、NoVNCやSPICEを介したGPUのフレームバッファ表示は
できません。</p></div>
<div class="paragraph">
<p>GPU全体またはvGPUをパススルーし、グラフィック出力を必要とする場合、
物理的にモニターをカードに接続するか、ゲスト内でリモートデスクトップソフトウェア
（例：VNCまたはRDP）を設定する必要があります。</p></div>
<div class="paragraph">
<p>OpenCLやCUDAを利用するプログラムなど、GPUをハードウェアアクセラレータとして使用する場合、この操作は不要です。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_host_device_passthrough">10.9.2. ホストデバイスのパススルー
<a class="headerlink" href="#_host_device_passthrough" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>最も一般的に使用される PCI(e) パストスルーのバリエーションは、GPU やネットワークカードなど、
PCI(e) カード全体をパススルーする方法です。</p></div>
<div class="sect4">
<h5 id="_host_configuration">ホスト設定
<a class="headerlink" href="#_host_configuration" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Proxmox VEはホストがPCI(e)デバイスを利用できないよう自動的に設定を試みます。
ただし、これが機能しない場合、以下の2つの方法が考えられます：</p></div>
<div class="ulist"><ul>
<li>
<p>
デバイス ID を<em>vfio-pci</em>モジュールのオプションに渡すには、以下を追加します。</p>
<div class="listingblock">
<div class="content monospaced">
<pre>options vfio-pci ids=1234:5678,4321:8765</pre>
</div></div>
<div class="paragraph">
<p><strong>/etc/modprobe.d/</strong>ディレクトリ内の .conf ファイルに、<span class="monospaced">1234:5678</span>および<span class="monospaced">4321:8765</span>を記載します。
これらは以下のコマンドで取得したベンダー ID およびデバイス ID です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lspci -nn</pre>
</div></div>
</li>
<li>
<p>
ホスト上でドライバを完全にブラックリスト登録し、パススルー用にバインド可能であることを保証します。
x-vga=on|off は、PCI(e) デバイスを VM のプライマリ GPU としてマークします。
これを有効にすると、</p>
<div class="listingblock">
<div class="content monospaced">
<pre>blacklist DRIVERNAME</pre>
</div></div>
<div class="paragraph">
<p><strong>/etc/modprobe.d/</strong> ディレクトリ内の .conf ファイルに記述してください<strong>。</strong></p></div>
<div class="paragraph">
<p>ドライバ名を確認するには、以下のコマンドを実行してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lspci -k</pre>
</div></div>
<div class="paragraph">
<p>例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lspci -k | grep -A 3 "VGA"</pre>
</div></div>
<div class="paragraph">
<p>以下のような出力が得られます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>01:00.0 VGA互換コントローラ: NVIDIA Corporation GP108 [GeForce GT 1030] (rev a1)
        サブシステム: Micro-Star International Co., Ltd. [MSI] GP108 [GeForce GT 1030]
        使用中のカーネルドライバ: &amp;lt;some-module&amp;gt;
        カーネルモジュール: &amp;lt;some-module&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>これで、.conf ファイルに記述することでドライバをブラックリスト登録できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>echo "blacklist &amp;lt;some-module&amp;gt;" &amp;gt;&amp;gt; /etc/modprobe.d/blacklist.conf</pre>
</div></div>
</li>
</ul></div>
<div class="paragraph">
<p>いずれの方法でも、
<a href="#qm_pci_passthrough_update_initramfs"> <span class="monospaced">initramfs を</span></a>再度<a href="#qm_pci_passthrough_update_initramfs">更新し</a>、
その後再起動する必要があります。</p></div>
<div class="paragraph">
<p>それでも解決しない場合は、<em>vfio-pci</em> モジュールをロードする前に GPU モジュールをロードするようソフト依存関係を設定する必要があるかもしれません。これは<em>softdep</em>フラグを使用して実現できます。詳細は<em>modprobe.d</em>のマニュアルページもご参照ください。</p></div>
<div class="paragraph">
<p>例えば、&amp;lt;some-module&amp;gt; という名前のドライバを使用している場合：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># echo "softdep &amp;lt;対象モジュール&amp;gt; pre: vfio-pci" &amp;gt;&amp;gt; /etc/modprobe.d/&amp;lt;対象モジュール&amp;gt;.conf</pre>
</div></div>
<div class="paragraph">
<div class="title">設定の確認</div><p>変更が正常に反映されたか確認するには、</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lspci -nnk</pre>
</div></div>
<div class="paragraph">
<p>を実行し、デバイスエントリを確認してください。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>使用中のカーネルドライバ: vfio-pci</pre>
</div></div>
<div class="paragraph">
<p>または<em>使用中の</em>行が完全に欠落している場合、デバイスはパススルーに使用できる状態です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="title">仲介デバイス</div>
<div class="paragraph">
<p>仲介デバイスについては、この行は異なります。デバイスは<em>vfio-pci</em> ではなく、
ホストドライバが直接所有するためです。</p></div>
</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="qm_pci_passthrough_vm_config">仮想マシン設定<a class="headerlink" href="#qm_pci_passthrough_vm_config" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>GPUをパススルーする場合、最高の互換性は以下の設定で達成されます：
マシンタイプとして<em>q35を使用し</em>、SeaBIOSではなく<em>OVMF</em>（VM<em>用UEFI</em>）、
PCIではなくPCIeを選択してください。GPUパススルーに<em>OVMF</em>を使用する場合、
GPUがUEFI対応ROMを搭載している必要があります。そうでない場合は代わりにSeaBIOSを使用してください。
ROMがUEFI対応かどうかを確認するには、
<a href="https://pve.proxmox.com/wiki/PCI_Passthrough#How_to_know_if_a_graphics_card_is_UEFI_.28OVMF.29_compatible">PCIパススルーの</a>例
のWikiをご参照ください。</p></div>
<div class="paragraph">
<p>さらに、OVMFを使用することでVGAアービトレーションを無効化できる可能性があり、これにより起動時に実行が必要なレガシーコードの量を削減できます。VGAアービトレーションを無効化する手順は以下の通りです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>echo "options vfio-pci ids=&amp;lt;ベンダーID&amp;gt;,&amp;lt;デバイスID&amp;gt; disable_vga=1" &amp;gt; /etc/modprobe.d/vfio.conf</pre>
</div></div>
<div class="paragraph">
<p>以下のコマンドで取得した値を &amp;lt;vendor-id&amp;gt; および &amp;lt;device-id&amp;gt; に置き換えてください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lspci -nn</pre>
</div></div>
<div class="paragraph">
<p>PCIデバイスは、VMのハードウェアセクションにあるWebインターフェースから追加できます。
あるいは、コマンドラインを使用することも可能です。VM設定で<strong>hostpciXオプション</strong>を設定します。
例えば、以下を実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -hostpci0 00:02.0</pre>
</div></div>
<div class="paragraph">
<p>または、VM設定ファイルに以下の行を追加します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>hostpci0: 00:02.0</pre>
</div></div>
<div class="paragraph">
<p>お使いのデバイスに複数の機能（例:<span class="monospaced">'00:02.0'</span>と<span class="monospaced">'00:02.1'</span>）がある場合、
短縮構文 ``00:02` でまとめて渡すことが可能です<em>。
これは</em>ウェブインターフェースの<em>``全機能` チェックボックスを
選択した状態と同等となります</em>。</p></div>
<div class="paragraph">
<p>デバイスやゲストOSによっては、以下のオプションが必要となる場合があります：</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>x-vga=on|off は</strong>、PCI(e) デバイスを仮想マシンのプライマリ GPU として指定します。
これを有効にすると、<strong>vga</strong>設定オプションは無視されます。</p>
</li>
<li>
<p>
<strong>pcie=on|off は</strong>、Proxmox VE に PCIe または PCI ポートを使用するよう指示します。一部のゲスト/デバイスの組み合わせでは、PCI ではなく PCIe が必要です。PCIe は<em>q35</em>マシンタイプでのみ利用可能です。</p>
</li>
<li>
<p>
<strong>rombar=on|off は</strong>、ゲストからファームウェア ROM を可視化します。デフォルトはオンです。
一部の PCI(e) デバイスでは、これを無効にする必要があります。</p>
</li>
<li>
<p>
<strong>romfile=&amp;lt;path&amp;gt; は</strong>、デバイスが使用する ROM ファイルへのオプションのパスです。
これは<strong>/usr/share/kvm/</strong> 配下の相対パスとなります<strong>。</strong></p>
</li>
</ul></div>
<div class="paragraph">
<div class="title">例</div><p>GPUをプライマリに設定したPCIeパススルーの例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -hostpci0 02:00,pcie=on,x-vga=on</pre>
</div></div>
<div class="paragraph">
<div class="title">PCI IDの上書き</div><p>ゲストが認識するPCIベンダーID、デバイスID、サブシステムIDを上書き設定することが可能です。
これは、お使いのデバイスがゲストのドライバが認識しないバリエーションIDを持つ場合でも、
そのドライバを強制的にロードしたい場合に有用です（例：お使いのデバイスがサポートされているバリエーションと同一のチップセットを共有していることが分かっている場合）。</p></div>
<div class="paragraph">
<p>利用可能なオプションは、<span class="monospaced">ベンダーID</span>、<span class="monospaced">デバイスID</span>、<span class="monospaced">サブベンダーID</span>、<span class="monospaced">サブデバイスIDです</span>。これらのいずれか、または全てを設定することで、デバイスのデフォルトIDを上書きできます。</p></div>
<div class="paragraph">
<p>例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -hostpci0 02:00,device-id=0x10f6,sub-vendor-id=0x0000</pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_sr_iov">10.9.3. SR-IOV
<a class="headerlink" href="#_sr_iov" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>PCI(e)デバイスを通過させる別の方法として、ご利用のデバイスにハードウェア仮想化機能が搭載されている場合は、その機能を利用する方法がございます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="title">SR-IOVの有効化</div>
<div class="paragraph">
<p>SR-IOVをご利用になる場合、プラットフォームのサポートが特に重要となります。
まずBIOS/UEFIでこの機能を有効にする必要があったり、特定のPCI(e)ポートを使用する必要がある場合があります。
不明な点がある場合は、プラットフォームのマニュアルを参照するか、ベンダーにお問い合わせください。</p></div>
</td>
</tr></table>
</div>
<div class="paragraph">
<p><em>SR-IOV</em>（<strong>シングルルート</strong> <strong>入出力仮想化</strong>）<em>は</em>、
単一のデバイスがシステムに対して複数の<em>VF</em>（<strong>仮想機能</strong>）を提供する
ことを可能にします。<em>これらのVFは</em>それぞれ異なる仮想マシンで使用でき、
完全なハードウェア機能に加え、ソフトウェア仮想化デバイスよりも
優れたパフォーマンスと低いレイテンシを実現します。</p></div>
<div class="paragraph">
<p>現在、この機能の最も一般的なユースケースは、SR-IOVをサポートするNIC（<strong>ネットワークインターフェースカード</strong>）です。これにより、物理ポートごとに複数のVFを提供できます。これにより、チェックサムオフロードなどの機能をVM内で使用できるようになり、（ホスト）CPUのオーバーヘッドを削減できます。</p></div>
<div class="sect4">
<h5 id="_host_configuration_2">ホスト設定
<a class="headerlink" href="#_host_configuration_2" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>一般的に、デバイス上で仮想機能（VF）を有効化する方法は二つあります。</p></div>
<div class="ulist"><ul>
<li>
<p>
場合によっては、ドライバモジュールに設定オプションが存在します。例えば、一部の
Intelドライバでは</p>
<div class="listingblock">
<div class="content monospaced">
<pre>max_vfs=4</pre>
</div></div>
<div class="paragraph">
<p>この設定は、<strong>/etc/modprobe.d/</strong> ディレクトリに<em>.conf</em>拡張子でファイルを配置することで実現できます<strong>。</strong>
（その後、initramfs の更新をお忘れなく）</p></div>
<div class="paragraph">
<p>正確なパラメータやオプションについては、
ドライバーモジュールのドキュメントをご参照ください。</p></div>
</li>
<li>
<p>
二つ目の、より汎用的な方法は<span class="monospaced">sysfs</span> の使用です。
デバイスとドライバがこれをサポートしている場合、
オンザフライで VF の数を変更できます。
例えば、デバイス 0000:01:00.0 に 4 つの VF を設定するには、以下を実行します：</p>
<div class="listingblock">
<div class="content monospaced">
<pre># echo 4 &amp;gt; /sys/bus/pci/devices/0000:01:00.0/sriov_numvfs</pre>
</div></div>
<div class="paragraph">
<p>この変更を永続化するには、Debianパッケージ「sysfsutils」をご利用いただけます。
インストール後、<strong>/etc/sysfs.conf</strong>または<strong>/etc/sysfs.d/</strong> 内の「FILE.conf」で設定を行ってください<strong>。</strong></p></div>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="_vm_configuration">仮想マシン設定<a class="headerlink" href="#_vm_configuration" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>仮想機能を作成後、<span class="monospaced">lspci</span> で出力すると個別の PCI(e) デバイスとして確認できるはずです。それらの ID を取得し、<a href="#qm_pci_passthrough_vm_config">通常の PCI(e) デバイスと同様に処理してください</a>。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_mediated_devices_vgpu_gvt_g">10.9.4. 仲介デバイス（vGPU、GVT-g）
<a class="headerlink" href="#_mediated_devices_vgpu_gvt_g" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>仲介デバイスは、物理ハードウェアの機能や性能を仮想化ハードウェアで再利用する別の方法です。
これらは、IntelのGVT-gやNVIDIAのGRID技術で使用されるvGPUなど、
仮想化されたGPU環境で最も一般的に見られます。</p></div>
<div class="paragraph">
<p>これにより、物理カードはSR-IOVと同様に仮想カードを生成することが可能となります。
違いとしては、仲介デバイスはホスト上でPCI(e)デバイスとして認識されず、仮想マシン内でのみ使用に適している点が挙げられます。</p></div>
<div class="sect4">
<h5 id="_host_configuration_3">ホスト設定<a class="headerlink" href="#_host_configuration_3" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>通常、お使いのカードのドライバがその機能をサポートしている必要があります。
サポートされていない場合、動作しません。
互換性のあるドライバとその設定方法については、
ベンダーにお問い合わせください。</p></div>
<div class="paragraph">
<p>インテルのGVT-g用ドライバはカーネルに統合されており、第5、第6、第7世代インテルCoreプロセッサ、ならびにE3 v4、E3 v5、E3 v6 Xeonプロセッサで動作するはずです。</p></div>
<div class="paragraph">
<p>インテルグラフィックスで有効化するには、モジュール
<em>kvmgt</em>をロードする必要があります（例：<span class="monospaced">/etc/modules</span> 経由）。
さらに<a href="#sysboot_edit_kernel_cmdline">カーネルコマンドラインで</a>有効化し、以下のパラメータを追加してください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>i915.enable_gvt=1</pre>
</div></div>
<div class="paragraph">
<p>その後、<a href="#qm_pci_passthrough_update_initramfs"> <span class="monospaced">initramfsの</span>更新を</a>忘れずに行い、
ホストを再起動してください。</p></div>
</div>
<div class="sect4">
<h5 id="_vm_configuration_2">仮想マシン設定<a class="headerlink" href="#_vm_configuration_2" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>仲介デバイスを使用するには、<span class="monospaced">hostpciX</span>VM設定オプション<span class="monospaced">でmdevプロパティ</span>を指定するだけで結構です。</p></div>
<div class="paragraph">
<p>サポートされているデバイスは<em>sysfs</em> 経由で確認できます。例えば、デバイス<em>0000:00:02.0</em>のサポートタイプを一覧表示するには、以下を実行します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ls /sys/bus/pci/devices/0000:00:02.0/mdev_supported_types</pre>
</div></div>
<div class="paragraph">
<p>各エントリはディレクトリであり、以下の重要なファイルを含みます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>available_instances</em>には、このタイプのインスタンスでまだ利用可能な数が含まれます。
VM 内で<em>mdev</em>が使用されるたびに、この数は減少します。</p>
</li>
<li>
<p>
<em>description</em>には、このタイプの機能に関する簡単な説明が含まれます。</p>
</li>
<li>
<p>
<em>create は</em>、そのようなデバイスを作成するためのエンドポイントです。Proxmox VE は、<span class="monospaced">mdev</span>を持つ<em>hostpciX</em>オプションが設定されている場合、これを自動的に行います。</p>
</li>
</ul></div>
<div class="paragraph">
<p><span class="monospaced">Intel GVT-g vGPU</span>（<span class="monospaced">Intel Skylake 6700k</span>）を使用した設定例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -hostpci0 00:02.0,mdev=i915-GVTg_V5_4</pre>
</div></div>
<div class="paragraph">
<p>この設定により、Proxmox VE は VM 起動時に自動的に該当デバイスを作成し、
VM 停止時にクリーンアップを行います。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="_use_in_clusters">10.9.5. クラスタ環境でのご利用
<a class="headerlink" href="#_use_in_clusters" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>クラスタレベルでのデバイスマッピングも可能です。これにより、高可用性（HA）環境での適切な利用、ハードウェア変更の検出、非rootユーザーによる設定が可能となります。詳細は<a href="#resource_mapping">リソースマッピング</a>をご参照ください。</p></div>
</div>
<div class="sect3">
<h4 id="qm_pci_viommu">10.9.6. vIOMMU（エミュレートされたIOMMU）
<a class="headerlink" href="#qm_pci_viommu" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>vIOMMUは仮想マシン内でハードウェアIOMMUをエミュレートする技術であり、仮想化されたI/Oデバイスに対するメモリアクセス制御とセキュリティを強化します。vIOMMUオプションを使用することで、<a href="https://pve.proxmox.com/wiki/Nested_Virtualization">ネスト型仮想化を介して</a>レベル1仮想マシンからレベル2仮想マシンへPCI(e)デバイスをパススルーすることも可能となります。
ホストからネストされた仮想マシンへ物理 PCI(e) デバイスをパススルーするには、
PCI(e) パススルーの手順に従ってください。</p></div>
<div class="paragraph">
<p>現在、2種類の実装が利用可能です：IntelとVirtIOです。</p></div>
<div class="sect4">
<h5 id="_intel_viommu">Intel vIOMMU
<a class="headerlink" href="#_intel_viommu" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Intel vIOMMU 対応 VM の要件:</p></div>
<div class="ulist"><ul>
<li>
<p>
ホストでIntelまたはAMD CPUを使用している場合、
仮想マシンのカーネルパラメータで<span class="monospaced">intel_iommu=on</span>を設定することが重要です。</p>
</li>
<li>
<p>
Intel vIOMMU を使用するには、マシンタイプとして<strong>q35</strong>を設定する必要があります。</p>
</li>
</ul></div>
<div class="paragraph">
<p>すべての要件を満たしている場合、PCIデバイスをパススルーできるVMの設定において、
マシンパラメータに<span class="monospaced">「viommu=intel</span>」を追加できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -machine q35,viommu=intel</pre>
</div></div>
<div class="paragraph">
<p><a href="https://wiki.qemu.org/Features/VT-d">VT-d に関する QEMU ドキュメント</a></p></div>
</div>
<div class="sect4">
<h5 id="_virtio_viommu">VirtIO vIOMMU
<a class="headerlink" href="#_virtio_viommu" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>このvIOMMU実装はより新しく、Intel vIOMMUほどの制限はありませんが、
現時点では実稼働環境での使用例が少なく、ドキュメントも不足しております。</p></div>
<div class="paragraph">
<p>VirtIO vIOMMUではカーネルパラメータの設定は<strong>不要です</strong>。またマシンタイプとしてq35を使用<strong>する必要もありませんが</strong>、PCIeを利用される場合には推奨されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set VMID -machine q35,viommu=virtio</pre>
</div></div>
<div class="paragraph">
<p><a href="https://web.archive.org/web/20230804075844/https://michael2012z.medium.com/virtio-iommu-789369049443">Michael Zhao氏によるvirtio-iommu解説ブログ記事</a></p></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hookscripts">
<span>10.10.</span>フックスクリ<span>プト</span>
<a class="headerlink" href="#_hookscripts" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>仮想マシンには、configプロパティ<span class="monospaced">のhookscriptを使用して</span>フックスクリプトを追加できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set 100 --hookscript local:snippets/hookscript.pl</pre>
</div></div>
<div class="paragraph">
<p>このスクリプトは、ゲストのライフサイクルの様々な段階で呼び出されます。
例とドキュメントについては、以下の例示スクリプトをご参照ください。
<span class="monospaced">/usr/share/pve-docs/examples/guest-example-hookscript.pl</span></p></div>
</div>
<div class="sect2">
<h3 id="qm_hibernate">
<span>10.11.</span>ハイバネーション
<a class="headerlink" href="#qm_hibernate" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>GUI オプションの<span class="monospaced">「Hibernate</span>」または</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm suspend ID --todisk</pre>
</div></div>
<div class="paragraph">
<p>これにより、メモリの現在の内容がディスクに保存され、
仮想マシンは停止状態となります。次回起動時にはメモリ内容が読み込まれ、
中断した時点から仮想マシンを継続できます。</p></div>
<div class="paragraph" id="qm_vmstatestorage">
<div class="title">状態保存先の選択</div><p>メモリの保存先が指定されていない場合、以下の順序で自動的に選択されます：</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
ストレージは、VM設定<span class="monospaced">のvmstatestorage</span>から提供されます。</p>
</li>
<li>
<p>
いずれかのVMディスクから共有される最初のストレージ。</p>
</li>
<li>
<p>
いずれかのVMディスクから取得した最初の非共有ストレージ。</p>
</li>
<li>
<p>
フォールバックとして<span class="monospaced">ローカル</span>ストレージを使用します。</p>
</li>
</ol></div>
</div>
<div class="sect2">
<h3 id="resource_mapping">
<span>10.12. リソースマッピング</span>
<a class="headerlink" href="#resource_mapping" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-resource-mappings.png">
<img src="images/screenshot/gui-datacenter-resource-mappings.png" alt="screenshot/gui-datacenter-resource-mappings.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>ローカルリソース（例：PCIデバイスのアドレス）を使用または参照する場合、
生のアドレスやIDを使用すると問題が生じる場合があります。例えば：</p></div>
<div class="ulist"><ul>
<li>
<p>
HA（高可用性）を使用する場合、ターゲットノード上に同一IDまたはパスを持つ異なるデバイスが存在することがあります。
このようなゲストをHAグループに割り当てる際に注意を怠ると、誤ったデバイスが使用され、設定が破損する可能性があります。</p>
</li>
<li>
<p>
ハードウェアの変更によりIDやパスが変更される可能性があるため、割り当てられた全デバイスを確認し、パスやIDが依然として正しいかどうかを検証する必要があります。</p>
</li>
</ul></div>
<div class="paragraph">
<p>この問題をより適切に処理するため、クラスタ全体のリソースマッピングを定義することが可能です。これにより、リソースにはクラスタ内で一意の、ユーザーが選択した識別子が割り当てられ、異なるホスト上の異なるデバイスに対応させることができます。これにより、HAが誤ったデバイスでゲストを起動する事態を防ぎ、ハードウェアの変更を検出することが可能となります。</p></div>
<div class="paragraph">
<p>このようなマッピングの作成は、Proxmox VEのWeb GUIにおいて、
<span class="monospaced">「データセンター」</span>内の<span class="monospaced">「リソースマッピング」</span>カテゴリの該当タブから、
またはCLIで以下のコマンドで行えます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesh create /cluster/mapping/&amp;lt;type&amp;gt; &amp;lt;options&amp;gt;</pre>
</div></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-mapping-pci-edit.png">
<img src="images/screenshot/gui-datacenter-mapping-pci-edit.png" alt="screenshot/gui-datacenter-mapping-pci-edit.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>ここで<span class="monospaced">&amp;lt;type&amp;gt;</span>はハードウェアタイプ（現在は<span class="monospaced">pci</span>、<span class="monospaced">usb</span>、<a href="#qm_virtiofs">dir</a> のいずれか）、
<span class="monospaced">&amp;lt;options&amp;gt;</span>はデバイスマッピングやその他の設定パラメータです。</p></div>
<div class="paragraph">
<p>なお、オプションには必ずmapプロパティを含め、
該当ハードウェアの識別プロパティを全て指定する必要があります。
これによりハードウェアの変更がなかったこと、
正しいデバイスがパススルーされていることを検証可能となります。</p></div>
<div class="paragraph">
<p>例えば、ノード<span class="monospaced">node1</span> 上でデバイス ID<span class="monospaced">0001</span>、ベンダー ID<span class="monospaced">0002</span>の PCI デバイスを
パス<span class="monospaced">0000:01:00.0</span>として<span class="monospaced">device1</span>に追加し、<span class="monospaced">ノード node2</span>上では<span class="monospaced">0000:02:00.0</span>として追加するには、
以下のように追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesh create /cluster/mapping/pci --id device1 \
 --map node=node1,path=0000:01:00.0,id=0002:0001 \
 --map node=node2,path=0000:02:00.0,id=0002:0001</pre>
</div></div>
<div class="paragraph">
<p>このデバイスをマッピングすべき各ノードに対して、<span class="monospaced">mapパラメ</span>ータを繰り返し指定する必要があります（なお、現在のところ、1つのマッピングにつきノードごとに1つのUSBデバイスのみをマッピングできます）。</p></div>
<div class="paragraph">
<p>GUIを使用すると、適切なプロパティが自動的に取得されAPIに送信されるため、この作業が大幅に簡素化されます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-mapping-usb-edit.png">
<img src="images/screenshot/gui-datacenter-mapping-usb-edit.png" alt="screenshot/gui-datacenter-mapping-usb-edit.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>また、PCIデバイスがノードごとに複数のデバイスを提供し、
ノードごとに複数のマッププロパティを持つことも可能です。
そのようなデバイスがゲストに割り当てられた場合、
ゲスト起動時には最初に利用可能なデバイスが使用されます。
指定されたパスの順序は試行順序にもなりますので、
任意の割り当てポリシーを実装することが可能です。</p></div>
<div class="paragraph">
<p>これはSR-IOV対応デバイスにおいて有用です。
特定の仮想機能が通過するかどうかが重要でない場合があるためです。</p></div>
<div class="paragraph">
<p>このようなデバイスをゲストに割り当てるには、GUI または</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set ID -hostpci0 &amp;lt;name&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>PCIデバイスについては、または</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm set &amp;lt;vmid&amp;gt; -usb0 &amp;lt;name&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>USBデバイスの場合は</p></div>
<div class="paragraph">
<p>ここで<span class="monospaced">&amp;lt;vmid&amp;gt;</span>はゲストのID、<span class="monospaced">&amp;lt;name&amp;gt;</span>は作成するマッピングに付ける名前です。
デバイスのパススルーに関する通常のオプション（例：<span class="monospaced">mdev</span>）はすべて使用可能です。</p></div>
<div class="paragraph">
<p><span class="monospaced">マッピング</span>を作成するには<span class="monospaced">、</span> <span class="monospaced">/mapping/&amp;lt;type&amp;gt;/&amp;lt;name&amp;gt;</span>に対する<span class="monospaced">Mapping.Modify</span>が必要です
（<span class="monospaced">&amp;lt;type&amp;gt;</span>はデバイスタイプ、<span class="monospaced">&amp;lt;name&amp;gt;</span>はマッピング名です）。</p></div>
<div class="paragraph">
<p>これらのマッピングを利用するには、<span class="monospaced">/mapping/&amp;lt;type&amp;gt;/&amp;lt;name&amp;gt;</span>に対する<span class="monospaced">Mapping.Use</span>が必要です
（設定編集のための通常のゲスト権限に加えて）。</p></div>
<div class="paragraph">
<div class="title">追加オプション</div><p>クラスタ全体のリソースマッピングを定義する際には、追加のオプションが利用可能です。
現在、以下のオプションが用意されています：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">mdev</span>(PCI): このオプションは、PCIデバイスが<span class="monospaced">仲介デバイスを</span>提供可能であることを示します。有効化すると、ゲスト上で設定時にタイプを選択できます。複数のPCIデバイスがマッピング対象として選択された場合、選択されたタイプの利用可能なインスタンスが最初に存在するデバイス上に仲介デバイスが作成されます。</p>
</li>
<li>
<p>
<span class="monospaced">live-migration-capable</span>(PCI): この設定により、PCIデバイスはノード間でライブマイグレーション可能となります。
   これにはドライバとハードウェアのサポートが必要です。
   最近のカーネルを搭載したNVIDIA GPUのみがこれをサポートすることが確認されています。
   なお、パススルーデバイスのライブマイグレーションは実験的な機能であり、
   動作しない場合や問題を引き起こす可能性があることにご注意ください。</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_managing_virtual_machines_with_span_class_monospaced_qm_span">
<span>10.13.<span class="monospaced">qm</span>による仮想マシンの管理</span>
<a class="headerlink" href="#_managing_virtual_machines_with_span_class_monospaced_qm_span" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>qm は、Proxmox VE 上の QEMU/KVM 仮想マシンを管理するためのツールです。仮想マシンの作成・削除、実行制御（起動/停止/一時停止/再開）が可能です。さらに、関連する設定ファイル内のパラメータ設定にも qm を使用できます。仮想ディスクの作成・削除も可能です。</p></div>
<div class="sect3">
<h4 id="_cli_usage_examples">10.13.1. CLI 使用例<a class="headerlink" href="#_cli_usage_examples" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><em>ローカルストレージ</em>にアップロードされたISOファイルを使用し、
<em>ローカルLVMストレージ</em>上に4GBのIDEディスクを備えた仮想マシンを作成します</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm create 300 -ide0 local-lvm:4 -net0 e1000 -cdrom local:iso/proxmox-mailgateway_2.1.iso</pre>
</div></div>
<div class="paragraph">
<p>新規仮想マシンを起動します</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm start 300</pre>
</div></div>
<div class="paragraph">
<p>シャットダウン要求を送信し、VMが停止するまで待機します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm shutdown 300 &amp;amp;&amp;amp; qm wait 300</pre>
</div></div>
<div class="paragraph">
<p>上記と同様ですが、40秒間のみ待機します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm shutdown 300 &amp;amp;&amp;amp; qm wait 300 -timeout 40</pre>
</div></div>
<div class="paragraph">
<p>仮想マシンがシャットダウンしない場合、強制停止し、実行中のシャットダウンタスクを上書きします。
仮想マシンの停止はデータ損失を引き起こす可能性があるため、ご注意ください。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm stop 300 -overrule-shutdown 1</pre>
</div></div>
<div class="paragraph">
<p>仮想マシンの破棄は常にアクセス制御リストからの削除を伴い、
また常に仮想マシンのファイアウォール設定を削除します。
レプリケーションジョブ、バックアップジョブ、
および高可用性リソース構成から仮想マシンを追加で削除したい場合は、
<em>--purge を有効</em>にする必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm destroy 300 --purge</pre>
</div></div>
<div class="paragraph">
<p>ディスクイメージを別のストレージに移動します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm move-disk 300 scsi0 other-storage</pre>
</div></div>
<div class="paragraph">
<p>ディスクイメージを別の仮想マシンに再割り当てします。これにより、ソース仮想マシンからディスク<span class="monospaced">scsi1</span>が削除され、ターゲット仮想マシンに<span class="monospaced">scsi3</span>として接続されます。バックグラウンドでは、ディスクイメージの名前が新しい所有者に一致するよう変更されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm move-disk 300 scsi1 --target-vmid 400 --target-disk scsi3</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="qm_configuration">
<span>10.14. 設定</span>
<a class="headerlink" href="#qm_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>仮想マシンの設定ファイルは、Proxmoxクラスタのファイルシステム内に保存され、
<span class="monospaced">/etc/pve/qemu-server/&amp;lt;VMID&amp;gt;.conf</span> でアクセス可能です。
<span class="monospaced">/etc/pve/</span>内に保存される他のファイルと同様に、
自動的にクラスタ内の他の全ノードに複製されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">VMID 100未満は内部用途に予約されており、VMIDはクラスタ全体で一意である必要があります。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">仮想マシン設定ファイルの例</div>
<div class="content monospaced">
<pre>boot: order=virtio0;net0
cores: 1
sockets: 1
memory: 512
name: webmail
ostype: l26
net0: e1000=EE:D2:28:5F:B6:3E,bridge=vmbr0
virtio0: local:vm-100-disk-1,size=32G</pre>
</div></div>
<div class="paragraph">
<p>これらの設定ファイルは単純なテキストファイルであり、通常のテキストエディタ（<span class="monospaced">vi</span>、<span class="monospaced">nanoなど</span>）で編集できます。
小規模な修正を行う際には便利ですが、変更を反映させるには仮想マシンを再起動する必要がある点にご留意ください。
そのため、通常はqmコマンドを使用してこれらのファイルを生成・修正するか、GUIで全体を操作する方が適切です。
当社のツールキットは、実行中の仮想マシンへの変更を瞬時に適用する十分な知能を備えています。</p></div>
<div class="paragraph">
<p>そのため、通常は<span class="monospaced">qmコマンドを使用してこれらの</span>ファイルを生成・修正するか、GUIで全てを処理することをお勧めします。
当社のツールキットは、実行中のVMに対してほとんどの変更を即時適用できるほど高度です。この機能は「ホットプラグ」と呼ばれ、この場合VMの再起動は不要です。</p></div>
<div class="sect3">
<h4 id="_file_format">10.14.1. ファイル形式
<a class="headerlink" href="#_file_format" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>仮想マシンの設定ファイルは、コロンで区切られたキー/値形式のシンプルな形式を採用しております。
各行は以下の形式で記述されます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># これはコメントです
OPTION: value</pre>
</div></div>
<div class="paragraph">
<p>これらのファイル内の空白行は無視され、<span class="monospaced">#</span>文字で始まる行は
コメントとして扱われ、同様に無視されます。</p></div>
</div>
<div class="sect3">
<h4 id="qm_snapshots">10.14.2. スナップショット
<a class="headerlink" href="#qm_snapshots" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>スナップショットを作成すると、<span class="monospaced">qm は</span>スナップショット作成時の設定を
同じ設定ファイル内の独立したスナップショットセクションに保存します。
例えば、「testsnapshot」というスナップショットを作成すると、
設定ファイルは次のようになります:</p></div>
<div class="listingblock">
<div class="title">スナップショット付き VM 構成</div>
<div class="content monospaced">
<pre>memory: 512
swap: 512
parent: testsnaphot...


[testsnaphot]
memory: 512
swap: 512
snaptime: 1457170803
...</pre>
</div></div>
<div class="paragraph">
<p>スナップショットに関連するプロパティとして、<span class="monospaced">parent</span><span class="monospaced">やsnaptimeなどが</span>存在します。<span class="monospaced">parent</span>プロパティはスナップショット間の親子関係を保存するために使用されます。<span class="monospaced">snaptimeはス</span>ナップショットの作成時刻（Unixエポック）を表します。</p></div>
<div class="paragraph">
<p>オプションで、実行中の仮想マシンの<span class="monospaced">メモリ状態をvmstateオプションで</span>保存することも可能です。
仮想マシン状態の保存先ストレージの選択方法の詳細については、
<a href="#qm_hibernate">「ハイバネーション」</a>章の<a href="#qm_vmstatestorage">「状態保存先の選択</a>」をご参照ください。</p></div>
</div>
<div class="sect3">
<h4 id="qm_options">10.14.3. オプション
<a class="headerlink" href="#qm_options" title="Permalink to this heading"></a></h4>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">acpi</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ACPI の有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">affinity</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ゲストプロセスを実行するために使用されるホストコアの一覧です。例：0,5,8-11</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">agent</span>:<span class="monospaced">[enabled=]&amp;lt;1|0&amp;gt; [,freeze-fs-on-backup=&amp;lt;1|0&amp;gt;] [,fstrim_cloned_disks=&amp;lt;1|0&amp;gt;] [,type=&amp;lt;virtio|isa&amp;gt;]</span></dt>
<dd>
<p>
QEMUゲストエージェントとの通信およびそのプロパティの有効化/無効化。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">enabled=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
仮想マシン内で動作する QEMU ゲストエージェント (QGA) との通信を有効/無効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">freeze-fs-on-backup=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
バックアップ時のゲストファイルシステムの凍結/解凍（整合性確保のため）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">fstrim_cloned_disks=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ディスクの移動または仮想マシンの移行後に fstrim を実行します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">type=&amp;lt;isa | virtio&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">virtio</span>)</dt>
<dd>
<p>
エージェントタイプを選択してください</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">amd-sev</span>:<span class="monospaced">[type=]&amp;lt;sev-type&amp;gt; [,allow-smt=&amp;lt;1|0&amp;gt;] [,kernel-hashes=&amp;lt;1|0&amp;gt;] [,no-debug=&amp;lt;1|0&amp;gt;] [,no-key-sharing=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
AMD CPU によるセキュア暗号化仮想化 (SEV) 機能</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">allow-smt=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
同時マルチスレッディング (SMT) を許可するポリシービットを設定します（SEV-SNP 用でない限り無視されます）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">kernel-hashes=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ゲストファームウェアにカーネルハッシュを追加し、Linuxカーネル起動時の検証を可能にします</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">no-debug=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ゲストのデバッグを禁止するポリシービットを設定します</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">no-key-sharing=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ポリシービットを設定し、他のゲストとのキー共有を禁止します（SEV-SNPでは無視されます）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">type=&amp;lt;sev-type&amp;gt;</span></dt>
<dd>
<p>
標準のSEV<em>をtype=stdで</em>有効化するか、実験的なSEV-ES<em>をesオプション</em>で有効化するか、実験的なSEV-SNPを<em>snpオプション</em>で有効化します。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">アーキテクチャ</span>:<span class="monospaced">&amp;lt;aarch64 | x86_64&amp;gt;</span></dt>
<dd>
<p>
仮想プロセッサアーキテクチャ。デフォルトはホストに設定されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">引数</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
kvmに渡す任意の引数。例：</p>
<div class="paragraph">
<p>引数: -no-reboot -smbios<em>type=0,vendor=FOO</em></p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このオプションは専門家のみがご利用ください。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">audio0</span>:<span class="monospaced">デバイス=&amp;lt;ich9-intel-hda|intel-hda|AC97&amp;gt; [,ドライバー=&amp;lt;spice|none&amp;gt;]</span></dt>
<dd>
<p>
オーディオデバイスの設定。QXL/Spiceとの組み合わせで有用です。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">デバイス=&amp;lt;AC97 | ich9-intel-hda | intel-hda&amp;gt;</span></dt>
<dd>
<p>
オーディオデバイスを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">driver=&amp;lt;none | spice&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">spice</span>)</dt>
<dd>
<p>
オーディオデバイスのドライババックエンド。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">自動起動</span>:<span class="monospaced">&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
クラッシュ後の自動再起動（現在は無視されます）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">balloon</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
仮想マシン（VM）のターゲットRAM容量（MiB単位）。ゼロを使用するとバルーンドライバが無効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bios</span>:<span class="monospaced">&amp;lt;ovmf | seabios&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">seabios</span>)</dt>
<dd>
<p>
BIOSの実装を選択します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">boot</span>:<span class="monospaced">[[レガシー=]&amp;lt;[acdn]{1,4}&amp;gt;] [,順序=&amp;lt;デバイス[;デバイス...]&amp;gt;]</span></dt>
<dd>
<p>
ゲストの起動順序を指定します。キーなしまたは<em>legacy=</em>の使用は非推奨です。代わりに<em>order=</em>サブプロパティを使用してください。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">レガシーモード=&amp;lt;[acdn]{1,4}&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">cdn</span>)</dt>
<dd>
<p>
フロッピーディスク (a)、ハードディスク (c)、CD-ROM (d)、またはネットワーク (n) から起動します。非推奨です。代わりに<em>order=</em>を使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">順序=&amp;lt;デバイス[;デバイス...]&amp;gt;</span></dt>
<dd>
<p>
ゲストは、ここに表示される順序でデバイスからの起動を試みます。</p>
<div class="paragraph">
<p>ディスク、光学ドライブ、パススルーされたストレージUSBデバイスは直接起動され、
NICはPXEをロードします。PCIeデバイスはディスクのように動作するか（例：NVMe）、
オプションROMをロードします（例：RAIDコントローラー、ハードウェアNIC）。</p></div>
<div class="paragraph">
<p>なお、このリストに記載されたデバイスのみが起動可能としてマークされ、
ゲストファームウェア（BIOS/UEFI）によって読み込まれます。
複数のディスクを起動に必要とする場合（例：ソフトウェアRAID）、
それら全てをここに指定する必要があります。</p></div>
<div class="paragraph">
<p>指定された場合、非推奨の<em>legacy=[acdn]*</em>値を上書きします。</p></div>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">bootdisk</span>:<span class="monospaced">(ide|sata|scsi|virtio)\d+</span></dt>
<dd>
<p>
指定したディスクからの起動を有効にします。非推奨：代わりに<em>boot: order=foo;bar</em>をご使用ください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cdrom</span>:<span class="monospaced">&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
これはオプション -ide2 の別名です</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cicustom</span>:<span class="monospaced">[meta=&amp;lt;ボリューム&amp;gt;] [,network=&amp;lt;ボリューム&amp;gt;] [,user=&amp;lt;ボリューム&amp;gt;] [,vendor=&amp;lt;ボリューム&amp;gt;]</span></dt>
<dd>
<p>
cloud-init: 起動時に自動生成されるファイルを置き換えるカスタムファイルを指定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">メタ=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
クラウドイニシャライゼーション経由で仮想マシンに渡されるすべてのメタデータを含むカスタムファイルを指定します。
これはプロバイダー固有の仕様であり、configdrive2とnocloudでは異なります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ネットワーク=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
クラウドイニシャライズを介して、すべてのネットワークデータを含むカスタムファイルを仮想マシンに渡す場合。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ユーザー=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
クラウドイニシャライズを介して、すべてのユーザーデータを含むカスタムファイルを仮想マシンに渡す場合。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ベンダー=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
クラウドイニシャライザ経由で、すべてのベンダーデータを含むカスタムファイルを仮想マシンに渡す場合。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">cipassword</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
cloud-init: ユーザーに割り当てるパスワード。一般的に使用は推奨されません。代わりにSSH鍵をご利用ください。また、古いバージョンのcloud-initはハッシュ化されたパスワードをサポートしていない点にもご注意ください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">citype</span>:<span class="monospaced">&amp;lt;configdrive2 | nocloud | opennebula&amp;gt;</span></dt>
<dd>
<p>
cloud-init の設定形式を指定します。デフォルトは設定されたオペレーティングシステムタイプ（<span class="monospaced">ostype</span>）に依存します。Linux では<span class="monospaced">nocloud</span>形式、Windows では<span class="monospaced">configdrive2</span>形式を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ciupgrade</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
cloud-init: 初回起動後に自動パッケージアップグレードを実行します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ciuser</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
cloud-init: イメージで設定されたデフォルトユーザーではなく、SSHキーとパスワードを変更するユーザー名を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">コア数</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ソケットあたりのコア数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cpu</span>:<span class="monospaced">[[cputype=]&amp;lt;string&amp;gt;] [,flags=&amp;lt;+FLAG[;-FLAG...]&amp;gt;] [,hidden=&amp;lt;1|0&amp;gt;][,hv-ベンダーID=&amp;lt;ベンダーID&amp;gt;] [,物理ビット数=&amp;lt;8-64|ホスト&amp;gt;] [,報告モデル=&amp;lt;列挙型&amp;gt;]</span></dt>
<dd>
<p>
エミュレートされる CPU の種類。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">cputype=&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">kvm64</span>)</dt>
<dd>
<p>
エミュレートされるCPUタイプ。デフォルトまたはカスタム名（カスタムモデル名は<em>custom-</em> で始まる必要があります）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">フラグ=&amp;lt;+フラグ[;-フラグ...]&amp;gt;</span></dt>
<dd>
<p>
追加のCPUフラグを<em>セミコロン（;）</em>で区切って列挙します。フラグを有効にするには<em>+FLAG</em>、無効にするには<em>-FLAG</em>を使用します。カスタムCPUモデルでは、QEMU/KVMがサポートする任意のフラグを指定できます。セキュリティ上の理由から、VM固有のフラグは以下のセットから選択する必要があります：pcid, spec-ctrl, ibpb, ssbd, virt-ssbd, amd-ssbd, amd-no-ssb, pdpe1gb, md-clear, hv-tlbflush, hv-evmcs, aes</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hidden=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
KVM仮想マシンとして識別しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hv-ベンダーID=&amp;lt;ベンダーID&amp;gt;</span></dt>
<dd>
<p>
Hyper-VのベンダーIDです。Windowsゲスト内の特定のドライバやプログラムでは、特定のIDが必要となる場合があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">物理ビット数は&amp;lt;8-64|ホスト&amp;gt;</span>です。</dt>
<dd>
<p>
ゲスト OS に報告される物理メモリアドレスのビット数。ホストの値以下である必要があります。ホストの CPU 値を使用するには<em>「host」</em>に設定しますが、これにより他の値を持つ CPU へのライブマイグレーションが機能しなくなる点にご注意ください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">reported-model=&amp;lt;486 | Broadwell | Broadwell-IBRS | Broadwell-noTSX | Broadwell-noTSX-IBRS | Cascadelake-Server | Cascadelake-Server-noTSX | Cascadelake-Server-v2 | Cascadelake-Server-v4 | Cascadelake-Server-v5 | Conroe | Cooperlake | Cooperlake-v2 | EPYC | EPYC-Genoa | EPYC-IBPB | EPYC-Milan | EPYC-Milan-v2 | EPYC-Rome | EPYC-Rome-v2 | EPYC-Rome-v3 | EPYC-Rome-v4 | EPYC-v3 | EPYC-v4 | GraniteRapids | Haswell | Haswell-IBRS | Haswell-noTSX | ハスウェル-noTSX-IBRS | アイスレイク-クライアント | アイスレイク-クライアント-noTSX | アイスレイク-サーバー | アイスレイク-サーバー-noTSX | アイスレイク-サーバー-v3 | アイスレイク-サーバー-v4 | アイスレイク-サーバー-v5 | アイスレイク-サーバー-v6 | IvyBridge | IvyBridge-IBRS | KnightsMill | Nehalem | Nehalem-IBRS | Opteron_G1 | Opteron_G2 | Opteron_G3 | Opteron_G4 | Opteron_G5 | Penryn | SandyBridge | SandyBridge-IBRS | SapphireRapids | SapphireRapids-v2 | スカイレイク-クライアント | スカイレイク-クライアント-IBRS | スカイレイク-クライアント-noTSX-IBRS | スカイレイク-クライアント-v4 | スカイレイク-サーバー | スカイレイク-サーバー-IBRS | スカイレイク-サーバー-noTSX-IBRS | スカイレイク-サーバー-v4 | Skylake-Server-v5 | Westmere | Westmere-IBRS | Athlon | Core2Duo | CoreDuo | Host | KVM32 | KVM64 | Max | Pentium | Pentium2 | Pentium3 | Phenom | QEMU32 | QEMU64&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">KVM64</span>)</dt>
<dd>
<p>
ゲストに報告するCPUモデルとベンダー。QEMU/KVMがサポートするモデルである必要があります。カスタムCPUモデル定義でのみ有効であり、デフォルトモデルは常にゲストOSに自身を報告します。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">cpulimit</span>:<span class="monospaced">&amp;lt;数値&amp;gt; (0 - 128)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU 使用率の上限。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンピューターに2つのCPUがある場合、合計で<em>2の</em>CPU時間が割り当てられます。値<em>0は</em>CPU制限なしを示します。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">cpuunits</span>:<span class="monospaced">&amp;lt;整数&amp;gt; (1 - 262144)</span>(<em>デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
VMのCPUウェイト。カーネルのフェアスケジューラで使用される引数です。数値が大きいほど、このVMが割り当てられるCPU時間が増加します。数値は、他のすべての実行中のVMのウェイトに対する相対値となります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">description</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
VMの説明。WebインターフェースのVM概要に表示されます。設定ファイル内にコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">efidisk0</span>:<span class="monospaced">[ファイル=]&amp;lt;ボリューム&amp;gt; [,efitype=&amp;lt;2m|4m&amp;gt;] [,format=&amp;lt;enum&amp;gt;] [,pre-enrolled-keys=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;ディスクサイズ&amp;gt;]</span></dt>
<dd>
<p>
EFI変数を保存するためのディスクを設定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">efitype=&amp;lt;2m | 4m&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">2m</span>)</dt>
<dd>
<p>
OVMF EFI 変数のサイズとタイプ。<em>4m が</em>より新しく推奨され、セキュアブートに必須です。下位互換性のため、特に指定がない場合は<em>2m</em>が使用されます。arch=aarch64 (ARM) の VM では無視されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ファイル=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
ドライブのバックアップボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">format=&amp;lt;cloop | qcow | qcow2 | qed | raw | vmdk&amp;gt;</span></dt>
<dd>
<p>
ドライブのバッキングファイルのデータ形式。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">事前登録済みキー=&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
<em>efitype=4m</em> を使用する場合、ディストリビューション固有および Microsoft 標準キーが登録された EFI 変数テンプレートを使用します。これによりデフォルトでセキュアブートが有効になりますが、VM 内から無効化することは可能です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=&amp;lt;ディスクサイズ&amp;gt;</span></dt>
<dd>
<p>
ディスクサイズ。これは純粋に情報提供用であり、効果はありません。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">freeze</span>:<span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
起動時にCPUを凍結します（実行開始には<em>c</em>monitorコマンドをご利用ください）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">フックスクリプト</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
VMのライフサイクルにおける様々な段階で実行されるスクリプトです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hostpci[n]</span>:<span class="monospaced">[[host=]&amp;lt;HOSTPCIID[;HOSTPCIID2...]&amp;gt;] [,device-id=&amp;lt;hex id&amp;gt;] [,legacy-igd=&amp;lt;1|0&amp;gt;][,マッピング=&amp;lt;マッピングID&amp;gt;] [,mdev=&amp;lt;文字列&amp;gt;] [,pcie=&amp;lt;1|0&amp;gt;] [,rombar=&amp;lt;1|0&amp;gt;][,ROMファイル=&amp;lt;文字列&amp;gt;] [,サブデバイスID=&amp;lt;16進ID&amp;gt;] [,サブベンダーID=&amp;lt;16進ID&amp;gt;] [,ベンダーID=&amp;lt;16進ID&amp;gt;] [,X-VGA=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
ホストのPCIデバイスをゲストにマッピングします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このオプションはホストハードウェアへの直接アクセスを許可します。そのため、このようなマシンの移行は不可能となります。特別な注意を払ってご利用ください。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">実験的機能です！このオプションに関する問題がユーザーから報告されています。</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">デバイスID=&amp;lt;16進ID&amp;gt;</span></dt>
<dd>
<p>
ゲストから見える PCI デバイス ID を上書きします</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ホスト=&amp;lt;HOSTPCIID[;HOSTPCIID2...]&amp;gt;</span></dt>
<dd>
<p>
ホストPCIデバイスのパススルー。ホストのPCIデバイスのID、またはホストのPCI仮想機能のリストを指定します。HOSTPCIIDの構文は以下の通りです：</p>
<div class="paragraph">
<p><em>bus:dev.func</em>(16進数)</p></div>
<div class="paragraph">
<p>既存の PCI デバイスの一覧は<em>lspci</em>コマンドで確認できます。</p></div>
<div class="paragraph">
<p>この設定か、<em>マッピング</em>キーのいずれかを設定する必要があります。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">legacy-igd=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このデバイスをレガシーIGDモードでパススルーし、VM内のプライマリかつ排他的なグラフィックスデバイスとします。<em>pc-i440fxマシン</em>タイプとVGA設定<em>なし</em>が必要です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">マッピング=&amp;lt;マッピングID&amp;gt;</span></dt>
<dd>
<p>
クラスタ全体のマッピングのIDです。これかdefault-key<em>ホストの</em>いずれかを設定する必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mdev=&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
使用する仲介デバイスの種類。
このタイプのインスタンスは、VMの起動時に作成され、
VMの停止時にクリーンアップされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">pcie=&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
PCI-Express バスを選択します（<em>q35</em>マシンモデルが必要です）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rombar=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ゲストのメモリマップ上でデバイスのROMを表示するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">romfile=&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
カスタム PCI デバイス ROM ファイル名（/usr/share/kvm/ 内に配置されている必要があります）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">sub-device-id=&amp;lt;16進ID&amp;gt;</span></dt>
<dd>
<p>
ゲストに表示される PCI サブシステムデバイス ID を上書きします</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">サブベンダーID=&amp;lt;16進ID&amp;gt;</span></dt>
<dd>
<p>
ゲストに表示される PCI サブシステムベンダー ID を上書きします</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ベンダーID=&amp;lt;16進ID&amp;gt;</span></dt>
<dd>
<p>
ゲストに表示される PCI ベンダー ID を上書きします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">x-vga=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
vfio-vga デバイスサポートを有効にします。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ホットプラグ</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">ネットワーク,ディスク,USB</span>)</dt>
<dd>
<p>
ホットプラグ機能を選択的に有効化します。以下のコンマ区切りリストで指定します：<em>ネットワーク</em>、<em>ディスク</em>、<em>CPU</em>、<em>メモリ</em>、<em>USB</em>、<em>cloudinit</em>。<em>0</em>を指定するとホットプラグ機能を完全に無効化します。<em>1</em>を指定するとデフォルト設定<span class="monospaced">（ネットワーク、ディスク、USB）</span>の別名となります。USBホットプラグは、マシンバージョン7.1以上かつostype l26、またはWindows 7以上のゲストで利用可能です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hugepages</span>:<span class="monospaced">&amp;lt;1024 | 2 | any&amp;gt;</span></dt>
<dd>
<p>
巨大ページメモリの有効化/無効化を行います。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ide[n]</span>:<span class="monospaced">[file=]&amp;lt;ボリューム名&amp;gt; [,aio=&amp;lt;ネイティブ|スレッド|io_uring&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;秒数&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;秒数&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;秒数&amp;gt;] [,cache=&amp;lt;列挙型&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;][,破棄設定=&amp;lt;無視|有効&amp;gt;] [,フォーマット設定=&amp;lt;列挙型&amp;gt;] [,I/O操作数設定=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数設定=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数持続時間設定=&amp;lt;秒&amp;gt;] [,読み取りI/O操作数設定=&amp;lt;I/O操作数&amp;gt;][,iops_rd_max=&amp;lt;iops&amp;gt;] [,iops_rd_max_length=&amp;lt;seconds&amp;gt;] [,iops_wr=&amp;lt;iops&amp;gt;] [,iops_wr_max=&amp;lt;iops&amp;gt;] [,iops_wr_max_length=&amp;lt;seconds&amp;gt;][,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;] [,mbps_wr=&amp;lt;mbps&amp;gt;] [,mbps_wr_max=&amp;lt;mbps&amp;gt;][,メディア=&amp;lt;CD-ROM|ディスク&amp;gt;] [,モデル=&amp;lt;モデル&amp;gt;] [,レプリケーション=&amp;lt;1|0&amp;gt;] [,エラー処理=&amp;lt;無視|報告|停止&amp;gt;] [,シリアル番号=&amp;lt;シリアル番号&amp;gt;] [,共有設定=&amp;lt;1|0&amp;gt;][,サイズ=&amp;lt;ディスクサイズ&amp;gt;] [,スナップショット=&amp;lt;1|0&amp;gt;] [,SSD=&amp;lt;1|0&amp;gt;] [,書き込みエラー=&amp;lt;列挙型&amp;gt;] [,WWN=&amp;lt;WWN&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをIDEハードディスクまたはCD-ROMとして使用します（nは0から3）。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">aio=&amp;lt;io_uring | native | threads&amp;gt;</span></dt>
<dd>
<p>
使用するAIOタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">backup=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
バックアップ作成時にドライブを含めるかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps=&amp;lt;bps&amp;gt;</span></dt>
<dd>
<p>
最大読み書き速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
I/Oバーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd=&amp;lt;bps&amp;gt;</span></dt>
<dd>
<p>
最大読み取り速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd_max_length=&amp;lt;seconds&amp;gt;</span></dt>
<dd>
<p>
読み取りI/Oバーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr=&amp;lt;bps&amp;gt;</span></dt>
<dd>
<p>
最大書き込み速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cache=&amp;lt;directsync | none | unsafe | writeback | writethrough&amp;gt;</span></dt>
<dd>
<p>
ドライブのキャッシュモード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ゼロ検出=&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ゼロ書き込みの検出および最適化の試行の有無を制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">discard=&amp;lt;無視 | 有効&amp;gt;</span></dt>
<dd>
<p>
ディスカード/トリム要求を基盤となるストレージに渡すかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ファイル=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
ドライブのバッキングボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">フォーマット=&amp;lt;cloop | qcow | qcow2 | qed | raw | vmdk&amp;gt;</span></dt>
<dd>
<p>
ドライブのバッキングファイルのデータ形式。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大読み書きI/O（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大スロットリングなしの読み書きI/Oプール（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
I/Oバーストの最大持続時間（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大読み取りI/O（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大スロットリングなし読み取りI/Oプール（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
読み取りI/Oバーストの最大持続時間（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大書き込みI/O（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
スロットリングなしの書き込みI/Oプールの最大秒間操作数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大持続時間（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大読み書き速度（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_max=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大スロットリング解除状態での読み書きプール（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大読み取り速度（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd_max=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大スロットリングなし読み取りプール（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大書き込み速度（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr_max=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
スロットリングなしの書き込みプールにおける最大速度（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">media=&amp;lt;cdrom | disk&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">disk</span>)</dt>
<dd>
<p>
ドライブのメディアタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">モデル=&amp;lt;モデル&amp;gt;</span></dt>
<dd>
<p>
ドライブの報告されたモデル名（URLエンコード済み、最大40バイト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replicate=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
レプリケーションジョブの対象としてドライブを考慮すべきかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rerror=&amp;lt;無視 | 報告 | 停止&amp;gt;</span></dt>
<dd>
<p>
読み取りエラー時の動作。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">シリアル番号=&amp;lt;シリアル番号&amp;gt;</span></dt>
<dd>
<p>
ドライブのシリアル番号（URLエンコード済み、最大20バイト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">共有=&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このローカル管理ボリュームを全ノードで利用可能としてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションはボリュームを自動的に共有しません。既に共有されているものとみなします。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=&amp;lt;ディスクサイズ&amp;gt;</span></dt>
<dd>
<p>
ディスクサイズ。これは純粋に情報提供用であり、効果はありません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">スナップショット=&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
qemuのスナップショットモード機能を制御します。有効化されている場合、ディスクへの変更は一時的なものとなり、VMのシャットダウン時に破棄されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">SSD=&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
このドライブを回転式ハードディスクではなくSSDとして公開するかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">werror=&amp;lt;enospc | ignore | report | stop&amp;gt;</span></dt>
<dd>
<p>
書き込みエラー時の動作。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">wwn=&amp;lt;wwn&amp;gt;</span></dt>
<dd>
<p>
ドライブのワールドワイドネーム（WWN）。16 バイトの 16 進文字列でエンコードされ、先頭に<em>0x</em> が付加されます。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ipconfig[n]</span>:<span class="monospaced">[ゲートウェイIPv4] [,ゲートウェイIPv6] [,IPv4アドレス] [,IPv6アドレス]</span></dt>
<dd>
<p>
cloud-init: 対応するインターフェースのIPアドレスとゲートウェイを指定します。</p>
<div class="paragraph">
<p>IPアドレスはCIDR表記を使用し、ゲートウェイはオプションですが、同じタイプのIPアドレスを指定する必要があります。</p></div>
<div class="paragraph">
<p>IPアドレスにDHCPを使用する場合は、特別な文字列<em>「dhcp」</em>を使用できます。この場合、明示的なゲートウェイは指定しないでください。
IPv6では、特別な文字列<em>「auto」</em>を使用してステートレス自動設定を利用できます。これにはcloud-init 19.4以降が必要です。</p></div>
<div class="paragraph">
<p>cloud-init が有効化されており、IPv4 アドレスも IPv6 アドレスも指定されていない場合、デフォルトで IPv4 に対して dhcp が使用されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ゲートウェイIPv4</span></dt>
<dd>
<p>
IPv4トラフィック用のデフォルトゲートウェイ。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">オプションが必要です:<span class="monospaced">ip</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">gw6=&amp;lt;GatewayIPv6&amp;gt;</span></dt>
<dd>
<p>
IPv6トラフィック用のデフォルトゲートウェイ。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">オプションが必要です:<span class="monospaced">ip6</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip=&amp;lt;IPv4フォーマット/CIDR&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">dhcp</span>)</dt>
<dd>
<p>
CIDR形式のIPv4アドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip6=&amp;lt;IPv6フォーマット/CIDR&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">dhcp</span>)</dt>
<dd>
<p>
CIDR形式のIPv6アドレス。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ivshmem</span>:<span class="monospaced">サイズ=&amp;lt;整数&amp;gt; [,名前=&amp;lt;文字列&amp;gt;]</span></dt>
<dd>
<p>
仮想マシン間共有メモリ。仮想マシン間、またはホストとの直接通信に有用です。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">name=&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
ファイル名。<em>pve-shm-</em> が接頭辞として付加されます<em>。</em>デフォルトは VMID です。VM が停止されると削除されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=&amp;lt;integer&amp;gt; (1 - N)</span></dt>
<dd>
<p>
ファイルのサイズ（MB単位）。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">keephugepages</span>:<span class="monospaced">&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
巨大ページと併用します。有効にすると、VMシャットダウン後も巨大ページが削除されず、以降の起動で使用可能です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">キーボード</span>:<span class="monospaced">&amp;lt;da | de | de-ch | en-gb | en-us | es | fi | fr | fr-be | fr-ca | fr-ch | hu | is | it | ja | lt | mk | nl | no | pl | pt | pt-br | sl | sv | tr&amp;gt;</span></dt>
<dd>
<p>
VNCサーバーのキーボードレイアウト。このオプションは通常不要であり、ゲストOS内で設定する方が適切な場合が多いです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">kvm</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
KVMハードウェア仮想化の有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">localtime</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
リアルタイムクロック（RTC）を現地時間に設定します。<span class="monospaced">OSタイプがMicrosoft</span>Windows OSを示す場合、デフォルトで有効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">lock</span>:<span class="monospaced">&amp;lt;バックアップ | クローン | 作成 | 移行 | ロールバック | スナップショット | スナップショット削除 | 停止中 | 停止中&amp;gt;</span></dt>
<dd>
<p>
仮想マシンをロック/ロック解除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">machine</span>:<span class="monospaced">[[type=]&amp;lt;マシンタイプ&amp;gt;] [,enable-s3=&amp;lt;1|0&amp;gt;] [,enable-s4=&amp;lt;1|0&amp;gt;] [,viommu=&amp;lt;intel|virtio&amp;gt;]</span></dt>
<dd>
<p>
QEMU マシンの指定を行います。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">enable-s3=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
S3 電源状態を有効にします。マシンタイプ 9.2+pve1 以降ではデフォルトで false、それ以前では true です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">enable-s4=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
S4電源状態を有効にします。マシンタイプ9.2+pve1以降ではデフォルトでfalse、それ以前ではtrueです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">type=&amp;lt;マシンタイプ&amp;gt;</span></dt>
<dd>
<p>
QEMUマシンタイプを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">viommu=&amp;lt;intel | virtio&amp;gt;</span></dt>
<dd>
<p>
ゲスト vIOMMU バリアントを有効化し設定します（Intel vIOMMU を使用するには、マシンタイプとして q35 を設定する必要があります）。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">memory</span>:<span class="monospaced">[current=]&amp;lt;integer&amp;gt;</span></dt>
<dd>
<p>
メモリのプロパティ。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">current=&amp;lt;整数&amp;gt; (16 - N)</span>(<em>デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
仮想マシンが現在使用可能なオンラインRAMの容量（MiB単位）。バルーンデバイス使用時の最大利用可能メモリとなります。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">移行ダウンタイム</span>:<span class="monospaced">&amp;lt;数値&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0.1</span>)</dt>
<dd>
<p>
移行時の最大許容ダウンタイム（秒単位）を設定します。移行の最終段階で、新たに変更されたRAMの転送量が多すぎるために収束できない場合、移行が収束できるまで制限値が段階的に自動的に増加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">移行時間</span>:<span class="monospaced">&amp;lt;整数&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
移行の最大速度（MB/秒単位）を設定します。値0は制限なしを意味します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">name</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
仮想マシンに名前を設定します。設定ウェブインターフェースでのみ使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nameserver</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
cloud-init: コンテナのDNSサーバーIPアドレスを設定します。searchdomainおよびnameserverが設定されていない場合、ホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ネット[n]</span>:<span class="monospaced">[モデル=]&amp;lt;列挙型&amp;gt; [,ブリッジ=&amp;lt;ブリッジ&amp;gt;] [,ファイアウォール=&amp;lt;1|0&amp;gt;] [,リンクダウン=&amp;lt;1|0&amp;gt;] [,MACアドレス=&amp;lt;XX:XX:XX:XX:XX:XX&amp;gt;] [,MTU=&amp;lt;整数&amp;gt;][,キュー数=&amp;lt;整数&amp;gt;] [,レート=&amp;lt;数値&amp;gt;] [,タグ=&amp;lt;整数&amp;gt;] [,トランク=&amp;lt;vlanid[;vlanid...]&amp;gt;] [,&amp;lt;モデル&amp;gt;=&amp;lt;MACアドレス&amp;gt;]</span></dt>
<dd>
<p>
ネットワークデバイスを指定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">bridge=&amp;lt;bridge&amp;gt;</span></dt>
<dd>
<p>
ネットワークデバイスを接続するブリッジ。Proxmox VEの標準ブリッジは
<em>vmbr0</em>と呼ばれます。</p>
<div class="paragraph">
<p>ブリッジを指定しない場合、kvm ユーザー（NAT 経由）ネットワークデバイスを作成し、
DHCP および DNS サービスを提供します。以下のアドレスが使用されます：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>10.0.2.2   ゲートウェイ
10.0.2.3   DNSサーバー
10.0.2.4   SMBサーバー</pre>
</div></div>
<div class="paragraph">
<p>DHCPサーバーはゲストに10.0.2.15から始まるアドレスを割り当てます。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ファイアウォール=&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
このインターフェースをファイアウォールで保護するかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">link_down=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
このインターフェースを切断（プラグを抜くような状態）にするかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">macaddr=&amp;lt;XX:XX:XX:XX:XX:XX&amp;gt;</span></dt>
<dd>
<p>
I/G（個別/グループ）ビットが設定されていない共通のMACアドレスです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">model=&amp;lt;e1000 | e1000-82540em | e1000-82544gc | e1000-82545em | e1000e | i82551 | i82557b | i82559er | ne2k_isa | ne2k_pci | pcnet | rtl8139 | virtio | vmxnet3&amp;gt;</span></dt>
<dd>
<p>
ネットワークカードモデル。<em>virtioモデルは</em>CPUオーバーヘッドが非常に低く、最高のパフォーマンスを提供します。ゲストがこのドライバをサポートしていない場合、通常は<em>e1000</em>を使用するのが最適です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mtu=&amp;lt;整数&amp;gt; (1 ～ 65520)</span></dt>
<dd>
<p>
ネットワークデバイスのMTUを強制設定（VirtIOのみ）。<em>1</em>または空欄に設定するとブリッジのMTUが使用されます</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">queues=&amp;lt;integer&amp;gt; (0 - 64)</span></dt>
<dd>
<p>
デバイスで使用するパケットキューの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rate=&amp;lt;数値&amp;gt; (0 ～ N)</span></dt>
<dd>
<p>
浮動小数点数によるレート制限（Mbps：メガビット毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">タグ=&amp;lt;整数&amp;gt; (1 ～ 4094)</span></dt>
<dd>
<p>
このインターフェース上のパケットに適用するVLANタグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">trunks=&amp;lt;vlanid[;vlanid...]&amp;gt;</span></dt>
<dd>
<p>
このインターフェースを通過するVLANトランク。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">numa</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
NUMAの有効化/無効化を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">numa[n]</span>:<span class="monospaced">cpus=&amp;lt;id[-id];...&amp;gt; [,hostnodes=&amp;lt;id[-id];...&amp;gt;] [,memory=&amp;lt;number&amp;gt;] [,policy=&amp;lt;preferred|bind|interleave&amp;gt;]</span></dt>
<dd>
<p>
NUMAトポロジー。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">cpus=&amp;lt;id[-id];...&amp;gt;</span></dt>
<dd>
<p>
このNUMAノードにアクセスするCPU。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ホストノード=&amp;lt;id[-id];...&amp;gt;</span></dt>
<dd>
<p>
使用するホスト NUMA ノード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">memory=&amp;lt;number&amp;gt;</span></dt>
<dd>
<p>
このNUMAノードが提供するメモリ容量。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ポリシー=&amp;lt;バインド | インターリーブ | 優先&amp;gt;</span></dt>
<dd>
<p>
NUMA割り当てポリシー。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">onboot</span>:<span class="monospaced">&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時に仮想マシンを起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ostype</span>:<span class="monospaced">&amp;lt;l24 | l26 | other | solaris | w2k | w2k3 | w2k8 | win10 | win11 | win7 | win8 | wvista | wxp&amp;gt;</span></dt>
<dd>
<p>
ゲストオペレーティングシステムを指定します。これは特定のオペレーティングシステム向けに特別な
最適化/機能を有効にするために使用されます：</p>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
その他<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
OS 未指定</p>
</td>
</tr>
<tr>
<td class="hdlist1">
wxp<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows XP</p>
</td>
</tr>
<tr>
<td class="hdlist1">
w2k<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows 2000</p>
</td>
</tr>
<tr>
<td class="hdlist1">
w2k3<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows 2003</p>
</td>
</tr>
<tr>
<td class="hdlist1">
w2k8<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows 2008</p>
</td>
</tr>
<tr>
<td class="hdlist1">
wvista<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows Vista</p>
</td>
</tr>
<tr>
<td class="hdlist1">
win7<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows 7</p>
</td>
</tr>
<tr>
<td class="hdlist1">
win8<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows 8/2012/2012r2</p>
</td>
</tr>
<tr>
<td class="hdlist1">
win10<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows 10/2016/2019</p>
</td>
</tr>
<tr>
<td class="hdlist1">
win11<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft Windows 11/2022/2025</p>
</td>
</tr>
<tr>
<td class="hdlist1">
L24<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Linux 2.4 カーネル</p>
</td>
</tr>
<tr>
<td class="hdlist1">
l26<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Linux 2.6 - 6.X カーネル</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ソラリス<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Solaris/OpenSolaris/OpenIndiana カーネル</p>
</td>
</tr>
</table></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">parallel[n]</span>:<span class="monospaced">/dev/parport\d+|/dev/usb/lp\d+</span></dt>
<dd>
<p>
ホストの並列デバイスをマッピングします（n は 0 から 2）。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このオプションはホストハードウェアへの直接アクセスを可能にします。そのため、このようなマシンを移行することはできなくなります。
特別な注意を払ってご利用ください。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAKdUlEQVRoge1Ze1AV1x3+zt279wEi
DWCYGzRVktqa1MEmmtbWR22ncXxUrTDWV/5IqG2wUAUfmUwSkk6V+EAJCEQC6figwZBqZtRxqukf
tebRZBpFG1S0hiRErwiaKK977+6eX//YPXt37+UiIJlMZnpmdnb33PP4vt97z2VEhG9yc3zdAO60
/Z/A192+8QScX8Wifr+fWltbzffU1FT4fD72Vew15ASampqovr4eBw8eNPvGjRuHzMxMmj9//tCT
IKIhu958801yuVwEoNdr48aNNJT7EdHQEdi/fz/JshwTvLiKioqGlMSQLFJfX0+MMRvQsWNSqXLz
H2jez78fRWLTpk1DRuKOF6irqyOn02kDOP8XGdTz+VFSP91Hatu79NRvZ0SR2LJly5CQuKPJtbW1
JEmSDdivHp1AwctHSblYSsqFElLOF5PavIvWZU+LIrF169Y7JjHoibt3744CnzXrIQpeOUbKhVJS
mkpIPV9MyrnNpJwtIuVSNa15/MdRJLZt23ZHJBjRwIu5N954gxYvXgzOudm3aO5E1L5SBNZ1Hoxr
INLAyH6HJxVP/WkXtu9+37ZeSUkJVq9ePagQO+BMXFNTEwV+ybxHsPeVIjg6zwOkgSWNhuOuUUBC
KhxJY0AggDSgpwWbn1mO1csftq1ZUFCA0tLSQZXFA0pkVVVVlJOTA6vWsmY9hF07N0AS4OU48LgR
WLO+FPFxboxMS8G5hlPYmPMI4jwM1P0Jtj67DJyrKHvtNADdjPPz8+FwOCgvL29gmuivrVVUVESF
yqxZD1PoyjFSL+7QHbapmJTml+n9EzVRtl676ZekNKwl5VQ+KSfzKHR2E+UutodYxhiVl5cPyCf6
ZUJlZWWUm5trk/wTi6bgtVdf1M2Gq2DEwUgDNBWhUDBqjfSRwwGoIOEP3c3Y/uxirFw0zibMvLw8
VFZW9tucbkugoqKCVq1aZQO/YslUVJU+D9bVBIDroLgK4hygEDweybYGY8AD6d8yftfASL+j+2O8
9NwiPJk51kYiNzcXO3fu7BeJPgkUFxdTbm6ure/JZdNRub0QrOMcGFcBrgLgAHEAGqD2ID7OZZsz
Ji0RcR6HAV4DkaqPJxXouoSywkz8buF9NhIrV65EVVXVbUnEJHDixAlat26drS9n+U+xo/hZMMNh
yZA+uAbAIKOGMCJlmG3eA/clAYaJEamGBlRdC6QBXZewo3AhVswfbSORk5ODDz/8sE8SvRLw+/1U
XV0dBb5MgOe6LUNIEqpOwgCUlOCESw4HuAfG3KX7B2kAGaTJ0Jro77yI8ucX4DfzRtlIHD58GH6/
PyaJXgk0NjZi79695vuUiffrkr91Vt8cHAwc4FZJGiZEKqDcwsi0ZHP+d749POy8MS7iGtBxARWF
8/CDsQnm3BdeeAHWj6N+EYhspSVbgI5zYYkZGmAwzIEbwA0tUM9NfO+7aeb89HuGRQBWLcSNZxj3
zvOYMzk5NpjBEHi99mXD5lXdjqGDJh42h7CEOXhnK3448X5z/shUb1jSpIEM8yFuzOUcjAsNcnR0
KXdG4MEHH8TEiRPN9z0H3sfRE41m+GNcs9i0LjkGTTcrUoGem5g7/V5z/ohElw4O+jxGYQ3qJqmB
jN/+cbINtcfCJvPYY4+hr3qtVwI+n49lZmaa71fbbuH3hX/FycbPQKSCoIIMQEQcehjVo5Gw8/F3
3cSvH03H2HuHY1icQzcvYWKGIMiITMwQwjtnruPpqk9w/ZZq7p2RkYEJEyaAYrCIWY36/X7KyMhA
W1ub2XfP3Qmo3ZKFaQ+P0gmYIdSoOkU4lWSwxGRAdqHL/xm86k27w0blAw3/PncD6yo/xrsfdZj7
paSkoLGxESNGjAgDZsxWK8X0AZ/Px44fP460tLAzXrnWgUX5r+PYuxf1mG/Gf80sofWy2YuWbg/+
uONtPLHhPRw+0WIHL8hbwG95rcUGPiEhAYcOHUJSUhI456YZRWqiz+8BIqLm5mZMmjQJN27cMPsT
E9zYtWE25k4bYzh3mABIBRwOHPgPx+LH/6yDiXPi6pHZcEpk+I5qmtGpCzdQecCPPUevmevLsowj
R45gypQpcDgc5mVowKaJmBoQTEePHo2GhgaMGxcuum52BLHsqUOoP3oWgLB9Sz7QgpgxJoThw/SS
IutnaXBKZEpcgD998Uvs+3ubDbzT6URNTQ0mTZoEVVWhaRo459A0TeCy4etVA+JH8RvnHK2trZgz
Zw5Onz5tjnPJDrxSOAPLZt1nSVIqwDmIVJw6dx1nLt3A3J/cjZThkhE29cvf3o2KA59ja91lcz3G
GDZv3oylS5fC7XbD6XTC6XRCkiRIktS7Jm5HQLDXNA3Xr19HVlYWPvjgA4vEGLav+RHmTxsJX4rb
8AsO4kbOIG6GzTD4HvzlmB/PVH9q2zc/Px/Z2dnwer1wu92QZRkulwuSJEGWZZMEY8wkEGVCVvCC
AOcciqIgPj4e+/btw9SpU83xqkpYteU9HHm7Bf62rnC2RjikisTFSMPV9m4ceucannvVDn7p0qVY
uHAhgsEggsEgQqFQlAlZnVm0PjOxIKFpGogIqqrC5XKhuroa06dPt4wDcl78F+qPNeNKe6cRoTjs
ZYOKK+3dON7wBQrKm2H5pMbMmTOxZMkSBAIB9PT0oKenB4FAAIqiQFEUU4hRRyq3I2AlIZ4553A6
nSgvL8fs2bNtY9eVNaDub58YmhDZWpe+v70bJ5tu4clt/4WihqU4efJkrFixAkRkAg4Gg1AUBaqq
muDF/pGtX7WQNXeIZ0mSUFRUhAULFtjGPl3ZiJdev4QrbZ16zUQqrrZ342JLN5ZvaEJ3ICz68ePH
IycnB5qmmZIW4EOhUJTZWEKo+Rx1KsEYY9Zk4XA4IEmSKXnOuRkVJElCYWEhvF4v6urqzDVK9n2M
zu4Qnl5+L9q/7MHltgBWbr9kA5+eno7c3FzIsoyI5GrTeCzgosU8VmGMmSGLiEwSsixH2WNBQQEA
2EhUH/wc7330BaaOH479/2zHtS/CFabP58OaNWvg9Xp1EE4nZFmGLMtwu93wer1wuVy2ECpJko2I
iTNWJrZGI+HEwi6FisUVCAQQCASwZ88eVFZW9lk9JicnY/369fD5fPB4PCbo+Ph4k4TH44HL5YLX
64XX6zXH9EKE9aUBRkTEGLNJP1Kd4nI4HMjOzkZ8fDyKi4ttJ3eiJSYmYu3atRg1apQJzuv1wuPx
wOPxwOFwmEBFHnA6nXC5XGYSiywlbns2SnoDANN0hMNZnS0UCpkaOnPmDN566y20tLSY2ktLS8OM
GTOQkpICt9uNuLg4M2EJ8CJZSZJkZmFBwkrAWpH2+3BXEBEkRIhTVdVMOCL5qKqKy5cvQ1EUaJoG
VVWRnKx/Jlpt3eVy2QCKu9C68AFr9o0spwd0Oh1ZYggCIlNaiQktiXdhZgKQABcp3ci7LMtM7B0J
fsAErJoAYItG1mdr+hfvVlACtHDIXkploYXbHvQOikDEe6/ZmjFmAhf9ZvJxOk2Qol88W4kYz32S
GNQfHLG+TyMTkAVEr88xQfVnkBg7GAKixSIykDYQsL21/wFkW/B5QqT9lwAAAABJRU5ErkJggg==" />
</td>
<td class="content">実験的機能です！このオプションに関する問題がユーザーから報告されています。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">保護</span>:<span class="monospaced">&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
仮想マシンの保護フラグを設定します。これにより、仮想マシンの削除およびディスク削除操作が無効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">reboot</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
再起動を許可します。<em>0</em>に設定すると、再起動時に仮想マシンが終了します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rng0</span>:<span class="monospaced">[source=]&amp;lt;/dev/urandom|/dev/random|/dev/hwrng&amp;gt; [,max_bytes=&amp;lt;integer&amp;gt;] [,period=&amp;lt;integer&amp;gt;]</span></dt>
<dd>
<p>
VirtIOベースの乱数生成器を設定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">max_bytes=&amp;lt;integer&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1024</span>)</dt>
<dd>
<p>
ゲストシステムへ注入可能なエントロピーの最大バイト数を、<em>指定したミリ秒間隔ごとに</em>設定します。制限を無効化するには<span class="monospaced">0</span>を指定してください（危険を伴う可能性があります！）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">period=&amp;lt;integer&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1000</span>)</dt>
<dd>
<p>
エントロピー注入クォータは毎<em>ミリ秒ごとに</em>リセットされ、ゲストが再度<em>max_bytes バイト</em>のエントロピーを取得できるようになります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">source=&amp;lt;/dev/hwrng | /dev/random | /dev/urandom&amp;gt;</span></dt>
<dd>
<p>
ホスト上でエントロピー収集元となるファイルを指定します。urandomの使用は、実際のエントロピーからシードされるため、セキュリティを実質的に低下させる<strong>ことはありません</strong>。また、提供されるバイトはゲスト側でも実際のエントロピーと混合される可能性が高いです。<em>/dev/hwrngを使用すると</em>、ホストのハードウェア乱数生成器（RNG）をゲストに透過的に渡すことが可能です。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">sata[n]</span>:<span class="monospaced">[ファイル=]&amp;lt;ボリューム&amp;gt; [,aio=&amp;lt;ネイティブ|スレッド|io_uring&amp;gt;] [,バックアップ=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;秒&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;秒数&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;秒数&amp;gt;] [,cache=&amp;lt;enum&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;][,破棄設定=&amp;lt;無視|有効&amp;gt;] [,フォーマット設定=&amp;lt;列挙型&amp;gt;] [,I/O操作数設定=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数設定=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数持続時間設定=&amp;lt;秒&amp;gt;] [,読み取りI/O操作数設定=&amp;lt;I/O操作数&amp;gt;][,読み取りIOPS上限値=&amp;lt;iops&amp;gt;] [,読み取りIOPS最大持続時間=&amp;lt;seconds&amp;gt;] [,書き込みIOPS上限値=&amp;lt;iops&amp;gt;] [,書き込みIOPS上限値=&amp;lt;iops&amp;gt;][,書き込みIOPS最大持続時間&amp;lt;秒&amp;gt;] [,読み取り/書き込みMBPS&amp;lt;MBPS&amp;gt;] [,読み取り/書き込みMBPS最大値&amp;lt;MBPS&amp;gt;] [,読み取りMBPS&amp;lt;MBPS&amp;gt;] [,読み取りMBPS最大値&amp;lt;MBPS&amp;gt;] [,書き込みMBPS&amp;lt;MBPS&amp;gt;][,書き込み最大転送速度=&amp;lt;mbps&amp;gt;] [,メディア=&amp;lt;CD-ROM|ディスク&amp;gt;] [,レプリケーション=&amp;lt;1|0&amp;gt;] [,エラー処理=&amp;lt;無視|報告|停止&amp;gt;] [,シリアル番号=&amp;lt;シリアル番号&amp;gt;] [,共有設定=&amp;lt;1|0&amp;gt;][,size=&amp;lt;ディスクサイズ&amp;gt;] [,snapshot=&amp;lt;1|0&amp;gt;] [,ssd=&amp;lt;1|0&amp;gt;] [,werror=&amp;lt;列挙型&amp;gt;] [,wwn=&amp;lt;WWN&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをSATAハードディスクまたはCD-ROMとして使用します（nは0から5）。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">aio=&amp;lt;io_uring | native | threads&amp;gt;</span></dt>
<dd>
<p>
使用するAIOタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">バックアップは真/偽です</span>。</dt>
<dd>
<p>
バックアップ作成時にドライブを含めるかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps=&amp;lt;bps&amp;gt;</span></dt>
<dd>
<p>
最大読み書き速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
I/Oバーストの最大持続時間（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd=&amp;lt;bps&amp;gt;</span></dt>
<dd>
<p>
最大読み取り速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
読み取りI/Oバーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr=&amp;lt;bps&amp;gt;</span></dt>
<dd>
<p>
最大書き込み速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cache=&amp;lt;directsync | none | unsafe | writeback | writethrough&amp;gt;</span></dt>
<dd>
<p>
ドライブのキャッシュモード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ゼロ検出=&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ゼロ書き込みの検出および最適化の試行の有無を制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">discard=&amp;lt;無視 | 有効&amp;gt;</span></dt>
<dd>
<p>
ディスカード/トリム要求を基盤となるストレージに渡すかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ファイル=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
ドライブのバッキングボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">フォーマット=&amp;lt;cloop | qcow | qcow2 | qed | raw | vmdk&amp;gt;</span></dt>
<dd>
<p>
ドライブのバッキングファイルのデータ形式。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大読み書きI/O（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大スロットリングなしの読み書きI/Oプール（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
I/Oバーストの最大持続時間（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大読み取りI/O（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大スロットリング解除状態の読み取りI/Oプール（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
読み取り I/O バーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大書き込みI/O（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
スロットリングなしの書き込みI/Oプールの最大秒間操作数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大持続時間（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大読み書き速度（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_max=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大スロットリング解除状態での読み書きプール（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大読み取り速度（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd_max=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大スロットリングなし読み取りプール（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大書き込み速度（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr_max=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
スロットリングなしの最大書き込みプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">media=&amp;lt;cdrom | disk&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">disk</span>)</dt>
<dd>
<p>
ドライブのメディアタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replicate=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ドライブをレプリケーション ジョブの対象とするかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rerror=&amp;lt;無視 | 報告 | 停止&amp;gt;</span></dt>
<dd>
<p>
読み取りエラー時の動作。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">シリアル番号=&amp;lt;シリアル番号&amp;gt;</span></dt>
<dd>
<p>
ドライブの報告されたシリアル番号（URLエンコード済み、最大20バイト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">共有設定=&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このローカル管理ボリュームを全ノードで利用可能としてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションはボリュームを自動的に共有しません。既に共有されていることを前提としています。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=&amp;lt;ディスクサイズ&amp;gt;</span></dt>
<dd>
<p>
ディスクサイズ。これは純粋に情報提供用であり、効果はありません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">スナップショット=&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
qemuのスナップショットモード機能を制御します。有効化されている場合、ディスクへの変更は一時的なものとなり、VMのシャットダウン時に破棄されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">SSD=&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
このドライブを回転式ハードディスクではなくSSDとして公開するかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">werror=&amp;lt;enospc | ignore | report | stop&amp;gt;</span></dt>
<dd>
<p>
書き込みエラー時の動作。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">wwn=&amp;lt;wwn&amp;gt;</span></dt>
<dd>
<p>
ドライブのワールドワイドネーム（WWN）。16 バイトの 16 進文字列でエンコードされ、先頭に<em>0x</em> が付加されます。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">scsi[n]</span>:<span class="monospaced">[ファイル=]&amp;lt;ボリューム&amp;gt; [,AIO=&amp;lt;ネイティブ|スレッド|I/O Uring&amp;gt;] [,バックアップ=&amp;lt;1|0&amp;gt;] [,BPS=&amp;lt;BPS&amp;gt;] [,BPS_MAX_LENGTH=&amp;lt;秒&amp;gt;] [,BPS_RD=&amp;lt;BPS&amp;gt;][,bps_rd_max_length=&amp;lt;秒数&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;秒数&amp;gt;] [,cache=&amp;lt;列挙型&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;] [,discard=&amp;lt;無視|有効&amp;gt;][,フォーマット=&amp;lt;列挙型&amp;gt;] [,I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数持続時間=&amp;lt;秒&amp;gt;] [,読み取りI/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大読み取りI/O操作数=&amp;lt;I/O操作数&amp;gt;][,読み取りIOPS最大持続時間=&amp;lt;秒&amp;gt;] [,書き込みIOPS=&amp;lt;IOPS&amp;gt;] [,書き込みIOPS最大値=&amp;lt;IOPS&amp;gt;] [,書き込みIOPS最大持続時間=&amp;lt;秒&amp;gt;] [,IOスレッド数=&amp;lt;1|0&amp;gt;][,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;] [,mbps_wr=&amp;lt;mbps&amp;gt;] [,mbps_wr_max=&amp;lt;mbps&amp;gt;][,メディア=&amp;lt;CD-ROM|ディスク&amp;gt;] [,製品=&amp;lt;製品&amp;gt;] [,キュー数=&amp;lt;整数&amp;gt;] [,レプリケーション=&amp;lt;1|0&amp;gt;] [,再エラー処理=&amp;lt;無視|報告|停止&amp;gt;] [,読み取り専用モード=&amp;lt;1|0&amp;gt;][,scsiblock=&amp;lt;1|0&amp;gt;] [,serial=&amp;lt;シリアル番号&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;ディスクサイズ&amp;gt;] [,snapshot=&amp;lt;1|0&amp;gt;] [,ssd=&amp;lt;1|0&amp;gt;][,ベンダー=&amp;lt;ベンダー&amp;gt;] [,エラーコード=&amp;lt;列挙型&amp;gt;] [,WWN=&amp;lt;WWN&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをSCSIハードディスクまたはCD-ROMとして使用します（nは0から30）。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">aio=&amp;lt;io_uring | native | threads&amp;gt;</span></dt>
<dd>
<p>
使用するAIOタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">backup=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
バックアップ作成時に本ドライブを含めるかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps=&amp;lt;bps&amp;gt;</span></dt>
<dd>
<p>
最大読み書き速度（バイト/秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
I/Oバーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd=&amp;lt;bps&amp;gt;</span></dt>
<dd>
<p>
最大読み取り速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
読み取りI/Oバーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr=&amp;lt;bps&amp;gt;</span></dt>
<dd>
<p>
最大書き込み速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cache=&amp;lt;directsync | none | unsafe | writeback | writethrough&amp;gt;</span></dt>
<dd>
<p>
ドライブのキャッシュモード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ゼロ検出=&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ゼロ書き込みの検出および最適化を試みるかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">discard=&amp;lt;無視 | 有効&amp;gt;</span></dt>
<dd>
<p>
ディスカード/トリム要求を基盤となるストレージに渡すかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ファイル=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
ドライブのバッキングボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">フォーマット=&amp;lt;cloop | qcow | qcow2 | qed | raw | vmdk&amp;gt;</span></dt>
<dd>
<p>
ドライブのバッキングファイルのデータ形式。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大読み書きI/O（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大スロットリングなしの読み書きI/Oプール（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
I/Oバーストの最大持続時間（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大読み取りI/O（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大スロットリングなし読み取りI/Oプール（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
読み取り I/O バーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大書き込みI/O（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
スロットリングなしの書き込みI/Oプールにおける最大操作数（秒あたり）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大持続時間（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iothread=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
このドライブにiothreadsを使用するかどうか</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大読み書き速度（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_max=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
スロットリングなしの最大読み書きプール（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大読み取り速度（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd_max=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大スロットリング解除読み取りプール（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大書き込み速度（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr_max=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
スロットリングなしの最大書き込みプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">media=&amp;lt;cdrom | disk&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">disk</span>)</dt>
<dd>
<p>
ドライブのメディアタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">製品名=&amp;lt;製品名&amp;gt;</span></dt>
<dd>
<p>
ドライブの製品名（最大16バイト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">queues=&amp;lt;integer&amp;gt; (2 ～ N)</span></dt>
<dd>
<p>
キューの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replicate=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
レプリケーションジョブの対象としてドライブを考慮すべきかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rerror=&amp;lt;無視 | 報告 | 停止&amp;gt;</span></dt>
<dd>
<p>
読み取りエラー時の動作。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ro=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ドライブが読み取り専用であるかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">scsiblock=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ホストブロックデバイスの完全パススルーにSCSIブロックを使用するかどうか</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">ホスト側のメモリ不足やメモリ断片化が深刻な場合、I/O エラーが発生する可能性があります</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">シリアル番号=&amp;lt;シリアル番号&amp;gt;</span></dt>
<dd>
<p>
ドライブが報告するシリアル番号（URLエンコード済み、最大20バイト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">shared=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このローカル管理ボリュームを全ノードで利用可能としてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションはボリュームを自動的に共有しません。既に共有されているものと見なします。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=&amp;lt;ディスクサイズ&amp;gt;</span></dt>
<dd>
<p>
ディスクサイズ。これは純粋に情報提供用であり、効果はありません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">スナップショット=&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
qemuのスナップショットモード機能を制御します。有効にした場合、ディスクへの変更は一時的なものとなり、VMのシャットダウン時に破棄されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ssd=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
このドライブを回転式ハードディスクではなくSSDとして公開するかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ベンダー=&amp;lt;ベンダー&amp;gt;</span></dt>
<dd>
<p>
ドライブのベンダー名（最大8バイト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">werror=&amp;lt;enospc | ignore | report | stop&amp;gt;</span></dt>
<dd>
<p>
書き込みエラー時の動作。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">wwn=&amp;lt;wwn&amp;gt;</span></dt>
<dd>
<p>
ドライブのワールドワイドネーム（WWN）。16バイトの16進数文字列でエンコードされ、先頭に<em>0x</em>が付与されます。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">scsihw</span>:<span class="monospaced">&amp;lt;lsi | lsi53c810 | megasas | pvscsi | virtio-scsi-pci | virtio-scsi-single&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">lsi</span>)</dt>
<dd>
<p>
SCSIコントローラモデル</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">searchdomain</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
cloud-init: コンテナのDNS検索ドメインを設定します。searchdomainおよびnameserverが設定されていない場合、作成時にはホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">シリアル[n]</span>:<span class="monospaced">(/dev/.+|socket)</span></dt>
<dd>
<p>
VM内にシリアルデバイスを作成します（nは0から3）。ホストのシリアルデバイス（例：/dev/ttyS0）をパススルーするか、ホスト側にUNIXソケットを作成します（ターミナル接続を開く<em>にはqmターミナル</em>を使用）。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ホストのシリアルデバイスをパススルーする場合、該当するマシンの移行は不可能となります。
ご利用の際は十分ご注意ください。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">実験的機能です！このオプションに関する問題がユーザーから報告されています。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">共有数</span>:<span class="monospaced">&amp;lt;整数&amp;gt; (0 - 50000)</span>(<em>デフォルト =</em> <span class="monospaced">1000</span>)</dt>
<dd>
<p>
自動バルーニング用のメモリ共有量。数値が大きいほど、この仮想マシンが割り当てられるメモリが増加します。数値は他の稼働中の仮想マシンのウェイトに対する相対値です。0を使用すると自動バルーニングは無効になります。自動バルーニングはpvestatdによって実行されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">smbios1</span>:<span class="monospaced">[base64=&amp;lt;1|0&amp;gt;] [,family=&amp;lt;Base64エンコードされた文字列&amp;gt;] [,manufacturer=&amp;lt;Base64エンコードされた文字列&amp;gt;][,製品名=&amp;lt;Base64エンコード文字列&amp;gt;] [,シリアル番号=&amp;lt;Base64エンコード文字列&amp;gt;] [,SKU=&amp;lt;Base64エンコード文字列&amp;gt;] [,UUID=&amp;lt;UUID&amp;gt;] [,バージョン=&amp;lt;Base64エンコード文字列&amp;gt;]</span></dt>
<dd>
<p>
SMBIOS タイプ 1 フィールドを指定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">base64=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
SMBIOS値がbase64エンコードされていることを示すフラグ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">family=&amp;lt;Base64エンコードされた文字列&amp;gt;</span></dt>
<dd>
<p>
SMBIOS1ファミリー文字列を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">manufacturer=&amp;lt;Base64 エンコードされた文字列&amp;gt;</span></dt>
<dd>
<p>
SMBIOS1 メーカーを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">product=&amp;lt;Base64エンコードされた文字列&amp;gt;</span></dt>
<dd>
<p>
SMBIOS1 プロダクト ID を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">シリアル番号=&amp;lt;Base64エンコードされた文字列&amp;gt;</span></dt>
<dd>
<p>
SMBIOS1 シリアル番号を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">sku=&amp;lt;Base64 エンコードされた文字列&amp;gt;</span></dt>
<dd>
<p>
SMBIOS1のSKU文字列を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">uuid=&amp;lt;UUID&amp;gt;</span></dt>
<dd>
<p>
SMBIOS1 UUIDを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">version=&amp;lt;Base64エンコードされた文字列&amp;gt;</span></dt>
<dd>
<p>
SMBIOS1のバージョンを設定します。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">smp</span>:<span class="monospaced">&amp;lt;整数&amp;gt; (1 ～ N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPUの数。代わりに-socketsオプションをご利用ください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">sockets</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPUソケットの数です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">spice_enhancements</span>:<span class="monospaced">[フォルダ共有=&amp;lt;1|0&amp;gt;] [,ビデオストリーミング=&amp;lt;オフ|すべて|フィルタ&amp;gt;]</span></dt>
<dd>
<p>
SPICE の追加機能設定を行います。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">foldersharing=&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
SPICE経由でのフォルダ共有を有効化します。仮想マシンにSpice-WebDAVデーモンがインストールされている必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">videostreaming=&amp;lt;すべて | フィルタリング | オフ&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">オフ</span>)</dt>
<dd>
<p>
ビデオストリーミングを有効にします。検出されたビデオストリームに対して圧縮を使用します。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">sshkeys</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
cloud-init: 公開SSH鍵の設定（1行につき1鍵、OpenSSH形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">startdate</span>:<span class="monospaced">(現在 | 年月日形式 | 年月日時刻形式)</span>(<em>デフォルト =</em> <span class="monospaced">現在</span>)</dt>
<dd>
<p>
リアルタイムクロックの初期日付を設定します。日付の有効な形式は以下の通りです：'now'、または<em>2006-06-17T16:01:21</em>、または<em>2006-06-17</em>。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">startup</span>: `[[order=]\d+] [,up=\d+] [,down=\d+] ` </dt>
<dd>
<p>
起動およびシャットダウン時の動作を指定します。順序は非負の数値で、一般的な起動順序を定義します。シャットダウン時は逆順で処理されます。さらに、<em>起動</em>または<em>停止後の</em>待機時間を秒単位で設定できます。これは、次の仮想マシンが起動または停止されるまでの待機時間を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">タブレット</span>:<span class="monospaced">&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
USBタブレットデバイスの有効化/無効化。このデバイスは通常、VNCでマウスの絶対位置指定を可能にするために必要です。無効化すると、通常VNCクライアントではマウス操作が同期しなくなります。1台のホストで多数のコンソール専用ゲストを実行している場合、コンテキストスイッチを節約するため無効化をご検討ください。spiceを使用する場合（`<span class="monospaced">qm set &amp;lt;vmid&amp;gt; --vga qxl</span>`）、デフォルトで無効化されています。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">タグ</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
仮想マシンのタグ。これはメタ情報のみです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">tdf</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
タイムドリフト修正の有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">テンプレート</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">tpmstate0</span>:<span class="monospaced">[ファイル=]&amp;lt;ボリューム&amp;gt; [,サイズ=&amp;lt;ディスクサイズ&amp;gt;] [,バージョン=&amp;lt;v1.2|v2.0&amp;gt;]</span></dt>
<dd>
<p>
TPM状態を保存するためのディスクを設定します。フォーマットは<em>固定でRAWとなります</em>。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ファイル=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
ドライブのバックアップボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=&amp;lt;ディスクサイズ&amp;gt;</span></dt>
<dd>
<p>
ディスクサイズ。これは純粋に情報提供用であり、効果はありません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">バージョン=&amp;lt;v1.2 | v2.0&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">v1.2</span>)</dt>
<dd>
<p>
TPMインターフェースのバージョン。v2.0がより新しく、推奨されます。なお、これは後から変更できません。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">unused[n]</span>:<span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
未使用ボリュームへの参照。内部で使用されるため、手動で変更しないでください。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ファイル=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
ドライブのバックアップボリュームです。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">usb[n]</span>:<span class="monospaced">[[host=]&amp;lt;HOSTUSBDEVICE|spice&amp;gt;] [,mapping=&amp;lt;mapping-id&amp;gt;] [,usb3=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
USBデバイスの設定（nは0から4まで。マシンバージョン7.1以上かつostype l26、またはWindows 7以上の場合、nは最大14まで設定可能です）。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ホスト=&amp;lt;HOSTUSBDEVICE|spice&amp;gt;</span></dt>
<dd>
<p>
ホストUSBデバイスまたはポート、<em>もしくはspice</em>という値。HOSTUSBDEVICEの構文は以下の通りです：</p>
<div class="literalblock">
<div class="content monospaced">
<pre>'bus-port(.port)*'（10進数）または
'vendor_id:product_id'（16進数）または
'spice'</pre>
</div></div>
<div class="paragraph">
<p>既存のUSBデバイスを一覧表示するには、<em>lsusb -tコマンド</em>をご利用いただけます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このオプションはホストハードウェアへの直接アクセスを許可します。そのため、このようなマシンを移行することはできなくなります。
特別な注意を払ってご利用ください。</td>
</tr></table>
</div>
<div class="paragraph">
<p><em>spice</em>という値を使用すると、spice 用の USB リダイレクトデバイスを追加できます。</p></div>
<div class="paragraph">
<p>この設定か、<em>マッピング</em>キーのいずれかを設定する必要があります。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">マッピング=&amp;lt;マッピングID&amp;gt;</span></dt>
<dd>
<p>
クラスタ全体のマッピングのIDです。これかデフォルトキー<em>hostの</em>いずれかを設定する必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">usb3=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
指定されたホストオプションがUSB3デバイスまたはポートであるかどうかを指定します。最新のゲスト（マシンバージョン7.1以上、ostype l26、Windows 7以上）では、このフラグは関係ありません（すべてのデバイスはxhciコントローラに接続されています）。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">vcpus</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ホットプラグ可能な仮想CPU（vCPU）の数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">vga</span>:<span class="monospaced">[[type=]&amp;lt;enum&amp;gt;] [,clipboard=&amp;lt;vnc&amp;gt;] [,memory=&amp;lt;integer&amp;gt;]</span></dt>
<dd>
<p>
VGAハードウェアの設定を行います。高解像度モード（1280x1024x16以上）をご利用になる場合、vgaメモリオプションの増量が求められる場合がございます。QEMU 2.9以降、デフォルトのVGA表示タイプは、一部のWindowsバージョン（XPおよびそれ以前）<em>がcirrus</em>を使用する以外、全てのOS<em>タイプでstdとなります</em>。<em>qxl</em>オプションは SPICE ディスプレイサーバーを有効にします。Windows 系 OS では、独立したディスプレイの数を指定できます。Linux ゲストは自身でディスプレイを追加できます。
グラフィックカードを使用せず、シリアルデバイスをターミナルとして使用することも可能です。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">クリップボード=&amp;lt;vnc&amp;gt;</span></dt>
<dd>
<p>
特定のクリップボードを有効化します。設定されていない場合、ディスプレイの種類に応じて SPICE クリップボードが追加されます。VNC クリップボードを使用した移行はまだサポートされていません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">memory=&amp;lt;integer&amp;gt; (4 - 512)</span></dt>
<dd>
<p>
VGAメモリ（MiB単位）を設定します。シリアル表示では効果はありません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">type=&amp;lt;cirrus | none | qxl | qxl2 | qxl3 | qxl4 | serial0 | serial1 | serial2 | serial3 | std | virtio | virtio-gl | vmware&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">std</span>)</dt>
<dd>
<p>
VGAタイプを選択します。<em>cirrus</em>タイプのご使用はお勧めできません。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">virtio[n]</span>:<span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,aio=&amp;lt;ネイティブ|スレッド|io_uring&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;秒&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;秒数&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;秒数&amp;gt;] [,cache=&amp;lt;列挙型&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;] [,discard=&amp;lt;無視|有効&amp;gt;][,フォーマット=&amp;lt;列挙型&amp;gt;] [,I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数持続時間=&amp;lt;秒&amp;gt;] [,読み取りI/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大読み取りI/O操作数=&amp;lt;I/O操作数&amp;gt;][,読み取りIOPS最大持続時間=&amp;lt;秒&amp;gt;] [,書き込みIOPS=&amp;lt;IOPS&amp;gt;] [,書き込みIOPS最大値=&amp;lt;IOPS&amp;gt;] [,書き込みIOPS最大持続時間=&amp;lt;秒&amp;gt;] [,IOスレッド数=&amp;lt;1|0&amp;gt;][,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;] [,mbps_wr=&amp;lt;mbps&amp;gt;][,書き込み_最大_帯域幅=&amp;lt;mbps&amp;gt;] [,メディア=&amp;lt;CD-ROM|ディスク&amp;gt;] [,レプリケーション=&amp;lt;1|0&amp;gt;] [,エラー処理=&amp;lt;無視|報告|停止&amp;gt;] [,読み取り専用=&amp;lt;1|0&amp;gt;][,シリアル=&amp;lt;シリアル&amp;gt;] [,共有=&amp;lt;1|0&amp;gt;] [,サイズ=&amp;lt;ディスクサイズ&amp;gt;] [,スナップショット=&amp;lt;1|0&amp;gt;] [,書き込みエラー=&amp;lt;列挙型&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをVIRTIOハードディスクとして使用します（nは0から15）。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">aio=&amp;lt;io_uring | native | threads&amp;gt;</span></dt>
<dd>
<p>
使用するAIOタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">バックアップ=&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
バックアップ作成時にドライブを含めるかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps=&amp;lt;bps&amp;gt;</span></dt>
<dd>
<p>
最大読み書き速度（バイト/秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
I/Oバーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd=&amp;lt;bps&amp;gt;</span></dt>
<dd>
<p>
最大読み取り速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_rd_max_length=&amp;lt;秒&amp;gt;</span></dt>
<dd>
<p>
読み取りI/Oバーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr=&amp;lt;bps&amp;gt;</span></dt>
<dd>
<p>
最大書き込み速度（バイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">bps_wr_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cache=&amp;lt;directsync | none | unsafe | writeback | writethrough&amp;gt;</span></dt>
<dd>
<p>
ドライブのキャッシュモード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ゼロ検出=&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ゼロ書き込みの検出および最適化の試行の有無を制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">discard=&amp;lt;無視 | 有効&amp;gt;</span></dt>
<dd>
<p>
ディスカード/トリム要求を基盤となるストレージに渡すかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ファイル=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
ドライブのバッキングボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">フォーマット=&amp;lt;cloop | qcow | qcow2 | qed | raw | vmdk&amp;gt;</span></dt>
<dd>
<p>
ドライブのバッキングファイルのデータ形式。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大読み書きI/O（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大スループット制限なしの読み書きI/Oプール（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
I/Oバーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大読み取りI/O（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大スロットリング解除状態の読み取りI/Oプール（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_rd_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
読み取り I/O バーストの最大長（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
最大書き込みI/O（秒あたりの操作数）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max=&amp;lt;iops&amp;gt;</span></dt>
<dd>
<p>
スロットリングなしの書き込みI/Oプールの最大秒間操作数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iops_wr_max_length=&amp;lt;秒数&amp;gt;</span></dt>
<dd>
<p>
書き込みI/Oバーストの最大持続時間（秒単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">iothread=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
このドライブにiothreadsを使用するかどうか</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大読み書き速度（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_max=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
スロットリングなしの最大読み書きプール（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大読み取り速度（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_rd_max=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大スロットリング解除読み取りプール（メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
最大書き込み速度（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mbps_wr_max=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
スロットリングなしの最大書き込みプール（メガバイト/秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">media=&amp;lt;cdrom | disk&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">disk</span>)</dt>
<dd>
<p>
ドライブのメディアタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replicate=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ドライブをレプリケーションジョブの対象とするかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rerror=&amp;lt;無視 | 報告 | 停止&amp;gt;</span></dt>
<dd>
<p>
読み取りエラー時の対応。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ro=&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ドライブが読み取り専用かどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">シリアル番号=&amp;lt;シリアル番号&amp;gt;</span></dt>
<dd>
<p>
ドライブが報告するシリアル番号（URLエンコード済み、最大20バイト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">共有=&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このローカル管理ボリュームを全ノードで利用可能としてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションはボリュームを自動的に共有しません。既に共有されていることを前提とします。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=&amp;lt;DiskSize&amp;gt;</span></dt>
<dd>
<p>
ディスクサイズ。これは純粋に情報提供用であり、効果はありません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">スナップショット=&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
qemuのスナップショットモード機能を制御します。有効化されている場合、ディスクへの変更は一時的なものとなり、VMのシャットダウン時に破棄されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">werror=&amp;lt;enospc | ignore | report | stop&amp;gt;</span></dt>
<dd>
<p>
書き込みエラー時の動作。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">virtiofs[n]</span>:<span class="monospaced">[ディレクトリID=]&amp;lt;マッピングID&amp;gt; [,キャッシュモード=&amp;lt;列挙型&amp;gt;] [,ダイレクトI/O=&amp;lt;1|0&amp;gt;] [,アクセス制御リスト公開=&amp;lt;1|0&amp;gt;] [,拡張属性公開=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
ホストとゲスト間でディレクトリを共有するためのVirtio-fs設定。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">cache=&amp;lt;常に | 自動 | メタデータ | しない&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">自動</span>)</dt>
<dd>
<p>
ファイルシステムが使用するキャッシュポリシー（自動、常時、メタデータ、無効）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">direct-io=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ゲストアプリケーションから渡される O_DIRECT フラグを尊重します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ディレクトリID=&amp;lt;マッピングID&amp;gt;</span></dt>
<dd>
<p>
ゲストと共有するディレクトリマッピングの識別子です。VM内部のマウントタグとしても使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">expose-acl=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このマウントに対してPOSIX ACLのサポートを有効にします（有効なACLはxattrを意味します）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">expose-xattr=&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このマウントに対する拡張属性のサポートを有効にします。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">vmgenid</span>:<span class="monospaced">&amp;lt;UUID&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1 (自動生成)</span>)</dt>
<dd>
<p>
VM 世代 ID (vmgenid) デバイスは、ゲスト OS に対して 128 ビット整数値の識別子を提供します。これにより、仮想マシンが異なる構成（スナップショットの実行やテンプレートからの作成など）で実行された際に、ゲスト OS に通知することが可能となります。ゲストオペレーティングシステムは変更を検知し、分散データベースのコピーをダーティとしてマークしたり、乱数生成器を再初期化したりするなど、適切な対応を取ることが可能となります。
自動作成は、API/CLIのcreateまたはupdateメソッドを通じて実行した場合にのみ機能し、設定ファイルを手動で編集した場合には機能しない点にご注意ください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">vmstatestorage</span>:<span class="monospaced">&amp;lt;ストレージID&amp;gt;</span></dt>
<dd>
<p>
仮想マシン状態ボリューム/ファイルのデフォルトストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">watchdog</span>:<span class="monospaced">[[model=]&amp;lt;i6300esb|ib700&amp;gt;] [,action=&amp;lt;enum&amp;gt;]</span></dt>
<dd>
<p>
仮想ハードウェアのウォッチドッグデバイスを作成します。ゲスト側で有効化されると（ゲスト操作により）、ウォッチドッグはゲスト内のエージェントによって定期的にポーリングされる必要があります。さもなければ、ウォッチドッグがゲストをリセット（または指定された対応するアクションを実行）します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">action=&amp;lt;debug | none | pause | poweroff | reset | shutdown&amp;gt;</span></dt>
<dd>
<p>
ゲストが起動後にウォッチドッグを時間内にポーリングできなかった場合に実行するアクション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">model=&amp;lt;i6300esb | ib700&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">i6300esb</span>)</dt>
<dd>
<p>
エミュレートするウォッチドッグの種類。</p>
</dd>
</dl></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_locks">
<span>10.15. ロック</span>
<a class="headerlink" href="#_locks" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>オンライン移行、スナップショット、およびバックアップ（<span class="monospaced">vzdump</span>）は、影響を受ける仮想マシン上で互換性のない同時操作を防ぐためにロックを設定します。場合によっては、このようなロックを手動で解除する必要が生じることがあります（例えば、停電後など）。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm unlock &amp;lt;vmid&amp;gt;</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ロックを設定したアクションが
もはや実行されていないことを確認された場合にのみ、
この操作を行ってください。</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_pct">
11. Proxmox Container Toolkit
<a class="headerlink" href="#chapter_pct" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>コンテナは、完全仮想化マシン（VM）に代わる軽量な選択肢です。
コンテナは、完全なオペレーティングシステム（OS）をエミュレートする代わりに、
動作するホストシステムのカーネルを利用します。これにより、コンテナはホストシステム上のリソースに直接アクセスできます。</p></div>
<div class="paragraph">
<p>コンテナの実行コストは低く、通常は無視できる程度です。ただし、考慮すべき欠点も存在します：</p></div>
<div class="ulist"><ul>
<li>
<p>
Proxmoxコンテナ内で実行できるのはLinuxディストリビューションのみです。
  例えばFreeBSDやMicrosoft Windowsなどの他のオペレーティングシステムを
  コンテナ内で実行することはできません。</p>
</li>
<li>
<p>
セキュリティ上の理由から、ホストリソースへのアクセスは制限する必要があります。
したがって、コンテナは独自の分離されたネームスペースで実行されます。さらに、一部の
システムコール（ユーザー空間からLinuxカーネルへの要求）はコンテナ内では許可されません。</p>
</li>
</ul></div>
<div class="paragraph">
<p>Proxmox VEは基盤となるコンテナ技術として<a href="https://linuxcontainers.org/lxc/introduction/">Linuxコンテナ（LXC）</a>を採用しています。「Proxmoxコンテナツールキット」（<span class="monospaced">pct</span>）は複雑なタスクを抽象化するインターフェースを提供することで、LXCの使用と管理を簡素化します。</p></div>
<div class="paragraph">
<p>コンテナはProxmox VEと緊密に統合されています。これによりクラスタ設定を認識し、仮想マシンと同様のネットワーク・ストレージリソースを利用可能です。Proxmox VEファイアウォールの使用や、HAフレームワークを用いたコンテナ管理も実現します。</p></div>
<div class="paragraph">
<p>主な目的は、仮想マシンの利点を追加オーバーヘッドなしで提供する環境を実現することです。
このためProxmoxコンテナは「アプリケーションコンテナ」ではなく「システムコンテナ」に分類されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content"><em>Dockerイメージなどの</em>アプリケーションコンテナを実行する場合は、
Proxmox QEMU VM内で実行することを推奨します。これにより、
アプリケーションコンテナ化の利点を享受しつつ、
ホストからの強力な分離やライブマイグレーション機能など、
VMが提供するメリットも得られます。コンテナ単独ではこれらの機能は利用できません。</td>
</tr></table>
</div>
<div class="sect2">
<h3 id="_technology_overview">
<span>11.1. 技術概要</span>
<a class="headerlink" href="#_technology_overview" title="Permalink to this heading"></a></h3>
<div class="ulist"><ul>
<li>
<p>
LXC (<a href="https://linuxcontainers.org/">https://linuxcontainers.org/</a>)</p>
</li>
<li>
<p>
Proxmox VEグラフィカルウェブユーザーインターフェース（GUI）に統合</p>
</li>
<li>
<p>
使いやすいコマンドラインツール<span class="monospaced">p</span>ct</p>
</li>
<li>
<p>
Proxmox VE REST API経由でのアクセス</p>
</li>
<li>
<p>
コンテナ化された/procファイルシステムを提供する<em>lxcfs</em></p>
</li>
<li>
<p>
リソース分離と制限のための制御グループ（<em>cgroups</em>）</p>
</li>
<li>
<p>
セキュリティ強化のための<em>AppArmor</em>と<em>seccomp</em></p>
</li>
<li>
<p>
最新のLinuxカーネル</p>
</li>
<li>
<p>
イメージベースのデプロイメント（<a href="#pct_supported_distributions">テンプレート</a>）</p>
</li>
<li>
<p>
Proxmox VE<a href="#chapter_storage">ストレージライブラリ</a>を使用</p>
</li>
<li>
<p>
ホストからのコンテナ設定（ネットワーク、DNS、ストレージなど）</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="pct_supported_distributions">
<span>11.2. サポート対象ディストリビューション</span>
<a class="headerlink" href="#pct_supported_distributions" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>公式サポート対象ディストリビューションの一覧は以下を参照。</p></div>
<div class="paragraph">
<p>以下のディストリビューション向けテンプレートは、
リポジトリから入手可能です。<a href="#pct_container_images">pveam</a>ツールまたは
グラフィカルユーザーインターフェースを使用してダウンロードできます。</p></div>
<div class="sect3">
<h4 id="_alpine_linux">11.2.1. Alpine Linux
<a class="headerlink" href="#_alpine_linux" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>Alpine Linuxはmusl libcとbusyboxを基盤とした、
セキュリティ重視の軽量Linuxディストリビューションです。</p></div>
</div>
<div class="attribution">
—<a href="https://alpinelinux.org">https://alpinelinux.org</a></div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては以下を参照:</p></div>
<div class="paragraph">
<p><a href="https://alpinelinux.org/releases/">https://alpinelinux.org/releases/</a></p></div>
</div>
<div class="sect3">
<h4 id="_arch_linux">11.2.2. Arch Linux
<a class="headerlink" href="#_arch_linux" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>Arch Linuxは軽量かつ柔軟なLinux®ディストリビューションであり、シンプルさを追求しています。</p></div>
</div>
<div class="attribution">
—<a href="https://archlinux.org/">https://archlinux.org/</a></div></div>
<div class="paragraph">
<p>Arch Linuxはローリングリリースモデルを採用しています。詳細はWikiを参照してください：</p></div>
<div class="paragraph">
<p><a href="https://wiki.archlinux.org/title/Arch_Linux">https://wiki.archlinux.org/title/Arch_Linux</a></p></div>
</div>
<div class="sect3">
<h4 id="_centos_almalinux_rocky_linux">11.2.3. CentOS、Almalinux、Rocky Linux
<a class="headerlink" href="#_centos_almalinux_rocky_linux" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="_centos_centos_stream">CentOS / CentOS Stream
<a class="headerlink" href="#_centos_centos_stream" title="Permalink to this heading"></a></h5>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>CentOS Linuxディストリビューションは、Red Hat Enterprise Linux (RHEL) のソースから派生した、安定性・予測可能性・管理性・再現性に優れたプラットフォームです。</p></div>
</div>
<div class="attribution">
—<a href="https://centos.org">https://centos.org</a></div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては以下を参照:</p></div>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/CentOS#End-of-support_schedule">https://en.wikipedia.org/wiki/CentOS#End-of-support_schedule</a></p></div>
</div>
<div class="sect4">
<h5 id="_almalinux">Almalinux
<a class="headerlink" href="#_almalinux" title="Permalink to this heading"></a></h5>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>オープンソースであり、コミュニティが所有・管理する、永続的に無料のエンタープライズ向けLinuxディストリビューションです。長期的な安定性に重点を置き、堅牢な本番環境向けプラットフォームを提供します。AlmaLinux OSはRHEL®およびStream以前のCentOSと1:1でバイナリ互換です。</p></div>
</div>
<div class="attribution">
—<a href="https://almalinux.org">https://almalinux.org</a></div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては以下を参照:</p></div>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/AlmaLinux#Releases">https://en.wikipedia.org/wiki/AlmaLinux#Releases</a></p></div>
</div>
<div class="sect4">
<h5 id="_rocky_linux">Rocky Linux
<a class="headerlink" href="#_rocky_linux" title="Permalink to this heading"></a></h5>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>Rocky Linuxは、ダウンストリームパートナーが方向転換した今、米国トップのエンタープライズLinuxディストリビューションと100%バグ単位で互換性を保つよう設計されたコミュニティ主導のエンタープライズOSです。</p></div>
</div>
<div class="attribution">
—<a href="https://rockylinux.org">https://rockylinux.org</a></div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては以下を参照:</p></div>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Rocky_Linux#Releases">https://en.wikipedia.org/wiki/Rocky_Linux#Releases</a></p></div>
</div>
</div>
<div class="sect3">
<h4 id="_debian">11.2.4. Debian
<a class="headerlink" href="#_debian" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>DebianはDebianプロジェクトによって開発・保守されるフリーOSです。
ユーザーのニーズに応える数千のアプリケーションを備えた
フリーのLinuxディストリビューションです。</p></div>
</div>
<div class="attribution">
—<a href="https://www.debian.org/intro/index#software">https://www.debian.org/intro/index#software</a></div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては以下を参照:</p></div>
<div class="paragraph">
<p><a href="https://www.debian.org/releases/stable/releasenotes">https://www.debian.org/releases/stable/releasenotes</a></p></div>
</div>
<div class="sect3">
<h4 id="_devuan">11.2.5. Devuan
<a class="headerlink" href="#_devuan" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>Devuan GNU+Linux は systemd を排除した Debian のフォークであり、
不要な依存関係を回避し Init Freedom を保証することで、
ユーザーがシステム制御を取り戻すことを可能にします。</p></div>
</div>
<div class="attribution">
—<a href="https://www.devuan.org">https://www.devuan.org</a></div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては以下を参照:</p></div>
<div class="paragraph">
<p><a href="https://www.devuan.org/os/releases">https://www.devuan.org/os/releases</a></p></div>
</div>
<div class="sect3">
<h4 id="_fedora">11.2.6. Fedora
<a class="headerlink" href="#_fedora" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>Fedoraは、ハードウェア、クラウド、コンテナ向けの革新的で自由なオープンソースプラットフォームを構築し、ソフトウェア開発者やコミュニティメンバーがユーザー向けにカスタマイズされたソリューションを構築できるようにします。</p></div>
</div>
<div class="attribution">
—<a href="https://getfedora.org">https://getfedora.org</a></div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては以下を参照:</p></div>
<div class="paragraph">
<p><a href="https://fedoraproject.org/wiki/Releases">https://fedoraproject.org/wiki/Releases</a></p></div>
</div>
<div class="sect3">
<h4 id="_gentoo">11.2.7. Gentoo
<a class="headerlink" href="#_gentoo" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>高度に柔軟なソースベースのLinuxディストリビューション。</p></div>
</div>
<div class="attribution">
—<a href="https://www.gentoo.org">https://www.gentoo.org</a></div></div>
<div class="paragraph">
<p>Gentooはローリングリリースモデルを採用しています。</p></div>
</div>
<div class="sect3">
<h4 id="_opensuse">11.2.8. OpenSUSE
<a class="headerlink" href="#_opensuse" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>システム管理者、開発者、デスクトップユーザーに選ばれる選択肢。</p></div>
</div>
<div class="attribution">
—<a href="https://www.opensuse.org">https://www.opensuse.org</a></div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては以下を参照してください:</p></div>
<div class="paragraph">
<p><a href="https://get.opensuse.org/leap/">https://get.opensuse.org/leap/</a></p></div>
</div>
<div class="sect3">
<h4 id="_ubuntu">11.2.9. Ubuntu
<a class="headerlink" href="#_ubuntu" title="Permalink to this heading"></a></h4>
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>Ubuntuは、エンタープライズ向けサーバー、デスクトップ、クラウド、IoT向けの
Linuxベースの現代的なオープンソースオペレーティングシステムです。</p></div>
</div>
<div class="attribution">
—<a href="https://ubuntu.com/">https://ubuntu.com/</a></div></div>
<div class="paragraph">
<p>現在サポートされているリリースについては以下を参照:</p></div>
<div class="paragraph">
<p><a href="https://wiki.ubuntu.com/Releases">https://wiki.ubuntu.com/Releases</a></p></div>
</div>
</div>
<div class="sect2">
<h3 id="pct_container_images">
<span>11.3. コンテナイメージ</span>
<a class="headerlink" href="#pct_container_images" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>コンテナイメージ（時に「テンプレート」や「アプライアンス」とも呼ばれる）は、コンテナを実行するために必要なすべての要素<span class="monospaced">を含むtarアーカイブです</span>。</p></div>
<div class="paragraph">
<p>Proxmox VE自体は、<a href="#pct_supported_distributions">最も一般的なLinuxディストリビューション向けに</a>
様々な基本テンプレートを提供しています。これらはGUI<span class="monospaced">またはpveam</span>（Proxmox VE Appliance Managerの略称）
コマンドラインユーティリティを使用してダウンロードできます。さらに、TurnKey
<a href="https://www.turnkeylinux.org/">Linux</a>コンテナテンプレートもダウンロード可能です。</p></div>
<div class="paragraph">
<p>利用可能なテンプレートのリストは、<em>pve-daily-updateタイマー</em>を通じて毎日更新されます。
以下のコマンドを実行することで手動で更新をトリガーすることも可能です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pveam update</pre>
</div></div>
<div class="paragraph">
<p>利用可能なイメージの一覧を表示するには以下を実行します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pveam available</pre>
</div></div>
<div class="paragraph">
<p>この膨大なリストは、関心のある<span class="monospaced">セクション</span>を指定することで絞り込めます。例えば基本<span class="monospaced">システム</span>イメージの場合：</p></div>
<div class="listingblock">
<div class="title">利用可能なシステムイメージの一覧</div>
<div class="content monospaced">
<pre># pveam available --section system
system          alpine-3.12-default_20200823_amd64.tar.xz
system          alpine-3.13-default_20210419_amd64.tar.xz
system          alpine-3.14-default_20210623_amd64.tar.xz
system          archlinux-base_20210420-1_amd64.tar.gz
system          centos-7-default_20190926_amd64.tar.xz
system          centos-8-default_20201210_amd64.tar.xz
system          debian-9.0-standard_9.7-1_amd64.tar.gz
system          debian-10-standard_10.7-1_amd64.tar.gz
system          devuan-3.0-standard_3.0_amd64.tar.gz
system          fedora-33-default_20201115_amd64.tar.xz
system          fedora-34-default_20210427_amd64.tar.xz
system          gentoo-current-default_20200310_amd64.tar.xz
system          opensuse-15.2-default_20200824_amd64.tar.xz
system          ubuntu-16.04-standard_16.04.5-1_amd64.tar.gz
system          ubuntu-18.04-standard_18.04.1-1_amd64.tar.gz
system          ubuntu-20.04-standard_20.04-1_amd64.tar.gz
system          ubuntu-20.10-standard_20.10-1_amd64.tar.gz
system          ubuntu-21.04-standard_21.04-1_amd64.tar.gz</pre>
</div></div>
<div class="paragraph">
<p>テンプレートを使用するには、まずいずれかのストレージにダウンロードする必要があります。
保存先が不明な場合は、<span class="monospaced">ローカルの</span>命名済みストレージを利用できます。
クラスタ環境では、全ノードがイメージにアクセスできるよう共有ストレージの使用が推奨されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pveam download local debian-10.0-standard_10.0-1_amd64.tar.gz</pre>
</div></div>
<div class="paragraph">
<p>これで、そのイメージを使用してコンテナを作成する準備が整いました。
ダウンロード済みのイメージをすべて一覧表示するには、storage<span class="monospaced">local</span>で以下を実行します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pveam list local
local:vztmpl/debian-10.0-standard_10.0-1_amd64.tar.gz  219.95MB</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VEのWebインターフェースGUIを使用して、コンテナテンプレートのダウンロード、一覧表示、削除も可能です。</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">pct</span>は新しいコンテナ作成に使用します。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct create 999 local:vztmpl/debian-10.0-standard_10.0-1_amd64.tar.gz</pre>
</div></div>
<div class="paragraph">
<p>上記コマンドは完全なProxmox VEボリューム識別子を表示します。これにはストレージ名が含まれ、
ほとんどのProxmox VEコマンドで使用可能です。例えば後でこのイメージを削除するには:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pveam remove local:vztmpl/debian-10.0-standard_10.0-1_amd64.tar.gz</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="pct_settings">
<span>11.4. コンテナ設定</span>
<a class="headerlink" href="#pct_settings" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="pct_general">11.4.1. 基本設定
<a class="headerlink" href="#pct_general" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-ct-general.png">
<img src="images/screenshot/gui-create-ct-general.png" alt="screenshot/gui-create-ct-general.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>コンテナの一般的な設定には以下が含まれます</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>ノード</strong>: コンテナが実行される物理サーバー</p>
</li>
<li>
<p>
<strong>CT ID</strong>：このProxmox VEインストール環境内でコンテナを識別するための一意の番号</p>
</li>
<li>
<p>
<strong>ホスト名</strong>：コンテナのホスト名</p>
</li>
<li>
<p>
<strong>リソースプール</strong>：コンテナと仮想マシンの論理グループ</p>
</li>
<li>
<p>
<strong>パスワード</strong>：コンテナの root パスワード</p>
</li>
<li>
<p>
<strong>SSH公開鍵</strong>: SSH経由でrootアカウントに接続するための公開鍵</p>
</li>
<li>
<p>
<strong>非特権コンテナ</strong>: 作成時に特権コンテナと非特権コンテナのどちらを作成するかを選択するオプション</p>
</li>
</ul></div>
<div class="sect4">
<h5 id="_unprivileged_containers">非特権コンテナ
<a class="headerlink" href="#_unprivileged_containers" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>非特権コンテナはユーザーネームスペースと呼ばれる新しいカーネル機能を使用します。
コンテナ内のルートUID 0は、コンテナ外の非特権ユーザーにマッピングされます。
これは、これらのコンテナにおけるほとんどのセキュリティ問題（コンテナからの脱出、リソースの悪用など）が、
ランダムな非特権ユーザーに影響を与え、LXCの問題ではなく一般的なカーネルのセキュリティバグとなることを意味します。
LXCチームは、非特権コンテナは設計上安全であると考えています。</p></div>
<div class="paragraph">
<p>これは新規コンテナ作成時のデフォルトオプションです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンテナがsystemdをinitシステムとして使用する場合、コンテナ内で実行されるsystemdのバージョンは220以上である必要があることに注意してください。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="_privileged_containers">特権付きコンテナ
<a class="headerlink" href="#_privileged_containers" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>コンテナのセキュリティは、強制アクセス制御<em>AppArmor</em>制限、<em>seccomp</em>フィルタ、Linux カーネルネームスペースによって実現されます。LXC チームはこの種のコンテナを安全とは見なしておらず、新しいコンテナ脱出エクスプロイトを CVE 登録や迅速な修正に値するセキュリティ問題とは見なしません。そのため、特権コンテナは信頼できる環境でのみ使用すべきです。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pct_cpu">11.4.2. CPU
<a class="headerlink" href="#pct_cpu" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-ct-cpu.png">
<img src="images/screenshot/gui-create-ct-cpu.png" alt="screenshot/gui-create-ct-cpu.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p><span class="monospaced">cores</span>オプションを使用して、コンテナ内で可視となる CPU の数を制限できます。これは Linux の<em>cpuset</em>cgroup (<strong>制御グループ</strong>) を使用して実装されています。
<span class="monospaced">pvestatd</span>内の特別なタスクが、稼働中のコンテナを利用可能な CPU 間で定期的に分散させようと試みます。
割り当てられた CPU を確認するには、次のコマンドを実行します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct cpusets
 ---------------------
 102:              6 7
 105:      2 3 4 5
 108:  0 1
 ---------------------</pre>
</div></div>
<div class="paragraph">
<p>コンテナはホストカーネルを直接使用します。コンテナ内のすべてのタスクは
ホストCPUスケジューラによって処理されます。Proxmox VEはデフォルトでLinux<em>CFS</em>（<strong>完全公平スケジューラ</strong>）スケジューラを使用しており、
追加の帯域幅制御オプションを備えています。</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<span class="monospaced">cpulimit</span>: <br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
このオプションを使用すると、割り当てられたCPU時間をさらに制限できます。
これは浮動小数点数であるため、コンテナに2コアを割り当てつつ、全体のCPU消費量を0.5コアに制限することも完全に有効です。</p>
<div class="listingblock">
<div class="content monospaced">
<pre>cores: 2
cpulimit: 0.5</pre>
</div></div>
</td>
</tr>
<tr>
<td class="hdlist1">
<span class="monospaced">cpuunits</span>: <br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
これはカーネルスケジューラに渡される相対ウェイトです。数値が大きいほど、このコンテナが割り当てられるCPU時間が増加します。数値は他のすべての実行中コンテナのウェイトに対する相対値です。<span class="monospaced">デフォルトは100</span>（ホストがレガシーcgroup v1を使用している場合は<span class="monospaced">1024</span>）です。この設定を使用して特定のコンテナを優先できます。</p>
</td>
</tr>
</table></div>
</div>
<div class="sect3">
<h4 id="pct_memory">11.4.3. メモリ
<a class="headerlink" href="#pct_memory" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-ct-memory.png">
<img src="images/screenshot/gui-create-ct-memory.png" alt="screenshot/gui-create-ct-memory.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>コンテナのメモリはcgroupメモリコントローラで制御されます。</p></div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<span class="monospaced">memory</span>: <br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
全体のメモリ使用量を制限します。これは
<span class="monospaced">memory.limit_in_bytes</span>cgroup設定に対応します。</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<span class="monospaced">スワップ</span>: <br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ホストのスワップ領域から追加のスワップメモリをコンテナが使用できるようにします。<span class="monospaced">これはmemory.memsw.limit_in_bytes</span>cgroup設定に対応し、両値（<span class="monospaced">メモリ＋スワップ</span>）の合計が設定値となります。</p>
</td>
</tr>
</table></div>
</div>
<div class="sect3">
<h4 id="pct_mount_points">11.4.4. マウントポイント
<a class="headerlink" href="#pct_mount_points" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-ct-root-disk.png">
<img src="images/screenshot/gui-create-ct-root-disk.png" alt="screenshot/gui-create-ct-root-disk.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>ルートマウントポイントは<span class="monospaced">rootfs</span>プロパティで設定されます。
最大 256 個の追加マウントポイントを設定可能です。対応するオプションは
<span class="monospaced">mp0</span>から<span class="monospaced">mp255</span> と呼ばれます。以下の設定を含めることができます:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">rootfs</span>:<span class="monospaced">[volume=]&amp;lt;volume&amp;gt; [,acl=&amp;lt;1|0&amp;gt;] [,mountoptions=&amp;lt;opt[;opt...]&amp;gt;] [,quota=&amp;lt;1|0&amp;gt;][,replicate=&amp;lt;1|0&amp;gt;] [,ro=&amp;lt;1|0&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;DiskSize&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをコンテナのルートとして使用します。すべてのオプションの詳細な説明は以下を参照してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mp[n]</span>:<span class="monospaced">[volume=]&amp;lt;ボリューム&amp;gt; ,mp=&amp;lt;パス&amp;gt; [,acl=&amp;lt;1|0&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,mountoptions=&amp;lt;オプション[;オプション...]&amp;gt;] [,quota=&amp;lt;1|0&amp;gt;][,replicate=&amp;lt;1|0&amp;gt;] [,ro=&amp;lt;1|0&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;DiskSize&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをコンテナのマウントポイントとして使用します。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">acl=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ACLサポートを明示的に有効化または無効化します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">backup=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
バックアップにマウントポイントを含めるかどうか（ボリュームのマウントポイントのみに使用）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mountoptions=&amp;lt;opt[;opt...]&amp;gt;</span></dt>
<dd>
<p>
rootfs/mps用の追加マウントオプション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mp=&amp;lt;Path&amp;gt;</span></dt>
<dd>
<p>
コンテナ内部から見たマウントポイントへのパス。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">セキュリティ上の理由からシンボリックリンクを含めてはいけません。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">quota=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
コンテナ内でユーザークォータを有効化（zfsサブボリュームでは非対応）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replicate=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
このボリュームをストレージレプリカジョブに含めるか否か。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ro=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
読み取り専用マウントポイント</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">shared=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
この非ボリュームマウントポイントを全ノードで利用可能としてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMVUlEQVRogdWZeXDVVZbHP7/f27JB
wtJIiCERRFlbx5FuHRrRBgtBsRIwCCOrFmGmiDBjYVNlQlgiQjU6IjI4xLJxGf5QGp0Cbaftsu3R
hu6aYXqgLZoWEsjyyDP7S972e7/l3vnj5cW3Ji9M/zOn6lRS997fvd/vueece+59ipSS/89iv5mP
ZEQQQsS23RQARVEAUFUVRVFQog0ZyogJSClld3c327Ztw7IsLMuKto90KgBsNhtVVVXMnj2bvLw8
7Ha7HBEJKWXGKoSQXV1dcsuWLfLSpUsyKkKIIdWyrLTqdrvlU089Jc+cOSM9Ho8Mh8NSCCEzxTRi
8JWVlbKtre0vAt6yLGmapmxtbZXr1q2TZ86ckW1tbSMikTH4GzduyKqqqkHwsSA1TZOhUChOg8Hg
oBqGIQ3DSAk+VleuXDliEspwviullD09PbzwwgscO3Yszt91XScQCNDZ2YlhGIPfuFwu7Pb48FJV
lZycnEG/z8/PRwiBqqqDYzweD88//zyrV69m7ty5jBs3DofDMWRgD0lASik9Hg979uzh2LFjcYEa
CoVob2/n2q9+hbZ585BGSCWltbVMr61NtSYbN25k7dq1zJkzZ1gSaqrGWPD79+9PAh8MBuns7OTi
e+8R2rwZCYOaqTTt3cuf6+qSwAMcP36co0eP8vXXX9Pd3Y1hGMg0lk65A1HwdXV1vPHGG0mW7+jo
4A8/+xn2BAAAI0riQOnu3cyork7Zt3btWtavX89dd92VdieSCEgppdvt5sCBAxw5ciSuLxQK0dTU
RMOHHyJ37hwh1NSiAKU7djDzxRdT9q9YsYJt27YxY8aMlCTiCEgp5eXLl6mvr+fVV1+NmygYDNLW
1sY3J09ipLEYQDPw2sBfCTwMLARKgKwhiNxWU8OsXbvi2qLYnnzySSorK1PvRGyqvH79uty6dWtS
Lg8EAvLKlSvyo1275M8hSV8H+eMBvRPkP9Vslp0tV6W3u12+c7hOTgT5NyAXgtwE8gTIUyn0D9XV
0jAMqet6klZUVMjPP/88KcWqUcs3NjZy+PBhDh06FGeFqNtcOnECY8+euICVwDWgFtj/m1/wD+8f
5xtg6uy5ZI+5BSkkU6fexgu7tvLWhd/x1tXL5P/905wAggnzSODavn388Sc/SblDL7/8Mq+99hqX
L1+OC2zb7t27uX79+u7Dhw+ndJvW1lYaP/qI0EDKS1z0XeDjC7/l9llz+d6EWxjv0imdcgeFRcVo
fR46vm1Cx8ndP5hP3qjR/GDuX/GbC5/iberl1qirxGjv73+PYRjc8tBDcVhGjRpFRUUF27dvp7i4
mPz8fFwuV2QHVq1aldLyDQ0NXDt5En91NRIQCRqNHld2HsLUCfu6GD9mNIoVQggDy9RQpYLTbkdV
7Vh6CH9vJ/fcfz/vALsAN2AlzHv1wAEu1tTExUI0Hl555RXq6upobm4mEAhECEyePDkOvK7rtLS0
cOP0aby1tUnAo2oNkFAUSTjoRfN+ix7wgjRBShACVVFQRGSkHvTypwtnmXHPQhrbb3D0k1McAdpi
DBLVhp/+lIvV1UlV7oQJE8jNzcXtduPz+ZIPMtM0aWhooPH99+mtrU1ymVRqUxUQFlJYSBFGCivG
OSyEaSCFAGlhd+Vy7w/n43BmM3POXWx69hl8AyMTDXTl4EEu7t2bCBGAQCCAruupCdjtdrp3705r
+ViN22YhsUwdyzRBCpACyzIRMnpngCxXNjYlMk4L+ggoYXxp5pbAlX37cDgcSQSEEAxmoVgQg/9n
AP67bVdAUcFmQ3W6IgtIiWUKLCGwLGvQj69e+m+EsBB6iGB/N/3e9oyNlIgRYm5kiR2JH0L6MkFY
Ei0UQKAycdJUbIodT3Mjpu6n3xfCptoRlomQCqZpRkhLCykMhLBQSV1HJbalKnvSF3MpNO0OSIEw
DWyuPCaVzCRv7ER8Ph+mtJM35lZsdjvuxktYhobDkYOCgqJEDWLLaAfSVc1p78SJO2AAvUBggLUN
KIx2Kgqjv3crY2wOiqaqKKoKihKJCctCC/npbW+jq7sbS7UjkGCZCCkQQkdJsV6mRWHGBH4HLHpx
F3LcGDq6u7nw2S85++V/4gb0kB9hFoAZwuZwgc2BqjpQVRWbzYXd4cDlysHn7WJi0W2EfH24XA6E
jKySqhTPtDRPIjB4XUtoPw3sKV/O+KJipJT4V63mq3/7Obu21/LN/5xl9l/PIys7G2fOaBS7E5vN
QrU7UW0KNlUFp5P8MeO5/8HFhPo7CXr7MMIaQW8neSkMlqnEEYj1s8QJbwXaWpopmDgJh93OqHGF
LFy9jjunTeHNo2uAvUy54/uMuaUYV24BUpVYpoVEwaY4UVUbitNJ9ugxOBw2tEAPfX29QCjuVB9O
EmNBTdeRGEj3A56OdkwtgDDCCKFjz8ql6N55/G3VcRouX+SXH72Ht6udcCg4cJiJSPIn8oCloIKU
KAhURUUIiVCjx128pjtrEiVtFkrMNNOBA+s34XG3YIRDSMtAkSbOrDzuvOchHnmiklEFY3n76G7O
f/nv9Ht7EMJCSjGoljCxjOBAnaSjhYPowevDZrx04FMSGLwnJEzmAOYCn33wAUYoiGXoSMsEoeNw
ZTO2aDrzFpWxck0VJVOn4fd2E/T7oneNyOFlGkjLwNTD6FoILRQEa/hDcyhJIuB0OlFVNeVE04B3
XjnC+d9+hRYKYJlhpDBBGDidDiaUfp/xk24nJ3c0eaPzsKsgzEhtZJkGIuzDNDRCAR99fb309XYh
NAYPsnQ6IgJSSgoKCihavDilJZ4Aajf8HVf/fAnLCCNNAyktECaqIsgbV8So0WMHrn2RGLBMHREO
YBg6eiiIFgzQ7/US8vmYoEDuENa/u6oqcwJRPysoKOC+N9+kcNGiJGvkAQuADY+twn3tCuFg/4CV
DbB0VKHhzHbhdGVhs6kgDKTuR9f86KEAWtBHd0c73p52pB5Av5KewJxnnmHeoUOEw+EkjHEEYi8M
EHlFKyws5IfHjlG4cGHSxJOA1cATPy7nT388j+73YoYDCEuP1DhSRrKOlFhmmLAWQNMCBHw9tHtu
8K2nBcsI8uGxf8HoiRBINNTtjz7KQ/X1xL6iRDHGvubZAfr7+1Nuz+TJk6G+nv/atInmX/86rq8A
WAlUrahk/Fio/8XHjM4fi93pHCgRFCzLQtd1tFAQLeCjs9NNb4cHxdL44J8PozfD7XyXRqNy97p1
PPz220gp0XU9zriKogw+SaqqGtmB48ePU15enkRASklRURH31tcz6cEHk1JrAfAUcEcPLLjvMU69
/694uzsI+X3093TS5blBl8eNt72VHk8Tfd9eR+vv4MQ/HkZpiJwttgTL3/Hoo2nBNzY2smjRIhYs
WEBBQQEulyvyLuT3+2VTUxM7d+7k5MmTKXNuS0sL555+mtYvv0zqE0A7kavhqFL4oAlCCWOygGIi
qTiHyMnuTBgz/bHHKDt9GillnN8D+P1+ysrKWLJkCdOmTWPWrFmUlpZGCAghpN/vp7m5mZqaGl5/
/XUKCwtJFLfbzX+sX8+Nr75K6rtZiXr49KVLKf/4Y4QQ6LqeBP6RRx6hvLycadOmMXPmTEpKSsjN
zf3uZS6WRHV1NadOnUpaTEpJa2sr5zZupOkmSaQqk2csWcLyTz4BQNO0uL7GxkbWr1+fErzNZlMG
w1lVVSUvL4+SkhL27dvH8uXL8Xg8ceABiouLue+ttyieN2+IK2Z6TRx/5+LFacE3NDRQWVmZFjwk
nAOxJF566SW2bNnChQsXkmKipKSEB959l9vmzcvo1pZOpz/8ME98+mla8Bs2bGDZsmVpwUOa5/VE
d0oXE319fXxWXs43Z88m9Q0n03/0I1YPJIRE8OfOnWPHjh2UlZUNCT4tgUQSO3fupKqqigceeGCw
P/a7VM8emUg0VcbK+fPn2bp1KytWrBgW/JAEEknU1NTw7LPPMn/+/GFBZQI8lZw/f57nnnuO5cuX
M2XKlGHBD0sgkURdXR2PP/44FRUVNwV+qP7Tp09z8ODBjNxmRAQSSRw4cIBly5axdOnSvwh4RVH4
4osv2L9/P2VlZRlbfkQEEkls376djo4OQqHE83bk4nK5EEKwZs0aSktLRwR+RATgOxItLS1cu3aN
vr6+wTfK/4tEfzeeMmUKkydPzhg8jJAAREgEg0H6+vrQNC2pFL8ZUVWVrKws8vPzycnJQVXVjH/s
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションはマウントポイントを自動的に共有しません。既に共有されているものと見なします！</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=&amp;lt;ディスクサイズ&amp;gt;</span></dt>
<dd>
<p>
ボリュームサイズ（読み取り専用値）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ボリューム=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
コンテナ内にマウントするボリューム、デバイス、またはディレクトリ。</p>
</dd>
</dl></div>
</dd>
</dl></div>
<div class="paragraph">
<p>現在、マウントポイントには3種類があります：ストレージバックアップマウントポイント、
バインドマウント、デバイスマウントです。</p></div>
<div class="listingblock">
<div class="title">典型的なコンテナ<span class="monospaced">rootfs</span>構成</div>
<div class="content monospaced">
<pre>rootfs: thin1:base-100-disk-1,size=8G</pre>
</div></div>
<div class="sect4">
<h5 id="_storage_backed_mount_points">ストレージバックアップマウントポイント
<a class="headerlink" href="#_storage_backed_mount_points" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ストレージバックアップのマウントポイントはProxmox VEストレージサブシステムによって管理され、
3つの異なるタイプがあります:</p></div>
<div class="ulist"><ul>
<li>
<p>
イメージベース: 単一の ext4 フォーマットファイルシステムを含む生のイメージです。</p>
</li>
<li>
<p>
ZFSサブボリューム: 技術的にはバインドマウントですが、管理されたストレージを備えており、
  サイズ変更やスナップショットの作成が可能です。</p>
</li>
<li>
<p>
ディレクトリ:<span class="monospaced">size=0</span>を指定すると特殊ケースとなり、生イメージの代わりにディレクトリが作成される。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ストレージバックアップマウントポイントボリューム向けの特殊オプション構文<span class="monospaced">STORAGE_ID:SIZE_IN_GB</span>は、指定されたストレージ上に指定サイズでボリュームを自動割り当てします。例:</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content monospaced">
<pre>pct set 100 -mp0 thin1:10,mp=/path/in/container</pre>
</div></div>
<div class="paragraph">
<p>これはストレージ<span class="monospaced">thin1</span>上に 10GB のボリュームを割り当て、ボリューム ID プレースホルダー<span class="monospaced">10</span>を割り当てられたボリューム ID で置き換え、コンテナ内のマウントポイントを<span class="monospaced">/path/in/container</span>に設定します</p></div>
</div>
<div class="sect4">
<h5 id="_bind_mount_points">バインドマウントポイント
<a class="headerlink" href="#_bind_mount_points" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>バインドマウントは、Proxmox VEホスト上の任意のディレクトリをコンテナ内でアクセス可能にします。
主な使用例は以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
ゲスト内でのホームディレクトリへのアクセス</p>
</li>
<li>
<p>
ゲスト内でのUSBデバイスディレクトリへのアクセス</p>
</li>
<li>
<p>
ゲストからホストのNFSマウントへのアクセス</p>
</li>
</ul></div>
<div class="paragraph">
<p>バインドマウントはストレージサブシステムで管理されないため、
コンテナ内からスナップショットの作成やクォータの管理はできません。
非特権コンテナではユーザーマッピングによる権限問題が発生する可能性があり、
ACLは使用できません。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">vzdump</span>使用時、バインドマウントポイントの内容はバックアップされません。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMVUlEQVRogdWZeXDVVZbHP7/f27JB
wtJIiCERRFlbx5FuHRrRBgtBsRIwCCOrFmGmiDBjYVNlQlgiQjU6IjI4xLJxGf5QGp0Cbaftsu3R
hu6aYXqgLZoWEsjyyDP7S972e7/l3vnj5cW3Ji9M/zOn6lRS997fvd/vueece+59ipSS/89iv5mP
ZEQQQsS23RQARVEAUFUVRVFQog0ZyogJSClld3c327Ztw7IsLMuKto90KgBsNhtVVVXMnj2bvLw8
7Ha7HBEJKWXGKoSQXV1dcsuWLfLSpUsyKkKIIdWyrLTqdrvlU089Jc+cOSM9Ho8Mh8NSCCEzxTRi
8JWVlbKtre0vAt6yLGmapmxtbZXr1q2TZ86ckW1tbSMikTH4GzduyKqqqkHwsSA1TZOhUChOg8Hg
oBqGIQ3DSAk+VleuXDliEspwviullD09PbzwwgscO3Yszt91XScQCNDZ2YlhGIPfuFwu7Pb48FJV
lZycnEG/z8/PRwiBqqqDYzweD88//zyrV69m7ty5jBs3DofDMWRgD0lASik9Hg979uzh2LFjcYEa
CoVob2/n2q9+hbZ585BGSCWltbVMr61NtSYbN25k7dq1zJkzZ1gSaqrGWPD79+9PAh8MBuns7OTi
e+8R2rwZCYOaqTTt3cuf6+qSwAMcP36co0eP8vXXX9Pd3Y1hGMg0lk65A1HwdXV1vPHGG0mW7+jo
4A8/+xn2BAAAI0riQOnu3cyork7Zt3btWtavX89dd92VdieSCEgppdvt5sCBAxw5ciSuLxQK0dTU
RMOHHyJ37hwh1NSiAKU7djDzxRdT9q9YsYJt27YxY8aMlCTiCEgp5eXLl6mvr+fVV1+NmygYDNLW
1sY3J09ipLEYQDPw2sBfCTwMLARKgKwhiNxWU8OsXbvi2qLYnnzySSorK1PvRGyqvH79uty6dWtS
Lg8EAvLKlSvyo1275M8hSV8H+eMBvRPkP9Vslp0tV6W3u12+c7hOTgT5NyAXgtwE8gTIUyn0D9XV
0jAMqet6klZUVMjPP/88KcWqUcs3NjZy+PBhDh06FGeFqNtcOnECY8+euICVwDWgFtj/m1/wD+8f
5xtg6uy5ZI+5BSkkU6fexgu7tvLWhd/x1tXL5P/905wAggnzSODavn388Sc/SblDL7/8Mq+99hqX
L1+OC2zb7t27uX79+u7Dhw+ndJvW1lYaP/qI0EDKS1z0XeDjC7/l9llz+d6EWxjv0imdcgeFRcVo
fR46vm1Cx8ndP5hP3qjR/GDuX/GbC5/iberl1qirxGjv73+PYRjc8tBDcVhGjRpFRUUF27dvp7i4
mPz8fFwuV2QHVq1aldLyDQ0NXDt5En91NRIQCRqNHld2HsLUCfu6GD9mNIoVQggDy9RQpYLTbkdV
7Vh6CH9vJ/fcfz/vALsAN2AlzHv1wAEu1tTExUI0Hl555RXq6upobm4mEAhECEyePDkOvK7rtLS0
cOP0aby1tUnAo2oNkFAUSTjoRfN+ix7wgjRBShACVVFQRGSkHvTypwtnmXHPQhrbb3D0k1McAdpi
DBLVhp/+lIvV1UlV7oQJE8jNzcXtduPz+ZIPMtM0aWhooPH99+mtrU1ymVRqUxUQFlJYSBFGCivG
OSyEaSCFAGlhd+Vy7w/n43BmM3POXWx69hl8AyMTDXTl4EEu7t2bCBGAQCCAruupCdjtdrp3705r
+ViN22YhsUwdyzRBCpACyzIRMnpngCxXNjYlMk4L+ggoYXxp5pbAlX37cDgcSQSEEAxmoVgQg/9n
AP67bVdAUcFmQ3W6IgtIiWUKLCGwLGvQj69e+m+EsBB6iGB/N/3e9oyNlIgRYm5kiR2JH0L6MkFY
Ei0UQKAycdJUbIodT3Mjpu6n3xfCptoRlomQCqZpRkhLCykMhLBQSV1HJbalKnvSF3MpNO0OSIEw
DWyuPCaVzCRv7ER8Ph+mtJM35lZsdjvuxktYhobDkYOCgqJEDWLLaAfSVc1p78SJO2AAvUBggLUN
KIx2Kgqjv3crY2wOiqaqKKoKihKJCctCC/npbW+jq7sbS7UjkGCZCCkQQkdJsV6mRWHGBH4HLHpx
F3LcGDq6u7nw2S85++V/4gb0kB9hFoAZwuZwgc2BqjpQVRWbzYXd4cDlysHn7WJi0W2EfH24XA6E
jKySqhTPtDRPIjB4XUtoPw3sKV/O+KJipJT4V63mq3/7Obu21/LN/5xl9l/PIys7G2fOaBS7E5vN
QrU7UW0KNlUFp5P8MeO5/8HFhPo7CXr7MMIaQW8neSkMlqnEEYj1s8QJbwXaWpopmDgJh93OqHGF
LFy9jjunTeHNo2uAvUy54/uMuaUYV24BUpVYpoVEwaY4UVUbitNJ9ugxOBw2tEAPfX29QCjuVB9O
EmNBTdeRGEj3A56OdkwtgDDCCKFjz8ql6N55/G3VcRouX+SXH72Ht6udcCg4cJiJSPIn8oCloIKU
KAhURUUIiVCjx128pjtrEiVtFkrMNNOBA+s34XG3YIRDSMtAkSbOrDzuvOchHnmiklEFY3n76G7O
f/nv9Ht7EMJCSjGoljCxjOBAnaSjhYPowevDZrx04FMSGLwnJEzmAOYCn33wAUYoiGXoSMsEoeNw
ZTO2aDrzFpWxck0VJVOn4fd2E/T7oneNyOFlGkjLwNTD6FoILRQEa/hDcyhJIuB0OlFVNeVE04B3
XjnC+d9+hRYKYJlhpDBBGDidDiaUfp/xk24nJ3c0eaPzsKsgzEhtZJkGIuzDNDRCAR99fb309XYh
NAYPsnQ6IgJSSgoKCihavDilJZ4Aajf8HVf/fAnLCCNNAyktECaqIsgbV8So0WMHrn2RGLBMHREO
YBg6eiiIFgzQ7/US8vmYoEDuENa/u6oqcwJRPysoKOC+N9+kcNGiJGvkAQuADY+twn3tCuFg/4CV
DbB0VKHhzHbhdGVhs6kgDKTuR9f86KEAWtBHd0c73p52pB5Av5KewJxnnmHeoUOEw+EkjHEEYi8M
EHlFKyws5IfHjlG4cGHSxJOA1cATPy7nT388j+73YoYDCEuP1DhSRrKOlFhmmLAWQNMCBHw9tHtu
8K2nBcsI8uGxf8HoiRBINNTtjz7KQ/X1xL6iRDHGvubZAfr7+1Nuz+TJk6G+nv/atInmX/86rq8A
WAlUrahk/Fio/8XHjM4fi93pHCgRFCzLQtd1tFAQLeCjs9NNb4cHxdL44J8PozfD7XyXRqNy97p1
PPz220gp0XU9zriKogw+SaqqGtmB48ePU15enkRASklRURH31tcz6cEHk1JrAfAUcEcPLLjvMU69
/694uzsI+X3093TS5blBl8eNt72VHk8Tfd9eR+vv4MQ/HkZpiJwttgTL3/Hoo2nBNzY2smjRIhYs
WEBBQQEulyvyLuT3+2VTUxM7d+7k5MmTKXNuS0sL555+mtYvv0zqE0A7kavhqFL4oAlCCWOygGIi
qTiHyMnuTBgz/bHHKDt9GillnN8D+P1+ysrKWLJkCdOmTWPWrFmUlpZGCAghpN/vp7m5mZqaGl5/
/XUKCwtJFLfbzX+sX8+Nr75K6rtZiXr49KVLKf/4Y4QQ6LqeBP6RRx6hvLycadOmMXPmTEpKSsjN
zf3uZS6WRHV1NadOnUpaTEpJa2sr5zZupOkmSaQqk2csWcLyTz4BQNO0uL7GxkbWr1+fErzNZlMG
w1lVVSUvL4+SkhL27dvH8uXL8Xg8ceABiouLue+ttyieN2+IK2Z6TRx/5+LFacE3NDRQWVmZFjwk
nAOxJF566SW2bNnChQsXkmKipKSEB959l9vmzcvo1pZOpz/8ME98+mla8Bs2bGDZsmVpwUOa5/VE
d0oXE319fXxWXs43Z88m9Q0n03/0I1YPJIRE8OfOnWPHjh2UlZUNCT4tgUQSO3fupKqqigceeGCw
P/a7VM8emUg0VcbK+fPn2bp1KytWrBgW/JAEEknU1NTw7LPPMn/+/GFBZQI8lZw/f57nnnuO5cuX
M2XKlGHBD0sgkURdXR2PP/44FRUVNwV+qP7Tp09z8ODBjNxmRAQSSRw4cIBly5axdOnSvwh4RVH4
4osv2L9/P2VlZRlbfkQEEkls376djo4OQqHE83bk4nK5EEKwZs0aSktLRwR+RATgOxItLS1cu3aN
vr6+wTfK/4tEfzeeMmUKkydPzhg8jJAAREgEg0H6+vrQNC2pFL8ZUVWVrKws8vPzycnJQVXVjH/s
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">セキュリティ上の理由から、バインドマウントは
この目的のために特別に予約されたソースディレクトリ（例:<span class="monospaced">/mnt/bindmounts</span> 配下のディレクトリ階層）を使用してのみ確立すべきです。
<span class="monospaced">/</span>、<span class="monospaced">/var</span>、<span class="monospaced">/etc</span>などのシステムディレクトリをコンテナにバインドマウントすることは絶対に避けてください。これは重大なセキュリティリスクをもたらします。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">バインドマウントのソースパスにはシンボリックリンクを含めてはいけません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>例: コンテナID<span class="monospaced">100</span>の<span class="monospaced">/shared</span> パスで<span class="monospaced">/mnt/bindmounts/shared</span>ディレクトリにアクセス可能にするには、以下のような設定行を /etc/pve/lxc/100.conf に追加します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>mp0: /mnt/bindmounts/shared,mp=/shared</pre>
</div></div>
<div class="paragraph">
<p>を<span class="monospaced">/etc/pve/lxc/100.conf</span> に追加します。</p></div>
<div class="paragraph">
<p>あるいは、<span class="monospaced">pct</span>ツールを使用する方法もあります:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pct set 100 -mp0 /mnt/bindmounts/shared,mp=/shared</pre>
</div></div>
<div class="paragraph">
<p>で同様の結果を得られます。</p></div>
</div>
<div class="sect4">
<h5 id="_device_mount_points">デバイスマウントポイント
<a class="headerlink" href="#_device_mount_points" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>デバイスマウントポイントを使用すると、ホストのブロックデバイスをコンテナに直接マウントできます。バインドマウントと同様に、デバイスマウントはProxmox VEのストレージサブシステムによって管理されませんが、<span class="monospaced">クォータ</span> <span class="monospaced">とacl</span>オプションは適用されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">デバイスマウントポイントは特別な状況でのみ使用すべきです。
ほとんどの場合、ストレージベースのマウントポイントの方が同等のパフォーマンスと
より多くの機能を提供します。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">vzdump</span>使用時、デバイスマウントポイントの内容はバックアップされません。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="pct_container_network">11.4.5. ネットワーク
<a class="headerlink" href="#pct_container_network" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-create-ct-network.png">
<img src="images/screenshot/gui-create-ct-network.png" alt="screenshot/gui-create-ct-network.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>単一コンテナに対して最大10個のネットワークインターフェースを設定できます。
対応するオプション<span class="monospaced">は</span> <span class="monospaced">net0からnet9</span>と呼ばれ、以下の設定を含めることができます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">net[n]</span>:<span class="monospaced">name=&amp;lt;string&amp;gt; [,bridge=&amp;lt;bridge&amp;gt;] [,firewall=&amp;lt;1|0&amp;gt;] [,gw=&amp;lt;GatewayIPv4&amp;gt;] [,gw6=&amp;lt;GatewayIPv6&amp;gt;][,hwaddr=&amp;lt;XX:XX:XX:XX:XX:XX&amp;gt;] [,ip=&amp;lt;(IPv4/CIDR|dhcp|manual)&amp;gt;] [,ip6=&amp;lt;(IPv6/CIDR|auto|dhcp|manual)&amp;gt;] [,link_down=&amp;lt;1|0&amp;gt;][,mtu=&amp;lt;整数&amp;gt;] [,rate=&amp;lt;Mbps&amp;gt;] [,tag=&amp;lt;整数&amp;gt;] [,trunks=&amp;lt;vlanid[;vlanid...]&amp;gt;] [,type=&amp;lt;veth&amp;gt;]</span></dt>
<dd>
<p>
コンテナのネットワークインターフェースを指定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">bridge=&amp;lt;bridge&amp;gt;</span></dt>
<dd>
<p>
ネットワークデバイスを接続するブリッジ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">firewall=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
このインターフェースのファイアウォールルールを使用するかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">gw=&amp;lt;GatewayIPv4&amp;gt;</span></dt>
<dd>
<p>
IPv4トラフィックのデフォルトゲートウェイ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">gw6=&amp;lt;GatewayIPv6&amp;gt;</span></dt>
<dd>
<p>
IPv6トラフィックのデフォルトゲートウェイ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hwaddr=&amp;lt;XX:XX:XX:XX:XX:XX&amp;gt;</span></dt>
<dd>
<p>
I/G（個別/グループ）ビットが設定されていない共通MACアドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip=&amp;lt;(IPv4/CIDR|dhcp|manual)&amp;gt;</span></dt>
<dd>
<p>
CIDR形式のIPv4アドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip6=&amp;lt;(IPv6/CIDR|auto|dhcp|manual)&amp;gt;</span></dt>
<dd>
<p>
CIDR形式のIPv6アドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">link_down=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
このインターフェースを切断すべきかどうか（プラグを抜くような状態）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mtu=&amp;lt;integer&amp;gt; (64 - 65535)</span></dt>
<dd>
<p>
インターフェースの最大転送単位。(lxc.network.mtu)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">name=&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナ内部から見たネットワークデバイスの名前。(lxc.network.name)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rate=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
インターフェースにレート制限を適用する</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">タグ=&amp;lt;整数&amp;gt; (1 - 4094)</span></dt>
<dd>
<p>
このインターフェースのVLANタグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">trunks=&amp;lt;vlanid[;vlanid...]&amp;gt;</span></dt>
<dd>
<p>
インターフェース経由で通過させるVLAN ID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">type=&amp;lt;veth&amp;gt;</span></dt>
<dd>
<p>
ネットワークインターフェースタイプ。</p>
</dd>
</dl></div>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pct_startup_and_shutdown">11.4.6. コンテナの自動起動とシャットダウン
<a class="headerlink" href="#pct_startup_and_shutdown" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ホストシステムの起動時にコンテナを自動起動するには、
ウェブインターフェースのコン<em>テナオプションパネル</em>で
「<em>起動時に開始</em>」オプションを選択するか、
以下のコマンドを実行します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct set CTID -onboot 1</pre>
</div></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-qemu-edit-start-order.png">
<img src="images/screenshot/gui-qemu-edit-start-order.png" alt="screenshot/gui-qemu-edit-start-order.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<div class="title">起動およびシャットダウン順序</div><p>コンテナの起動順序を微調整したい場合は、以下のパラメータを使用できます:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>起動/停止順序</strong>: 起動順序の優先度を定義します。例えば、CTを最初に起動させたい場合は
  1に設定します（シャットダウン時は逆の起動順序を使用するため、起動順序1のコンテナは
  最後にシャットダウンされます）</p>
</li>
<li>
<p>
<strong>起動遅延</strong>: このコンテナ起動と後続コンテナ起動の間隔を定義します。
  例えば、他のコンテナ起動前に240秒待機したい場合は240に設定します。</p>
</li>
<li>
<p>
<strong>シャットダウンタイムアウト</strong>: Proxmox VEがシャットダウンコマンド発行後、
  コンテナがオフラインになるまで待機する秒数を定義します。
  デフォルト値は60秒です。つまりProxmox VEはシャットダウン要求を発行し、
  マシンがオフラインになるまで60秒待機します。60秒経過後もマシンがオンラインの場合、
  シャットダウン操作の失敗を通知します。</p>
</li>
</ul></div>
<div class="paragraph">
<p>開始/終了順序パラメータが設定されていないコンテナは、
パラメータが設定されたコンテナの起動後に常に起動します。
なお、このパラメータはホスト上でローカルに実行されているマシン間でのみ有効であり、
クラスタ全体には適用されません。</p></div>
<div class="paragraph">
<p>ホスト起動と最初のコンテナ起動の間に遅延が必要な場合は、
「<a href="#first_guest_boot_delay">Proxmox VE ノード管理</a>」セクションを参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="_hookscripts_2">11.4.7. フックスクリプト
<a class="headerlink" href="#_hookscripts_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>configプロパティ<span class="monospaced">hookscript</span>を使用してCTにフックスクリプトを追加できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct set 100 -hookscript local:snippets/hookscript.pl</pre>
</div></div>
<div class="paragraph">
<p>ゲストのライフサイクルの様々な段階で呼び出されます。
例とドキュメントについては、
<span class="monospaced">/usr/share/pve-docs/examples/guest-example-hookscript.pl</span>
にあるサンプルスクリプトを参照してください。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_security_considerations">
<span>11.5. セキュリティ上の考慮事項</span>
<a class="headerlink" href="#_security_considerations" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>コンテナはホストシステムのカーネルを使用します。これにより悪意のあるユーザーに対する攻撃対象領域が露出します。一般的に、完全な仮想マシンはより優れた分離を提供します。コンテナを未知または信頼できないユーザーに提供する場合には、この点を考慮すべきです。</p></div>
<div class="paragraph">
<p>攻撃対象領域を縮小するため、LXCはAppArmor、CGroups、カーネルネームスペースなどの
多数のセキュリティ機能を採用しています。</p></div>
<div class="sect3">
<h4 id="_apparmor">11.5.1. AppArmor
<a class="headerlink" href="#_apparmor" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>AppArmorプロファイルは、潜在的に危険な操作へのアクセスを制限するために使用されます。
<span class="monospaced">マウント</span>などの一部のシステムコールは実行が禁止されます。</p></div>
<div class="paragraph">
<p>AppArmorの動作をトレースするには以下を使用します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># dmesg | grep apparmor</pre>
</div></div>
<div class="paragraph">
<p>推奨はされませんが、コンテナ単位でAppArmorを無効化できます。ただし
これによりセキュリティリスクが生じます。システム設定の不備やLXC/Linuxカーネルの脆弱性が存在する場合、
コンテナ内で実行された特定のシステムコールが権限昇格を引き起こす可能性があります。</p></div>
<div class="paragraph">
<p>コンテナのAppArmorを無効化するには、<span class="monospaced">/etc/pve/lxc/CTID.conf</span>にあるコンテナ設定ファイルに以下の行を追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>lxc.apparmor.profile = unconfined</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">本番環境での使用は推奨されません。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pct_cgroup">11.5.2. コントロールグループ (<em>cgroup</em>)
<a class="headerlink" href="#pct_cgroup" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><em>cgroupは</em>、プロセスを階層的に整理しシステムリソースを分配するために使用されるカーネル機構です。</p></div>
<div class="paragraph">
<p><em>cgroupsで</em>制御される主なリソースは、CPU時間、メモリとスワップの制限、デバイスノードへのアクセスです。<em>cgroupsは</em>スナップショット取得前のコンテナ「凍結」にも使用されます。</p></div>
<div class="paragraph">
<p>現在利用可能な<em>cgroupには</em>2つのバージョン<a href="https://www.kernel.org/doc/html/v5.11/admin-guide/cgroup-v1/index.html">があります</a>：
レガシー
および
<a href="https://www.kernel.org/doc/html/v5.11/admin-guide/cgroup-v2.html"><em>cgroupv2</em></a>。</p></div>
<div class="paragraph">
<p>Proxmox VE 7.0以降、デフォルトは純粋な<em>cgroupv2</em>環境です。以前は「ハイブリッド」設定が採用されており、リソース制御は主に<em>cgroupv1</em>で行われ、<em>cgroup_no_v1</em>カーネルコマンドラインパラメータを介して一部のサブシステムを引き継ぐ追加の<em>cgroupv2</em>コントローラが使用されていました（詳細は<a href="https://www.kernel.org/doc/html/latest/admin-guide/kernel-parameters.html">カーネルパラメータのドキュメント</a>を参照）。</p></div>
<div class="sect4">
<h5 id="pct_cgroup_compat">CGroupバージョンの互換性
<a class="headerlink" href="#pct_cgroup_compat" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Proxmox VEにおける純粋な<em>cgroupv2と</em>従来のハイブリッド環境の主な違いは、
<em>cgroupv2では</em>メモリとスワップが独立して制御される点です。コンテナのメモリとスワップ設定は
これらの値に直接対応できますが、従来はメモリ制限とメモリ＋スワップ<strong>の合計</strong>制限のみが設定可能でした。</p></div>
<div class="paragraph">
<p>もう一つの重要な違いは、<em>デバイス</em>コントローラの設定方法が
完全に異なることです。このため、ファイルシステムクォータは現在
純粋な<em>cgroupv2</em>環境ではサポートされていません。</p></div>
<div class="paragraph">
<p>純粋な<em>cgroupv2環境で</em>動作させるには、コンテナOSによる<em>cgroupv2</em>サポートが必要です。<em>systemd</em>バージョン231以降を実行するコンテナ<em>はcgroupv2をサポートしています</em> <span class="footnote">（<br> ）。これはProxmox VEが提供する最新メジャーバージョンのコンテナテンプレート全てを含みます（<br> ）。</span>また、<em>systemdを初期</em>化システムとして使用しないコンテナ<span class="footnote">（<br> ）</span>も同様です<span class="footnote">（例：Alpine Linux）（<br> ）</span>。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="paragraph">
<p>CentOS 7 および Ubuntu 16.10 は主要な Linux ディストリビューションのリリースですが、
<em>cgroupv2</em>環境で実行するには<em>systemd</em>のバージョンが古すぎます。以下のいずれかの方法があります:</p></div>
<div class="ulist"><ul>
<li>
<p>
ディストリビューション全体を新しいリリースにアップグレードしてください。上記の例では、
Ubuntu 18.04 または 20.04、CentOS 8（または AlmaLinux や Rocky Linux などの RHEL/CentOS 派生ディストリビューション）が該当します。これにより最新のバグ修正やセキュリティ修正、多くの場合新機能も得られ、EOL 日付を将来に延期できます。</p>
</li>
<li>
<p>
コンテナの systemd バージョンをアップグレードする。ディストリビューションがバックポートリポジトリを提供している場合、これは簡単で迅速な暫定措置となり得る。</p>
</li>
<li>
<p>
コンテナまたはそのサービスを仮想マシンに移行する。仮想マシンはホストとの相互作用が大幅に少ないため、
数十年前から存在するOSバージョンでも問題なくインストール可能です。</p>
</li>
<li>
<p>
<em>従来のcgroupコントローラー</em>に戻す。有効な解決策ではあるが恒久的なものではない点に注意。Proxmox VE 9.0以降、従来のコントローラーはサポートされなくなる。</p>
</li>
</ul></div>
</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="pct_cgroup_change_version">CGroupバージョンの変更
<a class="headerlink" href="#pct_cgroup_change_version" title="Permalink to this heading"></a></h5>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">ファイルシステムクォータが不要で、全てのコンテナが<em>cgroupv2</em>をサポートしている場合、
新しいデフォルト設定を推奨します。</td>
</tr></table>
</div>
<div class="paragraph">
<p>以前のバージョンに戻すには、以下のカーネルコマンドラインパラメータを使用できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>systemd.unified_cgroup_hierarchy=0</pre>
</div></div>
<div class="paragraph">
<p>パラメータの追加位置については、カーネル起動コマンドライン編集の<a href="#sysboot_edit_kernel_cmdline">該当セクション</a>を参照してください。</p></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_guest_operating_system_configuration">
<span>11.6. ゲストオペレーティングシステムの設定</span>
<a class="headerlink" href="#_guest_operating_system_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEはコンテナ内のLinuxディストリビューションを検出し、
いくつかのファイルを変更します。コンテナ起動時に実行される主な処理は以下の通りです：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
set /etc/hostname</dt>
<dd>
<p>
コンテナ名を設定するには</p>
</dd>
<dt class="hdlist1">
/etc/hosts を修正</dt>
<dd>
<p>
ローカルホスト名の検索を許可する</p>
</dd>
<dt class="hdlist1">
ネットワーク設定</dt>
<dd>
<p>
コンテナに完全なネットワーク設定を渡す</p>
</dd>
<dt class="hdlist1">
DNS設定</dt>
<dd>
<p>
DNSサーバーに関する情報を渡す</p>
</dd>
<dt class="hdlist1">
initシステムの適応</dt>
<dd>
<p>
例: 生成されるgettyプロセスの数を固定する</p>
</dd>
<dt class="hdlist1">
rootパスワードの設定</dt>
<dd>
<p>
新しいコンテナ作成時に</p>
</dd>
<dt class="hdlist1">
ssh_host_keysを書き換える</dt>
<dd>
<p>
各コンテナが一意のキーを持つように</p>
</dd>
<dt class="hdlist1">
crontabをランダム化</dt>
<dd>
<p>
これにより、すべてのコンテナでcronが同時に起動しない</p>
</dd>
</dl></div>
<div class="paragraph">
<p>Proxmox VE による変更はコメントマーカーで囲まれます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># --- PVE 開始 ---
&amp;lt;data&amp;gt;
# --- PVE 終了 ---</pre>
</div></div>
<div class="paragraph">
<p>これらのマーカーはファイル内の適切な位置に挿入されます。該当するセクションが既に存在する場合、その場で更新され移動はされません。</p></div>
<div class="paragraph">
<p>ファイルへの変更は、そのファイル用の<span class="monospaced">.pve-ignore.</span>ファイルを追加することで防止できます。
例えば、<span class="monospaced">/etc/.pve-ignore.hosts</span>ファイルが存在する場合、<span class="monospaced">/etc/hosts</span>ファイルは変更されません。
これは以下のように作成できる単純な空ファイルです:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/.pve-ignore.hosts を作成</pre>
</div></div>
<div class="paragraph">
<p>変更の大半はOS依存であるため、ディストリビューションやバージョンによって異なります。
<span class="monospaced">ostype</span> <span class="monospaced">を手動でunmanagedに設定することで</span>、変更を完全に無効化できます。</p></div>
<div class="paragraph">
<p>OSタイプの検出は、コンテナ内の特定のファイルを検査することで行われます。
Proxmox VEはまず<span class="monospaced">/etc/os-releaseファイル</span>を確認します<span class="footnote"><br>[/etc/os-releaseは、ディストリビューションごとの多数のリリースファイルに取って代わります
<a href="https://manpages.debian.org/stable/systemd/os-release.5.en.html">https://manpages.debian.org/stable/systemd/os-release.5.en.html</a>]<br></span> 。
このファイルが存在しない場合、または明確に識別可能なディストリビューション識別子を含まない場合、以下のディストリビューション固有のリリースファイルがチェックされます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Ubuntu</dt>
<dd>
<p>
/etc/lsb-release を検査 (<span class="monospaced">DISTRIB_ID=Ubuntu</span>)</p>
</dd>
<dt class="hdlist1">
Debian</dt>
<dd>
<p>
/etc/debian_version をテスト</p>
</dd>
<dt class="hdlist1">
Fedora</dt>
<dd>
<p>
/etc/fedora-release をテスト</p>
</dd>
<dt class="hdlist1">
RedHat または CentOS</dt>
<dd>
<p>
/etc/redhat-release をテスト</p>
</dd>
<dt class="hdlist1">
ArchLinux</dt>
<dd>
<p>
test /etc/arch-release</p>
</dd>
<dt class="hdlist1">
Alpine</dt>
<dd>
<p>
test /etc/alpine-release</p>
</dd>
<dt class="hdlist1">
Gentoo</dt>
<dd>
<p>
test /etc/gentoo-release</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">設定された<span class="monospaced">ostype</span>が自動検出タイプと異なる場合、コンテナ起動は失敗します。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="pct_container_storage">
<span>11.7. コンテナストレージ</span>
<a class="headerlink" href="#pct_container_storage" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE LXCコンテナのストレージモデルは、従来のコンテナストレージモデルよりも柔軟です。
コンテナは複数のマウントポイントを持つことができます。これにより、
各アプリケーションに最適なストレージを使用することが可能になります。</p></div>
<div class="paragraph">
<p>例えば、コンテナのルートファイルシステムを低速で安価なストレージに配置しつつ、
データベースを別のマウントポイント経由で高速かつ分散ストレージ上に配置できます。
詳細は<a href="#pct_mount_points">「マウントポイント」</a>セクションを参照してください。</p></div>
<div class="paragraph">
<p>Proxmox VEストレージライブラリがサポートするあらゆるストレージタイプが利用可能です。
つまり、コンテナはローカルストレージ（例：<span class="monospaced">LVM</span>、<span class="monospaced">ZFS</span>、ディレクトリ）、
共有外部ストレージ（例：<span class="monospaced">iSCSI</span>、<span class="monospaced">NFS</span>）、さらにはCephのような分散ストレージシステム上に
保存できます。基盤となるストレージがサポートする場合、スナップショットやクローンといった
高度なストレージ機能も利用可能です。<span class="monospaced">vzdump</span>バックアップツールはスナップショットを利用して
一貫性のあるコンテナバックアップを提供します。</p></div>
<div class="paragraph">
<p>さらに、ローカルデバイスやローカル<em>ディレクトリはバインドマウントで直接</em>マウント可能です。これにより、実質的にオーバーヘッドゼロでコンテナ内からローカルリソースにアクセスできます。バインドマウントはコンテナ間でデータを共有する簡便な方法として利用できます。</p></div>
<div class="sect3">
<h4 id="_fuse_mounts">11.7.1. FUSE マウント
<a class="headerlink" href="#_fuse_mounts" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">Linuxカーネルのfreezerサブシステムに既存の問題があるため、
コンテナ内でのFUSEマウントの使用は強く推奨されません。
コンテナはサスペンドまたはスナップショットモードのバックアップのために凍結される必要があるためです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>FUSEマウントを他のマウント機構やストレージ技術で代替できない場合、
Proxmoxホスト上にFUSEマウントを確立し、バインドマウントポイントを使用して
コンテナ内からアクセス可能にすることが可能です。</p></div>
</div>
<div class="sect3">
<h4 id="_using_quotas_inside_containers">11.7.2. コンテナ内でのクォータの使用
<a class="headerlink" href="#_using_quotas_inside_containers" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>クォータにより、コンテナ内で各ユーザーが使用できるディスク容量の制限を設定できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">これには現在、レガ<em>シーcgroups</em>の使用が必要です。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">これは ext4 イメージベースのストレージタイプでのみ機能し、
現在は特権コンテナでのみ動作します。</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">クォータオプションを</span>有効にすると、マウントポイントに対して以下のマウントオプションが使用されます：
<span class="monospaced">usrjquota=aquota.user,grpjquota=aquota.group,jqfmt=vfsv0</span></p></div>
<div class="paragraph">
<p>これにより、他のシステムと同様にクォータを使用できます。
以下のコマンドを実行して<span class="monospaced">/aquota.user</span>および<span class="monospaced">/aquota.group</span>ファイルを初期化できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># quotacheck -cmug /
# quotaon /</pre>
</div></div>
<div class="paragraph">
<p>その後、<span class="monospaced">edquotaコマンド</span>でクォータを編集します。詳細はコンテナ内で動作するディストリビューションのドキュメントを参照してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">上記のコマンドは、マウントポイントごとに実行する必要があります。
その際、<span class="monospaced">/</span> ではなくマウントポイントのパスを指定してください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_using_acls_inside_containers">11.7.3. コンテナ内でのACLの使用
<a class="headerlink" href="#_using_acls_inside_containers" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>標準のPosix<strong>アクセス</strong> <strong>制御</strong> <strong>リスト</strong>(ACL)もコンテナ内で利用可能です。ACLを使用すると、従来のユーザー/グループ/その他モデルよりも詳細なファイル所有権を設定できます。</p></div>
</div>
<div class="sect3">
<h4 id="_backup_of_container_mount_points">11.7.4. コンテナマウントポイントのバックアップ
<a class="headerlink" href="#_backup_of_container_mount_points" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックアップ対象のマウントポイントを追加するには、コンテナ設定で該当ポイントの<span class="monospaced">バックアップオプションを</span>有効化します。既存のマウント<span class="monospaced">ポイントmp0の場合</span></p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>mp0: guests:subvol-100-disk-1,mp=/root/files,size=8G</pre>
</div></div>
<div class="paragraph">
<p>には<span class="monospaced">backup=1</span>を追加して有効化します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>mp0: guests:subvol-100-disk-1,mp=/root/files,size=8G,backup=1</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">GUIで新規マウントポイントを作成する際、このオプションはデフォルトで有効です。</td>
</tr></table>
</div>
<div class="paragraph">
<p>マウントポイントのバックアップを無効化するには、上記と同様に<span class="monospaced">backup=0</span>を追加するか、GUI の<strong>「バックアップ」</strong>チェックボックスをオフにします。</p></div>
</div>
<div class="sect3">
<h4 id="_replication_of_containers_mount_points">11.7.5. コンテナマウントポイントの複製
<a class="headerlink" href="#_replication_of_containers_mount_points" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトでは、ルートディスクが複製される際に追加のマウントポイントも複製されます。Proxmox VEのストレージ複製メカニズムで特定のマウントポイントをスキップしたい場合は、そのマウントポイントに対して「<strong>複製をスキップ」</strong>オプションを設定できます。
Proxmox VE 5.0以降、レ<span class="monospaced">プリケーションにはzfspoolタイプの</span>ストレージが必要です。
コンテナにレプリケーションが設定されている状態で、異なるタイプのストレージにマウントポイントを追加する場合、
そのマウントポイントで<strong>「レプリケーションをスキップ」を</strong>有効にする必要があります。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_backup_and_restore">
<span>11.8. バックアップと復元</span>
<a class="headerlink" href="#_backup_and_restore" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_container_backup">11.8.1. コンテナのバックアップ
<a class="headerlink" href="#_container_backup" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>コンテナのバックアップには<span class="monospaced">vzdump</span>ツールを使用できます。詳細は<span class="monospaced">vzdump</span>マニュアルページを参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="_restoring_container_backups">11.8.2. コンテナバックアップの復元
<a class="headerlink" href="#_restoring_container_backups" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">vzdumpで作成した</span>コンテナバックアップの復元には<span class="monospaced">pct restore</span>コマンドを使用できます。デフォルトでは、<span class="monospaced">pct restoreは</span>バックアップされたコンテナ設定を可能な限り復元しようとします。コマンドラインでコンテナオプションを手動設定することで、バックアップされた設定を上書きすることも可能です（<span class="monospaced">詳細はpctマニュアルページ</span>を参照）。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">vzdump アーカイブ内のバックアップ設定を確認するには、
<span class="monospaced">pvesm extractconfig</span>を使用できます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>復元モードには基本的に2種類あり、マウントポイントの処理方法のみが異なります：</p></div>
<div class="sect4">
<h5 id="_8220_simple_8221_restore_mode">「簡易」復元モード
<a class="headerlink" href="#_8220_simple_8221_restore_mode" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">rootfs</span>パラメータも任意の<span class="monospaced">mpX</span>パラメータも明示的に設定されていない場合、
バックアップされた設定ファイルからのマウントポイント設定は、
以下の手順で復元されます:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
バックアップからマウントポイントとそのオプションを抽出</p>
</li>
<li>
<p>
<span class="monospaced">ストレージパラメータで</span>指定されたストレージ（デフォルト:<span class="monospaced">local</span>）上に、
<span class="monospaced">ストレージ</span>バックアップ付きマウントポイント用のボリュームを作成します。</p>
</li>
<li>
<p>
バックアップアーカイブからファイルを抽出</p>
</li>
<li>
<p>
復元された構成にバインドおよびデバイスマウントポイントを追加（rootユーザー限定）</p>
</li>
</ol></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">バインドマウントポイントとデバイスマウントポイントはバックアップ対象外であるため、最終ステップではファイルは復元されず設定オプションのみが復元されます。これは、これらのマウントポイントが別のメカニズム（例：多数のコンテナにバインドマウントされるNFSスペース）でバックアップされているか、そもそもバックアップ対象外であると想定されているためです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>この簡易モードは、Webインターフェースのコンテナ復元操作でも使用されます。</p></div>
</div>
<div class="sect4">
<h5 id="_8220_advanced_8221_restore_mode">「高度な」復元モード<a class="headerlink" href="#_8220_advanced_8221_restore_mode" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">rootfsパラメータ</span>（および<span class="monospaced">任意のmpXパラメータ</span>の組み合わせ）を設定すると、<span class="monospaced">pct restoreコマンド</span>は自動的に高度モードに切り替わります。この高度モードでは、バックアップアーカイブに含まれる<span class="monospaced">rootfs</span> <span class="monospaced">およびmpX設定</span> <span class="monospaced">オプションは</span>完全に無視され、代わりにパラメータとして明示的に指定されたオプションのみが使用されます。</p></div>
<div class="paragraph">
<p>このモードでは、復元時のマウントポイント設定を柔軟に構成できます。
例:</p></div>
<div class="ulist"><ul>
<li>
<p>
各マウントポイントごとに
ターゲットストレージ、ボリュームサイズ、その他のオプションを設定</p>
</li>
<li>
<p>
新しいマウントポイント構成に基づき、バックアップ済みファイルを再配置</p>
</li>
<li>
<p>
デバイスおよび/またはバインドマウントポイントへの復元（rootユーザー限定）</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_containers_with_span_class_monospaced_pct_span">
<span>11.9.<span class="monospaced">pct</span>によるコンテナ管理</span>
<a class="headerlink" href="#_managing_containers_with_span_class_monospaced_pct_span" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>「Proxmox Container Toolkit」(<span class="monospaced">pct</span>) は、Proxmox VE コンテナを管理するためのコマンドラインツールです。コンテナの作成や削除、コンテナの実行制御（起動、停止、再起動、移行など）が可能です。コンテナの設定ファイル（例：ネットワーク設定やメモリ制限）のパラメータ設定にも使用できます。</p></div>
<div class="sect3">
<h4 id="_cli_usage_examples_2">11.9.1. CLI 使用例
<a class="headerlink" href="#_cli_usage_examples_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Debianテンプレートに基づくコンテナを作成（ウェブインターフェース経由で
テンプレートを既にダウンロードしている場合に限る）</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct create 100 /var/lib/vz/template/cache/debian-10.0-standard_10.0-1_amd64.tar.gz</pre>
</div></div>
<div class="paragraph">
<p>コンテナ 100 を起動</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct start 100</pre>
</div></div>
<div class="paragraph">
<p>getty経由でログインセッションを開始</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct console 100</pre>
</div></div>
<div class="paragraph">
<p>LXCネームスペースに入り、rootユーザーとしてシェルを実行</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct enter 100</pre>
</div></div>
<div class="paragraph">
<p>設定を表示</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct config 100</pre>
</div></div>
<div class="paragraph">
<p>実行中に、ホストブリッジ<span class="monospaced">vmbr0</span> にブリッジ接続された<span class="monospaced">eth0</span> というネットワークインターフェースを追加し、
アドレスとゲートウェイを設定</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct set 100 -net0 name=eth0,bridge=vmbr0,ip=192.168.15.147/24,gw=192.168.15.1</pre>
</div></div>
<div class="paragraph">
<p>コンテナのメモリを512MBに削減</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct set 100 -memory 512</pre>
</div></div>
<div class="paragraph">
<p>コンテナの破棄は常にアクセス制御リストからの削除とコンテナのファイアウォール設定の削除を伴います。
レプリケーションジョブ、バックアップジョブ、HAリソース設定からコンテナを追加で削除したい場合は
<em>--purgeを有効</em>にする必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct destroy 100 --purge</pre>
</div></div>
<div class="paragraph">
<p>マウントポイントボリュームを別のストレージに移動する</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct move-volume 100 mp0 other-storage</pre>
</div></div>
<div class="paragraph">
<p>ボリュームを別のCTに再割り当てします。これにより、<span class="monospaced">ボリュームmp0が</span>
ソースCTから削除され、ターゲット<span class="monospaced">CTにmp1として</span>アタッチされます。バックグラウンドで
ボリューム名が新しい所有者に一致するようリネームされます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>#  pct move-volume 100 mp0 --target-vmid 200 --target-volume mp1</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_obtaining_debugging_logs">11.9.2. デバッグログの取得
<a class="headerlink" href="#_obtaining_debugging_logs" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">pct start</span>で特定のコンテナを起動できない場合、
<span class="monospaced">--debug</span>フラグを指定してデバッグ出力を収集すると有用です（<span class="monospaced">CTID</span>をコンテナの CTID に置き換えてください）：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct start CTID --debug</pre>
</div></div>
<div class="paragraph">
<p>あるいは、以下の<span class="monospaced">lxc-start</span>コマンドを使用することもできます。これにより、
<span class="monospaced">-o</span>出力オプションで指定されたファイルにデバッグログが保存されます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># lxc-start -n CTID -F -l DEBUG -o /tmp/lxc-CTID.log</pre>
</div></div>
<div class="paragraph">
<p>このコマンドはコンテナをフォアグラウンドモードで起動しようとします。コンテナを停止するには、別のターミナルで<span class="monospaced">pct shutdown CTID</span>または<span class="monospaced">pct stop CTID</span>を実行してください。</p></div>
<div class="paragraph">
<p>収集されたデバッグログは<span class="monospaced">/tmp/lxc-CTID.log</span> に書き込まれます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">pct start</span> による前回の起動試行以降にコンテナの設定を変更した場合は、
<span class="monospaced">lxc-start</span> が使用する設定も更新するために、少なくとも一度は
<span class="monospaced">pct start</span>を実行する必要があります。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pct_migration">
<span>11.10.</span>移行
<a class="headerlink" href="#pct_migration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>クラスタ環境では、コンテナを移行できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct migrate &amp;lt;ctid&amp;gt; &amp;lt;target&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>コンテナがオフライン状態であれば、この操作は実行可能です。ローカルボリュームやマウントポイントが定義されている場合、移行時には対象ホストに同じストレージが定義されていれば、その内容をネットワーク経由でコピーします。</p></div>
<div class="paragraph">
<p>技術的制約により、稼働中のコンテナはライブ移行できません。代わりに
再起動移行を実行できます。これはコンテナをシャットダウンし、移動後
ターゲットノードで再起動する方式です。コンテナは非常に軽量なため、
通常は数100ミリ秒程度のダウンタイムしか発生しません。</p></div>
<div class="paragraph">
<p>再起動マイグレーションは、Webインターフェースから、<span class="monospaced">またはpct migrateコマンドに</span><span class="monospaced">--restart</span>フラグを指定して実行できます。</p></div>
<div class="paragraph">
<p>再起動マイグレーションでは、コンテナをシャットダウンし、指定されたタイムアウト時間（デフォルトは180秒）後に強制終了します。その後、オフラインマイグレーションと同様にコンテナを移行し、完了後にターゲットノード上でコンテナを起動します。</p></div>
</div>
<div class="sect2">
<h3 id="pct_configuration">
<span>11.11. 設定</span>
<a class="headerlink" href="#pct_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">/etc/pve/lxc/&amp;lt;CTID&amp;gt;.confファイル</span>にはコンテナ設定が保存されます。<span class="monospaced">ここで&amp;lt;CTID&amp;gt;</span>は対象コンテナの数値IDです。<span class="monospaced">/etc/pve/</span>内に保存される他のファイルと同様に、これらは自動的にクラスタ内の全ノードに複製されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">CTIDs &amp;lt; 100 は内部目的のために予約されており、CTID はクラスタ全体で一意である必要があります。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">コンテナ設定例</div>
<div class="content monospaced">
<pre>ostype: debian
arch: amd64
hostname: www
memory: 512
swap: 512
net0: bridge=vmbr0,hwaddr=66:64:66:64:64:36,ip=dhcp,name=eth0,type=veth
rootfs: local:107/vm-107-disk-1.raw,size=7G</pre>
</div></div>
<div class="paragraph">
<p>設定ファイルは単純なテキストファイルです。<span class="monospaced">viやnanoなどの</span>通常のテキストエディタで編集できます。
小規模な修正には有用ですが、変更を反映させるにはコンテナの再起動が必要となる点に留意してください。</p></div>
<div class="paragraph">
<p>そのため、通常は<span class="monospaced">pctコマンドを使用してこれらの</span>ファイルを生成・修正するか、GUIで全てを処理する方が望ましいです。
当ツールキットは、稼働中のコンテナへの変更を即座に適用できる高度な機能を備えています。この機能は「ホットプラグ」と呼ばれ、この場合コンテナの再起動は不要です。</p></div>
<div class="paragraph">
<p>変更がホットプラグできない場合、それは保留中の変更として登録されます（GUIでは赤色で表示）。
これらはコンテナの再起動後にのみ適用されます。</p></div>
<div class="sect3">
<h4 id="_file_format_2">11.11.1. ファイル形式
<a class="headerlink" href="#_file_format_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>コンテナ設定ファイルは、コロン区切りのキー/値形式を使用します。
各行は次の形式です:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># これはコメントです
OPTION: value</pre>
</div></div>
<div class="paragraph">
<p>これらのファイル内の空白行は無視され、<span class="monospaced">#</span>文字で始まる行は
コメントとして扱われ同様に無視されます。</p></div>
<div class="paragraph">
<p>LXCスタイルの低レベル設定を直接追加することも可能です。例:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>lxc.init_cmd: /sbin/my_own_init</pre>
</div></div>
<div class="paragraph">
<p>または</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>lxc.init_cmd = /sbin/my_own_init</pre>
</div></div>
<div class="paragraph">
<p>設定は LXC の低レベルツールに直接渡されます。</p></div>
</div>
<div class="sect3">
<h4 id="pct_snapshots">11.11.2. スナップショット
<a class="headerlink" href="#pct_snapshots" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>スナップショット作成時、<span class="monospaced">pct</span>は設定をスナップショット時点の状態で
同一設定ファイル内の独立したスナップショットセクションに保存します。
例えば「testsnapshot」というスナップショット作成後、設定ファイルは
以下のようになります:</p></div>
<div class="listingblock">
<div class="title">スナップショット付きコンテナ設定</div>
<div class="content monospaced">
<pre>memory: 512
swap: 512
parent: testsnaphot...


[testsnaphot]
memory: 512
swap: 512
snaptime: 1457170803
...</pre>
</div></div>
<div class="paragraph">
<p>スナップショットに関連するプロパティとして、<span class="monospaced">parent</span> <span class="monospaced">やsnaptimeなど</span>があります。
<span class="monospaced">parent</span>プロパティ<span class="monospaced">は</span>スナップショット間の親子関係を保存するために使用されます。
<span class="monospaced">snaptimeは</span>スナップショット作成のタイムスタンプ（Unixエポック）です。</p></div>
</div>
<div class="sect3">
<h4 id="pct_options">11.11.3. オプション
<a class="headerlink" href="#pct_options" title="Permalink to this heading"></a></h4>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">アーキテクチャ</span>:<span class="monospaced">&amp;lt;amd64 | arm64 | armhf | i386 | riscv32 | riscv64&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">amd64</span>)</dt>
<dd>
<p>
OS アーキテクチャタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cmode</span>:<span class="monospaced">&amp;lt;console | shell | tty&amp;gt;</span>(<em>default =</em> <span class="monospaced">tty</span>)</dt>
<dd>
<p>
コンソールモード。デフォルトでは、コンソールコマンドは利用可能なttyデバイスへの接続を試みます。cmode<em>をconsoleに設定すると</em>、代わりに/dev/consoleへの接続を試みます。cmodeを<em>shell</em>に設定すると、コンテナ内でシェルを起動します（ログインなし）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">コンソール</span>:<span class="monospaced">&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
コンソールデバイス（/dev/console）をコンテナにアタッチします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cores</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (1 - 8192)</span></dt>
<dd>
<p>
コンテナに割り当てるコア数。デフォルトでは利用可能な全コアを使用可能。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">cpulimit</span>:<span class="monospaced">&amp;lt;number&amp;gt; (0 - 8192)</span>(<em>default =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用率の上限。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンピュータに2つのCPUがある場合、合計<em>2CPU</em>時間が割り当てられます。値<em>0は</em>CPU制限なしを示します。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">cpuunits</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (0 - 500000)</span>(<em>デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
コンテナのCPUウェイト。引数はカーネルのフェアスケジューラで使用されます。数値が大きいほど、このコンテナが割り当てられるCPU時間が増加します。数値は他のすべての実行中のゲストのウェイトに対する相対値です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">debug</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
より詳細な出力を試みます。現時点では起動時のデバッグログレベルのみ有効化されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">description</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナの説明。WebインターフェースのCT概要に表示されます。設定ファイル内にコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">dev[n]</span>:<span class="monospaced">[[path=]&amp;lt;パス&amp;gt;] [,deny-write=&amp;lt;1|0&amp;gt;] [,gid=&amp;lt;整数&amp;gt;] [,mode=&amp;lt;8進アクセスモード&amp;gt;] [,uid=&amp;lt;整数&amp;gt;]</span></dt>
<dd>
<p>
コンテナに渡すデバイス</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">deny-write=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナがデバイスへの書き込みを拒否する</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">gid=&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
デバイスノードに割り当てるグループID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mode=&amp;lt;8進アクセスモード&amp;gt;</span></dt>
<dd>
<p>
デバイスノードに設定するアクセスモード</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">path=&amp;lt;パス&amp;gt;</span></dt>
<dd>
<p>
コンテナに渡すデバイスのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">uid=&amp;lt;整数&amp;gt; (0 - N)</span></dt>
<dd>
<p>
デバイスノードに割り当てるユーザーID</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">機能</span>:<span class="monospaced">[force_rw_sys=&amp;lt;1|0&amp;gt;] [,fuse=&amp;lt;1|0&amp;gt;][,keyctl=&amp;lt;1|0&amp;gt;] [,mknod=&amp;lt;1|0&amp;gt;] [,mount=&amp;lt;fstype;fstype;...&amp;gt;] [,nesting=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
コンテナが高度な機能にアクセスできるようにする。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">force_rw_sys=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
非特権コンテナ内で /sys を<span class="monospaced">mixed</span> ではなく<span class="monospaced">rw</span>でマウントする。これにより、新しい (v245 以上) systemd-network の使用下でネットワーク機能が破損する可能性がある。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">fuse=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナ内で<em>FUSE</em>ファイルシステムの使用を許可します。FUSEとfreezer cgroup間の相互作用によりI/Oデッドロックが発生する可能性があることに注意してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keyctl=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
非特権コンテナのみ: keyctl() システムコールの使用を許可します。これはコンテナ内で Docker を使用するために必要です。デフォルトでは、非特権コンテナはこのシステムコールが存在しないものと見なします。これは主に systemd-networkd 向けの回避策であり、権限不足によりカーネルが keyctl() 操作を拒否した場合、systemd-networkd はこれを致命的なエラーとして扱うためです。本質的には、systemd-networkd と docker のどちらを実行するかを選択できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mknod=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
特権のないコンテナが特定のデバイスノードを追加するために mknod() を使用することを許可します。これには seccomp トラップをユーザー空間でサポートするカーネル（5.3 以降）が必要です。これは実験的な機能です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mount=&amp;lt;fstype;fstype;...&amp;gt;</span></dt>
<dd>
<p>
特定のファイルシステムタイプのマウントを許可します。これはmountコマンドで使用されるファイルシステムタイプのリストであるべきです。コンテナのセキュリティに悪影響を及ぼす可能性があることに注意してください。ループデバイスへのアクセスがあれば、ファイルのマウントはdev cgroupのmknod権限を回避でき、NFSファイルシステムのマウントはホストのI/Oを完全にブロックして再起動を妨げるなど、様々な問題を引き起こす可能性があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nesting=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ネストを許可します。追加のIDマッピングを持つ非特権コンテナでの使用が最適です。これによりホストのprocfsおよびsysfsの内容がゲストに公開されることに注意してください。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">hookscript</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのライフサイクルにおける各種ステップで実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hostname</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのホスト名を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">lock</span>:<span class="monospaced">&amp;lt;backup | create | destroyed | disk | fstrim | migrate | mounted | rollback | snapshot | snapshot-delete&amp;gt;</span></dt>
<dd>
<p>
コンテナのロック/ロック解除。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">memory</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (16 - N)</span>(<em>default =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
コンテナのRAM容量（MB単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mp[n]</span>:<span class="monospaced">[volume=]&amp;lt;volume&amp;gt; ,mp=&amp;lt;Path&amp;gt; [,acl=&amp;lt;1|0&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,mountoptions=&amp;lt;opt[;opt...]&amp;gt;] [,quota=&amp;lt;1|0&amp;gt;][,replicate=&amp;lt;1|0&amp;gt;] [,ro=&amp;lt;1|0&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;DiskSize&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをコンテナのマウントポイントとして使用します。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">acl=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ACLサポートを明示的に有効化または無効化します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">backup=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
バックアップにマウントポイントを含めるかどうか（ボリュームマウントポイントのみ対象）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mountoptions=&amp;lt;opt[;opt...]&amp;gt;</span></dt>
<dd>
<p>
rootfs/mps用の追加マウントオプション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mp=&amp;lt;パス&amp;gt;</span></dt>
<dd>
<p>
コンテナ内部から見たマウントポイントへのパス。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">セキュリティ上の理由からシンボリックリンクを含めてはいけません。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">quota=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
コンテナ内でユーザークォータを有効化（zfsサブボリュームでは非対応）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replicate=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
このボリュームをストレージレプリカジョブに含めるか否か。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ro=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
読み取り専用マウントポイント</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">shared=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
この非ボリュームマウントポイントを全ノードで利用可能としてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションはマウントポイントを自動的に共有しません。既に共有されているものとみなします！</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=&amp;lt;ディスクサイズ&amp;gt;</span></dt>
<dd>
<p>
ボリュームサイズ（読み取り専用値）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ボリューム=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
コンテナ内にマウントするボリューム、デバイス、またはディレクトリ。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">nameserver</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのDNSサーバーIPアドレスを設定します。searchdomainもnameserverも設定しない場合、作成時にホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">net[n]</span>:<span class="monospaced">name=&amp;lt;string&amp;gt; [,bridge=&amp;lt;bridge&amp;gt;] [,firewall=&amp;lt;1|0&amp;gt;] [,gw=&amp;lt;GatewayIPv4&amp;gt;] [,gw6=&amp;lt;GatewayIPv6&amp;gt;][,hwaddr=&amp;lt;XX:XX:XX:XX:XX:XX&amp;gt;] [,ip=&amp;lt;(IPv4/CIDR|dhcp|manual)&amp;gt;] [,ip6=&amp;lt;(IPv6/CIDR|auto|dhcp|manual)&amp;gt;] [,link_down=&amp;lt;1|0&amp;gt;][,mtu=&amp;lt;整数&amp;gt;] [,rate=&amp;lt;Mbps&amp;gt;] [,tag=&amp;lt;整数&amp;gt;] [,trunks=&amp;lt;vlanid[;vlanid...]&amp;gt;] [,type=&amp;lt;veth&amp;gt;]</span></dt>
<dd>
<p>
コンテナのネットワークインターフェースを指定します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">bridge=&amp;lt;bridge&amp;gt;</span></dt>
<dd>
<p>
ネットワークデバイスを接続するブリッジ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">firewall=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
このインターフェースのファイアウォールルールを使用するかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">gw=&amp;lt;GatewayIPv4&amp;gt;</span></dt>
<dd>
<p>
IPv4トラフィックのデフォルトゲートウェイ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">gw6=&amp;lt;GatewayIPv6&amp;gt;</span></dt>
<dd>
<p>
IPv6トラフィックのデフォルトゲートウェイ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">hwaddr=&amp;lt;XX:XX:XX:XX:XX:XX&amp;gt;</span></dt>
<dd>
<p>
I/G（個別/グループ）ビットが設定されていない共通MACアドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip=&amp;lt;(IPv4/CIDR|dhcp|manual)&amp;gt;</span></dt>
<dd>
<p>
CIDR形式のIPv4アドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ip6=&amp;lt;(IPv6/CIDR|auto|dhcp|manual)&amp;gt;</span></dt>
<dd>
<p>
CIDR形式のIPv6アドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">link_down=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
このインターフェースを切断すべきかどうか（プラグを抜くような状態）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mtu=&amp;lt;integer&amp;gt; (64 - 65535)</span></dt>
<dd>
<p>
インターフェースの最大転送単位。(lxc.network.mtu)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">name=&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナ内部から見たネットワークデバイスの名前。(lxc.network.name)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rate=&amp;lt;mbps&amp;gt;</span></dt>
<dd>
<p>
インターフェースにレート制限を適用する</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">タグ=&amp;lt;整数&amp;gt; (1 - 4094)</span></dt>
<dd>
<p>
このインターフェースのVLANタグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">trunks=&amp;lt;vlanid[;vlanid...]&amp;gt;</span></dt>
<dd>
<p>
インターフェース経由で通過させるVLAN ID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">type=&amp;lt;veth&amp;gt;</span></dt>
<dd>
<p>
ネットワークインターフェースタイプ。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">onboot</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時にコンテナを起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ostype</span>:<span class="monospaced">&amp;lt;alpine | archlinux | centos | debian | devuan | fedora | gentoo | nixos | opensuse | ubuntu | unmanaged&amp;gt;</span></dt>
<dd>
<p>
OSタイプ。コンテナ内の設定を構成するために使用され、/usr/share/lxc/config/&amp;lt;ostype&amp;gt;.common.conf 内の lxc セットアップスクリプトに対応します。値<em>unmanaged</em>を使用すると、OS固有の設定をスキップできます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">protection</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナの保護フラグを設定します。これにより、コンテナまたはコンテナのディスクの削除/更新操作が防止されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rootfs</span>:<span class="monospaced">[volume=]&amp;lt;ボリューム&amp;gt; [,acl=&amp;lt;1|0&amp;gt;] [,mountoptions=&amp;lt;オプション[;オプション...]&amp;gt;] [,quota=&amp;lt;1|0&amp;gt;][,replicate=&amp;lt;1|0&amp;gt;] [,ro=&amp;lt;1|0&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;DiskSize&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをコンテナのルートとして使用します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">acl=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ACLサポートを明示的に有効化または無効化します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mountoptions=&amp;lt;opt[;opt...]&amp;gt;</span></dt>
<dd>
<p>
rootfs/mps用の追加マウントオプション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">quota=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
コンテナ内でユーザークォータを有効化（zfsサブボリュームでは非対応）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replicate=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
このボリュームをストレージレプリカジョブに含めます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ro=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
読み取り専用マウントポイント</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">shared=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
この非ボリュームマウントポイントを全ノードで利用可能としてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">このオプションはマウントポイントを自動的に共有しません。既に共有されているものとみなします。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">size=&amp;lt;DiskSize&amp;gt;</span></dt>
<dd>
<p>
ボリュームサイズ（読み取り専用値）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">volume=&amp;lt;volume&amp;gt;</span></dt>
<dd>
<p>
コンテナにマウントするボリューム、デバイス、またはディレクトリ。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">searchdomain</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのDNS検索ドメインを設定します。searchdomainもnameserverも設定しない場合、作成時にはホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">startup</span>: `[[order=]\d+] [,up=\d+] [,down=\d+] ` </dt>
<dd>
<p>
起動およびシャットダウン時の動作を定義します。Orderは起動順序を定義する非負の数値です。シャットダウン時は逆順で実行されます。さらに、<em>アップ</em>/<em>ダウン</em>遅延（秒単位）を設定可能で、次のVM起動/停止までの待機時間を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">swap</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>default =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
コンテナのSWAP容量（MB単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">tags</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのタグ。これはメタ情報のみです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">template</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">タイムゾーン</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナで使用するタイムゾーン。設定しない場合は何も行われません。ホストのタイムゾーンに合わせるために<em>「host」</em>に設定するか、/usr/share/zoneinfo/zone.tab からの任意のタイムゾーンオプションを設定できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">tty</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (0 - 6)</span>(<em>デフォルト =</em> <span class="monospaced">2</span>)</dt>
<dd>
<p>
コンテナが使用可能なttyの数を指定します</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">unprivileged</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナを非特権ユーザーとして実行します（手動で変更しないでください）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">unused[n]</span>:<span class="monospaced">[volume=]&amp;lt;volume&amp;gt;</span></dt>
<dd>
<p>
未使用ボリュームへの参照。内部で使用されるため、手動で変更しないでください。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ボリューム=&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
現在使用されていないボリューム。</p>
</dd>
</dl></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_locks_2">
<span>11.12. ロック</span>
<a class="headerlink" href="#_locks_2" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>コンテナ移行、スナップショット、バックアップ（<span class="monospaced">vzdump</span>）は、影響を受けるコンテナへの互換性のない同時操作を防ぐためにロックを設定します。場合によっては、このようなロックを手動で解除する必要がある場合があります（例：停電後）。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pct unlock &amp;lt;CTID&amp;gt;</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ロックを設定したアクションが確実に
実行されていない場合にのみこれを行ってください。</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_pvesdn">
12. ソフトウェア定義ネットワーク
<a class="headerlink" href="#chapter_pvesdn" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VE<strong>のソフトウェア定義ネットワーク</strong>(SDN) 機能により、
仮想ゾーンおよびネットワーク (VNets) の作成が可能になります。この機能により、
高度なネットワーク設定やマルチテナント環境の構築が簡素化されます。</p></div>
<div class="sect2">
<h3 id="pvesdn_overview">
<span>12.1.</span>概要
<a class="headerlink" href="#pvesdn_overview" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE SDNは、柔軟なソフトウェア制御による構成を用いて、仮想ゲストネットワークの分離と
きめ細かい制御を可能にします。</p></div>
<div class="paragraph">
<p>分離は<strong>ゾーン</strong>、仮想ネットワーク（<strong>VNet</strong>）、<strong>サブネット</strong>を通じて管理されます。
ゾーンはそれ自体が仮想的に分離されたネットワーク領域です。
VNetはゾーンに属する仮想ネットワークです。サブネットはVNet内のIP範囲です。</p></div>
<div class="paragraph">
<p>ゾーンのタイプに応じて、ネットワークの挙動が異なり、
特定の機能、利点、制限が提供されます。</p></div>
<div class="paragraph">
<p>SDNのユースケースは、個々のノード上の分離されたプライベートネットワークから、
異なる場所にある複数のPVEクラスターにまたがる複雑なオーバーレイネットワークまで多岐にわたります。</p></div>
<div class="paragraph">
<p>クラスタ全体のデータセンターSDN管理インターフェースでVNetを設定すると、
各ノード上に共通のLinuxブリッジとして利用可能となり、
VMやコンテナに割り当てられます。</p></div>
</div>
<div class="sect2">
<h3 id="pvesdn_support_status">
<span>12.2. サポート状況</span>
<a class="headerlink" href="#pvesdn_support_status" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_history">12.2.1. 歴史
<a class="headerlink" href="#_history" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE SDNスタックは2019年より実験的機能として提供され、
多くの開発者やユーザーによる継続的な改善とテストが行われてきました。
Proxmox VE 6.2でのWebインターフェース統合により、
より広範な統合に向けた重要なマイルストーンが達成されました。
Proxmox VE 7リリースサイクルでは、数多くの改善と機能が追加されました。
ユーザーフィードバックに基づき、基本設計とその実装が非常に堅牢かつ安定していることが明らかになりました。その結果、「実験的」というラベルはSDNスタックの現状を適切に反映していませんでした。
Proxmox VE 8では、ネットワークとインターフェースの管理をProxmox VEアクセス制御スタックの中核コンポーネントに昇格させることで、SDN機能の完全統合に向けた基盤整備を行う決定がなされました。
Proxmox VE 8.1では二つの主要なマイルストーンが達成されました：第一に、IPアドレス管理（IPAM）機能へのDHCP統合が追加され、第二に、SDN統合がデフォルトでインストールされるようになりました。</p></div>
</div>
<div class="sect3">
<h4 id="_current_status">12.2.2. 現状
<a class="headerlink" href="#_current_status" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>SDN導入の各レイヤーにおける現在のサポート状況は以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
コアSDN（VNet管理およびProxmox VEスタックとの統合を含む）は完全にサポートされています。</p>
</li>
<li>
<p>
仮想ゲスト向けDHCP管理を含むIPAMはテクニカルプレビュー段階です。</p>
</li>
<li>
<p>
FRRoutingを介した複雑なルーティングとコントローラー統合は技術プレビュー段階です。</p>
</li>
</ul></div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_installation">
<span>12.3.</span>インストール
<a class="headerlink" href="#pvesdn_installation" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_sdn_core">12.3.1. SDN コア
<a class="headerlink" href="#_sdn_core" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE 8.1以降、コアとなるソフトウェア定義ネットワーク（SDN）パッケージはデフォルトでインストールされます。</p></div>
<div class="paragraph">
<p>旧バージョンからのアップグレード時には、各ノードで<span class="monospaced">libpve-network-perl</span>パッケージをインストールする必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt update
apt install libpve-network-perl</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VE バージョン 7.0 以降では、<span class="monospaced">ifupdown2</span>パッケージがデフォルトでインストールされています。
古いバージョンでシステムをインストールした場合、<span class="monospaced">ifupdown2</span>パッケージを明示的にインストールする必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>インストール後、SDN設定が組み込まれ有効化されるよう、全ノードの
<span class="monospaced">/etc/network/interfaces設定ファイル</span>末尾に以下の行が存在することを確認してください：
`# SDN設定の有効化`</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>source /etc/network/interfaces.d/*</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pvesdn_install_dhcp_ipam">12.3.2. DHCP IPAM
<a class="headerlink" href="#pvesdn_install_dhcp_ipam" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>組み込みの<em>PVE</em>IPアドレス管理スタックへのDHCP統合は、現在<span class="monospaced">dnsmasq</span>を使用してDHCPリースを割り当てています。これは現在オプション機能です。</p></div>
<div class="paragraph">
<p>この機能を利用するには、各ノードに<span class="monospaced">dnsmasq</span>パッケージをインストールする必要があります:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt update
apt install dnsmasq
# デフォルトインスタンスを無効化
systemctl disable --now dnsmasq</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pvesdn_install_frrouting">12.3.3. FRルーティング
<a class="headerlink" href="#pvesdn_install_frrouting" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE SDNスタックは高度な設定<a href="https://frrouting.org/">にFRRouting</a>プロジェクトを利用します。
これは現在オプション機能です。</p></div>
<div class="paragraph">
<p>SDNルーティング統合を利用するには、全ノードにfrr<span class="monospaced">-</span>pythontoolsパッケージをインストールする必要があります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt update
apt install frr-pythontools</pre>
</div></div>
<div class="paragraph">
<p>その後、全ノードでfrrサービスを有効化します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>systemctl enable frr.service</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_main_configuration">
<span>12.4. 構成の概要</span>
<a class="headerlink" href="#pvesdn_main_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>設定はデータセンターレベルでWeb UI上で行われ、以下のセクションに分かれています：</p></div>
<div class="ulist"><ul>
<li>
<p>
SDN:: ここでは現在のアクティブなSDN状態の概要を確認でき、
  保留中の変更をクラスター全体に適用できます。</p>
</li>
<li>
<p>
<a href="#pvesdn_config_zone">ゾーン</a>: 仮想的に分離されたネットワークゾーンの作成と管理</p>
</li>
<li>
<p>
<a href="#pvesdn_config_vnet">VNets</a>：仮想ネットワークブリッジを作成し
  サブネットを管理</p>
</li>
</ul></div>
<div class="paragraph">
<p>オプションカテゴリでは、SDN設定で使用する追加サービスの追加と管理が可能です。</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="#pvesdn_config_controllers">コントローラー</a>: 複雑な構成におけるレイヤー3ルーティングを制御</p>
</li>
<li>
<p>
DHCP: ゾーン向けにDHCPサーバーを定義し、
  IPAM内のゲストに自動的にIPを割り当て、
  DHCP経由でゲストにリースします。</p>
</li>
<li>
<p>
<a href="#pvesdn_config_ipam">IPAM</a>: ゲストのIPアドレス管理を外部から可能にします</p>
</li>
<li>
<p>
<a href="#pvesdn_config_dns">DNS</a>: 仮想ゲストのホスト名とIPアドレスを登録するためのDNSサーバー統合を定義</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="pvesdn_tech_and_config_overview">
<span>12.5. 技術と設定</span>
<a class="headerlink" href="#pvesdn_tech_and_config_overview" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEのソフトウェア定義ネットワーク実装は、可能な限り標準的なLinuxネットワーキングを利用します。その理由は、現代のLinuxネットワーキングが機能豊富なSDN実装に必要なほぼすべての要件を満たし、外部依存関係の追加を回避し、障害発生の可能性のあるコンポーネントの総量を削減するためです。</p></div>
<div class="paragraph">
<p>Proxmox VEのSDN設定は<span class="monospaced">/etc/pve/sdnに</span>配置され、
Proxmox<a href="#chapter_pmxcfs">VE設定ファイルシステム</a>を通じて
他のすべてのクラスターノードと共有されます。
これらの設定は、基盤となるネットワークスタックを管理するツール（<span class="monospaced">ifupdown2</span><span class="monospaced">やfrr</span>など）の
それぞれの設定形式に変換されます。</p></div>
<div class="paragraph">
<p>新規変更は即時適用されず、まず保留状態として記録されます。その後、Webインターフェースのメイン<em>SDN概要</em>パネルで複数の変更を一括適用可能です。このシステムにより、様々な変更を単一の原子的な操作として展開できます。</p></div>
<div class="paragraph">
<p>SDN<em>は/etc/pve/sdnにある</em> <em>.running-config</em>および<em>.versionファイル</em>を通じて展開状態を追跡します。</p></div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_zone">
<span>12.6. ゾーン</span>
<a class="headerlink" href="#pvesdn_config_zone" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ゾーンは仮想的に分離されたネットワークを定義します。ゾーンは特定のノードと割り当てられた権限に制限され、ユーザーを特定のゾーンとその内部の仮想ネットワーク（VNets）に制限します。</p></div>
<div class="paragraph">
<p>分離には以下の技術が利用可能です：</p></div>
<div class="ulist"><ul>
<li>
<p>
シンプル: 隔離されたブリッジ。簡易レイヤ3ルーティングブリッジ（NAT）</p>
</li>
<li>
<p>
VLAN: 仮想LANはLANを細分化する古典的な手法</p>
</li>
<li>
<p>
QinQ: スタックVLAN（正式名称<span class="monospaced">IEEE 802.1ad</span>）</p>
</li>
<li>
<p>
VXLAN: UDPトンネル経由のレイヤ2 VXLANネットワーク</p>
</li>
<li>
<p>
EVPN (BGP EVPN): BGPを組み合わせたVXLANによるレイヤ3ルーティングの確立</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="pvesdn_config_common_options">12.6.1. 共通オプション
<a class="headerlink" href="#pvesdn_config_common_options" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>すべてのゾーンタイプで以下のオプションが利用可能です：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ノード</dt>
<dd>
<p>
ゾーンおよび関連する仮想ネットワーク（VNets）を展開すべきノード。</p>
</dd>
<dt class="hdlist1">
IPAM</dt>
<dd>
<p>
ゾーン内のIPアドレス管理にはIPAMツールを使用してください。
オプション、デフォルトは<span class="monospaced">pve</span>。</p>
</dd>
<dt class="hdlist1">
DNS</dt>
<dd>
<p>
DNS APIサーバー。オプション。</p>
</dd>
<dt class="hdlist1">
リバースDNS</dt>
<dd>
<p>
逆引きDNS APIサーバー。オプション。</p>
</dd>
<dt class="hdlist1">
DNSゾーン</dt>
<dd>
<p>
DNS ドメイン名。
<span class="monospaced">&amp;lt;ホスト名&amp;gt;.&amp;lt;ドメイン&amp;gt;</span> などのホスト名を登録するために使用されます。DNS ゾーンは DNS サーバー上に既に存在している必要があります。
オプション。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pvesdn_zone_plugin_simple">12.6.2. 簡易ゾーン
<a class="headerlink" href="#pvesdn_zone_plugin_simple" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>最もシンプルなプラグインです。分離されたVNetブリッジを作成します。
このブリッジは物理インターフェースにリンクされておらず、VMトラフィックは
各ノード上でローカルにのみ存在します。
NATまたはルーティング環境で使用可能です。</p></div>
</div>
<div class="sect3">
<h4 id="pvesdn_zone_plugin_vlan">12.6.3. VLAN ゾーン
<a class="headerlink" href="#pvesdn_zone_plugin_vlan" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VLANプラグインは、既存のローカルLinuxまたはOVSブリッジを使用してノードの物理インターフェースに接続します。VNetで定義されたVLANタグ付けを使用してネットワークセグメントを分離します。これにより、異なるノード間のVM接続が可能になります。</p></div>
<div class="paragraph">
<p>VLANゾーン設定オプション:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ブリッジ</dt>
<dd>
<p>
<strong>各</strong>ノード間でノード間接続を可能にする、<strong>各</strong>ノードに既に設定済みのローカルブリッジまたはOVSスイッチ。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pvesdn_zone_plugin_qinq">12.6.4. QinQ ゾーン
<a class="headerlink" href="#pvesdn_zone_plugin_qinq" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>QinQ（VLANスタッキングとも呼ばれる）は、分離のために複数のVLANタグ層を使用します。QinQゾーンは外側のVLANタグ（<em>サービスVLAN</em>）を定義し、内側のVLANタグはVNetによって定義されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">この構成では、物理ネットワークスイッチがスタックVLANをサポートしている必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>QinQゾーン構成オプション:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ブリッジ</dt>
<dd>
<p>
各ローカルノードに既に設定済みの、VLAN対応ローカルブリッジ</p>
</dd>
<dt class="hdlist1">
サービスVLAN</dt>
<dd>
<p>
このゾーンのメインVLANタグ</p>
</dd>
<dt class="hdlist1">
サービスVLANプロトコル</dt>
<dd>
<p>
802.1q（デフォルト）または802.1adサービスVLANタイプを選択可能。</p>
</dd>
<dt class="hdlist1">
MTU</dt>
<dd>
<p>
タグの二重スタック化により、QinQ VLANではさらに4バイトが必要です。
  例えば、物理インターフェースのMTUが<span class="monospaced">1500</span>の場合、MTUを<span class="monospaced">1496に</span>削減する必要があります。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pvesdn_zone_plugin_vxlan">12.6.5. VXLANゾーン
<a class="headerlink" href="#pvesdn_zone_plugin_vxlan" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VXLANプラグインは既存ネットワーク（アンダーレイ）上にトンネル（オーバーレイ）を確立します。
これにより、デフォルト宛先ポート<span class="monospaced">4789</span>を使用したレイヤー4 UDPデータグラム内にレイヤー2イーサネットフレームがカプセル化されます。</p></div>
<div class="paragraph">
<p>すべてのピア間でUDP接続を有効にするには、アンダーレイネットワークを自身で設定する必要があります。</p></div>
<div class="paragraph">
<p>例えば、パブリックインターネット上にVXLANオーバーレイネットワークを構築し、
VMからは同一のローカルレイヤ2ネットワークを共有しているように見せることが可能です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">VXLAN単体では暗号化機能を提供しません。複数サイトをVXLANで接続する際は、
サイト間VPNなどの方法でサイト間の安全な接続を確立してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>VXLANゾーン設定オプション:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ピアアドレスリスト</dt>
<dd>
<p>
VXLANゾーン内の各ノードのIPアドレス一覧。
  このIPアドレスで到達可能な外部ノードを含めることができます。
  クラスタ内の全ノードをここに記述する必要があります。</p>
</dd>
<dt class="hdlist1">
SDNファブリック</dt>
<dd>
<p>
すべてのピアを手動で定義する代わりに、
ピアリストを自動生成する<a href="#pvesdn_config_fabrics">ファブリック</a>を使用してください。</p>
</dd>
<dt class="hdlist1">
MTU</dt>
<dd>
<p>
VXLANカプセル化には50バイトを使用するため、MTUは送信側物理インターフェースより50バイト小さく設定する必要があります。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pvesdn_zone_plugin_evpn">12.6.6. EVPN ゾーン
<a class="headerlink" href="#pvesdn_zone_plugin_evpn" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>EVPNゾーンはルーティング可能なレイヤ3ネットワークを構築し、
複数クラスタにまたがる展開が可能です。これはVPNを確立し、
ルーティングプロトコルとしてBGPを利用することで実現されます。</p></div>
<div class="paragraph">
<p>EVPNのVNetは、エニーキャストIPアドレスおよび/またはMACアドレスを持つことができます。ブリッジIPは各ノードで同じであり、仮想ゲストがこのアドレスをゲートウェイとして使用できることを意味します。</p></div>
<div class="paragraph">
<p>異なるゾーンのVNet間では、VRF（仮想ルーティングおよび転送）インターフェイスを介してルーティングが可能。</p></div>
<div class="paragraph">
<p>EVPNゾーン設定オプション:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
VRF VXLAN ID</dt>
<dd>
<p>
VNet間の専用ルーティング相互接続に使用されるVXLAN-ID。
  これは各VNetのVXLAN-IDとは異なる必要があります。</p>
</dd>
<dt class="hdlist1">
コントローラー</dt>
<dd>
<p>
このゾーンで使用するEVPNコントローラー（コントローラープラグインのセクションを参照）。</p>
</dd>
<dt class="hdlist1">
VNet MAC アドレス</dt>
<dd>
<p>
このゾーン内の全VNetに割り当てられるAnycast MACアドレス。
定義されていない場合は自動生成される。</p>
</dd>
<dt class="hdlist1">
出口ノード</dt>
<dd>
<p>
EVPNネットワークから実ネットワーク経由で出口ゲートウェイとして設定されるノード。設定されたノードはEVPNネットワーク内でデフォルトルートをアドバタイズする。オプション。</p>
</dd>
<dt class="hdlist1">
プライマリ出口ノード</dt>
<dd>
<p>
複数の出口ノードを使用する場合、全ノードでの負荷分散ではなく、このプライマリ出口ノード経由でトラフィックを強制します。オプションですが、SNATを使用する場合や、上流ルーターがECMPをサポートしていない場合に必要です。</p>
</dd>
<dt class="hdlist1">
出口ノードのローカルルーティング</dt>
<dd>
<p>
出口ノードからVM/CTサービスに到達する必要がある場合の特別なオプションです（デフォルトでは、出口ノードは実ネットワークとEVPNネットワーク間のトラフィック転送のみ許可します）。オプション。</p>
</dd>
<dt class="hdlist1">
サブネットの広告</dt>
<dd>
<p>
EVPNネットワーク内でサブネット全体をアナウンスします。
サイレントVM/CTが存在する場合（例：複数のIPを保有し、
エニーキャストゲートウェイがこれらのIPからのトラフィックを検知しない場合、
該当IPアドレスはEVPNネットワーク内から到達不能となります）。
オプション。</p>
</dd>
<dt class="hdlist1">
ARP ND抑制を無効化</dt>
<dd>
<p>
ARPまたはND（ネイバーディスカバリ）パケットを抑制しない。
  仮想マシンでフローティングIPを使用する場合に必要（IPアドレスとMACアドレスがシステム間で移動）。
  オプション。</p>
</dd>
<dt class="hdlist1">
ルートターゲットインポート</dt>
<dd>
<p>
外部EVPNルートターゲットのリストをインポート可能。
データセンター間または異なるEVPNネットワーク間の相互接続に使用。
オプション。</p>
</dd>
<dt class="hdlist1">
MTU</dt>
<dd>
<p>
VXLANカプセル化は50バイトを使用するため、MTUは送信物理インターフェースの最大MTUより50バイト小さく設定する必要がある。オプション、
デフォルトは1450。</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_vnet">
<span>12.7.</span>VNet
<a class="headerlink" href="#pvesdn_config_vnet" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>SDN GUIを通じて仮想ネットワーク（VNet）を作成すると、各ノードに同じ名前のローカルネットワークインターフェースが利用可能になります。ゲストをVNetに接続するには、このインターフェースをゲストに割り当て、対応するIPアドレスを設定します。</p></div>
<div class="paragraph">
<p>ゾーンによって、これらのオプションの意味は異なり、
このドキュメントの該当するゾーンセクションで説明されています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMVUlEQVRogdWZeXDVVZbHP7/f27JB
wtJIiCERRFlbx5FuHRrRBgtBsRIwCCOrFmGmiDBjYVNlQlgiQjU6IjI4xLJxGf5QGp0Cbaftsu3R
hu6aYXqgLZoWEsjyyDP7S972e7/l3vnj5cW3Ji9M/zOn6lRS997fvd/vueece+59ipSS/89iv5mP
ZEQQQsS23RQARVEAUFUVRVFQog0ZyogJSClld3c327Ztw7IsLMuKto90KgBsNhtVVVXMnj2bvLw8
7Ha7HBEJKWXGKoSQXV1dcsuWLfLSpUsyKkKIIdWyrLTqdrvlU089Jc+cOSM9Ho8Mh8NSCCEzxTRi
8JWVlbKtre0vAt6yLGmapmxtbZXr1q2TZ86ckW1tbSMikTH4GzduyKqqqkHwsSA1TZOhUChOg8Hg
oBqGIQ3DSAk+VleuXDliEspwviullD09PbzwwgscO3Yszt91XScQCNDZ2YlhGIPfuFwu7Pb48FJV
lZycnEG/z8/PRwiBqqqDYzweD88//zyrV69m7ty5jBs3DofDMWRgD0lASik9Hg979uzh2LFjcYEa
CoVob2/n2q9+hbZ585BGSCWltbVMr61NtSYbN25k7dq1zJkzZ1gSaqrGWPD79+9PAh8MBuns7OTi
e+8R2rwZCYOaqTTt3cuf6+qSwAMcP36co0eP8vXXX9Pd3Y1hGMg0lk65A1HwdXV1vPHGG0mW7+jo
4A8/+xn2BAAAI0riQOnu3cyork7Zt3btWtavX89dd92VdieSCEgppdvt5sCBAxw5ciSuLxQK0dTU
RMOHHyJ37hwh1NSiAKU7djDzxRdT9q9YsYJt27YxY8aMlCTiCEgp5eXLl6mvr+fVV1+NmygYDNLW
1sY3J09ipLEYQDPw2sBfCTwMLARKgKwhiNxWU8OsXbvi2qLYnnzySSorK1PvRGyqvH79uty6dWtS
Lg8EAvLKlSvyo1275M8hSV8H+eMBvRPkP9Vslp0tV6W3u12+c7hOTgT5NyAXgtwE8gTIUyn0D9XV
0jAMqet6klZUVMjPP/88KcWqUcs3NjZy+PBhDh06FGeFqNtcOnECY8+euICVwDWgFtj/m1/wD+8f
5xtg6uy5ZI+5BSkkU6fexgu7tvLWhd/x1tXL5P/905wAggnzSODavn388Sc/SblDL7/8Mq+99hqX
L1+OC2zb7t27uX79+u7Dhw+ndJvW1lYaP/qI0EDKS1z0XeDjC7/l9llz+d6EWxjv0imdcgeFRcVo
fR46vm1Cx8ndP5hP3qjR/GDuX/GbC5/iberl1qirxGjv73+PYRjc8tBDcVhGjRpFRUUF27dvp7i4
mPz8fFwuV2QHVq1aldLyDQ0NXDt5En91NRIQCRqNHld2HsLUCfu6GD9mNIoVQggDy9RQpYLTbkdV
7Vh6CH9vJ/fcfz/vALsAN2AlzHv1wAEu1tTExUI0Hl555RXq6upobm4mEAhECEyePDkOvK7rtLS0
cOP0aby1tUnAo2oNkFAUSTjoRfN+ix7wgjRBShACVVFQRGSkHvTypwtnmXHPQhrbb3D0k1McAdpi
DBLVhp/+lIvV1UlV7oQJE8jNzcXtduPz+ZIPMtM0aWhooPH99+mtrU1ymVRqUxUQFlJYSBFGCivG
OSyEaSCFAGlhd+Vy7w/n43BmM3POXWx69hl8AyMTDXTl4EEu7t2bCBGAQCCAruupCdjtdrp3705r
+ViN22YhsUwdyzRBCpACyzIRMnpngCxXNjYlMk4L+ggoYXxp5pbAlX37cDgcSQSEEAxmoVgQg/9n
AP67bVdAUcFmQ3W6IgtIiWUKLCGwLGvQj69e+m+EsBB6iGB/N/3e9oyNlIgRYm5kiR2JH0L6MkFY
Ei0UQKAycdJUbIodT3Mjpu6n3xfCptoRlomQCqZpRkhLCykMhLBQSV1HJbalKnvSF3MpNO0OSIEw
DWyuPCaVzCRv7ER8Ph+mtJM35lZsdjvuxktYhobDkYOCgqJEDWLLaAfSVc1p78SJO2AAvUBggLUN
KIx2Kgqjv3crY2wOiqaqKKoKihKJCctCC/npbW+jq7sbS7UjkGCZCCkQQkdJsV6mRWHGBH4HLHpx
F3LcGDq6u7nw2S85++V/4gb0kB9hFoAZwuZwgc2BqjpQVRWbzYXd4cDlysHn7WJi0W2EfH24XA6E
jKySqhTPtDRPIjB4XUtoPw3sKV/O+KJipJT4V63mq3/7Obu21/LN/5xl9l/PIys7G2fOaBS7E5vN
QrU7UW0KNlUFp5P8MeO5/8HFhPo7CXr7MMIaQW8neSkMlqnEEYj1s8QJbwXaWpopmDgJh93OqHGF
LFy9jjunTeHNo2uAvUy54/uMuaUYV24BUpVYpoVEwaY4UVUbitNJ9ugxOBw2tEAPfX29QCjuVB9O
EmNBTdeRGEj3A56OdkwtgDDCCKFjz8ql6N55/G3VcRouX+SXH72Ht6udcCg4cJiJSPIn8oCloIKU
KAhURUUIiVCjx128pjtrEiVtFkrMNNOBA+s34XG3YIRDSMtAkSbOrDzuvOchHnmiklEFY3n76G7O
f/nv9Ht7EMJCSjGoljCxjOBAnaSjhYPowevDZrx04FMSGLwnJEzmAOYCn33wAUYoiGXoSMsEoeNw
ZTO2aDrzFpWxck0VJVOn4fd2E/T7oneNyOFlGkjLwNTD6FoILRQEa/hDcyhJIuB0OlFVNeVE04B3
XjnC+d9+hRYKYJlhpDBBGDidDiaUfp/xk24nJ3c0eaPzsKsgzEhtZJkGIuzDNDRCAR99fb309XYh
NAYPsnQ6IgJSSgoKCihavDilJZ4Aajf8HVf/fAnLCCNNAyktECaqIsgbV8So0WMHrn2RGLBMHREO
YBg6eiiIFgzQ7/US8vmYoEDuENa/u6oqcwJRPysoKOC+N9+kcNGiJGvkAQuADY+twn3tCuFg/4CV
DbB0VKHhzHbhdGVhs6kgDKTuR9f86KEAWtBHd0c73p52pB5Av5KewJxnnmHeoUOEw+EkjHEEYi8M
EHlFKyws5IfHjlG4cGHSxJOA1cATPy7nT388j+73YoYDCEuP1DhSRrKOlFhmmLAWQNMCBHw9tHtu
8K2nBcsI8uGxf8HoiRBINNTtjz7KQ/X1xL6iRDHGvubZAfr7+1Nuz+TJk6G+nv/atInmX/86rq8A
WAlUrahk/Fio/8XHjM4fi93pHCgRFCzLQtd1tFAQLeCjs9NNb4cHxdL44J8PozfD7XyXRqNy97p1
PPz220gp0XU9zriKogw+SaqqGtmB48ePU15enkRASklRURH31tcz6cEHk1JrAfAUcEcPLLjvMU69
/694uzsI+X3093TS5blBl8eNt72VHk8Tfd9eR+vv4MQ/HkZpiJwttgTL3/Hoo2nBNzY2smjRIhYs
WEBBQQEulyvyLuT3+2VTUxM7d+7k5MmTKXNuS0sL555+mtYvv0zqE0A7kavhqFL4oAlCCWOygGIi
qTiHyMnuTBgz/bHHKDt9GillnN8D+P1+ysrKWLJkCdOmTWPWrFmUlpZGCAghpN/vp7m5mZqaGl5/
/XUKCwtJFLfbzX+sX8+Nr75K6rtZiXr49KVLKf/4Y4QQ6LqeBP6RRx6hvLycadOmMXPmTEpKSsjN
zf3uZS6WRHV1NadOnUpaTEpJa2sr5zZupOkmSaQqk2csWcLyTz4BQNO0uL7GxkbWr1+fErzNZlMG
w1lVVSUvL4+SkhL27dvH8uXL8Xg8ceABiouLue+ttyieN2+IK2Z6TRx/5+LFacE3NDRQWVmZFjwk
nAOxJF566SW2bNnChQsXkmKipKSEB959l9vmzcvo1pZOpz/8ME98+mla8Bs2bGDZsmVpwUOa5/VE
d0oXE319fXxWXs43Z88m9Q0n03/0I1YPJIRE8OfOnWPHjh2UlZUNCT4tgUQSO3fupKqqigceeGCw
P/a7VM8emUg0VcbK+fPn2bp1KytWrBgW/JAEEknU1NTw7LPPMn/+/GFBZQI8lZw/f57nnnuO5cuX
M2XKlGHBD0sgkURdXR2PP/44FRUVNwV+qP7Tp09z8ODBjNxmRAQSSRw4cIBly5axdOnSvwh4RVH4
4osv2L9/P2VlZRlbfkQEEkls376djo4OQqHE83bk4nK5EEKwZs0aSktLRwR+RATgOxItLS1cu3aN
vr6+wTfK/4tEfzeeMmUKkydPzhg8jJAAREgEg0H6+vrQNC2pFL8ZUVWVrKws8vPzycnJQVXVjH/s
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">現在の状態では、一部のオプションは効果がないか、特定のゾーンでは機能しない場合があります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>VNet 構成オプション:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ID</dt>
<dd>
<p>
仮想ネットワークを識別する最大8文字のID</p>
</dd>
<dt class="hdlist1">
コメント</dt>
<dd>
<p>
より説明的な識別子。インターフェース上のエイリアスとして割り当てられます。オプション</p>
</dd>
<dt class="hdlist1">
ゾーン</dt>
<dd>
<p>
このVNetに関連付けられたゾーン</p>
</dd>
<dt class="hdlist1">
タグ</dt>
<dd>
<p>
一意のVLANまたはVXLAN ID</p>
</dd>
<dt class="hdlist1">
VLAN対応</dt>
<dd>
<p>
インターフェース上でvlan-awareオプションを有効化し、ゲスト内での設定を可能にします。</p>
</dd>
<dt class="hdlist1">
ポートの分離</dt>
<dd>
<p>
このインターフェースの全ゲストポートに対して分離フラグを設定します（インターフェース本体は対象外）。これによりゲストは非分離ブリッジポート（ブリッジ本体）へのみトラフィックを送信可能となります。設定を有効化するには影響を受けるゲストの再起動が必要です。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ポート分離は各ホストにローカルに適用されます。
<a href="#pvesdn_firewall_integration">VNETファイアウォール</a>を使用して、ノード間でVNET内のトラフィックを
さらに分離します。例えば、デフォルトでDROPし、
IPサブネットからゲートウェイへのトラフィックと逆方向のトラフィックのみを許可します。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_subnet">
<span>12.8. サブネット</span>
<a class="headerlink" href="#pvesdn_config_subnet" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>サブネットは、CIDRネットワークアドレスで記述される特定のIP範囲を定義します。
各VNetは、1つ以上のサブネットを持つことができます。</p></div>
<div class="paragraph">
<p>サブネットは以下の目的で使用できます：</p></div>
<div class="ulist"><ul>
<li>
<p>
特定のVNetで定義可能なIPアドレスを制限する</p>
</li>
<li>
<p>
レイヤー3ゾーン内のVNetにルート/ゲートウェイを割り当て</p>
</li>
<li>
<p>
レイヤー 3 ゾーン内の VNet で SNAT を有効化</p>
</li>
<li>
<p>
IPAMプラグインによる仮想ゲスト（VMまたはCT）へのIP自動割り当て</p>
</li>
<li>
<p>
DNSプラグインによるDNS登録</p>
</li>
</ul></div>
<div class="paragraph">
<p>サブネットゾーンにIPAMサーバーが関連付けられている場合、サブネットプレフィックスは
自動的にIPAMに登録されます。</p></div>
<div class="paragraph">
<p>サブネット構成オプション:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ID</dt>
<dd>
<p>
CIDRネットワークアドレス（例：10.0.0.0/8）</p>
</dd>
<dt class="hdlist1">
ゲートウェイ</dt>
<dd>
<p>
ネットワークのデフォルトゲートウェイのIPアドレス。レイヤー3ゾーン
  (シンプル/EVPNプラグイン)では、VNet上に展開されます。</p>
</dd>
<dt class="hdlist1">
SNAT</dt>
<dd>
<p>
内部ネットワークからの外部ネットワーク接続を許可するソースNATを有効化
  パケットをノードの送信インターフェースに転送。EVPNゾーンではEVPNゲートウェイノードで転送。
  オプション。</p>
</dd>
<dt class="hdlist1">
DNSゾーンプレフィックス</dt>
<dd>
<p>
ドメイン登録にプレフィックスを追加します（例：
  &amp;lt;ホスト名&amp;gt;.プレフィックス.&amp;lt;ドメイン&amp;gt;）。オプション。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_controllers">
<span>12.9.</span>コントローラー
<a class="headerlink" href="#pvesdn_config_controllers" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>一部のゾーンでは、制御プレーンとデータプレーンが分離されており、
VNetの制御プレーンを管理するために外部コントローラーが必要です。</p></div>
<div class="paragraph">
<p>現在、外部コントローラーを必要とするのは<span class="monospaced">EVPN</span>ゾーンのみです。</p></div>
<div class="sect3">
<h4 id="pvesdn_controller_plugin_evpn">12.9.1. EVPN コントローラー
<a class="headerlink" href="#pvesdn_controller_plugin_evpn" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">EVPN</span>ゾーンでは、制御プレーンを管理するために外部コントローラーが必要です。
EVPNコントローラープラグインは、フリーレンジルーティング（FRR）ルーターを設定します。</p></div>
<div class="paragraph">
<p>EVPNコントローラを有効化するには、すべてのノードでFRRを有効にする必要があります。詳細は
<a href="#pvesdn_install_frrouting">FRRルーティングのインストールを参照してください</a>。</p></div>
<div class="paragraph">
<p>EVPNコントローラの設定オプション:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ASN #</dt>
<dd>
<p>
一意のBGP ASN番号。プライベートASN番号（64512～65534、4200000000～4294967294）の使用を強く推奨します。そうしないと、誤ってグローバルルーティングを破壊する可能性があります。</p>
</dd>
<dt class="hdlist1">
SDNファブリック</dt>
<dd>
<p>
EVPNゾーンに属する全ノードを含む<a href="#pvesdn_config_fabrics">ファブリック</a>。アンダーレイネットワークとして使用されます。</p>
</dd>
<dt class="hdlist1">
ピア</dt>
<dd>
<p>
EVPNゾーンに属する全ノードのIPリスト（外部ノードやルートリフレクターサーバーも含む）</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pvesdn_controller_plugin_BGP">12.9.2. BGP コントローラー
<a class="headerlink" href="#pvesdn_controller_plugin_BGP" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>BGPコントローラはゾーンから直接使用されません。
BGPピアを管理するFRRの設定に使用できます。</p></div>
<div class="paragraph">
<p>BGP-EVPNでは、ノードごとに異なるASNを定義してEBGPを実行するために使用できます。
また、EVPNルートを外部BGPピアにエクスポートするためにも使用できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">単純なフルメッシュEVPNの場合、デフォルトではBGPコントローラを定義する必要はありません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>BGPコントローラの設定オプション:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ノード</dt>
<dd>
<p>
このBGPコントローラのノード</p>
</dd>
<dt class="hdlist1">
ASN #</dt>
<dd>
<p>
一意のBGP ASN番号。プライベートASN番号（64512～65534または4200000000～4294967294の範囲）の使用を強く推奨します。
  そうしないと、誤ってグローバルルーティングを破壊する可能性があります。</p>
</dd>
<dt class="hdlist1">
ピア</dt>
<dd>
<p>
基盤となるBGPネットワークで通信するピアIPアドレスのリスト。</p>
</dd>
<dt class="hdlist1">
EBGP</dt>
<dd>
<p>
ピアのリモートASが異なる場合、これによりEBGPが有効になります。</p>
</dd>
<dt class="hdlist1">
ループバックインターフェース</dt>
<dd>
<p>
EVPNネットワークの送信元としてループバックまたはダミーインターフェースを使用（マルチパス用）。</p>
</dd>
<dt class="hdlist1">
ebgp-mutltihop</dt>
<dd>
<p>
ピアが直接接続されていない場合やループバックを使用している場合に備え、
ピア到達までのホップ数を増やします。</p>
</dd>
<dt class="hdlist1">
bgp-multipath-as-path-relax</dt>
<dd>
<p>
ピアのASNが異なる場合、ECMPを許可します。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pvesdn_controller_plugin_ISIS">12.9.3. ISIS コントローラー
<a class="headerlink" href="#pvesdn_controller_plugin_ISIS" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ISISコントローラはゾーンから直接使用されることはありません。
ISISドメインへEVPNルートをエクスポートするFRRの設定に使用できます。</p></div>
<div class="paragraph">
<p>ISISコントローラ設定オプション:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ノード</dt>
<dd>
<p>
このISISコントローラのノード。</p>
</dd>
<dt class="hdlist1">
ドメイン</dt>
<dd>
<p>
一意のISISドメイン。</p>
</dd>
<dt class="hdlist1">
ネットワークエンティティタイトル</dt>
<dd>
<p>
このノードを識別する一意のISISネットワークアドレス。</p>
</dd>
<dt class="hdlist1">
インターフェース</dt>
<dd>
<p>
ISISが使用する物理インターフェースのリスト。</p>
</dd>
<dt class="hdlist1">
ループバック</dt>
<dd>
<p>
EVPNネットワークの送信元としてループバックまたはダミーインターフェースを使用する
  （マルチパス用）。</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_fabrics">
<span>12.10.</span>ファブリック
<a class="headerlink" href="#pvesdn_config_fabrics" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-fabrics-overview.png">
<img src="images/screenshot/gui-datacenter-fabrics-overview.png" alt="screenshot/gui-datacenter-fabrics-overview.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>Proxmox VE SDNのファブリックは、クラスタ内のノード間で自動ルーティングを提供します。
ノード間のアンダーレイネットワーク設定を簡素化し、
SDN導入の基盤を形成します。</p></div>
<div class="paragraph">
<p>物理ネットワークインターフェース上でルーティングプロトコルを自動設定し、
クラスター内のノード間接続を確立します。これにより、ネットワークトポロジの変化に適応する
耐障害性のある自動設定ネットワークファブリックが構築されます。これらのファブリックは、
Ceph用のフルメッシュネットワークとして、またはEVPNコントローラーとVXLANゾーン内で利用可能です。</p></div>
<div class="sect3">
<h4 id="_installation">12.10.1. インストール
<a class="headerlink" href="#_installation" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>OpenFabricおよびOSPFのFRR実装が使用されるため、まず
<span class="monospaced">frr</span>および<span class="monospaced">frr-pythontools</span>パッケージがインストールされていることを確認してください:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt update
apt install frr frr-pythontools</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_permissions_2">12.10.2. 権限
<a class="headerlink" href="#_permissions_2" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>SDNファブリックの設定を表示するには、ユーザーにSDN.AuditまたはSDN.Allocate権限が必要です。ファブリック設定の作成または変更には、SDN.Allocate権限が必要です。ノードの設定を表示するには、ユーザーは Sys.Audit または Sys.Modify 権限が必要です。ファブリック内でノードを追加または更新する場合、この操作はノードの /etc/network/interfaces ファイルへの書き込みを伴うため、対象ノードに対する追加の Sys.Modify 権限が必要です。</p></div>
</div>
<div class="sect3">
<h4 id="_configuration_13">12.10.3. 設定
<a class="headerlink" href="#_configuration_13" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ファブリックを作成するには、Datacenter→SDN→Fabrics に移動し、「Add Fabric」をクリックします。希望のプロトコルを選択するとファブリックが作成されます。「+」ボタンでファブリックに追加するノードを選択でき、他のノードとの通信に使用するインターフェースも選択する必要があります。</p></div>
<div class="sect4">
<h5 id="_loopback_prefix">ループバックプレフィックス
<a class="headerlink" href="#_loopback_prefix" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ファブリックのループバックプレフィックスとしてCIDRネットワーク範囲（例：192.0.2.0/24）を指定できます。設定すると、システムは自動的にすべてのルーターIDがこのプレフィックス内に含まれていることを検証します。これにより、アドレス指定スキームの一貫性が確保され、アドレス指定の競合やエラーを防止するのに役立ちます。</p></div>
</div>
<div class="sect4">
<h5 id="_router_id_selection">ルーターIDの選択
<a class="headerlink" href="#_router_id_selection" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ファブリック内の各ノードには一意のルーターIDが必要です。これはドット区切り表記のIPv4アドレス（例：192.0.2.1）です。OpenFabricでは、コロン区切りの標準的な16進表記によるIPv6アドレス（例：2001:db8::1428:57ab）も使用可能です。ルータIDをアドレスとするダミーインターフェースが
自動的に作成され、ファブリックのループバックインターフェースとして機能します
（デフォルトではパッシブです）。</p></div>
</div>
<div class="sect4">
<h5 id="_routemaps">ルートマップ
<a class="headerlink" href="#_routemaps" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ファブリックごとに、アクセスリストとルートマップが自動的に作成されます。
これらはルータを構成し、送信パケットの送信元アドレスを書き換えます。
他のノードと通信するとき（例：pingを実行するとき）、これによりトラフィックが物理インターフェースではなく、
ローカルのダミーインターフェースのIPアドレスから発信されることが保証されます。
これにより、ファブリック全体で一貫したルーティング動作と適切な送信元アドレス選択が提供されます。</p></div>
</div>
<div class="sect4">
<h5 id="pvesdn_config_fabrics_ipv6">IPv6に関する注意事項
<a class="headerlink" href="#pvesdn_config_fabrics_ipv6" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>IPv6は現在OpenFabricファブリックでのみ利用可能です。これらのIPv6ファブリックでは、
ファブリック内の全ノードでグローバルIPv6転送を有効にする必要があります。
IPv6転送が有効でない場合、非フルメッシュファブリックは機能しません。これは中継ノードが外部ノードへパケットを転送しないためです。現在、IPv4のようにインターフェース単位でIPv6転送を有効化する簡単な方法はないため、グローバルに有効化する必要があります。これには/etc/network/interfacesファイルに次の行を追加します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>post-up sysctl -w net.ipv6.conf.all.forwarding=1</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">/etc/network/interfaces</span>ファイル内のファブリックインターフェースにこの行を追加することで実現できます。これにより、該当インターフェースが起動した時点でグローバルに IPv6 転送が有効化されます。なお、この設定はインターフェースの自動IPv6設定（SLAAC）、
ネイバーアドバタイズメント、ルータソリシテーション、
ルータアドバタイズメントの処理に影響します。詳細は
<a href="https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt">https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt</a>の
<span class="monospaced">net.ipv6.conf.all.forwarding</span> を参照してください。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pvesdn_openfabric">12.10.4. OpenFabric
<a class="headerlink" href="#pvesdn_openfabric" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>OpenFabricはデータセンターファブリック向けに特別に設計されたルーティングプロトコルです。
IS-ISを基盤とし、データセンターで一般的なスパイン・リーフトポロジー向けに最適化されています。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-create-fabric-openfabric.png">
<img src="images/screenshot/gui-datacenter-create-fabric-openfabric.png" alt="screenshot/gui-datacenter-create-fabric-openfabric.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>設定オプション:</p></div>
<div class="sect4">
<h5 id="pvesdn_openfabric_fabric">ファブリック上
<a class="headerlink" href="#pvesdn_openfabric_fabric" title="Permalink to this heading"></a></h5>
<div class="dlist"><dl>
<dt class="hdlist1">
名前</dt>
<dd>
<p>
これはOpenFabricファブリックの名前であり、最大8文字までです。</p>
</dd>
<dt class="hdlist1">
IPv4プレフィックス</dt>
<dd>
<p>
ファブリック内の全ルータIDがこのプレフィックス内に含まれることを検証するために使用される
IPv4 CIDRネットワーク範囲（例：192.0.2.0/24）。</p>
</dd>
<dt class="hdlist1">
IPv6プレフィックス</dt>
<dd>
<p>
ファブリック内の全ルーターIDがこのプレフィックス内に含まれることを検証するために使用する
IPv6 CIDRネットワーク範囲（例：2001:db8::/64）。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">IPv6ファブリックを機能させるには、全ノードでグローバル転送を有効化する必要があります。
設定方法と追加情報は<a href="#pvesdn_config_fabrics_ipv6">「IPv6に関する注意事項」</a>を参照してください。</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
Hello 間隔</dt>
<dd>
<p>
隣接ノードとの接続を確立・維持するために
Helloパケットを送信する頻度（秒単位）を制御します。値を小さくすると
障害を迅速に検出できますが、ネットワークトラフィックが増加します。
このオプションはファブリック全体で有効であり、
ファブリック内の全ノードの全インターフェースがこの
hello-intervalプロパティを継承します。デフォルト値は3秒です。</p>
</dd>
<dt class="hdlist1">
CSNP間隔</dt>
<dd>
<p>
ノードが隣接ノードとルーティングデータベースを同期する頻度（秒単位）を設定します。値を小さくするとネットワークトポロジー情報の同期が速くなりますが、ネットワークトラフィックが増加します。このオプションはファブリック全体で有効であり、このファブリック内の全ノードの全インターフェースがこのプロパティを継承します。デフォルト値は10秒です。</p>
</dd>
</dl></div>
</div>
<div class="sect4">
<h5 id="pvesdn_openfabric_node">ノード上
<a class="headerlink" href="#pvesdn_openfabric_node" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-create-node-openfabric.png">
<img src="images/screenshot/gui-datacenter-create-node-openfabric.png" alt="screenshot/gui-datacenter-create-node-openfabric.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>ファブリックを構成する全ノードで利用可能なオプション：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ノード</dt>
<dd>
<p>
ファブリックに追加するノードを選択します。
現在クラスタ内にあるノードのみが表示されます。</p>
</dd>
<dt class="hdlist1">
IPv4</dt>
<dd>
<p>
OpenFabric Network Entity Title (NET) の生成に使用される一意の IPv4 アドレス。
同一ファブリック内の各ノードは異なる Router-ID を持つ必要がありますが、
単一ノードはすべてのファブリックで同じ NET アドレスを使用する必要があります
（指定しない場合、Proxmox VE が自動的に選択し、設定が有効であることを保証します）。</p>
</dd>
<dt class="hdlist1">
IPv6</dt>
<dd>
<p>
OpenFabricネットワークエンティティタイトル(NET)を生成するために使用される一意のIPv6アドレス。同じファブリック内の各ノードは異なるルーターIDを持つ必要がありますが、単一のノードはすべてのファブリックで同じNETアドレスを使用する必要があります。
IPv4アドレスとIPv6アドレスの両方が設定されている場合、NETの導出にはIPv4アドレスが使用されます。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMVUlEQVRogdWZeXDVVZbHP7/f27JB
wtJIiCERRFlbx5FuHRrRBgtBsRIwCCOrFmGmiDBjYVNlQlgiQjU6IjI4xLJxGf5QGp0Cbaftsu3R
hu6aYXqgLZoWEsjyyDP7S972e7/l3vnj5cW3Ji9M/zOn6lRS997fvd/vueece+59ipSS/89iv5mP
ZEQQQsS23RQARVEAUFUVRVFQog0ZyogJSClld3c327Ztw7IsLMuKto90KgBsNhtVVVXMnj2bvLw8
7Ha7HBEJKWXGKoSQXV1dcsuWLfLSpUsyKkKIIdWyrLTqdrvlU089Jc+cOSM9Ho8Mh8NSCCEzxTRi
8JWVlbKtre0vAt6yLGmapmxtbZXr1q2TZ86ckW1tbSMikTH4GzduyKqqqkHwsSA1TZOhUChOg8Hg
oBqGIQ3DSAk+VleuXDliEspwviullD09PbzwwgscO3Yszt91XScQCNDZ2YlhGIPfuFwu7Pb48FJV
lZycnEG/z8/PRwiBqqqDYzweD88//zyrV69m7ty5jBs3DofDMWRgD0lASik9Hg979uzh2LFjcYEa
CoVob2/n2q9+hbZ585BGSCWltbVMr61NtSYbN25k7dq1zJkzZ1gSaqrGWPD79+9PAh8MBuns7OTi
e+8R2rwZCYOaqTTt3cuf6+qSwAMcP36co0eP8vXXX9Pd3Y1hGMg0lk65A1HwdXV1vPHGG0mW7+jo
4A8/+xn2BAAAI0riQOnu3cyork7Zt3btWtavX89dd92VdieSCEgppdvt5sCBAxw5ciSuLxQK0dTU
RMOHHyJ37hwh1NSiAKU7djDzxRdT9q9YsYJt27YxY8aMlCTiCEgp5eXLl6mvr+fVV1+NmygYDNLW
1sY3J09ipLEYQDPw2sBfCTwMLARKgKwhiNxWU8OsXbvi2qLYnnzySSorK1PvRGyqvH79uty6dWtS
Lg8EAvLKlSvyo1275M8hSV8H+eMBvRPkP9Vslp0tV6W3u12+c7hOTgT5NyAXgtwE8gTIUyn0D9XV
0jAMqet6klZUVMjPP/88KcWqUcs3NjZy+PBhDh06FGeFqNtcOnECY8+euICVwDWgFtj/m1/wD+8f
5xtg6uy5ZI+5BSkkU6fexgu7tvLWhd/x1tXL5P/905wAggnzSODavn388Sc/SblDL7/8Mq+99hqX
L1+OC2zb7t27uX79+u7Dhw+ndJvW1lYaP/qI0EDKS1z0XeDjC7/l9llz+d6EWxjv0imdcgeFRcVo
fR46vm1Cx8ndP5hP3qjR/GDuX/GbC5/iberl1qirxGjv73+PYRjc8tBDcVhGjRpFRUUF27dvp7i4
mPz8fFwuV2QHVq1aldLyDQ0NXDt5En91NRIQCRqNHld2HsLUCfu6GD9mNIoVQggDy9RQpYLTbkdV
7Vh6CH9vJ/fcfz/vALsAN2AlzHv1wAEu1tTExUI0Hl555RXq6upobm4mEAhECEyePDkOvK7rtLS0
cOP0aby1tUnAo2oNkFAUSTjoRfN+ix7wgjRBShACVVFQRGSkHvTypwtnmXHPQhrbb3D0k1McAdpi
DBLVhp/+lIvV1UlV7oQJE8jNzcXtduPz+ZIPMtM0aWhooPH99+mtrU1ymVRqUxUQFlJYSBFGCivG
OSyEaSCFAGlhd+Vy7w/n43BmM3POXWx69hl8AyMTDXTl4EEu7t2bCBGAQCCAruupCdjtdrp3705r
+ViN22YhsUwdyzRBCpACyzIRMnpngCxXNjYlMk4L+ggoYXxp5pbAlX37cDgcSQSEEAxmoVgQg/9n
AP67bVdAUcFmQ3W6IgtIiWUKLCGwLGvQj69e+m+EsBB6iGB/N/3e9oyNlIgRYm5kiR2JH0L6MkFY
Ei0UQKAycdJUbIodT3Mjpu6n3xfCptoRlomQCqZpRkhLCykMhLBQSV1HJbalKnvSF3MpNO0OSIEw
DWyuPCaVzCRv7ER8Ph+mtJM35lZsdjvuxktYhobDkYOCgqJEDWLLaAfSVc1p78SJO2AAvUBggLUN
KIx2Kgqjv3crY2wOiqaqKKoKihKJCctCC/npbW+jq7sbS7UjkGCZCCkQQkdJsV6mRWHGBH4HLHpx
F3LcGDq6u7nw2S85++V/4gb0kB9hFoAZwuZwgc2BqjpQVRWbzYXd4cDlysHn7WJi0W2EfH24XA6E
jKySqhTPtDRPIjB4XUtoPw3sKV/O+KJipJT4V63mq3/7Obu21/LN/5xl9l/PIys7G2fOaBS7E5vN
QrU7UW0KNlUFp5P8MeO5/8HFhPo7CXr7MMIaQW8neSkMlqnEEYj1s8QJbwXaWpopmDgJh93OqHGF
LFy9jjunTeHNo2uAvUy54/uMuaUYV24BUpVYpoVEwaY4UVUbitNJ9ugxOBw2tEAPfX29QCjuVB9O
EmNBTdeRGEj3A56OdkwtgDDCCKFjz8ql6N55/G3VcRouX+SXH72Ht6udcCg4cJiJSPIn8oCloIKU
KAhURUUIiVCjx128pjtrEiVtFkrMNNOBA+s34XG3YIRDSMtAkSbOrDzuvOchHnmiklEFY3n76G7O
f/nv9Ht7EMJCSjGoljCxjOBAnaSjhYPowevDZrx04FMSGLwnJEzmAOYCn33wAUYoiGXoSMsEoeNw
ZTO2aDrzFpWxck0VJVOn4fd2E/T7oneNyOFlGkjLwNTD6FoILRQEa/hDcyhJIuB0OlFVNeVE04B3
XjnC+d9+hRYKYJlhpDBBGDidDiaUfp/xk24nJ3c0eaPzsKsgzEhtZJkGIuzDNDRCAR99fb309XYh
NAYPsnQ6IgJSSgoKCihavDilJZ4Aajf8HVf/fAnLCCNNAyktECaqIsgbV8So0WMHrn2RGLBMHREO
YBg6eiiIFgzQ7/US8vmYoEDuENa/u6oqcwJRPysoKOC+N9+kcNGiJGvkAQuADY+twn3tCuFg/4CV
DbB0VKHhzHbhdGVhs6kgDKTuR9f86KEAWtBHd0c73p52pB5Av5KewJxnnmHeoUOEw+EkjHEEYi8M
EHlFKyws5IfHjlG4cGHSxJOA1cATPy7nT388j+73YoYDCEuP1DhSRrKOlFhmmLAWQNMCBHw9tHtu
8K2nBcsI8uGxf8HoiRBINNTtjz7KQ/X1xL6iRDHGvubZAfr7+1Nuz+TJk6G+nv/atInmX/86rq8A
WAlUrahk/Fio/8XHjM4fi93pHCgRFCzLQtd1tFAQLeCjs9NNb4cHxdL44J8PozfD7XyXRqNy97p1
PPz220gp0XU9zriKogw+SaqqGtmB48ePU15enkRASklRURH31tcz6cEHk1JrAfAUcEcPLLjvMU69
/694uzsI+X3093TS5blBl8eNt72VHk8Tfd9eR+vv4MQ/HkZpiJwttgTL3/Hoo2nBNzY2smjRIhYs
WEBBQQEulyvyLuT3+2VTUxM7d+7k5MmTKXNuS0sL555+mtYvv0zqE0A7kavhqFL4oAlCCWOygGIi
qTiHyMnuTBgz/bHHKDt9GillnN8D+P1+ysrKWLJkCdOmTWPWrFmUlpZGCAghpN/vp7m5mZqaGl5/
/XUKCwtJFLfbzX+sX8+Nr75K6rtZiXr49KVLKf/4Y4QQ6LqeBP6RRx6hvLycadOmMXPmTEpKSsjN
zf3uZS6WRHV1NadOnUpaTEpJa2sr5zZupOkmSaQqk2csWcLyTz4BQNO0uL7GxkbWr1+fErzNZlMG
w1lVVSUvL4+SkhL27dvH8uXL8Xg8ceABiouLue+ttyieN2+IK2Z6TRx/5+LFacE3NDRQWVmZFjwk
nAOxJF566SW2bNnChQsXkmKipKSEB959l9vmzcvo1pZOpz/8ME98+mla8Bs2bGDZsmVpwUOa5/VE
d0oXE319fXxWXs43Z88m9Q0n03/0I1YPJIRE8OfOnWPHjh2UlZUNCT4tgUQSO3fupKqqigceeGCw
P/a7VM8emUg0VcbK+fPn2bp1KytWrBgW/JAEEknU1NTw7LPPMn/+/GFBZQI8lZw/f57nnnuO5cuX
M2XKlGHBD0sgkURdXR2PP/44FRUVNwV+qP7Tp09z8ODBjNxmRAQSSRw4cIBly5axdOnSvwh4RVH4
4osv2L9/P2VlZRlbfkQEEkls376djo4OQqHE83bk4nK5EEKwZs0aSktLRwR+RATgOxItLS1cu3aN
vr6+wTfK/4tEfzeeMmUKkydPzhg8jJAAREgEg0H6+vrQNC2pFL8ZUVWVrKws8vPzycnJQVXVjH/s
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">IPv6アドレスを使用する場合、最後の3セグメントがNET生成に使用されます。ノード間でこれらのセグメントが異なることを確認してください。</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
インターフェース</dt>
<dd>
<p>
他のOpenFabricノードとのピアリング接続確立に使用するインターフェースを指定します。
事前に割り当てられたIPアドレスのないインターフェースを選択し、
必要に応じてIPv4/IPv6列でアドレスを設定することを推奨します。
ルータIDを持つダミーの「ループバック」インターフェースが自動生成されます。</p>
</dd>
</dl></div>
</div>
<div class="sect4">
<h5 id="_on_the_interface">インターフェース上
<a class="headerlink" href="#_on_the_interface" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>追加カラムを有効化する際に、インターフェースごとに設定可能なオプションパラメータ:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
IP</dt>
<dd>
<p>
このインターフェースに自動設定されるべきIPv4アドレス。
ネットマスク（例: /31）を含める必要があります。</p>
</dd>
<dt class="hdlist1">
IPv6</dt>
<dd>
<p>
このインターフェースに自動設定されるべきIPv6アドレス。
ネットマスク（例: /127）を含める必要があります。</p>
</dd>
<dt class="hdlist1">
Hello Multiplier</dt>
<dd>
<p>
接続失敗と判断されるHelloパケットの未受信数を定義します。
値が大きいほどパケット損失に対する耐性は高まりますが、
障害検出が遅延します。デフォルト値は10です。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">/etc/network/interfaces</span>内のエントリが手<span class="monospaced">動</span>設定（<span class="monospaced">manual</span>set）されているインターフェースを削除した場合、SDN設定の適用時にIPアドレスは削除されません。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="pvesdn_ospf">12.10.5. OSPF
<a class="headerlink" href="#pvesdn_ospf" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>OSPF (Open Shortest Path First) は、IP ネットワーク経由のトラフィックルーティングにおける最短経路を効率的に計算する、広く使用されているリンク状態ルーティングプロトコルです。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-create-fabric-ospf.png">
<img src="images/screenshot/gui-datacenter-create-fabric-ospf.png" alt="screenshot/gui-datacenter-create-fabric-ospf.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>設定オプション:</p></div>
<div class="sect4">
<h5 id="pvesdn_ospf_fabric">ファブリック上
<a class="headerlink" href="#pvesdn_ospf_fabric" title="Permalink to this heading"></a></h5>
<div class="dlist"><dl>
<dt class="hdlist1">
IPv4プレフィックス</dt>
<dd>
<p>
ファブリック内の全ルータIDがこのプレフィックス内に含まれることを検証するための
IPv4 CIDRネットワーク範囲（例: 192.0.2.0/24）。</p>
</dd>
<dt class="hdlist1">
エリア</dt>
<dd>
<p>
OSPFエリア識別子を指定します。32ビット符号付き整数またはIPアドレスで指定可能です。エリアはOSPFネットワークを階層的に組織化する手段であり、エリア0（または0.0.0.0）がバックボーンエリアとして機能します。</p>
</dd>
</dl></div>
</div>
<div class="sect4">
<h5 id="pvesdn_ospf_node">ノード上
<a class="headerlink" href="#pvesdn_ospf_node" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-create-node-ospf.png">
<img src="images/screenshot/gui-datacenter-create-node-ospf.png" alt="screenshot/gui-datacenter-create-node-ospf.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>ファブリックを構成する各ノードで利用可能なオプション:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ノード</dt>
<dd>
<p>
ファブリックに追加するノードを選択します。
現在クラスタ内にあるノードのみが表示されます。</p>
</dd>
<dt class="hdlist1">
IPv4</dt>
<dd>
<p>
OSPFネットワーク内でこのルータを識別するための一意のルータID。
同一ファブリック内の各ノードは異なるルータIDを持つ必要があります。</p>
</dd>
<dt class="hdlist1">
インターフェース</dt>
<dd>
<p>
他のOSPFノードとのピアリング接続を確立するインターフェースを指定します。
事前に割り当てられたIPアドレスを持たないインターフェースを選択し、
必要に応じてIPv4列でアドレスを設定することを推奨します。
ルータIDを持つダミーの「ループバック」インターフェースが自動生成されます。</p>
</dd>
</dl></div>
</div>
<div class="sect4">
<h5 id="_on_the_interface_2">インターフェース上
<a class="headerlink" href="#_on_the_interface_2" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>インターフェースごとに設定可能なオプションパラメータ:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
IP</dt>
<dd>
<p>
このインターフェースに自動設定されるべきIPv4アドレス。
ネットマスク（例: /31）を含める必要があります。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">/etc/network/interfaces</span>内の<span class="monospaced">手動設定</span>エントリを持つインターフェースを削除しても、
SDN設定適用時にIPアドレスは削除されません。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ダミーインターフェースは自動的に<span class="monospaced">パッシブ</span>として設定されます。
IPアドレスが設定されていないインターフェースはすべて
<span class="monospaced">ポイントツーポイント</span>リンクとして扱われます。</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_ipam">
<span>12.11.</span>IPAM
<a class="headerlink" href="#pvesdn_config_ipam" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>IPアドレス管理（IPAM）ツールは、ネットワーク上のクライアントのIPアドレスを管理します。Proxmox VEのSDNは、例えば新しいゲスト用に空きIPアドレスを見つけるためにIPAMを使用します。</p></div>
<div class="paragraph">
<p>単一の IPAM インスタンスは、1 つ以上のゾーンに関連付けることができます。</p></div>
<div class="sect3">
<h4 id="pvesdn_ipam_plugin_pveipam">12.11.1. PVE IPAM プラグイン
<a class="headerlink" href="#pvesdn_ipam_plugin_pveipam" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VEクラスタのデフォルト組み込みIPAM。</p></div>
<div class="paragraph">
<p>データセンター設定のSDNセクションにあるIPAMパネルから、PVE IPAMプラグインの現在の状態を確認できます。このUIを使用して、IPマッピングの作成、更新、削除が可能です。特に<a href="#pvesdn_config_dhcp">DHCP機能</a>と組み合わせて使用すると便利です。</p></div>
<div class="paragraph">
<p>DHCPを使用している場合、IPAMパネルで特定のVMに対するリースを作成または編集でき、
これによりDHCP経由で割り当てられたIPを変更できます。
DHCPを使用しているVMのIPを編集する際は、必ずゲストに新しいDHCPリースを取得させる必要があります。
これは通常、ゲストのネットワークスタックを再読み込みするか、ゲストを再起動することで実現できます。</p></div>
</div>
<div class="sect3">
<h4 id="pvesdn_ipam_plugin_netbox">12.11.2. NetBox IPAMプラグイン
<a class="headerlink" href="#pvesdn_ipam_plugin_netbox" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><a href="https://github.com/netbox-community/netbox">NetBoxは</a>オープンソースのIPアドレス管理（IPAM）およびデータセンターインフラ管理（DCIM）ツールです。</p></div>
<div class="paragraph">
<p>NetBoxをProxmox VE SDNと統合するには、NetBoxでAPIトークンを作成します。手順はこちらを参照:
<a href="https://docs.netbox.dev/en/stable/integrations/rest-api/#tokens">https://docs.netbox.dev/en/stable/integrations/rest-api/#tokens</a></p></div>
<div class="paragraph">
<p>NetBoxの設定プロパティは以下の通りです：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
URL</dt>
<dd>
<p>
NetBox REST API エンドポイント:<span class="monospaced">http://yournetbox.domain.com/api</span></p>
</dd>
<dt class="hdlist1">
トークン</dt>
<dd>
<p>
APIアクセストークン</p>
</dd>
<dt class="hdlist1">
フィンガープリント</dt>
<dd>
<p>
NetBox APIのSHA-256フィンガープリント。デフォルト証明書使用時は
 <span class="monospaced"> openssl x509 -in /etc/ssl/certs/netbox.crt -noout -fingerprint -sha256</span>で取得可能。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pvesdn_ipam_plugin_phpipam">12.11.3. phpIPAMプラグイン
<a class="headerlink" href="#pvesdn_ipam_plugin_phpipam" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><a href="https://phpipam.net/">phpIPAMでは</a>「アプリケーション」を作成し、
管理者権限を持つAPIトークンをアプリケーションに追加する必要があります。</p></div>
<div class="paragraph">
<p>phpIPAMの設定プロパティは以下の通りです：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
URL</dt>
<dd>
<p>
REST-APIエンドポイント:<span class="monospaced">http://phpipam.domain.com/api/&amp;lt;appname&amp;gt;/</span></p>
</dd>
<dt class="hdlist1">
トークン</dt>
<dd>
<p>
APIアクセストークン</p>
</dd>
<dt class="hdlist1">
セクション</dt>
<dd>
<p>
整数ID。セクションはphpIPAMにおけるサブネットのグループです。デフォルトの
インストールでは、顧客用に<span class="monospaced">sectionid=1が</span>使用されます。</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_dns">
<span>12.12.</span>DNS
<a class="headerlink" href="#pvesdn_config_dns" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE SDN の DNS プラグインは、ホスト名と IP アドレスの登録用に DNS API サーバーを定義するために使用されます。DNS 構成は 1 つ以上のゾーンに関連付けられ、ゾーンに設定されたすべてのサブネット IP に対する DNS 登録を提供します。</p></div>
<div class="sect3">
<h4 id="pvesdn_dns_plugin_powerdns">12.12.1. PowerDNS プラグイン
<a class="headerlink" href="#pvesdn_dns_plugin_powerdns" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><a href="https://doc.powerdns.com/authoritative/http-api/index.html">https://doc.powerdns.com/authoritative/http-api/index.html</a></p></div>
<div class="paragraph">
<p>PowerDNS設定でWebサーバーとAPIを有効化する必要があります:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>api=yes
api-key=arandomgeneratedstring
webserver=yes
webserver-port=8081</pre>
</div></div>
<div class="paragraph">
<p>PowerDNSの設定オプションは以下の通りです:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
url</dt>
<dd>
<p>
REST API エンドポイント:<a href="http://yourpowerdnserver.domain.com:8081/api/v1/servers/localhost">http://yourpowerdnserver.domain.com:8081/api/v1/servers/localhost</a></p>
</dd>
<dt class="hdlist1">
キー</dt>
<dd>
<p>
APIアクセスキー</p>
</dd>
<dt class="hdlist1">
ttl</dt>
<dd>
<p>
レコードのデフォルトTTL</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_config_dhcp">
<span>12.13.</span>DHCP
<a class="headerlink" href="#pvesdn_config_dhcp" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE SDN の DHCP プラグインは、ゾーン向けに DHCP サーバーを自動展開するために使用できます。これは、DHCP 範囲が設定されているゾーン内のすべてのサブネットに DHCP を提供します。現在、DHCP 用の利用可能なバックエンドプラグインは dnsmasq プラグインのみです。</p></div>
<div class="paragraph">
<p>DHCPプラグインは、VM/CTに新しいネットワークインターフェースを追加する際に、
ゾーンで設定されたIPAMプラグインからIPを割り当てることで動作します。
IPAMの設定方法の詳細は、
<a href="#pvesdn_config_ipam">ドキュメントの該当セクション</a>を参照してください。</p></div>
<div class="paragraph">
<p>VM起動時、MACアドレスとIPの対応関係がゾーンのDHCPプラグイン内に作成されます。
ネットワークインターフェースが削除されるか、VM/CTが破棄されると、
IPAMおよびDHCPサーバー内の該当エントリも削除されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">一部の機能（IPマッピングの追加/編集/削除）は現在、
<a href="#pvesdn_ipam_plugin_pveipam">PVE IPAMプラグイン</a>使用時のみ利用可能です。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_configuration_14">12.13.1. 設定
<a class="headerlink" href="#_configuration_14" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Web UIの「Zones」パネルでゾーンの高度なオプションからDHCPを有効にすることで、
ゾーンの自動DHCPを有効化できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">現在、自動DHCPをサポートしているのはシンプルゾーンのみ</td>
</tr></table>
</div>
<div class="paragraph">
<p>ゾーンで自動DHCPを有効化した後、ゾーン内のサブネット用にDHCP範囲を設定する必要があります。
そのためには、Vnetsパネルに移動し、DHCP範囲を設定したいサブネットを選択します。
編集ダイアログ内の対応するタブでDHCP範囲を設定できます。
または、以下のCLIコマンドでサブネットのDHCP範囲を設定することも可能です:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pvesh set /cluster/sdn/vnets/&amp;lt;vnet&amp;gt;/subnets/&amp;lt;subnet&amp;gt;
 -dhcp-range start-address=10.0.1.100,end-address=10.0.1.200
 -dhcp-range start-address=10.0.2.100,end-address=10.0.2.200</pre>
</div></div>
<div class="paragraph">
<p>また、サブネットにゲートウェイを設定しておく必要があります。そうしないと
自動DHCPは機能しません。</p></div>
<div class="paragraph">
<p>DHCPプラグインは、設定された範囲内でのみIPAMからIPアドレスを割り当てます。</p></div>
<div class="paragraph">
<p><a href="#pvesdn_install_dhcp_ipam">dnsmasq DHCPプラグイン</a>のインストール手順も
必ず実行してください。</p></div>
</div>
<div class="sect3">
<h4 id="_plugins">12.13.2. プラグイン
<a class="headerlink" href="#_plugins" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="_dnsmasq_plugin">Dnsmasq プラグイン
<a class="headerlink" href="#_dnsmasq_plugin" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>現在、これが唯一のDHCPプラグインであるため、ゾーンでDHCPを有効化した際に使用されるプラグインとなります。</p></div>
<div class="paragraph">
<div class="title">インストール</div><p>インストールについては、<a href="#pvesdn_install_dhcp_ipam">DHCP IPAM</a>セクションを参照してください。</p></div>
<div class="paragraph">
<div class="title">設定</div><p>このプラグインは、dnsmasqがデプロイされる各ゾーンに対して新しいsystemdサービスを作成します。
サービスの名前は<span class="monospaced">dnsmasq@&amp;lt;zone&amp;gt;</span>です。このサービスのライフサイクルはDHCPプラグインによって管理されます。</p></div>
<div class="paragraph">
<p>プラグインは自動的に以下の設定ファイルを
<span class="monospaced">/etc/dnsmasq.d/&amp;lt;zone&amp;gt;</span> フォルダに生成します:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">00-default.conf</span></dt>
<dd>
<p>
これはdnsmasqインスタンスのデフォルトグローバル設定を含みます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">10-&amp;lt;ゾーン&amp;gt;-&amp;lt;サブネット_CIDR&amp;gt;.conf</span></dt>
<dd>
<p>
このファイルは、DHCP経由で設定されるDNSサーバーなど、サブネット固有のオプションを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">10-&amp;lt;ゾーン&amp;gt;-&amp;lt;サブネット_CIDR&amp;gt;.ranges.conf</span></dt>
<dd>
<p>
このファイルは、dnsmasqインスタンスのDHCP範囲を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ethers</span></dt>
<dd>
<p>
このファイルにはIPAMプラグインからのMACアドレスとIPのマッピングが含まれます。
これらのマッピングを上書きするには、このファイルを編集する代わりに、
dnsmasqプラグインによって上書きされるため、対応するIPAMプラグインを使用してください。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>上記ファイルはいずれも DHCP プラグインによって管理されるため、編集しないでください。
dnsmasq の設定をカスタマイズするには、設定フォルダ内に追加ファイル（例:<span class="monospaced">90-custom.conf</span>）を作成してください。
これらのファイルは dnsmasq DHCP プラグインによって変更されません。</p></div>
<div class="paragraph">
<p>設定ファイルは読み込まれた順序で適用されるため、カスタム設定ファイルに適切な名前を付けることで設定ディレクティブの実行順序を制御できます。</p></div>
<div class="paragraph">
<p>DHCPリースはファイル<span class="monospaced">/var/lib/misc/dnsmasq.&amp;lt;zone&amp;gt;.leases</span> に保存されます。</p></div>
<div class="paragraph">
<p>PVE IPAMプラグイン使用時、DHCPリースを更新・作成・削除できます。
詳細は<a href="#pvesdn_ipam_plugin_pveipam">PVE IPAMプラグインの</a>ドキュメントを参照してください。
他のIPAMプラグインでは現在DHCPリースの変更はサポートされていません。</p></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_firewall_integration">
<span>12.14. ファイアウォール統合</span>
<a class="headerlink" href="#pvesdn_firewall_integration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>SDNはProxmox VEファイアウォールと連携し、IPSetを自動生成します。
これらはファイアウォールルールの送信元/宛先フィールドで参照可能です。
この処理はVNetおよびIPAMエントリに対して自動的に行われます。</p></div>
<div class="sect3">
<h4 id="_vnets_and_subnets">12.14.1. VNet とサブネット
<a class="headerlink" href="#_vnets_and_subnets" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ファイアウォールは、各VNetに対してSDNスコープ内で以下のIPSetsを自動生成します:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">v</span>net-all</dt>
<dd>
<p>
  VNet内の全サブネットのCIDRを格納</p>
</dd>
<dt class="hdlist1">
vnet-gateway</dt>
<dd>
<p>
  VNet内の全サブネットのゲートウェイIPを含む</p>
</dd>
<dt class="hdlist1">
vnet-no-gateway</dt>
<dd>
<p>
  VNet内の全サブネットのCIDRを含みますが、ゲートウェイは除外されます</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">vnet-dhcp</span></dt>
<dd>
<p>
  VNet内のサブネットで構成されたすべてのDHCP範囲を含む</p>
</dd>
</dl></div>
<div class="paragraph">
<p>設定を変更するとIPSetsは自動更新されるため、
サブネット設定変更時にファイアウォールルールを更新する必要はありません。</p></div>
<div class="sect4">
<h5 id="_simple_zone_example">簡易ゾーン例
<a class="headerlink" href="#_simple_zone_example" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>以下のVNetとそのサブネット構成を想定します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/sdn/vnets.cfg

vnet: vnet0
        zone simple

# /etc/pve/sdn/subnets.cfg

subnet: simple-192.0.2.0-24
        vnet vnet0
        dhcp-range start-address=192.0.2.100,end-address=192.0.2.199
        ゲートウェイ 192.0.2.1

サブネット: simple-2001:db8::-64
        vnet vnet0
        dhcp-range start-address=2001:db8::1000,end-address=2001:db8::1999
        ゲートウェイ 2001:db8::1</pre>
</div></div>
<div class="paragraph">
<p>この例では、VNet<span class="monospaced">vnet0</span> に IPv4 サブネットを設定し、
IP 範囲を<em>192.0.2.0/24</em>、ゲートウェイを<em>192.0.2.1</em>、DHCP 範囲を
<em>192.0.2.100</em>～<em>192.0.2.199</em> としました。</p></div>
<div class="paragraph">
<p>さらに、IPv6サブネットを以下の設定で構成しました<em>：</em>
IP範囲：<em>2001:db8::/64</em>
ゲートウェイ：<em>2001:db8::1</em>
DHCP範囲：<em>2001:db8::1000</em>～<em>2001:db8::1999</em></p></div>
<div class="paragraph">
<p>vnet0 に対して自動生成される IP セットには、以下の要素が含まれます:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
vnet0-all</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<em>192.0.2.0/24</em></p>
</li>
<li>
<p>
<em>2001:db8::/64</em></p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
vnet0-gateway</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<em>192.0.2.1</em></p>
</li>
<li>
<p>
<em>2001:db8::1</em></p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
vnet0-no-gateway</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<em>192.0.2.0/24</em></p>
</li>
<li>
<p>
<em>2001:db8::/64</em></p>
</li>
<li>
<p>
<em>!192.0.2.1</em></p>
</li>
<li>
<p>
<em>!2001:db8::1</em></p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
vnet0-dhcp</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<em>192.0.2.100 - 192.0.2.199</em></p>
</li>
<li>
<p>
<em>2001:db8::1000 - 2001:db8::1999</em></p>
</li>
</ul></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect3">
<h4 id="_ipam">12.14.2. IPAM
<a class="headerlink" href="#_ipam" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>組み込みのPVE IPAMを使用している場合、ファイアウォールはIPAMにエントリを持つ各ゲストに対して自動的にIPsetを生成します。ID 100のゲストに対応するIPset<span class="monospaced">はguest-ipam-100</span>となり、すべてのIPAMエントリのIPアドレスを含みます。したがって、ゲスト100が複数のVNetに属している場合、
そのIPセットには<strong>全</strong>VNetのIPアドレスが含まれます。</p></div>
<div class="paragraph">
<p>エントリが追加/更新/削除されると、対応するIPセットも
それに応じて更新されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAMVUlEQVRogdWZeXDVVZbHP7/f27JB
wtJIiCERRFlbx5FuHRrRBgtBsRIwCCOrFmGmiDBjYVNlQlgiQjU6IjI4xLJxGf5QGp0Cbaftsu3R
hu6aYXqgLZoWEsjyyDP7S972e7/l3vnj5cW3Ji9M/zOn6lRS997fvd/vueece+59ipSS/89iv5mP
ZEQQQsS23RQARVEAUFUVRVFQog0ZyogJSClld3c327Ztw7IsLMuKto90KgBsNhtVVVXMnj2bvLw8
7Ha7HBEJKWXGKoSQXV1dcsuWLfLSpUsyKkKIIdWyrLTqdrvlU089Jc+cOSM9Ho8Mh8NSCCEzxTRi
8JWVlbKtre0vAt6yLGmapmxtbZXr1q2TZ86ckW1tbSMikTH4GzduyKqqqkHwsSA1TZOhUChOg8Hg
oBqGIQ3DSAk+VleuXDliEspwviullD09PbzwwgscO3Yszt91XScQCNDZ2YlhGIPfuFwu7Pb48FJV
lZycnEG/z8/PRwiBqqqDYzweD88//zyrV69m7ty5jBs3DofDMWRgD0lASik9Hg979uzh2LFjcYEa
CoVob2/n2q9+hbZ585BGSCWltbVMr61NtSYbN25k7dq1zJkzZ1gSaqrGWPD79+9PAh8MBuns7OTi
e+8R2rwZCYOaqTTt3cuf6+qSwAMcP36co0eP8vXXX9Pd3Y1hGMg0lk65A1HwdXV1vPHGG0mW7+jo
4A8/+xn2BAAAI0riQOnu3cyork7Zt3btWtavX89dd92VdieSCEgppdvt5sCBAxw5ciSuLxQK0dTU
RMOHHyJ37hwh1NSiAKU7djDzxRdT9q9YsYJt27YxY8aMlCTiCEgp5eXLl6mvr+fVV1+NmygYDNLW
1sY3J09ipLEYQDPw2sBfCTwMLARKgKwhiNxWU8OsXbvi2qLYnnzySSorK1PvRGyqvH79uty6dWtS
Lg8EAvLKlSvyo1275M8hSV8H+eMBvRPkP9Vslp0tV6W3u12+c7hOTgT5NyAXgtwE8gTIUyn0D9XV
0jAMqet6klZUVMjPP/88KcWqUcs3NjZy+PBhDh06FGeFqNtcOnECY8+euICVwDWgFtj/m1/wD+8f
5xtg6uy5ZI+5BSkkU6fexgu7tvLWhd/x1tXL5P/905wAggnzSODavn388Sc/SblDL7/8Mq+99hqX
L1+OC2zb7t27uX79+u7Dhw+ndJvW1lYaP/qI0EDKS1z0XeDjC7/l9llz+d6EWxjv0imdcgeFRcVo
fR46vm1Cx8ndP5hP3qjR/GDuX/GbC5/iberl1qirxGjv73+PYRjc8tBDcVhGjRpFRUUF27dvp7i4
mPz8fFwuV2QHVq1aldLyDQ0NXDt5En91NRIQCRqNHld2HsLUCfu6GD9mNIoVQggDy9RQpYLTbkdV
7Vh6CH9vJ/fcfz/vALsAN2AlzHv1wAEu1tTExUI0Hl555RXq6upobm4mEAhECEyePDkOvK7rtLS0
cOP0aby1tUnAo2oNkFAUSTjoRfN+ix7wgjRBShACVVFQRGSkHvTypwtnmXHPQhrbb3D0k1McAdpi
DBLVhp/+lIvV1UlV7oQJE8jNzcXtduPz+ZIPMtM0aWhooPH99+mtrU1ymVRqUxUQFlJYSBFGCivG
OSyEaSCFAGlhd+Vy7w/n43BmM3POXWx69hl8AyMTDXTl4EEu7t2bCBGAQCCAruupCdjtdrp3705r
+ViN22YhsUwdyzRBCpACyzIRMnpngCxXNjYlMk4L+ggoYXxp5pbAlX37cDgcSQSEEAxmoVgQg/9n
AP67bVdAUcFmQ3W6IgtIiWUKLCGwLGvQj69e+m+EsBB6iGB/N/3e9oyNlIgRYm5kiR2JH0L6MkFY
Ei0UQKAycdJUbIodT3Mjpu6n3xfCptoRlomQCqZpRkhLCykMhLBQSV1HJbalKnvSF3MpNO0OSIEw
DWyuPCaVzCRv7ER8Ph+mtJM35lZsdjvuxktYhobDkYOCgqJEDWLLaAfSVc1p78SJO2AAvUBggLUN
KIx2Kgqjv3crY2wOiqaqKKoKihKJCctCC/npbW+jq7sbS7UjkGCZCCkQQkdJsV6mRWHGBH4HLHpx
F3LcGDq6u7nw2S85++V/4gb0kB9hFoAZwuZwgc2BqjpQVRWbzYXd4cDlysHn7WJi0W2EfH24XA6E
jKySqhTPtDRPIjB4XUtoPw3sKV/O+KJipJT4V63mq3/7Obu21/LN/5xl9l/PIys7G2fOaBS7E5vN
QrU7UW0KNlUFp5P8MeO5/8HFhPo7CXr7MMIaQW8neSkMlqnEEYj1s8QJbwXaWpopmDgJh93OqHGF
LFy9jjunTeHNo2uAvUy54/uMuaUYV24BUpVYpoVEwaY4UVUbitNJ9ugxOBw2tEAPfX29QCjuVB9O
EmNBTdeRGEj3A56OdkwtgDDCCKFjz8ql6N55/G3VcRouX+SXH72Ht6udcCg4cJiJSPIn8oCloIKU
KAhURUUIiVCjx128pjtrEiVtFkrMNNOBA+s34XG3YIRDSMtAkSbOrDzuvOchHnmiklEFY3n76G7O
f/nv9Ht7EMJCSjGoljCxjOBAnaSjhYPowevDZrx04FMSGLwnJEzmAOYCn33wAUYoiGXoSMsEoeNw
ZTO2aDrzFpWxck0VJVOn4fd2E/T7oneNyOFlGkjLwNTD6FoILRQEa/hDcyhJIuB0OlFVNeVE04B3
XjnC+d9+hRYKYJlhpDBBGDidDiaUfp/xk24nJ3c0eaPzsKsgzEhtZJkGIuzDNDRCAR99fb309XYh
NAYPsnQ6IgJSSgoKCihavDilJZ4Aajf8HVf/fAnLCCNNAyktECaqIsgbV8So0WMHrn2RGLBMHREO
YBg6eiiIFgzQ7/US8vmYoEDuENa/u6oqcwJRPysoKOC+N9+kcNGiJGvkAQuADY+twn3tCuFg/4CV
DbB0VKHhzHbhdGVhs6kgDKTuR9f86KEAWtBHd0c73p52pB5Av5KewJxnnmHeoUOEw+EkjHEEYi8M
EHlFKyws5IfHjlG4cGHSxJOA1cATPy7nT388j+73YoYDCEuP1DhSRrKOlFhmmLAWQNMCBHw9tHtu
8K2nBcsI8uGxf8HoiRBINNTtjz7KQ/X1xL6iRDHGvubZAfr7+1Nuz+TJk6G+nv/atInmX/86rq8A
WAlUrahk/Fio/8XHjM4fi93pHCgRFCzLQtd1tFAQLeCjs9NNb4cHxdL44J8PozfD7XyXRqNy97p1
PPz220gp0XU9zriKogw+SaqqGtmB48ePU15enkRASklRURH31tcz6cEHk1JrAfAUcEcPLLjvMU69
/694uzsI+X3093TS5blBl8eNt72VHk8Tfd9eR+vv4MQ/HkZpiJwttgTL3/Hoo2nBNzY2smjRIhYs
WEBBQQEulyvyLuT3+2VTUxM7d+7k5MmTKXNuS0sL555+mtYvv0zqE0A7kavhqFL4oAlCCWOygGIi
qTiHyMnuTBgz/bHHKDt9GillnN8D+P1+ysrKWLJkCdOmTWPWrFmUlpZGCAghpN/vp7m5mZqaGl5/
/XUKCwtJFLfbzX+sX8+Nr75K6rtZiXr49KVLKf/4Y4QQ6LqeBP6RRx6hvLycadOmMXPmTEpKSsjN
zf3uZS6WRHV1NadOnUpaTEpJa2sr5zZupOkmSaQqk2csWcLyTz4BQNO0uL7GxkbWr1+fErzNZlMG
w1lVVSUvL4+SkhL27dvH8uXL8Xg8ceABiouLue+ttyieN2+IK2Z6TRx/5+LFacE3NDRQWVmZFjwk
nAOxJF566SW2bNnChQsXkmKipKSEB959l9vmzcvo1pZOpz/8ME98+mla8Bs2bGDZsmVpwUOa5/VE
d0oXE319fXxWXs43Z88m9Q0n03/0I1YPJIRE8OfOnWPHjh2UlZUNCT4tgUQSO3fupKqqigceeGCw
P/a7VM8emUg0VcbK+fPn2bp1KytWrBgW/JAEEknU1NTw7LPPMn/+/GFBZQI8lZw/f57nnnuO5cuX
M2XKlGHBD0sgkURdXR2PP/44FRUVNwV+qP7Tp09z8ODBjNxmRAQSSRw4cIBly5axdOnSvwh4RVH4
4osv2L9/P2VlZRlbfkQEEkls376djo4OQqHE83bk4nK5EEKwZs0aSktLRwR+RATgOxItLS1cu3aN
vr6+wTfK/4tEfzeeMmUKkydPzhg8jJAAREgEg0H6+vrQNC2pFL8ZUVWVrKws8vPzycnJQVXVjH/s
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">ゲストの全エントリを削除する際、ファイアウォールルールが自動生成されたIPSetを参照している場合、
ファイアウォールは存在しないIPSetを参照するためルールセットの更新に失敗します。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_setup_examples">
<span>12.15. 例</span>
<a class="headerlink" href="#pvesdn_setup_examples" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>本セクションでは、一般的なSDNユースケース向けに調整された複数の設定例を紹介します。具体的な実装例を提供し、利用可能な設定オプションの理解を深めるための追加情報を目的としています。</p></div>
<div class="sect3">
<h4 id="pvesdn_setup_example_simple">12.15.1. 簡易ゾーンの例
<a class="headerlink" href="#pvesdn_setup_example_simple" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>シンプルゾーンネットワークは、単一ホスト上のゲストが相互接続するための
分離ネットワークを構築します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">ゲスト間の接続は、すべてのゲストが同一ホスト上に存在する場合に限り可能であり、
他のノード上では到達できません。</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">simple</span> という名前のシンプルなゾーンを作成します。</p>
</li>
<li>
<p>
<span class="monospaced">vnet1</span> という名前の VNet を追加します。</p>
</li>
<li>
<p>
ゲートウェイとSNATオプションを有効にしたサブネットを作成します。</p>
</li>
<li>
<p>
これによりノード上にネットワークブリッジ<span class="monospaced">vnet1</span>が作成されます。このブリッジをネットワークに参加させるゲストに割り当て、IP アドレスを設定します。</p>
</li>
</ul></div>
<div class="paragraph">
<p>2台のVMにおけるネットワークインターフェース設定は以下のように構成され、
10.0.1.0/24ネットワーク経由での通信を可能とします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>allow-hotplug ens19
iface ens19 inet static
        address 10.0.1.14/24</pre>
</div></div>
<div class="listingblock">
<div class="content monospaced">
<pre>allow-hotplug ens19
iface ens19 inet static
        address 10.0.1.15/24</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pvesdn_setup_example_nat">12.15.2. 送信元NATの例
<a class="headerlink" href="#pvesdn_setup_example_nat" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>シンプル ネットワーク ゾーン内のゲストに送信接続を許可する場合、
シンプル ゾーンは送信元 NAT (SNAT) オプションを提供します。</p></div>
<div class="paragraph">
<p><a href="#pvesdn_setup_example_simple">上記の</a>設定を基に、VNet<span class="monospaced">vnet1</span> にサブネットを追加し、ゲートウェイ IP を設定して SNAT オプションを有効にします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>サブネット: 172.16.0.0/24
ゲートウェイ: 172.16.0.1
SNAT: チェック済み</pre>
</div></div>
<div class="paragraph">
<p>ゲストでは、サブネットのIP範囲内で静的IPアドレスを設定します。</p></div>
<div class="paragraph">
<p>ノード自体はゲートウェイIP<em>172.16.0.1</em>でこのネットワークに参加し、
サブネット範囲内のゲスト向けNATゲートウェイとして機能します。</p></div>
</div>
<div class="sect3">
<h4 id="pvesdn_setup_example_vlan">12.15.3. VLAN設定例
<a class="headerlink" href="#pvesdn_setup_example_vlan" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>異なるノード上のVMが分離ネットワーク経由で通信する必要がある場合、
VLANゾーンはVLANタグを用いたネットワークレベルの分離を可能にします。</p></div>
<div class="paragraph">
<p><span class="monospaced">myvlanzone</span> という名前の VLAN ゾーンを作成します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: myvlanzone
Bridge: vmbr0</pre>
</div></div>
<div class="paragraph">
<p>VLANタグ10と事前作成済みの<span class="monospaced">myvlanzone</span>を指定し、<span class="monospaced">myvnet1という</span>VNetを作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: myvnet1
Zone: myvlanzone
Tag: 10</pre>
</div></div>
<div class="paragraph">
<p>メインのSDNパネルから設定を適用し、各ノードにVNetをローカルに作成します。</p></div>
<div class="paragraph">
<p>node1上にDebianベースの仮想マシン(<em>vm1</em>)を作成し、<span class="monospaced">myvnet1上に</span>vNICを割り当てます。</p></div>
<div class="paragraph">
<p>このVMには以下のネットワーク設定を使用します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto eth0
iface eth0 inet static
        address 10.0.3.100/24</pre>
</div></div>
<div class="paragraph">
<p>ノード2に2台目の仮想マシン(<em>vm2</em>)を作成し、vm1と同じVNet<span class="monospaced">myvnet1に</span>vNICを接続する。</p></div>
<div class="paragraph">
<p>このVMには以下のネットワーク構成を使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto eth0
iface eth0 inet static
        address 10.0.3.101/24</pre>
</div></div>
<div class="paragraph">
<p>これにより、両VM間で当該ネットワーク経由のping通信が可能となるはずです。</p></div>
</div>
<div class="sect3">
<h4 id="pvesdn_setup_example_qinq">12.15.4. QinQ設定例
<a class="headerlink" href="#pvesdn_setup_example_qinq" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>この例では、2つのQinQゾーンを設定し、各ゾーンに2台のVMを追加して、
より分離されたVLANの設定を可能にする追加のVLANタグ層を実証します。</p></div>
<div class="paragraph">
<p>この構成の典型的なユースケースは、ホスティングプロバイダーが顧客に
VM間通信用の分離ネットワークを提供しつつ、他顧客のVMから隔離する
環境です。</p></div>
<div class="paragraph">
<p>サービスVLAN 20<span class="monospaced">でqinqzone1という</span>名前のQinQゾーンを作成</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: qinqzone1
Bridge: vmbr0
Service VLAN: 20</pre>
</div></div>
<div class="paragraph">
<p>サービスVLAN 30を持つ別のQinQゾーンq<span class="monospaced">in</span>qzone2を作成</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: qinqzone2
Bridge: vmbr0
Service VLAN: 30</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">qinqzone1</span>ゾーンに VLAN-ID 100 の<span class="monospaced">myvnet1</span>という名前の VNet を作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: qinqvnet1
ゾーン: qinqzone1
タグ: 100</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">qinqzone2</span>ゾーンに VLAN-ID 100 の<span class="monospaced">myvnet2</span>を作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: qinqvnet2
ゾーン: qinqzone2
タグ: 100</pre>
</div></div>
<div class="paragraph">
<p>メインのSDNウェブインターフェースパネルで設定を適用し、各ノードにローカルでVNetを作成します。</p></div>
<div class="paragraph">
<p>Debianベースの仮想マシンを4台（vm1、vm2、vm3、vm4）作成し、vm1とvm2には<span class="monospaced">ブリッジqinqvnet1を</span>、vm3とvm4には<span class="monospaced">ブリッジqinqvnet2を</span>ネットワークインターフェースとして追加する。</p></div>
<div class="paragraph">
<p>VM内部で、インターフェースのIPアドレスを設定します（例：<span class="monospaced">/etc/network/interfaces</span>経由）。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto eth0
iface eth0 inet static
        address 10.0.3.101/24</pre>
</div></div>
<div class="paragraph">
<p>4台のVM全てに<em>10.0.3.</em><em>101から10.0.3.104の</em>範囲のIPアドレスを設定する。</p></div>
<div class="paragraph">
<p>これで、<em>vm1とvm2の間</em>、<em>およびvm3とvm4</em>の間でpingが通るはずです。ただし、<em>vm1とvm2はvm3やvm</em> <em>4</em> <em>とは</em>異なるゾーン（異なるサービスVLAN）にあるため、<em>互いに</em><em>ping</em>できません。</p></div>
</div>
<div class="sect3">
<h4 id="pvesdn_setup_example_vxlan">12.15.5. VXLAN設定例
<a class="headerlink" href="#pvesdn_setup_example_vxlan" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>この例では、3ノードのクラスタを想定し、ノードIPアドレスは
192.168.0.1、192.168.0.2、192.168.0.3です。</p></div>
<div class="paragraph">
<p><span class="monospaced">myvxlanzone</span>という名前の VXLAN ゾーンを作成し、ノードの全 IP アドレスを
ピアアドレスリストに追加します。デフォルトの MTU 1450 を使用するか、必要に応じて設定してください。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: myvxlanzone
Peers Address List: 192.168.0.1,192.168.0.2,192.168.0.3</pre>
</div></div>
<div class="paragraph">
<p>以前に作成したVXLANゾーン<span class="monospaced">myvxlanzone</span>を使用して、<span class="monospaced">vxvnet1</span>という名前のVNetを作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: vxvnet1
Zone: myvxlanzone
Tag: 100000</pre>
</div></div>
<div class="paragraph">
<p>各ノード上でローカルにVNetを作成するため、メインSDNウェブインターフェースパネルで設定を適用する。</p></div>
<div class="paragraph">
<p>node1上にDebianベースの仮想マシン(<em>vm1</em>)を作成し、<span class="monospaced">vxvnet1上に</span>vNICを設定する。</p></div>
<div class="paragraph">
<p>このVMには以下のネットワーク設定を使用（MTUが低い点に注意）。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto eth0
iface eth0 inet static
        address 10.0.3.100/24
        mtu 1450</pre>
</div></div>
<div class="paragraph">
<p>ノード3に2台目の仮想マシン(<em>vm2</em>)を作成し、vm1と同じVNet<span class="monospaced">vxvnet1に</span>vNICを接続する。</p></div>
<div class="paragraph">
<p>このVMには以下のネットワーク設定を使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto eth0
iface eth0 inet static
        address 10.0.3.101/24
        mtu 1450</pre>
</div></div>
<div class="paragraph">
<p>その後、<em>vm1</em>と<em>vm2</em> 間で ping が通るはずです。</p></div>
</div>
<div class="sect3">
<h4 id="pvesdn_setup_example_evpn">12.15.6. EVPN設定例
<a class="headerlink" href="#pvesdn_setup_example_evpn" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>この例では、3ノード（node1、node2、node3）のクラスタを想定し、IPアドレスは
192.168.0.1、192.168.0.2、192.168.0.3です。</p></div>
<div class="paragraph">
<p>プライベートASN番号を使用し、上記のノードアドレスをピアとして
EVPNコントローラを作成します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: myevpnctl
ASN#: 65000
Peers: 192.168.0.1,192.168.0.2,192.168.0.3</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">myevpnzone</span> という名前の EVPN ゾーンを作成し、
以前に作成した EVPN コントローラを割り当て、
<em>node1</em>と<em>node2</em>を出口ノードとして定義します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: myevpnzone
VRF VXLAN タグ: 10000
コントローラー: myevpnctl
MTU: 1450
VNet MAC アドレス: 32:F4:05:FE:6C:0A
出口ノード: node1,node2</pre>
</div></div>
<div class="paragraph">
<p>EVPNゾーン<span class="monospaced">myevpnzone</span>を使用して、最初のVNet<span class="monospaced">myvnet1を作成</span>する。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: myvnet1
ゾーン: myevpnzone
タグ: 11000</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">myvnet1</span>上にサブネットを作成:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>サブネット: 10.0.1.0/24
ゲートウェイ: 10.0.1.1</pre>
</div></div>
<div class="paragraph">
<p>同じEVPNゾーン<span class="monospaced">myevpnzoneを使用して</span>、2つ目のVNet<span class="monospaced">myvnet2を作成します</span>。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ID: myvnet2
ゾーン: myevpnzone
タグ: 12000</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">myvnet2上に</span>別のサブネットを作成:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>サブネット: 10.0.2.0/24
ゲートウェイ: 10.0.2.1</pre>
</div></div>
<div class="paragraph">
<p>メインSDNウェブインターフェースパネルから設定を適用し、各ノードにローカルでVNetを作成し、FRR設定を生成します。</p></div>
<div class="paragraph">
<p>node1上にDebianベースの仮想マシン(<em>vm1</em>)を作成し、vNIC<span class="monospaced">をmyvnet1</span>に接続する。</p></div>
<div class="paragraph">
<p><em>vm1には</em>以下のネットワーク設定を使用:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto eth0
iface eth0 inet static
        address 10.0.1.100/24
        gateway 10.0.1.1
        mtu 1450</pre>
</div></div>
<div class="paragraph">
<p>ノード2に2台目の仮想マシン(<em>vm2</em>)を作成し、もう一方のVNet<span class="monospaced">myvnet2に</span>vNICを接続する。</p></div>
<div class="paragraph">
<p><em>vm2には</em>以下のネットワーク設定を使用します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>auto eth0
iface eth0 inet static
        address 10.0.2.100/24
        gateway 10.0.2.1
        mtu 1450</pre>
</div></div>
<div class="paragraph">
<p>これでvm1からvm2へ、vm2からvm1へpingが通るはずです。</p></div>
<div class="paragraph">
<p>ゲートウェイではないノード3<em>上のvm2から</em>外部IPをpingした場合、パケットは設定済みの<em>myvnet2</em>ゲートウェイを経由し、出口ノード（<em>node1または</em> <em>node2</em>）へルーティングされます。その後、node1またはnode2に設定されたデフォルトゲートウェイを経由してノードを離れます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">外部ゲートウェイ上のノード1およびノード2に、<em>10.0.1.0/24</em>および<em>10.0.2.0/24</em>ネットワークへの逆ルートを追加する必要があります。これによりパブリックネットワークからの返信が可能になります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>外部BGPルーターを設定している場合、BGP-EVPNルート（この例では10.0.1.0/24と10.0.2.0/24）は動的にアドバンスされます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pvesdn_notes">
<span>12.16.</span>注意事項
<a class="headerlink" href="#pvesdn_notes" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_multiple_evpn_exit_nodes">12.16.1. 複数の EVPN エグジットノード
<a class="headerlink" href="#_multiple_evpn_exit_nodes" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>複数のゲートウェイノードがある場合、<span class="monospaced">rp_filter</span>（厳格な逆パスフィルタ）オプションを無効にする必要があります。これは、パケットが1つのノードに到着しても、別のノードから送信される可能性があるためです。</p></div>
<div class="paragraph">
<p><span class="monospaced">/etc/sysctl.conf</span> に以下を追加します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>net.ipv4.conf.default.rp_filter=0
net.ipv4.conf.all.rp_filter=0</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_vxlan_ipsec_encryption">12.16.2. VXLAN IPSEC 暗号化
<a class="headerlink" href="#_vxlan_ipsec_encryption" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VXLAN上にIPSEC暗号化を追加する場合、この例<span class="monospaced">ではstrongswan</span>の使用方法を示します。</p></div>
<div class="paragraph">
<p>暗号化処理のため、IPv4ではさらに60バイト、IPv6では80バイト<em>のMTU</em>削減が必要です。</p></div>
<div class="paragraph">
<p>デフォルトの実際のMTUが1500の場合、1370のMTUを使用する必要があります（1370 + 80（IPSEC）+ 50（VXLAN）= 1500）。</p></div>
<div class="paragraph">
<p>ホストにstrongswanをインストールします。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt install strongswan</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">/etc/ipsec.conf</span> に設定を追加します。VXLAN UDP ポート<em>4789</em> からのトラフィックのみを暗号化する必要があります。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>conn %default
    ike=aes256-sha1-modp1024!  # 現代のハードウェアで最速かつ合理的なセキュリティを持つ暗号化方式
    esp=aes256-sha1!
    leftfirewall=yes           # Proxmox VE ファイアウォールルール使用時に必須

conn output
    rightsubnet=%dynamic[udp/4789]
    right=%any
    type=transport
    authby=psk
    auto=route

conn input
    leftsubnet=%dynamic[udp/4789]
    type=transport
    authby=psk
    auto=route</pre>
</div></div>
<div class="paragraph">
<p>事前共有鍵を生成します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>openssl rand -base64 128</pre>
</div></div>
<div class="paragraph">
<p>生成した鍵<span class="monospaced">を/etc/ipsec.secretsに</span>追加し、ファイル内容を以下のようにします：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>: PSK &amp;lt;generatedbase64key&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>VXLANネットワークに参加する全ノードにPSKと設定をコピーする。</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_pve_firewall">
13. Proxmox VE ファイアウォール
<a class="headerlink" href="#chapter_pve_firewall" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VE ファイアウォールは、IT インフラストラクチャを保護する簡単な方法を提供します。クラスタ内のすべてのホストに対してファイアウォールルールを設定したり、仮想マシンやコンテナ向けのルールを定義したりできます。ファイアウォールマクロ、セキュリティグループ、IP セット、エイリアスなどの機能により、この作業が容易になります。</p></div>
<div class="paragraph">
<p>すべての設定はクラスタファイルシステムに保存されますが、
<span class="monospaced">iptablesベースの</span>ファイアウォールサービスは各クラスタノード上で動作するため、
仮想マシン間の完全な分離を実現します。この分散型システムは、
中央集権型ファイアウォールソリューションよりもはるかに高い帯域幅を提供します。</p></div>
<div class="paragraph">
<p>ファイアウォールはIPv4とIPv6を完全にサポートします。IPv6サポートは完全に透過的であり、デフォルトで両プロトコルのトラフィックをフィルタリングします。したがって、IPv6用に別々のルールセットを維持する必要はありません。</p></div>
<div class="sect2">
<h3 id="_directions_amp_zones">
<span>13.1. 方向とゾーン</span>
<a class="headerlink" href="#_directions_amp_zones" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE ファイアウォールはネットワークを複数の論理ゾーンにグループ化します。各ゾーンに対して個別にルールを定義できます。ゾーンに応じて、着信トラフィック、発信トラフィック、または転送トラフィックに対するルールを定義できます。</p></div>
<div class="sect3">
<h4 id="_directions">13.1.1. 方向
<a class="headerlink" href="#_directions" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ゾーンのルール定義では、3つの方向から選択できます:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
In</dt>
<dd>
<p>
ゾーンに到着するトラフィック。</p>
</dd>
<dt class="hdlist1">
受信</dt>
<dd>
<p>
ゾーンから発信されるトラフィック。</p>
</dd>
<dt class="hdlist1">
転送</dt>
<dd>
<p>
ゾーンを通過するトラフィック。ホストゾーンでは、
（ホストがゲートウェイとして機能する場合やNATを実行する場合に）ルーティングされたトラフィックが該当します。
VNetレベルでは、ブリッジ接続されたネットワークインターフェースからの/へのトラフィックを含む、
VNetを通過するすべてのトラフィックに影響します。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">転送トラフィックのルール作成は、現在新しい<a href="#pve_firewall_nft">nftablesベースのproxmox-firewall</a>使用時のみ可能です。
既存の<span class="monospaced">pve-firewallでは</span>転送ルールは無視され、効果はありません！</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_zones">13.1.2. ゾーン
<a class="headerlink" href="#_zones" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ファイアウォールルールを定義できるゾーンは3種類あります：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ホスト</dt>
<dd>
<p>
ホストとの間で送受信されるトラフィック、またはホストによって転送されるトラフィック。
このゾーンのルールは、データセンターレベルまたはホストレベルで定義できます。
ホストレベルのルールはデータセンターレベルのルールよりも優先されます。</p>
</dd>
<dt class="hdlist1">
VM</dt>
<dd>
<p>
VMまたはCTへの/からのトラフィック。
転送トラフィックに対するルールは定義できず、受信/送信トラフィックのみ定義可能です。</p>
</dd>
<dt class="hdlist1">
仮想ネットワーク</dt>
<dd>
<p>
SDN VNet 経由のトラフィック（ゲスト間、またはホストとゲスト間の双方向）。
このトラフィックは常に転送トラフィックであるため、転送方向のルールのみ作成可能です。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">VNetレベルでのルール作成は、現在新しい<a href="#pve_firewall_nft">nftablesベースのproxmox-firewall</a>を使用している場合のみ可能です。VNetレベルのルールは標準の<span class="monospaced">pve-firewall</span>では無視され、効果はありません！</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_files">
<span>13.2. 設定ファイル</span>
<a class="headerlink" href="#_configuration_files" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ファイアウォール関連の全設定は Proxmox クラスタのファイルシステムに保存されます。
そのため、これらのファイルは自動的に全クラスタノードに配布され、
<span class="monospaced">pve-firewall</span>サービスは変更時に基盤となる<span class="monospaced">iptables</span>ルールを自動更新します。</p></div>
<div class="paragraph">
<p>GUI（例：<strong>データセンター</strong>→<strong>ファイアウォール</strong>、
または<strong>ノード</strong>→<strong>ファイアウォール</strong>）で設定するか、
お好みのエディタで設定ファイルを直接編集できます。</p></div>
<div class="paragraph">
<p>ファイアウォール設定ファイルはキーと値のペアで構成されるセクションを含みます。
<span class="monospaced">#</span>で始まる行と空白行はコメントとして扱われます。
セクションは<span class="monospaced">[</span>と<span class="monospaced">]</span> で囲まれたセクション名を含むヘッダー行で始まります。</p></div>
<div class="sect3">
<h4 id="pve_firewall_cluster_wide_setup">13.2.1. クラスタ全体の設定
<a class="headerlink" href="#pve_firewall_cluster_wide_setup" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>クラスタ全体のファイアウォール設定は以下に保存されます:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>/etc/pve/firewall/cluster.fw</pre>
</div></div>
<div class="paragraph">
<p>設定には以下のセクションを含めることができます:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">[オプション]</span></dt>
<dd>
<p>
これはクラスタ全体のファイアウォールオプションを設定するために使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ebtables</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
クラスタ全体で ebtables ルールを有効化します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">enable</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
クラスタ全体のファイアウォールを有効化または無効化します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_ratelimit</span>:<span class="monospaced">[enable=]&amp;lt;1|0&amp;gt; [,burst=&amp;lt;integer&amp;gt;] [,rate=&amp;lt;rate&amp;gt;]</span></dt>
<dd>
<p>
レート制限設定のログ記録</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">burst=&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">5</span>)</dt>
<dd>
<p>
レート適用前に常にログ記録される初期バースト分</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">enable=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ログレート制限の有効化/無効化</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rate=&amp;lt;rate&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1/秒</span>)</dt>
<dd>
<p>
バーストバケットが補充される頻度</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">policy_forward</span>:<span class="monospaced">&amp;lt;ACCEPT | DROP&amp;gt;</span></dt>
<dd>
<p>
転送ポリシー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">policy_in</span>:<span class="monospaced">&amp;lt;ACCEPT | DROP | REJECT&amp;gt;</span></dt>
<dd>
<p>
入力ポリシー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">policy_out</span>:<span class="monospaced">&amp;lt;ACCEPT | DROP | REJECT&amp;gt;</span></dt>
<dd>
<p>
出力ポリシー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">[RULES]</span></dt>
<dd>
<p>
このセクションには、すべてのノードに対するクラスタ全体のファイアウォールルールが含まれます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">[IPSET &amp;lt;name&amp;gt;]</span></dt>
<dd>
<p>
クラスタ全体のIPセット定義。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">[GROUP &amp;lt;name&amp;gt;]</span></dt>
<dd>
<p>
クラスタ全体のセキュリティグループ定義。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">[ALIASES]</span></dt>
<dd>
<p>
クラスタ全体のエイリアス定義。</p>
</dd>
</dl></div>
<div class="sect4">
<h5 id="_enabling_the_firewall">ファイアウォールの有効化<a class="headerlink" href="#_enabling_the_firewall" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ファイアウォールはデフォルトで完全に無効化されているため、
ここで有効化オプションを設定する必要があります:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[OPTIONS]
# ファイアウォールを有効化（クラスタ全体の設定、デフォルトは無効）
enable: 1</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">ファイアウォールを有効化すると、デフォルトですべてのホストへのトラフィックがブロックされます。例外はローカルネットワークからのWebGUI(8006)とssh(22)のみです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>Proxmox VEホストをリモートから管理する場合、
それらのリモートIPからWeb GUI（ポート8006）へのトラフィックを許可するルールを作成する必要があります。
SSH（ポート22）やSPICE（ポート3128）の許可も検討してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">ファイアウォールを有効化する前に、
Proxmox VEホストのいずれかにSSH接続を確立してください。
これにより、問題が発生した場合でもホストへのアクセスを維持できます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>この作業を簡略化するには、代わりに「management」という名前のIPSetを作成し、
そこにすべてのリモートIPを追加します。これにより、リモートからGUIにアクセスするために必要な
すべてのファイアウォールルールが自動的に作成されます。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pve_firewall_host_specific_configuration">13.2.2. ホスト固有設定
<a class="headerlink" href="#pve_firewall_host_specific_configuration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ホスト関連設定は以下から読み込まれます:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>/etc/pve/nodes/&amp;lt;nodename&amp;gt;/host.fw</pre>
</div></div>
<div class="paragraph">
<p>これは、<span class="monospaced">cluster.fw設定</span>のルールを上書きしたい場合に有用です。
ログの詳細度を上げることもでき、netfilter関連のオプションを設定できます。
設定には以下のセクションを含めることができます:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">[オプション]</span></dt>
<dd>
<p>
ホスト関連のファイアウォールオプションを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">enable</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ホストファイアウォールルールを有効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_level_forward</span>:<span class="monospaced">&amp;lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&amp;gt;</span></dt>
<dd>
<p>
転送トラフィックのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_level_in</span>:<span class="monospaced">&amp;lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&amp;gt;</span></dt>
<dd>
<p>
着信トラフィックのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_level_out</span>:<span class="monospaced">&amp;lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&amp;gt;</span></dt>
<dd>
<p>
送信トラフィックのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_nf_conntrack</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
接続追跡情報のログ記録を有効化します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ndp</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
NDP（ネイバーディスカバリプロトコル）を有効にする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nf_conntrack_allow_invalid</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
接続追跡において無効なパケットを許可する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nf_conntrack_helpers</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em>``)</dt>
<dd>
<p>
特定プロトコル用の接続追跡ヘルパーを有効化。サポートプロトコル: amanda, ftp, irc, netbios-ns, pptp, sane, sip, snmp, tftp</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nf_conntrack_max</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (32768 - N)</span>(<em>デフォルト =</em> <span class="monospaced">262144</span>)</dt>
<dd>
<p>
追跡可能な接続の最大数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nf_conntrack_tcp_timeout_established</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (7875 - N)</span>(<em>default =</em> <span class="monospaced">432000</span>)</dt>
<dd>
<p>
接続追跡確立タイムアウト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nf_conntrack_tcp_timeout_syn_recv</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (30 - 60)</span>(<em>デフォルト =</em> <span class="monospaced">60</span>)</dt>
<dd>
<p>
接続追跡のSYN受信タイムアウト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nftables</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
nftablesベースのファイアウォールを有効化（技術プレビュー）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nosmurfs</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
SMURFSフィルタを有効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">protection_synflood</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
SYNフラッド保護を有効化</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">protection_synflood_burst</span>:<span class="monospaced">&amp;lt;integer&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1000</span>)</dt>
<dd>
<p>
IP送信元ごとのSYNフラッド保護レートバースト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">protection_synflood_rate</span>:<span class="monospaced">&amp;lt;integer&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">200</span>)</dt>
<dd>
<p>
IP送信元ごとのSYNフラッド保護レート（SYN/秒）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">smurf_log_level</span>:<span class="monospaced">&amp;lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&amp;gt;</span></dt>
<dd>
<p>
SMURFSフィルターのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">tcp_flags_log_level</span>:<span class="monospaced">&amp;lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&amp;gt;</span></dt>
<dd>
<p>
不正なTCPフラグフィルターのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">tcpflags</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
不正なTCPフラグの組み合わせをフィルタリングします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">[RULES]</span></dt>
<dd>
<p>
このセクションにはホスト固有のファイアウォールルールが含まれます。</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="pve_firewall_vm_container_configuration">13.2.3. VM/コンテナ設定
<a class="headerlink" href="#pve_firewall_vm_container_configuration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VMファイアウォール設定は以下から読み込まれます:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>/etc/pve/firewall/&amp;lt;VMID&amp;gt;.fw</pre>
</div></div>
<div class="paragraph">
<p>以下のデータを含みます:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">[OPTIONS]</span></dt>
<dd>
<p>
VM/コンテナ関連のファイアウォールオプションを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">dhcp</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
DHCPを有効化します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">enable</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ファイアウォールルールの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ipfilter</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
デフォルトのIPフィルタを有効化。これは各インターフェースに対して空のipfilter-net&amp;lt;id&amp;gt; ipsetを追加するのと同じです。このようなipsetsは、インターフェースのMACアドレスから派生したアドレスへのIPv6リンクローカルアドレスの制限など、合理的なデフォルト制限を暗黙的に含みます。コンテナの場合、設定されたIPアドレスが暗黙的に追加されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_level_in</span>:<span class="monospaced">&amp;lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&amp;gt;</span></dt>
<dd>
<p>
着信トラフィックのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ログレベル_アウト</span>:<span class="monospaced">&amp;lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&amp;gt;</span></dt>
<dd>
<p>
発信トラフィックのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">macfilter</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
MACアドレスフィルタの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ndp</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
NDP（ネイバーディスカバリプロトコル）を有効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">policy_in</span>:<span class="monospaced">&amp;lt;ACCEPT | DROP | REJECT&amp;gt;</span></dt>
<dd>
<p>
入力ポリシー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">policy_out</span>:<span class="monospaced">&amp;lt;ACCEPT | DROP | REJECT&amp;gt;</span></dt>
<dd>
<p>
出力ポリシー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">radv</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ルータ広告の送信を許可。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">[RULES]</span></dt>
<dd>
<p>
このセクションにはVM/コンテナのファイアウォールルールが含まれます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">[IPSET &amp;lt;name&amp;gt;]</span></dt>
<dd>
<p>
IPセット定義。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">[ALIASES]</span></dt>
<dd>
<p>
IPエイリアス定義。</p>
</dd>
</dl></div>
<div class="sect4">
<h5 id="_enabling_the_firewall_for_vms_and_containers">VM およびコンテナ向けファイアウォールの有効化
<a class="headerlink" href="#_enabling_the_firewall_for_vms_and_containers" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>各仮想ネットワークデバイスには独自のファイアウォール有効フラグがあります。これにより、各インターフェースごとにファイアウォールを選択的に有効化できます。これは一般的なファイアウォール<span class="monospaced">有効化</span>オプションに加えて必要です。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pve_firewall_vnet_configuration">13.2.4. VNet設定
<a class="headerlink" href="#pve_firewall_vnet_configuration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>VNet 関連設定は以下から読み込まれます:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>/etc/pve/sdn/firewall/&amp;lt;vnet_name&amp;gt;.fw</pre>
</div></div>
<div class="paragraph">
<p>これは、VNet内の各VMごとに個別にファイアウォールルールを設定する必要なく、
VNetレベルでグローバルにファイアウォール設定を行うために使用できます。
着信トラフィックや発信トラフィックの概念がないため、
<span class="monospaced">FORWARD方向の</span>ルールのみを含めることができます。これは、
ホストインターフェイスを含む、あるブリッジポートから別のブリッジポートへ移動する
すべてのトラフィックに影響します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">この機能は現在、新しい
<a href="#pve_firewall_nft">nftablesベースのproxmox-firewall</a>でのみ利用可能です</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">FORWARD</span>チェーンを通過するトラフィックは双方向であるため、双方向の通過を許可するには両方向のルールを作成する必要があります。例えば特定のホストへの HTTP トラフィックを許可する場合、以下のルールを作成します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>FORWARD ACCEPT -dest 10.0.0.1 -dport 80
FORWARD ACCEPT -source 10.0.0.1 -sport 80</pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">[オプション]</span></dt>
<dd>
<p>
VNet関連のファイアウォールオプションを設定するために使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">enable</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ファイアウォールルールの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">log_level_forward</span>:<span class="monospaced">&amp;lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&amp;gt;</span></dt>
<dd>
<p>
転送トラフィックのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">policy_forward</span>:<span class="monospaced">&amp;lt;ACCEPT | DROP&amp;gt;</span></dt>
<dd>
<p>
転送ポリシー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">[RULES]</span></dt>
<dd>
<p>
このセクションにはVNet固有のファイアウォールルールが含まれます。</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_firewall_rules">
<span>13.3. ファイアウォールルール</span>
<a class="headerlink" href="#_firewall_rules" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ファイアウォールルールは方向（<span class="monospaced">IN</span>、<span class="monospaced">OUT</span>、<span class="monospaced">またはFORWARD</span>）と
アクション（<span class="monospaced">ACCEPT</span>、<span class="monospaced">DENY</span>、<span class="monospaced">REJECT</span>）で構成されます。マクロ名を
指定することも可能です。マクロには事前定義されたルールとオプションのセットが含まれます。ルールは
<span class="monospaced">先頭に|</span>を付けることで無効化できます。</p></div>
<div class="listingblock">
<div class="title">ファイアウォールルールの構文</div>
<div class="content monospaced">
<pre>[RULES]

DIRECTION ACTION [OPTIONS]
|DIRECTION ACTION [OPTIONS] # 無効化されたルール

DIRECTION MACRO(ACTION) [OPTIONS] # 定義済みマクロを使用</pre>
</div></div>
<div class="paragraph">
<p>以下のオプションを使用してルールの一致条件を調整できます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--dest</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
パケット宛先アドレスを制限します。単一IPアドレス、IPセット（<em>+ipsetname</em>）、またはIPエイリアス定義を参照できます。<em>20.34.101.207-201.3.9.99のような</em>アドレス範囲、またはIPアドレスとネットワークのリスト（コンマ区切り）も指定可能です。リスト内でIPv4とIPv6アドレスを混在させないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dport</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
TCP/UDP宛先ポートを制限します。<em>/etc/servicesで</em>定義されたサービス名または単純な数値（0-65535）を使用できます。ポート範囲は<em>\d+:\d+で</em>指定可能（例：<em>80:85</em>）。複数のポートや範囲を一致させるにはカンマ区切りリストを使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--icmp-type</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
icmp-type を指定します。proto が<em>icmp</em>または<em>icmpv6/ipv6-icmp</em> の場合にのみ有効です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--iface</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ネットワークインターフェース名。VMおよびコンテナではネットワーク設定キー名（<em>net\d+</em>）を使用する必要があります。ホスト関連のルールでは任意の文字列が使用可能です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--log</span> <span class="monospaced">&amp;lt;alert | crit | debug | emerg | err | info | nolog | notice | warning&amp;gt;</span></dt>
<dd>
<p>
ファイアウォールルールのログレベル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--proto</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
IPプロトコル。<em>/etc/protocolsで</em>定義されたプロトコル名（<em>tcp/udp</em>）または単純な番号を使用可能。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--source</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
パケット送信元アドレスを制限します。単一IPアドレス、IPセット（<em>+ipsetname</em>）、またはIPエイリアス定義を参照できます。<em>20.34.101.207-201.3.9.99のような</em>アドレス範囲、またはIPアドレスとネットワークのリスト（コンマ区切り）も指定可能です。リスト内でIPv4とIPv6アドレスを混在させないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sport</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
TCP/UDP送信元ポートを制限します。<em>/etc/servicesで</em>定義されたサービス名または単純な数値（0-65535）を使用できます。ポート範囲は<em>\d+:\d+</em>で指定可能（例：<em>80:85</em>）。複数のポートや範囲を一致させるにはカンマ区切りリストを使用できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>例をいくつか示します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[RULES]
IN SSH(ACCEPT) -i net0
IN SSH(ACCEPT) -i net0 # コメント
IN SSH(ACCEPT) -i net0 -source 192.168.2.192 # 192.168.2.192からのSSHのみ許可
IN SSH(ACCEPT) -i net0 -source 10.0.0.1-10.0.0.10 # IP範囲のSSHを受け入れる
IN SSH(ACCEPT) -i net0 -source 10.0.0.1,10.0.0.2,10.0.0.3 # IPリストのSSHを受け入れる
IN SSH(ACCEPT) -i net0 -source +mynetgroup # mynetgroup IPセットからのSSH許可
IN SSH(ACCEPT) -i net0 -source myserveralias # myserveraliasエイリアスからのSSH許可

|IN SSH(ACCEPT) -i net0 # 無効化ルール

IN  DROP # 全受信パケットを拒否
OUT ACCEPT # 全送信パケットを許可</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="pve_firewall_security_groups">
<span>13.4. セキュリティグループ</span>
<a class="headerlink" href="#pve_firewall_security_groups" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>セキュリティグループは、クラスタレベルで定義されるルールの集合であり、
すべての仮想マシンのルールで使用できます。たとえば、<em>http</em>および<em>https</em>ポートを開くルールを持つ
「webserver」という名前のグループを定義できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/firewall/cluster.fw

[group webserver]
IN  ACCEPT -p tcp -dport 80
IN  ACCEPT -p tcp -dport 443</pre>
</div></div>
<div class="paragraph">
<p>このグループを仮想マシンのファイアウォールに追加できます</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/firewall/&amp;lt;VMID&amp;gt;.fw

[RULES]
GROUP webserver</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="pve_firewall_ip_aliases">
<span>13.5. IPエイリアス</span>
<a class="headerlink" href="#pve_firewall_ip_aliases" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>IPエイリアスを使用すると、ネットワークのIPアドレスを名前に関連付けることができます。
その後、それらの名前を参照できます：</p></div>
<div class="ulist"><ul>
<li>
<p>
IPセット定義内</p>
</li>
<li>
<p>
ファイアウォールルールの<span class="monospaced">送信元</span>および<span class="monospaced">宛先プロパティ</span>内</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_standard_ip_alias_span_class_monospaced_local_network_span">1<span class="monospaced">3</span>.5.1. 標準IPエイリアス local_network
<a class="headerlink" href="#_standard_ip_alias_span_class_monospaced_local_network_span" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このエイリアスは自動的に定義されます。割り当てられた値を確認するには、
次のコマンドを使用してください:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pve-firewall localnet
local hostname: example
local IP address: 192.168.2.100
network auto detect: 192.168.0.0/20
using detected local_network: 192.168.0.0/20</pre>
</div></div>
<div class="paragraph">
<p>ファイアウォールはこのエイリアスを使用して、クラスタ通信に必要なすべて（corosync、API、SSH）を許可するルールを自動的に設定します。</p></div>
<div class="paragraph">
<p>ユーザーは<span class="monospaced">cluster.fw</span>エイリアスセクションでこれらの値を上書きできます。
パブリックネットワーク上の単一ホストを使用する場合、明示的にローカルIPアドレスを
HTTP(ACCEPT) -source +management に割り当てる方が望ましいです。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>#  /etc/pve/firewall/cluster.fw
[ALIASES]
local_network 1.2.3.4 # 単一IPアドレスを使用</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="pve_firewall_ip_sets">
<span>13.6. IPセット</span>
<a class="headerlink" href="#pve_firewall_ip_sets" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>IPセットはネットワークやホストのグループを定義するために使用できます。
ファイアウォールルールの<span class="monospaced">送信元および</span> <span class="monospaced">宛先プロパティ</span>で
「+名前」として参照できます。</p></div>
<div class="paragraph">
<p>次の例は、<span class="monospaced">管理用</span>IP セットからの HTTP トラフィックを許可します。
13.6.1. 標準 IP セットの管理
 </p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>IN HTTP(ACCEPT) -source +management</pre>
</div></div>
<div class="sect3">
<h4 id="_standard_ip_set_span_class_monospaced_management_span">1<span class="monospaced">3</span>.6.1. 標準 IP セット management
<a class="headerlink" href="#_standard_ip_set_span_class_monospaced_management_span" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>このIPセットはホストファイアウォール（VMファイアウォールではない）にのみ適用されます。
これらのIPは通常の管理タスク（Proxmox VE GUI、VNC、SPICE、SSH）を許可されます。</p></div>
<div class="paragraph">
<p>ローカルクラスタネットワークは自動的にこのIPセット（エイリアス
<span class="monospaced">cluster_network</span>）に追加され、ホスト間クラスタ通信を可能にします
（マルチキャスト、SSHなど）。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/firewall/cluster.fw

[IPSET management]
192.168.2.10
192.168.2.10/24</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_standard_ip_set_span_class_monospaced_blacklist_span">1<span class="monospaced">3</span>.6.2. 標準 IP セットのブラックリスト
<a class="headerlink" href="#_standard_ip_set_span_class_monospaced_blacklist_span" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>これらのIPからのトラフィックは、各ホストおよびVMのファイアウォールによってドロップされます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/firewall/cluster.fw

[IPSET blacklist]
77.240.159.182
213.87.123.0/24</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pve_firewall_ipfilter_section">1<span class="monospaced">3</span>.6.3. 標準IPセット ipfilter-net*
<a class="headerlink" href="#pve_firewall_ipfilter_section" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>これらのフィルタはVMのネットワークインターフェースに属し、主にIPスプーフィング防止に使用されます。インターフェースにこのセットが存在する場合、送信元IPが該当インターフェースのipfilterセットと一致しないすべての送信トラフィックは破棄されます。</p></div>
<div class="paragraph">
<p>設定済みIPアドレスを持つコンテナの場合、これらのセットは（存在する場合、またはVMファイアウォールの<strong>オプション</strong>タブにある
「一般<span class="monospaced">IPフィルタ</span>」オプションで有効化されている場合）、関連付けられたIPアドレスを暗黙的に含みます。</p></div>
<div class="paragraph">
<p>仮想マシンとコンテナの両方において、これらのセットには
ネイバーディスカバリプロトコルを機能させるため、
標準的なMACアドレスから派生したIPv6リンクローカルアドレスも暗黙的に含まれます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>/etc/pve/firewall/&amp;lt;VMID&amp;gt;.fw

[IPSET ipfilter-net0] # net0で指定IPのみ許可
192.168.2.10</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="pve_firewall_services_commands">
<span>13.7. サービスとコマンド</span>
<a class="headerlink" href="#pve_firewall_services_commands" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ファイアウォールは各ノードで2つのサービスデーモンを実行します：</p></div>
<div class="ulist"><ul>
<li>
<p>
pvefw-logger: NFLOGデーモン（ulogdの代替）。</p>
</li>
<li>
<p>
pve-firewall: iptablesルールを更新</p>
</li>
</ul></div>
<div class="paragraph">
<p>また、<span class="monospaced">pve-firewall</span> という CLI コマンドも用意されており、
ファイアウォールサービスの起動・停止に使用できます:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pve-firewall start
# pve-firewall stop</pre>
</div></div>
<div class="paragraph">
<p>ステータスを取得するには以下を使用します:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pve-firewall status</pre>
</div></div>
<div class="paragraph">
<p>上記のコマンドはすべてのファイアウォールルールを読み込みコンパイルするため、
設定にエラーがある場合は警告が表示されます。</p></div>
<div class="paragraph">
<p>生成されたiptablesルールを確認するには以下を使用できます:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># iptables-save</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="pve_firewall_default_rules">
<span>13.8. デフォルトのファイアウォールルール</span>
<a class="headerlink" href="#pve_firewall_default_rules" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>デフォルトのファイアウォール設定では以下のトラフィックがフィルタリングされます:</p></div>
<div class="sect3">
<h4 id="_datacenter_incoming_outgoing_drop_reject">13.8.1. データセンター入出力 DROP/REJECT
<a class="headerlink" href="#_datacenter_incoming_outgoing_drop_reject" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ファイアウォールの入力/出力ポリシーがDROPまたはREJECTに設定されている場合でも、
クラスター内の全Proxmox VEホストに対して以下のトラフィックは許可されます：</p></div>
<div class="ulist"><ul>
<li>
<p>
ループバックインターフェース経由のトラフィック</p>
</li>
<li>
<p>
既に確立された接続</p>
</li>
<li>
<p>
IGMPプロトコルを使用するトラフィック</p>
</li>
<li>
<p>
管理ホストからポート8006へのTCPトラフィック（Webインターフェースへのアクセスを許可するため）</p>
</li>
<li>
<p>
管理ホストからポート範囲5900～5999へのTCPトラフィック（VNC Webコンソールの通信を許可）</p>
</li>
<li>
<p>
管理ホストからポート3128へのTCPトラフィック（SPICEプロキシ接続用）</p>
</li>
<li>
<p>
管理ホストからポート22へのTCPトラフィック（SSHアクセスを許可するため）</p>
</li>
<li>
<p>
クラスタネットワーク内におけるUDPトラフィック（ポート5405-5412宛て） - corosync用</p>
</li>
<li>
<p>
クラスタネットワーク内でのUDPマルチキャストトラフィック</p>
</li>
<li>
<p>
ICMPトラフィックタイプ3（宛先到達不能）、4（輻輳制御）、または11（タイムアウト）</p>
</li>
</ul></div>
<div class="paragraph">
<p>以下のトラフィックはログ記録が有効でも破棄され、記録されません:</p></div>
<div class="ulist"><ul>
<li>
<p>
無効な接続状態のTCP接続</p>
</li>
<li>
<p>
corosyncに関連しないブロードキャスト、マルチキャスト、エニキャストトラフィック（つまりポート5405-5412経由でないもの）</p>
</li>
<li>
<p>
ポート43へのTCPトラフィック</p>
</li>
<li>
<p>
ポート135および445へのUDPトラフィック</p>
</li>
<li>
<p>
ポート範囲137～139へのUDPトラフィック</p>
</li>
<li>
<p>
送信元ポート137からポート範囲1024～65535へのUDPトラフィック</p>
</li>
<li>
<p>
ポート1900へのUDPトラフィック</p>
</li>
<li>
<p>
ポート135、139、445へのTCPトラフィック</p>
</li>
<li>
<p>
送信元ポート53からのUDPトラフィック</p>
</li>
</ul></div>
<div class="paragraph">
<p>その他のトラフィックはそれぞれ破棄または拒否され、ログも記録されます。
これは、<strong>ファイアウォール</strong>→<strong>オプションで</strong>有効化された追加オプション（NDP、SMURFS、TCPフラグフィルタリングなど）によって異なる場合があります。</p></div>
<div class="paragraph" id="pve_firewall_iptables_inspect">
<p>システム上で有効なファイアウォールチェーンとルールを確認するには、</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># iptables-save</pre>
</div></div>
<div class="paragraph">
<p>システムコマンドの出力を確認し、システム上で有効なファイアウォールチェーンとルールを確認してください。
この出力は<span class="monospaced">システムレポートにも</span>含まれており、Web GUIのノードサブスクリプションタブ、<span class="monospaced">またはpvereportコマンドライン</span>ツールからアクセス可能です。</p></div>
</div>
<div class="sect3">
<h4 id="_vm_ct_incoming_outgoing_drop_reject">13.8.2. VM/CT 着信/発信 DROP/REJECT<a class="headerlink" href="#_vm_ct_incoming_outgoing_drop_reject" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>設定構成に応じて、DHCP、NDP、ルータ広告、MACおよびIPフィルタリングに対する例外を除き、VMへの全トラフィックをドロップまたは拒否します。パケットをドロップ/拒否する同一ルールはデータセンターから継承されますが、ホストの許可された受信/送信トラフィックに対する例外は適用されません。</p></div>
<div class="paragraph">
<p>再度、適用されている全ルールとチェーンを検査するには
<a href="#pve_firewall_iptables_inspect">iptables-save（上記参照）</a>を使用できます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_logging_of_firewall_rules">
<span>13.9. ファイアウォールルールのログ記録</span>
<a class="headerlink" href="#_logging_of_firewall_rules" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>デフォルトでは、ファイアウォールルールでフィルタリングされたトラフィックのログ記録はすべて無効になっています。
ログ記録を有効化するには、<strong>ファイアウォール</strong>→<strong>オプションで</strong>
着信および/または発信トラフィックの<span class="monospaced">ログレベル</span>を設定する必要があります。
これはホスト全体およびVM/CTファイアウォール個別に設定可能です。
これによりProxmox VE標準ファイアウォールルールのログ記録が有効化され、
<strong>ファイアウォール</strong>→<strong>ログで</strong>出力を確認できます。
さらに、標準ルールでは一部のドロップ/拒否パケットのみが記録されます
（<a href="#pve_firewall_default_rules">デフォルトファイアウォールルール</a>参照）。</p></div>
<div class="paragraph">
<p><span class="monospaced">loglevel</span>はフィルタリング対象トラフィックのログ記録量に影響しません。
ログ出力に接頭辞として付加される<span class="monospaced">LOGID</span>を変更し、
フィルタリングや後処理を容易にするものです。</p></div>
<div class="paragraph">
<p><span class="monospaced">loglevel</span>は以下のフラグのいずれかです:</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" id="pve_firewall_log_levels" style="
width:25%;
">
<col style="width:50%;" />
<col style="width:50%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">ログレベル </th>
<th class="tableblock halign-left valign-top">LOGID</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nolog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> —</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">emerg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">crit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">エラー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">warning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">通知</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">情報</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">デバッグ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph">
<p>典型的なファイアウォールログ出力は次のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>VMID LOGID CHAIN TIMESTAMP POLICY: PACKET_DETAILS</pre>
</div></div>
<div class="paragraph">
<p>ホストファイアウォールの場合は、<span class="monospaced">VMID</span>は 0 になります。</p></div>
<div class="sect3">
<h4 id="_logging_of_user_defined_firewall_rules">13.9.1. ユーザー定義ファイアウォールルールのログ記録
<a class="headerlink" href="#_logging_of_user_defined_firewall_rules" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ユーザー定義ファイアウォールルールでフィルタリングされたパケットをログ記録するには、
各ルールごとに個別にログレベルパラメータを設定できます。
これにより、<strong>Firewall</strong>→<strong>Options</strong> で定義された標準ルールのログレベルとは独立して、
きめ細かいログ記録が可能になります。</p></div>
<div class="paragraph">
<p>個々のルールの<span class="monospaced">ログレベルは</span>、ルール作成時または変更時にWeb UIで簡単に定義・変更できますが、
<span class="monospaced">対応するpvesh</span>API呼び出しでも設定可能です。</p></div>
<div class="paragraph">
<p>さらに、ファイアウォール設定ファイルでもログレベルを設定可能です。
対象ルールに `<span class="monospaced">-log &amp;lt;loglevel&amp;gt;`</span>を付加します（<a href="#pve_firewall_log_levels">設定可能なログレベルを参照</a>）。</p></div>
<div class="paragraph">
<p>例えば、以下の2つは同一です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>IN REJECT -p icmp -log nolog
IN REJECT -p icmp</pre>
</div></div>
<div class="paragraph">
<p>一方</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>IN REJECT -p icmp -log debug</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">デバッグ</span>レベルでフラグ付けされたログ出力を生成します。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_tips_and_tricks">
<span>13.10. ヒントとテクニック</span>
<a class="headerlink" href="#_tips_and_tricks" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_how_to_allow_ftp">13.10.1. FTPを許可する方法
<a class="headerlink" href="#_how_to_allow_ftp" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>FTPはポート21と複数の動的ポートを使用する旧式プロトコルです。
ポート21を受け入れるルールが必要です。
加えて、<span class="monospaced">ip_conntrack_ftpモジュールを</span>ロードする必要があります。
以下のコマンドを実行してください:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>modprobe ip_conntrack_ftp</pre>
</div></div>
<div class="paragraph">
<p>を実行し、<span class="monospaced">/etc/modules</span>に<span class="monospaced">ip_conntrack_ftp</span>を追加してください（再起動後も有効にするため）。</p></div>
</div>
<div class="sect3">
<h4 id="_suricata_ips_integration">13.10.2. Suricata IPS 統合
<a class="headerlink" href="#_suricata_ips_integration" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><a href="https://suricata.io/">Suricata</a>IPS
(侵入防止システム)を使用したい場合、それは可能です。</p></div>
<div class="paragraph">
<p>パケットはファイアウォールがACCEPTした後にのみIPSへ転送されます。
ファイアウォールでRejected/DroppedされたパケットはIPSへ送信されません。</p></div>
<div class="paragraph">
<p>ファイアウォールで拒否/破棄されたパケットはIPSに送信されません。</p></div>
<div class="paragraph">
<p>プロキシモックスホストにSuricataをインストール:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># apt-get install suricata
# modprobe nfnetlink_queue</pre>
</div></div>
<div class="paragraph">
<p>次回再起動用に<span class="monospaced">/etc/modules</span>に<span class="monospaced">nfnetlink_queue</span>を追加することを忘れないでください。</p></div>
<div class="paragraph">
<p>次に、特定のVMでIPSを有効化します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/pve/firewall/&amp;lt;VMID&amp;gt;.fw

[OPTIONS]
ips: 1
ips_queues: 0</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">ips_queues</span>はこの VM 専用の CPU キューをバインドします。</p></div>
<div class="paragraph">
<p>利用可能なキューは以下で定義されています</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># /etc/default/suricata
NFQUEUE=0</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_notes_on_ipv6">
<span>13.11. IPv6に関する注意事項</span>
<a class="headerlink" href="#_notes_on_ipv6" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ファイアウォールにはいくつかのIPv6固有のオプションが含まれています。注意すべき点として、
IPv6はもはやARPプロトコルを使用せず、代わりにIPレベルで動作するNDP（Neighbor Discovery Protocol）を使用します。そのため、NDPパケットの送受信にはIPアドレスが必要です。この目的のために、インターフェースのMACアドレスから派生したリンクローカルアドレスが使用されます。デフォルトでは、ホストレベルとVMレベルの両方<span class="monospaced">でNDPオプション</span>が有効化されており、ネイバーディスカバリー（NDP）パケットの送受信を許可しています。</p></div>
<div class="paragraph">
<p>ネイバーディスカバリー以外にも、NDPは自動設定やルータ広告など
いくつかの用途に使用されます。</p></div>
<div class="paragraph">
<p>デフォルトでは、VMはルータ問い合わせメッセージ（ルータの問い合わせ）の送信と、ルータ広告パケットの受信が許可されています。これにより、ステートレス自動設定を利用できます。一方、VMは「ルータ広告を許可」（<span class="monospaced">radv: 1</span>）オプションが設定されていない限り、自身をルータとして広告することはできません。</p></div>
<div class="paragraph">
<p>NDPに必要なリンクローカルアドレスについては、「IPフィルタ」(<span class="monospaced">ipfilter: 1</span>)オプションを有効化することで、各VMネットワークインターフェースに対応するリンクローカルアドレスを含む<span class="monospaced">ipfilter-net*</span>ipsetを追加するのと同じ効果が得られます（詳細は<a href="#pve_firewall_ipfilter_section">「標準IP<span class="monospaced">セットipfilter-net*」</span></a>セクションを参照）。</p></div>
</div>
<div class="sect2">
<h3 id="_ports_used_by_proxmox_ve">
<span>13.12. Proxmox VE が使用するポート</span>
<a class="headerlink" href="#_ports_used_by_proxmox_ve" title="Permalink to this heading"></a></h3>
<div class="ulist"><ul>
<li>
<p>
Web interface: 8006 (TCP, HTTP/1.1 over TLS)</p>
</li>
<li>
<p>
VNC Webコンソール: 5900-5999 (TCP, WebSocket)</p>
</li>
<li>
<p>
SPICEプロキシ: 3128 (TCP)</p>
</li>
<li>
<p>
sshd (クラスタ操作用): 22 (TCP)</p>
</li>
<li>
<p>
rpcbind: 111 (UDP)</p>
</li>
<li>
<p>
sendmail: 25 (TCP, 送信)</p>
</li>
<li>
<p>
corosyncクラスタトラフィック: 5405-5412 UDP</p>
</li>
<li>
<p>
ライブマイグレーション（VMメモリとローカルディスクデータ）：60000-60050（TCP）</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="pve_firewall_nft">
<span>13.13.</span>nftables
<a class="headerlink" href="#pve_firewall_nft" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">pve-firewallの</span>代替として、iptablesではなく<a href="https://wiki.nftables.org/wiki-nftables/index.php/What_is_nftables%3F">新しい</a>nftablesベースのProxmox VEファイアウォール実装<span class="monospaced">であるproxmox-firewall</span>を提供しています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">proxmox-firewallは</span>現在技術プレビュー段階です。バグや
元のファイアウォールとの互換性問題が発生する可能性があります。現時点では
本番環境での使用には適していません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>この実装は同じ設定ファイルと設定形式を使用するため、切り替え時に既存の設定を流用できます。以下の例外を除き、完全に同一の機能を提供します：</p></div>
<div class="ulist"><ul>
<li>
<p>
Linuxブリッジを使用する場合、追加のファイアウォールブリッジ(fwbrX)は
作成されません。OVSブリッジを使用するゲストインターフェースには、
ファイアウォールブリッジが引き続き存在します。</p>
</li>
<li>
<p>
ゲストトラフィックに対してREJECTは現在設定不可（代わりにトラフィックは
  ドロップされます）。</p>
</li>
<li>
<p>
<span class="monospaced">NDP</span>、<span class="monospaced">ルータ広告</span>、または<span class="monospaced">DHCP</span>オプションを使用すると、デフォルトポリシーに関係なく<strong>常に</strong>ファイアウォールルールが作成されます。</p>
</li>
<li>
<p>
ゲスト向けファイアウォールルールは、
接続追跡テーブルエントリを持つ接続に対しても評価されます。</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_installation_and_usage">13.13.1. インストールと使用方法
<a class="headerlink" href="#_installation_and_usage" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">proxmox-firewall</span>パッケージをインストール:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt install proxmox-firewall</pre>
</div></div>
<div class="paragraph">
<p>ホストのWeb UI（[Host] &gt; [Firewall] &gt; [Options] &gt; [nftables]）またはホストの設定ファイル
（<span class="monospaced">/etc/pve/nodes/&amp;lt;node_name&amp;gt;/host.fw</span>）でnftablesバックエンドを有効化します：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[オプション]

nftables: 1</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">proxmox-firewallの有効化</span>/無効化後、すべての稼働中のVMおよびコンテナを再起動する必要があります。これにより、旧/新ファイアウォールが正常に機能します。</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">nftables設定キー</span>を設定後、<span class="monospaced">新しいproxmox-firewallサービスが</span>引き継ぎます。
新しいサービスの動作確認は、<span class="monospaced">proxmox-firewallの</span>systemct<span class="monospaced">l</span> statusで確認できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>systemctl status proxmox-firewall</pre>
</div></div>
<div class="paragraph">
<p>生成されたルールセットを確認することも可能です。詳細は「<a href="#pve_firewall_nft_helpful_commands">便利なコマンド」</a>セクションを参照してください。
<span class="monospaced">pve-firewall が</span>iptables ルールを生成しなくなったかどうかも確認する必要があります。関連するコマンドは「<a href="#pve_firewall_services_commands">サービスとコマンド」</a>セクションに記載されています。</p></div>
<div class="paragraph">
<p>古いファイアウォールに戻すには、設定値を0 / Noに戻すだけです。</p></div>
</div>
<div class="sect3">
<h4 id="_usage">13.13.2. 使用方法
<a class="headerlink" href="#_usage" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">proxmox-firewall は</span>、<span class="monospaced">proxmox-firewall</span>サービスによって管理される 2 つのテーブルを作成します:
<span class="monospaced">proxmox-firewall</span>と<span class="monospaced">proxmox-firewall-guests</span> です。Proxmox VE ファイアウォール設定外で動作するカスタムルールを作成したい場合、独自のテーブルを作成してカスタムファイアウォールルールを管理できます。<span class="monospaced">proxmox-firewall は</span>自身が生成したテーブルのみを操作するため、独自のテーブルを追加することで<span class="monospaced">proxmox-firewall</span>の動作を容易に拡張・変更できます。</p></div>
<div class="paragraph">
<p>nftablesベースのファイアウォールでは、<span class="monospaced">pve-firewallコマンド</span>の代わりに<span class="monospaced">proxmox-firewall</span>を使用します。これはsystemdサービスであるため、<span class="monospaced">systemctl経由で</span>起動・停止できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>systemctl start proxmox-firewall
systemctl stop proxmox-firewall</pre>
</div></div>
<div class="paragraph">
<p>ファイアウォールサービスを停止すると、生成されたルールはすべて削除されます。</p></div>
<div class="paragraph">
<p>ファイアウォールの状態を確認するには、systemctl サービスの状態を照会します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>systemctl status proxmox-firewall</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pve_firewall_nft_helpful_commands">13.13.3. 便利なコマンド
<a class="headerlink" href="#pve_firewall_nft_helpful_commands" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>生成されたルールセットは次のコマンドで確認できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>nft list ruleset</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">proxmox-firewall</span>をデバッグする場合、<span class="monospaced">compile</span>サブコマンドでファイアウォールが生成するコマンドをダンプできます。さらに、PVE_LOG 環境変数を設定するとログ出力が STDERR に出力され、nftables ルールセット生成時の問題デバッグに有用です:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>PVE_LOG=trace /usr/libexec/proxmox/proxmox-firewall compile &amp;gt; firewall.json</pre>
</div></div>
<div class="paragraph">
<p>nftablesルールセットは、proxmox-firewallバイナリに含まれるスケルトンルールセットと、
ファイアウォール設定から生成されたルールの両方で構成されます。
<span class="monospaced">基本</span>ルールセットは<span class="monospaced">skeletonサブコマンド</span>で取得できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>/usr/libexec/proxmox/proxmox-firewall skeleton</pre>
</div></div>
<div class="paragraph">
<p>両コマンドの出力は<span class="monospaced">nft</span>実行ファイルへ直接パイプできます。以下のコマンドで nftables ルールセット全体を新規作成します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>/usr/libexec/proxmox/proxmox-firewall skeleton | nft -f -
/usr/libexec/proxmox/proxmox-firewall compile | nft -j -f -</pre>
</div></div>
<div class="paragraph">
<p>ファイアウォールデーモン実行中の詳細出力を得るには、systemctl サービスを編集することも可能です:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>systemctl edit proxmox-firewall</pre>
</div></div>
<div class="paragraph">
<p>次に、<span class="monospaced">PVE_LOG</span>環境変数のオーバーライドを追加する必要があります:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[Service]
Environment="PVE_LOG=trace"</pre>
</div></div>
<div class="paragraph">
<p>これにより大量のログが瞬時に生成されるため、デバッグ目的でのみ使用してください。
より簡潔なログレベルとしては<span class="monospaced">info</span> <span class="monospaced">やdebug</span>があります。</p></div>
<div class="paragraph">
<p>ファイアウォールルールのデバッグには、異なるチェーンを通るパケットフローを追跡することが有用です。
追跡対象パケット<span class="monospaced">に対してnftraceを1</span>に設定することで実現できます。
<strong>全パケットに</strong>このフラグを設定しないことを推奨します。
以下の例ではICMPパケットのみを検証します。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>#!/usr/sbin/nft -f
table bridge tracebridge
delete table bridge tracebridge

table bridge tracebridge {
    chain trace {
        meta l4proto icmp meta nftrace set 1
    }

    chain prerouting {
        type filter hook prerouting priority -350; policy accept;
        jump trace
    }

    chain postrouting {
        type filter hook postrouting priority -350; policy accept;
        jump trace
    }
}</pre>
</div></div>
<div class="paragraph">
<p>このファイルを保存し実行可能にした後、一度実行すると対応するトレースチェーンが作成されます。トレース出力はProxmox VE Web UI（ファイアウォール＞ログ）または<span class="monospaced">nft monitor traceコマンド</span>で確認可能です。</p></div>
<div class="paragraph">
<p>上記の例は全ブリッジ上のトラフィックをトレースします。通常ゲストトラフィックはブリッジ経由で流れます。ホストトラフィックを調査する場合は、<span class="monospaced">bridge</span>テーブルではなく<span class="monospaced">inet</span>テーブルにチェーンを作成してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">これにより<strong>大量の</strong>ログスパムが発生し、
ネットワークスタックのパフォーマンスが大幅に低下する可能性があることに注意してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>トレースルールは次のコマンドで削除できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>nft delete table bridge tracebridge</pre>
</div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="user_mgmt">
14. ユーザー管理
<a class="headerlink" href="#user_mgmt" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proxmox VEは複数の認証ソースをサポートしています。例として、Linux PAM、
統合されたProxmox VE認証サーバー、LDAP、Microsoft Active
Directory、OpenID Connectなどがあります。</p></div>
<div class="paragraph">
<p>すべてのオブジェクト（VM、ストレージ、ノードなど）に対してロールベースのユーザーおよび権限管理を使用することで、きめ細かいアクセス権を定義できます。</p></div>
<div class="sect2">
<h3 id="pveum_users">
<span>14.1. ユーザー</span>
<a class="headerlink" href="#pveum_users" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE はユーザー属性を<span class="monospaced">/etc/pve/user.cfg</span> に保存します。
パスワードはここに保存されません。代わりに、ユーザーは
後述する<a href="#pveum_authentication_realms">認証レルム</a>に関連付けられます。
したがって、ユーザーは内部的に<span class="monospaced">&amp;lt;userid&amp;gt;@&amp;lt;realm&amp;gt;</span> の形式で
ユーザー名とレルムによって識別されることがよくあります。</p></div>
<div class="paragraph">
<p>このファイル内の各ユーザーエントリには以下の情報が含まれます:</p></div>
<div class="ulist"><ul>
<li>
<p>
First name</p>
</li>
<li>
<p>
姓</p>
</li>
<li>
<p>
メールアドレス</p>
</li>
<li>
<p>
グループメンバーシップ</p>
</li>
<li>
<p>
任意の有効期限</p>
</li>
<li>
<p>
このユーザーに関するコメントまたはメモ</p>
</li>
<li>
<p>
このユーザーが有効か無効か</p>
</li>
<li>
<p>
オプションの二要素認証キー</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ユーザーを無効化または削除した場合、または設定された有効期限が過去の日付である場合、
このユーザーは新規セッションへのログインや新規タスクの開始ができなくなります。
ただし、このユーザーによって既に開始されているタスク（例：ターミナルセッション）は、
これらの操作によって自動的に終了<strong>することはありません</strong>。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_system_administrator">14.1.1. システム管理者
<a class="headerlink" href="#_system_administrator" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>システムのrootユーザーは常にLinux PAM領域経由でログイン可能であり、制限のない管理者権限を有します。このユーザーは削除できませんが、属性の変更は可能です。システムメールは、このユーザーに割り当てられたメールアドレス宛に送信されます。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pveum_groups">
<span>14.2. グループ</span>
<a class="headerlink" href="#pveum_groups" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>各ユーザーは複数のグループに所属できます。グループはアクセス権限を整理する
推奨方法です。権限は常に個々のユーザーではなくグループに付与すべきです。
これにより、はるかに保守性の高いアクセス制御リストが得られます。</p></div>
</div>
<div class="sect2">
<h3 id="pveum_tokens">
<span>14.3. API トークン</span>
<a class="headerlink" href="#pveum_tokens" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>APIトークンは、別のシステム、ソフトウェア、またはAPIクライアントからREST APIの大部分へステートレスなアクセスを許可します。トークンは個々のユーザー向けに生成でき、アクセス範囲と期間を制限するために個別の権限と有効期限を設定できます。APIトークンが不正利用された場合、ユーザー自体を無効化せずにトークンを無効化できます。</p></div>
<div class="paragraph">
<p>APIトークンには基本的に2種類あります：</p></div>
<div class="ulist"><ul>
<li>
<p>
分離された特権: トークンにはACLによる明示的なアクセス権限の付与が必要です。
  その実効権限は、ユーザー権限とトークン権限の交差によって計算されます。</p>
</li>
<li>
<p>
完全な権限：トークンの権限は関連付けられたユーザーの権限と同一です。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">トークン値は生成時に一度だけ表示/返却されます。
後からAPI経由で再取得することはできません！</td>
</tr></table>
</div>
<div class="paragraph">
<p>APIトークンを使用するには、APIリクエスト時にHTTPヘッダー<em>Authorizationを</em>
<span class="monospaced">PVEAPIToken=USER@REALM!TOKENID=UUID</span>形式の表示値に設定するか、
APIクライアントのドキュメントを参照してください。</p></div>
</div>
<div class="sect2">
<h3 id="pveum_resource_pools">
<span>14.4. リソースプール</span>
<a class="headerlink" href="#pveum_resource_pools" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-pool-window.png">
<img src="images/screenshot/gui-datacenter-pool-window.png" alt="screenshot/gui-datacenter-pool-window.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>リソースプールは仮想マシン、コンテナ、ストレージデバイスからなる集合体です。
特定のユーザーが特定のリソースセットへのアクセスを制御する必要がある場合の権限管理に有用です。
リソースごとに管理する代わりに、単一の権限を要素の集合に適用できるためです。リソースプールはグループと組み合わせて使用されることが多く、
グループのメンバーが特定のマシンやストレージに対する権限を持つようにします。</p></div>
</div>
<div class="sect2">
<h3 id="pveum_authentication_realms">
<span>14.5. 認証レルム</span>
<a class="headerlink" href="#pveum_authentication_realms" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEのユーザーは外部レルムに存在するユーザーの対応物であるため、
レルムは<span class="monospaced">/etc/pve/domains.cfgで</span>設定する必要があります。
利用可能なレルム（認証方式）は以下の通りです：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Linux PAM 標準認証</dt>
<dd>
<p>
Linux PAMはシステム全体のユーザー認証のためのフレームワークです。これらのユーザー<span class="monospaced">はadduser</span>などのコマンドでホストシステム上に作成されます。Proxmox VEホストシステム上にPAMユーザーが存在する場合、対応するエントリをProxmox VEに追加することで、これらのユーザーが自身のシステムユーザー名とパスワードでログインできるようになります。</p>
</dd>
<dt class="hdlist1">
Proxmox VE 認証サーバー</dt>
<dd>
<p>
これはUnixライクなパスワードストアであり、ハッシュ化されたパスワードを
<span class="monospaced">/etc/pve/priv/shadow.cfgに</span>保存します。パスワードはSHA-256ハッシュアルゴリズムで
ハッシュ化されます。これは小規模（あるいは中規模）のインストール環境において、
ユーザーがProxmox VE外部へのアクセスを必要としない場合に最も便利な領域です。この場合、ユーザーはProxmox VEによって完全に管理され、GUI経由で自身のパスワードを変更できます。</p>
</dd>
<dt class="hdlist1">
LDAP</dt>
<dd>
<p>
LDAP（Lightweight Directory Access Protocol）は、ディレクトリサービスを利用した認証のためのオープンなクロスプラットフォームプロトコルです。OpenLDAPは、LDAPプロトコルの人気のあるオープンソース実装です。</p>
</dd>
<dt class="hdlist1">
Microsoft Active Directory (AD)</dt>
<dd>
<p>
Microsoft Active Directory（AD）はWindowsドメインネットワーク向けのディレクトリサービスであり、Proxmox VEの認証領域としてサポートされています。認証プロトコルとしてLDAPをサポートします。</p>
</dd>
<dt class="hdlist1">
OpenID Connect</dt>
<dd>
<p>
OpenID ConnectはOAuth 2.0プロトコル上に実装されたアイデンティティ層です。外部認証サーバーによる認証結果に基づき、クライアントがユーザーの身元を確認することを可能にします。</p>
</dd>
</dl></div>
<div class="sect3">
<h4 id="user-realms-pam">14.5.1. Linux PAM標準認証
<a class="headerlink" href="#user-realms-pam" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Linux PAM はホストシステムのユーザーに対応するため、ユーザーがログインを許可されている各ノードにシステムユーザーが存在する必要があります。ユーザーは通常のシステムパスワードで認証します。このレルムはデフォルトで追加され、削除できません。</p></div>
<div class="paragraph">
<p>GUIまたは<span class="monospaced">/access/password</span>APIエンドポイント経由でのパスワード変更は、
ローカルノードにのみ適用され、クラスタ全体には適用されません。
Proxmox VEはマルチマスター設計を採用していますが、
異なるノードで異なるパスワードを使用することは、
依然としてセキュリティ上の利点を提供します。</p></div>
<div class="paragraph">
<p>設定面では、管理者はこのレルムからのログインに二要素認証を要求する設定や、
レルムをデフォルト認証レルムとして設定する選択が可能です。</p></div>
</div>
<div class="sect3">
<h4 id="user-realms-pve">14.5.2. Proxmox VE 認証サーバー
<a class="headerlink" href="#user-realms-pve" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Proxmox VE認証サーバー領域は、シンプルなUnix風パスワードストアです。
この領域はデフォルトで作成され、Linux PAMと同様に設定可能な項目は、
領域ユーザーの二要素認証要求とログイン用デフォルト領域設定のみです。</p></div>
<div class="paragraph">
<p>他の Proxmox VE レルムタイプとは異なり、ユーザーの作成と認証は完全に Proxmox VE を通じて行われ、他のシステムに対する認証は行われません。したがって、このタイプのユーザーを作成する際にはパスワードの設定が必須となります。</p></div>
</div>
<div class="sect3">
<h4 id="user-realms-ldap">14.5.3. LDAP
<a class="headerlink" href="#user-realms-ldap" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ユーザー認証には外部LDAPサーバー（例：OpenLDAP）も使用可能です。このレルムタイプでは、<em>ユーザー属性名</em>（<span class="monospaced">user_attr</span>）フィールドで指定されたusername属性を使用し、<em>ベースドメイン名</em>（<span class="monospaced">base_dn</span>）の下でユーザーを検索します。</p></div>
<div class="paragraph">
<p>サーバーとオプションのフォールバックサーバーを設定でき、接続はSSL経由で暗号化可能です。さらに、ディレクトリとグループに対してフィルターを設定できます。フィルターにより、レルムの適用範囲をさらに制限できます。</p></div>
<div class="paragraph">
<p>例えば、ユーザーが以下のLDIFデータセットで表現される場合：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ldap-test.com の People 内の user1
dn: uid=user1,ou=People,dc=ldap-test,dc=com
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
uid: user1
cn: Test User 1
sn: Testers
description: This is the first test user.</pre>
</div></div>
<div class="paragraph">
<p><em>ベースドメイン名は</em> <span class="monospaced">ou=People,dc=ldap-test,dc=com</span>、ユーザー属性は<span class="monospaced">uid</span> となります。</p></div>
<div class="paragraph">
<p>Proxmox VEがユーザーを照会・認証する前にLDAPサーバーへの認証（バインド）が必要な場合、
<span class="monospaced">/etc/pve/domains.cfg内の</span> <span class="monospaced">bind_dnプロパティで</span>バインドドメイン名を設定できます。
そのパスワード<span class="monospaced">は/etc/pve/priv/realm/&amp;lt;realmname&amp;gt;.pw</span>
（例：<span class="monospaced">/etc/pve/priv/realm/my-ldap.pw</span>）。このファイルには
パスワードを1行で平文で記述する必要があります。</p></div>
<div class="paragraph">
<p>証明書検証のためには、<span class="monospaced">capath</span>の設定が必要です。
これはLDAPサーバーのCA証明書を直接指定するか、
信頼済みCA証明書を全て含むシステムパス（<span class="monospaced">/etc/ssl/certs</span>）を指定できます。
さらに、<span class="monospaced">verifyオプション</span>の設定も必要です。
これはWebインターフェースからも設定可能です。</p></div>
<div class="paragraph">
<p>LDAPサーバー領域の主な設定オプションは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">Realm</span>(<span class="monospaced">realm</span>): Proxmox VE ユーザー用のレルム識別子</p>
</li>
<li>
<p>
<span class="monospaced">Base Domain Name</span>(<span class="monospaced">base_dn</span>): ユーザー検索対象のディレクトリ</p>
</li>
<li>
<p>
<span class="monospaced">ユーザー属性名</span>(<span class="monospaced">user_attr</span>): ユーザーがログインに使用する
  ユーザー名を含むLDAP属性</p>
</li>
<li>
<p>
<span class="monospaced">サーバー</span>(<span class="monospaced">server1</span>): LDAPディレクトリをホストするサーバー</p>
</li>
<li>
<p>
<span class="monospaced">フォールバックサーバー</span>(<span class="monospaced">server2</span>): プライマリサーバーに到達できない場合の
オプションのフォールバックサーバーアドレス</p>
</li>
<li>
<p>
<span class="monospaced">ポート</span>(<span class="monospaced">port</span>): LDAPサーバーが待機するポート</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">特定のユーザーがLDAPサーバーを使用して認証できるようにするには、
Proxmox VEサーバーからそのユーザーを当該レルムのユーザーとして追加する必要があります。
<a href="#pveum_ldap_sync">これは同期により</a>自動的に実行可能です。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="user-realms-ad">14.5.4. Microsoft Active Directory (AD)
<a class="headerlink" href="#user-realms-ad" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Microsoft ADをレルムとして設定するには、サーバーアドレスと認証ドメインを指定する必要があります。Active Directoryは、オプションのフォールバックサーバー、ポート、SSL暗号化など、LDAPと同様のほとんどのプロパティをサポートしています。さらに、設定後には<a href="#pveum_ldap_sync">同期</a>操作を通じてユーザーをProxmox VEに自動的に追加できます。</p></div>
<div class="paragraph">
<p>LDAPと同様に、Proxmox VEがADサーバーにバインドする前に認証が必要な場合、
<em>バインドユーザー</em>（<span class="monospaced">bind_dn</span>）プロパティを設定する必要があります。
このプロパティはMicrosoft ADでは通常デフォルトで必須です。</p></div>
<div class="paragraph">
<p>Microsoft Active Directory の主な設定項目は以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">レルム</span>(<span class="monospaced">realm</span>): Proxmox VE ユーザー用のレルム識別子</p>
</li>
<li>
<p>
<span class="monospaced">ドメイン</span>(<span class="monospaced">domain</span>): サーバーの AD ドメイン</p>
</li>
<li>
<p>
<span class="monospaced">サーバー</span>(<span class="monospaced">server1</span>): サーバーの完全修飾ドメイン名 (FQDN) または IP アドレス</p>
</li>
<li>
<p>
<span class="monospaced">フォールバックサーバー</span>(<span class="monospaced">server2</span>): プライマリサーバーに到達できない場合の
  オプションのフォールバックサーバーアドレス</p>
</li>
<li>
<p>
<span class="monospaced">ポート</span>(<span class="monospaced">port</span>): Microsoft AD サーバーが待機するポート</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Microsoft ADは通常、ユーザー名などの値を大文字小文字を区別せずにチェックします。
Proxmox VEでも同様に動作させるには、Web UIでレルムを編集するか、CLIを使用して
デフォルト<span class="monospaced">の大文字小文字区別</span>オプションを無効にできます（<span class="monospaced">IDを</span>レルムIDに置き換えてください）：
<span class="monospaced">pveum realm modify ID --case-sensitive 0</span></td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pveum_ldap_sync">14.5.5. LDAPベースのレルムの同期
<a class="headerlink" href="#pveum_ldap_sync" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-realm-add-ldap.png">
<img src="images/screenshot/gui-datacenter-realm-add-ldap.png" alt="screenshot/gui-datacenter-realm-add-ldap.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>LDAPベースのレルム（LDAPおよびMicrosoft Active Directory）では、ユーザーやグループを手動でProxmox VEに追加する代わりに、自動同期が可能です。
同期オプションは、Webインターフェースの<span class="monospaced">認証</span>パネルにある追加/編集ウィンドウ、
<span class="monospaced">またはpveum realm add/modify</span>コマンドからアクセスできます。
同期操作はGUIの<span class="monospaced">認証</span>パネルから、または以下のコマンドで実行可能です:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pveum realm sync &amp;lt;realm&amp;gt;</pre>
</div></div>
<div class="paragraph">
<p>ユーザーとグループはクラスタ全体の設定ファイル
<span class="monospaced">/etc/pve/user.cfg</span> に同期されます。</p></div>
<div class="sect4">
<h5 id="_attributes_to_properties">属性からプロパティへ
<a class="headerlink" href="#_attributes_to_properties" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>同期応答にユーザー属性が含まれる場合、それらは<span class="monospaced">user.cfg</span> 内の対応するユーザープロパティに同期されます。例:<span class="monospaced">firstname</span>や<span class="monospaced">lastname</span>。</p></div>
<div class="paragraph">
<p>属性の名前が Proxmox VE プロパティと一致しない場合、
config で<span class="monospaced">sync_attributes</span>オプションを使用して
カスタムのフィールド間マッピングを設定できます。</p></div>
<div class="paragraph">
<p>値が存在しない場合の処理は同期オプションで制御可能です（下記参照）。</p></div>
</div>
<div class="sect4">
<h5 id="_sync_configuration">同期設定
<a class="headerlink" href="#_sync_configuration" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>LDAPベースのレルムを同期するための設定オプションは、
[追加/編集]ウィンドウの[<span class="monospaced">同期オプション]</span>タブにあります。</p></div>
<div class="paragraph">
<p>設定オプションは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">バインドユーザー</span>(<span class="monospaced">bind_dn</span>): ユーザーおよびグループをクエリするために使用される LDAP アカウントを指します。このアカウントは、必要なすべてのエントリへのアクセス権が必要です。設定されている場合、検索はバインドを介して実行されます。設定されていない場合、検索は匿名で実行されます。ユーザーは完全なLDAP形式の識別名(DN)である必要があります。
  例:<span class="monospaced">cn=admin,dc=example,dc=com</span></p>
</li>
<li>
<p>
グループ名属性 (group_name_attr): ユーザーのグループを表します。
 <span class="monospaced"> user.cfgの</span>通常の文字制限に準拠するエントリのみ同期されます。
  グループ名は命名衝突を避けるため、名前に<span class="monospaced">"-$realm"</span>を付加して同期されます。
  手動で作成したグループが同期で上書きされないよう注意してください。</p>
</li>
<li>
<p>
<span class="monospaced">ユーザークラス</span>(<span class="monospaced">user_classes</span>): ユーザーに関連付けられたオブジェクトクラス。</p>
</li>
<li>
<p>
<span class="monospaced">グループクラス</span>(<span class="monospaced">group_classes</span>): グループに関連付けられたオブジェクトクラス。</p>
</li>
<li>
<p>
<span class="monospaced">E-Mail属性</span>: LDAPベースのサーバーがユーザーのメールアドレスを指定している場合、
  関連する属性をここで設定することで同期に含めることも可能です。
  コマンドラインからは<span class="monospaced">--sync_attributes</span>パラメータで実現できます。</p>
</li>
<li>
<p>
<span class="monospaced">ユーザーフィルター</span>(<span class="monospaced">filter</span>): 特定のユーザーを対象とする追加のフィルターオプション。</p>
</li>
<li>
<p>
<span class="monospaced">グループフィルター</span>(<span class="monospaced">group_filter</span>): 特定のグループを対象とする追加フィルターオプション。</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">フィルターを使用すると、追加の一致条件セットを作成し、
同期の対象範囲を絞り込むことができます。利用可能なLDAPフィルタータイプとその使用方法に関する情報は、
<a href="https://ldap.com/ldap-filters/">ldap.com</a>で確認できます。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="pveum_ldap_sync_options">同期オプション
<a class="headerlink" href="#pveum_ldap_sync_options" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-realm-add-ldap-sync-options.png">
<img src="images/screenshot/gui-datacenter-realm-add-ldap-sync-options.png" alt="screenshot/gui-datacenter-realm-add-ldap-sync-options.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>前節で指定したオプションに加え、同期操作の動作を記述する追加オプションも設定可能です。</p></div>
<div class="paragraph">
<p>これらのオプションは、同期前にパラメータとして設定するか、
realm オプション<span class="monospaced">sync-defaults-options</span> 経由でデフォルト値として設定します。</p></div>
<div class="paragraph">
<p>同期の主なオプションは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">スコープ</span>(<span class="monospaced">scope</span>): 同期対象の範囲。<span class="monospaced">ユーザー</span>、<span class="monospaced">グループ</span>、または<span class="monospaced">その両方</span>を選択できます。</p>
</li>
<li>
<p>
<span class="monospaced">Enable new</span>(<span class="monospaced">有効化設定</span>): 設定すると、新規同期されたユーザーは有効化されログイン可能になります。デフォルトは<span class="monospaced">trueです</span>。</p>
</li>
<li>
<p>
<span class="monospaced">Remove Vanished</span>(<span class="monospaced">remove-vanished</span>): アクティブ化すると、同期レスポンスから返されなかった場合に削除するオプションのリスト。
  オプションは以下の通り：</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">ACL</span>(<span class="monospaced">acl)</span>: 同期応答で返されなかったユーザーおよびグループのACLを削除します。
      これは通常、<span class="monospaced">Entryと</span>組み合わせて使用します。</p>
</li>
<li>
<p>
<span class="monospaced">Entry</span>(<span class="monospaced">entry</span>): 同期応答で返されなかったエントリ（ユーザーやグループ）を削除します。</p>
</li>
<li>
<p>
<span class="monospaced">プロパティ</span>(<span class="monospaced">properties</span>): 同期応答内のユーザーがそれらの属性を含んでいなかった場合、
      エントリのプロパティを削除します。これには同期で設定されたことのないプロパティも含みます。
      例外はトークンと有効化フラグであり、このオプションが有効でも保持されます。</p>
</li>
</ul></div>
</li>
<li>
<p>
<span class="monospaced">プレビュー</span>(<span class="monospaced">dry-run</span>): 設定ファイルへの書き込みを行いません。どのユーザーやグループが<span class="monospaced">user.cfg</span> に同期されるかを確認したい場合に有用です。</p>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="pveum_ldap_reserved_characters">予約文字
<a class="headerlink" href="#pveum_ldap_reserved_characters" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>特定の文字は予約済み（<a href="https://www.ietf.org/rfc/rfc2253.txt">RFC2253</a>参照）であり、DN内の属性値で適切にエスケープされないと
容易に使用できません。</p></div>
<div class="paragraph">
<p>以下の文字はエスケープが必要です:</p></div>
<div class="ulist"><ul>
<li>
<p>
先頭または末尾のスペース ( )</p>
</li>
<li>
<p>
先頭のシャープ記号 (<span class="monospaced">#</span>)</p>
</li>
<li>
<p>
カンマ (<span class="monospaced">,</span>)</p>
</li>
<li>
<p>
プラス記号 (<span class="monospaced">+</span>)</p>
</li>
<li>
<p>
二重引用符 (<span class="monospaced">"</span>)</p>
</li>
<li>
<p>
スラッシュ (<span class="monospaced">/</span>)</p>
</li>
<li>
<p>
山括弧 (<span class="monospaced">&amp;lt;&amp;gt;</span>)</p>
</li>
<li>
<p>
セミコロン (<span class="monospaced">;</span>)</p>
</li>
<li>
<p>
等号（<span class="monospaced">=</span>）</p>
</li>
</ul></div>
<div class="paragraph">
<p>DN内でこれらの文字を使用するには、属性値を二重引用符で囲みます。
例：CN（共通名）が「<span class="monospaced">Example, User</span>」のユーザーでバインドする場合、
<span class="monospaced">bind_dnの</span>値として<span class="monospaced">「CN="Example, User",OU=people,DC=example,DC=com」</span>を指定します。</p></div>
<div class="paragraph">
<p>これは<span class="monospaced">base_dn</span>、<span class="monospaced">bind_dn</span>、<span class="monospaced">group_dn</span>属性に適用されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">コロンやスラッシュを含むユーザー名は、
ユーザー名における予約文字であるため同期できません。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="pveum_openid">14.5.6. OpenID Connect
<a class="headerlink" href="#pveum_openid" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>主な OpenID Connect 設定オプションは以下の通りです:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">発行元URL</span>(<span class="monospaced">issuer-url</span>): 認証サーバーのURLです。
Proxmox VEはOpenID Connect Discoveryプロトコルを使用して詳細設定を自動構成します。</p>
<div class="paragraph">
<p>暗号化されていない<span class="monospaced">http://</span>URL の使用は可能ですが、暗号化された<span class="monospaced">https://</span>接続の使用を強く推奨します。</p></div>
</li>
<li>
<p>
<span class="monospaced">Realm</span>(<span class="monospaced">realm</span>): Proxmox VE ユーザー用のレルム識別子</p>
</li>
<li>
<p>
<span class="monospaced">クライアントID</span>(<span class="monospaced">client-id</span>): OpenIDクライアントID。</p>
</li>
<li>
<p>
<span class="monospaced">クライアントキー</span>(<span class="monospaced">client-key</span>): オプションの OpenID クライアントキー。</p>
</li>
<li>
<p>
<span class="monospaced">ユーザー自動作成</span>(<span class="monospaced">autocreate</span>): ユーザーが存在しない場合に<span class="monospaced">自動作成します</span>。
認証はOpenIDサーバーで行われますが、すべてのユーザーはProxmox VEユーザー設定に
エントリが必要です。手動で追加するか、<span class="monospaced">自動作成</span>オプションを使用して新規ユーザーを
自動的に追加できます。</p>
</li>
<li>
<p>
<span class="monospaced">ユーザー名クレーム</span>(<span class="monospaced">username-claim</span>): 一意のユーザー名生成に使用するOpenIDクレーム
（<span class="monospaced">subject</span>、<span class="monospaced">username</span>、<span class="monospaced">またはemail</span>）。</p>
</li>
<li>
<p>
<span class="monospaced">グループの自動作成</span>(<span class="monospaced">groups-autocreate</span>): 既存のPVEグループを使用する代わりに、
クレーム内のすべてのグループを作成します（デフォルト動作）。</p>
</li>
<li>
<p>
<span class="monospaced">グループクレーム</span>(<span class="monospaced">groups-claim</span>): IDトークンまたはuserinfoエンドポイントからグループを取得するために使用するOpenIDクレーム。</p>
</li>
<li>
<p>
<span class="monospaced">グループの書き換え</span>(<span class="monospaced">groups-overwrite</span>): 既存グループへの追加ではなく、
ユーザーに割り当てられた全グループを上書きします（デフォルト動作）。</p>
</li>
</ul></div>
<div class="sect4">
<h5 id="_username_mapping">ユーザー名マッピング
<a class="headerlink" href="#_username_mapping" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>OpenID Connect仕様では、<span class="monospaced">subjectという</span>単一の一意の属性（OpenID用語では<em>クレーム</em>）が定義されています。デフォルトでは、この属性の値<span class="monospaced">に@と</span>レルム名を追加するだけでProxmox VEユーザー名を生成します：<span class="monospaced">${subject}@${realm}</span>。</p></div>
<div class="paragraph">
<p>残念ながら、ほとんどの<span class="monospaced">OpenIDサーバーはsubjectに</span>ランダムな文字列（例：<span class="monospaced">DGH76OKH34BNG3245SB</span>）を使用するため、典型的なユーザー<span class="monospaced">名はDGH76OKH34BNG3245SB@yourrealmの</span>ようになります。一意ではあるものの、人間がこのようなランダムな文字列を記憶するのは困難であり、実際のユーザーと関連付けることはほぼ不可能です。</p></div>
<div class="paragraph">
<p><span class="monospaced">ユーザー名クレーム設定により</span>、ユーザー名マッピングに他の属性を
使用できます。OpenID Connectサーバーがこの属性を提供し、
その一意性を保証する場合、<span class="monospaced">ユーザー名に設定</span>することが推奨されます。</p></div>
<div class="paragraph">
<p>別の選択肢として、人間が読み取り可能なユーザー名を生成する<span class="monospaced">メールアドレスの</span>使用があります。ただし、この設定もサーバーがこの属性の唯一性を保証する場合にのみ使用してください。</p></div>
</div>
<div class="sect4">
<h5 id="_groups_mapping">グループマッピング
<a class="headerlink" href="#_groups_mapping" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>OpenID設定で<span class="monospaced">groups-claim</span>を指定するとグループマッピング機能が有効になります。<span class="monospaced">groups-claimで</span>提供されるデータは、ユーザーがProxmox VEで所属すべきグループに対応する文字列のリストである必要があります。衝突を防止するため、OpenIDクレームのグループ名には
<span class="monospaced">-&amp;lt;レルム名&amp;gt;</span>が接尾辞として付加されます（例：レルム<span class="monospaced">oidc</span> 内の OpenID グループ名<span class="monospaced">my-openid-group</span>の場合、Proxmox VE 内のグループ名は<span class="monospaced">my-openid-group-oidc</span> となります）。</p></div>
<div class="paragraph">
<p>OpenIDプロバイダーから報告されたグループで、Proxmox VEに存在しないものはデフォルトで無視されます。OpenIDプロバイダーから報告されたすべてのグループをProxmox VEに存在させる必要がある場合、<span class="monospaced">groups-autocreate</span>オプションを使用してユーザーログイン時にこれらのグループを自動作成できます。</p></div>
<div class="paragraph">
<p>デフォルトでは、グループはユーザーの既存グループに追加されます。ユーザーがProxmox VEで既にメンバーとなっているグループを、OpenIDプロバイダーからのグループで上書きしたい場合があります。<span class="monospaced">groups-overwrite設定を</span>有効にすると、OpenIDプロバイダーから報告されたグループを追加する前に、Proxmox VEからユーザーのグループをすべて削除します。</p></div>
<div class="paragraph">
<p>場合によっては、OpenIDサーバーがProxmox VEのグループIDとして無効な文字を含むグループクレームを送信することがあります。Proxmox VEのグループ名で許可されていない文字を含むグループはすべて除外され、警告がログに記録されます。</p></div>
</div>
<div class="sect4">
<h5 id="_advanced_settings">詳細設定
<a class="headerlink" href="#_advanced_settings" title="Permalink to this heading"></a></h5>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">ユーザー情報エンドポイントのクエリ</span>(<span class="monospaced">query-userinfo</span>): このオプションを有効にすると、
OpenID Connect 認証システムがクレーム値を取得するために「userinfo」エンドポイントを
クエリします。このオプションを無効にすると、「userinfo」エンドポイントをサポートしない
一部のIDプロバイダー（例: ADFS）で有用です。</p>
</li>
</ul></div>
</div>
<div class="sect4">
<h5 id="_examples_9">例
<a class="headerlink" href="#_examples_9" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>Googleを使用したOpenIDレルム作成例を以下に示します。
<span class="monospaced">--client-id</span>および<span class="monospaced">--client-key</span>は、
Google OpenID設定の値に置き換えてください。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pveum realm add myrealm1 --type openid --issuer-url  https://accounts.google.com --client-id XXXX --client-key YYYY --username-claim email</pre>
</div></div>
<div class="paragraph">
<p>上記のコマンドでは<span class="monospaced">--username-claim email</span> を使用しているため、
Proxmox VE 側のユーザー名は<span class="monospaced">example.user@google.com@myrealm1</span> の形式になります。</p></div>
<div class="paragraph">
<p>Keycloak (<a href="https://www.keycloak.org/">https://www.keycloak.org/</a>) は人気のオープンソースID管理ツールで、
OpenID Connectをサポートしています。以下の例では、
<span class="monospaced">--issuer-url</span>と<span class="monospaced">--client-id</span>を自身の情報に置き換えてください：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pveum realm add myrealm2 --type openid --issuer-url  https://your.server:8080/realms/your-realm --client-id XXX --username-claim username</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">--username-claim</span>usernameを使用すると、Proxmox<span class="monospaced">VE側でexample.</span>user@myrealm2のような簡易ユーザー名が有効になります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">ユーザー自身が（Keycloakサーバー上で）
ユーザー名設定を編集できないようにする必要があります。</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pveum_tfa_auth">
<span>14.6. 二要素認証</span>
<a class="headerlink" href="#pveum_tfa_auth" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>二要素認証を利用するには2つの方法があります：</p></div>
<div class="paragraph">
<p>認証レルムによって要求される場合があり、<em>TOTP</em>（時間ベースのワンタイムパスワード）または<em>YubiKey OTPを介して</em>実施されます。この場合、新規作成されたユーザーは、第二要素なしではログインできないため、すぐに鍵を追加する必要があります。<em>TOTPの場合</em>、ユーザーは最初にログインできれば、後で<em>TOTP</em>を変更することもできます。</p></div>
<div class="paragraph">
<p>あるいは、レルムが強制しなくても、ユーザーが後から二要素認証を
任意で有効化することも可能です。</p></div>
<div class="sect3">
<h4 id="_available_second_factors">14.6.1. 利用可能な第二要素
<a class="headerlink" href="#_available_second_factors" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>スマートフォンやセキュリティキーを紛失した場合にアカウントから永久に締め出される事態を避けるため、複数の第二要素を設定できます。</p></div>
<div class="paragraph">
<p>レルム強制のTOTPおよびYubiKey OTPに加え、以下の二要素認証方式が利用可能です：</p></div>
<div class="ulist"><ul>
<li>
<p>
ユーザー設定のTOTP
  (<a href="https://en.wikipedia.org/wiki/Time-based_One-Time_Password">時間ベースのワンタイムパスワード</a>)。
  共有秘密鍵と現在時刻から生成される短いコードで、
  30秒ごとに更新されます。</p>
</li>
<li>
<p>
WebAuthn (<a href="https://en.wikipedia.org/wiki/WebAuthn">Web認証</a>)。
  認証のための汎用標準。ハードウェアキーやコンピュータ/スマートフォンの
  信頼できるプラットフォームモジュール(TPM)など、様々なセキュリティデバイスで
  実装される。</p>
</li>
<li>
<p>
単回使用リカバリーキー。
  印刷して安全な場所に保管するか、
  電子保管庫にデジタル保存すべきキーのリスト。
  各キーは一度しか使用できません。
  他の二次認証手段を全て紛失・破損した場合でも
  確実にロックアウトされないための完璧な手段です。</p>
</li>
</ul></div>
<div class="paragraph">
<p>WebAuthnがサポートされる前は、ユーザーがU2Fを設定できました。既存のU2F要素は引き続き使用可能ですが、サーバーで設定されたらWebAuthnへの切り替えが推奨されます。</p></div>
</div>
<div class="sect3">
<h4 id="_realm_enforced_two_factor_authentication">14.6.2. Realm による強制的な二要素認証
<a class="headerlink" href="#_realm_enforced_two_factor_authentication" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>認証領域の追加・編集時に<em>TFAドロップダウン</em>ボックスから利用可能な方法を選択することで設定可能です。
領域でTFAが有効化されると必須要件となり、設定済みのTFAを持つユーザーのみログイン可能となります。</p></div>
<div class="paragraph">
<p>現在利用可能な方法は2つあります：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
時間ベースのOATH (TOTP)</dt>
<dd>
<p>
標準のHMAC-SHA1アルゴリズムを使用し、
ユーザー設定のキーと現在時刻をハッシュ化します。
時間間隔とパスワード長パラメータは設定可能です。</p>
<div class="paragraph">
<p>ユーザーは複数のキーを設定可能（スペース区切り）であり、キーはBase32（RFC3548）または16進表記で指定できます。</p></div>
<div class="paragraph">
<p>Proxmox VEはキー生成ツール（<span class="monospaced">oathkeygen</span>）を提供しており、Base32表記のランダムなキーを出力します。このキーは、<span class="monospaced">oathtoolコマンドライン</span>ツールやAndroidのGoogle Authenticator、FreeOTP、andOTPなどのアプリケーションで直接使用できます。</p></div>
</dd>
<dt class="hdlist1">
YubiKey OTP</dt>
<dd>
<p>
YubiKeyによる認証には、Yubico API ID、APIキー、検証サーバーURLの設定が必要です。またユーザーはYubiKeyを所持している必要があります。YubiKeyからキーIDを取得するには、USB接続後にYubiKeyを一度トリガーし、入力されたパスワードの最初の12文字をユーザーの<em>「キーID」</em>フィールドにコピーします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><a href="https://www.yubico.com/products/services-software/yubicloud/">YubiCloud</a>の使用方法や
<a href="https://developers.yubico.com/Software_Projects/Yubico_OTP/YubiCloud_Validation_Servers/">検証サーバーの自社ホスティングについては</a>、
<a href="https://developers.yubico.com/OTP/">YubiKey OTP</a>のドキュメントを参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="pveum_tfa_lockout">14.6.3. 二要素認証の制限とロックアウト
<a class="headerlink" href="#pveum_tfa_lockout" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>第二要素は、パスワードが何らかの形で漏洩または推測された場合にユーザーを保護する目的です。ただし、一部の要素は総当たり攻撃によって破られる可能性があります。このため、第二要素によるログイン失敗が一定回数を超えるとユーザーはロックアウトされます。</p></div>
<div class="paragraph">
<p>TOTPの場合、8回失敗するとユーザーのTOTP要素が無効化されます。復旧キーでログインすると解除されます。TOTPが唯一の要素だった場合、管理者の介入が必要となり、ユーザーに直ちにパスワード変更を要求することが強く推奨されます。</p></div>
<div class="paragraph">
<p>FIDO2/Webauthnと復旧キーは総当たり攻撃の影響を受けにくいため、
その制限はより高く設定されています（100回）。ただし、制限を超えた場合、
すべての第二要素が1時間ブロックされます。</p></div>
<div class="paragraph">
<p>管理者はUIのユーザー一覧またはコマンドラインから、いつでもユーザーの二要素認証を解除できます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum user tfa unlock joe@pve</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="pveum_user_configured_totp">14.6.4. ユーザー設定のTOTP認証
<a class="headerlink" href="#pveum_user_configured_totp" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ユーザーはログイン時に、ユーザーリストの<em>TFAボタンから</em> <em>TOT</em> <em>PまたはWebAuthnを第二要素</em>として有効化できます（領域が<em>YubiKey OTPを</em>強制している場合を除く）。</p></div>
<div class="paragraph">
<p>ユーザーはいつでもワンタイム<em>復旧キー</em>を追加・使用できます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-two-factor.png">
<img src="images/screenshot/gui-datacenter-two-factor.png" alt="screenshot/gui-datacenter-two-factor.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p><em>TFAウィンドウ</em>を開くと、<em>TOTP認証</em>設定ダイアログが表示されます。
「<em>シークレット</em>」フィールドには鍵が表示され、
<em>「ランダム化</em>」ボタンでランダム生成可能です。
オプションの<em>「発行者名」</em>を追加すると、
<em>TOTPアプリに</em>鍵の所属情報を提供できます。
大半<em>のTOTPアプリは</em>発行者名と<em>対応するOTP</em>値を併せて表示します。
ユーザー名は<em>TOTPアプリ</em>用QRコードにも含まれます。</p></div>
<div class="paragraph">
<p>キー生成後、FreeOTPなどの大半のOTPアプリで使用可能なQRコードが表示されます。ユーザーは現在のユーザーパスワード（<em>rootとして</em>ログインしている場合を除く）を確認し、<em>さらに検証コードフィールドに</em>現在の<em>OTP値</em>を入力して<em>適用ボタンを押すことで</em>、<em>TOTP</em>キーを<em>正しく</em>使用できることを確認する必要があります。</p></div>
</div>
<div class="sect3">
<h4 id="user_tfa_setup_totp">14.6.5. TOTP
<a class="headerlink" href="#user_tfa_setup_totp" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-gui-tfa-add-totp.png">
<img src="images/screenshot/pve-gui-tfa-add-totp.png" alt="screenshot/pve-gui-tfa-add-totp.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>サーバー設定は不要です。スマートフォンにTOTPアプリ（例：<a href="https://freeotp.github.io/">FreeOTP</a>）をインストールし、
Proxmox VEのWebインターフェースでTOTP要素を追加するだけです。</p></div>
</div>
<div class="sect3">
<h4 id="user_tfa_setup_webauthn">14.6.6. WebAuthn
<a class="headerlink" href="#user_tfa_setup_webauthn" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>WebAuthnを機能させるには、以下の2点が必要です：</p></div>
<div class="ulist"><ul>
<li>
<p>
信頼されたHTTPS証明書（例：<a href="https://pve.proxmox.com/wiki/Certificate_Management">Let’s Encryptを使用</a>）。
信頼されていない証明書でも動作する可能性がありますが、信頼されていない場合、一部のブラウザはWebAuthn操作に対して警告を表示したり拒否したりする可能性があります。</p>
</li>
<li>
<p>
WebAuthn設定を構成する（Proxmox VEウェブインターフェースの
「<strong>データセンター → オプション → WebAuthn設定」</strong>を参照）。
ほとんどの設定では自動入力可能。</p>
</li>
</ul></div>
<div class="paragraph">
<p>両方の要件を満たしたら、[<strong>データセンター] → [権限] → [二要素認証]</strong> の
[<strong>二要素認証</strong>] パネルで WebAuthn 設定を追加できます。</p></div>
</div>
<div class="sect3">
<h4 id="user_tfa_setup_recovery_keys">14.6.7. リカバリキー
<a class="headerlink" href="#user_tfa_setup_recovery_keys" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/pve-gui-tfa-add-recovery-keys.png">
<img src="images/screenshot/pve-gui-tfa-add-recovery-keys.png" alt="screenshot/pve-gui-tfa-add-recovery-keys.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>リカバリキーコードは事前準備が不要です。
「<strong>データセンター」→「権限」→「二要素認証</strong>」のパネルで
リカバリキーのセットを簡単に作成できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ユーザーごとに、一度限りの回復キーは常に1セットのみ存在できます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pveum_configure_webauthn">14.6.8. サーバーサイド Webauthn 設定
<a class="headerlink" href="#pveum_configure_webauthn" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-webauthn-edit.png">
<img src="images/screenshot/gui-datacenter-webauthn-edit.png" alt="screenshot/gui-datacenter-webauthn-edit.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>ユーザーが<em>WebAuthn認証</em>を利用できるようにするには、有効なSSL証明書を持つ有効なドメインを使用する必要があります。そうしないと、一部のブラウザが警告を表示したり、認証を完全に拒否したりする可能性があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><em>WebAuthn</em>設定を変更すると、既存の<em>WebAuthn登録</em>がすべて使用不能になる可能性があります！</td>
</tr></table>
</div>
<div class="paragraph">
<p>これは<span class="monospaced">/etc/pve/datacenter.cfg</span> で行います。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>webauthn: rp=mypve.example.com,origin=https://mypve.example.com:8006,id=mypve.example.com</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pveum_configure_u2f">14.6.9. サーバーサイド U2F 設定
<a class="headerlink" href="#pveum_configure_u2f" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">代わりにWebAuthnの使用を推奨します。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ユーザーが<em>U2F</em>認証を利用できるようにするには、有効なSSL証明書を持つ有効なドメインを使用する必要がある場合があります。そうしないと、一部のブラウザが警告を表示したり、U2Fの使用を完全に拒否したりする可能性があります。最初に、<em>AppId</em><span class="footnote"><br>[AppId<a href="https://developers.yubico.com/U2F/App_ID.html">https://developers.yubico.com/U2F/App_ID.html</a>]<br></span>を設定する必要があります。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><em>AppId</em>を変更すると、既存の<em>U2F</em>登録がすべて使用不能になります！</td>
</tr></table>
</div>
<div class="paragraph">
<p>これは<span class="monospaced">/etc/pve/datacenter.cfg</span> 経由で設定します。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>u2f: appid=https://mypve.example.com:8006</pre>
</div></div>
<div class="paragraph">
<p>単一ノードの場合、<em>AppIdは</em>ウェブインターフェースのアドレス（ブラウザで使用されるものと同じ形式、<em>https://と</em>ポートを含む）をそのまま指定できます。ただし、<em>AppIdの</em>マッチングにおいてブラウザによって厳格度が異なる点に注意してください。</p></div>
<div class="paragraph">
<p>複数ノードを使用する場合、<span class="monospaced">別個のhttpsサーバー</span>で
<span class="monospaced">appid.json</span>を提供するのが最適です
<span class="footnote"><br>[マルチファセットアプリ:<a href="https://developers.yubico.com/U2F/App_ID.html">https://developers.yubico.com/U2F/App_ID.html</a>]<br></span>ファイルを提供することを推奨します。これはほとんどのブラウザと互換性があるようです。
全てのノードが同一トップレベルドメインのサブドメインを使用している場合、
<em>AppIdとして</em>TLDを使用するだけで十分かもしれません。ただし、一部のブラウザでは
これが受け入れられない可能性があることに注意してください。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">不正<em>なAppIdは</em>通常エラーを発生させますが、特にChromiumでサブドメイン経由でアクセスされるノードに対してトップレベルドメイン<em>のAppId</em>を使用する場合など、エラーが発生しない事例が確認されています。このため、<em>AppIdを</em>後から変更すると<em>既存のU2F</em>登録が無効化されるため、複数のブラウザで設定をテストすることを推奨します。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pveum_user_configured_u2f">14.6.10. ユーザーによる U2F の有効化
<a class="headerlink" href="#pveum_user_configured_u2f" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><em>U2F認証を</em>有効にするには、<em>TFAウィンドウ</em> <em>のU2Fタブ</em>を開き、
現在のパスワードを入力（rootとしてログインしている場合を除く）し、
<em>「登録」</em>ボタンを押します。
サーバーが正しく設定され、ブラウザがサーバー提供の<em>AppId</em>を受け入れる場合、
<em>U2Fデバイスの</em>ボタンを押すよう促すメッセージが表示されます（<em>YubiKeyの場合</em>、
ボタンライトが約1秒に2回で点滅します）。</p></div>
<div class="paragraph">
<p>Firefoxユーザーは、<em>U2F</em>トークンを使用<em>する前にabout:</em>config経由で<em>security.webauth.u2fを</em>有効にする必要がある場合があります。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="pveum_permission_management">
<span>14.7. 権限管理</span>
<a class="headerlink" href="#pveum_permission_management" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ユーザーが操作（VM設定の一部の一覧表示、変更、削除など）を実行するには、
適切な権限が必要です。</p></div>
<div class="paragraph">
<p>Proxmox VEはロールとパスに基づく権限管理システムを採用しています。権限テーブルのエントリにより、ユーザー、グループ、トークンは<em>オブ</em> <em>ジェクトやパス</em>にアクセスする際に特定の役割を引き受けることができます。これは、そのようなアクセスルールが<em>(パス, ユーザー, 役割)、</em> <em>(パス, グループ, 役割)、</em>または<em>(パス, トークン, 役割)</em> <em> の</em>三重組として表現できることを意味します。役割は許可されたアクションのセットを含み、パスはこれらのアクションの対象を表します。</p></div>
<div class="sect3">
<h4 id="pveum_roles">14.7.1. ロール
<a class="headerlink" href="#pveum_roles" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ロールとは単に権限のリストです。Proxmox VEには多数の事前定義ロールが付属しており、ほとんどの要件を満たします。</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">管理者</span>: 完全な権限を持つ</p>
</li>
<li>
<p>
<span class="monospaced">NoAccess</span>: 特権なし（アクセス禁止に使用）</p>
</li>
<li>
<p>
<span class="monospaced">PVEAdmin</span>: ほとんどのタスクを実行可能ですが、システム設定
  (<span class="monospaced">Sys.PowerMgmt</span>,<span class="monospaced">Sys.Modify</span>,<span class="monospaced">Realm.Allocate</span>) や権限
  (<span class="monospaced">Permissions.Modify</span>) の変更権限はありません</p>
</li>
<li>
<p>
<span class="monospaced">PVEAuditor</span>: 読み取り専用アクセス権を持つ</p>
</li>
<li>
<p>
<span class="monospaced">PVEDatastoreAdmin</span>: バックアップ領域とテンプレートの作成および割り当て</p>
</li>
<li>
<p>
<span class="monospaced">PVEDatastoreUser</span>: バックアップ領域の割り当てとストレージの閲覧</p>
</li>
<li>
<p>
<span class="monospaced">PVEMappingAdmin</span>: リソースマッピングを管理</p>
</li>
<li>
<p>
<span class="monospaced">PVEMappingUser</span>: リソースマッピングの閲覧と使用</p>
</li>
<li>
<p>
<span class="monospaced">PVEPoolAdmin</span>: プールの割り当て</p>
</li>
<li>
<p>
<span class="monospaced">PVEPoolUser</span>: プールを表示する</p>
</li>
<li>
<p>
<span class="monospaced">PVESDNAdmin</span>: SDN構成を管理する</p>
</li>
<li>
<p>
<span class="monospaced">PVESDNUser</span>: ブリッジ/仮想ネットワークへのアクセス</p>
</li>
<li>
<p>
<span class="monospaced">PVESysAdmin</span>: 監査、システムコンソール、システムログ</p>
</li>
<li>
<p>
<span class="monospaced">PVETemplateUser</span>: テンプレートの閲覧と複製</p>
</li>
<li>
<p>
<span class="monospaced">PVEUserAdmin</span>: ユーザー管理</p>
</li>
<li>
<p>
<span class="monospaced">PVEVMAdmin</span>: VMの完全な管理</p>
</li>
<li>
<p>
<span class="monospaced">PVEVMUser</span>: 表示、バックアップ、CD-ROM設定、VMコンソール、VM電源管理</p>
</li>
</ul></div>
<div class="paragraph">
<p>GUIでは事前定義済みロールの全セットを確認できます。</p></div>
<div class="paragraph">
<p>新規ロールはGUIまたはコマンドラインで追加可能です。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-role-add.png">
<img src="images/screenshot/gui-datacenter-role-add.png" alt="screenshot/gui-datacenter-role-add.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>GUIでは、<em>データセンターの</em> <em>[権限]→[ロール</em>]タブに移動し、
<em>[作成]</em>ボタンをクリックします。ここでロール名を設定し、
[<em>権限]</em>ドロップダウンメニューから必要な権限を選択できます。</p></div>
<div class="paragraph">
<p>コマンドラインでロールを追加するには、<em>pveum</em>CLIツールを使用します。
例:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>pveum role add VM_Power-only --privs<span style="color: #FF0000">"VM.PowerMgmt VM.Console"</span>
pveum role add Sys_Power-only --privs<span style="color: #FF0000">"Sys.PowerMgmt Sys.Console"</span></tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">PVE</span>で始まるロールは常に組み込みであり、カスタムロールはこの予約済みプレフィックスを使用できません。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_privileges">14.7.2. 権限
<a class="headerlink" href="#_privileges" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>特権とは特定の操作を実行する権限です。管理を簡素化するため、
特権のリストはロールにグループ化され、権限テーブルで使用できます。
特権はロールの一部として含まれない限り、ユーザーやパスに直接割り当てられない点に注意してください。</p></div>
<div class="paragraph">
<p>現在サポートしている権限は以下の通りです：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
ノード / システム関連の権限</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">Group.Allocate</span>: グループの作成/変更/削除</p>
</li>
<li>
<p>
<span class="monospaced">Mapping.Audit</span>: リソースマッピングの表示</p>
</li>
<li>
<p>
<span class="monospaced">Mapping.Modify</span>: リソースマッピングを管理</p>
</li>
<li>
<p>
<span class="monospaced">マッピング.使用</span>: リソースマッピングを使用する</p>
</li>
<li>
<p>
<span class="monospaced">Permissions.Modify</span>: アクセス権限を変更する</p>
</li>
<li>
<p>
<span class="monospaced">プール割り当て</span>: プールの作成/変更/削除</p>
</li>
<li>
<p>
<span class="monospaced">Pool.Audit</span>: プールを表示する</p>
</li>
<li>
<p>
<span class="monospaced">Realm.AllocateUser</span>: ユーザーをレルムに割り当てる</p>
</li>
<li>
<p>
<span class="monospaced">Realm.Allocate</span>: 認証レルムの作成/変更/削除</p>
</li>
<li>
<p>
<span class="monospaced">SDN.Allocate</span>: SDN構成を管理する</p>
</li>
<li>
<p>
<span class="monospaced">SDN.Audit</span>: SDN設定の表示</p>
</li>
<li>
<p>
<span class="monospaced">Sys.Audit</span>: ノード状態/設定、Corosyncクラスタ設定、HA設定の表示</p>
</li>
<li>
<p>
<span class="monospaced">Sys.Console</span>: ノードへのコンソールアクセス</p>
</li>
<li>
<p>
<span class="monospaced">Sys.Incoming</span>: 他のクラスタからのデータストリーム受信を許可（実験的）</p>
</li>
<li>
<p>
<span class="monospaced">Sys.Modify</span>: ノードネットワークパラメータの作成/変更/削除</p>
</li>
<li>
<p>
<span class="monospaced">Sys.PowerMgmt</span>: ノードの電源管理（起動、停止、リセット、シャットダウンなど）</p>
</li>
<li>
<p>
<span class="monospaced">Sys.Syslog</span>: システムログの表示</p>
</li>
<li>
<p>
<span class="monospaced">User.Modify</span>: ユーザーアクセスと詳細の作成/変更/削除</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
仮想マシン関連の権限</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">SDN.Use</span>: SDN仮想ネットワークとローカルネットワークブリッジへのアクセス</p>
</li>
<li>
<p>
<span class="monospaced">VM.Allocate</span>: サーバー上の仮想マシンの作成/削除</p>
</li>
<li>
<p>
<span class="monospaced">VM.Audit</span>: VM設定の表示</p>
</li>
<li>
<p>
<span class="monospaced">VM.Backup</span>: VMのバックアップ/復元</p>
</li>
<li>
<p>
<span class="monospaced">VM.Clone</span>: VMのクローン作成/コピー</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.CDROM</span>: CD-ROMの取り出し/変更</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.CPU</span>: CPU設定を変更する</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.Cloudinit</span>: Cloud-initパラメータを変更</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.Disk</span>: ディスクの追加/変更/削除</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.HWType</span>: エミュレートされるハードウェアの種類を変更する</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.Memory</span>: メモリ設定を変更する</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.Network</span>: ネットワークデバイスの追加/変更/削除</p>
</li>
<li>
<p>
<span class="monospaced">VM.Config.Options</span>: その他のVM設定を変更</p>
</li>
<li>
<p>
<span class="monospaced">VM.Console</span>: VMへのコンソールアクセス</p>
</li>
<li>
<p>
<span class="monospaced">VM.GuestAgent.Audit</span>: QEMUゲストエージェントの情報コマンドを発行</p>
</li>
<li>
<p>
<span class="monospaced">VM.GuestAgent.FileRead</span>: QEMUゲストエージェント経由でゲストからファイルを読み取る</p>
</li>
<li>
<p>
<span class="monospaced">VM.GuestAgent.FileSystemMgmt</span>: QEMUゲストエージェント経由でファイルシステムの凍結/解凍/トリミングを実行
  </p>
</li>
<li>
<p>
<span class="monospaced">VM.GuestAgent.FileWrite</span>: QEMUゲストエージェント経由でゲスト内のファイルを書き込み</p>
</li>
<li>
<p>
<span class="monospaced">VM.GuestAgent.Unrestricted</span>: 任意のQEMUゲストエージェントコマンドを発行する</p>
</li>
<li>
<p>
<span class="monospaced">VM.Migrate</span>: クラスタ内の代替サーバーへ仮想マシンを移行する</p>
</li>
<li>
<p>
<span class="monospaced">VM.PowerMgmt</span>: 電源管理（起動、停止、再起動、シャットダウンなど）</p>
</li>
<li>
<p>
<span class="monospaced">VM.Replicate</span>: ゲストレプリケーションの設定と実行</p>
</li>
<li>
<p>
<span class="monospaced">VM.Snapshot.Rollback</span>: VMをスナップショットの1つにロールバック</p>
</li>
<li>
<p>
<span class="monospaced">VM.Snapshot</span>: VMスナップショットの作成/削除</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
ストレージ関連の権限</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">Datastore.Allocate</span>: データストアの作成/変更/削除およびボリュームの削除</p>
</li>
<li>
<p>
<span class="monospaced">Datastore.AllocateSpace</span>: データストア上のスペースを割り当てる</p>
</li>
<li>
<p>
<span class="monospaced">Datastore.AllocateTemplate</span>: テンプレートとISOイメージの割り当て/アップロード</p>
</li>
<li>
<p>
<span class="monospaced">Datastore.Audit</span>: データストアの閲覧/参照</p>
</li>
</ul></div>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">Permissions.Modify</span>および<span class="monospaced">Sys.Modify</span>は、
システムやその設定の危険または機密性の高い側面を変更できるため、
慎重に扱う必要があります。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">割り当てられたロール（およびその権限）がACLツリーに沿ってどのように伝播されるかを理解するため、
下記の継承に関するセクションを注意深くお読みください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_objects_and_paths">14.7.3. オブジェクトとパス
<a class="headerlink" href="#_objects_and_paths" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>アクセス権限は仮想マシン、ストレージ、リソースプールなどのオブジェクトに割り当てられます。
これらのオブジェクトの指定にはファイルシステムのようなパスを使用します。これらのパスは自然なツリー構造を形成し、上位レベル（短いパス）の権限は階層内で下位へ伝播させることが可能です。</p></div>
<div class="paragraph" id="pveum_templated_paths">
<p>パスはテンプレート化可能です。API呼び出しがテンプレート化されたパスに対する権限を必要とする場合、そのパスにはAPI呼び出しのパラメータへの参照を含めることができます。これらの参照は中括弧で指定されます。一部のパラメータは
API呼び出しのURIから暗黙的に取得されます。例えば、<em>/nodes/mynode/status</em>を呼び出す際の権限パス
<span class="monospaced">/nodes/{node}</span><span class="monospaced">は/nodes/mynodeへの</span>権限を必要とし、<span class="monospaced">/access/aclへの</span>PUTリクエストにおけるパス<span class="monospaced">{path}</span>は
メソッドの<span class="monospaced">path</span>パラメータを参照します。</p></div>
<div class="paragraph">
<p>例をいくつか挙げます：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">/nodes/{node}</span>: Proxmox VE サーバーマシンへのアクセス</p>
</li>
<li>
<p>
<span class="monospaced">/vms</span>: すべての仮想マシンをカバー</p>
</li>
<li>
<p>
<span class="monospaced">/vms/{vmid}</span>: 特定の仮想マシンへのアクセス</p>
</li>
<li>
<p>
<span class="monospaced">/storage/{storeid}</span>: 特定のストレージへのアクセス</p>
</li>
<li>
<p>
<span class="monospaced">/pool/{poolname}</span>: 特定の<a href="#pveum_pools">プール</a>に含まれるリソースへのアクセス</p>
</li>
<li>
<p>
<span class="monospaced">/access/groups</span>: グループ管理</p>
</li>
<li>
<p>
<span class="monospaced">/access/realms/{realmid}</span>: レルムへの管理アクセス</p>
</li>
</ul></div>
<div class="sect4">
<h5 id="_inheritance">継承<a class="headerlink" href="#_inheritance" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>前述の通り、オブジェクトパスはファイルシステムのようなツリー構造を形成し、
権限はそのツリー下位のオブジェクトに継承されます（プロパゲートフラグは
デフォルトで設定されています）。以下の継承ルールを適用します：</p></div>
<div class="ulist"><ul>
<li>
<p>
個々のユーザーの権限は常にグループ権限を上書きします。</p>
</li>
<li>
<p>
グループ権限は、ユーザーがそのグループのメンバーである場合に適用されます。</p>
</li>
<li>
<p>
より深い階層の権限は、上位階層から継承された権限を上書きします。</p>
</li>
<li>
<p>
<span class="monospaced">NoAccess は</span>指定パス上の他の全てのロールを無効化します。</p>
</li>
</ul></div>
<div class="paragraph">
<p>さらに、特権分離トークンは、関連付けられたユーザーが持たない権限を
特定のパスに対して持つことは決してありません。</p></div>
</div>
</div>
<div class="sect3">
<h4 id="pveum_pools">14.7.4. プール
<a class="headerlink" href="#pveum_pools" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>プールは仮想マシンとデータストアのグループ化に使用できます。
プール（<span class="monospaced">/pool/{poolid}</span>）に対して権限を設定するだけで、
その権限はプール内の全メンバーに継承されます。
これはアクセス制御を簡素化する優れた方法です。</p></div>
</div>
<div class="sect3">
<h4 id="_which_permissions_do_i_need">14.7.5. 必要な権限は？
<a class="headerlink" href="#_which_permissions_do_i_need" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>必要なAPI権限は各メソッドごとに文書化されており、
<a href="https://pve.proxmox.com/pve-docs/api-viewer/">https://pve.proxmox.com/pve-docs/api-viewer/</a> で確認できます<a href="https://pve.proxmox.com/pve-docs/api-viewer/">。</a></p></div>
<div class="paragraph">
<p>権限はリストとして指定され、論理とアクセスチェック関数のツリーとして解釈されます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">["and", &amp;lt;サブテスト&amp;gt;...]</span>and<span class="monospaced">["or", &amp;lt;サブテスト&amp;gt;...]</span></dt>
<dd>
<p>
現在のリスト内の各要素（<span class="monospaced">and</span>）または任意の要素（<span class="monospaced">or</span>）が真である必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">["perm", &amp;lt;path&amp;gt;, [ &amp;lt;privileges&amp;gt;... ], &amp;lt;options&amp;gt;...]</span></dt>
<dd>
<p>
<span class="monospaced">パスは</span>テンプレート化されたパラメータです（<a href="#pveum_templated_paths">オブジェクトとパスを参照</a>）。リストされた特権のすべて（または、<span class="monospaced">any</span>オプションが使用されている場合はいずれか）が、指定されたパスで許可されている必要があります。<span class="monospaced">require-paramオプション</span>が指定されている場合、その指定されたパラメータは、API呼び出しのスキーマでそれ以外がオプションとしてリストされている場合でも必須となります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">["userid-group", [ &amp;lt;privileges&amp;gt;... ], &amp;lt;options&amp;gt;...]</span></dt>
<dd>
<p>
呼び出し元は<span class="monospaced">/access/groups</span> に対してリストされた特権のいずれかを持つ必要がある。
さらに、<span class="monospaced">groups_param</span>オプションの設定有無に応じて、以下の2種類のチェックが行われる：</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">groups_param</span>が設定されている場合: API 呼び出しに必須の<span class="monospaced">groups</span>パラメータが含まれており、
呼び出し元はリストされた全グループに対してリストされた権限のいずれかを
有している必要があります。</p>
</li>
<li>
<p>
<span class="monospaced">groups_param</span>が設定されていない場合:<span class="monospaced">userid</span>パラメータで渡されたユーザーは存在し、
呼び出し元がリストされた特権のいずれかを保持するグループに所属している必要があります
（<span class="monospaced">/access/groups/&amp;lt;group&amp;gt;</span>パス経由）。</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">["userid-param", "self"]</span></dt>
<dd>
<p>
API呼び出しの<span class="monospaced">userid</span>パラメータに指定された値は、
アクションを実行するユーザーを参照している必要があります（通常は<span class="monospaced">or</span>と組み合わせて、
昇格された権限を持たないユーザーでも自身に対してアクションを実行できるようにするため）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">["userid-param", "Realm.AllocateUser"]</span></dt>
<dd>
<p>
ユーザーは<span class="monospaced">/access/realm/&amp;lt;realm&amp;gt;</span> に対する<span class="monospaced">Realm.AllocateUser</span>アクセス権を必要とします。ここで<span class="monospaced">&amp;lt;realm&amp;gt;</span>は<span class="monospaced">userid パラメータ</span>で渡されるユーザーのレルムを指します。ユーザー ID は<span class="monospaced">&amp;lt;username&amp;gt;@&amp;lt;realm&amp;gt;</span> の形式で渡されるため、レルムに関連付けられるためにユーザーが実際に存在する必要はないことに注意してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">["perm-modify", &amp;lt;path&amp;gt;]</span></dt>
<dd>
<p>
<span class="monospaced">このパスは</span>テンプレート化されたパラメータです（<a href="#pveum_templated_paths">オブジェクトとパスを参照</a>）。ユーザーには<span class="monospaced">Permissions.Modify</span>権限、またはパスに応じて以下の権限のいずれかが必要です：</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">/storage/...</span>: 'Datastore.Allocate` が必要</p>
</li>
<li>
<p>
<span class="monospaced">/vms/...</span>: 'VM.Allocate` が必要</p>
</li>
<li>
<p>
<span class="monospaced">/pool/...</span>: 'Pool.Allocate` が必要</p>
<div class="paragraph">
<p>パスが空の場合、<span class="monospaced">/access</span>に対する<span class="monospaced">Permissions.Modify</span>権限が必要です。</p></div>
<div class="paragraph">
<p>ユーザーが<span class="monospaced">Permissions.Modify</span>特権を持たない場合、指定されたパス上で自身の特権のサブセットのみを委任できます（例：<span class="monospaced">PVEVMAdmin</span>を持つユーザーは<span class="monospaced">PVEVMUser を</span>割り当て可能ですが、<span class="monospaced">PVEAdmin は</span>不可）。</p></div>
</li>
</ul></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect2">
<h3 id="_command_line_tool">
<span>14.8. コマンドラインツール</span>
<a class="headerlink" href="#_command_line_tool" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ほとんどのユーザーはGUIを使用してユーザーを管理します。ただし、
<span class="monospaced">pveum</span>（<strong>「</strong><strong>Proxmox</strong><strong>VE</strong> <strong>User</strong> <strong>Manager」</strong>の略称）と呼ばれる
フル機能のコマンドラインツールも利用可能です。すべてのProxmox VEコマンドラインツールは
APIをラップしたものであるため、これらの機能はREST API経由でもアクセス可能である点に注意してください。</p></div>
<div class="paragraph">
<p>簡単な使用例を以下に示します。ヘルプを表示するには、以下を入力してください：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum</tt></pre></div></div>
<div class="paragraph">
<p>または（特定のコマンドの詳細ヘルプを表示する場合）</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum<span style="font-weight: bold"><span style="color: #0000FF">help user</span></span>add</tt></pre></div></div>
<div class="paragraph">
<p>新規ユーザー作成:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum user add testuser@pve -comment "<span style="color: #FF0000">Just a test"</span></tt></pre></div></div>
<div class="paragraph">
<p>パスワードの設定または変更（すべての領域でサポートされているわけではありません）:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum passwd testuser@pve</tt></pre></div></div>
<div class="paragraph">
<p>ユーザーを無効化:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum user modify testuser@pve -enable 0</tt></pre></div></div>
<div class="paragraph">
<p>新しいグループを作成:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum group add testgroup</tt></pre></div></div>
<div class="paragraph">
<p>新しいロールを作成:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum role add PVE_Power-only -privs "<span style="color: #FF0000">VM.PowerMgmt VM.Console"</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_real_world_examples">
<span>14.9. 実世界の事例</span>
<a class="headerlink" href="#_real_world_examples" title="Permalink to this heading"></a></h3>
<div class="sect3">
<h4 id="_administrator_group">14.9.1. 管理者グループ
<a class="headerlink" href="#_administrator_group" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>管理者は、rootアカウントを使用せずに完全な管理者権限を持つユーザーグループを作成したい場合があります。</p></div>
<div class="paragraph">
<p>これを行うには、まずグループを定義します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum group add admin -comment "<span style="color: #FF0000">システム管理者"</span></tt></pre></div></div>
<div class="paragraph">
<p>次にロールを割り当てます:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum acl modify /<span style="color: #990000">-group</span>admin -role Administrator</tt></pre></div></div>
<div class="paragraph">
<p>最後に、新しい<em>管理者</em>グループにユーザーを追加できます:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum user modify testuser@pve -group admin</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_auditors">14.9.2. 監査担当者
<a class="headerlink" href="#_auditors" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ユーザーまたはグループに<span class="monospaced">PVEAuditor</span>ロールを割り当てることで、
読み取り専用アクセス権を付与できます。</p></div>
<div class="paragraph">
<p>例1: ユーザー<span class="monospaced">joe@pve</span>にすべてを表示させる</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum acl modify /<span style="color: #990000">-user</span>joe@pve -role PVEAuditor</tt></pre></div></div>
<div class="paragraph">
<p>例2: ユーザー<span class="monospaced">joe@pveに</span>全ての仮想マシンを表示させる</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum acl modify /vms -user joe@pve -role PVEAuditor</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_delegate_user_management">14.9.3. ユーザー管理の委任
<a class="headerlink" href="#_delegate_user_management" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ユーザー管理を<span class="monospaced">joe@pve</span> に委任するには、以下を実行します:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum acl modify /access -user joe@pve -role PVEUserAdmin</tt></pre></div></div>
<div class="paragraph">
<p>ユーザー<span class="monospaced">joe@pve は</span>ユーザー追加・削除やパスワード変更など
他のユーザー属性を変更できるようになります。これは非常に強力な役割であるため、
特定のレルムやグループに制限することを強く推奨します。以下の例では、
レルム<span class="monospaced">pve</span> 内のユーザーでグループ<span class="monospaced">customers</span> のメンバーである場合に限り、
<span class="monospaced">joe@pve が</span>ユーザーを変更できるようにします:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum acl modify /access/realm/pve -user joe@pve -role PVEUserAdmin
 pveum acl modify /access/groups/customers -user joe@pve -role PVEUserAdmin</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">ユーザーは他のユーザーを追加できますが、
そのユーザーがグループ<span class="monospaced">customers</span>のメンバーであり、かつ
レルム<span class="monospaced">pve</span> 内に存在する場合に限ります。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_limited_api_token_for_monitoring">14.9.4. 監視用限定APIトークン
<a class="headerlink" href="#_limited_api_token_for_monitoring" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>APIトークンの権限は常に対応するユーザーの権限のサブセットです。つまり、
APIトークンは、そのトークンを所有するユーザーが許可されていないタスクを
実行するために使用することはできません。このセクションでは、
トークン所有者の権限をさらに制限するために、
個別の特権を持つAPIトークンを使用する方法を示します。</p></div>
<div class="paragraph">
<p>ユーザー<span class="monospaced">joe@pve</span>にすべての VM に対する PVEVMAdmin ロールを付与します:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum acl modify /vms -user joe@pve -role PVEVMAdmin</tt></pre></div></div>
<div class="paragraph">
<p>監視目的などでVM情報の閲覧のみを許可する、
別個の権限を持つ新しいAPIトークンを追加します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> <span style="color: #993399">p</span>veum user token add joe@pve monitoring -privsep 1
 pveum acl modify /vms -token<span style="color: #FF0000">'joe@pve!monitoring' -role</span>PVEAuditor</tt></pre></div></div>
<div class="paragraph">
<p>ユーザーとトークンの権限を確認します:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum user permissions joe@pve
 pveum user token permissions joe@pve monitoring</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_resource_pools">14.9.5. リソースプール
<a class="headerlink" href="#_resource_pools" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>企業は通常、複数の小規模な部門で構成されており、
各部門にリソースを割り当て、管理タスクを委任することが一般的です。
ソフトウェア開発部門向けにプールを設定したい場合を想定しましょう。
まずグループを作成します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum group add developers -comment "<span style="color: #FF0000">当社のソフトウェア開発者"</span></tt></pre></div></div>
<div class="paragraph">
<p>次に、そのグループのメンバーとなる新規ユーザーを作成します:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum user add developer1@pve -group developers -password</tt></pre></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">"-password" パラメータを指定するとパスワード入力が要求されます</td>
</tr></table>
</div>
<div class="paragraph">
<p>次に、開発部門が使用するリソースプールを作成します：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum pool add dev-pool --comment "<span style="color: #FF0000">IT開発プール"</span></tt></pre></div></div>
<div class="paragraph">
<p>最後に、そのプールに権限を割り当てます：</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt> pveum acl modify /pool/dev-pool/<span style="color: #990000">-group</span>developers -role PVEAdmin</tt></pre></div></div>
<div class="paragraph">
<p>これでソフトウェア開発者は、
そのプールに割り当てられたリソースを管理できます。</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_ha_manager">
15. 高可用性
<a class="headerlink" href="#chapter_ha_manager" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>現代社会はネットワークを介したコンピュータ提供情報に大きく依存している。モバイル端末はこの依存性を増幅させた。人々がいつでもどこからでもネットワークにアクセスできるためだ。こうしたサービスを提供するならば、その可用性が常に高いことが極めて重要である。</p></div>
<div class="paragraph">
<p>可用性は数学的に、(A) 特定時間枠内でサービスが利用可能な総時間と、
(B) その時間枠の長さの比率として定義できる。通常は、
特定の年における稼働率のパーセンテージとして表現される。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:60%;
">
<caption class="title">表 17. 可用性 - 年間ダウンタイム</caption>
<col style="width:50%;" />
<col style="width:50%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">可用性 % </th>
<th class="tableblock halign-left valign-top">年間ダウンタイム</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">99</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.65日</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">99.9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8.76時間</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">99.99</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">52.56分</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">99.999</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.26 分</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">99.9999</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">31.5秒</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">99.99999</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.15秒</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph">
<p>可用性を高める方法はいくつかある。最も洗練された解決策は、ソフトウェアを書き換え、複数のホストで同時に実行できるようにすることだ。ソフトウェア自体にエラーを検知しフェイルオーバーを行う仕組みが必要となる。読み取り専用ウェブページのみを提供する場合は比較的簡単である。しかし、ソフトウェアを自身で修正できないため、一般的に複雑で時には不可能となる。ソフトウェアを変更せずに機能する解決策は以下の通り：</p></div>
<div class="ulist"><ul>
<li>
<p>
信頼性の高い「サーバー」コンポーネントを使用する</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">同一機能のコンピュータ部品でも、部品品質により信頼性数値は異なる。
大半のベンダーは高信頼性部品を「サーバー向け」部品として販売している（通常は高価格）。</td>
</tr></table>
</div>
</li>
<li>
<p>
単一障害点を排除（冗長化コンポーネント）</p>
<div class="ulist"><ul>
<li>
<p>
無停電電源装置（UPS）を使用する</p>
</li>
<li>
<p>
サーバーに冗長電源を採用する</p>
</li>
<li>
<p>
ECC-RAMを使用する</p>
</li>
<li>
<p>
冗長ネットワークハードウェアを使用する</p>
</li>
<li>
<p>
ローカルストレージにRAIDを使用する</p>
</li>
<li>
<p>
VMデータ用に分散型冗長ストレージを使用する</p>
</li>
</ul></div>
</li>
<li>
<p>
ダウンタイムを削減</p>
<div class="ulist"><ul>
<li>
<p>
迅速に対応可能な管理者（24時間365日体制）</p>
</li>
<li>
<p>
スペアパーツの可用性（Proxmox VEクラスター内の他のノード）</p>
</li>
<li>
<p>
自動エラー検出（<span class="monospaced">ha-managerによる</span>提供）</p>
</li>
<li>
<p>
自動フェイルオーバー（<span class="monospaced">ha-managerによる</span>）</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="paragraph">
<p>Proxmox VEのような仮想化環境は「ハードウェア」依存を排除するため、
高可用性の実現を大幅に容易にします。冗長ストレージやネットワークデバイスの
設定・利用もサポートしているため、1台のホストが障害を起こしても、
クラスター内の別のホストでそれらのサービスを単純に起動できます。</p></div>
<div class="paragraph">
<p>さらに優れた点として、Proxmox VE<span class="monospaced">はha-managerと呼ばれる</span>ソフトウェアスタックを提供し、
これを自動的に実行できます。エラーを自動検知し、自動フェイルオーバーを実行可能です。</p></div>
<div class="paragraph">
<p>Proxmox VE<span class="monospaced">のha-managerは</span>「自動化された管理者」のように動作します。まず管理対象リソース（VM、コンテナなど）を設定します。その後、<span class="monospaced">ha-managerは</span>正常な動作を監視し、エラー発生時にはサービスを別のノードへフェイルオーバーします。<span class="monospaced">ha-managerは</span>サービスの起動、停止、再配置、移行といった通常のユーザー要求も処理可能です。</p></div>
<div class="paragraph">
<p>ただし高可用性には代償が伴います。高品質なコンポーネントは高価であり、
冗長化によりコストは少なくとも倍増します。予備部品の追加でさらに費用が増加します。
従って、得られる利点と追加コストを慎重に比較検討すべきです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Tip" src="data:image/png;base64,
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" />
</td>
<td class="content">可用性を99%から99.9%に高めるのは比較的
容易です。しかし99.9999%から99.99999%への向上は極めて
困難かつコストがかかります。<span class="monospaced">ha-managerの</span>典型的なエラー検出とフェイルオーバー
時間は約2分であるため、99.999%以上の
可用性は得られません。</td>
</tr></table>
</div>
<div class="sect2">
<h3 id="_requirements_2">
<span>15.1.</span>要件
<a class="headerlink" href="#_requirements_2" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>HAを開始する前に、以下の要件を満たす必要があります:</p></div>
<div class="ulist"><ul>
<li>
<p>
少なくとも3つのクラスターノード（信頼性の高いクォーラムを確保するため）</p>
</li>
<li>
<p>
VMとコンテナ用の共有ストレージ</p>
</li>
<li>
<p>
ハードウェア冗長性（全領域）</p>
</li>
<li>
<p>
信頼性の高い「サーバー」コンポーネントの使用</p>
</li>
</ul></div>
<div class="paragraph">
<p>オプションでハードウェアウォッチドッグを使用可能 - 利用不可の場合は
Linuxカーネルソフトウェアウォッチドッグ（<span class="monospaced">softdog</span>）にフォールバックします。</p></div>
</div>
<div class="sect2">
<h3 id="ha_manager_resources">
<span>15.2.</span>リソース
<a class="headerlink" href="#ha_manager_resources" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">ha-managerが</span>管理する主要な管理単位をリソースと呼びます。リソース（「サービス」とも呼ばれる）は、サービスID（SID）によって一意に識別されます。SIDはリソースタイプとタイプ固有のIDで構成され、<span class="monospaced">例えばvm:100となります</span>。この例は、ID 100<span class="monospaced">を持つvm</span>（仮想マシン）タイプのリソースです。</p></div>
<div class="paragraph">
<p>現時点で重要なリソースタイプは仮想マシンとコンテナの2つです。
ここでの基本概念は、関連ソフトウェアをVMやコンテナにバンドルできるため、
<span class="monospaced">rgmanagerのように</span>他のサービスから1つの巨大サービスを構築する必要がない点です。
一般的に、<span class="monospaced">HA</span>管理リソースは他のリソースに依存すべきではありません。</p></div>
</div>
<div class="sect2">
<h3 id="_management_tasks">
<span>15.3. 管理タスク</span>
<a class="headerlink" href="#_management_tasks" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>本節では一般的な管理タスクの概要を簡潔に説明します。
最初のステップはリソースのHA有効化です。
これはリソースをHAリソース構成に追加することで実現します。
GUIを使用するか、コマンドラインツールを直接使用できます。
例:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager add vm:100</pre>
</div></div>
<div class="paragraph">
<p>HAスタックはリソースの起動を試行し、稼働状態を維持します。
「要求される」リソース状態は設定可能です。
例えば、HAスタックにリソースを停止させたい場合：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager set vm:100 --state stopped</pre>
</div></div>
<div class="paragraph">
<p>後で再起動させる場合などです:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager set vm:100 --state started</pre>
</div></div>
<div class="paragraph">
<p>通常のVMおよびコンテナ管理コマンドも使用可能です。これらは自動的にコマンドをHAスタックに転送するため、</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># qm start 100</pre>
</div></div>
<div class="paragraph">
<p>単に要求状態を「<span class="monospaced">started</span>」に設定します。<span class="monospaced">qm stop</span> も同様で、要求状態を「<span class="monospaced">stopped</span>」に設定します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">HAスタックは完全に非同期で動作し、他のクラスターメンバーとの通信を必要とします。
そのため、このような操作の結果が反映されるまで数秒かかります。</td>
</tr></table>
</div>
<div class="paragraph">
<p>現在のHAリソース構成を確認するには以下を使用します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager config
vm:100
        state stopped</pre>
</div></div>
<div class="paragraph">
<p>実際のHAマネージャーとリソースの状態は以下で確認できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager status
quorum OK
master node1 (active, Wed Nov 23 11:07:23 2016)
lrm elsa (active, Wed Nov 23 11:07:19 2016)
service vm:100 (node1, started)</pre>
</div></div>
<div class="paragraph">
<p>他のノードへのリソース移行を開始することも可能です:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager migrate vm:100 node2</pre>
</div></div>
<div class="paragraph">
<p>これはオンライン移行を使用し、VMの稼働を維持しようとします。オンライン
移行では使用中のメモリ全体をネットワーク経由で転送する必要があるため、
VMを停止してから新しいノードで再起動する方が速い場合があります。これは
<span class="monospaced">relocateコマンド</span>を使用して実行できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager relocate vm:100 node2</pre>
</div></div>
<div class="paragraph">
<p>最後に、以下のコマンドでリソースをHA構成から削除できます:
`HA_COMMAND`</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager remove vm:100</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">これはリソースの起動や停止を実行するものではありません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ただし、すべてのHA関連タスクはGUIで実行可能です。コマンドラインを
使用する必要は全くありません。</p></div>
</div>
<div class="sect2">
<h3 id="_how_it_works_2">
<span>15.4. 動作原理</span>
<a class="headerlink" href="#_how_it_works_2" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>このセクションでは、Proxmox VE HA マネージャーの内部構造について詳細に説明します。
関連するすべてのデーモンとそれらの連携動作について解説します。
HAを実現するため、各ノード上で以下の2つのデーモンが実行されます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">p</span>ve-ha-lrm</dt>
<dd>
<p>
ローカルリソースマネージャー（LRM）は、ローカルノード上で実行中のサービスを制御します。
現在のマネージャー状態ファイルからサービスの要求状態を読み取り、
対応するコマンドを実行します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">p</span>ve<span class="monospaced">-</span>ha-crm</dt>
<dd>
<p>
クラスタリソースマネージャー（CRM）はクラスタ全体の決定を行います。
CRMはLRMにコマンドを送信し、結果を処理し、
障害発生時にはリソースを他のノードに移動します。CRMはノードフェンシングも処理します。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="title">LRM および CRM におけるロック</div>ロックは分散構成ファイルシステム（pmxcfs）によって提供されます。
各LRMが一度だけアクティブになり動作することを保証するために使用されます。
LRMは自身のロックを保持している場合にのみアクションを実行するため、
ロックを取得できれば障害発生ノードをフェンシング済みとマークできます。
これにより、現在未知の障害発生ノードからの干渉なしに、
障害発生したHAサービスを安全に回復できます。
これらはすべて、現在マネージャーマスターロックを保持しているCRMによって監視されます。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="ha_manager_service_states">15.4.1. サービス状態
<a class="headerlink" href="#ha_manager_service_states" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>CRMはサービス状態列挙を使用して現在のサービス状態を記録します。
この状態はGUIに表示され、<span class="monospaced">ha-managerコマンドラインツール</span>を使用して
照会できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager status
quorum OK
master elsa (active, Mon Nov 21 07:23:29 2016)
lrm elsa (active, Mon Nov 21 07:23:22 2016)
サービス ct:100 (elsa, 停止中)
サービス ct:102 (elsa, 起動中)
サービス vm:501 (elsa, 起動中)</pre>
</div></div>
<div class="paragraph">
<p>可能な状態の一覧は以下の通りです:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
停止中</dt>
<dd>
<p>
サービスは停止済み（LRMにより確認済み）。停止したサービスが
依然として実行中であるとLRMが検出した場合、再度停止する。</p>
</dd>
<dt class="hdlist1">
停止要求</dt>
<dd>
<p>
サービスは停止済みであるべきです。CRMはLRMからの確認を待機中です。</p>
</dd>
<dt class="hdlist1">
停止中</dt>
<dd>
<p>
停止要求が保留中。ただしCRMは現時点で要求を受信していない。</p>
</dd>
<dt class="hdlist1">
started</dt>
<dd>
<p>
サービスはアクティブであり、LRMは既に実行中でない場合、至急開始すべきです。
サービスが失敗し、実行されていないと検出された場合、LRMは再起動します
（<a href="#ha_manager_start_failure_policy">開始失敗ポリシー</a>を参照）。</p>
</dd>
<dt class="hdlist1">
起動中</dt>
<dd>
<p>
起動リクエスト待機中。ただしCRMはサービスが稼働しているという
LRMからの確認をまだ受けていない。</p>
</dd>
<dt class="hdlist1">
フェンス</dt>
<dd>
<p>
サービスノードがクォーレートされたクラスタパーティション内に存在しないため、ノードフェンシングを待機中（<a href="#ha_manager_fencing">フェンシング参照</a>）。
ノードのフェンシングが成功次第、サービスはリカバリ状態に移行する。</p>
</dd>
<dt class="hdlist1">
回復中</dt>
<dd>
<p>
サービスの回復を待機。HAマネージャーはサービスが実行可能な新規ノードを検索する。この検索はオンラインかつクォーレート状態のノードリスト、および該当するアフィニティルール（存在する場合）に依存する。
新規利用可能ノードが検出されると、サービスは当該ノードへ移動され、初期状態として停止状態となる。実行設定済みの場合、新規ノードはサービスを起動する。</p>
</dd>
<dt class="hdlist1">
凍結</dt>
<dd>
<p>
サービスの状態を変更しない。ノードの再起動時やLRMデーモンの再起動時に使用される状態
（<a href="#ha_manager_package_updates">パッケージ更新</a>を参照）。</p>
</dd>
<dt class="hdlist1">
無視された</dt>
<dd>
<p>
サービスをHAで管理していないかのように動作します。
サービスをHA構成から削除せずに、一時的に完全な制御を望む場合に有用です。</p>
</dd>
<dt class="hdlist1">
移行</dt>
<dd>
<p>
サービスを（稼働中に）他のノードへ移行します。</p>
</dd>
<dt class="hdlist1">
エラー</dt>
<dd>
<p>
LRMエラーによりサービスが無効化されています。手動介入が必要です
（<a href="#ha_manager_error_recovery">エラー回復</a>を参照）。</p>
</dd>
<dt class="hdlist1">
キュー入り</dt>
<dd>
<p>
サービスが新規追加され、CRMがまだ認識していない状態。</p>
</dd>
<dt class="hdlist1">
無効化</dt>
<dd>
<p>
サービスが停止され、<span class="monospaced">無効化済み</span>としてマークされています</p>
</dd>
</dl></div>
</div>
<div class="sect3">
<h4 id="ha_manager_lrm">15.4.2. ローカルリソースマネージャー
<a class="headerlink" href="#ha_manager_lrm" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ローカルリソースマネージャー（<span class="monospaced">pve-ha-lrm</span>）は起動時にデーモンとして開始され、
HAクラスタがクォーレート状態（過半数）に達し、クラスタ全体のロックが機能するまで待機します。</p></div>
<div class="paragraph">
<p>以下の3つの状態を取ります:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
エージェントロック待機</dt>
<dd>
<p>
LRMは排他ロックを待機中。サービスが設定されていない場合のアイドル状態としても使用される。</p>
</dd>
<dt class="hdlist1">
アクティブ</dt>
<dd>
<p>
LRMは排他ロックを保持し、サービスが構成されています。</p>
</dd>
<dt class="hdlist1">
エージェントロック喪失</dt>
<dd>
<p>
LRMがロックを失った。これは障害発生とクォーラム喪失を意味する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>LRMがアクティブ状態になると、<span class="monospaced">/etc/pve/ha/manager_statusにある</span>マネージャー状態ファイルを読み取り、自身が管理するサービスに対して実行すべきコマンドを決定します。
各コマンドごとにワーカープロセスが起動され、これらのワーカーは並列で実行されます。デフォルトでは最大4つまで制限されています。このデフォルト設定は、データセンター設定<span class="monospaced">キーmax_worker</span>を通じて変更可能です。
ワーカープロセスが完了すると、そのプロセスは回収され、結果がCRM用に保存されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">
<div class="title">最大同時ワーカー調整のヒント</div>デフォルト値である最大4ワーカーは、特定の環境では不適切となる場合があります。例えば、4つのライブマイグレーションが同時に発生すると、低速ネットワークやメモリ消費量の大きいサービスにおいてネットワーク輻輳を引き起こす可能性があります。最悪のケースでも輻輳を最小限に抑えるため、<span class="monospaced">必要であればmax_worker値</span>を下げてください。逆に、特に高性能なハイエンド環境では、
この値を増加させることも検討すべきです。</td>
</tr></table>
</div>
<div class="paragraph">
<p>CRMが要求する各コマンドはUIDによって一意に識別されます。ワーカーが完了すると、その結果は処理されLRMステータスファイル（<span class="monospaced">/etc/pve/nodes/&amp;lt;nodename&amp;gt;/lrm_status</span>）に書き込まれます。CRMはこれを収集し、コマンド出力に応じたステートマシンに処理を委ねます。</p></div>
<div class="paragraph">
<p>CRMとLRM間の各サービスに対するアクションは通常常に同期されます。
これは、CRMがUIDで一意にマークされた状態を要求すると、LRMがそのアクションを<strong>1回</strong>実行し、
同じUIDで識別可能な結果を書き戻すことを意味します。これはLRMが古いコマンドを実行しないようにするために必要です。
この動作の例外は<span class="monospaced">停止</span>（<span class="monospaced">stop</span>）<span class="monospaced">とエラー</span>（<span class="monospaced">error）</span>コマンドのみである。
これら2つは生成される結果に依存せず、
停止状態では常に、エラー状態では一度だけ
実行される。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">
<div class="title">ログの確認</div>HAスタックは実行するすべてのアクションをログに記録します。これによりクラスタ内で何が、またなぜ発生したかを理解できます。ここでは両方のデーモン（LRMとCRM）の動作を確認することが重要です。サービスが稼働しているノードでは`<span class="monospaced">journalctl -u pve-ha-lrm</span>`を、現在のマスターノードでは`<span class="monospaced">journalctl -u</span>pve-ha-crm`を実行してください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="ha_manager_crm">15.4.3. クラスターリソースマネージャー
<a class="headerlink" href="#ha_manager_crm" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>クラスタリソースマネージャ（<span class="monospaced">pve-ha-crm</span>）は各ノードで起動し、
マネージャーロックを待機します。このロックは一度に1ノードのみが保持可能です。
マネージャーロックの取得に成功したノードは
CRMマスターに昇格します。</p></div>
<div class="paragraph">
<p>その状態は3種類あり：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
エージェントロック待機</dt>
<dd>
<p>
CRMは排他ロックを待機します。サービスが設定されていない場合、アイドル状態としても使用されます</p>
</dd>
<dt class="hdlist1">
アクティブ</dt>
<dd>
<p>
CRMは排他ロックを保持し、サービスが設定されています</p>
</dd>
<dt class="hdlist1">
エージェントロック喪失</dt>
<dd>
<p>
CRMがロックを失った。これは障害発生とクォーラム喪失を意味する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>主な役割は、高可用性設定されたサービスの管理と要求状態の維持です。
例えば要求状態が<em>「started」</em>のサービスは未起動時に起動され、
クラッシュ時は自動再起動されます。
つまりCRMはLRMが実行すべき動作を指示します。</p></div>
<div class="paragraph">
<p>ノードがクラスタクォーラムから離脱すると、その状態は「不明」に変化します。
現在のCRMが障害発生ノードのロックを確保できた場合、サービスは<em>奪取され</em>
別のノードで再起動されます。</p></div>
<div class="paragraph">
<p>クラスタメンバーがクォーラムから外れたと判断した場合、LRMは新たなクォーラムが形成されるまで待機します。クラスタクォーラムが確立されるまで、ノードはウォッチドッグをリセットできません。ノード上にアクティブなサービスが存在する場合、またはLRM/CRMプロセスがスケジューリングされない/終了された場合、ウォッチドッグタイムアウト（60秒後）後に再起動がトリガーされます。</p></div>
<div class="paragraph">
<p>なお、ノードにアクティブなCRMが存在してもLRMがアイドル状態の場合、クォーラム喪失は自己フェンスリセットをトリガーしません。その理由は、CRMがアクセスする全ての状態ファイルと設定は、
クォーラム喪失時に読み取り専用<a href="#chapter_pmxcfs">となるクラスタ構成ファイルシステム</a>によって
バックアップされているためです。つまりCRMは、
自身のプロセスが長時間スケジュールされること（この場合、状況を知らない別のCRMが引き継ぎ、
HA状態の破損を引き起こす可能性がある）からの保護のみを必要とします。
オープンウォッチドッグはこれが発生しないことを保証します。</p></div>
<div class="paragraph">
<p>15分以上サービスが設定されていない場合、CRMは自動的にアイドル状態に戻り、ウォッチドッグを完全に終了します。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_ha_simulator">
<span>15.5. HAシミュレータ</span>
<a class="headerlink" href="#_ha_simulator" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ha-manager-status.png">
<img src="images/screenshot/gui-ha-manager-status.png" alt="screenshot/gui-ha-manager-status.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>HAシミュレータを使用することで、Proxmox VE HAソリューションの全機能をテストおよび学習できます。</p></div>
<div class="paragraph">
<p>デフォルトでは、シミュレーターは6台のVMを備えた実世界の3ノードクラスターの動作を
監視・テストできます。追加のVMやコンテナの追加・削除も可能です。</p></div>
<div class="paragraph">
<p>実際のクラスターをセットアップまたは構成する必要はなく、HAシミュレータは
そのまま使用できます。</p></div>
<div class="paragraph">
<p>apt によるインストール:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt install pve-ha-simulator</pre>
</div></div>
<div class="paragraph">
<p>他のProxmox VEパッケージがインストールされていないDebianベースのシステムでもパッケージをインストールできます。その場合、パッケージをダウンロードし、インストールしたいシステムにコピーする必要があります。ローカルファイルシステムからaptでパッケージをインストールすると、必要な依存関係も自動的に解決されます。</p></div>
<div class="paragraph">
<p>リモートマシンでシミュレータを起動するには、現在のシステムへのX11リダイレクトが必要です。</p></div>
<div class="paragraph">
<p>Linux マシンでは以下を使用できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ssh root@&amp;lt;IPofPVE&amp;gt; -Y</pre>
</div></div>
<div class="paragraph">
<p>Windowsでは<a href="https://mobaxterm.mobatek.net/">mobaxtermが</a>動作します。</p></div>
<div class="paragraph">
<p>シミュレータがインストール済みの既存Proxmox VEに接続するか、
ローカルのDebianベースシステムに手動でインストール後、
以下のように試行できます。</p></div>
<div class="paragraph">
<p>まず、シミュレータが現在の状態を保存しデフォルト設定を書き込む作業ディレクトリを作成します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>mkdir working</pre>
</div></div>
<div class="paragraph">
<p>次に、作成したディレクトリを<em>pve-ha-simulatorの</em>パラメータとして渡します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>pve-ha-simulator working/</pre>
</div></div>
<div class="paragraph">
<p>これでシミュレートされたHAサービスの起動・停止・移行が可能になり、
ノード障害時の動作確認もできます。</p></div>
</div>
<div class="sect2">
<h3 id="_configuration_15">
<span>15.6.</span>構成
<a class="headerlink" href="#_configuration_15" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>HAスタックはProxmox VE APIに完全に統合されています。例えば、
<span class="monospaced">ha-manager</span>コマンドラインインターフェースやProxmox VEウェブインターフェースから
HAを設定可能で、両インターフェースともHA管理を容易にします。自動化ツールはAPIを直接利用できます。</p></div>
<div class="paragraph">
<p>すべてのHA設定ファイルは<span class="monospaced">/etc/pve/ha/</span>内に存在するため、
クラスターノードへ自動的に配布され、全ノードが同一のHA設定を共有します。</p></div>
<div class="sect3">
<h4 id="ha_manager_resource_config">15.6.1. リソース
<a class="headerlink" href="#ha_manager_resource_config" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ha-manager-status.png">
<img src="images/screenshot/gui-ha-manager-status.png" alt="screenshot/gui-ha-manager-status.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>リソース設定ファイル<span class="monospaced">/etc/pve/ha/resources.cfg</span>には、
<span class="monospaced">ha-manager</span> が管理するリソースのリストが保存されます。
そのリスト内のリソース設定は次のようになります：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>&amp;lt;type&amp;gt;: &amp;lt;name&amp;gt;
        &amp;lt;property&amp;gt; &amp;lt;value&amp;gt;
        ...</pre>
</div></div>
<div class="paragraph">
<p>リソースタイプとリソース固有名がコロンで区切られて記述され、
これがHAリソースIDを形成します。このIDは
<span class="monospaced">すべてのha-managerコマンドで</span>リソースを一意に識別するために使用されます
（例:<span class="monospaced">vm:100</span>または<span class="monospaced">ct:101</span>）。次の行には追加のプロパティが含まれます:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">コメント</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">フェイルバック</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
現在のノードより優先度の高いノードがオンラインになった場合、ノードアフィニティルールに従い、HAリソースを自動的に優先度の高いノードへ移行する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">グループ</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
HAグループ識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">max_relocate</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
サービス起動に失敗した場合の最大再配置試行回数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">max_restart</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ノード上でサービスの起動に失敗した場合、そのノード上でサービスを再起動する試行の最大回数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">state</span>:<span class="monospaced">&amp;lt;disabled | enabled | ignored | started | stopped&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">started</span>)</dt>
<dd>
<p>
要求されるリソース状態。CRMはこの状態を読み取り、それに応じて動作します。
※<span class="monospaced">「有効」</span>は「<span class="monospaced">開始済み」</span>の別名であることにご注意ください。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">started</span></dt>
<dd>
<div class="paragraph">
<p>CRMはリソースの起動を試行します。起動成功後、サービス状態は
<span class="monospaced">started</span>に設定されます。ノード障害時または起動失敗時には、
リソースの回復を試行します。全てが失敗した場合、サービス状態は
<span class="monospaced">error</span>に設定されます。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">停止</span></dt>
<dd>
<div class="paragraph">
<p>CRMはリソースを<span class="monospaced">停止状態に</span>保とうとしますが、ノード障害時にはリソースの再配置を試みます。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">無効化</span></dt>
<dd>
<div class="paragraph">
<p>CRMは<span class="monospaced">リソースを停止状態に</span>置こうとしますが、ノード障害時にはリソースの再配置を試みません。この状態の主な目的はエラー回復であり、<span class="monospaced">エラー状態</span>からリソースを移動させる唯一の手段です。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">無視</span></dt>
<dd>
<div class="paragraph">
<p>リソースはマネージャー状態から削除されるため、CRMおよびLRMはリソースに一切触れません。このリソースに影響するすべての{pve} API呼び出しは、HAスタックを直接バイパスして実行されます。リソースがこの状態にある間、CRMコマンドは破棄されます。ノード障害時にもリソースは再配置されません。</p></div>
</dd>
</dl></div>
</dd>
</dl></div>
<div class="paragraph">
<p>以下は1台のVMと1つのコンテナを扱う実例です。ご覧の通り、
これらのファイルの構文は非常にシンプルです。そのため、
お好みのエディタでファイルを読み書きすることも可能です:</p></div>
<div class="listingblock">
<div class="title">設定例 (<span class="monospaced">/etc/pve/ha/resources.cfg</span>)</div>
<div class="content monospaced">
<pre>vm: 501
    状態: 起動済み
    最大再配置回数: 2

ct: 102
    # 注: 全てのパラメータはデフォルト設定を使用</pre>
</div></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ha-manager-add-resource.png">
<img src="images/screenshot/gui-ha-manager-add-resource.png" alt="screenshot/gui-ha-manager-add-resource.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>上記の設定は<span class="monospaced">ha-manager</span>コマンドラインツールで生成されました:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager add vm:501 --state started --max_relocate 2
# ha-manager add ct:102</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="ha_manager_groups">15.6.2. グループ
<a class="headerlink" href="#ha_manager_groups" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">HAグループは非推奨となり、Proxmox VE 9.0以降、HAノードアフィニティルールに移行されました。</td>
</tr></table>
</div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ha-manager-groups-view.png">
<img src="images/screenshot/gui-ha-manager-groups-view.png" alt="screenshot/gui-ha-manager-groups-view.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>HAグループ設定ファイル<span class="monospaced">/etc/pve/ha/groups.cfg</span>はクラスタノードのグループ定義に使用されます。リソースは特定のグループのメンバー上でのみ実行を制限できます。グループ設定は以下のような形式です:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>group: &amp;lt;group&amp;gt;
       nodes &amp;lt;node_list&amp;gt;
       &amp;lt;property&amp;gt; &amp;lt;value&amp;gt;
       ...</pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">comment</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nodes</span>:<span class="monospaced">&amp;lt;node&amp;gt;[:&amp;lt;pri&amp;gt;]{,&amp;lt;node&amp;gt;[:&amp;lt;pri&amp;gt;]}*</span></dt>
<dd>
<p>
クラスタノードメンバーのリスト。各ノードに優先度を指定可能。グループにバインドされたリソースは、利用可能なノードの中で最も優先度の高いノード上で実行される。最高優先度クラスに複数のノードが存在する場合、サービスはそれらのノードに分散される。優先度は相対的な意味しか持たない。数値が高いほど優先度が高い。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">nofailback</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CRMは優先度が高いノードでサービスを実行しようとします。より優先度の高いノードがオンラインになると、CRMはそのノードへサービスを移行します。nofailbackを有効にするとこの動作を防止できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">restricted</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
制限付きグループにバインドされたリソースは、グループで定義されたノード上でのみ実行可能です。グループノードメンバーがオンラインでない場合、リソースは停止状態になります。制限なしグループ上のリソースは、グループメンバーがすべてオフラインの場合、クラスタの任意のノードで実行可能ですが、グループメンバーがオンラインになるとすぐに移行が戻ります。メンバーが1つのみである制限なしグループを使用することで、<em>優先ノードの</em>動作を実装できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-ha-manager-add-group.png">
<img src="images/screenshot/gui-ha-manager-add-group.png" alt="screenshot/gui-ha-manager-add-group.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>一般的な要件として、リソースを特定のノードで実行させる場合があります。通常、リソースは他のノードでも実行可能であるため、単一メンバーで構成される制限のないグループを定義できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager groupadd prefer_node1 --nodes node1</pre>
</div></div>
<div class="paragraph">
<p>大規模クラスタでは、より詳細なフェイルオーバー動作を定義することが合理的です。例えば、可能であれば一連のサービスを<span class="monospaced">ノード1で</span>実行したい場合があります。<span class="monospaced">ノード1が</span>利用できない場合、それらを<span class="monospaced">ノード2</span>と<span class="monospaced">ノード3</span>に均等に分割して実行したいでしょう。それらのノードも障害が発生した場合、サービスは<span class="monospaced">ノード4</span>で実行されるべきです。これを実現するには、ノードリストを次のように設定できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager groupadd mygroup1 -nodes "node1:2,node2:1,node3:1,node4"</pre>
</div></div>
<div class="paragraph">
<p>別のユースケースとして、特定ノード（例：<span class="monospaced">node1とnode2）</span>でのみ利用可能なリソースを他のリソースが使用する場合があります。HAマネージャーが他のノードを使用しないよう保証する必要があるため、該当ノードで構成される制限付きグループを作成します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager groupadd mygroup2 -nodes "node1,node2" -restricted</pre>
</div></div>
<div class="paragraph">
<p>上記のコマンドにより、以下のグループ設定ファイルが作成されます:</p></div>
<div class="listingblock">
<div class="title">設定例 (<span class="monospaced">/etc/pve/ha/groups.cfg</span>)</div>
<div class="content monospaced">
<pre>group: prefer_node1
       nodes node1

group: mygroup1
       nodes node2:1,node4,node1:2,node3:1

group: mygroup2
       nodes node2,node1
       restricted 1</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">nofailbackオプションは</span>、管理タスク中の不要なリソース移動を回避するのに特に有用です。例えば、グループ内で最優先ではないノードへサービスを移行する必要がある場合、<span class="monospaced">nofailbackオプション</span>を設定することで、HAマネージャーが即座にこのサービスを元のノードに戻さないように指示できます。</p></div>
<div class="paragraph">
<p>別のシナリオとして、フェンスされたサービスが別のノードに復旧された場合が挙げられます。管理者はフェンスされたノードを修復し、オンライン状態に戻して障害原因の調査や安定動作の確認を試みます。<span class="monospaced">nofailback</span>フラグを設定することで、復旧されたサービスがフェンスされたノードに直ちに移動するのを防げます。</p></div>
</div>
<div class="sect3">
<h4 id="ha_manager_rules">15.6.3. ルール
<a class="headerlink" href="#ha_manager_rules" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>HAルールは、HA管理リソースに特定の制約を課すために使用され、
HAルール設定ファイル<span class="monospaced">/etc/pve/ha/rules.cfg</span> で定義されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>&amp;lt;type&amp;gt;: &amp;lt;rule&amp;gt;
        resources &amp;lt;resources_list&amp;gt;
        &amp;lt;property&amp;gt; &amp;lt;value&amp;gt;
        ...</pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">コメント</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
HAルールの説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">無効化</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
HAルールが無効化されているか否か。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">リソース</span>:<span class="monospaced">&amp;lt;type&amp;gt;:&amp;lt;name&amp;gt;{,&amp;lt;type&amp;gt;:&amp;lt;name&amp;gt;}*</span></dt>
<dd>
<p>
HAリソースIDのリスト。リソースタイプとコロンで区切られたリソース固有名で構成される（例: vm:100,ct:101）。</p>
</dd>
</dl></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表18. 利用可能なHAルールタイプ</caption>
<col style="width:25%;" />
<col style="width:75%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">HAルールタイプ        </th>
<th class="tableblock halign-left valign-top">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ノードアフィニティ</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1つ以上のHAリソースから1つ以上のノードへのアフィニティを設定します。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">リソースアフィニティ</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2つ以上のHAリソース間にアフィニティを設定します。
affinity<span class="monospaced">positive</span>はHAリソースを別々のノードに保持することを指定し、
affinity<span class="monospaced">separate</span>はHAリソースを同じノードに保持することを指定します。</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="ha_manager_node_affinity_rules">ノードアフィニティルール
<a class="headerlink" href="#ha_manager_node_affinity_rules" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>デフォルトでは、HAリソースはクラスタ内の任意のノードで実行可能ですが、
特定のノードでの実行を要求するケースが一般的です。
HAノードアフィニティルールを定義することで、
HA<span class="monospaced">リソースvm:100が</span> <span class="monospaced">node1</span>ノードを優先するように実装できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager rules add node-affinity ha-rule-vm100 --resources vm:100 --nodes node1</pre>
</div></div>
<div class="paragraph">
<p>デフォルトでは、ノードアフィニティルールは厳密ではありません。つまり、指定されたノードが利用できない場合、HAリソースは他のノードに移動される可能性があります。
一方、HAリソースを指定されたノードに制限する必要がある場合は、ノードアフィニティルールを厳密に設定する必要があります。</p></div>
<div class="paragraph">
<p>前の例では、ノード親和性ルールを修正してリソース<span class="monospaced">vm:100</span>を<span class="monospaced">node1</span> のみに制限できます:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager rules set node-affinity ha-rule-vm100 --strict 1</pre>
</div></div>
<div class="paragraph">
<p>大規模クラスタや特定のユースケースでは、より詳細なフェイルオーバー動作を定義することが合理的です。例えば、リソース<span class="monospaced">vm:200</span>と<span class="monospaced">ct:300</span>は<span class="monospaced">node1</span> で実行されるべきです。<span class="monospaced">node1</span>が利用不可になった場合、リソースは<span class="monospaced">node2</span>と<span class="monospaced">node3</span> に分散されるべきです。<span class="monospaced">node2</span>と<span class="monospaced">node3</span>も利用不可の場合、リソースは<span class="monospaced">node4</span> で実行されるべきです。</p></div>
<div class="paragraph">
<p>この動作をノードアフィニティルールで実装するには、ノードを優先順位付きでペアリングし、ノードの優先度を順序付けます。2つ以上のノードが同じ優先度を持つ場合、リソースはそれらのいずれでも実行可能です。上記の例では、<span class="monospaced">node1が</span>最優先度、<span class="monospaced">node2とnode3が</span>同優先度、<span class="monospaced">最後にnode4が</span>最低優先度（省略時は<span class="monospaced">デフォルトで0</span>）となります:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager rules add node-affinity priority-cascade \
        --resources vm:200,ct:300 --nodes "node1:2,node2:1,node3:1,node4"</pre>
</div></div>
<div class="paragraph">
<p>上記のコマンドは、ルール設定ファイルに以下のルールを作成します:</p></div>
<div class="listingblock">
<div class="title">ノードアフィニティルール設定例 (<span class="monospaced">/etc/pve/ha/rules.cfg</span>)</div>
<div class="content monospaced">
<pre>node-affinity: ha-rule-vm100
        resources vm:100
        nodes node1
        strict 1

node-affinity: priority-cascade
        resources vm:200,ct:300
        nodes node1:2,node2:1,node3:1,node4</pre>
</div></div>
<div class="sect5">
<h6 id="_node_affinity_rule_properties">ノードアフィニティルールプロパティ<a class="headerlink" href="#_node_affinity_rule_properties" title="Permalink to this heading"></a></h6>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">nodes</span>:<span class="monospaced">&amp;lt;node&amp;gt;[:&amp;lt;pri&amp;gt;]{,&amp;lt;node&amp;gt;[:&amp;lt;pri&amp;gt;]}*</span></dt>
<dd>
<p>
クラスタノードメンバーのリスト。各ノードに優先度を指定可能。グループにバインドされたリソースは、利用可能なノードの中で優先度が高い順に実行される。最高優先度クラスに複数のノードが存在する場合、サービスはそれらのノードに分散される。優先度は相対的な意味しか持たない。数値が高いほど優先度が高い。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">リソース</span>:<span class="monospaced">&amp;lt;タイプ&amp;gt;:&amp;lt;名前&amp;gt;{,&amp;lt;タイプ&amp;gt;:&amp;lt;名前&amp;gt;}*</span></dt>
<dd>
<p>
HAリソースIDのリスト。リソースタイプとコロンで区切られたリソース固有名で構成される（例: vm:100,ct:101）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">strict</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ノードアフィニティルールが厳密か非厳密かを記述します。</p>
<div class="paragraph">
<p>非厳密ノードアフィニティルールでは、リソースは定義されたノードでの実行を優先します。
定義されたノードがすべて利用不可の場合、リソースは他の任意のノードで実行される可能性があります。</p></div>
<div class="paragraph">
<p>厳密なノードアフィニティルールでは、リソースは定義されたノードに制限されます。
定義されたノードがすべて利用不可の場合、リソースは停止されます。</p></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect4">
<h5 id="ha_manager_resource_affinity_rules">リソースアフィニティルール
<a class="headerlink" href="#ha_manager_resource_affinity_rules" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>もう1つの一般的な要件は、2つ以上のHAリソースを
同一ノード上で実行するか、別々のノードに分散させることです。
これらは「アフィニティ/アンチアフィニティ制約」とも呼ばれます。</p></div>
<div class="paragraph">
<p>例えば、HAリソース<span class="monospaced">vm:100</span> <span class="monospaced">とvm:200間で</span>大量の通信トラフィックが発生する場合（例：Webサーバーとデータベースサーバー間の通信）を想定します。これらのHAリソースが別々のノードにあると、潜在的に高いレイテンシや不要なネットワーク負荷が生じる可能性があります。<span class="monospaced">アフィニティポジティブ</span>を持つリソースアフィニティルールは、HAリソースを同一ノードに保持する制約を実装します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager rules add resource-affinity keep-together \
    --affinity positive --resources vm:100,vm:200</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">共通のHAリソースを持つ2つ以上の肯定的なリソースアフィニティルールが存在する場合、
これらは単一の肯定的なリソースアフィニティルールとして扱われます。例えば、HA<span class="monospaced">リソースvm:10</span> <span class="monospaced">0とvm:101</span>、およびHAリソース<span class="monospaced">vm:1</span> <span class="monospaced">01とvm:102が</span>
それぞれ肯定的なリソースアフィニティルールに含まれている場合、
<span class="monospaced">vm:100</span>、<span class="monospaced">vm:101</span>、<span class="monospaced">vm:102が単一の</span>肯定的なリソースアフィニティルールに
含まれているのと同じ扱いとなります。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">肯定的リソースアフィニティルールのHAリソースが現在異なるノードで実行されている場合、CRSはそれらのHAリソースを、既に大多数が実行されているノードへ移動します。HAリソース数が同数の場合、アルファベット順で名前が先に表示されるノードが選択されます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>一方、HAリソース<span class="monospaced">vm:200</span> <span class="monospaced">とct:300上で</span>、計算負荷の高いプログラムや分散プログラム（例：シャーディングされたデータベースインスタンス）が実行されている場合、同じノード上で実行するとノードのハードウェアリソースに負荷がかかり、これらのHAリソースの動作が遅くなる可能性があります。<span class="monospaced">アフィニティネガティブ</span>のリソースアフィニティルールは、
HAリソースを別々のノードに分散させる制約を実装します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager rules add resource-affinity keep-separate \
    --affinity negative --resources vm:200,ct:300</pre>
</div></div>
<div class="paragraph">
<p>ノードアフィニティルールとは異なり、リソースアフィニティルールはデフォルトで厳格です。
つまり、リソースアフィニティルールによる制約が HA リソースに対して満たせない場合、
HA マネージャーはフェイルオーバー時にはその HA リソースをリカバリ状態に、
その他の状況ではエラー状態に置きます。</p></div>
<div class="paragraph">
<p>上記のコマンドにより、ルール設定ファイルに以下のルールが作成されました：</p></div>
<div class="listingblock">
<div class="title">リソースアフィニティルール設定例 (<span class="monospaced">/etc/pve/ha/rules.cfg</span>)</div>
<div class="content monospaced">
<pre>resource-affinity: keep-together
        resources vm:100,vm:200
        affinity positive

resource-affinity: keep-separate
        resources vm:200,ct:300
        affinity negative</pre>
</div></div>
<div class="sect5">
<h6 id="_interactions_between_positive_and_negative_resource_affinity_rules">ポジティブおよびネガティブリソースアフィニティルールの相互作用
<a class="headerlink" href="#_interactions_between_positive_and_negative_resource_affinity_rules" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>ポジティブリソースアフィニティルール内のHAリソースがネガティブリソースアフィニティルールにも属する場合、
そのポジティブルール内の他の全HAリソースは、
当該ネガティブルール内のHAリソースともネガティブアフィニティ状態となる。</p></div>
<div class="paragraph">
<p>例えば、<span class="monospaced">HAリソースvm:100</span>、<span class="monospaced">vm:101</span>、<span class="monospaced">vm:102が</span>正のアフィニティルールに含まれ、<span class="monospaced">vm:100が</span>HAリ<span class="monospaced">ソースct:200との</span>負のアフィニティルールに含まれる場合、<span class="monospaced">vm:</span> <span class="monospaced">101とvm:</span> <span class="monospaced">102もそれぞれct:200に対して負</span>のアフィニティを持つことになります。</p></div>
<div class="paragraph">
<p>なお、2つ以上のHAリソースが肯定的および否定的リソース親和性ルールの両方に含まれる場合、これらは競合を引き起こすため無効化されます。複数のHAリソースを同一ノードに保持しつつ、同時に別々のノードに分離することは不可能です。これらのケースの詳細については、後述の<a href="#ha_manager_rule_conflicts">ルール競合とエラー</a>に関するセクションを参照してください。</p></div>
</div>
<div class="sect5">
<h6 id="_interactions_between_node_and_positive_resource_affinity_rules">ノードと肯定的リソースアフィニティルールの相互作用
<a class="headerlink" href="#_interactions_between_node_and_positive_resource_affinity_rules" title="Permalink to this heading"></a></h6>
<div class="paragraph">
<p>ノード親和性ルールに属するHAリソースが、同時に正の親和性ルールにも含まれる場合、
その正の親和性ルール内の他の全HAリソースもノード親和性ルールを継承します。</p></div>
<div class="paragraph">
<p>例えば、<span class="monospaced">HAリソースvm:100</span>、<span class="monospaced">vm:101</span>、<span class="monospaced">vm:102が正</span>のリソースアフィニティルールに含まれ、<span class="monospaced">vm:102が</span>ノードアフィニティルール（<span class="monospaced">vm:</span> <span class="monospaced">102をノード3に限定</span>）に含まれる場合、<span class="monospaced">vm:</span> <span class="monospaced">100とvm:101も</span> <span class="monospaced">同様にノード3に</span>限定されます。</p></div>
<div class="paragraph">
<p>注意：2つ以上のHAリソースが同一の正の資源親和性ルールと異なるノード親和性ルールに属する場合、これらのルールはエラーを引き起こし無効化されます（現在未サポート）。詳細については、後述の「<a href="#ha_manager_rule_conflicts">ルールの競合とエラー</a>」セクションを参照してください。</p></div>
</div>
<div class="sect5">
<h6 id="_resource_affinity_rule_properties">リソースアフィニティルールのプロパティ
<a class="headerlink" href="#_resource_affinity_rule_properties" title="Permalink to this heading"></a></h6>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">affinity</span>:<span class="monospaced">&amp;lt;negative | positive&amp;gt;</span></dt>
<dd>
<p>
HAリソースを同一ノードに保持するか（<em>肯定</em>）、別々のノードに保持するか（<em>否定</em>）を記述します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">resources</span>:<span class="monospaced">&amp;lt;type&amp;gt;:&amp;lt;name&amp;gt;{,&amp;lt;type&amp;gt;:&amp;lt;name&amp;gt;}*</span></dt>
<dd>
<p>
HAリソースIDのリスト。リソースタイプとコロンで区切られたリソース固有名で構成される（例: vm:100,ct:101）。</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ha_manager_rule_conflicts">15.6.4. ルール競合とエラー
<a class="headerlink" href="#ha_manager_rule_conflicts" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>HAルールはHAリソースに対してかなり複雑な制約を課すことができます。新規または変更されたHAルールがHAスタックのCRSスケジューラに不確実性をもたらさないことを保証するため、HAルールは適用前に実現可能性テストを受けます。これらのテストに失敗したルールは、競合やエラーが解決されるまで無効化されます。</p></div>
<div class="paragraph">
<p>現在、HAルールは次の実現可能性テストでチェックされます：</p></div>
<div class="ulist"><ul>
<li>
<p>
HAリソースは単一のHAノードアフィニティルールにのみ属することができます。</p>
</li>
<li>
<p>
HAリソースアフィニティルールには、少なくとも2つのHAリソースが必要です。</p>
</li>
<li>
<p>
ネガティブ HA リソースアフィニティルールは、クラスタ内のノード数よりも多くの HA リソースを指定できません。
そうしないと、HA リソースを分離するのに十分なノードが確保されません。</p>
</li>
<li>
<p>
肯定的なHAリソース親和性ルールは、否定的なHAリソース親和性ルールと同一の2つ以上のHAリソースを指定できません。つまり、2つ以上のHAリソースを同時に「一緒に保持」かつ「分離」することは不可能です。</p>
</li>
<li>
<p>
HAリソースは、HAノード親和性ルールとHAリソース親和性ルールの両方の一部となることができますが、その場合、HAノード親和性ルールは単一の優先度クラスを持つ必要があります。</p>
</li>
<li>
<p>
肯定的なHAリソース親和性ルールのHAリソースは、最大でも単一のHAノード親和性ルールにのみ属することができます。</p>
</li>
<li>
<p>
否定的なHAリソース親和性ルールを持つHAリソースは、ノード親和性ルールによってHAリソース数より少ないノード数に制限されてはならない。さもなければ、HAリソースを分離するのに十分なノードが確保されない。</p>
</li>
</ul></div>
</div>
</div>
<div class="sect2">
<h3 id="ha_manager_fencing">
<span>15.7.</span>フェンシング
<a class="headerlink" href="#ha_manager_fencing" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ノード障害時、フェンシングは問題のあるノードが確実にオフラインになることを保証します。これは、リソースが別のノードで回復された際に二重に実行されないようにするために必要です。これは非常に重要なタスクであり、これがなければ別のノードでリソースを回復することは不可能になります。</p></div>
<div class="paragraph">
<p>ノードがフェンシングされなかった場合、共有リソースへのアクセス権を保持したまま未知の状態に陥る可能性があります。これは非常に危険です！例えば、ストレージネットワーク以外の全ネットワークが切断された状況を想定してください。この場合、パブリックネットワークからは到達不能でも、VMは動作を継続し共有ストレージへの書き込みを続けます。</p></div>
<div class="paragraph">
<p>このVMを別のノードで単純に起動すると、両ノードから書き込みが行われる危険な競合状態が発生します。このような状態ではVMデータが破壊され、VM全体が使用不能になる可能性があります。また、ストレージが複数マウントを保護している場合、復旧自体が失敗する恐れもあります。</p></div>
<div class="sect3">
<h4 id="_how_proxmox_ve_fences">15.7.1. Proxmox VE のフェンス処理
<a class="headerlink" href="#_how_proxmox_ve_fences" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ノードをフェンシングする方法は複数存在します。例えば、ノードへの電源供給を遮断するフェンシングデバイスや、通信機能を完全に無効化する方法などです。これらは多くの場合非常にコストが高く、システムに追加の重要コンポーネントを導入することになります。なぜなら、これらが故障した場合、いかなるサービスも回復できなくなるからです。</p></div>
<div class="paragraph">
<p>そこで我々は、追加の外部ハードウェアを必要としない
より簡素なフェンシング手法の統合を目指した。
これはウォッチドッグタイマーを用いて実現可能である。</p></div>
<div class="ulist"><div class="title">可能なフェンシング手法</div><ul>
<li>
<p>
外部電源スイッチ</p>
</li>
<li>
<p>
スイッチ上の完全なネットワークトラフィックを無効化することでノードを隔離する</p>
</li>
<li>
<p>
ウォッチドッグタイマーを用いた自己フェンシング</p>
</li>
</ul></div>
<div class="paragraph">
<p>ウォッチドッグタイマーは、マイクロコントローラーの登場以来、重要かつ信頼性の高いシステムで広く使用されてきた。これらは通常、コンピュータの誤動作を検出し回復するために使用される、シンプルで独立した集積回路である。</p></div>
<div class="paragraph">
<p>通常動作中、<span class="monospaced">ha-managerは</span>ウォッチドッグタイマーがタイムアウトしないよう定期的にリセットします。ハードウェア故障やプログラムエラーによりウォッチドッグのリセットが失敗した場合、タイマーはタイムアウトしサーバー全体の再起動（リブート）をトリガーします。</p></div>
<div class="paragraph">
<p>最近のサーバーマザーボードにはこうしたハードウェアウォッチドッグが搭載されていることが多いが、
これらは設定が必要である。ウォッチドッグが利用不可または設定されていない場合、
Linux<em>カーネルのソフトウォッチドッグに</em>フォールバックする。信頼性は保たれるものの、
サーバーのハードウェアに依存するため、ハードウェアウォッチドッグよりも信頼性は低い。</p></div>
</div>
<div class="sect3">
<h4 id="_configure_hardware_watchdog">15.7.2. ハードウェアウォッチドッグの設定
<a class="headerlink" href="#_configure_hardware_watchdog" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトでは、セキュリティ上の理由から全てのハードウェアウォッチドッグモジュールはブロックされています。正しく初期化されていない場合、これらは装填された銃のようなものです。ハードウェアウォッチドッグを有効化するには、<em>/etc/default/pve-ha-manager</em> でロードするモジュールを指定する必要があります。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ウォッチドッグモジュールを選択（デフォルトはsoftdog）
WATCHDOG_MODULE=iTCO_wdt</pre>
</div></div>
<div class="paragraph">
<p>この設定は<em>watchdog-mux</em>サービスによって読み込まれ、起動時に指定されたモジュールをロードします。</p></div>
</div>
<div class="sect3">
<h4 id="_recover_fenced_services">15.7.3. フェンスされたサービスの復旧
<a class="headerlink" href="#_recover_fenced_services" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ノードが障害を起こしフェンシングが成功した後、CRMは障害ノードからオンライン状態のノードへサービスを移動しようと試みます。</p></div>
<div class="paragraph">
<p>回復対象ノードの選択には、以下の要素が影響します：
・現在稼働中のノードリスト
・使用スケジューラに基づく各ノードの負荷
・該当サービスが属するアフィニティルール（存在する場合）</p></div>
<div class="paragraph">
<p>まずCRMは、サービスが利用可能なノードの集合を構築します。
サービスがノードアフィニティルールに属する場合、
その集合はノードアフィニティルール内の最優先ノードに絞り込まれます。
サービスがリソースアフィニティルールに属する場合、
その集合はさらに制約を満たすように絞り込まれます。
制約とは、他のサービスと同じノードにサービスを保持するか、
他のサービスとは異なるノードにサービスを保持するかのいずれかです。最後に、CRMは使用中のスケジューラに基づき負荷が最も低いノードを選択し、
過負荷ノードの可能性を最小限に抑えます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Caution" src="data:image/png;base64,
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" />
</td>
<td class="content">ノード障害時、CRMはサービスを
残存ノードに分散します。これにより対象ノードのサービス負荷が増加し、
特に小規模クラスタでは高負荷状態を引き起こす可能性があります。
このような最悪のシナリオに対応可能なクラスタ設計を行ってください。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ha_manager_start_failure_policy">
<span>15.8. 起動失敗ポリシー</span>
<a class="headerlink" href="#ha_manager_start_failure_policy" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>起動失敗ポリシーは、ノード上でサービスが1回以上起動に失敗した場合に発動します。
同じノードでの再起動頻度や、サービスを別のノードで起動を試みるための
リロケーション頻度を設定するために使用できます。
このポリシーの目的は、特定のノードにおける共有リソースの一時的な利用不可を回避することです。例えば、ネットワーク問題などによりクォーラートノードで共有ストレージが利用不可になっても、他のノードでは利用可能な場合、リロケートポリシーによりサービスを起動させることが可能になります。</p></div>
<div class="paragraph">
<p>各リソースごとに個別に設定可能なサービス起動回復ポリシーには2種類あります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
max_restart</dt>
<dd>
<p>
実際のノード上で失敗したサービスを再起動する試行の最大回数。
デフォルトは1に設定されています。</p>
</dd>
<dt class="hdlist1">
max_relocate</dt>
<dd>
<p>
サービスを別のノードへ再配置する試行の最大回数。
再配置は、実際のノードで max_restart 値を超えた後にのみ発生します。
デフォルトは 1 に設定されています。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">再配置カウントは、サービスが少なくとも1回正常に起動した場合にのみリセットされる。
つまり、エラーを修正せずにサービスを再起動すると、
再起動ポリシーのみが繰り返される。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="ha_manager_error_recovery">
<span>15.9. エラー回復</span>
<a class="headerlink" href="#ha_manager_error_recovery" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>すべての試行後もサービス状態を回復できない場合、サービスはエラー状態に移行します。この状態では、HAスタックはサービスに一切関与しなくなります。唯一の解決策はサービスを無効化することです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># ha-manager set vm:100 --state disabled</pre>
</div></div>
<div class="paragraph">
<p>これはWebインターフェースからも実行可能です。</p></div>
<div class="paragraph">
<p>エラー状態からの回復には以下の手順が必要です：</p></div>
<div class="ulist"><ul>
<li>
<p>
リソースを安全かつ一貫性のある状態に戻す（例：
サービスを停止できなかった場合、そのプロセスを強制終了する）</p>
</li>
<li>
<p>
エラーフラグを解除するためリソースを無効化する</p>
</li>
<li>
<p>
この障害を引き起こしたエラーを修正する</p>
</li>
<li>
<p>
すべてのエラーを<strong>修正後</strong>、サービスの再起動を要求可能</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="ha_manager_package_updates">
<span>15.10. パッケージ更新</span>
<a class="headerlink" href="#ha_manager_package_updates" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ha-managerの更新は、複数の理由から全ノード同時ではなく、ノードごとに順次行う必要があります。第一に、ソフトウェアを徹底的にテストしているとはいえ、特定の環境に影響するバグを完全に排除することはできません。ノードごとに更新し、更新完了後に各ノードの機能性を確認することで、万が一の問題から回復できます。一方、全ノード同時更新はクラスターの破損を招く可能性があり、一般的に推奨されません。</p></div>
<div class="paragraph">
<p>また、Proxmox VE HAスタックは、クラスタとローカルリソースマネージャー（LRM）間の操作を実行するために要求確認プロトコルを使用します。再起動時には、LRMがCRMに対してすべてのサービスを凍結するよう要求します。これにより、LRMが再起動している短い時間中に、それらのサービスがクラスタによって操作されるのを防ぎます。
その後、再起動中の LRM はウォッチドッグを安全に終了できます。
このような再起動は通常、パッケージ更新時に発生します。前述の通り、
LRM からのリクエストを承認するにはアクティブなマスター CRM が必要です。
これが満たされない場合、更新プロセスが過度に長引く可能性があり、
最悪の場合、ウォッチドッグによるリセットがトリガーされることがあります。</p></div>
</div>
<div class="sect2">
<h3 id="ha_manager_node_maintenance">
<span>15.11. ノードのメンテナンス</span>
<a class="headerlink" href="#ha_manager_node_maintenance" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ノードのメンテナンス（ハードウェア交換やカーネルイメージのインストールなど）が必要な場合があります。これはHAスタック使用中にも適用されます。</p></div>
<div class="paragraph">
<p>HAスタックがサポートする主なメンテナンスは2種類です：</p></div>
<div class="ulist"><ul>
<li>
<p>
一般的なシャットダウンや再起動については、動作を設定可能です。詳細は
 <a href="#ha_manager_shutdown_policy"> シャットダウンポリシーを参照してください</a>。</p>
</li>
<li>
<p>
シャットダウンや再起動を必要としないメンテナンス、または
  1回の再起動後に自動的に停止すべきでないメンテナンスの場合、
  手動メンテナンスモードを有効にできます。</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_maintenance_mode">15.11.1. メンテナンスモード
<a class="headerlink" href="#_maintenance_mode" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>手動メンテナンスモードを使用すると、ノードをHA操作不可としてマークでき、
HAが管理するすべてのサービスを他のノードへ移行させます。</p></div>
<div class="paragraph">
<p>移行先のノードは、現在利用可能な他のノードから選択され、
HAルール設定と設定済みのクラスターリソーススケジューラ（CRS）モードによって決定されます。
各移行時、元のノードはHAマネージャーの状態に記録されるため、
メンテナンスモードが無効化されノードがオンラインに戻ると、
サービスは自動的に元のノードへ再移動されます。</p></div>
<div class="paragraph">
<p>現在、メンテナンスモードは ha-manager CLI ツールを使用して有効化または無効化できます。</p></div>
<div class="listingblock">
<div class="title">ノードのメンテナンスモードを有効化</div>
<div class="content monospaced">
<pre># ha-manager crm-command node-maintenance enable NODENAME</pre>
</div></div>
<div class="paragraph">
<p>これによりCRMコマンドがキューに追加され、マネージャーがこのコマンドを処理すると
メンテナンスモード要求がマネージャー状態に記録されます。これにより、
メンテナンスモードの適用/解除対象ノード以外からもコマンドを送信可能です。</p></div>
<div class="paragraph">
<p>対象ノードのLRMがコマンドを処理すると、自身を「利用不可」状態に設定しますが、
すべての移行コマンドは引き続き処理します。これにより、
すべてのアクティブサービスが移行され、
稼働中のワーカーがすべて終了するまで、
LRMの自己フェンシング監視機能は有効なまま維持されます。</p></div>
<div class="paragraph">
<p>なお、LRMが要求された状態を処理し始めた時点で、すべてのサービスが移行された後ではなく、LRMステータスは<span class="monospaced">メンテナンスモードと</span>表示されます。このユーザーエクスペリエンスは将来的に改善される予定です。
現時点では、ノード上にアクティブなHAサービスが残っていないか確認するか、
「<span class="monospaced">pve-ha-lrm[PID]: watchdog closed (disabled)」</span>のようなログ行を監視することで、
ノードがメンテナンスモードへの移行を完了したタイミングを把握できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">手動メンテナンスモードはノード再起動時に自動削除されず、
<span class="monospaced">ha-manager</span>CLIによる手動無効化、またはmanager-statusの手動クリア時のみ解除されます。</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">ノードのメンテナンスモード無効化</div>
<div class="content monospaced">
<pre># ha-manager crm-command node-maintenance disable NODENAME</pre>
</div></div>
<div class="paragraph">
<p>手動メンテナンスモードの無効化手順は有効化と同様です。
前述の<span class="monospaced">ha-manager</span>CLIコマンドを実行するとCRMコマンドがキューに追加され、
処理完了後に該当LRMノードが再び利用可能状態としてマークされます。</p></div>
<div class="paragraph">
<p>メンテナンスモードを無効化すると、モード有効時にノード上に存在した全サービスが
元の位置に戻されます。</p></div>
</div>
<div class="sect3">
<h4 id="ha_manager_shutdown_policy">15.11.2. シャットダウンポリシー
<a class="headerlink" href="#ha_manager_shutdown_policy" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>以下にノードシャットダウン時の各種HAポリシーの説明を示します。
現在、下位互換性のため<em>Conditionalが</em>デフォルトです。
<em>Migrateの方が</em>期待通りの動作をすると感じるユーザーもいます。</p></div>
<div class="paragraph">
<p>シャットダウンポリシーはWeb UI（<span class="monospaced">データセンター</span>→<span class="monospaced">オプション</span>→<span class="monospaced">HA設定</span>）<span class="monospaced">またはdatacenter.cfgで</span>直接設定可能：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ha: shutdown_policy=&amp;lt;value&amp;gt;</pre>
</div></div>
<div class="sect4">
<h5 id="_migrate">Migrate
<a class="headerlink" href="#_migrate" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>ローカルリソースマネージャー（LRM）がシャットダウン要求を受信し、このポリシーが有効な場合、
当該ノードは現在のHAマネージャーに対して利用不可状態を通知します。
これにより、当該ノード上に存在する全てのHAサービスの移行がトリガーされます。
LRMは、稼働中の全サービスが移行されるまでシャットダウン処理を遅延させようと試みます。ただし、これは稼働中のサービスが別のノード<strong>へ移行可能であることを</strong>前提としています。つまり、サービスがハードウェアパススルーなどによってローカルに拘束されていない必要があります。例えば、厳格なノードアフィニティルールは、
選択されたノード群以外ではサービスが実行できないことをHAマネージャーに指示します。
これらのノードがすべて利用不可の場合、シャットダウンは手動介入があるまで停止します。
シャットダウンされたノードが再びオンラインに戻ると、
その間に手動で移行されていない限り、以前に移動されたサービスは元のノードに戻されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">シャットダウン時の移行プロセス中もウォッチドッグは動作を継続します。
ノードがクォーラムを失った場合、フェンス処理が行われサービスが復旧されます。</td>
</tr></table>
</div>
<div class="paragraph">
<p>現在メンテナンス中のノードで（以前に停止した）サービスを起動する場合、
そのノードをフェンス処理し、サービスが別の利用可能なノードへ移動・起動
できる状態を確保する必要があります。</p></div>
</div>
<div class="sect4">
<h5 id="_failover">フェイルオーバー<a class="headerlink" href="#_failover" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>このモードでは、すべてのサービスが確実に停止されますが、現在のノードがすぐにオンラインに戻らない場合でも復旧されます。クラスタ規模のメンテナンス時に有用です。一度に電源を切るノードが多すぎると仮想マシンのライブマイグレーションが不可能になる場合でも、HAサービスが可能な限り早く復旧・再起動されることを保証できます。</p></div>
</div>
<div class="sect4">
<h5 id="_freeze">Freeze<a class="headerlink" href="#_freeze" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>このモードでは、すべてのサービスが停止および凍結され、
現在のノードが再びオンラインになるまで復旧されません。</p></div>
</div>
<div class="sect4">
<h5 id="_conditional">条件付き
<a class="headerlink" href="#_conditional" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><em>条件付き</em>シャットダウンポリシーは、シャットダウンまたは再起動のリクエストを自動的に検出し、それに応じて動作を変更します。</p></div>
<div class="paragraph">
<div class="title">シャットダウン</div><p>シャットダウン（<em>電源オフ</em>）は通常、ノードを一定時間停止させる計画がある場合に実行されます。この場合、LRMは管理対象サービスをすべて停止します。つまり、その後他のノードがそれらのサービスを引き継ぎます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">最近のハードウェアは大量のメモリ（RAM）を搭載しています。そのため、
オンライン移行時に全RAMが移行対象となるのを避けるため、
全リソースを停止してから再起動します。オンライン移行を使用する場合は、
ノードシャットダウン前に手動で移行を実行する必要があります。</td>
</tr></table>
</div>
<div class="paragraph">
<div class="title">再起動</div><p>ノードの再起動は<em>rebootコマンド</em>で開始されます。これは通常、新しいカーネルのインストール後に実行されます。これは「シャットダウン」とは異なり、ノードが直ちに再起動することに注意してください。</p></div>
<div class="paragraph">
<p>LRMは再起動の要求をCRMに通知し、CRMが全リソースを<span class="monospaced">凍結状態</span>にするまで待機します（<a href="#ha_manager_package_updates">パッケージ更新時</a>と同様の仕組み）。これにより、該当リソースが他ノードへ移動するのを防止します。代わりに、CRMは再起動後、同一ノード上でリソースを起動します。</p></div>
</div>
<div class="sect4">
<h5 id="_manual_resource_movement">手動リソース移動
<a class="headerlink" href="#_manual_resource_movement" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>最後に重要な点として、ノードのシャットダウンや再起動前に、
リソースを手動で他のノードに移動することも可能です。
この方法の利点は完全な制御が可能で、
オンライン移行を使用するかどうかを判断できることです。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">pve-ha-crm</span>、<span class="monospaced">pve-ha-lrm</span>、<span class="monospaced">watchdog-muxなどの</span>サービスを<em>強制終了</em>しないでください。これらはウォッチドッグを管理・使用しているため、ノードの即時再起動やリセットを引き起こす可能性があります。</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ha_manager_crs">
<span>15.12. クラスタリソーススケジューリング</span>
<a class="headerlink" href="#ha_manager_crs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>クラスタリソーススケジューラ（CRS）モードは、サービスの回復時およびシャットダウンポリシーによってトリガーされる移行時に、HAがノードを選択する方法を制御します。デフォルトモードは<span class="monospaced">basicです</span>。Web UI（<span class="monospaced">Datacenter</span>→<span class="monospaced">Options</span>）<span class="monospaced">またはdatacenter.cfgで</span>直接変更できます：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>crs: ha=static</pre>
</div></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-options-crs.png">
<img src="images/screenshot/gui-datacenter-options-crs.png" alt="screenshot/gui-datacenter-options-crs.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>変更は次のマネージャーラウンド（数秒後）から有効になります。</p></div>
<div class="paragraph">
<p>回復または移行が必要な各サービスについて、スケジューラは
HAルール（存在する場合）に基づき、サービスが利用可能なノードの中から
最適なノードを反復的に選択します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">将来的には（静的および動的）負荷分散モードの追加が計画されています。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_basic_scheduler">15.12.1. 基本スケジューラ
<a class="headerlink" href="#_basic_scheduler" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>各ノード上のアクティブなHAサービスの数が、リカバリノードの選択に使用されます。
非HA管理サービスは現在カウントされません。</p></div>
</div>
<div class="sect3">
<h4 id="_static_load_scheduler">15.12.2. 静的負荷スケジューラ
<a class="headerlink" href="#_static_load_scheduler" title="Permalink to this heading"></a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
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
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">静的モードは依然として技術プレビュー段階です。</td>
</tr></table>
</div>
<div class="paragraph">
<p>各ノード上のHAサービスからの静的使用状況情報がリカバリノードの選択に使用されます。
非HA管理サービスの使用状況は現在考慮されません。</p></div>
<div class="paragraph">
<p>この選択では、各ノードを順番に、サービスが既にそのノード上で実行されているかのように扱い、関連するゲスト構成からのCPUおよびメモリ使用量を使用します。次に、各代替案について、全ノードのCPUおよびメモリ使用量を考慮します。メモリは真に制限されたリソースであるため、はるかに重み付けされます。CPUとメモリの両方について、ノード間の最高使用量（理想的にはノードがオーバーコミットされないよう、より重み付け）と全ノードの平均使用量（より高いコミット状態のノードが既に存在する場合でも判別可能にするため）が考慮されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Important" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAALa0lEQVRogdWZa2wc1RXHfzM7O/te
P9e1vXHSmEdjx3YeDkkaF6REKRRCEDSEFNkRjdSWSsgC2iqoRWqLQKiqIBg1NOQDiMeHtkQIQkRR
S9S4aWwgCQoUgl232KkT28J21l6vd3d2dx79sDuTXdtre03Uqlc62tl53Pv/n3PuOffcKxiGwf9z
E//XAL5sk65WR0a6AaDrOjMtKwgCoigiCAKCIAhXa9wvTcAEHhoc5KMjR7jw3nucf+MN67k/GCS4
YQOr77yTpl27kGUZm81mXC0ywlLnQDbwEwcO0P2b3yz4jV5RwZq2Nm5/5BH8fj+SJGGz2b4UiSUR
MAzD0DSNEwcO8MdHHln8d0AcsAUCfOe551h7yy04HA7sdvuSrVEwAV3XjdDgIC/v2cOl06dznqWA
JCAAMvn9MwlEgF1PP8037rsPt9uN3W5fkjUKIqDrujF+4QLP3XQTU0NDOc8UIAa4y8sJtrQQqK/H
7XQSfv99Pn/nHQRRxNB16/0EEAUatm9n76uv4vP5cDgcBZNYNIF84I0MEK20lIZvf5sNe/dSWlqK
1+vFxBEZHubT3/+evqNHmR4dJRWP55BevW0bra+8gt/vx+l0IknSokksikA+8ElgClixYwc3799P
ZWUlTqczbz+x0VFOPvEEQ6dPE/niCwxdt0jUbd1K68svU1xcXBCJBQnMBz5eWkrL/v2s++Y3KSsr
QxQXlxc7f/5zBjo7CQ8NoadSKKQn943t7dyyf79FYjHuNC8BwzAMVVV56Z57+OzNN3PAJ8vK+FZH
B2s2b55X6/nahRMnOP7TnxLOKEXJyO2/+hVf37uXoqIinE6nmfzyksirMjNUvvGjH+WAVwG1vJxb
Dhxg1bp1uFwuMwQWJCu3bWPN3r24SkoAcGbA/OXXv2bws8+IRqOkUqlZGX1RBAzDMHRd51+nTvHe
wYNX7gPTQMO+faxav56SkpIlgTdlU3s7TXv2IGUs6AGioRDH2tuZmJggFouhqirGPCzyEUBVVX7X
1pZzPwI0fP/7bNmzh7KysrzADh8+zP3338++ffs4ePBg3vdEUWTDD3/IsuZmRLsdW4bEpd5eOp99
lnA4jKIoaJqWl8QsAqb2Txw4kDNp40BxXR0bWlspLy/PC+qZZ55hdHQUSZIYHByko6ODxx57bBZw
cy3kq6xk6y9/ib+qCgQBmbQ7nT50iIs9PUSjUZLJJIZhzEliLgKMDQzwp5/9zLqnkQ51W3/xCwKB
AE6nMy+B3t5exsfH6ezspLe3l3g8zuHDh2cBz5bKpibWtrXhLi0FwA3owNsPP8zExATxeBxVVecy
QC4Bc+L+taNjluvU33031dddN6/2BUGgpKSE/v5+JicncweaA3i2tDz8MIHrr0eU0gsQBzDW10ff
yZNEIhESicScrpRDQNd1xgYG+OC3v7XuJQBXIMDWn/yEioqKeUGMjY0hCAKKoszS1MjIyLzfAmx/
4gmKli0DQcBJOmicfOopJicnicfjJoG5LWBq/+Szz+a8oABNe/bgdrvndR1BEKiqqiIejxOLxWYR
CAaDC0alqjVrqGxowFNWhkDalUKff07f3/5mWSFTLFksLAK6rjN+4UKO9lXAUV7O2tbWeaNOthZl
WZ4FHlh0aN3y4IPIHk+6L8AGvNfRQTgctuZCthVEU/u6rnPutddyBk0A9bt3W4us+QY2fbyurg6v
15vTzw033LBoAsHmZoLNzdgcDgBcQKi/n391dTE9PU0ymcyxgkmAVCrF+4cO5WjfFgiwfoGwOTOy
lJWVUVtba1mkUAKCILClvR1veTkA9owVPnzllZy8YFnA1H5/dzfTw8PWgziwcutWfD4fsiwvCNyU
xsZG3G43lZWVVl933XVXQQSq161j+ebNlhXcwBdnzxIOh60lhmkFEUDTNP7++uvWgBrp6mrNHBk3
H/BsAtFoFEdm8GAwyMaNGwsiIAgCjbt346uosKwgAp8cPWolNj1THInmsqHn6FGLQApY1thIxcqV
+Hy+WX6+0ETesWMHLpcLWZZ54IEHCgYvCAKrbrsNyem0JrQEXMzkhKzlBaKu61z+97+ZHhnJmbwr
tm2zJu5CWp8pra2tNDU1sXPnTtrb25dEQBAEvrplC57MXJCB8XPniEQixONxa6Uq6brOQHd3jvvo
QP2ttxZUpMxsL7zwwpK+AyxLXrt9Oxe6uxFEEXvGZc4fO0bVD35AMplM1wuapjGYtbugAp5AgKLq
aquu/W/JTEs37dqFqihWzSADk8PD1jzQNC3tQtmrThUINDbm+H4h0tfXx6OPPsodd9xBW1sbPT09
BQPPluu2b7fWRxIQ6usjFotZBCRN06wZbbZAfT1FRUWWKQtpzz//PMPDw/T09DA1NcXo6CjHjx+f
11Xma95AwHJjEdB0HUVRrhCYuRGrAiXBoFUqFtq6u7sZHx9nJBMUurq65uxnsX0Hm5v56A9/ANIJ
LXrpEolEwgqlUqZQyPlo6OOPlzx5ly1bxnBWQmxpackBW6hSBEC02axrpqasNZGmaek8kN0kYPDj
j1FVdUlz4Mknn6Surs4Cb5aUhYZiUy59+GGOgm3V1WiadiUPCILAV9autV5wAaM9PXQeOWJprBBp
aGjgxIkTpFIpOjs7aWxsXBJwUwZOnUKZmgLS2zl4vUjSlV1XURRFqtavv3IDKAVe/O53efPxx69a
SCxUBs+c4dV77+Vyfz+xy5eBdG3iX7ECm81m9S2JokiwuZmiujrCPT1AuqgOAqcef5zzL77Imt27
uemhhyipqVnYZ5cw8bPbR0eOcOall7g8MEB4aIhEJAJk9qOAwKZNyLJsHpQgRKNRIxQK0XPmDH/+
3vdQQ6G8na/YtIk199zDypYWVmzceFWAT1y8yMWzZzn/9tv0vfsudqeTlKIQHRvL2QSOAqU7d/K1
W2/l2muvpba2Nl3iJhIJIxKJMDw8TO/Zs3zw4x+jTUzkHVCw2fCUleHw+QiuXYu/upqqhgb8VVUY
hkFNczPFweCs7z556y3r+vyxYwiiyD+PHwdBwNB1krEYhqYRC4UwdB2D9LJmmnRtXHz77VTfeCPL
ly+ntraWmpqa9MaaqqqGoiiEQiGGhoYYHBzk00OHiHR2LkqDNlnG7nJhd7nQswqN+ZogiuipFMlY
DDWRgBl5KEF6woqAUFFByc03U756NZWVlSxfvpyamhoCgQAejwdB13VDVVVisRihUIiRkRGGh4cZ
+sc/GO3qIt7VhZGJAle7mVpWuVKDCBng8jXX4N68Gc8111BUVER5eTnV1dVUV1cTCASuFFqGYaDr
upFKpYjH40xMTDA+Ps7Y2Bjj4+OEw2EmenqYPneO1OAgZCWpxTY9S9QMcLhyHGUDRI8HqbISZ309
zoYGnE4nHo8Hv99PaWkpgUCAiooK6/DE4XCkI1HW2a6hqiqKojA9Pc3k5KQl4XCY6elpotFoetuk
v59UKIR66RLToRBJTcMYHUWIRvMSMPO6rbY2/SsIOFatQpYk5NWrkSQJWZZxOBy43W68Xi9+v5+i
oiJKSkooLi7G5/PhdruRZdnads85HzD3hpLJJIqiEIvFiEajRCIRIpEI0WiUWCxGPB631iOKopBK
pazUbi4Oc7Y+snKCzWbDZrMhSRKSJGG3262w6HK5cLlceDwevF4vPp8Pr9eL2+3G5XLhcDjMkxuE
TNibdcBhnv9qmkYqlSKZTJJIJFAUhXg8jqIoKIpCIpGwSCSTSVRVtWSuk3qTiAnebrfngHc4HDid
TpxOJy6Xy7qWZdk6wZzrxCbvCY1JRNd1NE3LAWgSM69ngp+PgCiK1gF3NhFTzHvmO+Y3wCzw8xLI
JpL5tYCZpEyw2f/nWt1ag2UtM0x3Mq1iAp1j+bH0M7KFCGWDnfmbd8AMnuxfUzL/C0rp/wFnFd4n
EQn3XQAAAABJRU5ErkJggg==" />
</td>
<td class="content">サービス数が増えるほど組み合わせの可能性も増えるため、
数千のHA管理サービスがある環境での使用は
現時点では推奨されません。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_crs_scheduling_points">15.12.3. CRS スケジューリングポイント
<a class="headerlink" href="#_crs_scheduling_points" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>CRSアルゴリズムは毎ラウンド全てのサービスに適用されるわけではありません。
そうすると頻繁なノード移動が発生するためです。ワークロードによっては、
継続的な負荷分散では回避できないほどのクラスターへの負担が生じる可能性があります。
そのためProxmox VE HAマネージャーは、サービスを現在のノードに維持することを優先します。</p></div>
<div class="paragraph">
<p>CRSは現在、以下のスケジューリングポイントで使用されます：</p></div>
<div class="ulist"><ul>
<li>
<p>
サービス復旧（常時稼働）。アクティブなHAサービスを持つノードが障害発生した場合、
そのノード上の全サービスを他のノードへ復旧させる必要があります。
この復旧処理はCRSアルゴリズムを用いて、
残存ノード間で負荷分散されます。</p>
</li>
<li>
<p>
HAグループ構成変更（常時有効）。ノードがグループから削除された場合、
またはその優先度が低下した場合、HAスタックはCRSアルゴリズムを使用して、
適応された優先度制約に合致する、そのグループ内のHAサービスに対する
新しいターゲットノードを見つけます。</p>
</li>
<li>
<p>
HAルール設定変更（常時有効）。ルールがHAリソースに異なる制約を課す場合、HAスタックは新規ルールの種類に応じてCRSアルゴリズムを使用し、影響を受けるHAリソースの新たなターゲットノードを特定します：</p>
<div class="ulist"><ul>
<li>
<p>
ノードアフィニティルール: ノードアフィニティルールが作成されるか、既存のルールにHAリソース/ノードが追加されると、HAスタックはCRSアルゴリズムを使用して、これらのHAリソースがノードおよび優先度制約に従って割り当てられることを保証します。</p>
</li>
<li>
<p>
肯定的リソースアフィニティルール: 肯定的リソースアフィニティルールが作成された場合、または既存の肯定的ルールにHAリソースが追加された場合、HAスタックはCRSアルゴリズムを使用して、これらのHAリソースが共通ノードに移動されることを保証します。</p>
</li>
<li>
<p>
ネガティブリソースアフィニティルール：ネガティブリソースアフィニティルールが
  作成されるか、既存のネガティブリソースアフィニティルールにHAリソースが追加されると、
  HAスタックはCRSアルゴリズムを使用して、これらのHAリソースが別々のノードに移動されることを保証します。</p>
</li>
</ul></div>
</li>
<li>
<p>
HAサービスの停止→起動遷移（オプトイン）。停止状態のサービスの起動要求は、CRSアルゴリズムに基づく最適なノード確認の好機となります。特にディスクボリュームが共有ストレージ上に存在する場合は、起動済みサービスの移動よりも停止状態のサービス移動の方がコストが低いからです。この機能は、データセンター設定で<strong><span class="monospaced">ha-rebalance-on-start</span></strong>CRS オプションを設定することで有効化できます。このオプションは Web UI の [<span class="monospaced">データセンター</span>] →<span class="monospaced">[オプション</span>] →<span class="monospaced">[クラスタリソーススケジューリング]</span> でも変更可能です。</p>
</li>
</ul></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_vzdump">
16. バックアップと復元
<a class="headerlink" href="#chapter_vzdump" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>バックアップは、あらゆる合理的なIT導入において必須要件であり、Proxmox VEは
各ストレージおよび各ゲストシステムタイプの機能を活用した、完全に統合されたソリューションを提供します。これによりシステム管理者は、バックアップの一貫性とゲストシステムのダウンタイムのバランスを、<span class="monospaced">モードオプション</span>を通じて微調整することが可能となります。</p></div>
<div class="paragraph">
<p>Proxmox VEのバックアップは常に完全バックアップであり、VM/CT構成と全データを含みます。バックアップはGUIまたは<span class="monospaced">vzdump</span>コマンドラインツールから開始できます。</p></div>
<div class="paragraph">
<div class="title">バックアップストレージ</div><p>バックアップを実行するには、事前にバックアップストレージを定義する必要があります。ストレージの追加方法については、<a href="#chapter_storage">ストレージのドキュメント</a>を参照してください。ストレージは、バックアップが重複排除されたチャンクとメタデータとして保存される「Proxmox Backup Serverストレージ」か、バックアップが通常のファイルとして保存される「ファイルレベルストレージ」のいずれかです。高度な機能を備えているため、専用ホスト上でProxmox Backup Serverを使用することが推奨されます。NFSサーバーの使用も有効な代替手段です。いずれの場合も、オフサイトアーカイブ用に後でテープドライブにバックアップを保存することを検討してください。</p></div>
<div class="paragraph">
<div class="title">スケジュールされたバックアップ</div><p>バックアップジョブは、特定の曜日と時刻に選択可能なノードおよびゲストシステムに対して自動的に実行されるようスケジュール設定できます。詳細は<a href="#vzdump_jobs">「バックアップジョブ」</a>セクションを参照してください。</p></div>
<div class="sect2">
<h3 id="_backup_modes">
<span>16.1. バックアップモード</span>
<a class="headerlink" href="#_backup_modes" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ゲストの種類に応じて、一貫性を確保する方法はいくつかあります（<span class="monospaced">オプションモード</span>）。</p></div>
<div class="dlist"><div class="title">VMのバックアップモード:</div><dl>
<dt class="hdlist1">
<span class="monospaced">停止</span>モード</dt>
<dd>
<p>
このモードは、VMの動作に短時間のダウンタイムを伴う代わりに、
バックアップの最高の一貫性を提供します。
VMを正常にシャットダウンした後、バックグラウンドでQEMUプロセスを実行し、
VMデータをバックアップします。
バックアップ開始後、VMは以前動作していた場合、
完全な動作モードに戻ります。
一貫性はライブバックアップ機能を使用して保証されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">サスペンドモード</span></dt>
<dd>
<p>
このモードは互換性のために提供されており、<span class="monospaced">スナップショットモード</span>を呼び出す前にVMをサスペンドします。VMのサスペンドはより長いダウンタイムを招き、データの整合性が必ずしも向上するわけではないため、代わりに<span class="monospaced">スナップショット</span>モードの使用が推奨されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">スナップショットモード</span></dt>
<dd>
<p>
このモードは、わずかな不整合リスクを代償に、
最も短い操作ダウンタイムを提供します。
動作原理は、Proxmox VEライブバックアップを実行し、
VM稼働中にデータブロックをコピーすることです。
ゲストエージェントが有効化（<span class="monospaced">agent: 1</span>）かつ稼働中の場合、
整合性向上のため<span class="monospaced">guest-fsfreeze-freeze</span>および<span class="monospaced">guest-fsfreeze-thaw</span>を呼び出します。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Windowsゲストでは、ゲスト内で別のバックアップソフトウェアを使用する場合、ゲストエージェントの設定が必要です。詳細はゲストエージェントセクションの<a href="#qm_qga_fsfreeze">「Freeze &amp; Thaw」</a>を参照してください。</td>
</tr></table>
</div>
</dd>
</dl></div>
<div class="paragraph">
<p>QemuServer向けProxmox VEライブバックアップの技術概要は
<a href="https://git.proxmox.com/?p=pve-qemu.git;a=blob_plain;f=backup.txt">オンライン</a>で
<a href="https://git.proxmox.com/?p=pve-qemu.git;a=blob_plain;f=backup.txt">こちらから</a>確認できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Proxmox VEライブバックアップは、あらゆるストレージタイプでスナップショットと同様の動作を実現します。基盤となるストレージがスナップショットをサポートしている必要はありません。また、バックアップはバックグラウンドのQEMUプロセス経由で実行されるため、停止中のVMは、QEMUがVMディスクを読み取る間、短時間「実行中」と表示される点にご注意ください。ただし、VM自体は起動せず、ディスクのみが読み取られます。</td>
</tr></table>
</div>
<div class="dlist"><div class="title">コンテナのバックアップモード:</div><dl>
<dt class="hdlist1">
<span class="monospaced">停止</span>モード</dt>
<dd>
<p>
バックアップ実行中はコンテナを停止します。これにより
非常に長いダウンタイムが発生する可能性があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">サスペンドモード</span></dt>
<dd>
<p>
このモードではrsyncを使用してコンテナデータを一時的な場所（オプション<span class="monospaced">--tmpdir参照</span>）にコピーします。その後コンテナを一時停止し、変更されたファイルのみを再度rsyncでコピーします。その後コンテナを再開（再開）します。これによりダウンタイムは最小限に抑えられますが、コンテナのコピーを保持するための追加スペースが必要です。</p>
<div class="paragraph">
<p>コンテナがローカルファイルシステム上にあり、バックアップのターゲットストレージがNFS/CIFSサーバーの場合、<span class="monospaced">--tmpdirも</span>ローカルファイルシステム上に配置するように設定すべきです。これによりパフォーマンスが大幅に向上します。また、バックアップストレージがNFSサーバーである場合、サスペンドモードでACLを使用してローカルコンテナをバックアップしたい場合にも、ローカル<span class="monospaced">tmpdir</span>の使用が必須となります。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">スナップショットモード</span></dt>
<dd>
<p>
このモードでは基盤ストレージのスナップショット機能を利用します。
まずデータの整合性を確保するためコンテナを一時停止します。
コンテナボリュームの一時スナップショットを作成し、
その内容をtarファイルにアーカイブします。最後に一時スナップショットを削除します。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">スナップショットモード</span>では、バックアップ対象の全ボリュームがスナップショット対応ストレージ上に存在する必要があります。<span class="monospaced">`backup=no</span>` マウントポイントオプションを使用すれば、個々のボリュームをバックアップ対象から除外できます（この要件も適用除外となります）。</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">デフォルトでは、ルートディスクのマウントポイント以外の追加マウントポイントはバックアップ対象外です。ボリュームマウントポイントについては、<strong>バックアップオプション</strong>を設定することでマウントポイントをバックアップに含めることができます。デバイスおよびバインドマウントは、その内容がProxmox VEストレージライブラリ外で管理されるため、バックアップ対象外です。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_vm_backup_fleecing">16.1.1. VMバックアップのフリッピング
<a class="headerlink" href="#_vm_backup_fleecing" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>仮想マシンのバックアップが開始されると、QEMUはブロック層に「コピー・ビフォア・ライト」フィルターをインストールします。このフィルターは、ゲストによる新規書き込み時に、バックアップに必要な古いデータがまずバックアップターゲットに送信されることを保証します。ゲストは、この操作が完了するまで書き込みをブロックするため、まだバックアップされていないセクタへのゲストI/Oはバックアップターゲットの速度によって制限されます。</p></div>
<div class="paragraph">
<p>バックアップ・フリーシングでは、このような古いデータはバックアップ先へ直接送信される代わりにフリーシングイメージにキャッシュされます。これによりゲストのIOパフォーマンスが向上し、特定のシナリオではハングを防止することも可能ですが、その代償としてより多くのストレージ容量が必要となります。</p></div>
<div class="paragraph">
<p>ストレージ<span class="monospaced">local-lvm</span> 上にフリーシングイメージを作成し、VM<span class="monospaced">123</span>のバックアップを手動で開始するには、以下を実行します。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vzdump 123 --fleecing enabled=1,storage=local-lvm</pre>
</div></div>
<div class="paragraph">
<p>特定のバックアップジョブごとにオプションを設定することも、<a href="#vzdump_configuration">設定オプションを</a>介してノード全体のフォールバックとして設定することも可能です。UIでは、バックアップジョブ編集時の<em>詳細</em>タブでフリージングを設定できます。</p></div>
<div class="paragraph">
<p>fleecingストレージは高速なローカルストレージであるべきで、シンプロビジョニングと
ディスクアードをサポートしている必要があります。例としては、LVM-thin、RBD、ストレージ設定で<span class="monospaced">スパース1</span>を指定したZFS、
多くのファイルベースストレージが挙げられます。理想的には、fleecingストレージは
専用ストレージであるため、容量が満杯になっても他のゲストに影響せず、
バックアップが失敗するだけです。バックアップ済みのfleecingイメージの一部は、
使用容量を抑えるために破棄されます。</p></div>
<div class="paragraph">
<p>ディスカードをサポートしないファイルベースストレージ（例：バージョン4.2以前のNFS）では、ストレージ設定で<span class="monospaced">事前割り当てを無効にする</span>必要があります。
<span class="monospaced">qcow2</span>（ストレージが対応している場合、フリーシングイメージのフォーマットとして自動的に使用される）と組み合わせることで、既に割り当てられたイメージ部分を後で再利用できる利点があり、これによりかなりの容量節約が可能です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><span class="monospaced">スパーシーオプションなしの</span>LVMやZFSなど、シンプロビジョニングされていないストレージでは、
元のディスクのフルサイズを事前にフルイメージ用に確保する必要があります。
シンプロビジョニングされたストレージでは、
バックアップが別のディスクで稼働中の際にゲストがディスク全体を書き換える場合のみ、
フルイメージが元のイメージと同じサイズまで成長できます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_ct_change_detection_mode">16.1.2. CT 変更検出モード
<a class="headerlink" href="#_ct_change_detection_mode" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>変更検出モードの設定は、pxarアーカイブのエンコーディング形式と、
Proxmox Backup Serverをターゲットとするコンテナバックアップにおける
変更済みファイルおよび変更なしファイルの処理方法を定義します。</p></div>
<div class="paragraph">
<p>変更検出モードオプションは、ジョブ編集時の<em>詳細</em>タブで個々のバックアップジョブごとに設定可能です。さらに、<a href="#vzdump_configuration">設定オプション</a>を通じてノード全体のフォールバックとして設定することもできます。</p></div>
<div class="paragraph">
<p>利用可能な変更検出モードは3種類です：</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:20%;" />
<col style="width:80%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">モード     </th>
<th class="tableblock halign-left valign-top">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">デフォルト</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">すべてのファイルを読み取り、pxar フォーマットバージョン 1 を使用して単一のアーカイブにエンコードします。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">データ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">すべてのファイルを読み込みエンコードしますが、データとメタデータを別々のストリームに分割し、pxarフォーマットバージョン2を使用します。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock monospaced">メタデータ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">データと同様に</span>ストリームを分割しアーカイブ形式バージョン2を使用するが、
変更されていないファイルを検出するために（存在する場合）前のスナップショットの
メタデータアーカイブを使用し、可能な限りディスクからファイル内容を読み取らずに
それらのデータチャンクを再利用する。</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph">
<p>変更検出<span class="monospaced">モードメタデータ</span>を使用したバックアップを実行するには、以下を実行します</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vzdump 123 --storage pbs-storage --pbs-change-detection-mode metadata</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">VMのバックアップやProxmox Backup Server以外のストレージバックエンドへのバックアップは
この設定の影響を受けません。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backup_file_names">
<span>16.2. バックアップファイル名</span>
<a class="headerlink" href="#_backup_file_names" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>新しいバージョンのvzdumpは、ゲストタイプとバックアップ時間をファイル名にエンコードします。例:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>vzdump-lxc-105-2009_10_09-11_04_43.tar</pre>
</div></div>
<div class="paragraph">
<p>これにより、複数のバックアップを同一ディレクトリに保存できます。保持するバックアップの数は、各種保持期間オプションで制限可能です。詳細は後述の<a href="#vzdump_retention">「バックアップ保持期間</a>」セクションを参照してください。</p></div>
</div>
<div class="sect2">
<h3 id="_backup_file_compression">
<span>16.3. バックアップファイルの圧縮</span>
<a class="headerlink" href="#_backup_file_compression" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>バックアップ<span class="monospaced">ファイル</span>は次のアルゴリズムで圧縮可能です：lzo
<span class="footnote"><br>[Lempel–Ziv–Oberhumer 無損失データ圧縮アルゴリズム
<a href="https://en.wikipedia.org/wiki/Lempel-Ziv-Oberhumer">https://en.wikipedia.org/wiki/Lempel-Ziv-Oberhumer]</a><br></span>,<span class="monospaced">gzip</span> <span class="footnote"><br>[gzip -
DEFLATEアルゴリズムに基づく<a href="https://en.wikipedia.org/wiki/Gzip">https://en.wikipedia.org/wiki/Gzip]</a><br></span>または<span class="monospaced">z</span>std
<span class="footnote"><br>[Zstandard 無損失データ圧縮アルゴリズム
<a href="https://en.wikipedia.org/wiki/Zstandard">https://en.wikipedia.org/wiki/Zstandard]</a><br></span>.</p></div>
<div class="paragraph">
<p>現在、Zstandard (zstd) はこれら3つのアルゴリズムの中で最速です。
マルチスレッディングも、lzoやgzipに対するzstdの利点です。lzoとgzipはより広く使用され、デフォルトでインストールされていることが多いです。</p></div>
<div class="paragraph">
<p>マルチスレッド処理による性能向上のため、gzip のドロップイン代替として pigz<span class="footnote"><br>[pigz - gzip の並列実装
<a href="https://zlib.net/pigz/">https://zlib.net/pigz/</a>]<br></span>をインストールできます。pigz および zstd では、スレッド数/コア数を調整可能です。詳細は
<a href="#vzdump_configuration">以下の設定オプション</a>を参照してください。</p></div>
<div class="paragraph">
<p>バックアップファイル名の拡張子から、
どの圧縮アルゴリズムが使用されたかを判別できる場合が多い。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:50%;" />
<col style="width:50%;" />
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.zst</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zstandard (zstd) 圧縮</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.gz または .tgz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gzip圧縮</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.lzo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lzo 圧縮</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph">
<p>バックアップファイル名が上記の拡張子で終わっていない場合、
vzdumpによる圧縮は行われていません。</p></div>
</div>
<div class="sect2">
<h3 id="_backup_encryption">
<span>16.4. バックアップの暗号化</span>
<a class="headerlink" href="#_backup_encryption" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox Backup Serverストレージでは、オプションでクライアント側バックアップ暗号化を設定可能です。<a href="#storage_pbs_encryption">詳細は該当セクション</a>を参照してください<a href="#storage_pbs_encryption">。</a></p></div>
</div>
<div class="sect2">
<h3 id="vzdump_jobs">
<span>16.5. バックアップジョブ</span>
<a class="headerlink" href="#vzdump_jobs" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-backup-overview.png">
<img src="images/screenshot/gui-cluster-backup-overview.png" alt="screenshot/gui-cluster-backup-overview.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>手動でのバックアップ実行に加え、全仮想ゲストまたは選択したゲストをストレージにバックアップする定期ジョブを設定できます。ジョブは UI の [<em>データセンター</em>] →<em>[バックアップ</em>] または<span class="monospaced">/cluster/backup</span>API エンドポイントで管理可能です。いずれの方法でも<span class="monospaced">/etc/pve/jobs.cfg</span> にジョブエントリが生成され、<span class="monospaced">pvescheduler</span>デーモンによって解析・実行されます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-backup-edit-01-general.png">
<img src="images/screenshot/gui-cluster-backup-edit-01-general.png" alt="screenshot/gui-cluster-backup-edit-01-general.png" width=250 style="padding: 0 10px 0 0;float:left;" /></a>
<p>ジョブはクラスタ全ノードまたは特定ノード向けに設定され、指定されたスケジュールに従って実行されます。スケジュールの形式は<span class="monospaced">systemd</span>カレンダーイベントと非常に類似しており、詳細は<a href="#chapter_calendar_events">カレンダーイベントの</a>セクションを参照してください。UIの<em>「スケジュール」</em>フィールドは自由に編集可能で、ドロップダウンリストには開始点として使用できる複数の例が含まれています。</p></div>
<div class="paragraph">
<p>ストレージやノード設定の保持オプションを上書きする
ジョブ固有の<a href="#vzdump_retention">保持オプション</a>を設定可能。
またバックアップと共に保存する追加情報用の
<a href="#vzdump_notes">メモテンプレートも設定できる</a>。</p></div>
<div class="paragraph">
<p>スケジュールされたバックアップは、ホストがオフラインだった場合や
スケジュール時間に pvescheduler が無効だった場合に実行を逃します。
この場合、遅延したジョブを処理する動作を設定できます。
<span class="monospaced">「逃したジョブを再実行」</span>オプション（UI の<em>[詳細設定]</em>タブ、設定ファイルでは<span class="monospaced">repeat-missed</span>）を有効にすると、
スケジューラに逃したジョブを可能な限り早く実行するよう指示できます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-backup-edit-04-advanced.png">
<img src="images/screenshot/gui-cluster-backup-edit-04-advanced.png" alt="screenshot/gui-cluster-backup-edit-04-advanced.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>バックアップ性能調整用の設定項目がいくつか存在します（一部はUIの<em>[詳細設定]</em>タブで公開）。最も注目すべきはIO帯域幅を<span class="monospaced">制限するbwlimitです</span>。圧縮ツールに使用するスレッド数は、<span class="monospaced">それぞれgzipに代わる</span> <span class="monospaced">pigz設定</span>、<span class="monospaced">zstd設定</span>で制御可能です。
さらに、<span class="monospaced">ionice</span>（BFQスケジューラ使用時）、<span class="monospaced">パフォーマンス設定の一部</span> <span class="monospaced">であるmax-workers</span>（VMバックアップのみに影響）、<span class="monospaced">pbs-entries-max</span>（コンテナバックアップのみに影響）があります。<a href="#vzdump_configuration">詳細は設定オプションを参照</a>してください。</p></div>
</div>
<div class="sect2">
<h3 id="vzdump_retention">
<span>16.6. バックアップの保持期間</span>
<a class="headerlink" href="#vzdump_retention" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">prune-backups</span>オプションを使用すると、
柔軟に保持するバックアップを指定できます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-backup-edit-02-retention.png">
<img src="images/screenshot/gui-cluster-backup-edit-02-retention.png" alt="screenshot/gui-cluster-backup-edit-02-retention.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>以下の保持期間オプションが利用可能です：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">keep-all &amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
すべてのバックアップを保持します。これが<span class="monospaced">true</span> の場合、他のオプションは設定できません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-last &amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
最後の<span class="monospaced">&amp;lt;N&amp;gt;</span>個のバックアップを保持します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-hourly &amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去<span class="monospaced">&amp;lt;N&amp;gt;</span>時間のバックアップを保持します。1時間に複数のバックアップがある場合、最新のものが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-daily &amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去<span class="monospaced">&amp;lt;N&amp;gt;</span>日分のバックアップを保持。1日に複数のバックアップがある場合、最新の1つだけ保持。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-weekly &amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去<span class="monospaced">&amp;lt;N&amp;gt;</span>週間のバックアップを保持します。1週間内に複数のバックアップがある場合、最新のバックアップのみを保持します。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">週は月曜日に始まり日曜日に終わります。ソフトウェアは<span class="monospaced">ISO週日付システム</span>を使用し、年末の週を正しく処理します。</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">keep-monthly &amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去<span class="monospaced">&amp;lt;N&amp;gt;</span>ヶ月分のバックアップを保持します。1ヶ月に複数のバックアップがある場合、最新のバックアップのみを保持します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-yearly &amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去<span class="monospaced">&amp;lt;N&amp;gt;</span>年分のバックアップを保持します。1 年間に複数のバックアップがある場合、最新のバックアップのみが保持されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>保持オプションは上記の順序で処理されます。各オプションは指定期間内のバックアップのみを対象とし、次のオプションは既に処理済みのバックアップには影響せず、より古いバックアップのみを考慮します。</p></div>
<div class="paragraph">
<p>使用する保持オプションはカンマ区切りリストで指定します。例：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 777 --prune-backups keep-last=3,keep-daily=13,keep-yearly=9</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">vzdump</span> に<span class="monospaced">prune-backups</span>を直接渡すことも可能ですが、
多くの場合、ストレージレベルで設定を構成する方が合理的です。
これはウェブインターフェース経由で実行できます。</p></div>
<div class="sect3">
<h4 id="_prune_simulator">16.6.1. 削除シミュレータ
<a class="headerlink" href="#_prune_simulator" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><a href="https://pbs.proxmox.com/docs/prune-simulator">Proxmox Backup Server ドキュメントの
prune シミュレーター</a>を使用すれば、
様々なバックアップスケジュールにおける
異なる保持オプションの効果を検証できます。</p></div>
</div>
<div class="sect3">
<h4 id="_retention_settings_example">16.6.2. 保持設定の例
<a class="headerlink" href="#_retention_settings_example" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バックアップ頻度と古いバックアップの保持期間は、特定のワークロードにおいてデータの変更頻度や古い状態の重要性によって異なります。
バックアップが企業の文書アーカイブとして機能する場合、バックアップの保持期間に関する法的要件が存在する可能性もあります。</p></div>
<div class="paragraph">
<p>この例では、毎日バックアップを実行し、保持期間を10年とし、保存されるバックアップ間の期間が徐々に長くなることを想定します。</p></div>
<div class="paragraph">
<p><span class="monospaced">keep-last=3</span>- たとえ日次バックアップのみの場合でも、管理者は大規模なアップグレード直前または直後に追加バックアップを作成したい場合があります。keep-lastを設定することでこれを保証します。</p></div>
<div class="paragraph">
<p><span class="monospaced">keep-hourly</span>は設定なし - 日次バックアップでは不要です。追加の手動バックアップは keep-last で既にカバーされています。</p></div>
<div class="paragraph">
<p><span class="monospaced">keep-daily=13</span>- 少なくとも1日をカバーするkeep-lastと組み合わせることで、
  最低2週間分のバックアップを確保します。</p></div>
<div class="paragraph">
<p><span class="monospaced">keep-weekly=8</span>- 少なくとも2か月分の週次バックアップを保証します。</p></div>
<div class="paragraph">
<p><span class="monospaced">keep-monthly=11</span>- これまでの保持設定と組み合わせることで、少なくとも1年分の月次バックアップを確保します。</p></div>
<div class="paragraph">
<p><span class="monospaced">keep-yearly=9</span>- 長期アーカイブ用です。前述の設定で今年分をカバーしたため、
  残りの年数に対して9を設定することで、合計で少なくとも10年分のバックアップを確保できます。</p></div>
<div class="paragraph">
<p>環境で最低限必要とされる保持期間よりも長い期間を設定することを推奨します。
不必要に長いと判断した場合はいつでも短縮できますが、一度削除したバックアップを
再作成することはできません。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="vzdump_protection">
<span>16.7. バックアップ保護</span>
<a class="headerlink" href="#vzdump_protection" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>バックアップを<span class="monospaced">保護対象として</span>マークすると、その削除が防止されます。Proxmox VEのUI、CLI、APIを介した保護済みバックアップの削除試行は失敗します。ただし、この保護はProxmox VEによって強制されるものであり、ファイルシステム自体によるものではありません。つまり、基盤となるバックアップストレージへの書き込みアクセス権を持つユーザーであれば、バックアップファイル自体を手動で削除することは依然として可能です。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">保護されたバックアップは削除処理の対象外となり、
保持設定の計算にも含まれません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>ファイルシステムベースのストレージでは、保護は監視ファイル
<span class="monospaced">&amp;lt;backup-name&amp;gt;.protected</span> を通じて実装されます。Proxmox Backup Server では、サーバー側で処理されます（Proxmox Backup Server バージョン 2.1 以降で利用可能）。</p></div>
<div class="paragraph">
<p>ストレージオプション<span class="monospaced">max-protected-backups</span>を使用して、ストレージ上でゲストごとに許可される保護バックアップの数を制御します。無制限にするには<span class="monospaced">-1</span>を指定します。デフォルトは、<span class="monospaced">Datastore.Allocate</span>権限を持つユーザーには無制限、その他のユーザーには<span class="monospaced">5</span>です。</p></div>
</div>
<div class="sect2">
<h3 id="vzdump_notes">
<span>16.8. バックアップに関する注意事項</span>
<a class="headerlink" href="#vzdump_notes" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>バックアップへのメモ追加は、UIの「<em>メモ編集</em>」ボタンまたはストレージコンテンツAPI経由で行えます。</p></div>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-cluster-backup-edit-03-template.png">
<img src="images/screenshot/gui-cluster-backup-edit-03-template.png" alt="screenshot/gui-cluster-backup-edit-03-template.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>バックアップジョブおよび手動バックアップ用に、動的にノートを生成するテンプレートを指定することも可能です。テンプレート文字列には、中括弧で囲まれた変数を記述でき、バックアップ実行時に該当する値に置換されます。</p></div>
<div class="paragraph">
<p>現在サポートされているのは以下の通りです：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">{{cluster}}</span>クラスタ名（存在する場合）</p>
</li>
<li>
<p>
<span class="monospaced">{{guestname}}</span>仮想ゲストに割り当てられた名前</p>
</li>
<li>
<p>
<span class="monospaced">{{node}}</span>バックアップ作成中のノードのホスト名</p>
</li>
<li>
<p>
<span class="monospaced">{{vmid}}</span>ゲストの数値VMID</p>
</li>
</ul></div>
<div class="paragraph">
<p>APIまたはCLI経由で指定する場合、改行文字とバックスラッシュはそれぞれリテラル<span class="monospaced">\n</span>および<span class="monospaced">\\</span>でエスケープされた単一行である必要があります。</p></div>
</div>
<div class="sect2">
<h3 id="vzdump_restore">
<span>16.9.</span>復元
<a class="headerlink" href="#vzdump_restore" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>バックアップアーカイブは、Proxmox VE Web GUI または以下の CLI ツールで復元できます：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">pct restore</span></dt>
<dd>
<p>
コンテナ復元ユーティリティ</p>
</dd>
<dt class="hdlist1">
q<span class="monospaced">m</span>restore</dt>
<dd>
<p>
仮想マシン復元ユーティリティ</p>
</dd>
</dl></div>
<div class="paragraph">
<p>詳細は対応するマニュアルページを参照してください。</p></div>
<div class="sect3">
<h4 id="_bandwidth_limit">16.9.1. 帯域幅制限
<a class="headerlink" href="#_bandwidth_limit" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>大規模なバックアップの復元には、特にバックアップストレージからの読み取りと
ターゲットストレージへの書き込みの両方におけるストレージ帯域幅など、
多くのリソースが必要となる場合があります。これによりストレージへのアクセスが
混雑し、他の仮想ゲストに悪影響を及ぼす可能性があります。</p></div>
<div class="paragraph">
<p>これを回避するには、バックアップジョブに帯域幅制限を設定できます。Proxmox VEでは
復元とアーカイブ用に2種類の制限を実装しています：</p></div>
<div class="ulist"><ul>
<li>
<p>
per-restore limit: バックアップアーカイブからの読み取りに
  使用される最大帯域幅を示します</p>
</li>
<li>
<p>
ストレージごとの書き込み制限: 特定のストレージへの書き込みに使用される最大帯域幅</p>
</li>
</ul></div>
<div class="paragraph">
<p>読み取り制限は書き込み制限に間接的に影響します。読み取り量を超える書き込みは不可能です。ジョブごとの制限値が小さい場合、ストレージごとの制限値を上書きします。ジョブごとの制限値が大きい場合、影響を受けるストレージに対して「Data.Allocate」権限がある場合にのみ、ストレージごとの制限値を上書きします。</p></div>
<div class="paragraph">
<p>復元CLIコマンドの`--bwlimit &amp;lt;integer&amp;gt;`オプションを使用すると、
復元ジョブ固有の帯域幅制限を設定できます。制限単位はKiB/sです。
つまり`10240`を指定するとバックアップの読み取り速度が10MiB/sに制限され、
残りのストレージ帯域幅を稼働中の仮想ゲストが利用可能となるため、
バックアップがゲストの動作に影響を与えません。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">特定の復元ジョブで全ての制限を無効化するには、<span class="monospaced">bwlimit</span>パラメータに「0」を指定します。
これは極めて重要な仮想ゲストを可能な限り迅速に復元する必要がある場合に有用です。
（ストレージに対する`Data.Allocate`権限が必要です）</td>
</tr></table>
</div>
<div class="paragraph">
<p>多くの場合、ストレージの一般利用可能帯域幅は時間経過で変化しません。
そのため、設定済みストレージごとにデフォルトの帯域幅制限を設定する機能を実装しました。
設定方法は以下の通りです：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre># pvesm set STORAGEID --bwlimit restore=KIBs</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_live_restore">16.9.2. ライブ復元
<a class="headerlink" href="#_live_restore" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>大規模なバックアップの復元には長時間かかる場合があり、その間ゲストは利用不可となります。Proxmox Backup Serverに保存されたVMバックアップでは、ライブ復元オプションを使用することでこの待機時間を軽減できます。</p></div>
<div class="paragraph">
<p>GUIのチェックボックス<span class="monospaced">またはqmrestoreの</span> <span class="monospaced">--live</span>-restore引数でライブ復元を有効化すると、
復元開始と同時にVMが起動します。データはバックグラウンドでコピーされ、
VMがアクティブにアクセスしているチャンクが優先的に処理されます。</p></div>
<div class="paragraph">
<p>ただし、以下の2点に留意してください：</p></div>
<div class="ulist"><ul>
<li>
<p>
ライブ復元中、VMは制限されたディスク読み取り速度で動作します。
  データはバックアップサーバーから読み込まれる必要があるためです（ただし読み込み後は
  すぐに宛先ストレージで利用可能となるため、データへの二重アクセスによるペナルティは
  初回のみ発生します）。書き込み速度はほぼ影響を受けません。</p>
</li>
<li>
<p>
ライブ復元が何らかの理由で失敗した場合、VMは未定義状態（バックアップからのデータが完全にはコピーされず、復元操作中に書き込まれたデータ<em>はほぼ確実に</em>保持できない状態）となります。</p>
</li>
</ul></div>
<div class="paragraph">
<p>この動作モードは、初期動作に必要なデータ量が少ない大規模VM（例：Webサーバー）に特に有用です。OSと必須サービスが起動すればVMは動作可能となり、バックグラウンドで利用頻度の低いデータのコピーが継続されます。</p></div>
</div>
<div class="sect3">
<h4 id="_single_file_restore">16.9.3. 単一ファイル復元
<a class="headerlink" href="#_single_file_restore" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ストレージGUIの「<em>バックアップ」</em>タブにある「<em>ファイル復元</em>」ボタンを使用すると、
バックアップ内のデータに対して直接ファイルブラウザを開くことができます。
この機能はProxmox Backup Server上のバックアップでのみ利用可能です。</p></div>
<div class="paragraph">
<p>コンテナの場合、ファイルツリーの最上位層には含まれる<em>すべてのpxarアーカイブ</em>が表示され、自由に開いて閲覧できます。VMの場合、最上位層には含まれるドライブイメージが表示され、開くとドライブ上で検出されたサポート対象ストレージ技術のリストが表示されます。最も基本的なケースでは、これは<em>partという</em>エントリ（パーティションテーブルを表す）となり、ドライブ上で検出された各パーティションのエントリを含みます。VMの場合、すべてのデータにアクセスできるとは限りません（非対応のゲストファイルシステム、ストレージ技術など）。</p></div>
<div class="paragraph">
<p>ファイルとディレクトリは<em>ダウンロード</em>ボタンで取得可能。ディレクトリは
オンザフライでzipアーカイブに圧縮される。</p></div>
<div class="paragraph">
<p>信頼できないデータを含む可能性のあるVMイメージへの安全なアクセスを可能にするため、
一時的なVM（ゲストとして表示されない）が起動されます。これは、
そのようなアーカイブからダウンロードされたデータが本質的に安全であることを意味するものではありませんが、
ハイパーバイザーシステムを危険に晒すことを回避します。VMはタイムアウト後に自動的に停止します。
このプロセス全体は、ユーザー視点では透過的に行われます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">トラブルシューティングのため、各一時VMインスタンスは<span class="monospaced">/var/log/proxmox-backup/file-restore/</span>にログファイルを生成します<span class="monospaced">。</span>個々のファイルの復元やバックアップアーカイブ内のファイルシステムへのアクセスが失敗した場合、このログファイルに追加情報が記録されることがあります。</td>
</tr></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="vzdump_configuration">
<span>16.10. 設定</span>
<a class="headerlink" href="#vzdump_configuration" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>グローバル設定は<span class="monospaced">/etc/vzdump.conf</span> に保存されます。このファイルは
コロン区切りのキー/値形式を使用します。各行は次の形式です:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>OPTION: value</pre>
</div></div>
<div class="paragraph">
<p>ファイル内の空白行は無視され、<span class="monospaced">#</span>文字で始まる行はコメントとして扱われ同様に無視されます。このファイルの値はデフォルトとして使用され、コマンドラインで上書き可能です。</p></div>
<div class="paragraph">
<p>現在サポートされているオプションは以下の通りです:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">bwlimit</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
I/O帯域幅を制限（KiB/s単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">compress</span>:<span class="monospaced">&amp;lt;0 | 1 | gzip | lzo | zstd&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ダンプファイルを圧縮します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">dumpdir</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
結果ファイルを指定ディレクトリに保存。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">exclude-path</span>:<span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のファイル/ディレクトリを除外（シェルグロブ）。<em>/で</em>始まるパスはコンテナのルートに固定され、その他のパスは各サブディレクトリを基準に相対的に一致する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">fleecing</span>:<span class="monospaced">[[enabled=]&amp;lt;1|0&amp;gt;] [,storage=&amp;lt;storage ID&amp;gt;]</span></dt>
<dd>
<p>
バックアップの優先度設定（VM専用）。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">有効化=&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
バックアップ・フリーシングを有効化。指定ストレージ上でゲストが新規書き込みを行うブロックのバックアップデータを、バックアップ先へ直接コピーせずキャッシュする。これによりゲストのIOパフォーマンス向上やハング防止が可能となるが、より多くのストレージ容量を必要とする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">storage=&amp;lt;ストレージID&amp;gt;</span></dt>
<dd>
<p>
このストレージをストレージ間フリッピングイメージに使用します。効率的なスペース使用のため、ディスク破棄とシンプロビジョニングまたはスパースファイルをサポートするローカルストレージの使用が最適です。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ionice</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (0 - 8)</span>(<em>default =</em> <span class="monospaced">7</span>)</dt>
<dd>
<p>
BFQスケジューラ使用時のI/O優先度を設定。VMのスナップショット/サスペンドモードバックアップでは、圧縮処理のみに影響。値8はアイドル優先度を意味し、それ以外は指定値でベストエフォート優先度が使用される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">lockwait</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">180</span>)</dt>
<dd>
<p>
グローバルロック待機の上限時間（分単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mailnotification</span>:<span class="monospaced">&amp;lt;always | failure&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">always</span>)</dt>
<dd>
<p>
非推奨: 代わりに通知ターゲット/マッチャーを使用してください。通知メール送信のタイミングを指定します</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mailto</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
非推奨：代わりに通知ターゲット/マッチャーを使用してください。メール通知を受信すべきメールアドレスまたはユーザーのカンマ区切りリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">maxfiles</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span></dt>
<dd>
<p>
非推奨:<em>prune-backups</em>を使用してください。ゲストシステムごとのバックアップファイルの最大数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mode</span>:<span class="monospaced">&amp;lt;snapshot | stop | suspend&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">snapshot</span>)</dt>
<dd>
<p>
バックアップモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">notes-template</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
バックアップのメモを生成するためのテンプレート文字列。変数を含めることができ、その値で置換されます。現在サポートされているのは{\{\cluster}}、{\{\guestname}}、{\{\node}}、および{\{\vmid}}ですが、将来追加される可能性があります。1行で記述する必要があり、改行とバックスラッシュはそれぞれ<em>\nと</em> <em>\\</em>でエスケープする必要があります。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">storage</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">notification-mode</span>:<span class="monospaced">&amp;lt;auto | legacy-sendmail | notification-system&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">auto</span>)</dt>
<dd>
<p>
使用する通知システムを決定します。<em>legacy-sendmail</em> に設定すると、vzdump は mailto/mailnotification パラメータを考慮し、<em>sendmail コマンド</em>経由で指定されたアドレスにメールを送信します。<em>notification-system</em> に設定すると、PVE の通知システム経由で通知が送信され、mailto および mailnotification は無視されます。<em>auto</em>（デフォルト設定）に設定した場合、mailtoが設定されていればメールが送信され、設定されていなければ通知システムが使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">pbs-change-detection-mode</span>:<span class="monospaced">&amp;lt;data | legacy | metadata&amp;gt;</span></dt>
<dd>
<p>
ファイル変更の検出およびコンテナバックアップのエンコーディング形式切り替えに使用されるPBSモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">performance</span>:<span class="monospaced">[max-workers=&amp;lt;integer&amp;gt;] [,pbs-entries-max=&amp;lt;integer&amp;gt;]</span></dt>
<dd>
<p>
その他のパフォーマンス関連設定。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">max-workers=&amp;lt;integer&amp;gt; (1 - 256)</span>(<em>デフォルト =</em> <span class="monospaced">16</span>)</dt>
<dd>
<p>
VMに適用。同時に許可するIOワーカーの上限数を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">pbs-entries-max=&amp;lt;integer&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1048576</span>)</dt>
<dd>
<p>
PBSに送信されるコンテナバックアップに適用されます。意図しないOOM（メモリ不足）状態を回避するため、メモリ内に同時に保持できるエントリ数を制限します。ファイル数の多いコンテナのバックアップを有効にするには、この値を大きくしてください。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">pigz</span>:<span class="monospaced">&amp;lt;integer&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
N&gt;0の場合、gzipの代わりにpigzを使用。N=1ではコア数の半分を使用、N&gt;1ではNをスレッド数として使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">pool</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
指定されたプールに含まれる既知のゲストシステムをすべてバックアップします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">protected</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
trueの場合、バックアップを保護済みとしてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">storage</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">prune-backups</span>:<span class="monospaced">[keep-all=&amp;lt;1|0&amp;gt;][,keep-daily=&amp;lt;N&amp;gt;] [,keep-hourly=&amp;lt;N&amp;gt;] [,keep-last=&amp;lt;N&amp;gt;] [,keep-monthly=&amp;lt;N&amp;gt;] [,keep-weekly=&amp;lt;N&amp;gt;] [,keep-yearly=&amp;lt;N&amp;gt;] (</span><em>デフォルト =</em> <span class="monospaced">keep-all=1)</span></dt>
<dd>
<p>
ストレージ設定の代わりにこれらの保持期間オプションを使用する。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">keep-all=&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
すべてのバックアップを保持します。trueの場合、他のオプションと競合します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-daily=&amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去 &amp;lt;N&amp;gt; 日分の異なるバックアップを保持します。1日に複数のバックアップがある場合、最新の1つだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-hourly=&amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去 &amp;lt;N&amp;gt; 時間の異なるバックアップを保持。1時間に複数のバックアップがある場合、最新の1つだけを残す。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-last=&amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
直近の &amp;lt;N&amp;gt; 個のバックアップを保持します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-monthly=&amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去 &amp;lt;N&amp;gt; ヶ月分の異なるバックアップを保持します。単一月に複数のバックアップがある場合、最新の1つだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-weekly=&amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去 &amp;lt;N&amp;gt; 週間の異なるバックアップを保持します。同一週に複数のバックアップがある場合、最新の1つだけを残します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">keep-yearly=&amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去 &amp;lt;N&amp;gt; 年間の異なるバックアップを保持します。1年間に複数のバックアップがある場合、最新の1つだけが保持されます。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">remove</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
<em>prune-backups</em> 設定に従い古いバックアップを削除する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">script</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
指定されたフックスクリプトを使用する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">除外</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
一時ファイルとログを除外する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">stopwait</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">10</span>)</dt>
<dd>
<p>
ゲストシステムの停止まで待機する最大時間（分）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">storage</span>:<span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
結果ファイルをこのストレージに保存します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">tmpdir</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
一時ファイルを指定ディレクトリに保存する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">zstd</span>:<span class="monospaced">&amp;lt;integer&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
Zstdスレッド数。N=0の場合、利用可能なコア数の半分を使用します。Nが0より大きい値に設定されている場合、Nがスレッド数として使用されます。</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="title"><span class="monospaced">vzdump.conf</span>設定例</div>
<div class="content monospaced">
<pre>tmpdir: /mnt/fast_local_disk
storage: my_backup_storage
mode: snapshot
bwlimit: 10000</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_hook_scripts">
<span>16.11. フックスクリプト</span>
<a class="headerlink" href="#_hook_scripts" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>オプション<span class="monospaced">--script</span> でフックスクリプトを指定できます。このスクリプトは
バックアップ処理の様々な段階で呼び出され、対応するパラメータが
設定されます。ドキュメントディレクトリ内に例があります
(<span class="monospaced">vzdump-hook-script.pl</span>)。</p></div>
</div>
<div class="sect2">
<h3 id="_file_exclusions">
<span>16.12. ファイル除外</span>
<a class="headerlink" href="#_file_exclusions" title="Permalink to this heading"></a></h3>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">このオプションはコンテナバックアップでのみ利用可能です。</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">vzdump</span>はデフォルトで以下のファイルをスキップします（<span class="monospaced">--stdexcludes 0</span> オプションで無効化可能）</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>/tmp/?*
/var/tmp/?*
/var/run/?*pid</pre>
</div></div>
<div class="paragraph">
<p>手動で（追加の）除外パスを指定することも可能です。例：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 777 --exclude-path /tmp/ --exclude-path '/var/foo*'</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">/tmp/</span>ディレクトリおよび<span class="monospaced">/var/foo</span>、<span class="monospaced">/var/foobar</span> などの名前のファイル/ディレクトリを除外します。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">Proxmox Backup Server (PBS) へのバックアップおよび<span class="monospaced">サスペンドモード</span>バックアップでは、
末尾にスラッシュが付いたパターンはディレクトリに一致しますが、ファイルには一致しません。
一方、PBS<span class="monospaced">スナップショットモード</span>および<span class="monospaced">停止</span>モード以外のバックアップでは、
末尾にスラッシュが付いたパターンは現在まったく一致しません。これは<span class="monospaced">tar</span>コマンドが
これをサポートしていないためです。</td>
</tr></table>
</div>
<div class="paragraph">
<p><span class="monospaced">/</span>で始まらないパスはコンテナのルートに固定されず、
任意のサブディレクトリからの相対パスとして一致します。例：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 777 --exclude-path bar</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">/bar</span>、<span class="monospaced">/var/bar</span>、<span class="monospaced">/var/foo/bar</span> などのファイルやディレクトリは除外されますが、
<span class="monospaced">/bar2</span> は除外されません。</p></div>
<div class="paragraph">
<p>設定ファイルもバックアップアーカイブ内（<span class="monospaced">./etc/vzdump/</span>）に保存され、
正しく復元されます。</p></div>
</div>
<div class="sect2">
<h3 id="_examples_10">
<span>16.13.</span>例
<a class="headerlink" href="#_examples_10" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ゲストを単純にダンプ 777 - スナップショットは作成せず、ゲストのプライベート領域と設定ファイルをデフォルトのダンプディレクトリ（通常は
<span class="monospaced">/var/lib/vz/dump/</span>）にアーカイブします。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 777</pre>
</div></div>
<div class="paragraph">
<p>rsyncとサスペンド/レジュームを使用してスナップショットを作成（最小限のダウンタイム）。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 777 --mode suspend</pre>
</div></div>
<div class="paragraph">
<p>全ゲストシステムをバックアップし、rootとadminに通知メールを送信。
デフォルト<span class="monospaced">でmailtoが</span>設定され<span class="monospaced">通知モード</span> <span class="monospaced">がauto</span>のため、
通知メールは通知システムではなくシステムの<span class="monospaced">sendmailコマンド</span>経由で送信される。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump --all --mode suspend --mailto root --mailto admin</pre>
</div></div>
<div class="paragraph">
<p>スナップショットモード（ダウンタイムなし）と非デフォルトのダンプディレクトリを使用。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 777 --dumpdir /mnt/backup --mode snapshot</pre>
</div></div>
<div class="paragraph">
<p>複数のゲストを選択的にバックアップ</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 101 102 103 --mailto root</pre>
</div></div>
<div class="paragraph">
<p>101と102を除く全ゲストをバックアップ</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump --mode suspend --exclude 101,102</pre>
</div></div>
<div class="paragraph">
<p>コンテナを新規CT 600に復元</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pct restore 600 /mnt/backup/vzdump-lxc-777.tar</pre>
</div></div>
<div class="paragraph">
<p>QemuServer VMをVM 601に復元</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># qmrestore /mnt/backup/vzdump-qemu-888.vma 601</pre>
</div></div>
<div class="paragraph">
<p>既存コンテナ101を新規コンテナ300にクローン（4GBルートファイルシステム、パイプ使用）</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># vzdump 101 --stdout | pct restore --rootfs 4 300 -</pre>
</div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter_notifications">
17. 通知
<a class="headerlink" href="#chapter_notifications" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview">
<span>17.1.</span>概要
<a class="headerlink" href="#_overview" title="Permalink to this heading"></a></h3>
<div class="ulist"><ul>
<li>
<p>
Proxmox VEは、ストレージレプリケーションの障害、ノードフェンシング、バックアップの完了/失敗、その他のイベントが発生した場合に<a href="#notification_events">通知イベント</a>を発行します。
これらのイベントはグローバル通知設定に基づいて処理されます。各通知イベントには、タイムスタンプ、重大度レベル、タイプ、およびイベント固有の追加フィールドなどのメタデータが含まれます。</p>
</li>
<li>
<p>
<a href="#notification_matchers">通知マッチャーは</a>通知イベントを
1つ以上の通知ターゲットへルーティングします。マッチャーは通知イベントのメタデータに基づいて選択的にルーティングする
マッチルールを持つことができます。</p>
</li>
<li>
<p>
<a href="#notification_targets">通知ターゲットは</a>、マッチャーによって通知イベントがルーティングされる宛先です。
ターゲットには複数のタイプがあり、メールベース（SendmailおよびSMTP）とGotifyがあります。</p>
</li>
</ul></div>
<div class="paragraph">
<p>グローバル通知設定はGUIの「データセンター → 通知」で設定可能。設定<span class="monospaced">は/etc/pve/notifications.cfg</span><span class="monospaced">と/etc/pve/priv/notifications.cfgに</span>保存される。後者は通知先用のパスワードや認証トークンなどの機密設定を含み、<span class="monospaced">root</span>のみが読み取り可能。</p></div>
</div>
<div class="sect2">
<h3 id="notification_targets">
<span>17.2. 通知ターゲット</span>
<a class="headerlink" href="#notification_targets" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEは複数の通知ターゲットタイプを提供します。</p></div>
<div class="sect3">
<h4 id="notification_targets_sendmail">17.2.1. Sendmail
<a class="headerlink" href="#notification_targets_sendmail" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-notification-sendmail.png">
<img src="images/screenshot/gui-datacenter-notification-sendmail.png" alt="screenshot/gui-datacenter-notification-sendmail.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>sendmailバイナリは、Unix系オペレーティングシステムで一般的に見られるプログラムであり、
電子メールメッセージの送信を処理します。
これはコマンドラインユーティリティであり、ユーザーやアプリケーションが
コマンドラインから直接、またはスクリプト内から電子メールを送信できるようにします。</p></div>
<div class="paragraph">
<p>sendmail通知ターゲットは、<span class="monospaced">sendmailバイナリを使用して</span>設定済みのユーザーリストまたはメールアドレス宛にメールを送信します。ユーザーが受信者として選択された場合、ユーザー設定で設定されたメールアドレスが使用されます。<span class="monospaced">root@pam</span>ユーザーの場合、これはインストール時に入力されたメールアドレスです。
ユーザーのメールアドレスは、<span class="monospaced">Datacenter → Permissions → Users</span> で設定できます。
メールアドレスが関連付けられていないユーザーには、メールは送信されません。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">標準的なProxmox VEインストール環境では、<span class="monospaced">sendmailバイナリは</span>Postfixによって提供されます。メールを正しく配信できるようにPostfixを設定する必要がある場合があります。例えば、外部メール中継サーバー（スマートホスト）を設定するなどです。配信に失敗した場合は、Postfixデーモンによって記録されたメッセージをシステムログで確認してください。</td>
</tr></table>
</div>
<div class="paragraph">
<p>Sendmailターゲットプラグインの設定には以下のオプションがあります：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">mailto</span>: 通知を送信するメールアドレス。複数の受信者に対応するため複数回設定可能。</p>
</li>
<li>
<p>
<span class="monospaced">mailto-user</span>: メール送信先のユーザー。ユーザーのメールアドレスは<span class="monospaced">users.cfg</span> で参照されます。複数の受信者に対応するため複数回設定可能です。</p>
</li>
<li>
<p>
<span class="monospaced">author</span>: メールの差出人を設定します。デフォルトは<span class="monospaced">Proxmox VE</span> です。</p>
</li>
<li>
<p>
<span class="monospaced">from-address</span>: メールの送信元アドレスを設定します。パラメータが設定されていない場合、プラグインは<span class="monospaced">datacenter.cfgの</span> <span class="monospaced">email_from</span>設定にフォールバックします。これも設定されていない場合、プラグインは<span class="monospaced">root@$hostnameを</span>デフォルトとします（<span class="monospaced">$hostnameは</span>ノードのホスト名）。
  メールの<span class="monospaced">Fromヘッダーは</span> <span class="monospaced">$author &amp;lt;$from-address&amp;gt;</span>に設定されます。</p>
</li>
<li>
<p>
<span class="monospaced">comment</span>: このターゲットに関するコメント</p>
</li>
</ul></div>
<div class="paragraph">
<p>設定例 (<span class="monospaced">/etc/pve/notifications.cfg</span>):</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>sendmail: 例
        mailto-user root@pam
        mailto-user admin@pve
        mailto max@example.com
        from-address pve1@example.com
        comment 複数ユーザー/アドレスへの送信</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="notification_targets_smtp">17.2.2. SMTP
<a class="headerlink" href="#notification_targets_smtp" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-notification-smtp.png">
<img src="images/screenshot/gui-datacenter-notification-smtp.png" alt="screenshot/gui-datacenter-notification-smtp.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>SMTP通知ターゲットは、SMTPメールリレーに直接メールを送信できます。
このターゲットはシステムのMTAを使用せずメールを配信します。
sendmailターゲットと同様に、ユーザーを受信者として選択した場合、
ユーザーの設定済みメールアドレスが使用されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">sendmailターゲットとは異なり、SMTPターゲットにはメール配信失敗時のキューイング/再試行
メカニズムが存在しません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>SMTPターゲットプラグインの設定には以下のオプションがあります：</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">mailto</span>: 通知を送信するメールアドレス。複数の受信者に対応するため複数回設定可能。</p>
</li>
<li>
<p>
<span class="monospaced">mailto-user</span>: メール送信先のユーザー。ユーザーのメールアドレスは<span class="monospaced">users.cfg</span> で参照されます。複数の受信者に対応するため複数回設定可能です。</p>
</li>
<li>
<p>
<span class="monospaced">author</span>: メールの差出人を設定します。デフォルトは<span class="monospaced">Proxmox VE</span> です。</p>
</li>
<li>
<p>
<span class="monospaced">from-address</span>: メールの差出人アドレスを設定します。SMTPリレーでは、なりすまし防止のため、このアドレスがユーザー所有であることが要求される場合があります。<span class="monospaced">メールのFromヘッダー</span> <span class="monospaced">は$author &amp;lt;$from-address&amp;gt;</span>に設定されます。</p>
</li>
<li>
<p>
<span class="monospaced">username</span>: 認証時に使用するユーザー名。設定しない場合、認証は行われません。PLAINおよびLOGIN認証方式をサポートします。</p>
</li>
<li>
<p>
<span class="monospaced">password</span>: 認証時に使用するパスワード。</p>
</li>
<li>
<p>
<span class="monospaced">mode</span>: 暗号化モードを設定します（<span class="monospaced">insecure</span>、<span class="monospaced">starttls</span>、または<span class="monospaced">tls</span>）。デフォルトは<span class="monospaced">tls</span> です。</p>
</li>
<li>
<p>
<span class="monospaced">server</span>: SMTPリレーのアドレス/IP。</p>
</li>
<li>
<p>
<span class="monospaced">port</span>: 接続するポート番号。設定しない場合、デフォルトのポートが使用されます。
 <span class="monospaced"> モードの</span>値に応じて、デフォルトは 25 (<span class="monospaced">insecure</span>)、465 (<span class="monospaced">tls</span>)、または 587 (<span class="monospaced">starttls</span>) です。</p>
</li>
<li>
<p>
<span class="monospaced">comment</span>: このターゲットに関するコメント</p>
</li>
</ul></div>
<div class="paragraph">
<p>設定例 (<span class="monospaced">/etc/pve/notifications.cfg</span>):</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>smtp: 例
        mailto-user root@pam
        mailto-user admin@pve
        mailto max@example.com
        from-address pve1@example.com
        username pve1
        server mail.example.com
        mode starttls</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">/etc/pve/priv/notifications.cfg</span> 内の対応するエントリ（シークレットトークンを含む）：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>smtp: example
        password somepassword</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="notification_targets_gotify">17.2.3. Gotify
<a class="headerlink" href="#notification_targets_gotify" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-notification-gotify.png">
<img src="images/screenshot/gui-datacenter-notification-gotify.png" alt="screenshot/gui-datacenter-notification-gotify.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p><a href="http://gotify.net">Gotifyは</a>オープンソースのセルフホスト型通知サーバーであり、
様々なデバイスやアプリケーションへのプッシュ通知の送受信を可能にします。
シンプルなAPIとウェブインターフェースを提供するため、
異なるプラットフォームやサービスとの統合が容易です。</p></div>
<div class="paragraph">
<p>Gotifyターゲットプラグインの設定には以下のオプションがあります:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">server</span>: GotifyサーバーのベースURL。例:<span class="monospaced">http://&amp;lt;ip&amp;gt;:8888</span></p>
</li>
<li>
<p>
<span class="monospaced">token</span>: 認証トークン。GotifyのWebインターフェース内で生成可能。</p>
</li>
<li>
<p>
<span class="monospaced">comment</span>: このターゲットに関するコメント</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">Gotifyターゲットプラグインは、<a href="#datacenter_configuration_file">データセンター設定の</a>HTTPプロキシ設定を尊重します</td>
</tr></table>
</div>
<div class="paragraph">
<p>設定例 (<span class="monospaced">/etc/pve/notifications.cfg</span>):</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>gotify: example
        server http://gotify.example.com:8888
        comment 複数ユーザー/アドレスへの送信</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">/etc/pve/priv/notifications.cfg</span> 内の対応するエントリ（シークレットトークンを含む）：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>gotify: example
        token somesecrettoken</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="notification_targets_webhook">17.2.4. Webhook
<a class="headerlink" href="#notification_targets_webhook" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>Webhook通知ターゲットは設定可能なURLへHTTPリクエストを実行します。</p></div>
<div class="paragraph">
<p>以下の設定オプションが利用可能です:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">url</span>: HTTPリクエストを送信するURL。
  メッセージ内容、メタデータ、シークレットを挿入するためのテンプレートをサポート。</p>
</li>
<li>
<p>
<span class="monospaced">method</span>: 使用するHTTPメソッド（POST/PUT/GET）</p>
</li>
<li>
<p>
<span class="monospaced">header</span>: リクエストに設定すべきHTTPヘッダーの配列。
  メッセージ内容、メタデータ、シークレットを挿入するためのテンプレートをサポートします。</p>
</li>
<li>
<p>
<span class="monospaced">body</span>: 送信するHTTPボディ。
  メッセージ内容、メタデータ、シークレットを挿入するためのテンプレートをサポートします。</p>
</li>
<li>
<p>
<span class="monospaced">secret</span>: 秘密鍵-値ペアの配列。これらはrootのみが読み取り可能な保護された設定ファイルに保存されます。シークレットは
  ボディ/ヘッダー/URLテンプレート<span class="monospaced">内でsecrets名前空間</span>を介してアクセス可能です。</p>
</li>
<li>
<p>
<span class="monospaced">comment</span>: このターゲットに対するコメント。</p>
</li>
</ul></div>
<div class="paragraph">
<p>テンプレートをサポートする設定オプションでは、
<a href="https://handlebarsjs.com/">Handlebars構文</a>を使用して以下のプロパティにアクセスできます:
利便性のため、以下のヘルパーが利用可能です:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">{{ title }}</span>: レンダリングされた通知タイトル</p>
</li>
<li>
<p>
<span class="monospaced">{{ message }}</span>: 通知本文のレンダリング結果</p>
</li>
<li>
<p>
<span class="monospaced">{{ severity }}</span>: 通知の重大度（<span class="monospaced">info</span>,<span class="monospaced">notice</span>,<span class="monospaced">warning</span>,<span class="monospaced">error</span>,<span class="monospaced">unknown</span>）</p>
</li>
<li>
<p>
<span class="monospaced">{{ timestamp }}</span>: UNIXエポック（秒単位）形式の通知タイムスタンプ</p>
</li>
<li>
<p>
<span class="monospaced">{{ fields.&amp;lt;name&amp;gt; }}</span>: 通知のメタデータフィールド用サブネームスペース。
  例:<span class="monospaced">fields.typeには</span>通知タイプが含まれる -
  全利用可能フィールドは<a href="#notification_events">通知イベント</a>を参照。</p>
</li>
<li>
<p>
<span class="monospaced">{{ secrets.&amp;lt;name&amp;gt; }}</span>: シークレットのサブネームスペース。例:<span class="monospaced">tokenという名前の</span>シークレットは<span class="monospaced">secrets.token</span> でアクセス可能。</p>
</li>
</ul></div>
<div class="paragraph">
<p>利便性のため、以下のヘルパーが利用可能です:</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">{{ url-encode &amp;lt;value/property&amp;gt; }}</span>: プロパティ/リテラルをURLエンコードします。</p>
</li>
<li>
<p>
<span class="monospaced">{{ escape &amp;lt;value/property&amp;gt; }}</span>: JSON文字列として安全に表現できない制御文字をエスケープします。</p>
</li>
<li>
<p>
<span class="monospaced">{{ json &amp;lt;value/property&amp;gt; }}</span>: 値をJSONとしてレンダリングします。サブネームスペース全体（例:<span class="monospaced">fields</span>）をJSONペイロードの一部として渡す場合に有用です（例:<span class="monospaced">{{ json fields }}</span>）。</p>
</li>
</ul></div>
<div class="sect4">
<h5 id="_examples_11">例<a class="headerlink" href="#_examples_11" title="Permalink to this heading"></a></h5>
<div class="sect5">
<h6 id="_span_class_monospaced_ntfy_sh_span"><span class="monospaced">ntfy.</span>sh
<a class="headerlink" href="#_span_class_monospaced_ntfy_sh_span" title="Permalink to this heading"></a></h6>
<div class="ulist"><ul>
<li>
<p>
メソッド:<span class="monospaced">POST</span></p>
</li>
<li>
<p>
URL:<span class="monospaced">https://ntfy.sh/{{ secrets.channel }}</span></p>
</li>
<li>
<p>
ヘッダー:</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">Markdown</span>:<span class="monospaced">Yes</span></p>
</li>
</ul></div>
</li>
<li>
<p>
Body:</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content monospaced">
<pre>```
{{ message }}
```</pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
シークレット:</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">channel</span>:<span class="monospaced">&amp;lt;your ntfy.sh channel&amp;gt;</span></p>
</li>
</ul></div>
</li>
</ul></div>
</div>
<div class="sect5">
<h6 id="_discord">Discord
<a class="headerlink" href="#_discord" title="Permalink to this heading"></a></h6>
<div class="ulist"><ul>
<li>
<p>
メソッド:<span class="monospaced">POST</span></p>
</li>
<li>
<p>
URL:<span class="monospaced">https://discord.com/api/webhooks/{{ secrets.token }}</span></p>
</li>
<li>
<p>
ヘッダー:</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">Content-Type</span>:<span class="monospaced">application/json</span></p>
</li>
</ul></div>
</li>
<li>
<p>
Body:</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content monospaced">
<pre>{
  "content": "``` {{ escape message }}```"
}</pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
シークレット:</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">token</span>:<span class="monospaced">&amp;lt;token&amp;gt;</span></p>
</li>
</ul></div>
</li>
</ul></div>
</div>
<div class="sect5">
<h6 id="_slack">Slack
<a class="headerlink" href="#_slack" title="Permalink to this heading"></a></h6>
<div class="ulist"><ul>
<li>
<p>
メソッド:<span class="monospaced">POST</span></p>
</li>
<li>
<p>
URL:<span class="monospaced">https://hooks.slack.com/services/{{ secrets.token }}</span></p>
</li>
<li>
<p>
ヘッダー:</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">Content-Type</span>:<span class="monospaced">application/json</span></p>
</li>
</ul></div>
</li>
<li>
<p>
Body:</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content monospaced">
<pre>{
  "text": "``` {{escape message}}```",
  "type": "mrkdwn"
}</pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
シークレット:</p>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">token</span>:<span class="monospaced">&amp;lt;token&amp;gt;</span></p>
</li>
</ul></div>
</li>
</ul></div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="notification_matchers">
<span>17.3. 通知マッチャー</span>
<a class="headerlink" href="#notification_matchers" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<a class="image" href="images/screenshot/gui-datacenter-notification-matcher.png">
<img src="images/screenshot/gui-datacenter-notification-matcher.png" alt="screenshot/gui-datacenter-notification-matcher.png" width=250 style="padding: 0 0 0 10px;float:right;" /></a>
<p>通知マッチャーは、マッチングルールに基づいて通知を通知ターゲットにルーティングします。
これらのルールは、通知の特定のプロパティ（タイムスタンプ（<span class="monospaced">match-calendar</span>）、通知の重大度（<span class="monospaced">match-severity</span>）、メタデータフィールド（<span class="monospaced">match-field</span>）など）に一致させることができます。
通知がマッチャーに一致した場合、そのマッチャーに設定されたすべてのターゲットが通知を受け取ります。</p></div>
<div class="paragraph">
<p>任意の数のマッチャーを作成でき、それぞれが独自のマッチングルールと通知対象を設定します。
各通知に対して、ターゲットは最大1回のみ通知されます。たとえそのターゲットが複数のマッチャーで使用されていても同様です。</p></div>
<div class="paragraph">
<p>一致ルールを持たないマッチャーは常に真となり、設定されたターゲットは常に通知されます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>matcher: always-matches
        target admin
        comment このマッチャーは常に一致します</pre>
</div></div>
<div class="sect3">
<h4 id="_matcher_options">17.3.1. マッチャーオプション
<a class="headerlink" href="#_matcher_options" title="Permalink to this heading"></a></h4>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">target</span>: マッチャーが一致した場合に通知すべき対象を決定します。
  複数回使用して複数の対象に通知できます。</p>
</li>
<li>
<p>
<span class="monospaced">invert-match</span>: マッチャー全体の結果を反転させます</p>
</li>
<li>
<p>
<span class="monospaced">モード</span>: マッチャー全体の結果を計算するために、個々のマッチルールがどのように評価されるかを決定します。
 <span class="monospaced"> 「all」</span>に設定すると、すべての一致ルールが一致する必要があります。
 <span class="monospaced"> 「any</span>」に設定すると、少なくとも1つのルールが一致する必要があります。
  デフォルトは<span class="monospaced">「all」</span>です。</p>
</li>
<li>
<p>
<span class="monospaced">match-calendar</span>: 通知のタイムスタンプをスケジュールと照合します。</p>
</li>
<li>
<p>
<span class="monospaced">match-field</span>: 通知のメタデータフィールドを照合します。</p>
</li>
<li>
<p>
<span class="monospaced">match-severity</span>: 通知の重大度を照合します。</p>
</li>
<li>
<p>
<span class="monospaced">comment</span>: このマッチャーのコメント。</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="notification_matchers_calendar">17.3.2. カレンダーマッチングルール
<a class="headerlink" href="#notification_matchers_calendar" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>カレンダーマッチャーは、通知送信時刻を
設定可能なスケジュールと照合します。</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">match-calendar</span>8-12</p>
</li>
<li>
<p>
<span class="monospaced">match-calendar 8:00-15:30</span></p>
</li>
<li>
<p>
<span class="monospaced">match-calendar 月～金 9:00-17:00</span></p>
</li>
<li>
<p>
<span class="monospaced">match-calendar 日,火-水,金 9-17</span></p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="notification_matchers_field">17.3.3. フィールドマッチングルール
<a class="headerlink" href="#notification_matchers_field" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>通知には、照合可能なメタデータフィールドが複数用意されています。
照合モードとして<span class="monospaced">exact</span>を使用する場合、区切り文字として<span class="monospaced">,</span>を使用できます。
指定された<strong>値のいずれかが</strong>メタデータフィールドに存在する場合、
照合ルールはマッチします。</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">match-field exact:type=vzdump</span>バックアップに関する通知のみに一致させる。</p>
</li>
<li>
<p>
<span class="monospaced">match-field exact:type=replication,fencing</span> <span class="monospaced">レプリケーションと</span> <span class="monospaced">フェンシング</span> <span class="monospaced">通知に</span>一致。</p>
</li>
<li>
<p>
<span class="monospaced">match-field regex:hostname=^.+\.example\.com$</span>ノードのホスト名に一致する。</p>
</li>
</ul></div>
<div class="paragraph">
<p>一致するメタデータフィールドが存在しない場合、通知は一致しません。
例えば、<span class="monospaced">match-field regex:hostname=.*</span>ディレクティブは、任意の<span class="monospaced">ホスト名</span>メタデータフィールドを持つ通知のみに一致しますが、
そのフィールドが存在しない場合は一致しません。</p></div>
</div>
<div class="sect3">
<h4 id="notification_matchers_severity">17.3.4. 重大度マッチングルール
<a class="headerlink" href="#notification_matchers_severity" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>通知には関連付けられた重大度があり、これと照合できます。</p></div>
<div class="ulist"><ul>
<li>
<p>
<span class="monospaced">match-severity error</span>: エラーのみに一致</p>
</li>
<li>
<p>
<span class="monospaced">match-severity warning,error</span>: 警告とエラーに一致</p>
</li>
</ul></div>
<div class="paragraph">
<p>使用される重大度レベルは以下の通りです：
<span class="monospaced">info</span>,<span class="monospaced">notice</span>,<span class="monospaced">warning</span>,<span class="monospaced">error</span>,<span class="monospaced">unknown</span>.</p></div>
</div>
<div class="sect3">
<h4 id="_examples_12">17.3.5. 例
<a class="headerlink" href="#_examples_12" title="Permalink to this heading"></a></h4>
<div class="listingblock">
<div class="content monospaced">
<pre>matcher: workday
        match-calendar mon-fri 9-17
        target admin
        comment 勤務時間中に管理者に通知

matcher: night-and-weekend
        match-calendar mon-fri 9-17
        invert-match true
        target on-call-admins
        comment 勤務時間外用の別ターゲット</pre>
</div></div>
<div class="listingblock">
<div class="content monospaced">
<pre>matcher: backup-failures
        match-field exact:type=vzdump
        match-severity error
        target backup-admins
        comment バックアップ失敗に関する通知を1つの管理者グループに送信

matcher: cluster-failures
        match-field exact:type=replication,fencing
        target cluster-admins
        comment クラスタ関連の通知を別の管理者グループに送信</pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="notification_events">
<span>17.4. 通知イベント</span>
<a class="headerlink" href="#notification_events" title="Permalink to this heading"></a></h3>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">イベント                            </th>
<th class="tableblock halign-left valign-top"><span class="monospaced">タイプ</span>           </th>
<th class="tableblock halign-left valign-top">重大度 </th>
<th class="tableblock halign-left valign-top">メタデータフィールド（<span class="monospaced">タイプに加えて</span>）</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">システム更新が利用可能です</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">package-updates</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">info</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ホスト名</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラスタノードフェンシング</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">フェンシング</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">エラー</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">hostname</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ストレージレプリケーションジョブが失敗しました</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">レプリケーション</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">エラー</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ホスト名</span>、<span class="monospaced">ジョブ ID</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">バックアップが成功しました</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">vzdump</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">info</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ホスト名</span>、<span class="monospaced">ジョブ ID</span>(バックアップジョブのみ)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">バックアップ失敗</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">vzdump</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">エラー</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ホスト名</span>、<span class="monospaced">ジョブ ID</span>（バックアップジョブのみ）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">root 宛てのメール</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">システムメール</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">不明</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ホスト名</span></p></td>
</tr>
</tbody>
</table>
</div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:50%;" />
<col style="width:50%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">フィールド名        </th>
<th class="tableblock halign-left valign-top">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">タイプ</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">通知の種類</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">ホスト名</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ホスト名（ドメインなし、例:<span class="monospaced">pve1</span>）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">job-id</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ジョブ ID</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">バックアップジョブの通知には、<span class="monospaced">ジョブIDが</span>設定されるのは、
  スケジュールに基づいて自動的に実行された場合のみであり、
  UIの「<em>今すぐ実行」</em>ボタンによる手動トリガーの場合は設定されません。</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_system_mail_forwarding">
<span>17.5. システムメール転送</span>
<a class="headerlink" href="#_system_mail_forwarding" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">smartd</span>などの特定のローカルシステムデーモンは、通知メールを生成します。
これらのメールは当初、ローカルの<span class="monospaced">root</span>ユーザー宛てに送信されます。
これらのメールは、タイプが<span class="monospaced">system-mailで</span>、重大<span class="monospaced">度がunknownの</span>通知イベントに変換され、
グローバルな通知設定に基づいて処理されます。</p></div>
<div class="paragraph">
<p>メールがsendmailターゲットに転送される場合、メールの内容とヘッダーはそのまま転送されます。その他のすべてのターゲットでは、システムはメールの内容から件名と本文の両方を抽出しようとします。メールがHTMLコンテンツのみで構成されている場合、このプロセス中にプレーンテキスト形式に変換されます。</p></div>
</div>
<div class="sect2">
<h3 id="_permissions_3">
<span>17.6.</span>権限
<a class="headerlink" href="#_permissions_3" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>通知ターゲットの設定を変更/閲覧するには、
<span class="monospaced">/mapping/notifications</span>ACLノードに対する
<span class="monospaced">Mapping.Modify/Mapping.Audit</span>権限が必要です。</p></div>
<div class="paragraph">
<p>ターゲットのテストには、<span class="monospaced">/mapping/notifications</span>に対する
<span class="monospaced">Mapping.Use</span>、<span class="monospaced">Mapping.Audit</span>または<span class="monospaced">Mapping.Modify</span>権限が必要です。</p></div>
</div>
<div class="sect2">
<h3 id="notification_mode">
<span>17.7. 通知モード</span>
<a class="headerlink" href="#notification_mode" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>バックアップジョブでは、バックアップ関連の通知送信に2つのモードから選択できます。
これは<a href="#vzdump_configuration">バックアップジョブ設定の</a> <span class="monospaced">notification-mode</span>オプションで制御されます。</p></div>
<div class="ulist"><ul>
<li>
<p>
グローバル通知設定（<span class="monospaced">notification-system</span>）に基づいて通知を送信する</p>
</li>
<li>
<p>
システムの<span class="monospaced">sendmailコマンド</span>経由で、バックアップジョブに設定されたメールアドレスへ通知メールを送信（<span class="monospaced">レガシー-sendmail</span>）。このモードでは、メールを常に送信するか、バックアップ失敗時のみ送信するかを選択可能。グローバル通知設定のターゲットやマッチャーはすべて無視されます。
このモードは、Proxmox VE 8.1以前のバージョンの通知動作に相当します。
Proxmox VEの今後のリリースで廃止される可能性があります。</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_overriding_notification_templates">
<span>17.8. 通知テンプレートのオーバーライド</span>
<a class="headerlink" href="#_overriding_notification_templates" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VEは通知のレンダリングにHandlebarsテンプレートを使用します。
Proxmox VEが提供するオリジナルテンプレートは
<span class="monospaced">/usr/share/pve-manager/templates/default/に</span>保存されています<span class="monospaced">。</span></p></div>
<div class="paragraph">
<p>通知テンプレートは<span class="monospaced">、/etc/pve/notification-templates/default/</span> のオーバーライドディレクトリにカスタムテンプレートファイルを配置することで上書きできます<span class="monospaced">。</span>特定のタイプの通知をレンダリングする際、Proxmox VE はまずオーバーライドディレクトリからテンプレートを読み込もうとします。このテンプレートが存在しないか、レンダリングに失敗した場合、元のテンプレートが使用されます。</p></div>
<div class="paragraph">
<p>テンプレートファイルの命名規則は
<span class="monospaced">&amp;lt;type&amp;gt;-&amp;lt;body|subject&amp;gt;.&amp;lt;html|txt&amp;gt;.hbs</span> です。例えば、ファイル
<span class="monospaced">vzdump-body.html.hbs</span>はバックアップ通知の HTML 版をレンダリングするテンプレートを含み、
<span class="monospaced">package-updates-subject.txt.hbs</span>は利用可能なパッケージ更新の通知件名をレンダリングするために使用されます。</p></div>
<div class="paragraph">
<p><span class="monospaced">sendmail</span>や<span class="monospaced">smtp</span> などのメールベース通知ターゲットは、常に HTML 部分とプレーンテキスト部分を含むマルチパートメッセージを送信します。その結果、メールメッセージのレンダリング時には<span class="monospaced">&amp;lt;type&amp;gt;-body.html.hbs</span>と<span class="monospaced">&amp;lt;type&amp;gt;-body.txt.hbs</span>の両方のテンプレートが使用されます。その他の通知ターゲットタイプはすべて
<span class="monospaced">&amp;lt;type&amp;gt;-body.txt.hbs</span>テンプレートのみを使用します。</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_important_service_daemons">
18. 重要なサービスデーモン
<a class="headerlink" href="#_important_service_daemons" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_pvedaemon_proxmox_ve_api_daemon">
<span>18.1. pvedaemon - Proxmox VE API デーモン</span>
<a class="headerlink" href="#_pvedaemon_proxmox_ve_api_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>このデーモンは、<span class="monospaced">127.0.0.1:85</span> で Proxmox VE API 全体を公開します。<span class="monospaced">root</span>として実行され、特権操作をすべて実行する権限を持っています。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">デーモンはローカルアドレスのみを監視するため、外部からのアクセスはできません。<span class="monospaced">pveproxy</span>デーモンがAPIを外部に公開します。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="pvedaemon_max_workers">18.1.1. ワーカー数<a class="headerlink" href="#pvedaemon_max_workers" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">pvedaemon は</span>受信リクエストの処理をワーカープロセスに委譲します。デフォルトでは 3 つのワーカープロセスを<span class="monospaced">生成し</span>、これはほとんどのワークロードで十分です。大量の API リクエストを発行し、リクエスト処理の遅延やタイムアウトが発生する自動化中心のワークロードでは、<span class="monospaced">/etc/default/pvedaemon で</span> <span class="monospaced">MAX_WORKERS</span>を設定することでワーカープロセスの数を増やせます。例:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>MAX_WORKERS=5</pre>
</div></div>
<div class="paragraph">
<p>ワーカープロセスの数を増やすとCPU使用率が上昇する可能性がある点に注意してください。
ワーカープロセスの数は0より大きく128未満である必要があります。</p></div>
<div class="paragraph">
<p><a href="#pveproxy_max_workers">pveproxyにも</a>同様の設定が存在します。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_pveproxy_proxmox_ve_api_proxy_daemon">
<span>18.2. pveproxy - Proxmox VE API プロキシデーモン</span>
<a class="headerlink" href="#_pveproxy_proxmox_ve_api_proxy_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>このデーモンは、HTTPSを使用してTCPポート8006でProxmox VE API全体を公開します。<span class="monospaced">www-data</span>ユーザーとして実行され、権限は非常に制限されています。より多くの権限を必要とする操作は、ローカルの<span class="monospaced">pvedaemon</span>に転送されます。</p></div>
<div class="paragraph">
<p>他のノード宛のリクエストは自動的に該当ノードへ転送されます。
これにより、単一のProxmox VEノードに接続するだけでクラスター全体を管理可能です。</p></div>
<div class="sect3">
<h4 id="pveproxy_host_acls">18.2.1. ホストベースのアクセス制御
<a class="headerlink" href="#pveproxy_host_acls" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>「apache2」形式のアクセス制御リストを設定可能です。値はファイル<span class="monospaced">/etc/default/pveproxy</span> から読み込まれます。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>ALLOW_FROM="10.0.0.1-10.0.0.5,192.168.0.0/22"
DENY_FROM="all"
POLICY="allow"</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">IPアドレスはNet::IPが理解する任意</span>の構文で指定可能。
名前<span class="monospaced">「all」</span> <span class="monospaced">は0/0および</span> <span class="monospaced">::/0（</span>全IPv4/IPv6アドレスを意味）の別名。</p></div>
<div class="paragraph">
<p>デフォルトのポリシーは<span class="monospaced">許可</span>です。</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:33%;" />
<col style="width:33%;" />
<col style="width:33%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">一致条件            </th>
<th class="tableblock halign-left valign-top">POLICY=deny </th>
<th class="tableblock halign-left valign-top">POLICY=allow</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">許可のみに一致</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">allow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">許可</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">マッチ 拒否のみ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">拒否</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">拒否</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">一致なし</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">拒否</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">許可</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">許可と拒否の両方に一致</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">拒否</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">許可</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="pveproxy_listening_address">18.2.2. リスニングIPアドレス
<a class="headerlink" href="#pveproxy_listening_address" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトでは、<span class="monospaced">pveproxy</span>および<span class="monospaced">spiceproxy</span>デーモンはワイルドカードアドレスでリスンし、
IPv4 および IPv6 クライアントからの接続を受け入れます。</p></div>
<div class="paragraph">
<p><span class="monospaced">/etc/default/pveproxy</span>で<span class="monospaced">LISTEN_IP</span>を設定することで、
<span class="monospaced">pveproxy</span>および<span class="monospaced">spiceproxy</span>デーモンがバインドする IP アドレスを制御できます。
この IP アドレスはシステム上で設定済みである必要があります。</p></div>
<div class="paragraph">
<p><span class="monospaced">sysctl</span> <span class="monospaced">net.ipv6.bindv6only</span>をデフォルト以外の値<span class="monospaced">1</span>に設定すると、デーモンは IPv6 クライアントからの接続のみを受け付けるようになります。ただし、通常は他の多くの問題も引き起こします。この設定を行う場合は、<span class="monospaced">sysctl</span>設定を削除するか、<span class="monospaced">LISTEN_IP</span> <span class="monospaced">を0.0.0.0</span>に設定することを推奨します（これによりIPv4クライアントのみが許可されます）。</p></div>
<div class="paragraph">
<p><span class="monospaced">LISTEN_IP</span>はソケットを内部インターフェースに限定し、
パブリックインターネットへの露出を減らすために使用できます。例:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>LISTEN_IP="192.0.2.1"</pre>
</div></div>
<div class="paragraph">
<p>同様に、IPv6アドレスを設定することも可能です：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>LISTEN_IP="2001:db8:85a3::1"</pre>
</div></div>
<div class="paragraph">
<p>リンクローカルIPv6アドレスを指定する場合は、インターフェース名自体を明示する必要があります。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>LISTEN_IP="fe80::c463:8cff:feb9:6a4e%vmbr0"</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">クラスタ内のノードは通信のために<span class="monospaced">pveproxyへの</span>アクセスを必要とし、
異なるサブネット上にある可能性があります。クラスタ化されたシステムで
<span class="monospaced">LISTEN_IP</span>を設定することは<strong>推奨されません</strong>。</td>
</tr></table>
</div>
<div class="paragraph">
<p>変更を適用するには、ノードを再起動するか、<span class="monospaced">pveproxy</span>および<span class="monospaced">spiceproxy</span>サービスを完全に再起動する必要があります:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>systemctl restart pveproxy.service spiceproxy.service</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">pveproxyサービスの<span class="monospaced">再起動は</span>、<span class="monospaced">リロードとは</span>異なり、
仮想ゲストからの実行中のコンソールやシェルなど、
一部の長期実行ワーカープロセスを中断する可能性があります。
この変更を適用する際は、メンテナンスウィンドウを利用してください。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_ssl_cipher_suite">18.2.3. SSL暗号スイート
<a class="headerlink" href="#_ssl_cipher_suite" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>暗号スイートリストは、<span class="monospaced">/etc/default/pveproxy</span>内の<span class="monospaced">CIPHERS</span>(TLS ⇐ 1.2) および<span class="monospaced">CIPHERSUITES</span>(TLS &amp;gt;= 1.3) キーで定義できます。例:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>CIPHERS="ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256"
CIPHERSUITES="TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256"</pre>
</div></div>
<div class="paragraph">
<p>上記はデフォルト設定です。利用可能な全オプション一覧については、opensslパッケージのciphers(1)マニュアルページを参照してください。</p></div>
<div class="paragraph">
<p>さらに、クライアントが使用する暗号スイートを
<span class="monospaced">/etc/default/pveproxy</span>で選択させる設定も可能です（デフォルトはクライアントと<span class="monospaced">pveproxy</span> の両方で利用可能なリストの最初の暗号です）:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>HONOR_CIPHER_ORDER=0</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_supported_tls_versions">18.2.4. サポートされる TLS バージョン
<a class="headerlink" href="#_supported_tls_versions" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>pveproxyでは、安全でないSSLバージョン2および3は無条件で無効化されています。
最近のOpenSSLバージョンではTLSバージョン1.1未満がデフォルトで無効化されており、
<span class="monospaced">pveproxyも</span>これを順守します（<span class="monospaced">/etc/ssl/openssl.cnf</span>を参照）。</p></div>
<div class="paragraph">
<p>TLSバージョン1.2または1.3を無効化するには、<span class="monospaced">/etc/default/pveproxy</span>に以下を設定します:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>TLS 1.2 無効化=1</pre>
</div></div>
<div class="paragraph">
<p>または、それぞれ:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>TLS 1.3 無効化=1</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">特別な理由がない限り、サポートされる TLS バージョンを手動で調整することは推奨されません。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_diffie_hellman_parameters">18.2.5. ディフィー・ヘルマンパラメータ
<a class="headerlink" href="#_diffie_hellman_parameters" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>使用するDiffie-Hellmanパラメータは
<span class="monospaced">/etc/default/pveproxy で</span> <span class="monospaced">DHPARAMS</span>を設定することで定義できます。
PEM形式のDHパラメータを含むファイルのパスを指定します。例:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>DHPARAMS="/path/to/dhparams.pem"</pre>
</div></div>
<div class="paragraph">
<p>このオプションが設定されていない場合、組み込みの<span class="monospaced">skip2048</span>パラメータが
使用されます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">DHパラメータは、DH鍵交換アルゴリズムを利用する暗号スイートがネゴシエートされた場合にのみ使用されます。</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="pveproxy_custom_tls_cert">18.2.6. 代替 HTTPS 証明書
<a class="headerlink" href="#pveproxy_custom_tls_cert" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>使用する証明書を外部証明書またはACME経由で取得した証明書に変更できます。</p></div>
<div class="paragraph">
<p>pveproxy は<span class="monospaced">/etc/pve/local/pveproxy-ssl.pem</span>および
<span class="monospaced">/etc/pve/local/pveproxy-ssl.key</span> が存在する場合はそれらを使用し、存在しない場合は
<span class="monospaced">/etc/pve/local/pve-ssl.pem</span>および<span class="monospaced">/etc/pve/local/pve-ssl.key</span> にフォールバックします。
秘密鍵はパスフレーズを使用できません。</p></div>
<div class="paragraph">
<p>証明書秘密鍵の保存場所
<span class="monospaced">/etc/pve/local/pveproxy-ssl.key</span>は、
<span class="monospaced">/etc/default/pveproxy</span> で<span class="monospaced">TLS_KEY_FILE</span>を設定することで上書き可能です。例:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>TLS_KEY_FILE="/secrets/pveproxy.key"</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">組み込みのACME統合はこの設定を尊重しません。</td>
</tr></table>
</div>
<div class="paragraph">
<p>詳細はドキュメントの「ホストシステム管理」章を参照してください。</p></div>
</div>
<div class="sect3">
<h4 id="pveproxy_response_compression">18.2.7. レスポンス圧縮
<a class="headerlink" href="#pveproxy_response_compression" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトでは、クライアントが対応している場合、圧縮可能なコンテンツに対してgzipによるHTTPレベル圧縮を使用<span class="monospaced">します</span>。これは<span class="monospaced">/etc/default/pveproxyで</span>無効化可能です。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>COMPRESSION=0</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="pveproxy_real_ip">18.2.8. 実際のクライアントIPの記録
<a class="headerlink" href="#pveproxy_real_ip" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>デフォルトでは、<span class="monospaced">pveproxyは</span>リクエスト送信元のクライアントIPアドレスをログに記録します。
<span class="monospaced">pveproxyの前に</span>プロキシサーバーが存在する場合、プロキシIPではなくリクエスト元クライアントのIPをログに記録することが望ましい場合があります。</p></div>
<div class="paragraph">
<p>プロキシが設定したHTTPヘッダーをログ記録用に処理するには、
<span class="monospaced">PROXY_REAL_IP_HEADER</span>にクライアントIPを取得するヘッダー名を設定します。
例:</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>PROXY_REAL_IP_HEADER="X-Forwarded-For"</pre>
</div></div>
<div class="paragraph">
<p>このヘッダーに渡された無効な値はすべて無視されます。</p></div>
<div class="paragraph">
<p>デフォルトでは、すべての受信リクエストにおいてこのヘッダーの値をログに記録します。
上記HTTPヘッダーの設定を許可する信頼済みプロキシサーバーのリストを定義するには、
<span class="monospaced">PROXY_REAL_IP_ALLOW_FROM</span>を設定します。例：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>PROXY_REAL_IP_ALLOW_FROM="192.168.0.2"</pre>
</div></div>
<div class="paragraph">
<p><span class="monospaced">PROXY_REAL_IP_ALLOW_FROM</span>設定は、<span class="monospaced">ALLOW_FROM</span>および<span class="monospaced">DENY_FROM</span>設定と同様の値もサポートします。</p></div>
<div class="paragraph">
<p>IPアドレス<span class="monospaced">はNet::IPが</span>理解する任意の構文で指定可能です。
名前<span class="monospaced">「all」</span> <span class="monospaced">は0/0および</span> <span class="monospaced">::/0</span>（全てのIPv4およびIPv6アドレスを意味）の別名です。</p></div>
</div>
<div class="sect3">
<h4 id="pveproxy_max_workers">18.2.9. ワーカー数
<a class="headerlink" href="#pveproxy_max_workers" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p><span class="monospaced">pveproxyは</span>着信リクエストの処理をワーカープロセスに委譲します。デフォルトでは3つのワーカープロセスを<span class="monospaced">生成し</span>、これはほとんどのワークロードで十分です。大量のAPIリクエストを発行する自動化中心のワークロードでリクエスト処理が遅延またはタイムアウトが発生する場合、<span class="monospaced">/etc/default/pveproxy内のMAX_WORKERS</span>を設定することでワーカープロセス数を増やせます。例：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>MAX_WORKERS=5</pre>
</div></div>
<div class="paragraph">
<p>ワーカープロセスの数を増やすとCPU使用率が上昇する可能性があることに注意してください。
ワーカープロセスの数は0より大きく128より小さくなければなりません。</p></div>
<div class="paragraph">
<p><a href="#pvedaemon_max_workers">pvedaemon</a> にも同様の設定が存在します。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_pvestatd_proxmox_ve_status_daemon">
<span>18.3. pvestatd - Proxmox VE ステータスデーモン</span>
<a class="headerlink" href="#_pvestatd_proxmox_ve_status_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>このデーモンは、一定間隔でVM、ストレージ、コンテナの状態を照会します。結果はクラスタ内の全ノードに送信されます。</p></div>
</div>
<div class="sect2">
<h3 id="_spiceproxy_spice_proxy_service">
<span>18.4. spiceproxy - SPICE プロキシサービス</span>
<a class="headerlink" href="#_spiceproxy_spice_proxy_service" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><a href="http://www.spice-space.org">SPICE</a>（Simple Protocol for Independent Computing Environments）はオープンなリモートコンピューティングソリューションであり、
クライアントがリモートディスプレイやデバイス（例：キーボード、マウス、オーディオ）にアクセスすることを可能にします。主なユースケースは仮想マシンやコンテナへのリモートアクセスです。</p></div>
<div class="paragraph">
<p>このデーモンはTCPポート3128でリスンし、HTTPプロキシを実装して
SPICEクライアント<em>からのCONNECT</em>リクエストを適切なProxmox VE VMへ転送します。
<span class="monospaced">www-data</span>ユーザーとして実行され、権限は非常に制限されています。</p></div>
<div class="sect3">
<h4 id="_host_based_access_control">18.4.1. ホストベースのアクセス制御
<a class="headerlink" href="#_host_based_access_control" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>アクセス制御リストのような「apache2」の設定が可能です。値はファイル<span class="monospaced">/etc/default/pveproxy</span> から読み込まれます。詳細は<span class="monospaced">pveproxy</span>のドキュメントを参照してください。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_pvescheduler_proxmox_ve_scheduler_daemon">
<span>18.5. pvescheduler - Proxmox VE スケジューラデーモン</span>
<a class="headerlink" href="#_pvescheduler_proxmox_ve_scheduler_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>このデーモンは、レプリケーションやvzdumpジョブなど、スケジュールに従ってジョブを起動する役割を担います。</p></div>
<div class="paragraph">
<p>vzdumpジョブについては、設定ファイル<span class="monospaced">/etc/pve/jobs.cfg</span>から設定を取得します。</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_useful_command_line_tools">
19. 便利なコマンドラインツール
<a class="headerlink" href="#_useful_command_line_tools" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_pvesubscription_subscription_management">
<span>19.1. pvesubscription - サブスクリプション管理</span>
<a class="headerlink" href="#_pvesubscription_subscription_management" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>このツールはProxmox VEサブスクリプションの管理に使用されます。</p></div>
</div>
<div class="sect2">
<h3 id="_pveperf_proxmox_ve_benchmark_script">
<span>19.2. pveperf - Proxmox VE ベンチマークスクリプト</span>
<a class="headerlink" href="#_pveperf_proxmox_ve_benchmark_script" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">PATH</span>（デフォルトは<span class="monospaced">/</span>）にマウントされたハードディスク上で、
CPU/ハードディスクのパフォーマンスデータを収集しようとします：</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
CPU BOGOMIPS</dt>
<dd>
<p>
bogomips 全CPUの合計</p>
</dd>
<dt class="hdlist1">
REGEX/SECOND</dt>
<dd>
<p>
1秒あたりの正規表現処理数（Perlパフォーマンステスト）、300000以上であるべき</p>
</dd>
<dt class="hdlist1">
HD SIZE</dt>
<dd>
<p>
ハードディスク容量</p>
</dd>
<dt class="hdlist1">
バッファ読み取り</dt>
<dd>
<p>
簡易HD読み取りテスト。現代のHDは少なくとも40MB/秒</p>
</dd>
<dt class="hdlist1">
平均シーク時間</dt>
<dd>
<p>
平均シーク時間をテスト。高速SCSIハードディスクは8ミリ秒未満の値を達成。一般的なIDE/SATAディスクは15～20ミリ秒の値を得る。</p>
</dd>
<dt class="hdlist1">
FSYNCS/SECOND</dt>
<dd>
<p>
値は200以上であるべき（RAIDコントローラで<span class="monospaced">書き込みキャッシュ</span>モードを有効化すること - バッテリーバックアップ付きキャッシュ（BBWC）が必要）。</p>
</dd>
<dt class="hdlist1">
DNS拡張</dt>
<dd>
<p>
外部DNS名解決の平均所要時間</p>
</dd>
<dt class="hdlist1">
DNS INT</dt>
<dd>
<p>
ローカルDNS名解決の平均時間</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_shell_interface_for_the_proxmox_ve_api">
<span>19.3. Proxmox VE API 向けシェルインターフェース</span>
<a class="headerlink" href="#_shell_interface_for_the_proxmox_ve_api" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE管理ツール(<span class="monospaced">pvesh</span>)は、REST/HTTPSサーバーを使用せずに
API関数を直接呼び出すことを可能にします。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content"><em>root</em>のみが実行を許可される。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_examples_13">19.3.1. 例<a class="headerlink" href="#_examples_13" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>クラスタ内のノード一覧を取得</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesh get /nodes</pre>
</div></div>
<div class="paragraph">
<p>データセンターの利用可能なオプション一覧を取得</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesh usage cluster/options -v</pre>
</div></div>
<div class="paragraph">
<p>データセンターのデフォルトコンソールとしてHTML5 NoVNCコンソールを設定</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre># pvesh set cluster/options -console html5</pre>
</div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_frequently_asked_questions_2">
20. よくある質問
<a class="headerlink" href="#_frequently_asked_questions_2" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">新しいFAQはこのセクションの末尾に追加されます。</td>
</tr></table>
</div>
<div class="qlist qanda"><ol>
<li>
<p><em>
Proxmox VE はどのディストリビューションをベースとしていますか？</em></p>
<p>
Proxmox VEは<a href="https://www.debian.org">Debian GNU/Linux</a>をベースとしています</p>
</li>
<li>
<p><em>
Proxmox VEプロジェクトはどのライセンスを使用していますか？</em></p>
<p>
Proxmox VEのコードはGNU Affero General Public Licenseバージョン3の下でライセンスされています。</p>
</li>
<li>
<p><em>
Proxmox VEは32ビットプロセッサで動作しますか？</em></p>
<p>
Proxmox VEは64ビットCPU（AMDまたはIntel）でのみ動作します。
プラットフォームの32ビット版に関する計画はありません。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">仮想マシンとコンテナは32ビットと64ビットの両方が利用可能です。</td>
</tr></table>
</div>
</li>
<li>
<p><em>
お使いのCPUは仮想化をサポートしていますか？</em></p>
<p>
CPUが仮想化対応かどうかを確認<span class="monospaced">するには</span>、以下のコマンド出力でvmx
または<span class="monospaced">svmタグ</span>があるか確認してください：</p>
<div class="listingblock">
<div class="content monospaced">
<pre>egrep '(vmx|svm)' /proc/cpuinfo</pre>
</div></div>
</li>
<li>
<p><em>
対応 Intel CPU</em></p>
<p>
<a href="https://en.wikipedia.org/wiki/Virtualization_Technology#Intel_virtualization_.28VT-x.29">Intel Virtualization Technology (Intel VT-x)</a>対応の
64ビットプロセッサ。
（<a href="https://ark.intel.com/content/www/us/en/ark/search/featurefilter.html?productType=873&amp;2_VTX=True&amp;2_InstructionSet=64-bit">Intel VT および 64ビット対応プロセッサ一覧</a>）</p>
</li>
<li>
<p><em>
サポート対象 AMD CPU</em></p>
<p>
<a href="https://en.wikipedia.org/wiki/Virtualization_Technology#AMD_virtualization_.28AMD-V.29">AMD Virtualization Technology (AMD-V)</a>対応の
64ビットプロセッサ。</p>
</li>
<li>
<p><em>
コンテナ/仮想環境（VE）/仮想プライベートサーバー（VPS）とは？</em></p>
<p>
コンテナの文脈では、これらの用語はすべて
オペレーティングシステムレベル仮想化の概念を指します。オペレーティングシステムレベル仮想化とは、
オペレーティングシステムのカーネルが
複数の分離されたインスタンスを許可し、
それらすべてがカーネルを共有する仮想化手法です。
LXCに関しては、このようなインスタンスをコンテナと呼びます。
コンテナは完全なオペレーティングシステムをエミュレートするのではなく
ホストのカーネルを使用するため、
オーバーヘッドが少ないですが、
Linuxゲストに限定されます。</p>
</li>
<li>
<p><em>
QEMU/KVMゲスト（またはVM）とは？</em></p>
<p>
QEMU/KVMゲスト（またはVM）とは、QEMUとLinux KVMカーネルモジュールを使用してProxmox VE上で仮想化されるゲストシステムです。</p>
</li>
<li>
<p><em>
QEMUとは何ですか？</em></p>
<p>
QEMUは汎用的なオープンソースのマシンエミュレータおよび仮想化ソフトウェアです。Linux KVMカーネルモジュールを利用し、ゲストコードをホストCPU上で直接実行することでネイティブに近いパフォーマンスを実現します。
Linuxゲストに限定されず、任意のオペレーティングシステムの実行が可能です。</p>
</li>
<li>
<p><em>
Proxmox VEのサポート期間は？</em></p>
<p>
Proxmox VEのバージョンは、対応するDebianバージョン<a href="https://wiki.debian.org/DebianOldStable">がoldstable</a>である限り、最低限サポートされます。Proxmox VEはローリングリリースモデルを採用しており、常に最新の安定版を使用することが推奨されます。</p>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" id="faq-support-table" style="
width:100%;
">
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<col style="width:20%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">Proxmox VE バージョン </th>
<th class="tableblock halign-left valign-top">Debian バージョン      </th>
<th class="tableblock halign-left valign-top">初回リリース </th>
<th class="tableblock halign-left valign-top">Debian EOL </th>
<th class="tableblock halign-left valign-top">Proxmox EOL</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE 9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 13 (Trixie)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2025-0?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">未定</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">未定</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE 8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 12 (Bookworm)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2023-06</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2026-08</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2026-08</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE 7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 11 (Bullseye)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2021-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2024-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2024-07</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE 6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 10 (Buster)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2022-09</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2022-09</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE 5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 9 (Stretch)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-07</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 8 (Jessie)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-06</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-06</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE 3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 7 (Wheezy)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2016-04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-02</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 6 (Squeeze)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2012-04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-05</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox VE 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debian 5 (Lenny)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2008-10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2012-03</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-01</p></td>
</tr>
</tbody>
</table>
</div>
</li>
<li>
<p><em>
Proxmox VEを次のポイントリリースにアップグレードするにはどうすればよいですか？</em></p>
<p>
マイナーバージョンアップ（例：Proxmox VE 8.1 から 8.2 または 8.3 へのアップグレード）は、通常の更新と同様に実行できます。
ただし、関連する重要な変更点や互換性を損なう変更がないか、<a href="https://pve.proxmox.com/wiki/Roadmap">リリースノート</a>を確認してください<a href="https://pve.proxmox.com/wiki/Roadmap">。</a></p>
<div class="paragraph" id="faq-upgrade">
<p>更新自体については、Web UIの「<em>Node → Updates</em>」パネルを使用するか、
CLIで以下を実行してください:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>apt update
apt full-upgrade</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><a href="#sysadmin_package_repositories">パッケージリポジトリを</a>正しく設定していることを常に確認し、
<span class="monospaced">apt update で</span>エラーが発生しなかった場合にのみ
実際のアップグレードを続行してください。</td>
</tr></table>
</div>
</li>
<li>
<p><em>
Proxmox VE を次のメジャーリリースにアップグレードするにはどうすればよいですか？</em></p>
<p>
メジャーバージョンのアップグレード（例：Proxmox VE 8.4 から 9.0 への移行）もサポートされています。
ただし、慎重な計画とテストが必要であり、最新のバックアップが準備されていない状態で開始<strong>すべきではありません</strong>。</p>
<div class="paragraph" id="faq-upgrade-major">
<p>具体的なアップグレード手順は環境設定により異なりますが、
アップグレードの実施方法に関する一般的な手順とアドバイスを提供します：</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="https://pve.proxmox.com/wiki/Upgrade_from_7_to_8">Proxmox VE 8 から 9 へのアップグレード</a></p>
</li>
<li>
<p>
<a href="https://pve.proxmox.com/wiki/Upgrade_from_7_to_8">Proxmox VE 7 から 8 へのアップグレード</a></p>
</li>
<li>
<p>
<a href="https://pve.proxmox.com/wiki/Upgrade_from_6.x_to_7.0">Proxmox VE 6 から 7 へのアップグレード</a></p>
</li>
<li>
<p>
<a href="https://pve.proxmox.com/wiki/Upgrade_from_5.x_to_6.0">Proxmox VE 5 から 6 へのアップグレード</a></p>
</li>
<li>
<p>
<a href="https://pve.proxmox.com/wiki/Upgrade_from_4.x_to_5.0">Proxmox VE 4 から 5 へのアップグレード</a></p>
</li>
<li>
<p>
<a href="https://pve.proxmox.com/wiki/Upgrade_from_3.x_to_4.0">Proxmox VE 3 から 4 へのアップグレード</a></p>
</li>
</ul></div>
</li>
<li>
<p><em>
LXC vs LXD vs Proxmox Containers vs Docker</em></p>
<p>
LXCはLinuxカーネルのコンテナ機能に対するユーザースペースインターフェースです。強力なAPIとシンプルなツールを通じて、Linuxユーザーがシステムコンテナを容易に作成・管理できるようにします。LXCは以前のOpenVZと同様に<strong>システム仮想化を</strong>目的としており、コンテナ内で完全なOSを実行可能にします。これによりSSHでのログイン、ユーザー追加、Apacheの実行などが可能です。</p>
<div class="paragraph">
<p>LXDはLXCの上に構築され、新しく優れたユーザー体験を提供します。内部では、LXD<span class="monospaced">はliblxcとそのGo</span>バインディングを通じてLXCを利用し、コンテナの作成と管理を行います。これは基本的にLXCのツールとディストリビューションテンプレートシステムに代わるものであり、ネットワーク経由で制御可能であることから得られる追加機能を備えています。</p></div>
<div class="paragraph">
<p>Proxmoxコンテナとは、Proxmox Container Toolkit（<span class="monospaced">pct</span>）を使用して作成・管理されるコンテナを指します。<strong>これらはシステム仮想化を</strong>目的とし、コンテナ基盤としてLXCを採用しています。Proxmox Container Toolkit（<span class="monospaced">pct</span>）はProxmox VEと緊密に連携しています。これは、
クラスタ構成を認識し、QEMU仮想マシン（VM）と同じネットワーク
およびストレージリソースを利用できることを意味します。Proxmox VEファイアウォールの使用、
バックアップの作成と復元、HAフレームワークを用いたコンテナ管理も可能です。
Proxmox VE APIを介してネットワーク経由で全てを制御できます。</p></div>
<div class="paragraph">
<p>Docker<strong>は単一</strong>アプリケーションを、
分離された自己完結型環境で実行することを目的としています。
これらは一般的に「システムコンテナ」ではなく
「アプリケーションコンテナ」と呼ばれます。
DockerインスタンスはホストからDocker Engineコマンドラインインターフェースを使用して管理します。
Proxmox VEホスト上で直接dockerを実行することは推奨されません。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">アプリケーションコンテナ（例：<em>Docker</em>イメージ）を実行する場合は、
Proxmox QEMU VM内で実行するのが最適です。</td>
</tr></table>
</div>
</li>
</ol></div>
</div>
</div>
<div class="sect1">
<h2 id="_bibliography">
21. 参考文献
<a class="headerlink" href="#_bibliography" title="Permalink to this heading"></a></h2>
<div class="sectionbody">
<div class="ulist bibliography"><div class="title">Proxmox VEに関する書籍</div><ul>
<li>
<p>
<a id="Ahmed16"></a>[Ahmed16] Wasim Ahmed.
 <em> Mastering Proxmox - Third Edition</em>.
  Packt Publishing, 2017.
  ISBN 978-1788397605</p>
</li>
<li>
<p>
<a id="Ahmed15"></a>[Ahmed15] Wasim Ahmed.
 <em> Proxmox Cookbook</em>.
  Packt Publishing, 2015.
  ISBN 978-1783980901</p>
</li>
<li>
<p>
<a id="Cheng14"></a>[Cheng14] Simon M.C. Cheng.
 <em> Proxmox High Availability</em>.
  Packt Publishing, 2014.
  ISBN 978-1783980888</p>
</li>
<li>
<p>
<a id="Goldman16"></a>[Goldman16] Rik Goldman.
 <em> Learning Proxmox VE</em>.
  Packt Publishing, 2016.
  ISBN 978-1783981786</p>
</li>
<li>
<p>
<a id="Surber16"></a>[Surber16] Lee R. Surber.
 <em> Virtualization Complete: Business Basic Edition</em>.
  Linux Solutions (LRS-TEK), 2016.
  ASIN B01BBVQZT6</p>
</li>
</ul></div>
<div class="ulist bibliography"><div class="title">関連技術に関する書籍</div><ul>
<li>
<p>
<a id="Hertzog13"></a>[Hertzog13] Raphaël Hertzog, Roland Mas., Freexian SARL
 <a href="https://debian-handbook.info/get"> 『Debian管理者ハンドブック：Debian Bullseye入門から上級者まで</a>』
  Freexian, 2021年.
  ISBN 979-10-91414-20-3</p>
</li>
<li>
<p>
<a id="Bir96"></a>[Bir96] Kenneth P. Birman.
 <em> Building Secure and Reliable Network Applications</em>.
  Manning Publications Co, 1996.
  ISBN 978-1884777295</p>
</li>
<li>
<p>
<a id="Walsh10"></a>[Walsh10] Norman Walsh.
 <em> DocBook 5: The Definitive Guide</em>.
  O’Reilly &amp;amp; Associates, 2010.
  ISBN 978-0596805029</p>
</li>
<li>
<p>
<a id="Richardson07"></a>[Richardson07] Leonard Richardson &amp;amp; Sam Ruby.
 <em> RESTful Web Services</em>.
  O’Reilly Media, 2007.
  ISBN 978-0596529260</p>
</li>
<li>
<p>
<a id="Singh15"></a>[Singh15] Karan Singh.
 <em> Learning Ceph</em>.
  Packt Publishing, 2015.
  ISBN 978-1783985623</p>
</li>
<li>
<p>
<a id="Singh16"></a>[Singh16] Karan Signh.
 <em> Ceph</em>クックブック
  Packt Publishing, 2016.
  ISBN 978-1784393502</p>
</li>
<li>
<p>
<a id="Mauerer08"></a>[Mauerer08] ヴォルフガング・マウラー.
  『<em>プロフェッショナル Linux カーネルアーキテクチャ</em>』.
  ジョン・ワイリー・アンド・サンズ, 2008.
  ISBN 978-0470343432</p>
</li>
<li>
<p>
<a id="Loshin03"></a>[Loshin03] ピート・ロシン,
  『<em>IPv6: 理論、プロトコル、実践』第2版</em>.
  モーガン・カウフマン, 2003年.
  ISBN 978-1558608108</p>
</li>
<li>
<p>
<a id="Loeliger12"></a>[Loeliger12] Jon Loeliger &amp;amp; Matthew McCullough.
 <em> Version Control with Git: Powerful tools and techniques for
   collaborative software development</em>.
  O’Reilly and Associates, 2012.
  ISBN 978-1449316389</p>
</li>
<li>
<p>
<a id="Kreibich10"></a>[Kreibich10] Jay A. Kreibich.
 <em> 『SQLiteの活用</em>』
  O’Reilly and Associates, 2010.
  ISBN 978-0596521189</p>
</li>
</ul></div>
<div class="ulist bibliography"><div class="title">関連トピックに関する書籍</div><ul>
<li>
<p>
<a id="Bessen09"></a>[Bessen09] James Bessen &amp; Michael J. Meurer,
 <em> 特許制度の失敗：裁判官、官僚、弁護士が革新者を危険に晒す仕組み</em>.
  Princeton Univ Press, 2009.
  ISBN 978-0691143217</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_command_line_interface">22. 付録A: コマンドラインインターフェース</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cli_general">
<span>22.1.</span>概要
<a class="headerlink" href="#cli_general" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>オプションの大文字小文字の統一されていない歴史的表記については、
<a href="#configuration_files_casing">設定ファイルの関連セクションを参照</a>してください。</p></div>
</div>
<div class="sect2">
<h3 id="_output_format_options_span_class_monospaced_format_options_span">
<span>22.2. 出力形式オプション<span class="monospaced">[FORMAT_OPTIONS]</span></span>
<a class="headerlink" href="#_output_format_options_span_class_monospaced_format_options_span" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><span class="monospaced">--output-format</span>パラメータで出力形式を指定可能です。
デフォルトの<em>テキスト形式は</em>、表の周囲にASCIIアートで
見栄えの良い枠線を描画します。さらに一部の値を
人間が読みやすいテキストに変換します。例:</p></div>
<div class="ulist"><ul>
<li>
<p>
UnixエポックはISO 8601日付文字列で表示されます。</p>
</li>
<li>
<p>
経過時間は週/日/時間/分/秒のカウントで表示されます（例:<span class="monospaced">1d 5h</span>）。</p>
</li>
<li>
<p>
バイトサイズの値には単位（<span class="monospaced">B</span>、<span class="monospaced">KiB</span>、<span class="monospaced">MiB</span>、<span class="monospaced">GiB</span>、<span class="monospaced">TiB</span>、<span class="monospaced">PiB</span>）が含まれます。</p>
</li>
<li>
<p>
小数部分はパーセンテージで表示されます。例：1.0 は 100% と表示されます。</p>
</li>
</ul></div>
<div class="paragraph">
<p><span class="monospaced">--quiet</span> オプションを使用すると出力を完全に抑制できます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--human-readable</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
出力レンダリング関数を呼び出して人間が読めるテキストを生成します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--noborder</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
境界線を描画しない（<em>テキスト</em>形式の場合）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--noheader</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
列見出しを表示しない（<em>テキスト</em>形式の場合）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--output-format</span> <span class="monospaced">&amp;lt;json | json-pretty | text | yaml&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">text</span>)</dt>
<dd>
<p>
出力形式。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--quiet</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
結果の印刷を抑制する。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pvesm_strong_proxmox_ve_storage_manager">
<span>22.3.<strong>pvesm</strong>- Proxmox VE ストレージマネージャー</span>
<a class="headerlink" href="#_strong_pvesm_strong_proxmox_ve_storage_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvesm</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pvesm add</strong> <span class="monospaced">&amp;lt;type&amp;gt; &amp;lt;storage&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>新しいストレージを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;type&amp;gt;</span>:<span class="monospaced">&amp;lt;btrfs | cephfs | cifs | dir | esxi | iscsi | iscsidirect | lvm | lvmthin | nfs | pbs | rbd | zfs | zfspool&amp;gt;</span></dt>
<dd>
<p>
ストレージタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;storage&amp;gt;</span>:<span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
ストレージ識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--authsupported</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
Authsupported。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--base</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ベースボリューム。このボリュームは自動的にアクティブ化されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--blocksize</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ブロックサイズ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">[clone=&amp;lt;LIMIT&amp;gt;] [,default=&amp;lt;LIMIT&amp;gt;] [,migration=&amp;lt;LIMIT&amp;gt;] [,move=&amp;lt;LIMIT&amp;gt;] [,restore=&amp;lt;LIMIT&amp;gt;]</span></dt>
<dd>
<p>
各種操作に対するI/O帯域幅制限の設定（KiB/s単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comstar_hg</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
comstarビューのホストグループ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comstar_tg</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
comstarビューのターゲットグループ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--content</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
許可されるコンテンツタイプ。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><em>rootdir</em>の値はコンテナ用、<em>images</em>の値は VM 用に使用されます。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--content-dirs</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
デフォルトのコンテンツタイプディレクトリに対する上書き設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--create-base-path</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">yes</span>)</dt>
<dd>
<p>
ベースディレクトリが存在しない場合、作成する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--create-subdirs</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">yes</span>)</dt>
<dd>
<p>
ディレクトリにデフォルト構造を配置する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--data-pool</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
データプール（エラー訂正符号化専用）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--datastore</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
Proxmox Backup Server データストア名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--disable</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ストレージを無効化するフラグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--domain</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
CIFSドメイン。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--encryption-key</span> <span class="monospaced">暗号化キーを含むファイル、または特別な値 "autogen"</span></dt>
<dd>
<p>
暗号化キー。パスフレーズなしで自動生成<em>するにはautogen</em>を使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--export</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
NFSエクスポートパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--fingerprint</span> <span class="monospaced">([A-Fa-f0-9]{2}:){31}[A-Fa-f0-9]{2}</span></dt>
<dd>
<p>
証明書のSHA-256フィンガープリント。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&amp;lt;qcow2 | raw | subvol | vmdk&amp;gt;</span></dt>
<dd>
<p>
デフォルトのイメージ形式。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--fs-name</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
Cephファイルシステム名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--fuse</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
FUSE経由でCephFSをマウント。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--is_mountpoint</span> <span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">no</span>)</dt>
<dd>
<p>
指定されたパスが外部管理のマウントポイントであると見なし、マウントされていない場合、ストレージをオフラインとみなす。ブール値（yes/no）を使用すると、このフィールドでターゲットパスを直接指定するショートカットとして機能する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--iscsiprovider</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
iscsiプロバイダー</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keyring</span> <span class="monospaced">Cephクラスタで認証するためのキーリングを含むファイル</span></dt>
<dd>
<p>
クライアントキーリングの内容（外部クラスター用）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--krbd</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
krbdカーネルモジュールを介して常にrbdにアクセスする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lio_tpg</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
Linux LIOターゲット用ターゲットポータルグループ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--master-pubkey</span> <span class="monospaced">PEM形式のマスター公開鍵を含むファイル</span></dt>
<dd>
<p>
Base64エンコードされたPEM形式の公開RSA鍵。各暗号化バックアップに追加される暗号化キーのコピーを暗号化するために使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--max-protected-backups</span> <span class="monospaced">&amp;lt;integer&amp;gt; (-1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">Datastore.Allocate権限を持つユーザーはUnlimited、その他のユーザーは5</span>)</dt>
<dd>
<p>
ゲストごとの保護対象バックアップの最大数。無制限の場合は<em>-1</em>を使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mkdir</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">yes</span>)</dt>
<dd>
<p>
ディレクトリが存在しない場合は作成し、デフォルトのサブディレクトリを生成します。注：非推奨。代わりに<em>create-base-path</em>および<em>create-subdirs</em>オプションを使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--monhost</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
モニターのIPアドレス（外部クラスター用）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mountpoint</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
マウントポイント</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--namespace</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
名前空間。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nocow</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ファイルにNOCOWフラグを設定します。データチェックサムを無効化し、データエラーを回復不能にすると同時に直接I/Oを許可します。基盤となるRAIDシステムのない単一のext4フォーマットディスクと同等の安全性で十分な場合にのみ使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nodes</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ストレージ構成が適用されるノードのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nowritecache</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ターゲットでの書き込みキャッシュを無効化</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--options</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
NFS/CIFS マウントオプション（<em>man nfs</em>または<em>man mount.cifs</em> を参照）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--password</span> <span class="monospaced">&amp;lt;password&amp;gt;</span></dt>
<dd>
<p>
共有/データストアへのアクセス用パスワード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--path</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ファイルシステムパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pool</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
プール。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--port</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - 65535)</span></dt>
<dd>
<p>
デフォルト以外のポートでストレージに接続する場合に使用（例：PBSやESXi）。NFS/CIFSでは、<em>オプション設定で</em>マウントオプション経由にポートを指定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--portal</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
iSCSIポータル（IPまたはDNS名、オプションでポート指定）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--preallocation</span> <span class="monospaced">&amp;lt;falloc | full | metadata | off&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">metadata</span>)</dt>
<dd>
<p>
raw および qcow2 イメージの事前割り当てモード。raw イメージで<em>メタデータ</em>を使用すると、preallocation=off となります。</p>
</dd>
<dt class="hdlist1">
--prune-backups [keep-all=&amp;lt;1|0&amp;gt;]<span class="monospaced">[,keep-daily=&amp;lt;N&amp;gt;] [,keep-hourly=&amp;lt;N&amp;gt;] [,keep-last=&amp;lt;N&amp;gt;] [,keep-monthly=&amp;lt;N&amp;gt;] [,keep-weekly=&amp;lt;N&amp;gt;] [,keep-yearly=&amp;lt;N&amp;gt;]</span></dt>
<dd>
<p>
保持オプションは間隔が短いものから順に処理され、--keep-last が最優先です。各オプションは特定の期間をカバーします。この期間内のバックアップはこのオプションの対象となります。次のオプションは既にカバーされたバックアップを無視し、より古いバックアップのみを考慮します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--saferemove</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
LV削除時にデータをゼロクリア。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--saferemove_throughput</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
消去スループット（cstream -t パラメータ値）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--server</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
サーバーのIPアドレスまたはDNS名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--share</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
CIFS共有。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--shared</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
すべてのノード（または<em>nodes</em>オプションで列挙されたノード）に同一コンテンツを持つ単一ストレージであることを示します。これによりローカルストレージの内容が自動的に他のノードからアクセス可能になるわけではなく、既に共有されているストレージをそのようにマークするだけです！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--skip-cert-verification</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">false</span>)</dt>
<dd>
<p>
TLS証明書検証を無効化。完全に信頼できるネットワークでのみ有効化すること！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smbversion</span> <span class="monospaced">&amp;lt;2.0 | 2.1 | 3 | 3.0 | 3.11 | default&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">default</span>)</dt>
<dd>
<p>
SMBプロトコルバージョン。設定なし時は<em>デフォルトで</em>、クライアントとサーバー双方がサポートする最高位のSMB2+バージョンをネゴシエートします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--snapshot-as-volume-chain</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ボリューム・バッキング・チェーンを介したストレージベンダー非依存のスナップショット作成をサポートします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sparse</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
スパースボリュームを使用</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--subdir</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
マウントするサブディレクトリ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tagged_only</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
<em>pve-vm-IDタグ</em>が付与された論理ボリュームのみを使用する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
iSCSIターゲット。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--thinpool</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
LVMシンプールLV名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--username</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
RBD ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vgname</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ボリュームグループ名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--zfs-base-path</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
作成されたZFSブロックデバイスを検索するベースパス。指定しない場合、作成時に自動設定されます。通常は<em>/dev/zvol</em>。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm alloc</strong> <span class="monospaced">&amp;lt;storage&amp;gt; &amp;lt;vmid&amp;gt; &amp;lt;filename&amp;gt; &amp;lt;size&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>ディスクイメージを割り当てます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;storage&amp;gt;</span>:<span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
ストレージ識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
所有者 VM を指定</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;filename&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
作成するファイル名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;size&amp;gt;</span>:<span class="monospaced">\d+[MG]?</span></dt>
<dd>
<p>
キロバイト単位のサイズ（1024バイト）。オプションの接尾辞：<em>M</em>（メガバイト、1024K）、<em>G</em>（ギガバイト、1024M）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&amp;lt;qcow2 | raw | subvol | vmdk&amp;gt;</span></dt>
<dd>
<p>
イメージのフォーマット。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">size</span></td>
</tr></table>
</div>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm apiinfo</strong></p></div>
<div class="paragraph">
<p>APIVER および APIAGE を返します。</p></div>
<div class="paragraph">
<p><strong>pvesm cifsscan</strong></p></div>
<div class="paragraph">
<p><em>pvesm scan cifs</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pvesm export</strong> <span class="monospaced">&amp;lt;ボリューム&amp;gt; &amp;lt;フォーマット&amp;gt; &amp;lt;ファイル名&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ボリュームをエクスポートするために内部で使用されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;ボリューム&amp;gt;</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
ボリューム識別子</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;format&amp;gt;</span>:<span class="monospaced">&amp;lt;btrfs | qcow2+size | raw+size | tar+size | vmdk+size | zfs&amp;gt;</span></dt>
<dd>
<p>
エクスポートストリーム形式</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;filename&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
出力ファイル名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--base</span> <span class="monospaced">(?^i:[a-z0-9_\-]{1,40})</span></dt>
<dd>
<p>
増分ストリームを開始するスナップショット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--snapshot</span> <span class="monospaced">(?^i:[a-z0-9_\-]{1,40})</span></dt>
<dd>
<p>
エクスポート対象のスナップショット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--snapshot-list</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
転送するスナップショットの順序付きリスト</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--with-snapshots</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ストリームに中間スナップショットを含めるかどうか</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm extractconfig</strong> <span class="monospaced">&amp;lt;volume&amp;gt;</span></p></div>
<div class="paragraph">
<p>vzdump バックアップアーカイブから構成を抽出します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;volume&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ボリューム識別子</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm free</strong> <span class="monospaced">&amp;lt;volume&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ボリュームを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;volume&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ボリューム識別子</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delay</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - 30)</span></dt>
<dd>
<p>
タスク完了までの待機時間。指定時間内にタスクが完了した場合、<em>nullを</em>返す。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--storage</span> <span class="monospaced">&amp;lt;ストレージID&amp;gt;</span></dt>
<dd>
<p>
ストレージ識別子。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定されたコマンドに関するヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示する</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm import</strong> <span class="monospaced">&amp;lt;volume&amp;gt; &amp;lt;format&amp;gt; &amp;lt;filename&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ボリュームをインポートするために内部で使用されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;ボリューム&amp;gt;</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
ボリューム識別子</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;format&amp;gt;</span>:<span class="monospaced">&amp;lt;btrfs | qcow2+size | raw+size | tar+size | vmdk+size | zfs&amp;gt;</span></dt>
<dd>
<p>
インポートストリーム形式</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;filename&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ソースファイル名。<em>-sオプション使用</em>時は、tcp://&amp;lt;IP-or-CIDR&amp;gt;形式でTCP接続を、unix://PATH-TO-SOCKET形式でUNIXソケットを入力として使用可能。それ以外は通常のファイルとして扱われる。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--allow-rename</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
要求されたボリュームIDが既に存在する場合、エラーを発生させる代わりに新しいボリュームIDを選択する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--base</span> <span class="monospaced">(?^i:[a-z0-9_\-]{1,40})</span></dt>
<dd>
<p>
増分ストリームのベーススナップショット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete-snapshot</span> <span class="monospaced">(?^i:[a-z0-9_\-]{1,80})</span></dt>
<dd>
<p>
成功時に削除するスナップショット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--snapshot</span> <span class="monospaced">(?^i:[a-z0-9_\-]{1,40})</span></dt>
<dd>
<p>
ストリームにスナップショットが含まれる場合の現在の状態のスナップショット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--with-snapshots</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ストリームに中間スナップショットが含まれるかどうか</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm iscsiscan</strong></p></div>
<div class="paragraph">
<p><em>pvesm scan iscsi</em> の別名です。</p></div>
<div class="paragraph">
<p><strong>pvesm list</strong> <span class="monospaced">&amp;lt;storage&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ストレージの内容を一覧表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;storage&amp;gt;</span>:<span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
ストレージ識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--content</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
このタイプのコンテンツのみを一覧表示</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmid</span> <span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
このVMの画像のみを一覧表示</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm lvmscan</strong></p></div>
<div class="paragraph">
<p><em>pvesm scan lvm</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pvesm lvmthinscan</strong></p></div>
<div class="paragraph">
<p><em>pvesm scan lvmthin</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pvesm nfsscan</strong></p></div>
<div class="paragraph">
<p><em>pvesm scan nfs</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pvesm path</strong> <span class="monospaced">&amp;lt;ボリューム&amp;gt;</span></p></div>
<div class="paragraph">
<p>指定されたボリュームのファイルシステムパスを取得します</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;volume&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ボリューム識別子</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm prune-backups</strong> <span class="monospaced">&amp;lt;storage&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>バックアップを削除します。標準命名規則を使用しているもののみ対象となります。
保持オプションが指定されていない場合、ストレージ設定のオプションが
使用されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;storage&amp;gt;</span>:<span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
ストレージ識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dry-run</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
削除対象となるもののみ表示し、何も削除しない。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep-all</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
すべてのバックアップを保持する。trueの場合、他のオプションと競合する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep-daily</span> <span class="monospaced">&amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去 &amp;lt;N&amp;gt; 日分の異なるバックアップを保持。1日に複数のバックアップがある場合、最新の1つのみを保持。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep-hourly</span> <span class="monospaced">&amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去 &amp;lt;N&amp;gt; 時間の異なるバックアップを保持。同一時間に複数のバックアップがある場合、最新の1つのみを保持。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep-last</span> <span class="monospaced">&amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
最後の &amp;lt;N&amp;gt; 個のバックアップを保持します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep-monthly</span> <span class="monospaced">&amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去 &amp;lt;N&amp;gt; ヶ月分の異なるバックアップを保持します。単一月に複数のバックアップがある場合、最新の1つだけが保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep-weekly</span> <span class="monospaced">&amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去 &amp;lt;N&amp;gt; 週間の異なるバックアップを保持します。同一週に複数のバックアップがある場合、最新の1つだけを残します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep-yearly</span> <span class="monospaced">&amp;lt;N&amp;gt;</span></dt>
<dd>
<p>
過去 &amp;lt;N&amp;gt; 年間の異なるバックアップを保持します。同一年に複数のバックアップがある場合、最新の1つだけを残します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--type</span> <span class="monospaced">&amp;lt;lxc | qemu&amp;gt;</span></dt>
<dd>
<p>
<em>qemu</em>または<em>lxc</em> のいずれか。このタイプのゲストのバックアップのみを考慮する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmid</span> <span class="monospaced">&amp;lt;整数&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
このゲストのバックアップのみを考慮する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm remove</strong> <span class="monospaced">&amp;lt;storage&amp;gt;</span></p></div>
<div class="paragraph">
<p>ストレージ設定を削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;storage&amp;gt;</span>:<span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
ストレージ識別子。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm scan cifs</strong> <span class="monospaced">&amp;lt;server&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>リモートの CIFS サーバーをスキャンします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;サーバー&amp;gt;</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
サーバーのアドレス（名前またはIP）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--domain</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
SMBドメイン（ワークグループ）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--password</span> <span class="monospaced">&amp;lt;パスワード&amp;gt;</span></dt>
<dd>
<p>
ユーザーパスワード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--username</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ユーザー名。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm scan iscsi</strong> <span class="monospaced">&amp;lt;portal&amp;gt;</span></p></div>
<div class="paragraph">
<p>リモート iSCSI サーバーをスキャンします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;portal&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
iSCSIポータル（IPまたはDNS名、オプションでポート）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm scan lvm</strong></p></div>
<div class="paragraph">
<p>ローカルのLVMボリュームグループを一覧表示します。</p></div>
<div class="paragraph">
<p><strong>pvesm scan lvmthin</strong> <span class="monospaced">&amp;lt;vg&amp;gt;</span></p></div>
<div class="paragraph">
<p>ローカルのLVMシンプールのリストを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vg&amp;gt;</span>:<span class="monospaced">[a-zA-Z0-9\.\+\_][a-zA-Z0-9\.\+\_\-]+</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm scan nfs</strong> <span class="monospaced">&amp;lt;サーバー&amp;gt;</span></p></div>
<div class="paragraph">
<p>リモート NFS サーバーをスキャンします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;server&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
サーバーアドレス（名前またはIP）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm scan pbs</strong> <span class="monospaced">&amp;lt;server&amp;gt; &amp;lt;username&amp;gt; --password &amp;lt;string&amp;gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>リモート Proxmox Backup Server をスキャンします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;server&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
サーバーアドレス（名前またはIP）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;username&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ユーザー名またはAPIトークンID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--fingerprint</span> <span class="monospaced">([A-Fa-f0-9]{2}:){31}[A-Fa-f0-9]{2}</span></dt>
<dd>
<p>
証明書のSHA 256フィンガープリント。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--password</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ユーザーパスワードまたはAPIトークンシークレット。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--port</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - 65535)</span>(<em>デフォルト =</em> <span class="monospaced">8007</span>)</dt>
<dd>
<p>
オプションのポート。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm scan zfs</strong></p></div>
<div class="paragraph">
<p>ローカルノード上の zfs プールリストをスキャンします。</p></div>
<div class="paragraph">
<p><strong>pvesm set</strong> <span class="monospaced">&amp;lt;storage&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ストレージ構成を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;storage&amp;gt;</span>:<span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
ストレージ識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--blocksize</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
ブロックサイズ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">[clone=&amp;lt;LIMIT&amp;gt;] [,default=&amp;lt;LIMIT&amp;gt;] [,migration=&amp;lt;LIMIT&amp;gt;] [,move=&amp;lt;LIMIT&amp;gt;] [,restore=&amp;lt;LIMIT&amp;gt;]</span></dt>
<dd>
<p>
各種操作に対するI/O帯域幅制限の設定（KiB/s単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comstar_hg</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
comstarビューのホストグループ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comstar_tg</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
comstarビューのターゲットグループ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--content</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
許可されるコンテンツタイプ。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンテナには<em>rootdir</em>値が、VMには<em>images値が</em>使用されます。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--content-dirs</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
デフォルトのコンテンツタイプディレクトリに対する上書き設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--create-base-path</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">yes</span>)</dt>
<dd>
<p>
ベースディレクトリが存在しない場合、作成する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--create-subdirs</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">yes</span>)</dt>
<dd>
<p>
ディレクトリにデフォルト構造を配置する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--data-pool</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
データプール（消去符号化専用）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
現在の設定ファイルのダイジェストが異なる場合、変更を防止します。これにより同時変更を防止できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--disable</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ストレージを無効化するフラグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--domain</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
CIFSドメイン。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--encryption-key</span> <span class="monospaced">暗号化キーを含むファイル、または特別な値 "autogen"</span></dt>
<dd>
<p>
暗号化キー。パスフレーズなしで自動生成する場合は<em>autogen</em>を使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--fingerprint</span> <span class="monospaced">([A-Fa-f0-9]{2}:){31}[A-Fa-f0-9]{2}</span></dt>
<dd>
<p>
証明書のSHA-256フィンガープリント。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&amp;lt;qcow2 | raw | subvol | vmdk&amp;gt;</span></dt>
<dd>
<p>
デフォルトのイメージ形式。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--fs-name</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
Cephファイルシステム名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--fuse</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
FUSE経由でCephFSをマウントします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--is_mountpoint</span> <span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">no</span>)</dt>
<dd>
<p>
指定されたパスが外部管理のマウントポイントであると仮定し、マウントされていない場合はストレージをオフラインと見なす。ブール値（yes/no）を使用すると、このフィールドでターゲットパスを直接指定するショートカットとして機能する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keyring</span> <span class="monospaced">Cephクラスタで認証するためのキーリングを含むファイル</span></dt>
<dd>
<p>
クライアントキーリングの内容（外部クラスター用）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--krbd</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
krbdカーネルモジュールを介して常にrbdにアクセスする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lio_tpg</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
Linux LIOターゲットのターゲットポータルグループ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--master-pubkey</span> <span class="monospaced">PEM形式のマスター公開鍵を含むファイル</span></dt>
<dd>
<p>
Base64エンコードされたPEM形式の公開RSA鍵。暗号化キーのコピーを暗号化するために使用され、各暗号化バックアップに追加されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--max-protected-backups</span> <span class="monospaced">&amp;lt;integer&amp;gt; (-1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">Datastore.Allocate権限を持つユーザーはUnlimited、その他のユーザーは5</span>)</dt>
<dd>
<p>
ゲストごとの保護対象バックアップの最大数。無制限の場合は<em>-1</em>を使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mkdir</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">yes</span>)</dt>
<dd>
<p>
ディレクトリが存在しない場合は作成し、デフォルトのサブディレクトリを生成します。注：非推奨。代わりに<em>create-base-path</em>および<em>create-subdirs</em>オプションを使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--monhost</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
モニターのIPアドレス（外部クラスター用）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mountpoint</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
マウントポイント</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--namespace</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
名前空間。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nocow</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ファイルにNOCOWフラグを設定します。データチェックサムを無効化し、データエラーを回復不能にすると同時に直接I/Oを許可します。基盤となるRAIDシステムのない単一のext4フォーマットディスクと同等の安全性で十分な場合にのみ使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nodes</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ストレージ構成が適用されるノードのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nowritecache</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ターゲットでの書き込みキャッシュを無効化</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--options</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
NFS/CIFS マウントオプション（<em>man nfs</em>または<em>man mount.cifs</em> を参照）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--password</span> <span class="monospaced">&amp;lt;password&amp;gt;</span></dt>
<dd>
<p>
共有/データストアへのアクセス用パスワード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pool</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
プール。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--port</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - 65535)</span></dt>
<dd>
<p>
デフォルト以外のポートでストレージに接続する場合に使用（例：PBSやESXi）。NFS/CIFSでは、<em>オプションオプションを使用して</em>マウントオプション経由でポートを設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--preallocation</span> <span class="monospaced">&amp;lt;falloc | full | metadata | off&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">metadata</span>)</dt>
<dd>
<p>
raw および qcow2 イメージの事前割り当てモード。raw イメージで<em>メタデータ</em>を使用すると、preallocation=off となります。</p>
</dd>
<dt class="hdlist1">
--prune-backups [keep-all=&amp;lt;1|0&amp;gt;]<span class="monospaced">[,keep-daily=&amp;lt;N&amp;gt;] [,keep-hourly=&amp;lt;N&amp;gt;] [,keep-last=&amp;lt;N&amp;gt;] [,keep-monthly=&amp;lt;N&amp;gt;] [,keep-weekly=&amp;lt;N&amp;gt;] [,keep-yearly=&amp;lt;N&amp;gt;]</span></dt>
<dd>
<p>
保持期間が短いオプションが優先的に処理され、--keep-last が最優先となります。各オプションは特定の期間をカバーします。この期間内のバックアップはこのオプションの対象となります。次のオプションは既にカバーされたバックアップを無視し、より古いバックアップのみを考慮します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--saferemove</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
LV削除時にデータをゼロクリア。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--saferemove_throughput</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
消去スループット（cstream -t パラメータ値）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--server</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
サーバーのIPアドレスまたはDNS名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--shared</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
すべてのノード（または<em>nodes</em>オプションで列挙されたノード）に同一コンテンツを持つ単一ストレージであることを示します。ローカルストレージの内容を他のノードに自動的にアクセス可能にするわけではなく、既に共有されているストレージをそのようにマークするだけです！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--skip-cert-verification</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">false</span>)</dt>
<dd>
<p>
TLS証明書検証を無効化。完全に信頼できるネットワークでのみ有効化すること！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smbversion</span> <span class="monospaced">&amp;lt;2.0 | 2.1 | 3 | 3.0 | 3.11 | default&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">default</span>)</dt>
<dd>
<p>
SMBプロトコルバージョン。設定なしの場合は<em>デフォルトで</em>、クライアントとサーバー双方がサポートする最高位のSMB2+バージョンをネゴシエートする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--snapshot-as-volume-chain</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ボリューム・バッキング・チェーンを介したストレージベンダー非依存のスナップショット作成をサポートする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sparse</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
スパースボリュームを使用する</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--subdir</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
マウントするサブディレクトリ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tagged_only</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
<em>pve-vm-IDタグ</em>が付与された論理ボリュームのみを使用する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--username</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
RBD ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--zfs-base-path</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
作成されたZFSブロックデバイスを検索するベースパス。指定しない場合、作成時に自動設定される。通常は<em>/dev/zvol</em>。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm status</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>すべてのデータストアのステータスを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--content</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
このコンテンツタイプをサポートするストアのみをリスト表示する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--enabled</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定で無効化されていない有効なストアのみを表示する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
フォーマットに関する情報を含める</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--storage</span> <span class="monospaced">&amp;lt;ストレージID&amp;gt;</span></dt>
<dd>
<p>
指定されたストレージのステータスのみを一覧表示</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ターゲットが<em>ノード</em>と異なる場合、<em>このノードと</em>指定<em>ターゲット</em>ノードの両方でコンテンツにアクセス可能な共有ストレージのみをリストします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesm zfsscan</strong></p></div>
<div class="paragraph">
<p><em>pvesm scan zfs</em> の別名。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pvesubscription_strong_proxmox_ve_subscription_manager">
<span>22.4.<strong>pvesubscription</strong>- Proxmox VE サブスクリプションマネージャー</span>
<a class="headerlink" href="#_strong_pvesubscription_strong_proxmox_ve_subscription_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvesubscription</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pvesubscription delete</strong></p></div>
<div class="paragraph">
<p>このノードのサブスクリプションキーを削除します。</p></div>
<div class="paragraph">
<p><strong>pvesubscription get</strong></p></div>
<div class="paragraph">
<p>サブスクリプション情報を読み取ります。</p></div>
<div class="paragraph">
<p><strong>pvesubscription help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定したコマンドのヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesubscription set</strong> <span class="monospaced">&amp;lt;key&amp;gt;</span></p></div>
<div class="paragraph">
<p>サブスクリプションキーを設定します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;key&amp;gt;</span>:<span class="monospaced">\s*pve([1248])([cbsp])-[0-9a-f]{10}\s*</span></dt>
<dd>
<p>
Proxmox VE サブスクリプションキー</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesubscription set-offline-key</strong> <span class="monospaced">&amp;lt;data&amp;gt;</span></p></div>
<div class="paragraph">
<p>内部専用！オフラインキーを設定するには、代わりにパッケージ
proxmox-offline-mirror-helper を使用してください。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;data&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
署名付きサブスクリプション情報ブロブ</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesubscription update</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>サブスクリプション情報を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ローカルキャッシュが有効な場合でも常にサーバーに接続します。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pveperf_strong_proxmox_ve_benchmark_script">
<span>22.5.<strong>pveperf</strong>- Proxmox VE ベンチマークスクリプト</span>
<a class="headerlink" href="#_strong_pveperf_strong_proxmox_ve_benchmark_script" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pveperf</strong> <span class="monospaced">[PATH]</span></p></div>
</div>
<div class="sect2">
<h3 id="_strong_pveceph_strong_manage_ceph_services_on_proxmox_ve_nodes">
<span>22.6.<strong>pveceph</strong>- Proxmox VE ノード上の CEPH サービスを管理</span>
<a class="headerlink" href="#_strong_pveceph_strong_manage_ceph_services_on_proxmox_ve_nodes" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pveceph</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pveceph createmgr</strong></p></div>
<div class="paragraph">
<p><em>pveceph mgr create</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveceph createmon</strong></p></div>
<div class="paragraph">
<p><em>pveceph mon create</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveceph createosd</strong></p></div>
<div class="paragraph">
<p><em>pveceph osd create</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveceph createpool</strong></p></div>
<div class="paragraph">
<p><em>pveceph pool create</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveceph destroymgr</strong></p></div>
<div class="paragraph">
<p><em>pveceph mgr destroy</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveceph destroymon</strong></p></div>
<div class="paragraph">
<p><em>pveceph mon destroy</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveceph destroyosd</strong></p></div>
<div class="paragraph">
<p><em>pveceph osd destroy</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveceph destroypool</strong></p></div>
<div class="paragraph">
<p><em>pveceph pool destroy</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveceph fs create</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>Ceph ファイルシステムを作成します</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--add-storage</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
作成したCephFSをこのクラスターのストレージとして設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--name</span> <span class="monospaced">(?^:^[^:/\s]+$)</span>(<em>デフォルト =</em> <span class="monospaced">cephfs</span>)</dt>
<dd>
<p>
Cephファイルシステム名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_num</span> <span class="monospaced">&amp;lt;integer&amp;gt; (8 - 32768)</span>(<em>デフォルト =</em> <span class="monospaced">128</span>)</dt>
<dd>
<p>
バッキングデータプールの配置グループ数。メタデータプールはこの4分の1を使用する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph fs destroy</strong> <span class="monospaced">&amp;lt;name&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>Ceph ファイルシステムを破棄します</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;name&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
Cephファイルシステム名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove-pools</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このファイルシステム用に設定されたデータプールとメタデータプールを削除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove-storages</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このファイルシステム用に設定されたすべてのpveceph管理ストレージを削除します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定されたコマンドに関するヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph init</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>Cephの初期デフォルト設定を作成し、シンボリックリンクを設定します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--cluster-network</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
別のクラスターネットワークを宣言します。OSDはハートビート、オブジェクトレプリケーション、リカバリトラフィックをこのネットワーク経由でルーティングします</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">network</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--disable_cephx</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
cephx認証を無効化します。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content">cephxは中間者攻撃から保護するセキュリティ機能です。ネットワークがプライベートな場合のみcephxの無効化を検討してください！</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--min_size</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - 7)</span>(<em>デフォルト =</em> <span class="monospaced">2</span>)</dt>
<dd>
<p>
オブジェクトごとの利用可能なレプリカ最小数（I/Oを許可するために必要）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--network</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
すべての Ceph 関連トラフィックに特定のネットワークを使用</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_bits</span> <span class="monospaced">&amp;lt;integer&amp;gt; (6 - 14)</span>(<em>デフォルト =</em> <span class="monospaced">6</span>)</dt>
<dd>
<p>
配置グループビット。デフォルトの配置グループ数を指定するために使用されます。</p>
<div class="paragraph">
<p>非推奨。この設定は最近の Ceph バージョンで非推奨となりました。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--size</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - 7)</span>(<em>デフォルト =</em> <span class="monospaced">3</span>)</dt>
<dd>
<p>
オブジェクトごとの目標レプリカ数</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph install</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>CEPH 関連パッケージをインストールします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--allow-experimental</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
実験的バージョンの使用を許可します。注意して使用してください！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--repository</span> <span class="monospaced">&amp;lt;enterprise | no-subscription | test&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">enterprise</span>)</dt>
<dd>
<p>
使用するCephリポジトリ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--version</span> <span class="monospaced">&amp;lt;squid&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">squid</span>)</dt>
<dd>
<p>
インストールするCephのバージョン。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph lspools</strong></p></div>
<div class="paragraph">
<p><em>pveceph pool ls</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveceph mds create</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>Cephメタデータサーバー（MDS）を作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--hotstandby</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ceph-mdsデーモンがアクティブなMDSのログをポーリングおよび再生するかどうかを決定します。MDS障害時の切り替えは高速化されますが、より多くのアイドルリソースが必要です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--name</span> <span class="monospaced">[a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?</span>(<em>デフォルト =</em> <span class="monospaced">nodename</span>)</dt>
<dd>
<p>
mdsのID。省略時はノード名と同じ</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph mds destroy</strong> <span class="monospaced">&amp;lt;name&amp;gt;</span></p></div>
<div class="paragraph">
<p>Cephメタデータサーバーを破棄</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;name&amp;gt;</span>:<span class="monospaced">[a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?</span></dt>
<dd>
<p>
MDSの名前（ID）</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph mgr create</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>Ceph マネージャーを作成する</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--id</span> <span class="monospaced">[a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?</span></dt>
<dd>
<p>
マネージャーのID。省略時はノード名と同じ</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph mgr destroy</strong> <span class="monospaced">&amp;lt;id&amp;gt;</span></p></div>
<div class="paragraph">
<p>Ceph Manager を破棄します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;id&amp;gt;</span>:<span class="monospaced">[a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?</span></dt>
<dd>
<p>
マネージャーのID</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph mon create</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>Ceph Monitor と Manager の作成</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--mon-address</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
自動検出されたモニターのIPアドレスを上書きします。Cephのパブリックネットワーク内である必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--monid</span> <span class="monospaced">[a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?</span></dt>
<dd>
<p>
モニターのID。省略時はノード名と同じ</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph mon destroy</strong> <span class="monospaced">&amp;lt;monid&amp;gt;</span></p></div>
<div class="paragraph">
<p>Ceph Monitor と Manager を破棄します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;monid&amp;gt;</span>:<span class="monospaced">[a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?</span></dt>
<dd>
<p>
Monitor ID</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph osd create</strong> <span class="monospaced">&amp;lt;dev&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>OSDを作成する</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;dev&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ブロックデバイス名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--crush-device-class</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
crushにおけるOSDのデバイスクラスを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--db_dev</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
block.db のブロックデバイス名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--db_dev_size</span> <span class="monospaced">&amp;lt;number&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">bluestore_block_db_size または OSD サイズの 10%</span>)</dt>
<dd>
<p>
block.dbのサイズ（GiB単位）。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">db_dev</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--encrypted</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
OSDの暗号化を有効化します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--osds-per-device</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span></dt>
<dd>
<p>
物理デバイスごとのOSDサービス数。高速NVMeデバイスでのみ有用"
                    ." 性能をより効果的に活用するため。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--wal_dev</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
block.wal のブロックデバイス名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--wal_dev_size</span> <span class="monospaced">&amp;lt;数値&amp;gt; (0.5 - N)</span>(<em>デフォルト =</em> <span class="monospaced">bluestore_block_wal_size または OSD サイズの 1%</span>)</dt>
<dd>
<p>
block.wal のサイズ（GiB単位）。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">wal_dev</span></td>
</tr></table>
</div>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph osd destroy</strong> <span class="monospaced">&amp;lt;osdid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>OSD を破棄します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;osdid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt;</span></dt>
<dd>
<p>
OSD ID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cleanup</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定されている場合、パーティションテーブルエントリを削除します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph osd details</strong> <span class="monospaced">&amp;lt;osdid&amp;gt;</span> <span class="monospaced">[オプション]</span> <span class="monospaced">[フォーマットオプション]</span></p></div>
<div class="paragraph">
<p>OSDの詳細を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;osdid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
OSDのID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
詳細情報を出力します。json-pretty出力形式と同様です。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph pool create</strong> <span class="monospaced">&amp;lt;name&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>Ceph プールを作成する</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;name&amp;gt;</span>:<span class="monospaced">(?^:^[^:/\s]+$)</span></dt>
<dd>
<p>
プールの名前。一意である必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--add_storages</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0; 誤差訂正符号化プールの場合: 1</span>)</dt>
<dd>
<p>
新しいプールを使用してVMとCTストレージを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--application</span> <span class="monospaced">&amp;lt;cephfs | rbd | rgw&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">rbd</span>)</dt>
<dd>
<p>
プールのアプリケーション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--crush_rule</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
クラスタ内オブジェクト配置のマッピングに使用するルール。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--erasure-coding</span> <span class="monospaced">k=&amp;lt;integer&amp;gt; ,m=&amp;lt;integer&amp;gt; [,device-class=&amp;lt;class&amp;gt;] [,failure-domain=&amp;lt;domain&amp;gt;] [,profile=&amp;lt;profile&amp;gt;]</span></dt>
<dd>
<p>
RBD用にエラー訂正符号化プールを作成し、メタデータ格納用に複製プールを併設する。ECでは、メタデータプールに共通のcephオプション（<em>size</em>、<em>min_size</em>、<em>crush_rule</em>）が適用される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--min_size</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - 7)</span>(<em>デフォルト =</em> <span class="monospaced">2</span>)</dt>
<dd>
<p>
オブジェクトごとの最小レプリカ数</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_autoscale_mode</span> <span class="monospaced">&amp;lt;off | on | warn&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">warn</span>)</dt>
<dd>
<p>
プールの自動PGスケーリングモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_num</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - 32768)</span>(<em>デフォルト =</em> <span class="monospaced">128</span>)</dt>
<dd>
<p>
配置グループの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_num_min</span> <span class="monospaced">&amp;lt;integer&amp;gt; (-N - 32768)</span></dt>
<dd>
<p>
最小配置グループ数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--size</span> <span class="monospaced">&amp;lt;整数&amp;gt; (1 - 7)</span>(<em>デフォルト =</em> <span class="monospaced">3</span>)</dt>
<dd>
<p>
オブジェクトごとのレプリカ数</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target_size</span> <span class="monospaced">^(\d+(\.\d+)?)([KMGT])?$</span></dt>
<dd>
<p>
PGオートスケーラーのプールに対する推定目標サイズ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target_size_ratio</span> <span class="monospaced">&amp;lt;number&amp;gt;</span></dt>
<dd>
<p>
PGオートスケーラーのプール推定目標比率。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph pool destroy</strong> <span class="monospaced">&amp;lt;name&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>プールを破棄します</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;name&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
プールの名前。一意である必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
trueの場合、使用中であってもプールを破棄する</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove_ecprofile</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
エラー訂正コードプロファイルを削除します。該当する場合、デフォルトは true です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove_storages</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このプールに設定されたすべての pveceph 管理ストレージを削除する</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph pool get</strong> <span class="monospaced">&amp;lt;name&amp;gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>現在のプール状態を表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;name&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
プールの名前。一意である必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
有効の場合、追加データ（例：統計情報）を表示します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph pool ls</strong> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>すべてのプールとその設定（POST/PUT エンドポイントで設定可能）を一覧表示します。</p></div>
<div class="paragraph">
<p><strong>pveceph pool set</strong> <span class="monospaced">&amp;lt;name&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>POOL設定を変更します</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;name&amp;gt;</span>:<span class="monospaced">(?^:^[^:/\s]+$)</span></dt>
<dd>
<p>
プールの名前。一意である必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--application</span> <span class="monospaced">&amp;lt;cephfs | rbd | rgw&amp;gt;</span></dt>
<dd>
<p>
プールのアプリケーション。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--crush_rule</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
クラスタ内でのオブジェクト配置マッピングに使用するルール。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--min_size</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - 7)</span></dt>
<dd>
<p>
オブジェクトごとの最小レプリカ数</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_autoscale_mode</span> <span class="monospaced">&amp;lt;off | on | warn&amp;gt;</span></dt>
<dd>
<p>
プールの自動PGスケーリングモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_num</span> <span class="monospaced">&amp;lt;整数&amp;gt; (1 - 32768)</span></dt>
<dd>
<p>
配置グループの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pg_num_min</span> <span class="monospaced">&amp;lt;integer&amp;gt; (-N - 32768)</span></dt>
<dd>
<p>
最小配置グループ数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--size</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - 7)</span></dt>
<dd>
<p>
オブジェクトごとのレプリカ数</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target_size</span> <span class="monospaced">^(\d+(\.\d+)?)([KMGT])?$</span></dt>
<dd>
<p>
PGオートスケーラーのプールに対する推定目標サイズ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target_size_ratio</span> <span class="monospaced">&amp;lt;number&amp;gt;</span></dt>
<dd>
<p>
PGオートスケーラーのプール推定目標比率。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph purge</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>CEPH 関連データおよび設定ファイルを破棄します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--crash</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
さらにCephクラッシュログ（/var/lib/ceph/crash）を削除。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--logs</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
追加でCephログ（/var/log/ceph）を削除。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph start</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>CEPHサービスを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--service</span> <span class="monospaced">(ceph|mon|mds|osd|mgr)(\.[a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?)?</span>(<em>デフォルト =</em> <span class="monospaced">ceph.target</span>)</dt>
<dd>
<p>
Cephサービス名。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveceph status</strong></p></div>
<div class="paragraph">
<p>Ceph のステータスを取得します。</p></div>
<div class="paragraph">
<p><strong>pveceph stop</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>Cephサービスを停止します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--service</span> <span class="monospaced">(ceph|mon|mds|osd|mgr)(\.[a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?)?</span>(<em>default =</em> <span class="monospaced">ceph.target</span>)</dt>
<dd>
<p>
Ceph サービス名。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pvenode_strong_proxmox_ve_node_management">
<span>22.7.<strong>pvenode</strong>- Proxmox VE ノード管理</span>
<a class="headerlink" href="#_strong_pvenode_strong_proxmox_ve_node_management" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvenode</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pvenode acme account deactivate</strong> <span class="monospaced">[&amp;lt;name&amp;gt;]</span></p></div>
<div class="paragraph">
<p>CAで既存のACMEアカウントを無効化します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;name&amp;gt;</span>:<span class="monospaced">&amp;lt;name&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">default</span>)</dt>
<dd>
<p>
ACMEアカウント設定ファイル名。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme account info</strong> <span class="monospaced">[&amp;lt;name&amp;gt;]</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>既存のACMEアカウント情報を返します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;name&amp;gt;</span>:<span class="monospaced">&amp;lt;name&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">default</span>)</dt>
<dd>
<p>
ACMEアカウント設定ファイル名。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme account list</strong></p></div>
<div class="paragraph">
<p>ACMEアカウントインデックス。</p></div>
<div class="paragraph">
<p><strong>pvenode acme account register</strong> <span class="monospaced">[&amp;lt;name&amp;gt;] {&amp;lt;contact&amp;gt;}</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>互換性のある認証局に新しい ACME アカウントを登録します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;name&amp;gt;</span>:<span class="monospaced">&amp;lt;name&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">default</span>)</dt>
<dd>
<p>
ACMEアカウント設定ファイル名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;contact&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
連絡先メールアドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--directory</span> <span class="monospaced">^https?://.*</span></dt>
<dd>
<p>
ACME CAディレクトリエンドポイントのURL。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme account update</strong> <span class="monospaced">[&amp;lt;name&amp;gt;]</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>既存のACMEアカウント情報をCAと更新します。注：新しいアカウント情報を指定しない場合、リフレッシュがトリガーされます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;name&amp;gt;</span>:<span class="monospaced">&amp;lt;name&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">default</span>)</dt>
<dd>
<p>
ACMEアカウント設定ファイル名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--contact</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
連絡先メールアドレス。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme cert order</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ACME互換CAから新規証明書を注文します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
既存のカスタム証明書を上書きする。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme cert renew</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>CA から既存の証明書を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
有効期限まで30日以上ある場合でも更新を強制する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme cert revoke</strong></p></div>
<div class="paragraph">
<p>CA から既存の証明書を失効します。</p></div>
<div class="paragraph">
<p><strong>pvenode acme plugin add</strong> <span class="monospaced">&amp;lt;type&amp;gt; &amp;lt;id&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>ACMEプラグイン設定を追加します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;type&amp;gt;</span>:<span class="monospaced">&amp;lt;dns | standalone&amp;gt;</span></dt>
<dd>
<p>
ACMEチャレンジタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;id&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ACME プラグイン ID 名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--api</span> <span class="monospaced">&amp;lt;1984hosting | acmedns | acmeproxy | active24 | ad | ali | alviy | anx | artfiles | arvan | aurora | autodns | aws | azion | azure | beget | bookmyname | bunny | cf | clouddns | cloudns | cn | conoha | constellix | cpanel | curanet | cyon | da | ddnss | desec | df | dgon | dnsexit | dnshome | dnsimple | dnsservices | doapi | domeneshop | dp | dpi | dreamhost | duckdns | durabledns | dyn | dynu | dynv6 | easydns | edgecenter | edgedns | euserv | exoscale | fornex | freedns | freemyip | gandi_livedns | gcloud | gcore |gd | geoscaling | googledomains | he | he_ddns | hetzner | hexonet | hostingde | huaweicloud | infoblox | infomaniak | internetbs | inwx | ionos | ionos_cloud | ipv64 | ispconfig | jd | joker | kappernet | kas | kinghost | knot | la | leaseweb | lexicon | limacity | linode | linode_v4 | loopia | lua | maradns | me | miab | mijnhost | misaka | myapi | mydevil | mydnsjp | mythic_beasts | namecheap | namecom | namesilo | nanelo | nederhost | neodigit | netcup | netlify | nic | njalla | nm | nsd | nsone | nsupdate | nw | oci | omglol | one | online | openprovider | openstack | opnsense | ovh | pdns | pleskxml | pointhq | porkbun | rackcorp | rackspace | rage4 | rcode0 | regru | scaleway | schlundtech | selectel | selfhost | servercow | simply | technitium | tele3 | tencent | timeweb | transip | udr | ultra | unoeuro | variomedia | veesp| バーセル | ヴースケール | ヴルトル | ウェブサポート | ウェスト_cn | ワールドフォーユー | ヤンデックス360 | ユーシー | ズィローレ | ゾーン | ゾーンエディット | ゾノミ&amp;gt;</span></dt>
<dd>
<p>
APIプラグイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--data</span> <span class="monospaced">1行に1つのキー値ペアを含むファイル。プラグイン設定への保存時にbase64urlエンコードされます。</span></dt>
<dd>
<p>
DNSプラグインデータ（base64エンコード）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--disable</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
設定を無効化するフラグ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nodes</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
クラスタノード名のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--validation-delay</span> <span class="monospaced">&amp;lt;整数&amp;gt; (0 - 172800)</span>(<em>デフォルト =</em> <span class="monospaced">30</span>)</dt>
<dd>
<p>
検証要求前の追加待機時間（秒単位）。DNSレコードの長いTTLに対応可能。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme plugin config</strong> <span class="monospaced">&amp;lt;id&amp;gt;</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>ACME プラグイン設定を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;id&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ACMEプラグインインスタンスの一意の識別子。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme plugin list</strong> <span class="monospaced">[オプション]</span> <span class="monospaced">[フォーマットオプション]</span></p></div>
<div class="paragraph">
<p>ACME プラグインインデックスを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--type</span> <span class="monospaced">&amp;lt;dns | standalone&amp;gt;</span></dt>
<dd>
<p>
特定のタイプのACMEプラグインのみをリスト表示</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme plugin remove</strong> <span class="monospaced">&amp;lt;id&amp;gt;</span></p></div>
<div class="paragraph">
<p>ACMEプラグインの設定を削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;id&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ACMEプラグインインスタンスの一意の識別子。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode acme plugin set</strong> <span class="monospaced">&amp;lt;id&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ACME プラグイン設定を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;id&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ACMEプラグインID名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--api</span> <span class="monospaced">&amp;lt;1984hosting | acmedns | acmeproxy | active24 | ad | ali | alviy | anx | artfiles | arvan | aurora | autodns | aws | azion | azure | beget | bookmyname | bunny | cf | clouddns | cloudns | cn | conoha | constellix | cpanel | curanet | cyon | da | ddnss | desec | df | dgon | dnsexit | dnshome | dnsimple | dnsservices | doapi | domeneshop | dp | dpi | dreamhost | duckdns | durabledns | dyn | dynu | dynv6 | easydns | edgecenter | edgedns | euserv | exoscale | fornex | freedns | freemyip | gandi_livedns | gcloud | gcore |gd | geoscaling | googledomains | he | he_ddns | hetzner | hexonet | hostingde | huaweicloud | infoblox | infomaniak | internetbs | inwx | ionos | ionos_cloud | ipv64 | ispconfig | jd | joker | kappernet | kas | kinghost | knot | la | leaseweb | lexicon | limacity | linode | linode_v4 | loopia | lua | maradns | me | miab | mijnhost | misaka | myapi | mydevil | mydnsjp | mythic_beasts | namecheap | namecom | namesilo | nanelo | nederhost | neodigit | netcup | netlify | nic | njalla | nm | nsd | nsone | nsupdate | nw | oci | omglol | one | online | openprovider | openstack | opnsense | ovh | pdns | pleskxml | pointhq | porkbun | rackcorp | rackspace | rage4 | rcode0 | regru | scaleway | schlundtech | selectel | selfhost | servercow | simply | technitium | tele3 | tencent | timeweb | transip | udr | ultra | unoeuro | variomedia | veesp| バーセル | ヴースケール | ヴルトル | ウェブサポート | ウェスト_cn | ワールドフォーユー | ヤンデックス360 | ユーシー | ズィローレ | ゾーン | ゾーンエディット | ゾノミ&amp;gt;</span></dt>
<dd>
<p>
APIプラグイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--data</span> <span class="monospaced">1行に1組のキーと値を記述したファイル。プラグイン設定への保存時にbase64urlエンコードされます。</span></dt>
<dd>
<p>
DNSプラグインデータ（base64エンコード済み）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
現在の設定ファイルのダイジェストが異なる場合、変更を防止します。これにより同時編集を防止できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--disable</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
設定を無効化するフラグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nodes</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
クラスタノード名のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--validation-delay</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - 172800)</span>(<em>デフォルト =</em> <span class="monospaced">30</span>)</dt>
<dd>
<p>
検証要求前の追加待機時間（秒単位）。DNSレコードの長いTTLに対応可能。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode cert delete</strong> <span class="monospaced">[&amp;lt;restart&amp;gt;]</span></p></div>
<div class="paragraph">
<p>カスタム証明書チェーンと鍵を削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;restart&amp;gt;</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
pveproxyを再起動します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode cert info</strong> <span class="monospaced">[フォーマットオプション]</span></p></div>
<div class="paragraph">
<p>ノードの証明書に関する情報を取得します。</p></div>
<div class="paragraph">
<p><strong>pvenode cert set</strong> <span class="monospaced">&amp;lt;certificates&amp;gt; [&amp;lt;key&amp;gt;]</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>カスタム証明書チェーンとキーをアップロードまたは更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;certificates&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
PEMエンコードされた証明書（チェーン）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;key&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
PEMエンコードされた秘密鍵。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
既存のカスタム証明書またはACME証明書ファイルを上書きします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--restart</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
pveproxyを再起動します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode config get</strong> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>ノード設定オプションを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--property</span> <span class="monospaced">&amp;lt;acme | acmedomain0 | acmedomain1 | acmedomain2 | acmedomain3 | acmedomain4 | acmedomain5 | ballooning-target | description | startall-onboot-delay | wakeonlan&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">all</span>)</dt>
<dd>
<p>
ノード設定から特定のプロパティのみを返す。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode config set</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ノード設定オプションを設定します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--acme</span> <span class="monospaced">[account=&amp;lt;name&amp;gt;] [,domains=&amp;lt;domain[;domain;...]&amp;gt;]</span></dt>
<dd>
<p>
ノード固有のACME設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--acmedomain[n]</span> <span class="monospaced">[domain=]&amp;lt;domain&amp;gt; [,alias=&amp;lt;domain&amp;gt;] [,plugin=&amp;lt;plugin設定ファイル名&amp;gt;]</span></dt>
<dd>
<p>
ACMEドメインおよび検証プラグイン</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ballooning-target</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - 100)</span>(<em>デフォルト =</em> <span class="monospaced">80</span>)</dt>
<dd>
<p>
バルーニングのRAM使用量目標（総メモリのパーセント）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--description</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ノードの説明。Webインターフェースのノードノートパネルに表示されます。設定ファイル内にコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
現在の設定ファイルのSHA1ダイジェストが異なる場合、変更を防止します。同時編集を防ぐために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startall-onboot-delay</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - 300)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
起動時に有効なすべての仮想ゲストを起動するまでの初期遅延（秒単位）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--wakeonlan</span> <span class="monospaced">[mac=]&amp;lt;MACアドレス&amp;gt; [,bind-interface=&amp;lt;バインドインターフェース&amp;gt;] [,broadcast-address=&amp;lt;IPv4ブロードキャストアドレス&amp;gt;]</span></dt>
<dd>
<p>
ノード固有のWake on LAN設定。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;配列&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode migrateall</strong> <span class="monospaced">&amp;lt;target&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>すべての仮想マシンとコンテナを移行します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;ターゲット&amp;gt;</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
ターゲットノード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--maxworkers</span> <span class="monospaced">&amp;lt;整数&amp;gt; (1 - N)</span></dt>
<dd>
<p>
並列移行ジョブの最大数。設定されていない場合、datacenter.cfgの'max_workers'を使用。いずれか一方を設定必須！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vms</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
これらのIDを持つゲストのみを考慮する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--with-local-disks</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ローカルディスクのライブストレージ移行を有効化</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode startall</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>このノード上のすべての VM とコンテナを起動します（デフォルトでは onboot=1 のもののみ）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">off</span>)</dt>
<dd>
<p>
仮想ゲストの<em>onbootが</em>設定されていない、またはオフに設定されている場合でもstartコマンドを発行する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vms</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
このカンマ区切りリストのVMIDを持つゲストのみを考慮する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode stopall</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>すべての VM とコンテナを停止します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--force-stop</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
タイムアウト後に強制停止を実行する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--timeout</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - 7200)</span>(<em>デフォルト =</em> <span class="monospaced">180</span>)</dt>
<dd>
<p>
各ゲストシャットダウンタスクのタイムアウト。<span class="monospaced">強制停止設定</span>に応じて、シャットダウンは単純に中止されるか、強制停止が実行される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vms</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
これらのIDを持つゲストのみを考慮する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode task list</strong> <span class="monospaced">[オプション]</span> <span class="monospaced">[フォーマットオプション]</span></p></div>
<div class="paragraph">
<p>1ノードのタスクリスト（完了タスク）を読み込みます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--errors</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ステータスがERRORのタスクのみをリストする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--limit</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">50</span>)</dt>
<dd>
<p>
この数のタスクのみをリストする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--since</span> <span class="monospaced">&amp;lt;integer&amp;gt;</span></dt>
<dd>
<p>
このUNIXエポック以降のタスクのみをリストする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--source</span> <span class="monospaced">&amp;lt;active | all | archive&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">archive</span>)</dt>
<dd>
<p>
アーカイブ済み、アクティブ、または全タスクを表示。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--start</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このオフセットから始まるタスクを一覧表示する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--statusfilter</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
返されるべきタスク状態のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--typefilter</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
このタイプのタスクのみを表示（例：vzstart、vzdump）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--until</span> <span class="monospaced">&amp;lt;整数&amp;gt;</span></dt>
<dd>
<p>
このUNIXエポックまでのタスクのみをリスト表示する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--userfilter</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
このユーザーからのタスクのみをリストします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmid</span> <span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
このVMのタスクのみをリストします。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode task log</strong> <span class="monospaced">&amp;lt;upid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>タスクログを読み込みます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;upid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
タスクの一意のID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--download</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
タスクリグファイルをダウンロードするかどうか。このパラメータは他のパラメータと併用できません</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--start</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
タスクログを読み込む際の開始行</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode task status</strong> <span class="monospaced">&amp;lt;upid&amp;gt;</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>タスクのステータスを読み取ります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;upid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
タスクの一意のID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvenode wakeonlan</strong> <span class="monospaced">&amp;lt;node&amp;gt;</span></p></div>
<div class="paragraph">
<p><em>Wake on LAN</em>ネットワークパケットでノードを起動を試みます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;node&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
Wake on LANパケットのターゲットノード</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pvesh_strong_shell_interface_for_the_proxmox_ve_api">
<span>22.8.<strong>pvesh</strong>- Proxmox VE API 用シェルインターフェース</span>
<a class="headerlink" href="#_strong_pvesh_strong_shell_interface_for_the_proxmox_ve_api" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvesh</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pvesh create</strong> <span class="monospaced">&amp;lt;api_path&amp;gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>&amp;lt;api_path&amp;gt; で API POST を呼び出す。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;api_path&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
APIパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--noproxy</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
自動プロキシ機能を無効化。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesh delete</strong> <span class="monospaced">&amp;lt;api_path&amp;gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>&amp;lt;api_path&amp;gt; で API DELETE を呼び出します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;api_path&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
APIパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--noproxy</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
自動プロキシ機能を無効化。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesh get</strong> <span class="monospaced">&amp;lt;api_path&amp;gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>&amp;lt;api_path&amp;gt; で API GET を呼び出します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;api_path&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
APIパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--noproxy</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
自動プロキシ機能を無効化します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesh help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定されたコマンドに関するヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesh ls</strong> <span class="monospaced">&amp;lt;api_path&amp;gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>&amp;lt;api_path&amp;gt; 上の子オブジェクトを一覧表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;api_path&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
APIパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--noproxy</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
自動プロキシ機能を無効化します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesh set</strong> <span class="monospaced">&amp;lt;api_path&amp;gt;</span> <span class="monospaced">[オプション]</span> <span class="monospaced">[フォーマットオプション]</span></p></div>
<div class="paragraph">
<p>&amp;lt;api_path&amp;gt; で API PUT を呼び出します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;api_path&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
APIパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--noproxy</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
自動プロキシ機能を無効化。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesh usage</strong> <span class="monospaced">&amp;lt;api_path&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>&amp;lt;api_path&amp;gt; の API 使用情報を表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;api_path&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
APIパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--command</span> <span class="monospaced">&amp;lt;create | delete | get | set&amp;gt;</span></dt>
<dd>
<p>
APIコマンド。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--returns</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
返されるデータのスキーマを含める。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_qm_strong_qemu_kvm_virtual_machine_manager">
<span>22.9.<strong>qm</strong>- QEMU/KVM仮想マシンマネージャー</span>
<a class="headerlink" href="#_strong_qm_strong_qemu_kvm_virtual_machine_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>qm</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>qm agent</strong></p></div>
<div class="paragraph">
<p><em>qm guest コマンド</em>の別名。</p></div>
<div class="paragraph">
<p><strong>qm cleanup</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;clean-shutdown&amp;gt; &amp;lt;guest-requested&amp;gt;</span></p></div>
<div class="paragraph">
<p>タップデバイス、vgpuなどのリソースをクリーンアップします。VMのシャットダウン後やクラッシュ後に呼び出されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;clean-shutdown&amp;gt;</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
qemuが正常にシャットダウンしたかどうかを示す。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;guest-requested&amp;gt;</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
シャットダウンがゲスト側からの要求かqmp経由かを示す。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm clone</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;newid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>仮想マシン/テンプレートのコピーを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;newid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
クローン元のVMID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定からのクローン制限</span>)</dt>
<dd>
<p>
I/O帯域幅制限の上書き（KiB/s単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--description</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
新規VMの説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&amp;lt;qcow2 | raw | vmdk&amp;gt;</span></dt>
<dd>
<p>
ファイルストレージのターゲット形式。完全クローン時のみ有効。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--full</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
すべてのディスクの完全なコピーを作成します。通常のVMをクローンする場合、常にこの操作が行われます。VMテンプレートの場合、デフォルトではリンククローンを作成しようとします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--name</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
新しいVMの名前を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pool</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
新しい VM を指定のプールに追加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--snapname</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--storage</span> <span class="monospaced">&amp;lt;ストレージID&amp;gt;</span></dt>
<dd>
<p>
フルクローン用のターゲットストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ターゲットノード。元の仮想マシンが共有ストレージ上にある場合にのみ許可されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm cloudinit dump</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;type&amp;gt;</span></p></div>
<div class="paragraph">
<p>自動生成された cloudinit 設定を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;type&amp;gt;</span>:<span class="monospaced">&amp;lt;meta | network | user&amp;gt;</span></dt>
<dd>
<p>
構成タイプ。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm cloudinit pending</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>現在の値と保留中の値の両方を含むcloudinit設定を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm cloudinit update</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>cloudinit設定ドライブを再生成して変更します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm config</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>保留中の設定変更を適用した仮想マシンの設定を取得します。
代わりに現在の設定を取得するには、<em>現在の</em>パラメータを設定してください。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--current</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
現在の値を取得（保留中の値ではなく）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--snapshot</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
指定されたスナップショットから設定値を取得する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm create</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>仮想マシンを作成または復元します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--acpi</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ACPIを有効/無効にする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--affinity</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ゲストプロセス実行に使用されるホストコアのリスト。例: 0,5,8-11</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--agent</span> <span class="monospaced">[enabled=]&amp;lt;1|0&amp;gt; [,freeze-fs-on-backup=&amp;lt;1|0&amp;gt;] [,fstrim_cloned_disks=&amp;lt;1|0&amp;gt;] [,type=&amp;lt;virtio|isa&amp;gt;]</span></dt>
<dd>
<p>
QEMUゲストエージェントとの通信の有効化/無効化とそのプロパティ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--amd-sev</span> <span class="monospaced">[type=]&amp;lt;sev-type&amp;gt; [,allow-smt=&amp;lt;1|0&amp;gt;] [,kernel-hashes=&amp;lt;1|0&amp;gt;] [,no-debug=&amp;lt;1|0&amp;gt;] [,no-key-sharing=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
AMD CPUによるセキュア暗号化仮想化（SEV）機能</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--arch</span> <span class="monospaced">&amp;lt;aarch64 | x86_64&amp;gt;</span></dt>
<dd>
<p>
仮想プロセッサアーキテクチャ。デフォルトはホスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--archive</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
バックアップアーカイブ。
.tar または .vma ファイルへのファイルシステムパス（<em>-</em>を使用して標準入力からデータをパイプ）または Proxmox ストレージバックアップボリューム識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--args</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
KVMに渡される任意の引数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--audio0</span> <span class="monospaced">device=&amp;lt;ich9-intel-hda|intel-hda|AC97&amp;gt; [,driver=&amp;lt;spice|none&amp;gt;]</span></dt>
<dd>
<p>
オーディオデバイスを設定します。QXL/Spiceとの組み合わせで有用です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--autostart</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
クラッシュ後の自動再起動（現在は無視される）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--balloon</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
VMのターゲットRAM容量（MiB単位）。0を指定するとballonドライバが無効化される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bios</span> <span class="monospaced">&amp;lt;ovmf | seabios&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">seabios</span>)</dt>
<dd>
<p>
BIOS実装の選択。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--boot</span> <span class="monospaced">[[legacy=]&amp;lt;[acdn]{1,4}&amp;gt;] [,order=&amp;lt;device[;device...]&amp;gt;]</span></dt>
<dd>
<p>
ゲストブート順序を指定。<em>order=サブプロパティ</em>を使用。キーなしまた<em>はlegacy=</em>の使用は非推奨。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bootdisk</span> <span class="monospaced">(ide|sata|scsi|virtio)\d+</span></dt>
<dd>
<p>
指定ディスクからの起動を有効化。非推奨：代わりに<em>boot: order=foo;bar</em>を使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&amp;lt;整数&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定から制限を復元</span>)</dt>
<dd>
<p>
I/O帯域幅制限（KiB/s単位）を上書き。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cdrom</span> <span class="monospaced">&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
これはオプション -ide2 の別名です</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cicustom</span> <span class="monospaced">[meta=&amp;lt;ボリューム&amp;gt;] [,network=&amp;lt;ボリューム&amp;gt;] [,user=&amp;lt;ボリューム&amp;gt;] [,vendor=&amp;lt;ボリューム&amp;gt;]</span></dt>
<dd>
<p>
cloud-init: 起動時に自動生成されるファイルを置き換えるカスタムファイルを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cipassword</span> <span class="monospaced">&amp;lt;password&amp;gt;</span></dt>
<dd>
<p>
cloud-init: ユーザーに割り当てるパスワード。一般的に推奨されません。代わりにSSHキーを使用してください。また、古いcloud-initバージョンはハッシュ化されたパスワードをサポートしません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--citype</span> <span class="monospaced">&amp;lt;configdrive2 | nocloud | opennebula&amp;gt;</span></dt>
<dd>
<p>
cloud-init設定フォーマットを指定します。デフォルトは設定済みOSタイプ（<span class="monospaced">ostype</span>）に依存します。Linux<span class="monospaced">ではnocloud</span>フォーマット、Windowsでは<span class="monospaced">configdrive2フォーマット</span>を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ciupgrade</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
cloud-init: 初回起動後に自動パッケージアップグレードを実行します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ciuser</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
cloud-init: イメージのデフォルトユーザーではなく、SSHキーとパスワードを変更するユーザー名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cores</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span>(<em>default =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ソケットあたりのコア数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpu</span> <span class="monospaced">[[cputype=]&amp;lt;文字列&amp;gt;] [,flags=&amp;lt;+フラグ[;-フラグ...]&amp;gt;] [,hidden=&amp;lt;1|0&amp;gt;][,hv-vendor-id=&amp;lt;ベンダーID&amp;gt;] [,phys-bits=&amp;lt;8-64|ホスト&amp;gt;] [,reported-model=&amp;lt;列挙型&amp;gt;]</span></dt>
<dd>
<p>
エミュレートするCPUタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpulimit</span> <span class="monospaced">&amp;lt;number&amp;gt; (0 - 128)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用率の上限。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpuunits</span> <span class="monospaced">&amp;lt;整数&amp;gt; (1 - 262144)</span>(<em>デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
VMのCPUウェイト。cgroup v2では[1, 10000]に制限されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--description</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
VMの説明。WebインターフェースのVM概要に表示されます。設定ファイル内にコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--efidisk0</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,efitype=&amp;lt;2m|4m&amp;gt;] [,format=&amp;lt;列挙型&amp;gt;] [,import-from=&amp;lt;ソースボリューム&amp;gt;] [,pre-enrolled-keys=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;ディスクサイズ&amp;gt;]</span></dt>
<dd>
<p>
EFI変数保存用ディスクの設定。新規ボリュームの割り当てには特殊構文 STORAGE_ID:SIZE_IN_GiB を使用。SIZE_IN_GiB は無視され、代わりにデフォルトのEFI変数がボリュームにコピーされる。既存ボリュームからのインポートには STORAGE_ID:0 と<em>import-from</em>パラメータを使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
既存のVMを上書きすることを許可します。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">archive</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--freeze</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
起動時にCPUを凍結（<em>c</em>monitorコマンドで実行を開始）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hookscript</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
VMのライフサイクルにおける様々な段階で実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hostpci[n]</span> <span class="monospaced">[[host=]&amp;lt;HOSTPCIID[;HOSTPCIID2...]&amp;gt;] [,device-id=&amp;lt;hex id&amp;gt;] [,legacy-igd=&amp;lt;1|0&amp;gt;][,mapping=&amp;lt;mapping-id&amp;gt;] [,mdev=&amp;lt;string&amp;gt;] [,pcie=&amp;lt;1|0&amp;gt;] [,rombar=&amp;lt;1|0&amp;gt;][,romfile=&amp;lt;string&amp;gt;] [,sub-device-id=&amp;lt;hex id&amp;gt;] [,sub-vendor-id=&amp;lt;hex id&amp;gt;] [,vendor-id=&amp;lt;hex id&amp;gt;] [,x-vga=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
ホストの PCI デバイスをゲストにマッピングします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hotplug</span> <span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">network,disk,usb</span>)</dt>
<dd>
<p>
ホットプラグ機能を選択的に有効化。以下のカンマ区切りリストで指定：<em>network</em>,<em>disk</em>,<em>cpu</em>,<em>memory</em>,<em>usb</em>,<em>cloudinit</em>。<em>0で完全</em>無効化。<em>1は</em>デフォルト設定<span class="monospaced">（network,disk,usb）</span>の別名。USBホットプラグはマシンバージョン7.1以上かつostype l26、またはWindows 7以降で可能。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hugepages</span> <span class="monospaced">&amp;lt;1024 | 2 | any&amp;gt;</span></dt>
<dd>
<p>
巨大ページメモリを有効/無効化します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ide[n]</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,aio=&amp;lt;ネイティブ|スレッド|io_uring&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;秒&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;seconds&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;seconds&amp;gt;] [,cache=&amp;lt;enum&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;][,破棄=&amp;lt;無視|有効&amp;gt;] [,フォーマット=&amp;lt;列挙型&amp;gt;] [,インポート元=&amp;lt;ソースボリューム&amp;gt;] [,I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数持続時間=&amp;lt;秒&amp;gt;][,iops_rd=&amp;lt;iops&amp;gt;] [,iops_rd_max=&amp;lt;iops&amp;gt;] [,iops_rd_max_length=&amp;lt;seconds&amp;gt;] [,iops_wr=&amp;lt;iops&amp;gt;] [,iops_wr_max=&amp;lt;iops&amp;gt;][,iops_wr_max_length=&amp;lt;seconds&amp;gt;] [,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;] [,mbps_wr=&amp;lt;mbps&amp;gt;][,mbps_wr_max=&amp;lt;mbps&amp;gt;] [,media=&amp;lt;cdrom|disk&amp;gt;] [,model=&amp;lt;model&amp;gt;] [,replicate=&amp;lt;1|0&amp;gt;] [,rerror=&amp;lt;ignore|report|stop&amp;gt;] [,serial=&amp;lt;serial&amp;gt;][,共有=&amp;lt;1|0&amp;gt;] [,サイズ=&amp;lt;ディスクサイズ&amp;gt;] [,スナップショット=&amp;lt;1|0&amp;gt;] [,SSD=&amp;lt;1|0&amp;gt;] [,書き込みエラー=&amp;lt;列挙型&amp;gt;] [,WWN=&amp;lt;WWN&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをIDEハードディスクまたはCD-ROMとして使用（nは0～3）。新規ボリュームの割り当てには特殊構文STORAGE_ID:SIZE_IN_GiBを使用。既存ボリュームからのインポートにはSTORAGE_ID:<em>0とimport-from</em>パラメータを使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--import-working-storage</span> <span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
<em>イメージ</em>コンテンツタイプを有効にしたファイルベースストレージ。インポート時の中間抽出ストレージとして使用される。デフォルトはソースストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ipconfig[n]</span> <span class="monospaced">[gw=&amp;lt;GatewayIPv4&amp;gt;] [,gw6=&amp;lt;GatewayIPv6&amp;gt;] [,ip=&amp;lt;IPv4Format/CIDR&amp;gt;] [,ip6=&amp;lt;IPv6Format/CIDR&amp;gt;]</span></dt>
<dd>
<p>
cloud-init: 対応するインターフェースのIPアドレスとゲートウェイを指定します。</p>
<div class="paragraph">
<p>IP アドレスは CIDR 表記を使用し、ゲートウェイはオプションですが、同じタイプの IP を指定する必要があります。</p></div>
<div class="paragraph">
<p>IP アドレスに DHCP を使用するには、特別な文字列<em>dhcp</em>を使用できます。この場合、明示的な
ゲートウェイは指定しないでください。
IPv6 では、特別な文字列<em>auto</em>を使用してステートレス自動設定を使用できます。これには
cloud-init 19.4 以降が必要です。</p></div>
<div class="paragraph">
<p>cloud-init が有効で IPv4 アドレスも IPv6 アドレスも指定されていない場合、デフォルトで IPv4 の dhcp が使用されます。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ivshmem</span> <span class="monospaced">size=&amp;lt;integer&amp;gt; [,name=&amp;lt;string&amp;gt;]</span></dt>
<dd>
<p>
VM間共有メモリ。VM間またはホストとの直接通信に有用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keephugepages</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
hugepages と併用します。有効化すると、VM シャットダウン後も hugepages が削除されず、以降の起動で使用可能になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keyboard</span> <span class="monospaced">&amp;lt;da | de | de-ch | en-gb | en-us | es | fi | fr | fr-be | fr-ca | fr-ch | hu | is | it | ja | lt | mk | nl | no | pl | pt | pt-br | sl | sv | tr&amp;gt;</span></dt>
<dd>
<p>
VNCサーバーのキーボードレイアウト。通常は不要であり、ゲストOS内で設定する方が望ましい場合が多い。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--kvm</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
KVMハードウェア仮想化の有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--live-restore</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
インポートまたは復元をバックグラウンドで実行しながら、VMを直ちに起動します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--localtime</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
リアルタイムクロック（RTC）を現地時間に設定します。<span class="monospaced">OSタイプがMicrosoft</span>Windows OSを示す場合、デフォルトで有効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lock</span> <span class="monospaced">&amp;lt;backup | clone | create | migrate | rollback | snapshot | snapshot-delete | suspended | suspending&amp;gt;</span></dt>
<dd>
<p>
VMをロック/ロック解除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--machine</span> <span class="monospaced">[[type=]&amp;lt;マシンタイプ&amp;gt;] [,enable-s3=&amp;lt;1|0&amp;gt;] [,enable-s4=&amp;lt;1|0&amp;gt;] [,viommu=&amp;lt;intel|virtio&amp;gt;]</span></dt>
<dd>
<p>
QEMUマシンを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--memory</span> <span class="monospaced">[current=]&amp;lt;integer&amp;gt;</span></dt>
<dd>
<p>
メモリのプロパティ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migrate_downtime</span> <span class="monospaced">&amp;lt;数値&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0.1</span>)</dt>
<dd>
<p>
移行時の最大許容ダウンタイム（秒単位）を設定します。移行終了間際に、新規に更新されたRAMの転送量が多すぎて収束できない場合、移行が収束できるまで制限値が段階的に自動的に増加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--移行速度</span> <span class="monospaced">&amp;lt;整数&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
移行の最大速度（MB/s単位）を設定します。値0は制限なしを意味します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--name</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
VMの名前を設定します。設定Webインターフェースでのみ使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nameserver</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
cloud-init: コンテナのDNSサーバーIPアドレスを設定します。searchdomainとnameserverの両方が設定されていない場合、作成時にはホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--net[n]</span> <span class="monospaced">[model=]&amp;lt;enum&amp;gt; [,bridge=&amp;lt;bridge&amp;gt;] [,firewall=&amp;lt;1|0&amp;gt;] [,link_down=&amp;lt;1|0&amp;gt;] [,macaddr=&amp;lt;XX:XX:XX:XX:XX:XX&amp;gt;] [,mtu=&amp;lt;integer&amp;gt;][,queues=&amp;lt;integer&amp;gt;] [,rate=&amp;lt;number&amp;gt;] [,tag=&amp;lt;integer&amp;gt;] [,trunks=&amp;lt;vlanid[;vlanid...]&amp;gt;] [,&amp;lt;model&amp;gt;=&amp;lt;macaddr&amp;gt;]</span></dt>
<dd>
<p>
ネットワークデバイスを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--numa</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
NUMAの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--numa[n]</span> <span class="monospaced">cpus=&amp;lt;id[-id];...&amp;gt; [,hostnodes=&amp;lt;id[-id];...&amp;gt;] [,memory=&amp;lt;number&amp;gt;] [,policy=&amp;lt;preferred|bind|interleave&amp;gt;]</span></dt>
<dd>
<p>
NUMAトポロジー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--onboot</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時にVMを起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ostype</span> <span class="monospaced">&amp;lt;l24 | l26 | other | solaris | w2k | w2k3 | w2k8 | win10 | win11 | win7 | win8 | wvista | wxp&amp;gt;</span></dt>
<dd>
<p>
ゲストオペレーティングシステムを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--parallel[n]</span> <span class="monospaced">/dev/parport\d+|/dev/usb/lp\d+</span></dt>
<dd>
<p>
ホスト並列デバイスをマッピング（nは0～2）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pool</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
指定されたプールにVMを追加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--protection</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
VMの保護フラグを設定します。これにより、VMの削除およびディスク削除操作が無効化されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--reboot</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
再起動を許可します。<em>0</em>に設定すると、再起動時にVMが終了します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rng0</span> <span class="monospaced">[source=]&amp;lt;/dev/urandom|/dev/random|/dev/hwrng&amp;gt; [,max_bytes=&amp;lt;integer&amp;gt;] [,period=&amp;lt;integer&amp;gt;]</span></dt>
<dd>
<p>
VirtIOベースの乱数生成器を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sata[n]</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,aio=&amp;lt;ネイティブ|スレッド|io_uring&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;秒&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;seconds&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;seconds&amp;gt;] [,cache=&amp;lt;enum&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;][,破棄=&amp;lt;無視|有効&amp;gt;] [,フォーマット=&amp;lt;列挙型&amp;gt;] [,インポート元=&amp;lt;ソースボリューム&amp;gt;] [,I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数持続時間=&amp;lt;秒&amp;gt;][,iops_rd=&amp;lt;iops&amp;gt;] [,iops_rd_max=&amp;lt;iops&amp;gt;] [,iops_rd_max_length=&amp;lt;seconds&amp;gt;] [,iops_wr=&amp;lt;iops&amp;gt;] [,iops_wr_max=&amp;lt;iops&amp;gt;][,iops_wr_max_length=&amp;lt;seconds&amp;gt;] [,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;] [,mbps_wr=&amp;lt;mbps&amp;gt;][,書き込み最大Mb/秒&amp;lt;Mb/秒&amp;gt;] [,メディア&amp;lt;CD-ROM|ディスク&amp;gt;] [,レプリケーション&amp;lt;1|0&amp;gt;] [,再エラー&amp;lt;無視|報告|停止&amp;gt;] [,シリアル&amp;lt;シリアル&amp;gt;] [,共有&amp;lt;1|0&amp;gt;][,size=&amp;lt;DiskSize&amp;gt;] [,snapshot=&amp;lt;1|0&amp;gt;] [,ssd=&amp;lt;1|0&amp;gt;] [,werror=&amp;lt;enum&amp;gt;] [,wwn=&amp;lt;wwn&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをSATAハードディスクまたはCD-ROMとして使用（nは0～5）。新規ボリュームの割り当てには特殊構文STORAGE_ID:SIZE_IN_GiBを使用。既存ボリュームからのインポートにはSTORAGE_ID:<em>0とimport-from</em>パラメータを使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scsi[n]</span> <span class="monospaced">[file=]&amp;lt;volume&amp;gt; [,aio=&amp;lt;native|threads|io_uring&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;seconds&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;seconds&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;seconds&amp;gt;] [,cache=&amp;lt;enum&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;][,破棄=&amp;lt;無視|有効&amp;gt;] [,フォーマット=&amp;lt;列挙型&amp;gt;] [,インポート元=&amp;lt;ソースボリューム&amp;gt;] [,I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数持続時間=&amp;lt;秒&amp;gt;][,iops_rd=&amp;lt;iops&amp;gt;] [,iops_rd_max=&amp;lt;iops&amp;gt;] [,iops_rd_max_length=&amp;lt;seconds&amp;gt;] [,iops_wr=&amp;lt;iops&amp;gt;] [,iops_wr_max=&amp;lt;iops&amp;gt;][,iops_wr_max_length=&amp;lt;秒数&amp;gt;] [,iothread=&amp;lt;1|0&amp;gt;] [,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;][,書き込みMbps&amp;lt;Mbps&amp;gt;] [,書き込みMbps上限&amp;lt;Mbps&amp;gt;] [,メディア&amp;lt;CD-ROM|ディスク&amp;gt;] [,製品&amp;lt;製品名&amp;gt;] [,キュー数&amp;lt;整数&amp;gt;] [,レプリケーション&amp;lt;1|0&amp;gt;][,rerror=&amp;lt;無視|報告|停止&amp;gt;] [,ro=&amp;lt;1|0&amp;gt;] [,scsiblock=&amp;lt;1|0&amp;gt;] [,serial=&amp;lt;シリアル番号&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;][,size=&amp;lt;DiskSize&amp;gt;] [,snapshot=&amp;lt;1|0&amp;gt;] [,ssd=&amp;lt;1|0&amp;gt;] [,vendor=&amp;lt;vendor&amp;gt;] [,werror=&amp;lt;enum&amp;gt;] [,wwn=&amp;lt;wwn&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをSCSIハードディスクまたはCD-ROMとして使用（nは0～30）。新規ボリュームの割り当てには特殊構文STORAGE_ID:SIZE_IN_GiBを使用。既存ボリュームからのインポートにはSTORAGE_ID:<em>0とimport-from</em>パラメータを使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scsihw</span> <span class="monospaced">&amp;lt;lsi | lsi53c810 | megasas | pvscsi | virtio-scsi-pci | virtio-scsi-single&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">lsi</span>)</dt>
<dd>
<p>
SCSIコントローラモデル</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--searchdomain</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
cloud-init: コンテナのDNS検索ドメインを設定します。searchdomainもnameserverも設定されていない場合、作成時はホストの設定を自動的に使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--serial[n]</span> <span class="monospaced">(/dev/.+|socket)</span></dt>
<dd>
<p>
VM内にシリアルデバイスを作成（nは0～3）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--shares</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - 50000)</span>(<em>デフォルト =</em> <span class="monospaced">1000</span>)</dt>
<dd>
<p>
自動バルーニング用のメモリシェア量。数値が大きいほど、このVMが割り当てられるメモリが増加します。数値は他の稼働中の全VMのウェイトに対する相対値です。0を使用すると自動バルーニングが無効化されます。自動バルーニングはpvestatdによって実行されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smbios1</span> <span class="monospaced">[base64=&amp;lt;1|0&amp;gt;] [,family=&amp;lt;Base64エンコード文字列&amp;gt;] [,manufacturer=&amp;lt;Base64エンコード文字列&amp;gt;][,product=&amp;lt;Base64エンコード文字列&amp;gt;] [,serial=&amp;lt;Base64エンコード文字列&amp;gt;] [,sku=&amp;lt;Base64エンコード文字列&amp;gt;] [,uuid=&amp;lt;UUID&amp;gt;] [,version=&amp;lt;Base64エンコード文字列&amp;gt;]</span></dt>
<dd>
<p>
SMBIOSタイプ1フィールドを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smp</span> <span class="monospaced">&amp;lt;整数&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPUの数。代わりに-socketsオプションを使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sockets</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPUソケットの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--spice_enhancements</span> <span class="monospaced">[foldersharing=&amp;lt;1|0&amp;gt;] [,videostreaming=&amp;lt;off|all|filter&amp;gt;]</span></dt>
<dd>
<p>
SPICEの追加機能設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sshkeys</span> <span class="monospaced">&amp;lt;ファイルパス&amp;gt;</span></dt>
<dd>
<p>
cloud-init: 公開SSHキーを設定（1行に1キー、OpenSSH形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--start</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
VMの作成成功後に起動します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startdate</span> <span class="monospaced">(now | YYYY-MM-DD | YYYY-MM-DDTHH:MM:SS)</span>(<em>デフォルト =</em> <span class="monospaced">now</span>)</dt>
<dd>
<p>
リアルタイムクロックの初期日付を設定します。日付の有効な形式は次の通りです：'now' または<em>2006-06-17T16:01:21</em>または<em>2006-06-17</em>。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startup</span>`[[order=]\d+] [,up=\d+] [,down=\d+] ` </dt>
<dd>
<p>
起動およびシャットダウンの動作。順序は起動の一般的な順序を定義する非負の数値です。シャットダウンは逆順序で行われます。さらに、<em>アップ</em>または<em>ダウンの</em>遅延を秒単位で設定でき、これは次のVMが起動または停止されるまでの待機時間を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--storage</span> <span class="monospaced">&amp;lt;ストレージID&amp;gt;</span></dt>
<dd>
<p>
デフォルトストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tablet</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
USBタブレットデバイスの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tags</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
仮想マシンのタグ。これはメタ情報のみです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tdf</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
タイムドリフト補正の有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--template</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tpmstate0</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,import-from=&amp;lt;ソースボリューム&amp;gt;] [,size=&amp;lt;ディスクサイズ&amp;gt;] [,version=&amp;lt;v1.2|v2.0&amp;gt;]</span></dt>
<dd>
<p>
TPM状態保存用ディスクの設定。フォーマットは<em>固定でRAW</em>。新規ボリューム割り当てには特殊構文STORAGE_ID:SIZE_IN_GiBを使用。注：SIZE_IN_GiBは無視され、代わりに4MiBが使用される。既存ボリュームからのインポートにはSTORAGE_ID:<em>0とimport-from</em>パラメータを使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unique</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
一意のランダムなイーサネットアドレスを割り当てます。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">archive</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unused[n]</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
未使用ボリュームへの参照。これは内部で使用されるため、手動で変更しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--usb[n]</span> <span class="monospaced">[[host=]&amp;lt;HOSTUSBDEVICE|spice&amp;gt;] [,mapping=&amp;lt;mapping-id&amp;gt;] [,usb3=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
USBデバイスの設定（nは0～4。マシンバージョン≥7.1かつostype l26、またはWindows 7以上の場合、nは最大14まで設定可能）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vcpus</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ホットプラグされたvCPUの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vga</span> <span class="monospaced">[[type=]&amp;lt;enum&amp;gt;] [,clipboard=&amp;lt;vnc&amp;gt;] [,memory=&amp;lt;integer&amp;gt;]</span></dt>
<dd>
<p>
VGAハードウェアを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--virtio[n]</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,aio=&amp;lt;ネイティブ|スレッド|io_uring&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;秒&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;seconds&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;seconds&amp;gt;] [,cache=&amp;lt;enum&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;][,破棄=&amp;lt;無視|有効&amp;gt;] [,フォーマット=&amp;lt;列挙型&amp;gt;] [,インポート元=&amp;lt;ソースボリューム&amp;gt;] [,I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数持続時間=&amp;lt;秒&amp;gt;][,iops_rd=&amp;lt;iops&amp;gt;] [,iops_rd_max=&amp;lt;iops&amp;gt;] [,iops_rd_max_length=&amp;lt;seconds&amp;gt;] [,iops_wr=&amp;lt;iops&amp;gt;] [,iops_wr_max=&amp;lt;iops&amp;gt;][,iops_wr_max_length=&amp;lt;seconds&amp;gt;] [,iothread=&amp;lt;1|0&amp;gt;] [,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;][,書き込みmbps&amp;lt;mbps&amp;gt;] [,書き込みmbps上限&amp;lt;mbps&amp;gt;] [,メディア&amp;lt;cdrom|disk&amp;gt;] [,レプリケーション&amp;lt;1|0&amp;gt;] [,エラー処理&amp;lt;無視|報告|停止&amp;gt;] [,読み取り専用&amp;lt;1|0&amp;gt;][,シリアル=&amp;lt;シリアル&amp;gt;] [,共有=&amp;lt;1|0&amp;gt;] [,サイズ=&amp;lt;ディスクサイズ&amp;gt;] [,スナップショット=&amp;lt;1|0&amp;gt;] [,書き込みエラー=&amp;lt;列挙型&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをVIRTIOハードディスクとして使用（nは0～15）。新規ボリュームの割り当てには特殊構文STORAGE_ID:SIZE_IN_GiBを使用。既存ボリュームからのインポートにはSTORAGE_ID:<em>0とimport-from</em>パラメータを使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--virtiofs[n]</span> <span class="monospaced">[dirid=]&amp;lt;マッピングID&amp;gt; [,cache=&amp;lt;列挙型&amp;gt;] [,direct-io=&amp;lt;1|0&amp;gt;] [,expose-acl=&amp;lt;1|0&amp;gt;] [,expose-xattr=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
Virtio-fsを使用してホストとゲスト間でディレクトリを共有するための設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmgenid</span> <span class="monospaced">&amp;lt;UUID&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1 (自動生成)</span>)</dt>
<dd>
<p>
VM 世代 ID を設定します。作成時または更新時に自動生成するには<em>1 を</em>、明示的に無効化するには<em>0</em>を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmstatestorage</span> <span class="monospaced">&amp;lt;ストレージID&amp;gt;</span></dt>
<dd>
<p>
VM状態ボリューム/ファイルのデフォルトストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--watchdog</span> <span class="monospaced">[[model=]&amp;lt;i6300esb|ib700&amp;gt;] [,action=&amp;lt;enum&amp;gt;]</span></dt>
<dd>
<p>
仮想ハードウェアのウォッチドッグデバイスを作成します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm delsnapshot</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;snapname&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>仮想マシンのスナップショットを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;スナップ名&amp;gt;</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ディスクスナップショットの削除に失敗した場合でも設定ファイルから削除する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm destroy</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>VM および使用済み/所有されているすべてのボリュームを破棄します。VM固有の権限とファイアウォールルールを削除します</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--destroy-unreferenced-disks</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定されている場合、有効なすべてのストレージから、設定で参照されていないが一致するVMIDを持つディスクをすべて追加で破棄する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--purge</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
バックアップ＆レプリケーションジョブやHAなど、設定からVMIDを削除する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ロックを無視 - このオプションの使用はrootのみに許可される。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm disk import</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;source&amp;gt; &amp;lt;storage&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>外部ディスクイメージをVM内の未使用ディスクとしてインポートします。
イメージ形式はqemu-img(1)でサポートされている必要があります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;source&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
インポートするディスクイメージのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;storage&amp;gt;</span>:<span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
ターゲットストレージID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&amp;lt;qcow2 | raw | vmdk&amp;gt;</span></dt>
<dd>
<p>
ターゲットフォーマット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target-disk</span> <span class="monospaced">&amp;lt;efidisk0 | ide0 | ide1 | ide2 | ide3 | sata0 | sata1 | sata2 | sata3 | sata4 | sata5 | scsi0 | scsi1 | scsi10 | scsi11 | scsi12 | scsi13 | scsi14 | scsi15 | scsi16 | scsi17 | scsi18 | scsi19 | scsi2 | scsi20 | scsi21 | scsi22 | scsi23 | scsi24 | scsi25 | scsi26 | scsi27 | scsi28 | scsi29 | scsi3 | scsi30 | scsi4 | scsi5 | scsi6 | scsi7 | scsi8 | scsi9 | tpmstate0 | 未使用0 | 未使用1 | 未使用10| 未使用100 | 未使用101 | 未使用102 | 未使用103 | 未使用104 | 未使用105 | 未使用106 | 未使用107 | 未使用108 | 未使用109 | 未使用11 | 未使用110 | 未使用111 | 未使用112 | 未使用113 | 未使用114 | 未使用115 | 未使用116 | 未使用117 | 未使用118 |未使用119 | 未使用12 | 未使用120 | 未使用121 | 未使用122 | 未使用123 | 未使用124 | 未使用125 | 未使用126 | 未使用127 | 未使用128 | 未使用129 | 未使用13 | 未使用130 | 未使用131 | 未使用132 | 未使用133 | 未使用134 | 未使用135 | 未使用136 | 未使用137 | 未使用138 | 未使用139 | 未使用14 | 未使用140 | 未使用141 | 未使用142 | 未使用143 | 未使用144 | 未使用145 | 未使用146 | 未使用147 | 未使用148 | 未使用149 | 未使用15 | 未使用150 | 未使用151 | 未使用152 | 未使用153 | 未使用154 | 未使用155| 未使用156 | 未使用157 | 未使用158 | 未使用159 | 未使用16 | 未使用160 | 未使用161 | 未使用162 | 未使用163 | 未使用164 | 未使用165 | 未使用166 | 未使用167 | 未使用168 | 未使用169 | 未使用17 | 未使用170 | 未使用171 | 未使用172 | 未使用173 | 未使用174 | 未使用175 | 未使用176 | 未使用177 | 未使用178 | 未使用179 | 未使用18 | 未使用180 | 未使用181 | 未使用182 | 未使用183 | 未使用184 | 未使用185 | 未使用186 | 未使用187 | 未使用188 | 未使用189 | 未使用19 | 未使用190 | 未使用191 | 未使用192 | 未使用193 | 未使用194 | 未使用195 | 未使用196 | 未使用197 | 未使用198 | 未使用199 | 未使用2 | 未使用20 | 未使用200 | 未使用201 | 未使用202 | 未使用203 | 未使用204 | 未使用205 | 未使用206 | 未使用207 | 未使用208 | 未使用209 | 未使用21 | 未使用210 | 未使用211 | 未使用212 | 未使用213 | 未使用214 | 未使用215 | 未使用216 | 未使用217 | 未使用218 | 未使用219 | 未使用22 | 未使用220 | 未使用221 | 未使用222 | 未使用223 | 未使用224 | 未使用225 | 未使用226 | 未使用227 | 未使用228 | 未使用229 | 未使用23 | 未使用230 | 未使用231 | 未使用232 | 未使用233 | 未使用234 | 未使用235 | 未使用236 | 未使用237 | 未使用238 | 未使用239 | 未使用24 | 未使用240 | 未使用241 | 未使用242 | 未使用243 | 未使用244 | 未使用245 | 未使用246 | 未使用247 |未使用248 | 未使用249 | 未使用25 | 未使用250 | 未使用251 | 未使用252 | 未使用253 | 未使用254 | 未使用255 | 未使用26 | 未使用27 | 未使用28 | 未使用29 | 未使用3 | 未使用30 | 未使用31 | 未使用32 | 未使用33 | 未使用34 | 未使用35 | 未使用36 | 未使用37 | 未使用38 | 未使用39 | 未使用4 | 未使用40 | 未使用41 | 未使用42 | 未使用43 | 未使用44 | 未使用45 | 未使用46 | 未使用47 | 未使用48 | 未使用49 | 未使用5 | 未使用50 | 未使用51 | 未使用52 | 未使用53 | 未使用54 | 未使用55 | 未使用56 | 未使用57 | 未使用58 | 未使用59 | 未使用6 | 未使用60 | 未使用61 |未使用62 | 未使用63 | 未使用64 | 未使用65 | 未使用66 | 未使用67 | 未使用68 | 未使用69 | 未使用7 | 未使用70 | 未使用71 | 未使用72 | 未使用73 | 未使用74 | 未使用75 | 未使用76 | 未使用77 | 未使用78 | 未使用79 | 未使用8 | 未使用80 | 未使用81 | 未使用82 | 未使用83 | 未使用84 | 未使用85 | 未使用86 | 未使用87 | 未使用88 | 未使用89 | 未使用9 | 未使用90 | 未使用91 | 未使用92 | 未使用93 | 未使用94 | 未使用95 | 未使用96 | 未使用97 | 未使用98 | 未使用99 | virtio0 | virtio1 | virtio10 | virtio11 | virtio12 | virtio13 | virtio14 | virtio15 | virtio2 | virtio3 | virtio4 | virtio5 | virtio6 | virtio7 | virtio8 | virtio9&amp;gt;</span></dt>
<dd>
<p>
ボリュームがインポートされるディスク名（例: scsi1）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm disk move</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;disk&amp;gt; [&amp;lt;storage&amp;gt;]</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ボリュームを別のストレージまたは別の VM に移動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシン（VM）の（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;disk&amp;gt;</span>:<span class="monospaced">&amp;lt;efidisk0 | ide0 | ide1 | ide2 | ide3 | sata0 | sata1 | sata2 | sata3 | sata4 | sata5 | scsi0 | scsi1 | scsi10 | scsi11 | scsi12 | scsi13 | scsi14 | scsi15 | scsi16 | scsi17 | scsi18 | scsi19 | scsi2 | scsi20 | scsi21 | scsi22 | scsi23 | scsi24 | scsi25 | scsi26 | scsi27 | scsi28 | scsi29 | scsi3 | scsi30 | scsi4 | scsi5 | scsi6 | scsi7 | scsi8 | scsi9 | tpmstate0 | 未使用0 | 未使用1 | 未使用10| 未使用100 | 未使用101 | 未使用102 | 未使用103 | 未使用104 | 未使用105 | 未使用106 | 未使用107 | 未使用108 | 未使用109 | 未使用11 | 未使用110 | 未使用111 | 未使用112 | 未使用113 | 未使用114 | 未使用115 | 未使用116 | 未使用117 | 未使用118 |未使用119 | 未使用12 | 未使用120 | 未使用121 | 未使用122 | 未使用123 | 未使用124 | 未使用125 | 未使用126 | 未使用127 | 未使用128 | 未使用129 | 未使用13 | 未使用130 | 未使用131 | 未使用132 | 未使用133 | 未使用134 | 未使用135 | 未使用136 | 未使用137 | 未使用138 | 未使用139 | 未使用14 | 未使用140 | 未使用141 | 未使用142 | 未使用143 | 未使用144 | 未使用145 | 未使用146 | 未使用147 | 未使用148 | 未使用149 | 未使用15 | 未使用150 | 未使用151 | 未使用152 | 未使用153 | 未使用154 | 未使用155| 未使用156 | 未使用157 | 未使用158 | 未使用159 | 未使用16 | 未使用160 | 未使用161 | 未使用162 | 未使用163 | 未使用164 | 未使用165 | 未使用166 | 未使用167 | 未使用168 | 未使用169 | 未使用17 | 未使用170 | 未使用171 | 未使用172 | 未使用173 | 未使用174 | 未使用175 | 未使用176 | 未使用177 | 未使用178 | 未使用179 | 未使用18 | 未使用180 | 未使用181 | 未使用182 | 未使用183 | 未使用184 | 未使用185 | 未使用186 | 未使用187 | 未使用188 | 未使用189 | 未使用19 | 未使用190 | 未使用191 | 未使用192 | 未使用193 | 未使用194 | 未使用195 | 未使用196 | 未使用197 | 未使用198 | 未使用199 | 未使用2 | 未使用20 | 未使用200 | 未使用201 | 未使用202 | 未使用203 | 未使用204 | 未使用205 | 未使用206 | 未使用207 | 未使用208 | 未使用209 | 未使用21 | 未使用210 | 未使用211 | 未使用212 | 未使用213 | 未使用214 | 未使用215 | 未使用216 | 未使用217 | 未使用218 | 未使用219 | 未使用22 | 未使用220 | 未使用221 | 未使用222 | 未使用223 | 未使用224 | 未使用225 | 未使用226 | 未使用227 | 未使用228 | 未使用229 | 未使用23 | 未使用230 | 未使用231 | 未使用232 | 未使用233 | 未使用234 | 未使用235 | 未使用236 | 未使用237 | 未使用238 | 未使用239 | 未使用24 | 未使用240 | 未使用241 | 未使用242 | 未使用243 | 未使用244 | 未使用245 | 未使用246 | 未使用247 |未使用248 | 未使用249 | 未使用25 | 未使用250 | 未使用251 | 未使用252 | 未使用253 | 未使用254 | 未使用255 | 未使用26 | 未使用27 | 未使用28 | 未使用29 | 未使用3 | 未使用30 | 未使用31 | 未使用32 | 未使用33 | 未使用34 | 未使用35 | 未使用36 | 未使用37 | 未使用38 | 未使用39 | 未使用4 | 未使用40 | 未使用41 | 未使用42 | 未使用43 | 未使用44 | 未使用45 | 未使用46 | 未使用47 | 未使用48 | 未使用49 | 未使用5 | 未使用50 | 未使用51 | 未使用52 | 未使用53 | 未使用54 | 未使用55 | 未使用56 | 未使用57 | 未使用58 | 未使用59 | 未使用6 | 未使用60 | 未使用61 |未使用62 | 未使用63 | 未使用64 | 未使用65 | 未使用66 | 未使用67 | 未使用68 | 未使用69 | 未使用7 | 未使用70 | 未使用71 | 未使用72 | 未使用73 | 未使用74 | 未使用75 | 未使用76 | 未使用77 | 未使用78 | 未使用79 | 未使用8 | 未使用80 | 未使用81 | 未使用82 | 未使用83 | 未使用84 | 未使用85 | 未使用86 | 未使用87 | 未使用88 | 未使用89 | 未使用9 | 未使用90 | 未使用91 | 未使用92 | 未使用93 | 未使用94 | 未使用95 | 未使用96 | 未使用97 | 未使用98 | 未使用99 | virtio0 | virtio1 | virtio10 | virtio11 | virtio12 | virtio13 | virtio14 | virtio15 | virtio2 | virtio3 | virtio4 | virtio5 | virtio6 | virtio7 | virtio8 | virtio9&amp;gt;</span></dt>
<dd>
<p>
移動したいディスク。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;storage&amp;gt;</span>:<span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
ターゲットストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定から移動制限を引き継ぐ</span>)</dt>
<dd>
<p>
I/O帯域幅制限の上書き（KiB/s単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コピー成功後に元のディスクを削除。デフォルトでは未使用ディスクとして保持。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
現在の設定ファイルのSHA1ダイジェストが異なる場合、変更を防止する。
                    。これにより同時編集を防止できる。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&amp;lt;qcow2 | raw | vmdk&amp;gt;</span></dt>
<dd>
<p>
ターゲットフォーマット。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target-digest</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
ターゲットVMの現行設定ファイルのSHA1ダイジェストが異なる場合、変更を防止する。
                    ." これにより同時編集を検知できる。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ターゲットディスク</span> <span class="monospaced">&amp;lt;efidisk0 | ide0 | ide1 | ide2 | ide3 | sata0 | sata1 | sata2 | sata3 | sata4 | sata5 | scsi0 | scsi1 | scsi10 | scsi11 | scsi12 | scsi13 | scsi14 | scsi15 | scsi16 | scsi17 | scsi18 | scsi19 | scsi2 | scsi20 | scsi21 | scsi22 | scsi23 | scsi24 | scsi25 | scsi26 | scsi27 | scsi28 | scsi29 | scsi3 | scsi30 | scsi4 | scsi5 | scsi6 | scsi7 | scsi8 | scsi9 | tpmstate0 | 未使用0 | 未使用1 | 未使用10| 未使用100 | 未使用101 | 未使用102 | 未使用103 | 未使用104 | 未使用105 | 未使用106 | 未使用107 | 未使用108 | 未使用109 | 未使用11 | 未使用110 | 未使用111 | 未使用112 | 未使用113 | 未使用114 | 未使用115 | 未使用116 | 未使用117 | 未使用118 |未使用119 | 未使用12 | 未使用120 | 未使用121 | 未使用122 | 未使用123 | 未使用124 | 未使用125 | 未使用126 | 未使用127 | 未使用128 | 未使用129 | 未使用13 | 未使用130 | 未使用131 | 未使用132 | 未使用133 | 未使用134 | 未使用135 | 未使用136 | 未使用137 | 未使用138 | 未使用139 | 未使用14 | 未使用140 | 未使用141 | 未使用142 | 未使用143 | 未使用144 | 未使用145 | 未使用146 | 未使用147 | 未使用148 | 未使用149 | 未使用15 | 未使用150 | 未使用151 | 未使用152 | 未使用153 | 未使用154 | 未使用155| 未使用156 | 未使用157 | 未使用158 | 未使用159 | 未使用16 | 未使用160 | 未使用161 | 未使用162 | 未使用163 | 未使用164 | 未使用165 | 未使用166 | 未使用167 | 未使用168 | 未使用169 | 未使用17 | 未使用170 | 未使用171 | 未使用172 | 未使用173 | 未使用174 | 未使用175 | 未使用176 | 未使用177 | 未使用178 | 未使用179 | 未使用18 | 未使用180 | 未使用181 | 未使用182 | 未使用183 | 未使用184 | 未使用185 | 未使用186 | 未使用187 | 未使用188 | 未使用189 | 未使用19 | 未使用190 | 未使用191 | 未使用192 | 未使用193 | 未使用194 | 未使用195 | 未使用196 | 未使用197 | 未使用198 | 未使用199 | 未使用2 | 未使用20 | 未使用200 | 未使用201 | 未使用202 | 未使用203 | 未使用204 | 未使用205 | 未使用206 | 未使用207 | 未使用208 | 未使用209 | 未使用21 | 未使用210 | 未使用211 | 未使用212 | 未使用213 | 未使用214 | 未使用215 | 未使用216 | 未使用217 | 未使用218 | 未使用219 | 未使用22 | 未使用220 | 未使用221 | 未使用222 | 未使用223 | 未使用224 | 未使用225 | 未使用226 | 未使用227 | 未使用228 | 未使用229 | 未使用23 | 未使用230 | 未使用231 | 未使用232 | 未使用233 | 未使用234 | 未使用235 | 未使用236 | 未使用237 | 未使用238 | 未使用239 | 未使用24 | 未使用240 | 未使用241 | 未使用242 | 未使用243 | 未使用244 | 未使用245 | 未使用246 | 未使用247 |未使用248 | 未使用249 | 未使用25 | 未使用250 | 未使用251 | 未使用252 | 未使用253 | 未使用254 | 未使用255 | 未使用26 | 未使用27 | 未使用28 | 未使用29 | 未使用3 | 未使用30 | 未使用31 | 未使用32 | 未使用33 | 未使用34 | 未使用35 | 未使用36 | 未使用37 | 未使用38 | 未使用39 | 未使用4 | 未使用40 | 未使用41 | 未使用42 | 未使用43 | 未使用44 | 未使用45 | 未使用46 | 未使用47 | 未使用48 | 未使用49 | 未使用5 | 未使用50 | 未使用51 | 未使用52 | 未使用53 | 未使用54 | 未使用55 | 未使用56 | 未使用57 | 未使用58 | 未使用59 | 未使用6 | 未使用60 | 未使用61 |未使用62 | 未使用63 | 未使用64 | 未使用65 | 未使用66 | 未使用67 | 未使用68 | 未使用69 | 未使用7 | 未使用70 | 未使用71 | 未使用72 | 未使用73 | 未使用74 | 未使用75 | 未使用76 | 未使用77 | 未使用78 | 未使用79 | 未使用8 | 未使用80 | 未使用81 | 未使用82 | 未使用83 | 未使用84 | 未使用85 | 未使用86 | 未使用87 | 未使用88 | 未使用89 | 未使用9 | 未使用90 | 未使用91 | 未使用92 | 未使用93 | 未使用94 | 未使用95 | 未使用96 | 未使用97 | 未使用98 | 未使用99 | virtio0 | virtio1 | virtio10 | virtio11 | virtio12 | virtio13 | virtio14 | virtio15 | virtio2 | virtio3 | virtio4 | virtio5 | virtio6 | virtio7 | virtio8 | virtio9&amp;gt;</span></dt>
<dd>
<p>
ターゲットVM上でディスクが移動される設定キー（例：ide0またはscsi1）。デフォルトはソースディスクキー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target-vmid</span> <span class="monospaced">&amp;lt;整数&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm disk rescan</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>すべてのストレージを再スキャンし、ディスクサイズと未使用ディスクイメージを更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--dryrun</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
変更内容を実際にVM設定ファイルに書き込まない。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmid</span> <span class="monospaced">&amp;lt;整数&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm disk resize</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;disk&amp;gt; &amp;lt;size&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ボリュームサイズを拡張します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;整数&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;disk&amp;gt;</span>:<span class="monospaced">&amp;lt;efidisk0 | ide0 | ide1 | ide2 | ide3 | sata0 | sata1 | sata2 | sata3 | sata4 | sata5 | scsi0 | scsi1 | scsi10 | scsi11 | scsi12 | scsi13 | scsi14 | scsi15 | scsi16 | scsi17 | scsi18 | scsi19 | scsi2 | scsi20 | scsi21 | scsi22 | scsi23 | scsi24 | scsi25 | scsi26 | scsi27 | scsi28 | scsi29 | scsi3 | scsi30 | scsi4 | scsi5 | scsi6 | scsi7 | scsi8 | scsi9 | tpmstate0 | virtio0 | virtio1 | virtio10 | virtio11 | virtio12 | virtio13 | virtio14 | virtio15 | virtio2 | virtio3 | virtio4 | virtio5 | virtio6 | virtio7 | virtio8 | virtio9&amp;gt;</span></dt>
<dd>
<p>
サイズ変更対象のディスク。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;size&amp;gt;</span>:<span class="monospaced">\+?\d+(\.\d+)?[KMGT]?</span></dt>
<dd>
<p>
新しいサイズ。<span class="monospaced">+記号付き</span>の場合、値はボリュームの実際のサイズに加算され、+記号なしの場合は絶対値として扱われます。ディスクサイズの縮小はサポートされていません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
現在の設定ファイルのSHA1ダイジェストが異なる場合、変更を防止します。並行編集を防ぐために使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ロックを無視 - このオプションはrootのみが使用可能。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm disk unlink</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; --idlist &amp;lt;string&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ディスクイメージのリンク解除/削除を行います。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシン（VM）の（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
物理的な削除を強制します。これを指定しない場合、ディスクは設定ファイルから削除されるだけで、<em>未使用[n]</em>という追加の設定エントリが作成されます。このエントリにはボリュームIDが含まれます。未使用[n]のアンリンクは常に物理的な削除を引き起こします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--idlist</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
削除対象のディスクIDリスト。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm guest cmd</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;command&amp;gt;</span></p></div>
<div class="paragraph">
<p>QEMU ゲストエージェントコマンドを実行します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;command&amp;gt;</span>:<span class="monospaced">&amp;lt;fsfreeze-freeze | fsfreeze-status | fsfreeze-thaw | fstrim | get-fsinfo | get-host-name | get-memory-block-info | get-memory-blocks | get-osinfo | get-time | get-timezone | get-users | get-vcpus | info | network-get-interfaces | ping | shutdown | suspend-disk | suspend-hybrid | suspend-ram&amp;gt;</span></dt>
<dd>
<p>
QGAコマンド。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm guest exec</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; [&amp;lt;extra-args&amp;gt;]</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ゲストエージェント経由で指定されたコマンドを実行します</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;extra-args&amp;gt;</span>:<span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
追加引数（配列として）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pass-stdin</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定すると、EOFまでSTDINを読み込み、<em>input-data</em>経由でゲストエージェントに転送します（通常、ゲストエージェントが起動したプロセスではSTDINとして扱われます）。最大1MiBまで許可。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pass-stdin</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
オフに設定すると、コマンド終了またはタイムアウトを待たずに直ちにpidを返す。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--timeout</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">30</span>)</dt>
<dd>
<p>
コマンド完了までの同期待機時間の上限。到達するとpidが返される。無効化するには0を設定</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm guest exec-status</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;pid&amp;gt;</span></p></div>
<div class="paragraph">
<p>ゲストエージェントによって開始された指定されたpidのステータスを取得します</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;pid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt;</span></dt>
<dd>
<p>
問い合わせ対象のPID</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm guest passwd</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;username&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定されたユーザーのパスワードを指定されたパスワードに設定します</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;username&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
パスワードを設定するユーザー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--crypted</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
パスワードが既にcrypt()を通過している場合は1を設定</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定されたコマンドに関するヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm import</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;source&amp;gt; --storage &amp;lt;string&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>サポートされているインポートソース（ESXiストレージなど）から外部仮想ゲストをインポートします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシン（VM）の（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;source&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
インポート元のボリュームID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--acpi</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ACPIの有効/無効設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--affinity</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
ゲストプロセス実行に使用されるホストコアのリスト。例: 0,5,8-11</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--agent</span> <span class="monospaced">[enabled=]&amp;lt;1|0&amp;gt; [,freeze-fs-on-backup=&amp;lt;1|0&amp;gt;] [,fstrim_cloned_disks=&amp;lt;1|0&amp;gt;] [,type=&amp;lt;virtio|isa&amp;gt;]</span></dt>
<dd>
<p>
QEMUゲストエージェントとの通信の有効化/無効化およびそのプロパティ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--amd-sev</span> <span class="monospaced">[type=]&amp;lt;sev-type&amp;gt; [,allow-smt=&amp;lt;1|0&amp;gt;] [,kernel-hashes=&amp;lt;1|0&amp;gt;] [,no-debug=&amp;lt;1|0&amp;gt;] [,no-key-sharing=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
AMD CPUによるセキュア暗号化仮想化（SEV）機能</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--arch</span> <span class="monospaced">&amp;lt;aarch64 | x86_64&amp;gt;</span></dt>
<dd>
<p>
仮想プロセッサアーキテクチャ。デフォルトはホスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--args</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
kvmに渡される任意の引数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--audio0</span> <span class="monospaced">device=&amp;lt;ich9-intel-hda|intel-hda|AC97&amp;gt; [,driver=&amp;lt;spice|none&amp;gt;]</span></dt>
<dd>
<p>
オーディオデバイスを設定します。QXL/Spiceとの組み合わせで有用です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--autostart</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
クラッシュ後の自動再起動（現在は無視される）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--balloon</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
VMのターゲットRAM容量（MiB単位）。0を使用するとバルーンドライバが無効化される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bios</span> <span class="monospaced">&amp;lt;ovmf | seabios&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">seabios</span>)</dt>
<dd>
<p>
BIOS実装の選択。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--boot</span> <span class="monospaced">[[legacy=]&amp;lt;[acdn]{1,4}&amp;gt;] [,order=&amp;lt;device[;device...]&amp;gt;]</span></dt>
<dd>
<p>
ゲストブート順序を指定。<em>order=サブプロパティ</em>を使用。キーなしまた<em>はlegacy=</em>の使用は非推奨。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bootdisk</span> <span class="monospaced">(ide|sata|scsi|virtio)\d+</span></dt>
<dd>
<p>
指定ディスクからの起動を有効化。非推奨: 代わりに<em>boot: order=foo;bar</em>を使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cdrom</span> <span class="monospaced">&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
これはオプション -ide2 の別名です</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cicustom</span> <span class="monospaced">[meta=&amp;lt;ボリューム&amp;gt;] [,network=&amp;lt;ボリューム&amp;gt;] [,user=&amp;lt;ボリューム&amp;gt;] [,vendor=&amp;lt;ボリューム&amp;gt;]</span></dt>
<dd>
<p>
cloud-init: 起動時に自動生成されるファイルを置き換えるカスタムファイルを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cipassword</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
cloud-init: ユーザーに割り当てるパスワード。一般的に推奨されません。代わりにSSHキーを使用してください。また、古いcloud-initバージョンはハッシュ化されたパスワードをサポートしません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--citype</span> <span class="monospaced">&amp;lt;configdrive2 | nocloud | opennebula&amp;gt;</span></dt>
<dd>
<p>
cloud-init設定フォーマットを指定します。デフォルトは設定されたOSタイプ（<span class="monospaced">ostype</span>）に依存します。Linux<span class="monospaced">ではnocloud</span>フォーマット、Windowsでは<span class="monospaced">configdrive2フォーマット</span>を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ciupgrade</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
cloud-init: 初回起動後に自動パッケージアップグレードを実行します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ciuser</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
cloud-init: イメージのデフォルトユーザーではなく、SSHキーとパスワードを変更するユーザー名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cores</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ソケットあたりのコア数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpu</span> <span class="monospaced">[[cputype=]&amp;lt;string&amp;gt;] [,flags=&amp;lt;+FLAG[;-FLAG...]&amp;gt;] [,hidden=&amp;lt;1|0&amp;gt;][,hv-vendor-id=&amp;lt;ベンダーID&amp;gt;] [,phys-bits=&amp;lt;8-64|ホスト&amp;gt;] [,reported-model=&amp;lt;列挙型&amp;gt;]</span></dt>
<dd>
<p>
エミュレートするCPUタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpulimit</span> <span class="monospaced">&amp;lt;number&amp;gt; (0 - 128)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用率の上限。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpuunits</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - 262144)</span>(<em>デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
VMのCPUウェイト。cgroup v2では[1, 10000]に制限されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--description</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
VMの説明。WebインターフェースのVM概要に表示されます。設定ファイル内にコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dryrun</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
作成コマンドを表示し、何も実行せずに終了する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--efidisk0</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,efitype=&amp;lt;2m|4m&amp;gt;] [,format=&amp;lt;列挙型&amp;gt;] [,pre-enrolled-keys=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;ディスクサイズ&amp;gt;]</span></dt>
<dd>
<p>
EFI変数を保存するためのディスクを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&amp;lt;qcow2 | raw | vmdk&amp;gt;</span></dt>
<dd>
<p>
ターゲットフォーマット</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--freeze</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
起動時にCPUを凍結（<em>c</em>monitorコマンドで実行を開始）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hookscript</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
VMのライフサイクルにおける様々な段階で実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hostpci[n]</span> <span class="monospaced">[[host=]&amp;lt;HOSTPCIID[;HOSTPCIID2...]&amp;gt;] [,device-id=&amp;lt;hex id&amp;gt;] [,legacy-igd=&amp;lt;1|0&amp;gt;][,mapping=&amp;lt;mapping-id&amp;gt;] [,mdev=&amp;lt;string&amp;gt;] [,pcie=&amp;lt;1|0&amp;gt;] [,rombar=&amp;lt;1|0&amp;gt;][,romfile=&amp;lt;string&amp;gt;] [,sub-device-id=&amp;lt;hex id&amp;gt;] [,sub-vendor-id=&amp;lt;hex id&amp;gt;] [,vendor-id=&amp;lt;hex id&amp;gt;] [,x-vga=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
ホストのPCIデバイスをゲストにマッピングします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hotplug</span> <span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">network,disk,usb</span>)</dt>
<dd>
<p>
ホットプラグ機能を選択的に有効化します。以下はコンマ区切りのホットプラグ機能リストです：<em>network</em>,<em>disk</em>,<em>cpu</em>,<em>memory</em>,<em>usb</em>,<em>cloudinit</em>。<em>0</em>を指定するとホットプラグ機能を完全に無効化します。<em>1を</em>値として使用すると、デフォルト<span class="monospaced">のnetwork,disk,usbの</span>別名となります。USBホットプラグは、マシンバージョンが7.1以上かつostypeがl26、またはWindows 7以上のゲストで利用可能です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hugepages</span> <span class="monospaced">&amp;lt;1024 | 2 | any&amp;gt;</span></dt>
<dd>
<p>
巨大ページメモリを有効/無効化します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ide[n]</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,aio=&amp;lt;ネイティブ|スレッド|io_uring&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;秒&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;seconds&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;seconds&amp;gt;] [,cache=&amp;lt;enum&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;][,破棄=&amp;lt;無視|有効&amp;gt;] [,フォーマット=&amp;lt;列挙型&amp;gt;] [,I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数持続時間=&amp;lt;秒&amp;gt;] [,読み取りI/O操作数=&amp;lt;I/O操作数&amp;gt;][,iops_rd_max=&amp;lt;iops&amp;gt;] [,iops_rd_max_length=&amp;lt;seconds&amp;gt;] [,iops_wr=&amp;lt;iops&amp;gt;] [,iops_wr_max=&amp;lt;iops&amp;gt;] [,iops_wr_max_length=&amp;lt;seconds&amp;gt;][,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;] [,mbps_wr=&amp;lt;mbps&amp;gt;] [,mbps_wr_max=&amp;lt;mbps&amp;gt;][,media=&amp;lt;cdrom|disk&amp;gt;] [,model=&amp;lt;model&amp;gt;] [,replicate=&amp;lt;1|0&amp;gt;] [,rerror=&amp;lt;ignore|report|stop&amp;gt;] [,serial=&amp;lt;serial&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;][,size=&amp;lt;DiskSize&amp;gt;] [,snapshot=&amp;lt;1|0&amp;gt;] [,ssd=&amp;lt;1|0&amp;gt;] [,werror=&amp;lt;enum&amp;gt;] [,wwn=&amp;lt;wwn&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをIDEハードディスクまたはCD-ROMとして使用（nは0～3）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ipconfig[n]</span> <span class="monospaced">[gw=&amp;lt;GatewayIPv4&amp;gt;] [,gw6=&amp;lt;GatewayIPv6&amp;gt;] [,ip=&amp;lt;IPv4Format/CIDR&amp;gt;] [,ip6=&amp;lt;IPv6Format/CIDR&amp;gt;]</span></dt>
<dd>
<p>
cloud-init: 対応するインターフェースのIPアドレスとゲートウェイを指定します。</p>
<div class="paragraph">
<p>IPアドレスはCIDR表記を使用し、ゲートウェイはオプションですが、同じタイプのIPを指定する必要があります。</p></div>
<div class="paragraph">
<p>IPアドレスに特殊文字列<em>「dhcp」</em>を使用するとDHCPが有効化され、この場合明示的なゲートウェイは指定しないでください。
IPv6では特殊文字列<em>「auto</em>」を使用するとステートレス自動設定が有効化されます。これにはcloud-init 19.4以降が必要です。</p></div>
<div class="paragraph">
<p>cloud-init が有効で IPv4 アドレスも IPv6 アドレスも指定されていない場合、デフォルトで IPv4 に対して
dhcp を使用します。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ivshmem</span> <span class="monospaced">size=&amp;lt;integer&amp;gt; [,name=&amp;lt;string&amp;gt;]</span></dt>
<dd>
<p>
仮想マシン間共有メモリ。仮想マシン間、またはホストとの直接通信に有用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keephugepages</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
hugepagesと併用。有効化すると、VMシャットダウン後もhugepagesが削除されず、次回起動時に再利用可能。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keyboard</span> <span class="monospaced">&amp;lt;da | de | de-ch | en-gb | en-us | es | fi | fr | fr-be | fr-ca | fr-ch | hu | is | it | ja | lt | mk | nl | no | pl | pt | pt-br | sl | sv | tr&amp;gt;</span></dt>
<dd>
<p>
VNCサーバーのキーボードレイアウト。通常は不要であり、ゲストOS内で設定する方が望ましい場合が多い。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--kvm</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
KVMハードウェア仮想化の有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--live-import</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
VMを直ちに起動し、データをバックグラウンドでコピーします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--localtime</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
リアルタイムクロック（RTC）を現地時間に設定します。<span class="monospaced">OSタイプがMicrosoft</span>Windows OSを示す場合、デフォルトで有効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lock</span> <span class="monospaced">&amp;lt;backup | clone | create | migrate | rollback | snapshot | snapshot-delete | suspended | suspending&amp;gt;</span></dt>
<dd>
<p>
VMのロック/ロック解除。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--machine</span> <span class="monospaced">[[type=]&amp;lt;マシンタイプ&amp;gt;] [,enable-s3=&amp;lt;1|0&amp;gt;] [,enable-s4=&amp;lt;1|0&amp;gt;] [,viommu=&amp;lt;intel|virtio&amp;gt;]</span></dt>
<dd>
<p>
QEMUマシンを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--memory</span> <span class="monospaced">[current=]&amp;lt;integer&amp;gt;</span></dt>
<dd>
<p>
メモリプロパティ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migrate_downtime</span> <span class="monospaced">&amp;lt;number&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0.1</span>)</dt>
<dd>
<p>
移行時の最大許容ダウンタイム（秒単位）を設定します。移行終了間際に、新規に更新されたRAMの転送量が多すぎて収束できない場合、移行が収束するまで制限値が段階的に自動的に増加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migrate_speed</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
移行の最大速度（MB/s単位）を設定します。値0は制限なしを意味します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--name</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
VMの名前を設定します。設定Webインターフェースでのみ使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nameserver</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
cloud-init: コンテナのDNSサーバーIPアドレスを設定します。searchdomainとnameserverの両方が設定されていない場合、作成時にはホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--net[n]</span> <span class="monospaced">[model=]&amp;lt;enum&amp;gt; [,bridge=&amp;lt;bridge&amp;gt;] [,firewall=&amp;lt;1|0&amp;gt;] [,link_down=&amp;lt;1|0&amp;gt;] [,macaddr=&amp;lt;XX:XX:XX:XX:XX:XX&amp;gt;] [,mtu=&amp;lt;integer&amp;gt;][,queues=&amp;lt;integer&amp;gt;] [,rate=&amp;lt;number&amp;gt;] [,tag=&amp;lt;integer&amp;gt;] [,trunks=&amp;lt;vlanid[;vlanid...]&amp;gt;] [,&amp;lt;model&amp;gt;=&amp;lt;macaddr&amp;gt;]</span></dt>
<dd>
<p>
ネットワークデバイスを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--numa</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
NUMAの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--numa[n]</span> <span class="monospaced">cpus=&amp;lt;id[-id];...&amp;gt; [,hostnodes=&amp;lt;id[-id];...&amp;gt;] [,memory=&amp;lt;number&amp;gt;] [,policy=&amp;lt;preferred|bind|interleave&amp;gt;]</span></dt>
<dd>
<p>
NUMAトポロジー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--onboot</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時にVMを起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ostype</span> <span class="monospaced">&amp;lt;l24 | l26 | other | solaris | w2k | w2k3 | w2k8 | win10 | win11 | win7 | win8 | wvista | wxp&amp;gt;</span></dt>
<dd>
<p>
ゲストオペレーティングシステムを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--parallel[n]</span> <span class="monospaced">/dev/parport\d+|/dev/usb/lp\d+</span></dt>
<dd>
<p>
ホスト並列デバイスをマッピング（nは0～2）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--protection</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
VMの保護フラグを設定します。これにより、VMの削除およびディスク削除操作が無効化されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--reboot</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
再起動を許可。<em>0に設定</em>すると再起動時にVMが終了する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rng0</span> <span class="monospaced">[source=]&amp;lt;/dev/urandom|/dev/random|/dev/hwrng&amp;gt; [,max_bytes=&amp;lt;integer&amp;gt;] [,period=&amp;lt;integer&amp;gt;]</span></dt>
<dd>
<p>
VirtIOベースの乱数生成器を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sata[n]</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,aio=&amp;lt;ネイティブ|スレッド|io_uring&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;秒&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;seconds&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;seconds&amp;gt;] [,cache=&amp;lt;enum&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;][,破棄=&amp;lt;無視|有効&amp;gt;] [,フォーマット=&amp;lt;列挙型&amp;gt;] [,I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数持続時間=&amp;lt;秒&amp;gt;] [,読み取りI/O操作数=&amp;lt;I/O操作数&amp;gt;][,iops_rd_max=&amp;lt;iops&amp;gt;] [,iops_rd_max_length=&amp;lt;seconds&amp;gt;] [,iops_wr=&amp;lt;iops&amp;gt;] [,iops_wr_max=&amp;lt;iops&amp;gt;][,iops_wr_max_length=&amp;lt;seconds&amp;gt;] [,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;] [,mbps_wr=&amp;lt;mbps&amp;gt;][,書き込み最大Mb/秒&amp;lt;Mb/秒&amp;gt;] [,メディア&amp;lt;CD-ROM|ディスク&amp;gt;] [,レプリケーション&amp;lt;1|0&amp;gt;] [,再エラー&amp;lt;無視|報告|停止&amp;gt;] [,シリアル&amp;lt;シリアル&amp;gt;] [,共有&amp;lt;1|0&amp;gt;][,size=&amp;lt;DiskSize&amp;gt;] [,snapshot=&amp;lt;1|0&amp;gt;] [,ssd=&amp;lt;1|0&amp;gt;] [,werror=&amp;lt;enum&amp;gt;] [,wwn=&amp;lt;wwn&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをSATAハードディスクまたはCD-ROMとして使用（nは0～5）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scsi[n]</span> <span class="monospaced">[file=]&amp;lt;volume&amp;gt; [,aio=&amp;lt;native|threads|io_uring&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;seconds&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;seconds&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;seconds&amp;gt;] [,cache=&amp;lt;enum&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;] [,discard=&amp;lt;ignore|on&amp;gt;][,format=&amp;lt;enum&amp;gt;] [,iops=&amp;lt;iops&amp;gt;] [,iops_max=&amp;lt;iops&amp;gt;] [,iops_max_length=&amp;lt;seconds&amp;gt;] [,iops_rd=&amp;lt;iops&amp;gt;] [,iops_rd_max=&amp;lt;iops&amp;gt;][,iops_rd_max_length=&amp;lt;seconds&amp;gt;] [,iops_wr=&amp;lt;iops&amp;gt;] [,iops_wr_max=&amp;lt;iops&amp;gt;] [,iops_wr_max_length=&amp;lt;seconds&amp;gt;] [,iothread=&amp;lt;1|0&amp;gt;][,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;] [,mbps_wr=&amp;lt;mbps&amp;gt;] [,mbps_wr_max=&amp;lt;mbps&amp;gt;][,media=&amp;lt;cdrom|disk&amp;gt;] [,product=&amp;lt;product&amp;gt;] [,queues=&amp;lt;integer&amp;gt;] [,replicate=&amp;lt;1|0&amp;gt;] [,rerror=&amp;lt;ignore|report|stop&amp;gt;] [,ro=&amp;lt;1|0&amp;gt;][,scsiblock=&amp;lt;1|0&amp;gt;] [,serial=&amp;lt;serial&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;DiskSize&amp;gt;] [,snapshot=&amp;lt;1|0&amp;gt;] [,ssd=&amp;lt;1|0&amp;gt;][,ベンダー=&amp;lt;ベンダー&amp;gt;] [,ワーエラー=&amp;lt;列挙型&amp;gt;] [,WWN=&amp;lt;WWN&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをSCSIハードディスクまたはCD-ROMとして使用（nは0から30）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scsihw</span> <span class="monospaced">&amp;lt;lsi | lsi53c810 | megasas | pvscsi | virtio-scsi-pci | virtio-scsi-single&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">lsi</span>)</dt>
<dd>
<p>
SCSIコントローラモデル</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--searchdomain</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
cloud-init: コンテナのDNS検索ドメインを設定します。searchdomainもnameserverも設定されていない場合、Createはホストの設定を自動的に使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--serial[n]</span> <span class="monospaced">(/dev/.+|socket)</span></dt>
<dd>
<p>
VM内にシリアルデバイスを作成（nは0～3）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--shares</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - 50000)</span>(<em>default =</em> <span class="monospaced">1000</span>)</dt>
<dd>
<p>
自動バルーニング用のメモリシェア量。数値が大きいほど、このVMが割り当てられるメモリが増加します。数値は他の稼働中の全VMのウェイトに対する相対値です。0を使用すると自動バルーニングが無効になります。自動バルーニングはpvestatdによって実行されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smbios1</span> <span class="monospaced">[base64=&amp;lt;1|0&amp;gt;] [,family=&amp;lt;Base64エンコード文字列&amp;gt;] [,manufacturer=&amp;lt;Base64エンコード文字列&amp;gt;][,product=&amp;lt;Base64エンコード文字列&amp;gt;] [,serial=&amp;lt;Base64エンコード文字列&amp;gt;] [,sku=&amp;lt;Base64エンコード文字列&amp;gt;] [,uuid=&amp;lt;UUID&amp;gt;] [,version=&amp;lt;Base64エンコード文字列&amp;gt;]</span></dt>
<dd>
<p>
SMBIOSタイプ1フィールドを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smp</span> <span class="monospaced">&amp;lt;整数&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPUの数。代わりに-socketsオプションを使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sockets</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPUソケットの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--spice_enhancements</span> <span class="monospaced">[foldersharing=&amp;lt;1|0&amp;gt;] [,videostreaming=&amp;lt;off|all|filter&amp;gt;]</span></dt>
<dd>
<p>
SPICEの追加機能設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sshkeys</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
cloud-init: 公開SSH鍵を設定（1行に1鍵、OpenSSH形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startdate</span> <span class="monospaced">(now | YYYY-MM-DD | YYYY-MM-DDTHH:MM:SS)</span>(<em>デフォルト =</em> <span class="monospaced">now</span>)</dt>
<dd>
<p>
リアルタイムクロックの初期日付を設定します。日付の有効な形式は次の通りです：'now' または<em>2006-06-17T16:01:21</em>または<em>2006-06-17</em>。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startup</span>`[[order=]\d+] [,up=\d+] [,down=\d+] ` </dt>
<dd>
<p>
起動およびシャットダウンの動作。順序は起動の一般的な順序を定義する非負の数値です。シャットダウンは逆順で行われます。さらに、<em>アップ</em>または<em>ダウンの</em>遅延を秒単位で設定でき、これは次のVMが起動または停止されるまでの待機時間を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--storage</span> <span class="monospaced">&amp;lt;ストレージID&amp;gt;</span></dt>
<dd>
<p>
デフォルトストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tablet</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
USBタブレットデバイスの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tags</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
仮想マシンのタグ。これはメタ情報のみです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tdf</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
タイムドリフト補正の有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--template</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tpmstate0</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,size=&amp;lt;ディスクサイズ&amp;gt;] [,version=&amp;lt;v1.2|v2.0&amp;gt;]</span></dt>
<dd>
<p>
TPM状態を保存するためのディスクを設定します。フォーマットは<em>固定でRAWです</em>。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unused[n]</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
未使用ボリュームへの参照。内部で使用されるため、手動で変更しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--usb[n]</span> <span class="monospaced">[[host=]&amp;lt;HOSTUSBDEVICE|spice&amp;gt;] [,mapping=&amp;lt;mapping-id&amp;gt;] [,usb3=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
USBデバイスの設定（nは0～4。マシンバージョン≥7.1かつostype l26、またはWindows 7以上の場合、nは最大14まで設定可能）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vcpus</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ホットプラグされたvCPUの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vga</span> <span class="monospaced">[[type=]&amp;lt;enum&amp;gt;] [,clipboard=&amp;lt;vnc&amp;gt;] [,memory=&amp;lt;integer&amp;gt;]</span></dt>
<dd>
<p>
VGAハードウェアを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--virtio[n]</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,aio=&amp;lt;ネイティブ|スレッド|io_uring&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;秒&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;seconds&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;seconds&amp;gt;] [,cache=&amp;lt;enum&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;] [,discard=&amp;lt;ignore|on&amp;gt;][,format=&amp;lt;enum&amp;gt;] [,iops=&amp;lt;iops&amp;gt;] [,iops_max=&amp;lt;iops&amp;gt;] [,iops_max_length=&amp;lt;seconds&amp;gt;] [,iops_rd=&amp;lt;iops&amp;gt;] [,iops_rd_max=&amp;lt;iops&amp;gt;][,iops_rd_max_length=&amp;lt;seconds&amp;gt;] [,iops_wr=&amp;lt;iops&amp;gt;] [,iops_wr_max=&amp;lt;iops&amp;gt;] [,iops_wr_max_length=&amp;lt;seconds&amp;gt;] [,iothread=&amp;lt;1|0&amp;gt;][,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;] [,mbps_wr=&amp;lt;mbps&amp;gt;][,書き込み_最大_mbps=&amp;lt;mbps&amp;gt;] [,メディア=&amp;lt;cdrom|disk&amp;gt;] [,レプリケーション=&amp;lt;1|0&amp;gt;] [,エラー処理=&amp;lt;無視|報告|停止&amp;gt;] [,読み取り専用=&amp;lt;1|0&amp;gt;][,シリアル=&amp;lt;シリアル&amp;gt;] [,共有=&amp;lt;1|0&amp;gt;] [,サイズ=&amp;lt;ディスクサイズ&amp;gt;] [,スナップショット=&amp;lt;1|0&amp;gt;] [,書き込みエラー=&amp;lt;列挙型&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをVIRTIOハードディスクとして使用（nは0～15）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--virtiofs[n]</span> <span class="monospaced">[dirid=]&amp;lt;マッピングID&amp;gt; [,cache=&amp;lt;列挙型&amp;gt;] [,direct-io=&amp;lt;1|0&amp;gt;] [,expose-acl=&amp;lt;1|0&amp;gt;] [,expose-xattr=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
Virtio-fsを使用してホストとゲスト間でディレクトリを共有するための設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmgenid</span> <span class="monospaced">&amp;lt;UUID&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1 (自動生成)</span>)</dt>
<dd>
<p>
VM 世代 ID を設定します。作成時または更新時に自動生成するには<em>1 を</em>、明示的に無効化するには<em>0</em>を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmstatestorage</span> <span class="monospaced">&amp;lt;ストレージID&amp;gt;</span></dt>
<dd>
<p>
VM状態のボリューム/ファイルのデフォルトストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--watchdog</span> <span class="monospaced">[[model=]&amp;lt;i6300esb|ib700&amp;gt;] [,action=&amp;lt;enum&amp;gt;]</span></dt>
<dd>
<p>
仮想ハードウェアウォッチドッグデバイスを作成します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm importdisk</strong></p></div>
<div class="paragraph">
<p><em>qm disk import</em> の別名。</p></div>
<div class="paragraph">
<p><strong>qm importovf</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;manifest&amp;gt; &amp;lt;storage&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>OVF マニフェストから読み取ったパラメータを使用して新しい VM を作成します</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;manifest&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
OVFファイルへのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;storage&amp;gt;</span>:<span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
ターゲットストレージID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dryrun</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
抽出されたOVFパラメータの解析結果を表示するが、VMは作成しない</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--format</span> <span class="monospaced">&amp;lt;qcow2 | raw | vmdk&amp;gt;</span></dt>
<dd>
<p>
ターゲットフォーマット</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm list</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>仮想マシンのインデックス（ノードごと）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--full</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
稼働中のVMの完全なステータスを確認する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm listsnapshot</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>すべてのスナップショットを一覧表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm migrate</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;target&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>仮想マシンを移行します。新しい移行タスクを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;target&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ターゲットノード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定からの移行制限</span>)</dt>
<dd>
<p>
I/O帯域幅制限の上書き（KiB/s単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ローカルデバイスを使用するVMの移行を許可します。このオプションはrootのみが使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migration_network</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
移行に使用される（サブ）ネットワークのCIDR。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migration_type</span> <span class="monospaced">&amp;lt;insecure | secure&amp;gt;</span></dt>
<dd>
<p>
デフォルトでは、移行トラフィックはSSHトンネルを使用して暗号化されます。安全で完全にプライベートなネットワークでは、パフォーマンス向上のためにこれを無効化できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--online</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
VMが稼働中の場合、オンライン/ライブ移行を使用する。VMが停止中の場合は無視される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--targetstorage</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ソースからターゲットストレージへのマッピング。単一のストレージIDのみを指定すると、すべてのソースストレージがそのストレージにマッピングされます。特別な値<em>1</em>を指定すると、各ソースストレージが自身にマッピングされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--with-conntrack-state</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
稼働中のVMの接続追跡エントリを移行するかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--with-local-disks</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ローカルディスクのライブストレージ移行を有効化</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm monitor</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>QEMU Monitor インターフェースに入ります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm move-disk</strong></p></div>
<div class="paragraph">
<p><em>qm disk move</em> の別名。</p></div>
<div class="paragraph">
<p><strong>qm move_disk</strong></p></div>
<div class="paragraph">
<p><em>qm disk move</em> の別名。</p></div>
<div class="paragraph">
<p><strong>qm mtunnel</strong></p></div>
<div class="paragraph">
<p>qmigrate によって使用されます - 手動では使用しないでください。</p></div>
<div class="paragraph">
<p><strong>qm nbdstop</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>組み込みの NBD サーバーを停止します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm pending</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>仮想マシンの設定を取得します（現在の値と保留中の値の両方）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm reboot</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>VMをシャットダウンし、再起動して再起動します。保留中の変更を適用します。
qm remote-migrate &amp;lt;vmid&amp;gt; [&amp;lt;target-vmid&amp;gt;] &amp;lt;target</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--timeout</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
シャットダウンの最大待機時間（秒）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm remote-migrate</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; [&amp;lt;target-vmid&amp;gt;] &amp;lt;target-endpoint&amp;gt; --target-bridge &amp;lt;string&amp;gt; --target-storage &amp;lt;string&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>仮想マシンをリモートクラスタに移行します。新しい移行タスクを作成します。
実験的機能です！</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;target-vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;target-endpoint&amp;gt;</span>:<span class="monospaced">apitoken=&amp;lt;PVEAPIToken=user@realm!token=SECRET&amp;gt; ,host=&amp;lt;ADDRESS&amp;gt; [,fingerprint=&amp;lt;FINGERPRINT&amp;gt;] [,port=&amp;lt;PORT&amp;gt;]</span></dt>
<dd>
<p>
リモートターゲットエンドポイント</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定からの移行制限</span>)</dt>
<dd>
<p>
I/O帯域幅制限の上書き（KiB/s単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
移行成功後、元のVMと関連データを削除します。デフォルトでは元のVMは停止状態でソースクラスターに残ります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--online</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
VMが稼働中の場合、オンライン/ライブ移行を使用する。停止中のVMでは無視される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target-bridge</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ソースからターゲットへのブリッジのマッピング。単一のブリッジIDのみを指定すると、すべてのソースブリッジがそのブリッジにマッピングされます。特別な値<em>1</em>を指定すると、各ソースブリッジは自身にマッピングされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target-storage</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ソースストレージからターゲットストレージへのマッピング。単一のストレージIDのみを指定すると、すべてのソースストレージがそのストレージにマッピングされます。特別な値<em>1</em>を指定すると、各ソースストレージがそれ自身にマッピングされます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm rescan</strong></p></div>
<div class="paragraph">
<p><em>qm disk rescan</em> の別名。</p></div>
<div class="paragraph">
<p><strong>qm reset</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>仮想マシンをリセットします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ロックを無視 - このオプションの使用はルートのみに許可される。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm resize</strong></p></div>
<div class="paragraph">
<p><em>qm disk resize</em> の別名。</p></div>
<div class="paragraph">
<p><strong>qm resume</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>仮想マシンを再開します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nocheck</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ロックを無視 - このオプションはrootのみが使用可能。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm rollback</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;snapname&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>VMの状態を指定されたスナップショットにロールバックします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;snapname&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--start</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ロールバック成功後にVMを起動するかどうか。（注：スナップショットにRAMが含まれる場合、VMは自動的に起動されます。）</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm sendkey</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;key&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>仮想マシンにキーイベントを送信します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;key&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
キー（qemu monitor エンコーディング）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ロックを無視 - このオプションの使用はrootのみに許可されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm set</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>仮想マシンのオプションを設定します（同期API）。ホットプラグやストレージ割り当てを伴う操作には、代わりにPOSTメソッドの使用を検討してください。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;整数&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--acpi</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ACPIの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--affinity</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ゲストプロセス実行に使用するホストコアのリスト。例: 0,5,8-11</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--agent</span> <span class="monospaced">[enabled=]&amp;lt;1|0&amp;gt; [,freeze-fs-on-backup=&amp;lt;1|0&amp;gt;] [,fstrim_cloned_disks=&amp;lt;1|0&amp;gt;] [,type=&amp;lt;virtio|isa&amp;gt;]</span></dt>
<dd>
<p>
QEMUゲストエージェントとの通信の有効化/無効化とそのプロパティ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--amd-sev</span> <span class="monospaced">[type=]&amp;lt;sev-type&amp;gt; [,allow-smt=&amp;lt;1|0&amp;gt;] [,kernel-hashes=&amp;lt;1|0&amp;gt;] [,no-debug=&amp;lt;1|0&amp;gt;] [,no-key-sharing=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
AMD CPUによるセキュア暗号化仮想化（SEV）機能</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--arch</span> <span class="monospaced">&amp;lt;aarch64 | x86_64&amp;gt;</span></dt>
<dd>
<p>
仮想プロセッサアーキテクチャ。デフォルトはホスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--args</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
kvmに渡される任意の引数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--audio0</span> <span class="monospaced">device=&amp;lt;ich9-intel-hda|intel-hda|AC97&amp;gt; [,driver=&amp;lt;spice|none&amp;gt;]</span></dt>
<dd>
<p>
オーディオデバイスを設定します。QXL/Spiceとの組み合わせで有用です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--autostart</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
クラッシュ後の自動再起動（現在は無視される）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--balloon</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
VMのターゲットRAM容量（MiB単位）。0を使用するとバルーンドライバが無効化される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bios</span> <span class="monospaced">&amp;lt;ovmf | seabios&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">seabios</span>)</dt>
<dd>
<p>
BIOS実装の選択。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--boot</span> <span class="monospaced">[[legacy=]&amp;lt;[acdn]{1,4}&amp;gt;] [,order=&amp;lt;device[;device...]&amp;gt;]</span></dt>
<dd>
<p>
ゲストブート順序を指定。<em>order=サブプロパティ</em>を使用。キーなしまた<em>はlegacy=</em>の使用は非推奨。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bootdisk</span> <span class="monospaced">(ide|sata|scsi|virtio)\d+</span></dt>
<dd>
<p>
指定ディスクからの起動を有効化。非推奨: 代わりに<em>boot: order=foo;bar</em>を使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cdrom</span> <span class="monospaced">&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
これはオプション -ide2 の別名です</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cicustom</span> <span class="monospaced">[meta=&amp;lt;ボリューム&amp;gt;] [,network=&amp;lt;ボリューム&amp;gt;] [,user=&amp;lt;ボリューム&amp;gt;] [,vendor=&amp;lt;ボリューム&amp;gt;]</span></dt>
<dd>
<p>
cloud-init: 起動時に自動生成されるファイルを置き換えるカスタムファイルを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cipassword</span> <span class="monospaced">&amp;lt;password&amp;gt;</span></dt>
<dd>
<p>
cloud-init: ユーザーに割り当てるパスワード。一般的に推奨されません。代わりにSSHキーを使用してください。また、古いcloud-initバージョンはハッシュ化されたパスワードをサポートしません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--citype</span> <span class="monospaced">&amp;lt;configdrive2 | nocloud | opennebula&amp;gt;</span></dt>
<dd>
<p>
cloud-init設定フォーマットを指定します。デフォルトは設定されたOSタイプ（<span class="monospaced">ostype</span>）に依存します。Linux<span class="monospaced">ではnocloud</span>フォーマット、Windowsでは<span class="monospaced">configdrive2フォーマット</span>を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ciupgrade</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
cloud-init: 初回起動後に自動パッケージアップグレードを実行します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ciuser</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
cloud-init: イメージのデフォルトユーザーではなく、SSHキーとパスワードを変更するユーザー名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cores</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span>(<em>default =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ソケットあたりのコア数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpu</span> <span class="monospaced">[[cputype=]&amp;lt;文字列&amp;gt;] [,flags=&amp;lt;+フラグ[;-フラグ...]&amp;gt;] [,hidden=&amp;lt;1|0&amp;gt;][,hv-vendor-id=&amp;lt;ベンダーID&amp;gt;] [,phys-bits=&amp;lt;8-64|ホスト&amp;gt;] [,reported-model=&amp;lt;列挙型&amp;gt;]</span></dt>
<dd>
<p>
エミュレートするCPUタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpulimit</span> <span class="monospaced">&amp;lt;number&amp;gt; (0 - 128)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用率の上限。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpuunits</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - 262144)</span>(<em>デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
VMのCPUウェイト。cgroup v2では[1, 10000]に制限されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--description</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
VMの説明。WebインターフェースのVM概要に表示されます。設定ファイル内にコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
現在の設定ファイルのSHA1ダイジェストが異なる場合の変更を防止します。同時編集の防止に使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--efidisk0</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,efitype=&amp;lt;2m|4m&amp;gt;] [,format=&amp;lt;列挙型&amp;gt;] [,import-from=&amp;lt;ソースボリューム&amp;gt;] [,pre-enrolled-keys=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;ディスクサイズ&amp;gt;]</span></dt>
<dd>
<p>
EFI変数保存用ディスクの設定。新規ボリュームの割り当てには特殊構文 STORAGE_ID:SIZE_IN_GiB を使用。SIZE_IN_GiB は無視され、代わりにデフォルトのEFI変数がボリュームにコピーされる点に注意。既存ボリュームからのインポートには STORAGE_ID:0 と<em>import-from</em>パラメータを使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
物理的な取り外しを強制します。これを指定しない場合、ディスクを設定ファイルから削除するだけで、<em>未使用[n]</em>という追加の設定エントリが作成されます。このエントリにはボリュームIDが含まれます。未使用[n]のアンリンクは常に物理的な取り外しを引き起こします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">delete</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--freeze</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
起動時にCPUを凍結（<em>c</em>monitorコマンドで実行開始）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hookscript</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
VMのライフサイクルにおける様々な段階で実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hostpci[n]</span> <span class="monospaced">[[host=]&amp;lt;HOSTPCIID[;HOSTPCIID2...]&amp;gt;] [,device-id=&amp;lt;hex id&amp;gt;] [,legacy-igd=&amp;lt;1|0&amp;gt;][,mapping=&amp;lt;mapping-id&amp;gt;] [,mdev=&amp;lt;string&amp;gt;] [,pcie=&amp;lt;1|0&amp;gt;] [,rombar=&amp;lt;1|0&amp;gt;][,romfile=&amp;lt;string&amp;gt;] [,sub-device-id=&amp;lt;hex id&amp;gt;] [,sub-vendor-id=&amp;lt;hex id&amp;gt;] [,vendor-id=&amp;lt;hex id&amp;gt;] [,x-vga=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
ホストのPCIデバイスをゲストにマッピングします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hotplug</span> <span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">network,disk,usb</span>)</dt>
<dd>
<p>
ホットプラグ機能を選択的に有効化。以下のカンマ区切りリストで指定：<em>network</em>,<em>disk</em>,<em>cpu</em>,<em>memory</em>,<em>usb</em>,<em>cloudinit</em>。<em>0で完全</em>無効化。<em>1は</em>デフォルト設定<span class="monospaced">（network,disk,usb）</span>の別名。USBホットプラグはマシンバージョン7.1以上かつostype l26、またはWindows 7以上のゲストで可能。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hugepages</span> <span class="monospaced">&amp;lt;1024 | 2 | any&amp;gt;</span></dt>
<dd>
<p>
巨大ページメモリを有効/無効化します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ide[n]</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,aio=&amp;lt;ネイティブ|スレッド|io_uring&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;秒&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;seconds&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;seconds&amp;gt;] [,cache=&amp;lt;enum&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;][,破棄=&amp;lt;無視|有効&amp;gt;] [,フォーマット=&amp;lt;列挙型&amp;gt;] [,インポート元=&amp;lt;ソースボリューム&amp;gt;] [,I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数持続時間=&amp;lt;秒&amp;gt;][,iops_rd=&amp;lt;iops&amp;gt;] [,iops_rd_max=&amp;lt;iops&amp;gt;] [,iops_rd_max_length=&amp;lt;seconds&amp;gt;] [,iops_wr=&amp;lt;iops&amp;gt;] [,iops_wr_max=&amp;lt;iops&amp;gt;][,iops_wr_max_length=&amp;lt;seconds&amp;gt;] [,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;] [,mbps_wr=&amp;lt;mbps&amp;gt;][,mbps_wr_max=&amp;lt;mbps&amp;gt;] [,media=&amp;lt;cdrom|disk&amp;gt;] [,model=&amp;lt;model&amp;gt;] [,replicate=&amp;lt;1|0&amp;gt;] [,rerror=&amp;lt;ignore|report|stop&amp;gt;] [,serial=&amp;lt;serial&amp;gt;][,共有=&amp;lt;1|0&amp;gt;] [,サイズ=&amp;lt;ディスクサイズ&amp;gt;] [,スナップショット=&amp;lt;1|0&amp;gt;] [,SSD=&amp;lt;1|0&amp;gt;] [,書き込みエラー=&amp;lt;列挙型&amp;gt;] [,WWN=&amp;lt;WWN&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをIDEハードディスクまたはCD-ROMとして使用（nは0～3）。新しいボリュームを割り当てるには特殊構文STORAGE_ID:SIZE_IN_GiBを使用。既存ボリュームからインポートするにはSTORAGE_ID:<em>0とimport-from</em>パラメータを使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ipconfig[n]</span> <span class="monospaced">[gw=&amp;lt;GatewayIPv4&amp;gt;] [,gw6=&amp;lt;GatewayIPv6&amp;gt;] [,ip=&amp;lt;IPv4Format/CIDR&amp;gt;] [,ip6=&amp;lt;IPv6Format/CIDR&amp;gt;]</span></dt>
<dd>
<p>
cloud-init: 対応するインターフェースのIPアドレスとゲートウェイを指定します。</p>
<div class="paragraph">
<p>IPアドレスはCIDR表記を使用し、ゲートウェイはオプションですが、同じタイプのIPを指定する必要があります。</p></div>
<div class="paragraph">
<p>IPアドレスに特殊文字列<em>「dhcp」</em>を使用するとDHCPが有効化され、この場合明示的なゲートウェイは指定しないでください。
IPv6では特殊文字列<em>「auto</em>」を使用するとステートレス自動設定が有効化されます。これにはcloud-init 19.4以降が必要です。</p></div>
<div class="paragraph">
<p>cloud-initが有効でIPv4/IPv6アドレスが指定されていない場合、デフォルトでIPv4にdhcpを使用します。</p></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ivshmem</span> <span class="monospaced">size=&amp;lt;integer&amp;gt; [,name=&amp;lt;string&amp;gt;]</span></dt>
<dd>
<p>
VM間共有メモリ。VM間またはホストとの直接通信に有用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keephugepages</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
hugepagesと併用します。有効化すると、VMシャットダウン後もhugepagesが削除されず、以降の起動で使用可能になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keyboard</span> <span class="monospaced">&amp;lt;da | de | de-ch | en-gb | en-us | es | fi | fr | fr-be | fr-ca | fr-ch | hu | is | it | ja | lt | mk | nl | no | pl | pt | pt-br | sl | sv | tr&amp;gt;</span></dt>
<dd>
<p>
VNCサーバーのキーボードレイアウト。通常は不要であり、ゲストOS内で設定する方が望ましい場合が多い。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--kvm</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
KVMハードウェア仮想化の有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--localtime</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
リアルタイムクロック（RTC）を現地時間に設定します。<span class="monospaced">OSタイプがMicrosoft</span>Windows OSを示す場合、デフォルトで有効になります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lock</span> <span class="monospaced">&amp;lt;backup | clone | create | migrate | rollback | snapshot | snapshot-delete | suspended | suspending&amp;gt;</span></dt>
<dd>
<p>
VMのロック/ロック解除。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--machine</span> <span class="monospaced">[[type=]&amp;lt;マシンタイプ&amp;gt;] [,enable-s3=&amp;lt;1|0&amp;gt;] [,enable-s4=&amp;lt;1|0&amp;gt;] [,viommu=&amp;lt;intel|virtio&amp;gt;]</span></dt>
<dd>
<p>
QEMUマシンを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--memory</span> <span class="monospaced">[current=]&amp;lt;integer&amp;gt;</span></dt>
<dd>
<p>
メモリプロパティ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migrate_downtime</span> <span class="monospaced">&amp;lt;number&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0.1</span>)</dt>
<dd>
<p>
移行時の最大許容ダウンタイム（秒単位）を設定します。移行終了間際に、新規に更新されたRAMの転送量が多すぎて収束できない場合、移行が収束するまで制限値が段階的に自動的に増加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migrate_speed</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
移行の最大速度（MB/s単位）を設定します。値0は制限なしを意味します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--name</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
VMの名前を設定します。設定Webインターフェースでのみ使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nameserver</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
cloud-init: コンテナのDNSサーバーIPアドレスを設定します。searchdomainとnameserverの両方が設定されていない場合、作成時にはホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--net[n]</span> <span class="monospaced">[model=]&amp;lt;enum&amp;gt; [,bridge=&amp;lt;bridge&amp;gt;] [,firewall=&amp;lt;1|0&amp;gt;] [,link_down=&amp;lt;1|0&amp;gt;] [,macaddr=&amp;lt;XX:XX:XX:XX:XX:XX&amp;gt;] [,mtu=&amp;lt;integer&amp;gt;][,queues=&amp;lt;integer&amp;gt;] [,rate=&amp;lt;number&amp;gt;] [,tag=&amp;lt;integer&amp;gt;] [,trunks=&amp;lt;vlanid[;vlanid...]&amp;gt;] [,&amp;lt;model&amp;gt;=&amp;lt;macaddr&amp;gt;]</span></dt>
<dd>
<p>
ネットワークデバイスを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--numa</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
NUMAの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--numa[n]</span> <span class="monospaced">cpus=&amp;lt;id[-id];...&amp;gt; [,hostnodes=&amp;lt;id[-id];...&amp;gt;] [,memory=&amp;lt;number&amp;gt;] [,policy=&amp;lt;preferred|bind|interleave&amp;gt;]</span></dt>
<dd>
<p>
NUMAトポロジー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--onboot</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時にVMを起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ostype</span> <span class="monospaced">&amp;lt;l24 | l26 | other | solaris | w2k | w2k3 | w2k8 | win10 | win11 | win7 | win8 | wvista | wxp&amp;gt;</span></dt>
<dd>
<p>
ゲストオペレーティングシステムを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--parallel[n]</span> <span class="monospaced">/dev/parport\d+|/dev/usb/lp\d+</span></dt>
<dd>
<p>
ホスト並列デバイスをマッピング（nは0～2）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--protection</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
VMの保護フラグを設定します。これにより、VMの削除およびディスク削除操作が無効化されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--reboot</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
再起動を許可。<em>0に設定</em>すると再起動時にVMが終了する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--revert</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
保留中の変更を元に戻す。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rng0</span> <span class="monospaced">[source=]&amp;lt;/dev/urandom|/dev/random|/dev/hwrng&amp;gt; [,max_bytes=&amp;lt;integer&amp;gt;] [,period=&amp;lt;integer&amp;gt;]</span></dt>
<dd>
<p>
VirtIOベースの乱数生成器を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sata[n]</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,aio=&amp;lt;ネイティブ|スレッド|io_uring&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;秒&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;seconds&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;seconds&amp;gt;] [,cache=&amp;lt;enum&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;][,破棄=&amp;lt;無視|有効&amp;gt;] [,フォーマット=&amp;lt;列挙型&amp;gt;] [,インポート元=&amp;lt;ソースボリューム&amp;gt;] [,I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数持続時間=&amp;lt;秒&amp;gt;][,iops_rd=&amp;lt;iops&amp;gt;] [,iops_rd_max=&amp;lt;iops&amp;gt;] [,iops_rd_max_length=&amp;lt;seconds&amp;gt;] [,iops_wr=&amp;lt;iops&amp;gt;] [,iops_wr_max=&amp;lt;iops&amp;gt;][,iops_wr_max_length=&amp;lt;seconds&amp;gt;] [,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;] [,mbps_wr=&amp;lt;mbps&amp;gt;][,書き込み最大Mb/秒&amp;lt;Mb/秒&amp;gt;] [,メディア&amp;lt;CD-ROM|ディスク&amp;gt;] [,レプリケーション&amp;lt;1|0&amp;gt;] [,再エラー&amp;lt;無視|報告|停止&amp;gt;] [,シリアル&amp;lt;シリアル&amp;gt;] [,共有&amp;lt;1|0&amp;gt;][,size=&amp;lt;DiskSize&amp;gt;] [,snapshot=&amp;lt;1|0&amp;gt;] [,ssd=&amp;lt;1|0&amp;gt;] [,werror=&amp;lt;enum&amp;gt;] [,wwn=&amp;lt;wwn&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをSATAハードディスクまたはCD-ROMとして使用（nは0～5）。新規ボリュームの割り当てには特殊構文STORAGE_ID:SIZE_IN_GiBを使用。既存ボリュームからのインポートにはSTORAGE_ID:<em>0とimport-from</em>パラメータを使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scsi[n]</span> <span class="monospaced">[file=]&amp;lt;volume&amp;gt; [,aio=&amp;lt;native|threads|io_uring&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;seconds&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;seconds&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;seconds&amp;gt;] [,cache=&amp;lt;enum&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;][,破棄=&amp;lt;無視|有効&amp;gt;] [,フォーマット=&amp;lt;列挙型&amp;gt;] [,インポート元=&amp;lt;ソースボリューム&amp;gt;] [,I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数持続時間=&amp;lt;秒&amp;gt;][,iops_rd=&amp;lt;iops&amp;gt;] [,iops_rd_max=&amp;lt;iops&amp;gt;] [,iops_rd_max_length=&amp;lt;seconds&amp;gt;] [,iops_wr=&amp;lt;iops&amp;gt;] [,iops_wr_max=&amp;lt;iops&amp;gt;][,iops_wr_max_length=&amp;lt;秒数&amp;gt;] [,iothread=&amp;lt;1|0&amp;gt;] [,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;][,書き込みMbps&amp;lt;Mbps&amp;gt;] [,書き込みMbps上限&amp;lt;Mbps&amp;gt;] [,メディア&amp;lt;CD-ROM|ディスク&amp;gt;] [,製品&amp;lt;製品名&amp;gt;] [,キュー数&amp;lt;整数&amp;gt;] [,レプリケーション&amp;lt;1|0&amp;gt;][,rerror=&amp;lt;無視|報告|停止&amp;gt;] [,ro=&amp;lt;1|0&amp;gt;] [,scsiblock=&amp;lt;1|0&amp;gt;] [,serial=&amp;lt;シリアル番号&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;][,size=&amp;lt;DiskSize&amp;gt;] [,snapshot=&amp;lt;1|0&amp;gt;] [,ssd=&amp;lt;1|0&amp;gt;] [,vendor=&amp;lt;vendor&amp;gt;] [,werror=&amp;lt;enum&amp;gt;] [,wwn=&amp;lt;wwn&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをSCSIハードディスクまたはCD-ROMとして使用（nは0～30）。新しいボリュームを割り当てるには特別な構文STORAGE_ID:SIZE_IN_GiBを使用。既存のボリュームからインポートするにはSTORAGE_ID:<em>0とimport-from</em>パラメータを使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scsihw</span> <span class="monospaced">&amp;lt;lsi | lsi53c810 | megasas | pvscsi | virtio-scsi-pci | virtio-scsi-single&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">lsi</span>)</dt>
<dd>
<p>
SCSIコントローラモデル</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--searchdomain</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
cloud-init: コンテナのDNS検索ドメインを設定します。searchdomainもnameserverも設定されていない場合、作成時はホストの設定を自動的に使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--serial[n]</span> <span class="monospaced">(/dev/.+|socket)</span></dt>
<dd>
<p>
VM内にシリアルデバイスを作成（nは0～3）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--shares</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - 50000)</span>(<em>デフォルト =</em> <span class="monospaced">1000</span>)</dt>
<dd>
<p>
自動バルーニング用のメモリシェア量。数値が大きいほど、このVMが割り当てられるメモリが増加します。数値は他の稼働中の全VMのウェイトに対する相対値です。0を使用すると自動バルーニングが無効になります。自動バルーニングはpvestatdによって実行されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ロックを無視 - このオプションの使用はrootのみに許可されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smbios1</span> <span class="monospaced">[base64=&amp;lt;1|0&amp;gt;] [,family=&amp;lt;Base64エンコード文字列&amp;gt;] [,manufacturer=&amp;lt;Base64エンコード文字列&amp;gt;][,product=&amp;lt;Base64エンコード文字列&amp;gt;] [,serial=&amp;lt;Base64エンコード文字列&amp;gt;] [,sku=&amp;lt;Base64エンコード文字列&amp;gt;] [,uuid=&amp;lt;UUID&amp;gt;] [,version=&amp;lt;Base64エンコード文字列&amp;gt;]</span></dt>
<dd>
<p>
SMBIOS タイプ 1 フィールドを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--smp</span> <span class="monospaced">&amp;lt;整数&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPUの数。代わりにオプション -sockets を使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sockets</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
CPUソケットの数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--spice_enhancements</span> <span class="monospaced">[foldersharing=&amp;lt;1|0&amp;gt;] [,videostreaming=&amp;lt;off|all|filter&amp;gt;]</span></dt>
<dd>
<p>
SPICEの追加機能設定を行います。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sshkeys</span> <span class="monospaced">&amp;lt;ファイルパス&amp;gt;</span></dt>
<dd>
<p>
cloud-init: 公開SSH鍵を設定（1行に1鍵、OpenSSH形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startdate</span> <span class="monospaced">(now | YYYY-MM-DD | YYYY-MM-DDTHH:MM:SS)</span>(<em>デフォルト =</em> <span class="monospaced">now</span>)</dt>
<dd>
<p>
リアルタイムクロックの初期日付を設定します。日付の有効な形式は次の通りです：'now' または<em>2006-06-17T16:01:21</em>または<em>2006-06-17</em>。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startup</span>`[[order=]\d+] [,up=\d+] [,down=\d+] ` </dt>
<dd>
<p>
起動およびシャットダウン時の動作。順序は起動時の一般的な順序を定義する非負の数値です。シャットダウンは逆順で行われます。さらに、<em>起動</em>または<em>停止後の</em>待機時間を秒単位で設定できます。これは次のVMが起動または停止されるまでの待機時間を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tablet</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
USBタブレットデバイスの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tags</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
仮想マシンのタグ。これはメタ情報のみです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tdf</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
タイムドリフト修正の有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--template</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tpmstate0</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,import-from=&amp;lt;ソースボリューム&amp;gt;] [,size=&amp;lt;ディスクサイズ&amp;gt;] [,version=&amp;lt;v1.2|v2.0&amp;gt;]</span></dt>
<dd>
<p>
TPM状態保存用ディスクの設定。フォーマットは<em>固定でRAW</em>。新規ボリューム割り当てには特殊構文STORAGE_ID:SIZE_IN_GiBを使用。注：SIZE_IN_GiBは無視され、代わりに4MiBが使用される。既存ボリュームからのインポートにはSTORAGE_ID:<em>0とimport-from</em>パラメータを使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unused[n]</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt;</span></dt>
<dd>
<p>
未使用ボリュームへの参照。内部で使用されるため、手動で変更しないでください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--usb[n]</span> <span class="monospaced">[[host=]&amp;lt;HOSTUSBDEVICE|spice&amp;gt;] [,mapping=&amp;lt;mapping-id&amp;gt;] [,usb3=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
USBデバイスの設定（nは0～4。マシンバージョン≥7.1かつostype l26、またはWindows 7以上の場合、nは最大14まで設定可能）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vcpus</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ホットプラグされた vcpu の数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vga</span> <span class="monospaced">[[type=]&amp;lt;enum&amp;gt;] [,clipboard=&amp;lt;vnc&amp;gt;] [,memory=&amp;lt;integer&amp;gt;]</span></dt>
<dd>
<p>
VGAハードウェアを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--virtio[n]</span> <span class="monospaced">[file=]&amp;lt;ボリューム&amp;gt; [,aio=&amp;lt;ネイティブ|スレッド|io_uring&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,bps=&amp;lt;bps&amp;gt;] [,bps_max_length=&amp;lt;秒&amp;gt;] [,bps_rd=&amp;lt;bps&amp;gt;][,bps_rd_max_length=&amp;lt;seconds&amp;gt;] [,bps_wr=&amp;lt;bps&amp;gt;] [,bps_wr_max_length=&amp;lt;seconds&amp;gt;] [,cache=&amp;lt;enum&amp;gt;] [,detect_zeroes=&amp;lt;1|0&amp;gt;][,破棄=&amp;lt;無視|有効&amp;gt;] [,フォーマット=&amp;lt;列挙型&amp;gt;] [,インポート元=&amp;lt;ソースボリューム&amp;gt;] [,I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数=&amp;lt;I/O操作数&amp;gt;] [,最大I/O操作数持続時間=&amp;lt;秒&amp;gt;][,iops_rd=&amp;lt;iops&amp;gt;] [,iops_rd_max=&amp;lt;iops&amp;gt;] [,iops_rd_max_length=&amp;lt;seconds&amp;gt;] [,iops_wr=&amp;lt;iops&amp;gt;] [,iops_wr_max=&amp;lt;iops&amp;gt;][,iops_wr_max_length=&amp;lt;seconds&amp;gt;] [,iothread=&amp;lt;1|0&amp;gt;] [,mbps=&amp;lt;mbps&amp;gt;] [,mbps_max=&amp;lt;mbps&amp;gt;] [,mbps_rd=&amp;lt;mbps&amp;gt;] [,mbps_rd_max=&amp;lt;mbps&amp;gt;][,書き込みmbps&amp;lt;mbps&amp;gt;] [,書き込みmbps上限&amp;lt;mbps&amp;gt;] [,メディア&amp;lt;cdrom|disk&amp;gt;] [,レプリケーション&amp;lt;1|0&amp;gt;] [,エラー処理&amp;lt;無視|報告|停止&amp;gt;] [,読み取り専用&amp;lt;1|0&amp;gt;][,シリアル=&amp;lt;シリアル&amp;gt;] [,共有=&amp;lt;1|0&amp;gt;] [,サイズ=&amp;lt;ディスクサイズ&amp;gt;] [,スナップショット=&amp;lt;1|0&amp;gt;] [,書き込みエラー=&amp;lt;列挙型&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをVIRTIOハードディスクとして使用（nは0～15）。新規ボリュームの割り当てには特殊構文STORAGE_ID:SIZE_IN_GiBを使用。既存ボリュームからのインポートにはSTORAGE_ID:<em>0とimport-from</em>パラメータを使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--virtiofs[n]</span> <span class="monospaced">[dirid=]&amp;lt;マッピングID&amp;gt; [,cache=&amp;lt;列挙型&amp;gt;] [,direct-io=&amp;lt;1|0&amp;gt;] [,expose-acl=&amp;lt;1|0&amp;gt;] [,expose-xattr=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
Virtio-fsを使用してホストとゲスト間でディレクトリを共有するための設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmgenid</span> <span class="monospaced">&amp;lt;UUID&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1 (自動生成)</span>)</dt>
<dd>
<p>
VM 世代 ID を設定します。作成時または更新時に自動生成するには<em>1 を</em>、明示的に無効化するには<em>0</em>を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmstatestorage</span> <span class="monospaced">&amp;lt;ストレージID&amp;gt;</span></dt>
<dd>
<p>
VM状態ボリューム/ファイルのデフォルトストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--watchdog</span> <span class="monospaced">[[model=]&amp;lt;i6300esb|ib700&amp;gt;] [,action=&amp;lt;enum&amp;gt;]</span></dt>
<dd>
<p>
仮想ハードウェアのウォッチドッグデバイスを作成します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm showcmd</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>VM 起動に使用されるコマンドラインを表示します（デバッグ情報）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pretty</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
各オプションを改行して人間の可読性を向上</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スナップショット</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
指定されたスナップショットから設定値を取得します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm shutdown</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>仮想マシンをシャットダウンします。これは物理マシンの電源ボタンを押すのと同様です。ゲストOSにACPIイベントを送信し、クリーンなシャットダウンを実行します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--forceStop</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
VMが確実に停止していることを確認する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keepActive</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ストレージボリュームを非アクティブ化しない。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ロックを無視 - このオプションの使用はrootのみ許可される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--タイムアウト</span> <span class="monospaced">&amp;lt;整数&amp;gt; (0 - N)</span></dt>
<dd>
<p>
最大タイムアウト秒待機。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm snapshot</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;snapname&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>仮想マシンのスナップショットを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;snapname&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--description</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
テキストによる説明またはコメント。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmstate</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
vmstateを保存</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm start</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>仮想マシンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force-cpu</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
指定された文字列でQEMUの-cpu引数を上書きします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--machine</span> <span class="monospaced">[[type=]&amp;lt;machine type&amp;gt;] [,enable-s3=&amp;lt;1|0&amp;gt;] [,enable-s4=&amp;lt;1|0&amp;gt;] [,viommu=&amp;lt;intel|virtio&amp;gt;]</span></dt>
<dd>
<p>
QEMUマシンを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migratedfrom</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
クラスタノード名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migration_network</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
移行に使用される（サブ）ネットワークのCIDR。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migration_type</span> <span class="monospaced">&amp;lt;insecure | secure&amp;gt;</span></dt>
<dd>
<p>
移行トラフィックはデフォルトでSSHトンネル経由で暗号化されます。安全で完全にプライベートなネットワークでは、パフォーマンス向上のためにこれを無効化できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ロックを無視 - このオプションはrootのみが使用可能。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--stateuri</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
一部のコマンドはこの場所から状態を保存/復元します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--targetstorage</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ソースからターゲットストレージへのマッピング。単一のストレージIDのみを指定すると、すべてのソースストレージがそのストレージにマッピングされます。特別な値<em>1</em>を指定すると、各ソースストレージが自身にマッピングされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--timeout</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">max(30, vm メモリ in GiB)</span>)</dt>
<dd>
<p>
最大待機時間（秒）を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--with-conntrack-state</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
実行中のVMの接続追跡エントリを移行するかどうか。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm status</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>仮想マシンの状態を表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm stop</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>仮想マシンを停止します。qemuプロセスは直ちに終了します。これは動作中のコンピュータの電源プラグを抜くことに相当し、VMデータが破損する可能性があります。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keepActive</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ストレージボリュームを非アクティブ化しない。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migratedfrom</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
クラスタノード名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--overrule-shutdown</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
停止前にアクティブな<em>qmshutdownタスクを</em>中止しようとする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ロックを無視する - このオプションはrootのみが使用可能。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--timeout</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
最大タイムアウト秒待機。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm suspend</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>仮想マシンをサスペンドします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ロックを無視 - このオプションの使用はrootのみに許可される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--statestorage</span> <span class="monospaced">&amp;lt;ストレージID&amp;gt;</span></dt>
<dd>
<p>
VM状態の保存先</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">オプションが必要です:<span class="monospaced">todisk</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--todisk</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定すると、VMをディスクにサスペンドします。次のVM起動時に再開されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm template</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>テンプレートを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--disk</span> <span class="monospaced">&amp;lt;efidisk0 | ide0 | ide1 | ide2 | ide3 | sata0 | sata1 | sata2 | sata3 | sata4 | sata5 | scsi0 | scsi1 | scsi10 | scsi11 | scsi12 | scsi13 | scsi14 | scsi15 | scsi16 | scsi17 | scsi18 | scsi19 | scsi2 | scsi20 | scsi21 | scsi22 | scsi23 | scsi24 | scsi25 | scsi26 | scsi27 | scsi28 | scsi29 | scsi3 | scsi30 | scsi4 | scsi5 | scsi6 | scsi7 | scsi8 | scsi9 | tpmstate0 | virtio0 | virtio1 | virtio10 | virtio11 | virtio12 | virtio13 | virtio14 | virtio15 | virtio2 | virtio3 | virtio4 | virtio5 | virtio6 | virtio7 | virtio8 | virtio9&amp;gt;</span></dt>
<dd>
<p>
1つのディスクのみをベースイメージに変換する場合。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm terminal</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>シリアルデバイスを使用してターミナルを開く（VMにシリアルデバイスが設定されている必要がある
例：<em>serial0: socket</em>）</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--escape</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">^O</span>)</dt>
<dd>
<p>
エスケープ文字。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--iface</span> <span class="monospaced">&amp;lt;serial0 | serial1 | serial2 | serial3&amp;gt;</span></dt>
<dd>
<p>
シリアルデバイスを選択します。デフォルトでは、最初に適したデバイスを使用します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm unlink</strong></p></div>
<div class="paragraph">
<p><em>qm disk unlink</em> の別名。</p></div>
<div class="paragraph">
<p><strong>qm unlock</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>VM のロックを解除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm vncproxy</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>VMのVNCトラフィックを標準入力/標準出力にプロキシします</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>qm wait</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>VMが停止するまで待機します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--timeout</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span></dt>
<dd>
<p>
タイムアウト（秒単位）。デフォルトは無制限待機。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_qmrestore_strong_restore_qemuserver_span_class_monospaced_vzdump_span_backups">
<span>22.10.<strong>qmrestore</strong>- QemuServer<span class="monospaced">vzdump</span>バックアップの復元</span>
<a class="headerlink" href="#_strong_qmrestore_strong_restore_qemuserver_span_class_monospaced_vzdump_span_backups" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>qmrestore</strong> <span class="monospaced">ヘルプ</span></p></div>
<div class="paragraph">
<p><strong>qmrestore</strong> <span class="monospaced">&amp;lt;アーカイブ&amp;gt; &amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>QemuServer vzdump バックアップを復元します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;archive&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
バックアップファイル。標準入力から読み込む場合は<em>-</em>を指定できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&amp;lt;number&amp;gt; (0 - N)</span></dt>
<dd>
<p>
I/O帯域幅制限（KiB/s単位）を上書きする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
既存のVMを上書きすることを許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ライブ復元</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
バックアップから直ちにVMを起動し、復元をバックグラウンドで実行。PBS専用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pool</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
指定されたプールにVMを追加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--storage</span> <span class="monospaced">&amp;lt;ストレージID&amp;gt;</span></dt>
<dd>
<p>
デフォルトのストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unique</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
一意のランダムイーサネットアドレスを割り当てます。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pct_strong_proxmox_container_toolkit">
<span>22.11.<strong>pct</strong>- Proxmox Container</span>Tool<span>kit</span>
<a class="headerlink" href="#_strong_pct_strong_proxmox_container_toolkit" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pct</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pct clone</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;newid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>コンテナのクローン/コピーを作成します</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;newid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
クローン用のVMID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&amp;lt;number&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定からのクローン制限</span>)</dt>
<dd>
<p>
I/O帯域幅制限の上書き（KiB/s単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--description</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
新規CTの説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--full</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
すべてのディスクの完全なコピーを作成します。通常のCTをクローンする場合、これは常に実行されます。CTテンプレートの場合、デフォルトではリンククローンを作成しようとします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hostname</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
新規CTのホスト名を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pool</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
新しいCTを指定されたプールに追加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スナップ名</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--storage</span> <span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
フルクローン用のターゲットストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ターゲットノード。元のVMが共有ストレージ上にある場合にのみ許可されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct config</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>コンテナ設定を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--current</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
現在の値を取得（保留中の値ではなく）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スナップショット</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
指定されたスナップショットから設定値を取得する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct console</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>指定されたコンテナのコンソールを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--escape</span> <span class="monospaced">\^?[a-z]</span>(<em>デフォルト =</em> <span class="monospaced">^a</span>)</dt>
<dd>
<p>
エスケープシーケンスのプレフィックス。例：&amp;lt;Ctrl+b q&amp;gt; をエスケープシーケンスとして使用するには<em>^b</em> を渡す。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct cpusets</strong></p></div>
<div class="paragraph">
<p>割り当てられたCPUセットのリストを出力します。</p></div>
<div class="paragraph">
<p><strong>pct create</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;ostemplate&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>コンテナを作成または復元します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;ostemplate&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
OSテンプレートまたはバックアップファイル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--arch</span> <span class="monospaced">&amp;lt;amd64 | arm64 | armhf | i386 | riscv32 | riscv64&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">amd64</span>)</dt>
<dd>
<p>
OSアーキテクチャタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&amp;lt;number&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定から制限を復元</span>)</dt>
<dd>
<p>
I/O帯域幅制限の上書き（KiB/s単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cmode</span> <span class="monospaced">&amp;lt;console | shell | tty&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">tty</span>)</dt>
<dd>
<p>
コンソールモード。デフォルトでは、コンソールコマンドは利用可能なttyデバイスの一つへの接続を開こうとします。cmode<em>をconsole</em>に設定すると、代わりに/dev/consoleへのアタッチを試みます。cmodeを<em>shell</em>に設定すると、コンテナ内で単純にシェルを起動します（ログインなし）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--console</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
コンソールデバイス（/dev/console）をコンテナにアタッチします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cores</span> <span class="monospaced">&amp;lt;整数&amp;gt; (1 - 8192)</span></dt>
<dd>
<p>
コンテナに割り当てられるコア数。デフォルトではコンテナは利用可能な全コアを使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpulimit</span> <span class="monospaced">&amp;lt;数値&amp;gt; (0 - 8192)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用率の上限。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンピュータに 2 つの CPU がある場合、合計<em>2</em>CPU 時間が割り当てられます。値<em>0 は</em>CPU 制限なしを示します。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpuunits</span> <span class="monospaced">&amp;lt;整数&amp;gt; (0 - 500000)</span>(<em>デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
コンテナのCPUウェイト。cgroup v2では[1, 10000]の範囲に制限されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
より詳細なログを出力するよう試みます。現時点では起動時のデバッグログレベルのみ有効化されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--description</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
コンテナの説明。WebインターフェースのCT概要に表示されます。設定ファイル内にコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dev[n]</span> <span class="monospaced">[[path=]&amp;lt;パス&amp;gt;] [,deny-write=&amp;lt;1|0&amp;gt;] [,gid=&amp;lt;整数&amp;gt;] [,mode=&amp;lt;8進アクセスモード&amp;gt;] [,uid=&amp;lt;整数&amp;gt;]</span></dt>
<dd>
<p>
コンテナに渡すデバイス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--features</span> <span class="monospaced">[force_rw_sys=&amp;lt;1|0&amp;gt;] [,fuse=&amp;lt;1|0&amp;gt;][,keyctl=&amp;lt;1|0&amp;gt;] [,mknod=&amp;lt;1|0&amp;gt;] [,mount=&amp;lt;fstype;fstype;...&amp;gt;] [,nesting=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
コンテナが高度な機能にアクセスすることを許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
既存コンテナの上書きを許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hookscript</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのライフサイクルにおける各種ステップで実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hostname</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのホスト名を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ignore-unpack-errors</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
テンプレート抽出時のエラーを無視する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lock</span> <span class="monospaced">&amp;lt;backup | create | destroyed | disk | fstrim | migrate | mounted | rollback | snapshot | snapshot-delete&amp;gt;</span></dt>
<dd>
<p>
コンテナをロック/ロック解除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--memory</span> <span class="monospaced">&amp;lt;integer&amp;gt; (16 - N)</span>(<em>デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
コンテナのRAM容量（MB単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mp[n]</span> <span class="monospaced">[volume=]&amp;lt;ボリューム&amp;gt; ,mp=&amp;lt;パス&amp;gt; [,acl=&amp;lt;1|0&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,mountoptions=&amp;lt;オプション[;オプション...]&amp;gt;] [,quota=&amp;lt;1|0&amp;gt;][,replicate=&amp;lt;1|0&amp;gt;] [,ro=&amp;lt;1|0&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;DiskSize&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをコンテナのマウントポイントとして使用します。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nameserver</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのDNSサーバーIPアドレスを設定します。searchdomainもnameserverも設定しない場合、作成時にホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--net[n]</span> <span class="monospaced">name=&amp;lt;string&amp;gt; [,bridge=&amp;lt;bridge&amp;gt;] [,firewall=&amp;lt;1|0&amp;gt;] [,gw=&amp;lt;GatewayIPv4&amp;gt;] [,gw6=&amp;lt;GatewayIPv6&amp;gt;][,hwaddr=&amp;lt;XX:XX:XX:XX:XX:XX&amp;gt;] [,ip=&amp;lt;(IPv4/CIDR|dhcp|manual)&amp;gt;] [,ip6=&amp;lt;(IPv6/CIDR|auto|dhcp|manual)&amp;gt;] [,link_down=&amp;lt;1|0&amp;gt;][,mtu=&amp;lt;整数&amp;gt;] [,rate=&amp;lt;Mbps&amp;gt;] [,tag=&amp;lt;整数&amp;gt;] [,trunks=&amp;lt;vlanid[;vlanid...]&amp;gt;] [,type=&amp;lt;veth&amp;gt;]</span></dt>
<dd>
<p>
コンテナのネットワークインターフェースを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--onboot</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時にコンテナを起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ostype</span> <span class="monospaced">&amp;lt;alpine | archlinux | centos | debian | devuan | fedora | gentoo | nixos | opensuse | ubuntu | unmanaged&amp;gt;</span></dt>
<dd>
<p>
OSタイプ。コンテナ内の設定を構成するために使用され、/usr/share/lxc/config/&amp;lt;ostype&amp;gt;.common.conf 内の lxc セットアップスクリプトに対応します。値<em>unmanaged</em>を使用すると、OS固有の設定をスキップできます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パスワード</span> <span class="monospaced">&amp;lt;パスワード&amp;gt;</span></dt>
<dd>
<p>
コンテナ内のrootパスワードを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pool</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
指定されたプールにVMを追加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--protection</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナの保護フラグを設定します。これにより、コンテナまたはコンテナのディスクの削除/更新操作が防止されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--restore</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
復元タスクとしてマークします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rootfs</span> <span class="monospaced">[volume=]&amp;lt;ボリューム&amp;gt; [,acl=&amp;lt;1|0&amp;gt;] [,mountoptions=&amp;lt;オプション[;オプション...]&amp;gt;] [,quota=&amp;lt;1|0&amp;gt;][,replicate=&amp;lt;1|0&amp;gt;] [,ro=&amp;lt;1|0&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;DiskSize&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをコンテナのルートとして使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--searchdomain</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのDNS検索ドメインを設定します。searchdomainとnameserverの両方を設定しない場合、作成時にはホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ssh-public-keys</span> <span class="monospaced">&amp;lt;ファイルパス&amp;gt;</span></dt>
<dd>
<p>
公開SSHキーを設定（1行に1キー、OpenSSH形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--start</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
作成成功後にCTを起動する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startup</span>`[[order=]\d+] [,up=\d+] [,down=\d+] ` </dt>
<dd>
<p>
起動およびシャットダウンの動作。順序は起動の一般的な順序を定義する非負の数値です。シャットダウンは逆順で実行されます。さらに、<em>アップ</em>または<em>ダウンの</em>遅延（秒単位）を設定でき、これは次のVMが起動または停止されるまでの待機時間を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--storage</span> <span class="monospaced">&amp;lt;ストレージID&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">local</span>)</dt>
<dd>
<p>
デフォルトストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--swap</span> <span class="monospaced">&amp;lt;整数&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
コンテナのSWAP容量（MB単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tags</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
コンテナのタグ。これはメタ情報のみです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--template</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--timezone</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナ内で使用するタイムゾーン。設定しない場合は何も行われません。ホストのタイムゾーンに合わせるために<em>「host」</em>に設定するか、/usr/share/zoneinfo/zone.tab からの任意のタイムゾーンオプションを設定できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tty</span> <span class="monospaced">&amp;lt;整数&amp;gt; (0 - 6)</span>(<em>デフォルト =</em> <span class="monospaced">2</span>)</dt>
<dd>
<p>
コンテナで使用可能なttyの数を指定</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unique</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
一意のランダムなイーサネットアドレスを割り当てます。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">restore</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unprivileged</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナを非特権ユーザーとして実行します（手動で変更しないでください）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unused[n]</span> <span class="monospaced">[volume=]&amp;lt;volume&amp;gt;</span></dt>
<dd>
<p>
未使用ボリュームへの参照。内部で使用されるため、手動で変更しないでください。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct delsnapshot</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;snapname&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>LXCスナップショットを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;snapname&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ディスクスナップショットの削除に失敗した場合でも、設定ファイルから削除される。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct destroy</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>コンテナを破棄します（使用中のファイルもすべて削除します）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--destroy-unreferenced-disks</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
設定されている場合、設定ファイルで参照されていないすべての有効なストレージから、該当するVMIDを持つディスクを追加で破壊する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
実行中であっても強制的に破棄する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--purge</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
関連するすべての構成（例：バックアップジョブ、レプリケーションジョブ、HA）からコンテナを削除します。関連するACLとファイアウォールエントリは<strong>常に</strong>削除されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct df</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>コンテナの現在のディスク使用状況を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct enter</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定されたコンテナ用のシェルを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep-env</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
現在の環境を維持します。このオプションはPVE 9以降デフォルトで無効化されます。環境の維持が必要な場合は、将来の互換性を確保するためこのオプションを使用してください。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct exec</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; [&amp;lt;追加引数&amp;gt;]</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定されたコンテナ内でコマンドを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;extra-args&amp;gt;</span>:<span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
追加引数を配列として指定</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep-env</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
現在の環境を維持します。このオプションはPVE 9以降デフォルトで無効化されます。環境の維持に依存する場合は、将来の互換性確保のため本オプションをご利用ください。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct fsck</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>コンテナボリュームのファイルシステムチェック（fsck）を実行します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;整数&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--device</span> <span class="monospaced">&amp;lt;mp0 | mp1 | mp10 | mp100 | mp101 | mp102 | mp103 | mp104 | mp105 | mp106 | mp107 | mp108 | mp109 | mp11 | mp110 | mp111 | mp112 | mp113 | mp114 | mp115 | mp116 | mp117 | mp118 | mp119 | mp12 | mp120 | mp121 | mp122 | mp123 | mp124 | mp125 | mp126 | mp127 | mp128 | mp129 | mp13 | mp130 | mp131 | mp132 | mp133 | mp134 | mp135 | mp136 | mp137 | mp138 | mp139 | mp14 | mp140 | mp141 | mp142 | mp143 | mp144 | mp145 | mp146 | mp147 | mp148 | mp149 | mp15 | mp150 | mp151 | mp152 | mp153 |mp154 | mp155 | mp156 | mp157 | mp158 | mp159 | mp16 | mp160 | mp161 | mp162 | mp163 | mp164 | mp165 | mp166 | mp167 | mp168 | mp169 | mp17 | mp170 | mp171 | mp172 | mp173 | mp174 | mp175 | mp176 | mp177 | mp178 | mp179 | mp18 | mp180 | mp181 | mp182 | mp183 | mp184 | mp185 | mp186 | mp187 | mp188 | mp189 | mp19 | mp190| mp191 | mp192 | mp193 | mp194 | mp195 | mp196 | mp197 | mp198 | mp199 | mp2 | mp20 | mp200 | mp201 | mp202 | mp203 | mp204 | mp205 | mp206 | mp207 | mp208 | mp209 | mp21 | mp210 | mp211 | mp212 | mp213 | mp214 | mp215 | mp216 | mp217 | mp218 | mp219 | mp22 | mp220 | mp221 | mp222 | mp223 | mp224 | mp225 | mp226 | mp227| mp228 | mp229 | mp23 | mp230 | mp231 | mp232 | mp233 | mp234 | mp235 | mp236 | mp237 | mp238 | mp239 | mp24 | mp240 | mp241 | mp242 | mp243 | mp244 | mp245 | mp246 | mp247 | mp248 | mp249 | mp25 | mp250 | mp251 | mp252 | mp253 | mp254 | mp255 | mp26 | mp27 | mp28 | mp29 | mp3 | mp30 | mp31 | mp32 | mp33 | mp34 | mp35 | mp36 |mp37 | mp38 | mp39 | mp4 | mp40 | mp41 | mp42 | mp43 | mp44 | mp45 | mp46 | mp47 | mp48 | mp49 | mp5 | mp50 | mp51 | mp52 | mp53 | mp54 | mp55 | mp56 | mp57 | mp58 | mp59 | mp6| mp60 | mp61 | mp62 | mp63 | mp64 | mp65 | mp66 | mp67 | mp68 | mp69 | mp7 | mp70 | mp71 | mp72 | mp73 | mp74 | mp75 | mp76 | mp77 | mp78 | mp79 | mp8 | mp80 | mp81 | mp82 | mp83 | mp84 | mp85 | mp86 | mp87 | mp88 | mp89 | mp9 | mp90 | mp91 | mp92 | mp93 | mp94 | mp95 | mp96 | mp97 | mp98 | mp99 | rootfs&amp;gt;</span></dt>
<dd>
<p>
ファイルシステムチェックを実行するボリューム</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ファイルシステムが正常に見える場合でも強制的にチェックを実行</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct fstrim</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>選択したCTとそのマウントポイント（bindまたはread-onlyマウントポイントを除く）に対してfstrimを実行します。
pct help [オプション]</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ignore-mountpoints</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
すべてのマウントポイントをスキップし、コンテナルートでのみfstrimを実行する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定したコマンドのヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;配列&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示する</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct list</strong></p></div>
<div class="paragraph">
<p>LXC コンテナインデックス（ノードごと）。</p></div>
<div class="paragraph">
<p><strong>pct listsnapshot</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>すべてのスナップショットを一覧表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct migrate</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;target&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>コンテナを別のノードに移行します。新しい移行タスクを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;target&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ターゲットノード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&amp;lt;number&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定からの移行制限</span>)</dt>
<dd>
<p>
I/O帯域幅制限を上書き（KiB/s単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--online</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
オンライン/ライブ移行を使用する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--restart</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
再起動マイグレーションを使用</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target-storage</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ソースからターゲットストレージへのマッピング。単一のストレージIDのみを指定すると、すべてのソースストレージがそのストレージにマッピングされます。特別な値<em>1</em>を指定すると、各ソースストレージが自身にマッピングされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--timeout</span> <span class="monospaced">&amp;lt;integer&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">180</span>)</dt>
<dd>
<p>
再起動移行時のシャットダウンタイムアウト（秒単位）</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct mount</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>コンテナのファイルシステムをホストにマウントします。これによりコンテナにロックがかかり、
緊急メンテナンス時のみに限定して使用してください。
コンテナの起動と停止以外の操作はすべて妨げられます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct move-volume</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;volume&amp;gt; [&amp;lt;storage&amp;gt;] [&amp;lt;target-vmid&amp;gt;] [&amp;lt;target-volume&amp;gt;]</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>rootfs-/mp-ボリュームを別のストレージまたは別のコンテナに移動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;volume&amp;gt;</span>:<span class="monospaced">&amp;lt;mp0 | mp1 | mp10 | mp100 | mp101 | mp102 | mp103 | mp104 | mp105 | mp106 | mp107 | mp108 | mp109 | mp11 | mp110 | mp111 | mp112 | mp113 | mp114 | mp115 | mp116 | mp117 | mp118 | mp119 | mp12 | mp120 | mp121 | mp122 | mp123 | mp124 | mp125 | mp126 | mp127 | mp128 | mp129 | mp13 | mp130 | mp131 | mp132 | mp133 | mp134 | mp135 | mp136 | mp137 | mp138 | mp139 | mp14 | mp140 | mp141 | mp142 | mp143 | mp144 | mp145 | mp146 | mp147 | mp148 | mp149 | mp15 | mp150 | mp151 | mp152 | mp153 |mp154 | mp155 | mp156 | mp157 | mp158 | mp159 | mp16 | mp160 | mp161 | mp162 | mp163 | mp164 | mp165 | mp166 | mp167 | mp168 | mp169 | mp17 | mp170 | mp171 | mp172 | mp173 | mp174 | mp175 | mp176 | mp177 | mp178 | mp179 | mp18 | mp180 | mp181 | mp182 | mp183 | mp184 | mp185 | mp186 | mp187 | mp188 | mp189 | mp19 | mp190| mp191 | mp192 | mp193 | mp194 | mp195 | mp196 | mp197 | mp198 | mp199 | mp2 | mp20 | mp200 | mp201 | mp202 | mp203 | mp204 | mp205 | mp206 | mp207 | mp208 | mp209 | mp21 | mp210 | mp211 | mp212 | mp213 | mp214 | mp215 | mp216 | mp217 | mp218 | mp219 | mp22 | mp220 | mp221 | mp222 | mp223 | mp224 | mp225 | mp226 | mp227| mp228 | mp229 | mp23 | mp230 | mp231 | mp232 | mp233 | mp234 | mp235 | mp236 | mp237 | mp238 | mp239 | mp24 | mp240 | mp241 | mp242 | mp243 | mp244 | mp245 | mp246 | mp247 | mp248 | mp249 | mp25 | mp250 | mp251 | mp252 | mp253 | mp254 | mp255 | mp26 | mp27 | mp28 | mp29 | mp3 | mp30 | mp31 | mp32 | mp33 | mp34 | mp35 | mp36 |mp37 | mp38 | mp39 | mp4 | mp40 | mp41 | mp42 | mp43 | mp44 | mp45 | mp46 | mp47 | mp48 | mp49 | mp5 | mp50 | mp51 | mp52 | mp53 | mp54 | mp55 | mp56 | mp57 | mp58 | mp59 | mp6| mp60 | mp61 | mp62 | mp63 | mp64 | mp65 | mp66 | mp67 | mp68 | mp69 | mp7 | mp70 | mp71 | mp72 | mp73 | mp74 | mp75 | mp76 | mp77 | mp78 | mp79 | mp8 | mp80 | mp81 | mp82 | mp83 | mp84 | mp85 | mp86 | mp87 | mp88 | mp89 | mp9 | mp90 | mp91 | mp92 | mp93 | mp94 | mp95 | mp96 | mp97 | mp98 | mp99 | rootfs | 未使用0 | 未使用1 | 未使用10 | 未使用100 | 未使用101 | 未使用102 | 未使用103 | 未使用104 | 未使用105 | 未使用106 | 未使用107 | 未使用108 | 未使用109 | 未使用11 | 未使用110 | 未使用111 | 未使用112 | 未使用113 | 未使用114 | 未使用115 | 未使用116 | 未使用117 | 未使用118 | 未使用119 | 未使用12 | 未使用120 | 未使用121| 未使用122 | 未使用123 | 未使用124 | 未使用125 | 未使用126 | 未使用127 | 未使用128 | 未使用129 | 未使用13 | 未使用130 | 未使用131 | 未使用132 | 未使用133 | 未使用134 | 未使用135 | 未使用136 | 未使用137 | 未使用138 | 未使用139 | 未使用14 | 未使用140 | 未使用141 | 未使用142 | 未使用143 | 未使用144 | 未使用145 | 未使用146 | 未使用147 | 未使用148 | 未使用149 | 未使用15 | 未使用150 | 未使用151 | 未使用152 | 未使用153 | 未使用154 | 未使用155 | 未使用156 | 未使用157 | 未使用158 | 未使用159 | 未使用16 | 未使用160 | 未使用161 | 未使用162 | 未使用163 | 未使用164 | 未使用165 | 未使用166 | 未使用167 | 未使用168 | 未使用169 | 未使用17 | 未使用170 | 未使用171 | 未使用172 | 未使用173 | 未使用174 | 未使用175 | 未使用176 | 未使用177| 未使用178 | 未使用179 | 未使用18 | 未使用180 | 未使用181 | 未使用182 | 未使用183 | 未使用184 | 未使用185 | 未使用186 | 未使用187 | 未使用188 | 未使用189 | 未使用19 | 未使用190 | 未使用191 | 未使用192 | 未使用193 | 未使用194 | 未使用195 | 未使用196 | 未使用197 | 未使用198 | 未使用199 | 未使用2 | 未使用20 | 未使用200 | 未使用201 | 未使用202 | 未使用203 | 未使用204 | 未使用205 | 未使用206 | 未使用207 | 未使用208 | 未使用209 | 未使用21 | 未使用210 | 未使用211 | 未使用212 | 未使用213 |未使用214 | 未使用215 | 未使用216 | 未使用217 | 未使用218 | 未使用219 | 未使用22 | 未使用220 | 未使用221 | 未使用222 | 未使用223 | 未使用224 | 未使用225 | 未使用226 | 未使用227 | 未使用228 | 未使用229 | 未使用23 | 未使用230 | 未使用231 | 未使用232 | 未使用233 | 未使用234 | 未使用235 | 未使用236 | 未使用237 | 未使用238 | 未使用239 | 未使用24 | 未使用240 | 未使用241 | 未使用242 | 未使用243 | 未使用244 | 未使用245 | 未使用246 | 未使用247 | 未使用248 | 未使用249 | 未使用25 | 未使用250| 未使用251 | 未使用252 | 未使用253 | 未使用254 | 未使用255 | 未使用26 | 未使用27 | 未使用28 | 未使用29 | 未使用3 | 未使用30 | 未使用31 | 未使用32 | 未使用33 | 未使用34 | 未使用35 | 未使用36 | 未使用37 | 未使用38 | 未使用39 | 未使用4 | 未使用40 | 未使用41 | 未使用42 |未使用43 | 未使用44 | 未使用45 | 未使用46 | 未使用47 | 未使用48 | 未使用49 | 未使用5 | 未使用50 | 未使用51 | 未使用52 | 未使用53 | 未使用54 | 未使用55 | 未使用56 | 未使用57 | 未使用58 | 未使用59 | 未使用6 | 未使用60 | 未使用61 | 未使用62 | 未使用63 | 未使用64 | 未使用65 | 未使用66 | 未使用67 | 未使用68 | 未使用69 | 未使用7 | 未使用70 | 未使用71 | 未使用72 | 未使用73 | 未使用74 | 未使用75 | 未使用76 | 未使用77 | 未使用78 | 未使用79 | 未使用8 | 未使用80 | 未使用81 | 未使用82 | 未使用83 | 未使用84 | 未使用85 | 未使用86 | 未使用87 | 未使用88 | 未使用89 |未使用9 | 未使用90 | 未使用91 | 未使用92 | 未使用93 | 未使用94 | 未使用95 | 未使用96 | 未使用97 | 未使用98 | 未使用99&amp;gt;</span></dt>
<dd>
<p>
移動対象のボリューム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;storage&amp;gt;</span>:<span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
ターゲットストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;ターゲット仮想マシンID&amp;gt;</span>:<span class="monospaced">&amp;lt;整数&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;ターゲットボリューム&amp;gt;</span>:<span class="monospaced">&amp;lt;mp0 | mp1 | mp10 | mp100 | mp101 | mp102 | mp103 | mp104 | mp105 | mp106 | mp107 | mp108 | mp109 | mp11 | mp110 | mp111 | mp112 | mp113 | mp114 | mp115 | mp116 | mp117 | mp118 | mp119 | mp12 | mp120 | mp121 | mp122 | mp123 | mp124 | mp125 | mp126 | mp127 | mp128 | mp129 | mp13 | mp130 | mp131 | mp132 | mp133 | mp134 | mp135 | mp136 | mp137 | mp138 | mp139 | mp14 | mp140 | mp141 | mp142 | mp143 | mp144 | mp145 | mp146 | mp147 | mp148 | mp149 | mp15 | mp150 | mp151 | mp152 | mp153 |mp154 | mp155 | mp156 | mp157 | mp158 | mp159 | mp16 | mp160 | mp161 | mp162 | mp163 | mp164 | mp165 | mp166 | mp167 | mp168 | mp169 | mp17 | mp170 | mp171 | mp172 | mp173 | mp174 | mp175 | mp176 | mp177 | mp178 | mp179 | mp18 | mp180 | mp181 | mp182 | mp183 | mp184 | mp185 | mp186 | mp187 | mp188 | mp189 | mp19 | mp190| mp191 | mp192 | mp193 | mp194 | mp195 | mp196 | mp197 | mp198 | mp199 | mp2 | mp20 | mp200 | mp201 | mp202 | mp203 | mp204 | mp205 | mp206 | mp207 | mp208 | mp209 | mp21 | mp210 | mp211 | mp212 | mp213 | mp214 | mp215 | mp216 | mp217 | mp218 | mp219 | mp22 | mp220 | mp221 | mp222 | mp223 | mp224 | mp225 | mp226 | mp227| mp228 | mp229 | mp23 | mp230 | mp231 | mp232 | mp233 | mp234 | mp235 | mp236 | mp237 | mp238 | mp239 | mp24 | mp240 | mp241 | mp242 | mp243 | mp244 | mp245 | mp246 | mp247 | mp248 | mp249 | mp25 | mp250 | mp251 | mp252 | mp253 | mp254 | mp255 | mp26 | mp27 | mp28 | mp29 | mp3 | mp30 | mp31 | mp32 | mp33 | mp34 | mp35 | mp36 |mp37 | mp38 | mp39 | mp4 | mp40 | mp41 | mp42 | mp43 | mp44 | mp45 | mp46 | mp47 | mp48 | mp49 | mp5 | mp50 | mp51 | mp52 | mp53 | mp54 | mp55 | mp56 | mp57 | mp58 | mp59 | mp6| mp60 | mp61 | mp62 | mp63 | mp64 | mp65 | mp66 | mp67 | mp68 | mp69 | mp7 | mp70 | mp71 | mp72 | mp73 | mp74 | mp75 | mp76 | mp77 | mp78 | mp79 | mp8 | mp80 | mp81 | mp82 | mp83 | mp84 | mp85 | mp86 | mp87 | mp88 | mp89 | mp9 | mp90 | mp91 | mp92 | mp93 | mp94 | mp95 | mp96 | mp97 | mp98 | mp99 | rootfs | 未使用0 | 未使用1 | 未使用10 | 未使用100 | 未使用101 | 未使用102 | 未使用103 | 未使用104 | 未使用105 | 未使用106 | 未使用107 | 未使用108 | 未使用109 | 未使用11 | 未使用110 | 未使用111 | 未使用112 | 未使用113 | 未使用114 | 未使用115 | 未使用116 | 未使用117 | 未使用118 | 未使用119 | 未使用12 | 未使用120 | 未使用121| 未使用122 | 未使用123 | 未使用124 | 未使用125 | 未使用126 | 未使用127 | 未使用128 | 未使用129 | 未使用13 | 未使用130 | 未使用131 | 未使用132 | 未使用133 | 未使用134 | 未使用135 | 未使用136 | 未使用137 | 未使用138 | 未使用139 | 未使用14 | 未使用140 | 未使用141 | 未使用142 | 未使用143 | 未使用144 | 未使用145 | 未使用146 | 未使用147 | 未使用148 | 未使用149 | 未使用15 | 未使用150 | 未使用151 | 未使用152 | 未使用153 | 未使用154 | 未使用155 | 未使用156 | 未使用157 | 未使用158 | 未使用159 | 未使用16 | 未使用160 | 未使用161 | 未使用162 | 未使用163 | 未使用164 | 未使用165 | 未使用166 | 未使用167 | 未使用168 | 未使用169 | 未使用17 | 未使用170 | 未使用171 | 未使用172 | 未使用173 | 未使用174 | 未使用175 | 未使用176 | 未使用177| 未使用178 | 未使用179 | 未使用18 | 未使用180 | 未使用181 | 未使用182 | 未使用183 | 未使用184 | 未使用185 | 未使用186 | 未使用187 | 未使用188 | 未使用189 | 未使用19 | 未使用190 | 未使用191 | 未使用192 | 未使用193 | 未使用194 | 未使用195 | 未使用196 | 未使用197 | 未使用198 | 未使用199 | 未使用2 | 未使用20 | 未使用200 | 未使用201 | 未使用202 | 未使用203 | 未使用204 | 未使用205 | 未使用206 | 未使用207 | 未使用208 | 未使用209 | 未使用21 | 未使用210 | 未使用211 | 未使用212 | 未使用213 |未使用214 | 未使用215 | 未使用216 | 未使用217 | 未使用218 | 未使用219 | 未使用22 | 未使用220 | 未使用221 | 未使用222 | 未使用223 | 未使用224 | 未使用225 | 未使用226 | 未使用227 | 未使用228 | 未使用229 | 未使用23 | 未使用230 | 未使用231 | 未使用232 | 未使用233 | 未使用234 | 未使用235 | 未使用236 | 未使用237 | 未使用238 | 未使用239 | 未使用24 | 未使用240 | 未使用241 | 未使用242 | 未使用243 | 未使用244 | 未使用245 | 未使用246 | 未使用247 | 未使用248 | 未使用249 | 未使用25 | 未使用250| 未使用251 | 未使用252 | 未使用253 | 未使用254 | 未使用255 | 未使用26 | 未使用27 | 未使用28 | 未使用29 | 未使用3 | 未使用30 | 未使用31 | 未使用32 | 未使用33 | 未使用34 | 未使用35 | 未使用36 | 未使用37 | 未使用38 | 未使用39 | 未使用4 | 未使用40 | 未使用41 | 未使用42 |未使用43 | 未使用44 | 未使用45 | 未使用46 | 未使用47 | 未使用48 | 未使用49 | 未使用5 | 未使用50 | 未使用51 | 未使用52 | 未使用53 | 未使用54 | 未使用55 | 未使用56 | 未使用57 | 未使用58 | 未使用59 | 未使用6 | 未使用60 | 未使用61 | 未使用62 | 未使用63 | 未使用64 | 未使用65 | 未使用66 | 未使用67 | 未使用68 | 未使用69 | 未使用7 | 未使用70 | 未使用71 | 未使用72 | 未使用73 | 未使用74 | 未使用75 | 未使用76 | 未使用77 | 未使用78 | 未使用79 | 未使用8 | 未使用80 | 未使用81 | 未使用82 | 未使用83 | 未使用84 | 未使用85 | 未使用86 | 未使用87 | 未使用88 | 未使用89 |未使用9 | 未使用90 | 未使用91 | 未使用92 | 未使用93 | 未使用94 | 未使用95 | 未使用96 | 未使用97 | 未使用98 | 未使用99&amp;gt;</span></dt>
<dd>
<p>
ボリュームが移動される構成キー。デフォルトはソースボリュームキー。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&amp;lt;数値&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定からのクローン制限</span>)</dt>
<dd>
<p>
I/O帯域幅制限の上書き（KiB/s単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コピー成功後に元のボリュームを削除。デフォルトでは未使用ボリュームエントリとして保持。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
現在の設定ファイルのSHA1ハッシュが異なる場合、変更を防止する。
                    これにより同時編集を防止できる。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target-digest</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
ターゲットコンテナの現行設定ファイルのSHA1ダイジェストが異なる場合、変更を防止します。
                    "これにより同時編集を防止できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct move_volume</strong></p></div>
<div class="paragraph">
<p><em>pct move-volume</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pct pending</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>保留中の変更を含むコンテナ構成を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct pull</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;path&amp;gt; &amp;lt;destination&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>コンテナからローカルシステムへファイルをコピーします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;path&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナ内の取得対象ファイルへのパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;destination&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
宛先</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
所有者グループ名またはID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--perms</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
使用するファイル権限（デフォルトは8進数、16進数の場合は<em>0xを接頭辞</em>として付加）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--user</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
所有者ユーザー名またはID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct push</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;file&amp;gt; &amp;lt;destination&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>ローカルファイルをコンテナにコピーします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;ファイル&amp;gt;</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
ローカルファイルへのパス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;destination&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナ内の書き込み先。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
所有者グループ名またはID。名前を使用する場合、コンテナ内に存在している必要があります。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--perms</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
使用するファイル権限（デフォルトは8進数、16進数の場合は<em>0xを接頭</em>辞として指定）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--user</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
所有者ユーザー名またはID。名前を使用する場合、コンテナ内に存在している必要があります。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct reboot</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>コンテナをシャットダウンし、再起動します。
保留中の変更を適用します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--timeout</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
シャットダウンの最大待機時間（秒）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct remote-migrate</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; [&amp;lt;target-vmid&amp;gt;] &amp;lt;target-endpoint&amp;gt; --target-bridge &amp;lt;string&amp;gt; --target-storage &amp;lt;string&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>コンテナをリモートクラスタに移行します。新しい移行タスクを作成します。
実験的機能です！</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;target-vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;target-endpoint&amp;gt;</span>:<span class="monospaced">apitoken=&amp;lt;PVEAPIToken=user@realm!token=SECRET&amp;gt; ,host=&amp;lt;ADDRESS&amp;gt; [,fingerprint=&amp;lt;FINGERPRINT&amp;gt;] [,port=&amp;lt;PORT&amp;gt;]</span></dt>
<dd>
<p>
リモートターゲットエンドポイント</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定からの移行制限</span>)</dt>
<dd>
<p>
I/O 帯域幅制限の上書き（KiB/s単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
移行成功後、元のCTと関連データを削除します。デフォルトでは元のCTは停止状態でソースクラスターに保持されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--online</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
オンライン/ライブ移行を使用する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--restart</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
再起動移行を使用</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target-bridge</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ソースからターゲットへのブリッジのマッピング。単一のブリッジIDのみを指定すると、すべてのソースブリッジがそのブリッジにマッピングされます。特別な値<em>1</em>を指定すると、各ソースブリッジは自身にマッピングされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--target-storage</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ソースからターゲットへのストレージマッピング。単一のストレージIDのみを指定すると、すべてのソースストレージがそのストレージにマッピングされます。特別な値<em>1</em>を指定すると、各ソースストレージが自身にマッピングされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--timeout</span> <span class="monospaced">&amp;lt;integer&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">180</span>)</dt>
<dd>
<p>
再起動移行時のシャットダウンタイムアウト（秒単位）</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct rescan</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>すべてのストレージを再スキャンし、ディスクサイズと未使用ディスクイメージを更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--dryrun</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定への変更を実際に書き込まない。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vmid</span> <span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct resize</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;disk&amp;gt; &amp;lt;size&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>コンテナのマウントポイントのサイズを変更します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;disk&amp;gt;</span>:<span class="monospaced">&amp;lt;mp0 | mp1 | mp10 | mp100 | mp101 | mp102 | mp103 | mp104 | mp105 | mp106 | mp107 | mp108 | mp109 | mp11 | mp110 | mp111 | mp112 | mp113 | mp114 | mp115 | mp116 | mp117 | mp118 | mp119 | mp12 | mp120 | mp121 | mp122 | mp123 | mp124 | mp125 | mp126 | mp127 | mp128 | mp129 | mp13 | mp130 | mp131 | mp132 | mp133 | mp134 | mp135 | mp136 | mp137 | mp138 | mp139 | mp14 | mp140 | mp141 | mp142 | mp143 | mp144 | mp145 | mp146 | mp147 | mp148 | mp149 | mp15 | mp150 | mp151 | mp152 | mp153 |mp154 | mp155 | mp156 | mp157 | mp158 | mp159 | mp16 | mp160 | mp161 | mp162 | mp163 | mp164 | mp165 | mp166 | mp167 | mp168 | mp169 | mp17 | mp170 | mp171 | mp172 | mp173 | mp174 | mp175 | mp176 | mp177 | mp178 | mp179 | mp18 | mp180 | mp181 | mp182 | mp183 | mp184 | mp185 | mp186 | mp187 | mp188 | mp189 | mp19 | mp190| mp191 | mp192 | mp193 | mp194 | mp195 | mp196 | mp197 | mp198 | mp199 | mp2 | mp20 | mp200 | mp201 | mp202 | mp203 | mp204 | mp205 | mp206 | mp207 | mp208 | mp209 | mp21 | mp210 | mp211 | mp212 | mp213 | mp214 | mp215 | mp216 | mp217 | mp218 | mp219 | mp22 | mp220 | mp221 | mp222 | mp223 | mp224 | mp225 | mp226 | mp227| mp228 | mp229 | mp23 | mp230 | mp231 | mp232 | mp233 | mp234 | mp235 | mp236 | mp237 | mp238 | mp239 | mp24 | mp240 | mp241 | mp242 | mp243 | mp244 | mp245 | mp246 | mp247 | mp248 | mp249 | mp25 | mp250 | mp251 | mp252 | mp253 | mp254 | mp255 | mp26 | mp27 | mp28 | mp29 | mp3 | mp30 | mp31 | mp32 | mp33 | mp34 | mp35 | mp36 |mp37 | mp38 | mp39 | mp4 | mp40 | mp41 | mp42 | mp43 | mp44 | mp45 | mp46 | mp47 | mp48 | mp49 | mp5 | mp50 | mp51 | mp52 | mp53 | mp54 | mp55 | mp56 | mp57 | mp58 | mp59 | mp6| mp60 | mp61 | mp62 | mp63 | mp64 | mp65 | mp66 | mp67 | mp68 | mp69 | mp7 | mp70 | mp71 | mp72 | mp73 | mp74 | mp75 | mp76 | mp77 | mp78 | mp79 | mp8 | mp80 | mp81 | mp82 | mp83 | mp84 | mp85 | mp86 | mp87 | mp88 | mp89 | mp9 | mp90 | mp91 | mp92 | mp93 | mp94 | mp95 | mp96 | mp97 | mp98 | mp99 | rootfs&amp;gt;</span></dt>
<dd>
<p>
サイズ変更対象のディスク。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;size&amp;gt;</span>:<span class="monospaced">\+?\d+(\.\d+)?[KMGT]?</span></dt>
<dd>
<p>
新しいサイズ。<em>+記号付き</em>の場合は、その値がボリュームの実際のサイズに加算され、+記号なしの場合は絶対値として扱われます。ディスクサイズの縮小はサポートされていません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
現在の設定ファイルのSHA1ダイジェストが異なる場合、変更を防止します。これにより同時変更を防止できます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct restore</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;ostemplate&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>コンテナを作成または復元します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;ostemplate&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
OSテンプレートまたはバックアップファイル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--arch</span> <span class="monospaced">&amp;lt;amd64 | arm64 | armhf | i386 | riscv32 | riscv64&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">amd64</span>)</dt>
<dd>
<p>
OSアーキテクチャタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&amp;lt;number&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">データセンターまたはストレージ設定から制限を復元</span>)</dt>
<dd>
<p>
I/O帯域幅制限の上書き（KiB/s単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cmode</span> <span class="monospaced">&amp;lt;console | shell | tty&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">tty</span>)</dt>
<dd>
<p>
コンソールモード。デフォルトでは、コンソールコマンドは利用可能なttyデバイスへの接続を試行します。cmode<em>をconsole</em>に設定すると、代わりに/dev/consoleへのアタッチを試行します。cmodeを<em>shell</em>に設定すると、コンテナ内で単純にシェルを起動します（ログインなし）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--console</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
コンソールデバイス（/dev/console）をコンテナに接続します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cores</span> <span class="monospaced">&amp;lt;整数&amp;gt; (1 - 8192)</span></dt>
<dd>
<p>
コンテナに割り当てるコア数。デフォルトではコンテナは利用可能な全コアを使用可能。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpulimit</span> <span class="monospaced">&amp;lt;数値&amp;gt; (0 - 8192)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用率の上限。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンピュータに2つのCPUがある場合、合計<em>2</em>のCPU時間があります。値<em>0は</em>CPU制限なしを示します。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpuunits</span> <span class="monospaced">&amp;lt;整数&amp;gt; (0 - 500000)</span>(<em>デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
コンテナのCPUウェイト。cgroup v2では[1, 10000]の範囲に制限されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
より詳細なログを出力するよう試みます。現時点では起動時のデバッグログレベルのみ有効化されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--description</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
コンテナの説明。WebインターフェースのCT概要に表示されます。設定ファイル内にコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dev[n]</span> <span class="monospaced">[[path=]&amp;lt;パス&amp;gt;] [,deny-write=&amp;lt;1|0&amp;gt;] [,gid=&amp;lt;整数&amp;gt;] [,mode=&amp;lt;8進アクセスモード&amp;gt;] [,uid=&amp;lt;整数&amp;gt;]</span></dt>
<dd>
<p>
コンテナに渡すデバイス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--features</span> <span class="monospaced">[force_rw_sys=&amp;lt;1|0&amp;gt;] [,fuse=&amp;lt;1|0&amp;gt;][,keyctl=&amp;lt;1|0&amp;gt;] [,mknod=&amp;lt;1|0&amp;gt;] [,mount=&amp;lt;fstype;fstype;...&amp;gt;] [,nesting=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
コンテナが高度な機能にアクセスすることを許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
既存コンテナの上書きを許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hookscript</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのライフサイクルにおける各種ステップで実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hostname</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのホスト名を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ignore-unpack-errors</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
テンプレート抽出時のエラーを無視する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lock</span> <span class="monospaced">&amp;lt;backup | create | destroyed | disk | fstrim | migrate | mounted | rollback | snapshot | snapshot-delete&amp;gt;</span></dt>
<dd>
<p>
コンテナをロック/ロック解除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--memory</span> <span class="monospaced">&amp;lt;integer&amp;gt; (16 - N)</span>(<em>デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
コンテナのRAM容量（MB単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mp[n]</span> <span class="monospaced">[volume=]&amp;lt;ボリューム&amp;gt; ,mp=&amp;lt;パス&amp;gt; [,acl=&amp;lt;1|0&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,mountoptions=&amp;lt;オプション[;オプション...]&amp;gt;] [,quota=&amp;lt;1|0&amp;gt;][,replicate=&amp;lt;1|0&amp;gt;] [,ro=&amp;lt;1|0&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;DiskSize&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをコンテナのマウントポイントとして使用します。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nameserver</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのDNSサーバーIPアドレスを設定します。searchdomainもnameserverも設定しない場合、作成時にホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--net[n]</span> <span class="monospaced">name=&amp;lt;string&amp;gt; [,bridge=&amp;lt;bridge&amp;gt;] [,firewall=&amp;lt;1|0&amp;gt;] [,gw=&amp;lt;GatewayIPv4&amp;gt;] [,gw6=&amp;lt;GatewayIPv6&amp;gt;][,hwaddr=&amp;lt;XX:XX:XX:XX:XX:XX&amp;gt;] [,ip=&amp;lt;(IPv4/CIDR|dhcp|manual)&amp;gt;] [,ip6=&amp;lt;(IPv6/CIDR|auto|dhcp|manual)&amp;gt;] [,link_down=&amp;lt;1|0&amp;gt;][,mtu=&amp;lt;整数&amp;gt;] [,rate=&amp;lt;Mbps&amp;gt;] [,tag=&amp;lt;整数&amp;gt;] [,trunks=&amp;lt;vlanid[;vlanid...]&amp;gt;] [,type=&amp;lt;veth&amp;gt;]</span></dt>
<dd>
<p>
コンテナのネットワークインターフェースを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--onboot</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時にコンテナを起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ostype</span> <span class="monospaced">&amp;lt;alpine | archlinux | centos | debian | devuan | fedora | gentoo | nixos | opensuse | ubuntu | unmanaged&amp;gt;</span></dt>
<dd>
<p>
OSタイプ。コンテナ内の設定を構成するために使用され、/usr/share/lxc/config/&amp;lt;ostype&amp;gt;.common.conf 内の lxc セットアップスクリプトに対応します。値<em>unmanaged</em>を使用すると、OS固有の設定をスキップできます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パスワード</span> <span class="monospaced">&amp;lt;パスワード&amp;gt;</span></dt>
<dd>
<p>
コンテナ内のrootパスワードを設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pool</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
指定されたプールにVMを追加します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--protection</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナの保護フラグを設定します。これにより、コンテナまたはコンテナのディスクの削除/更新操作が防止されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rootfs</span> <span class="monospaced">[volume=]&amp;lt;ボリューム&amp;gt; [,acl=&amp;lt;1|0&amp;gt;] [,mountoptions=&amp;lt;オプション[;オプション...]&amp;gt;] [,quota=&amp;lt;1|0&amp;gt;][,replicate=&amp;lt;1|0&amp;gt;] [,ro=&amp;lt;1|0&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;DiskSize&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをコンテナのルートとして使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--searchdomain</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのDNS検索ドメインを設定します。searchdomainとnameserverの両方を設定しない場合、ホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ssh-public-keys</span> <span class="monospaced">&amp;lt;ファイルパス&amp;gt;</span></dt>
<dd>
<p>
公開SSHキーを設定します（1行に1キー、OpenSSH形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--start</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
作成が正常に完了した後にCTを起動します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startup</span>`[[order=]\d+] [,up=\d+] [,down=\d+] ` </dt>
<dd>
<p>
起動およびシャットダウン時の動作。順序は起動時の一般的な順序を定義する非負の数値です。シャットダウンは逆順で行われます。さらに、<em>起動</em>または<em>停止の</em>遅延時間を秒単位で設定でき、次のVMが起動または停止されるまでの待機時間を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--storage</span> <span class="monospaced">&amp;lt;ストレージID&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">local</span>)</dt>
<dd>
<p>
デフォルトストレージ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--swap</span> <span class="monospaced">&amp;lt;整数&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
コンテナのSWAP容量（MB単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tags</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
コンテナのタグ。これはメタ情報のみです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--template</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--timezone</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナ内で使用するタイムゾーン。設定しない場合は何も行われません。ホストのタイムゾーンに合わせるために<em>「host」</em>に設定するか、/usr/share/zoneinfo/zone.tab からの任意のタイムゾーンオプションを設定できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tty</span> <span class="monospaced">&amp;lt;整数&amp;gt; (0 - 6)</span>(<em>デフォルト =</em> <span class="monospaced">2</span>)</dt>
<dd>
<p>
コンテナで使用可能なttyの数を指定</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unique</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
一意のランダムなイーサネットアドレスを割り当てます。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">restore</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unprivileged</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナを非特権ユーザーとして実行します（手動で変更しないでください）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unused[n]</span> <span class="monospaced">[volume=]&amp;lt;volume&amp;gt;</span></dt>
<dd>
<p>
未使用ボリュームへの参照。内部で使用されるため、手動で変更しないでください。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct resume</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>コンテナを再開します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct rollback</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;snapname&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>LXCの状態を指定されたスナップショットにロールバックします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;snapname&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--start</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ロールバック成功後にコンテナを起動するかどうか</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct set</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>コンテナオプションを設定します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--arch</span> <span class="monospaced">&amp;lt;amd64 | arm64 | armhf | i386 | riscv32 | riscv64&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">amd64</span>)</dt>
<dd>
<p>
OSアーキテクチャタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cmode</span> <span class="monospaced">&amp;lt;console | shell | tty&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">tty</span>)</dt>
<dd>
<p>
コンソールモード。デフォルトでは、コンソールコマンドは利用可能なttyデバイスへの接続を試みます。cmode<em>をconsole</em>に設定すると、代わりに/dev/consoleへのアタッチを試みます。cmodeを<em>shell</em>に設定すると、コンテナ内でシェルを起動します（ログインなし）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--console</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
コンソールデバイス（/dev/console）をコンテナにアタッチする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cores</span> <span class="monospaced">&amp;lt;整数&amp;gt; (1 - 8192)</span></dt>
<dd>
<p>
コンテナに割り当てるコア数。デフォルトではコンテナは利用可能な全コアを使用できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpulimit</span> <span class="monospaced">&amp;lt;number&amp;gt; (0 - 8192)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CPU使用率の上限。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">コンピュータに2つのCPUがある場合、合計<em>2の</em>CPU時間が割り当てられます。値<em>0は</em>CPU制限なしを示します。</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cpuunits</span> <span class="monospaced">&amp;lt;整数&amp;gt; (0 - 500000)</span>(<em>デフォルト =</em> <span class="monospaced">cgroup v1: 1024, cgroup v2: 100</span>)</dt>
<dd>
<p>
コンテナのCPUウェイト。cgroup v2では[1, 10000]の範囲に制限されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
より詳細なログを出力するよう試みます。現時点では起動時のデバッグログレベルのみ有効化されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--description</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
コンテナの説明。WebインターフェースのCT概要に表示されます。設定ファイル内にコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dev[n]</span> <span class="monospaced">[[path=]&amp;lt;パス&amp;gt;] [,deny-write=&amp;lt;1|0&amp;gt;] [,gid=&amp;lt;整数&amp;gt;] [,mode=&amp;lt;8進アクセスモード&amp;gt;] [,uid=&amp;lt;整数&amp;gt;]</span></dt>
<dd>
<p>
コンテナに渡すデバイス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
現在の設定ファイルのSHA1ダイジェストが異なる場合、変更を防止します。これにより同時編集を防止できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--features</span> <span class="monospaced">[force_rw_sys=&amp;lt;1|0&amp;gt;] [,fuse=&amp;lt;1|0&amp;gt;][,keyctl=&amp;lt;1|0&amp;gt;] [,mknod=&amp;lt;1|0&amp;gt;] [,mount=&amp;lt;fstype;fstype;...&amp;gt;] [,nesting=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
コンテナが高度な機能にアクセスすることを許可します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hookscript</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
コンテナのライフサイクルにおける各種ステップで実行されるスクリプト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--hostname</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのホスト名を設定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lock</span> <span class="monospaced">&amp;lt;backup | create | destroyed | disk | fstrim | migrate | mounted | rollback | snapshot | snapshot-delete&amp;gt;</span></dt>
<dd>
<p>
コンテナをロック/ロック解除する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--memory</span> <span class="monospaced">&amp;lt;integer&amp;gt; (16 - N)</span>(<em>デフォルト =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
コンテナのRAM容量（MB単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mp[n]</span> <span class="monospaced">[volume=]&amp;lt;ボリューム&amp;gt; ,mp=&amp;lt;パス&amp;gt; [,acl=&amp;lt;1|0&amp;gt;] [,backup=&amp;lt;1|0&amp;gt;] [,mountoptions=&amp;lt;オプション[;オプション...]&amp;gt;] [,quota=&amp;lt;1|0&amp;gt;][,replicate=&amp;lt;1|0&amp;gt;] [,ro=&amp;lt;1|0&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;DiskSize&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをコンテナのマウントポイントとして使用します。新しいボリュームを割り当てるには、特別な構文 STORAGE_ID:SIZE_IN_GiB を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nameserver</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのDNSサーバーIPアドレスを設定します。searchdomainもnameserverも設定しない場合、作成時にホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--net[n]</span> <span class="monospaced">name=&amp;lt;string&amp;gt; [,bridge=&amp;lt;bridge&amp;gt;] [,firewall=&amp;lt;1|0&amp;gt;] [,gw=&amp;lt;GatewayIPv4&amp;gt;] [,gw6=&amp;lt;GatewayIPv6&amp;gt;][,hwaddr=&amp;lt;XX:XX:XX:XX:XX:XX&amp;gt;] [,ip=&amp;lt;(IPv4/CIDR|dhcp|manual)&amp;gt;] [,ip6=&amp;lt;(IPv6/CIDR|auto|dhcp|manual)&amp;gt;] [,link_down=&amp;lt;1|0&amp;gt;][,mtu=&amp;lt;整数&amp;gt;] [,rate=&amp;lt;Mbps&amp;gt;] [,tag=&amp;lt;整数&amp;gt;] [,trunks=&amp;lt;vlanid[;vlanid...]&amp;gt;] [,type=&amp;lt;veth&amp;gt;]</span></dt>
<dd>
<p>
コンテナのネットワークインターフェースを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--onboot</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
システム起動時にコンテナを起動するかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ostype</span> <span class="monospaced">&amp;lt;alpine | archlinux | centos | debian | devuan | fedora | gentoo | nixos | opensuse | ubuntu | unmanaged&amp;gt;</span></dt>
<dd>
<p>
OSタイプ。コンテナ内の設定を構成するために使用され、/usr/share/lxc/config/&amp;lt;ostype&amp;gt;.common.conf 内の lxc セットアップスクリプトに対応します。値<em>unmanaged</em>を使用すると、OS固有の設定をスキップできます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--protection</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナの保護フラグを設定します。これにより、CTまたはCTのディスクの削除/更新操作が防止されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--revert</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
保留中の変更を元に戻す。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rootfs</span> <span class="monospaced">[volume=]&amp;lt;ボリューム&amp;gt; [,acl=&amp;lt;1|0&amp;gt;] [,mountoptions=&amp;lt;オプション[;オプション...]&amp;gt;] [,quota=&amp;lt;1|0&amp;gt;][,replicate=&amp;lt;1|0&amp;gt;] [,ro=&amp;lt;1|0&amp;gt;] [,shared=&amp;lt;1|0&amp;gt;] [,size=&amp;lt;DiskSize&amp;gt;]</span></dt>
<dd>
<p>
ボリュームをコンテナのルートとして使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--searchdomain</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのDNS検索ドメインを設定します。searchdomainもnameserverも設定しない場合、ホストの設定が自動的に使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--startup</span>`[[order=]\d+] [,up=\d+] [,down=\d+] ` </dt>
<dd>
<p>
起動およびシャットダウン時の動作を定義します。Orderは起動順序を定義する非負の数値です。シャットダウン時は逆順で処理されます。さらに、<em>アップ</em>/<em>ダウン</em>遅延（秒単位）を設定可能で、次のVM起動/停止までの待機時間を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--swap</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>default =</em> <span class="monospaced">512</span>)</dt>
<dd>
<p>
コンテナのSWAP容量（MB単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tags</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナのタグ。これはメタ情報のみです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--template</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
テンプレートの有効化/無効化。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--timezone</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
コンテナで使用するタイムゾーン。設定しない場合は何も行われません。ホストのタイムゾーンに合わせるために<em>「host」</em>に設定するか、/usr/share/zoneinfo/zone.tab からの任意のタイムゾーンオプションを設定できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tty</span> <span class="monospaced">&amp;lt;整数&amp;gt; (0 - 6)</span>(<em>デフォルト =</em> <span class="monospaced">2</span>)</dt>
<dd>
<p>
コンテナが使用可能なttyの数を指定します</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unprivileged</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナを非特権ユーザーとして実行します（手動で変更しないでください）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--unused[n]</span> <span class="monospaced">[volume=]&amp;lt;volume&amp;gt;</span></dt>
<dd>
<p>
未使用ボリュームへの参照。内部で使用されるため、手動で変更しないでください。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct shutdown</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>コンテナをシャットダウンします。これによりコンテナのクリーンなシャットダウンがトリガーされます。詳細は lxc-stop(1) を参照してください。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--forceStop</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
コンテナを確実に停止させる。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--timeout</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">60</span>)</dt>
<dd>
<p>
最大タイムアウト秒待機する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct snapshot</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;snapname&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>コンテナのスナップショットを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;snapname&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--description</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
テキストによる説明またはコメント。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct start</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>コンテナを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定すると、起動時に非常に詳細なデバッグログレベルを有効にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ロックを無視 - このオプションはrootのみが使用可能。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct status</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>コンテナの状態を表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct stop</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>コンテナを停止します。これによりコンテナ内で実行中のすべてのプロセスが
突然停止します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--overrule-shutdown</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
停止前にアクティブな<em>vzshutdownタスクを</em>中止しようとする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--スキップロック</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
ロックを無視する - このオプションはrootのみが使用可能。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct suspend</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>コンテナを一時停止します。これは実験的な機能です。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct template</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>テンプレートを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct unlock</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>VMのロックを解除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
仮想マシンの（一意の）ID。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pct unmount</strong> <span class="monospaced">&amp;lt;vmid&amp;gt;</span></p></div>
<div class="paragraph">
<p>コンテナのファイルシステムをアンマウントします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pveam_strong_proxmox_ve_appliance_manager">
<span>22.12.<strong>pveam</strong>- Proxmox VE アプライアンス マネージャー</span>
<a class="headerlink" href="#_strong_pveam_strong_proxmox_ve_appliance_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pveam</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pveam available</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>利用可能なテンプレートを一覧表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--section</span> <span class="monospaced">&amp;lt;mail | system | turnkeylinux&amp;gt;</span></dt>
<dd>
<p>
リストを指定セクションに制限する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveam download</strong> <span class="monospaced">&amp;lt;storage&amp;gt; &amp;lt;template&amp;gt;</span></p></div>
<div class="paragraph">
<p>アプライアンステンプレートをダウンロードします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;storage&amp;gt;</span>:<span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
テンプレートが保存されるストレージ</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;template&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ダウンロードされるテンプレート</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveam help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveam list</strong> <span class="monospaced">&amp;lt;storage&amp;gt;</span></p></div>
<div class="paragraph">
<p>ストレージ上の全テンプレートのリストを取得</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;storage&amp;gt;</span>:<span class="monospaced">&amp;lt;storage ID&amp;gt;</span></dt>
<dd>
<p>
指定されたストレージ上のテンプレートのみを表示</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveam remove</strong> <span class="monospaced">&amp;lt;template_path&amp;gt;</span></p></div>
<div class="paragraph">
<p>テンプレートを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;template_path&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
削除するテンプレート。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveam update</strong></p></div>
<div class="paragraph">
<p>コンテナテンプレートデータベースを更新します。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pvecm_strong_proxmox_ve_cluster_manager">
<span>22.13.<strong>pvecm</strong>- Proxmox VE クラスターマネージャー</span>
<a class="headerlink" href="#_strong_pvecm_strong_proxmox_ve_cluster_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvecm</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pvecm add</strong> <span class="monospaced">&amp;lt;ホスト名&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>既存のクラスターに現在のノードを追加します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;hostname&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
既存クラスターメンバーのホスト名（またはIPアドレス）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--fingerprint</span> <span class="monospaced">([A-Fa-f0-9]{2}:){31}[A-Fa-f0-9]{2}</span></dt>
<dd>
<p>
証明書のSHA-256フィンガープリント。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ノードが既に存在する場合、エラーをスローしない。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--link[n]</span> <span class="monospaced">[address=]&amp;lt;IP&amp;gt; [,priority=&amp;lt;integer&amp;gt;]</span></dt>
<dd>
<p>
単一Corosyncリンクのアドレスと優先度情報（最大8リンク対応：link0..link7）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nodeid</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span></dt>
<dd>
<p>
このノードのノードID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--use_ssh</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
常にSSHを使用して参加する（相手がAPI経由で参加する場合でも）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--votes</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
このノードの投票数</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm addnode</strong> <span class="monospaced">&amp;lt;node&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>クラスタ構成にノードを追加します。この呼び出しは内部使用です。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;node&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
クラスタノード名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--apiversion</span> <span class="monospaced">&amp;lt;integer&amp;gt;</span></dt>
<dd>
<p>
新規ノードの JOIN_API_VERSION。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
ノードが既に存在する場合でもエラーをスローしない。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--link[n]</span> <span class="monospaced">[address=]&amp;lt;IP&amp;gt; [,priority=&amp;lt;integer&amp;gt;]</span></dt>
<dd>
<p>
単一のCorosyncリンクのアドレスと優先度情報（最大8リンク対応：link0..link7）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--new_node_ip</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
追加するノードのIPアドレス。リンクが指定されていない場合のフォールバックとして使用される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nodeid</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span></dt>
<dd>
<p>
このノードのノードID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--votes</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
このノードの投票数</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm apiver</strong></p></div>
<div class="paragraph">
<p>このノードで利用可能なクラスタ参加 API のバージョンを返します。</p></div>
<div class="paragraph">
<p><strong>pvecm create</strong> <span class="monospaced">&amp;lt;クラスタ名&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>新しいクラスタ構成を生成します。リンクが指定されない場合、デフォルトでローカルIPアドレスをlink0として使用します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;クラスタ名&amp;gt;</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
クラスタ名。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--link[n]</span> <span class="monospaced">[address=]&amp;lt;IP&amp;gt; [,priority=&amp;lt;integer&amp;gt;]</span></dt>
<dd>
<p>
単一Corosyncリンクのアドレスと優先度情報（最大8リンク対応：link0..link7）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nodeid</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span></dt>
<dd>
<p>
このノードのノードID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--votes</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span></dt>
<dd>
<p>
このノードの投票数。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm delnode</strong> <span class="monospaced">&amp;lt;node&amp;gt;</span></p></div>
<div class="paragraph">
<p>クラスタ構成からノードを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;node&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
クラスタノード名。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm expected</strong> <span class="monospaced">&amp;lt;expected&amp;gt;</span></p></div>
<div class="paragraph">
<p>corosync に期待票数の新しい値を通知します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;expected&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span></dt>
<dd>
<p>
予想投票数</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm keygen</strong> <span class="monospaced">&amp;lt;filename&amp;gt;</span></p></div>
<div class="paragraph">
<p>corosync用の新しい暗号鍵を生成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;filename&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
出力ファイル名</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm mtunnel</strong> <span class="monospaced">[&amp;lt;追加引数&amp;gt;]</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>VM/CT移行時に使用されます - 手動では使用しないでください。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;extra-args&amp;gt;</span>:<span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
配列形式の追加引数</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--get_migration_ip</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定されている場合、移行IPを返す</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--migration_network</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ローカル移行IPを検出するために使用される移行ネットワーク</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--run-command</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
TCPソケットを標準入力としてコマンドを実行。このコマンドの標準出力から、IPアドレスとポート番号がそれぞれ別行で最初に表示される。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm nodes</strong></p></div>
<div class="paragraph">
<p>クラスタノードのローカルビューを表示します。</p></div>
<div class="paragraph">
<p><strong>pvecm qdevice remove</strong></p></div>
<div class="paragraph">
<p>設定済みのQDeviceを削除します</p></div>
<div class="paragraph">
<p><strong>pvecm qdevice setup</strong> <span class="monospaced">&amp;lt;アドレス&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>QDeviceの使用を設定します</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;address&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
外部corosync QDeviceのネットワークアドレスを指定する</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
危険な操作の可能性があってもエラーをスローしない</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--network</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
外部qdeviceへの接続に使用すべきネットワーク</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvecm status</strong></p></div>
<div class="paragraph">
<p>クラスタ状態のローカルビューを表示します。</p></div>
<div class="paragraph">
<p><strong>pvecm updatecerts</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ノード証明書を更新（必要なファイル/ディレクトリをすべて生成）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
新しいSSL証明書の生成を強制する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--silent</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
エラーを無視する（例：クラスタにクォーラムが存在しない場合）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--既知ホストの統合解除</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
レガシーSSH既知ホストの統合を解除する。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pvesr_strong_proxmox_ve_storage_replication">
<span>22.14.<strong>pvesr</strong>- Proxmox VE Storage</span>Replication
<a class="headerlink" href="#_strong_pvesr_strong_proxmox_ve_storage_replication" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvesr</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pvesr create-local-job</strong> <span class="monospaced">&amp;lt;id&amp;gt; &amp;lt;target&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>新しいレプリケーションジョブを作成します</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;id&amp;gt;</span>:<span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span></dt>
<dd>
<p>
レプリケーションジョブID。IDはゲストIDとジョブ番号をハイフンで区切った形式（例：<em>&amp;lt;GUEST&amp;gt;-&amp;lt;JOBNUM&amp;gt;</em>）で構成される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;target&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ターゲットノード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--disable</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
エントリを無効化/停止するフラグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rate</span> <span class="monospaced">&amp;lt;number&amp;gt; (1 - N)</span></dt>
<dd>
<p>
浮動小数点数でのレート制限（Mbps：メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove_job</span> <span class="monospaced">&amp;lt;full | local&amp;gt;</span></dt>
<dd>
<p>
レプリケーションジョブの削除フラグ。設定すると、ジョブはローカルのレプリケーションスナップショットを全て削除します。<em>フル設定時は</em>、ターゲット上のレプリケート済みボリュームの削除も試行します。その後、ジョブは設定ファイルから自身を削除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--schedule</span> <span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">*/15</span>)</dt>
<dd>
<p>
ストレージレプリケーションスケジュール。形式<span class="monospaced">はsystemd</span>カレンダーイベントのサブセット。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--source</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
内部使用。ゲストが盗難されたかどうかを検出するため。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr delete</strong> <span class="monospaced">&amp;lt;id&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>レプリケーションジョブを削除対象としてマークします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;id&amp;gt;</span>:<span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span></dt>
<dd>
<p>
レプリケーションジョブID。IDはゲストIDとジョブ番号をハイフンで区切った形式（例：<em>&amp;lt;GUEST&amp;gt;-&amp;lt;JOBNUM&amp;gt;</em>）で構成されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ジョブ設定エントリを削除するが、クリーンアップは行わない。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keep</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
複製データをターゲットに保持（削除しない）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr disable</strong> <span class="monospaced">&amp;lt;id&amp;gt;</span></p></div>
<div class="paragraph">
<p>レプリケーションジョブを無効化します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;id&amp;gt;</span>:<span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span></dt>
<dd>
<p>
レプリケーションジョブID。IDはゲストIDとジョブ番号をハイフンで区切った形式（例：<em>&amp;lt;GUEST&amp;gt;-&amp;lt;JOBNUM&amp;gt;</em>）で構成されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr enable</strong> <span class="monospaced">&amp;lt;id&amp;gt;</span></p></div>
<div class="paragraph">
<p>レプリケーションジョブを有効化します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;id&amp;gt;</span>:<span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span></dt>
<dd>
<p>
レプリケーションジョブID。IDはゲストIDとジョブ番号をハイフンで区切った形式です。例：<em>&amp;lt;GUEST&amp;gt;-&amp;lt;JOBNUM&amp;gt;</em>。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr finalize-local-job</strong> <span class="monospaced">&amp;lt;id&amp;gt; [&amp;lt;extra-args&amp;gt;]</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>レプリケーションジョブを最終化します。これにより、
&amp;lt;last_sync&amp;gt; 以外のタイムスタンプを持つすべてのレプリケーションスナップショットが削除されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;id&amp;gt;</span>:<span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span></dt>
<dd>
<p>
レプリケーションジョブID。IDはゲストIDとジョブ番号で構成され、ハイフンで区切られます。例：<em>&amp;lt;GUEST&amp;gt;-&amp;lt;JOBNUM&amp;gt;</em>。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;extra-args&amp;gt;</span>:<span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
考慮対象のボリュームIDのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--last_sync</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
最終成功同期時刻（UNIXエポック）。指定しない場合、すべてのレプリケーションスナップショットが削除される。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定したコマンドのヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr list</strong></p></div>
<div class="paragraph">
<p>レプリケーションジョブを一覧表示します。</p></div>
<div class="paragraph">
<p><strong>pvesr prepare-local-job</strong> <span class="monospaced">&amp;lt;id&amp;gt; [&amp;lt;extra-args&amp;gt;]</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>レプリケーションジョブの開始準備を行います。これはレプリケーション開始前に
ターゲットノードで呼び出されます。この呼び出しは内部使用であり、標準出力に
JSONオブジェクトを返します。このメソッドはまず、VM &amp;lt;vmid&amp;gt; がローカルノードに
存在するかどうかをテストします。存在する場合は直ちに停止します。その後、メソッドは全ボリュームIDのスナップショットをスキャンし、
&amp;lt;last_sync&amp;gt;と異なるタイムスタンプを持つレプリケーションスナップショットを全て削除します。
未使用ボリュームも削除します。既存のレプリケーションスナップショットを持つ全ボリュームの
ブール値マーカーを含むハッシュを返します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;id&amp;gt;</span>:<span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span></dt>
<dd>
<p>
レプリケーションジョブID。IDはゲストIDとジョブ番号をハイフンで区切った形式で構成されます。例：<em>&amp;lt;GUEST&amp;gt;-&amp;lt;JOBNUM&amp;gt;</em>。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;extra-args&amp;gt;</span>:<span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
考慮対象のボリュームIDのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--force</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
既存の全ボリュームを削除可能（空のボリュームリスト）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--last_sync</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
最終成功同期時刻（UNIXエポック）。指定しない場合、全てのレプリケーションスナップショットが削除される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--parent_snapname</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
スナップショットの名前。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scan</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
古いボリュームをスキャンする対象のストレージIDのリスト。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr read</strong> <span class="monospaced">&amp;lt;id&amp;gt;</span></p></div>
<div class="paragraph">
<p>レプリケーションジョブの設定を読み込みます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;id&amp;gt;</span>:<span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span></dt>
<dd>
<p>
レプリケーションジョブID。IDはゲストIDとジョブ番号をハイフンで区切った形式（例：<em>&amp;lt;GUEST&amp;gt;-&amp;lt;JOBNUM&amp;gt;</em>）で構成されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr run</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>このメソッドはsystemd-timerによって呼び出され、全ての（または特定の）同期ジョブを実行します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--id</span> <span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span></dt>
<dd>
<p>
レプリケーションジョブID。IDはゲストIDとジョブ番号をハイフンで区切った形式（例：<em>&amp;lt;GUEST&amp;gt;-&amp;lt;JOBNUM&amp;gt;</em>）で構成されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mail</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
障害発生時にメール通知を送信する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
より詳細なログを標準出力に表示する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr schedule-now</strong> <span class="monospaced">&amp;lt;id&amp;gt;</span></p></div>
<div class="paragraph">
<p>レプリケーションジョブを可能な限り早く開始するようにスケジュールします。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;id&amp;gt;</span>:<span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span></dt>
<dd>
<p>
レプリケーションジョブID。IDはゲストIDとジョブ番号で構成され、ハイフンで区切られます。例：<em>&amp;lt;GUEST&amp;gt;-&amp;lt;JOBNUM&amp;gt;</em>。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr set-state</strong> <span class="monospaced">&amp;lt;vmid&amp;gt; &amp;lt;state&amp;gt;</span></p></div>
<div class="paragraph">
<p>移行時のジョブ複製状態を設定します。この呼び出しは内部使用です。
ジョブ状態をJSONオブジェクトとして受け付けます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
VMの（一意の）ID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;state&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
JSONデコード済み文字列としてのジョブ状態。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr status</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>このノード上のすべてのレプリケーションジョブのステータスを一覧表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--guest</span> <span class="monospaced">&amp;lt;integer&amp;gt; (100 - 999999999)</span></dt>
<dd>
<p>
このゲストのレプリケーションジョブのみを一覧表示します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvesr update</strong> <span class="monospaced">&amp;lt;id&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>レプリケーションジョブの設定を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;id&amp;gt;</span>:<span class="monospaced">[1-9][0-9]{2,8}-\d{1,9}</span></dt>
<dd>
<p>
レプリケーションジョブID。IDはゲストIDとジョブ番号をハイフンで区切った形式（例：<em>&amp;lt;GUEST&amp;gt;-&amp;lt;JOBNUM&amp;gt;</em>）で構成されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--コメント</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
現在の設定ファイルのダイジェストが異なる場合、変更を防止します。これにより同時変更を防止できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--disable</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
エントリを無効化/非アクティブ化するフラグ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--rate</span> <span class="monospaced">&amp;lt;number&amp;gt; (1 - N)</span></dt>
<dd>
<p>
浮動小数点数によるレート制限（Mbps：メガバイト毎秒）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove_job</span> <span class="monospaced">&amp;lt;full | local&amp;gt;</span></dt>
<dd>
<p>
レプリケーションジョブを削除対象としてマークします。ジョブはすべてのローカルレプリケーションスナップショットを削除します。<em>フル</em>に設定された場合、ターゲット上のレプリケートされたボリュームの削除も試行します。その後、ジョブは設定ファイルから自身を削除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--schedule</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">*/15</span>)</dt>
<dd>
<p>
ストレージレプリケーションのスケジュール。形式は<span class="monospaced">systemd</span>カレンダーイベントのサブセットです。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--source</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
内部使用。ゲストが盗難されたかどうかを検出するため。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_pveum_strong_proxmox_ve_user_manager">
<span>22.15.<strong>pveum</strong>- Proxmox VE ユーザー管理ツール</span>
<a class="headerlink" href="#_strong_pveum_strong_proxmox_ve_user_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pveum</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pveum acl delete</strong> <span class="monospaced">&amp;lt;パス&amp;gt; --roles &amp;lt;文字列&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>アクセス制御リストを更新（権限の追加または削除）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;パス&amp;gt;</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
アクセス制御パス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--groups</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
グループの一覧。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--propagate</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
権限の伝播（継承）を許可する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--roles</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ロールのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tokens</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
APIトークンのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--users</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ユーザーの一覧。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum acl list</strong> <span class="monospaced">[フォーマットオプション]</span></p></div>
<div class="paragraph">
<p>アクセス制御リスト (ACL) を取得します。</p></div>
<div class="paragraph">
<p><strong>pveum acl modify</strong> <span class="monospaced">&amp;lt;path&amp;gt; --roles &amp;lt;string&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>アクセス制御リストを更新（権限の追加または削除）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;path&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
アクセス制御パス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--groups</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
グループのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--propagate</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
権限の伝播（継承）を許可する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--roles</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ロールの一覧。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tokens</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
APIトークンのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--users</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ユーザーの一覧。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum acldel</strong></p></div>
<div class="paragraph">
<p><em>pveum acl delete</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveum aclmod</strong></p></div>
<div class="paragraph">
<p><em>pveum acl modify</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveum group add</strong> <span class="monospaced">&amp;lt;groupid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>新しいグループを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;groupid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum group delete</strong> <span class="monospaced">&amp;lt;groupid&amp;gt;</span></p></div>
<div class="paragraph">
<p>グループを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;groupid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum group list</strong> <span class="monospaced">[フォーマットオプション]</span></p></div>
<div class="paragraph">
<p>グループインデックスを表示します。</p></div>
<div class="paragraph">
<p><strong>pveum group modify</strong> <span class="monospaced">&amp;lt;groupid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>グループデータを更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;groupid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum groupadd</strong></p></div>
<div class="paragraph">
<p><em>pveum group add</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveum groupdel</strong></p></div>
<div class="paragraph">
<p><em>pveum group delete</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveum groupmod</strong></p></div>
<div class="paragraph">
<p><em>pveum group modify</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveum help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定されたコマンドに関するヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum passwd</strong> <span class="monospaced">&amp;lt;userid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ユーザーのパスワードを変更します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;userid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
完全なユーザーID（<span class="monospaced">名前@レルム</span>形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--confirmation-password</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
変更を実行しているユーザーの現在のパスワード。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum pool add</strong> <span class="monospaced">&amp;lt;poolid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>新しいプールを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;poolid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum pool delete</strong> <span class="monospaced">&amp;lt;poolid&amp;gt;</span></p></div>
<div class="paragraph">
<p>プールを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;poolid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum pool list</strong> <span class="monospaced">[オプション]</span> <span class="monospaced">[フォーマットオプション]</span></p></div>
<div class="paragraph">
<p>プールの一覧を表示するか、プール設定を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--poolid</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--type</span> <span class="monospaced">&amp;lt;lxc | qemu | storage&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">poolid</span></td>
</tr></table>
</div>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum pool modify</strong> <span class="monospaced">&amp;lt;poolid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>プールを更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;poolid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--allow-move</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
別のプールに既に属している場合でもゲストの追加を許可します。ゲストは現在のプールから削除され、このプールに追加されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
指定されたVMIDおよび/またはストレージIDを追加する代わりに削除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--storage</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
このプールに追加または削除するストレージIDのリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--vms</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
このプールに追加または削除するゲストVMIDのリスト。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum realm add</strong> <span class="monospaced">&amp;lt;realm&amp;gt; --type &amp;lt;string&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>認証サーバーを追加します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;realm&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
認証ドメインID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--acr-values</span> <span class="monospaced">^[^\x00-\x1F\x7F &amp;lt;&amp;gt;#"]*$</span></dt>
<dd>
<p>
認証要求に対して認証サーバーが使用を要求されている認証コンテキストクラス参照値を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--autocreate</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ユーザーが存在しない場合は自動的に作成する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--base_dn</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
LDAP ベースドメイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bind_dn</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
LDAPバインドドメイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--capath</span> <span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">/etc/ssl/certs</span>)</dt>
<dd>
<p>
CA証明書ストアへのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--case-sensitive</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ユーザー名は大文字小文字を区別する</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cert</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
クライアント証明書のパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--certkey</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
クライアント証明書キーのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--check-connection</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
サーバーへのバインド接続を確認します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--client-id</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
OpenIDクライアントID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--client-key</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
OpenIDクライアントキー</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--default</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
これをデフォルトのレルムとして使用</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--domain</span> <span class="monospaced">\S+</span></dt>
<dd>
<p>
ADドメイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--filter</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ユーザー同期用LDAPフィルター</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group_classes</span> <span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">groupOfNames, group, univentionGroup, ipausergroup</span>)</dt>
<dd>
<p>
グループ用のオブジェクトクラス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group_dn</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
グループ同期用のLDAPベースドメイン名。設定されていない場合、base_dnが使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group_filter</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
グループ同期用LDAPフィルター</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group_name_attr</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
グループ名を表すLDAP属性。設定されていないか見つからない場合、DNの最初の値が名前として使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--groups-autocreate</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
グループが存在しない場合に自動作成する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--groups-claim</span> <span class="monospaced">(?^:[A-Za-z0-9\.\-_]+)</span></dt>
<dd>
<p>
グループ取得に使用するOpenIDクレーム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--groups-overwrite</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ログイン時にユーザーの全グループを上書きします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--発行者URL</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
OpenID Issuer Url</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mode</span> <span class="monospaced">&amp;lt;ldap | ldap+starttls | ldaps&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">ldap</span>)</dt>
<dd>
<p>
LDAPプロトコルモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--password</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
LDAPバインドパスワード。<em>/etc/pve/priv/realm/&amp;lt;REALM&amp;gt;.pwに</em>保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--port</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - 65535)</span></dt>
<dd>
<p>
サーバーポート。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--prompt</span> <span class="monospaced">(?:none|login|consent|select_account|\S+)</span></dt>
<dd>
<p>
認証サーバーがエンドユーザーに再認証と同意を求めるかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--query-userinfo</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ユーザー情報エンドポイントからクレーム値をクエリ可能にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scopes</span> <span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">email profile</span>)</dt>
<dd>
<p>
認証および返却すべきスコープ（ユーザー詳細）を指定します。例：<em>email</em>または<em>profile</em>。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--secure</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
セキュアなLDAPSプロトコルを使用します。非推奨：代わりに<em>mode</em>を使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--server1</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
サーバーIPアドレス（またはDNS名）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--server2</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
フォールバックサーバーのIPアドレス（またはDNS名）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sslversion</span> <span class="monospaced">&amp;lt;tlsv1 | tlsv1_1 | tlsv1_2 | tlsv1_3&amp;gt;</span></dt>
<dd>
<p>
LDAPS TLS/SSLバージョン。1.2より古いバージョンの使用は推奨されません！</p>
</dd>
<dt class="hdlist1">
--sync-defaults-options [enable-new=&amp;lt;1|0&amp;gt;] [,full=&amp;lt;1|0&amp;gt;]<span class="monospaced">[,purge=&amp;lt;1|0&amp;gt;] [,remove-vanished=([acl];[properties];[entry])|none] [,scope=&amp;lt;users|groups|both&amp;gt;]</span></dt>
<dd>
<p>
同期動作のデフォルト設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sync_attributes</span> <span class="monospaced">\w+=[^,]+(,\s*\w+=[^,]+)*</span></dt>
<dd>
<p>
LDAP属性をPVEユーザーフィールドにマッピングするためのキー=値ペアのカンマ区切りリスト。例：LDAP<em>属性mailを</em>PVE<em>のemailに</em>マッピングするには、<em>email=mailと</em>記述します。デフォルトでは、各PVEユーザーフィールドは同名のLDAP属性で表現されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tfa</span> <span class="monospaced">type=&amp;lt;TFATYPE&amp;gt; [,digits=&amp;lt;COUNT&amp;gt;] [,id=&amp;lt;ID&amp;gt;] [,key=&amp;lt;KEY&amp;gt;] [,step=&amp;lt;SECONDS&amp;gt;] [,url=&amp;lt;URL&amp;gt;]</span></dt>
<dd>
<p>
二要素認証を使用する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--type</span> <span class="monospaced">&amp;lt;ad | ldap | openid | pam | pve&amp;gt;</span></dt>
<dd>
<p>
レルムタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--user_attr</span> <span class="monospaced">\S{2,}</span></dt>
<dd>
<p>
LDAPユーザー属性名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--user_classes</span> <span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">inetorgperson, posixaccount, person, user</span>)</dt>
<dd>
<p>
ユーザーのオブジェクトクラス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--username-claim</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
一意のユーザー名生成に使用するOpenIDクレーム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verify</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
サーバーのSSL証明書を確認する</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum realm delete</strong> <span class="monospaced">&amp;lt;realm&amp;gt;</span></p></div>
<div class="paragraph">
<p>認証サーバーを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;realm&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
認証ドメインID</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum realm list</strong> <span class="monospaced">[フォーマットオプション]</span></p></div>
<div class="paragraph">
<p>認証ドメインのインデックスを表示します。</p></div>
<div class="paragraph">
<p><strong>pveum realm modify</strong> <span class="monospaced">&amp;lt;realm&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>認証サーバーの設定を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;realm&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
認証ドメインID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--acr-values</span> <span class="monospaced">^[^\x00-\x1F\x7F &amp;lt;&amp;gt;#"]*$</span></dt>
<dd>
<p>
認証要求に対して認証サーバーが使用を要求されている認証コンテキストクラス参照値を指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--autocreate</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ユーザーが存在しない場合、自動的に作成する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--base_dn</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
LDAPベースドメイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bind_dn</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
LDAPバインドドメイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--capath</span> <span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">/etc/ssl/certs</span>)</dt>
<dd>
<p>
CA証明書ストアへのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--case-sensitive</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ユーザー名は大文字小文字を区別する</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--cert</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
クライアント証明書のパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--certkey</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
クライアント証明書キーのパス</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--check-connection</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
サーバーへのバインド接続を確認します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--client-id</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
OpenIDクライアントID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--client-key</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
OpenIDクライアントキー</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--default</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
これをデフォルトのレルムとして使用</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
現在の設定ファイルのダイジェストが異なる場合、変更を防止します。これにより同時変更を防止できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--domain</span> <span class="monospaced">\S+</span></dt>
<dd>
<p>
AD ドメイン名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--filter</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ユーザー同期用のLDAPフィルター。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group_classes</span> <span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">groupOfNames, group, univentionGroup, ipausergroup</span>)</dt>
<dd>
<p>
グループ用のオブジェクトクラス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group_dn</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
グループ同期用のLDAPベースドメイン名。設定されていない場合、base_dnが使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group_filter</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
グループ同期用のLDAPフィルター。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group_name_attr</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
グループ名を表すLDAP属性。設定されていないか見つからない場合、DNの最初の値が名前として使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--groups-autocreate</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
グループが存在しない場合に自動作成する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--groups-claim</span> <span class="monospaced">(?^:[A-Za-z0-9\.\-_]+)</span></dt>
<dd>
<p>
グループ取得に使用するOpenIDクレーム。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--groups-overwrite</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ログイン時にユーザーの全グループを上書きします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--発行者URL</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
OpenID Issuer Url</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mode</span> <span class="monospaced">&amp;lt;ldap | ldap+starttls | ldaps&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">ldap</span>)</dt>
<dd>
<p>
LDAPプロトコルモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--password</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
LDAPバインドパスワード。<em>/etc/pve/priv/realm/&amp;lt;REALM&amp;gt;.pwに</em>保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--port</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - 65535)</span></dt>
<dd>
<p>
サーバーポート。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--prompt</span> <span class="monospaced">(?:none|login|consent|select_account|\S+)</span></dt>
<dd>
<p>
認証サーバーがエンドユーザーに再認証と同意を求めるかどうかを指定します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--query-userinfo</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ユーザー情報エンドポイントからクレーム値をクエリ可能にします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scopes</span> <span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">email profile</span>)</dt>
<dd>
<p>
認証および返却すべきスコープ（ユーザー詳細）を指定します。例：<em>email</em>または<em>profile</em>。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--secure</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
セキュアなLDAPSプロトコルを使用します。非推奨：代わりに<em>mode</em>を使用してください。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--server1</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
サーバーIPアドレス（またはDNS名）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--server2</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
フォールバックサーバーのIPアドレス（またはDNS名）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sslversion</span> <span class="monospaced">&amp;lt;tlsv1 | tlsv1_1 | tlsv1_2 | tlsv1_3&amp;gt;</span></dt>
<dd>
<p>
LDAPS TLS/SSLバージョン。1.2より古いバージョンの使用は推奨されません！</p>
</dd>
<dt class="hdlist1">
--sync-defaults-options [enable-new=&amp;lt;1|0&amp;gt;] [,full=&amp;lt;1|0&amp;gt;]<span class="monospaced">[,purge=&amp;lt;1|0&amp;gt;] [,remove-vanished=([acl];[properties];[entry])|none] [,scope=&amp;lt;users|groups|both&amp;gt;]</span></dt>
<dd>
<p>
同期動作のデフォルト設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sync_attributes</span> <span class="monospaced">\w+=[^,]+(,\s*\w+=[^,]+)*</span></dt>
<dd>
<p>
LDAP属性をPVEユーザーフィールドにマッピングするためのキー=値ペアのカンマ区切りリスト。例：LDAP<em>属性mailを</em>PVE<em>のemailに</em>マッピングするには、<em>email=mailと</em>記述。デフォルトでは、各PVEユーザーフィールドは同名のLDAP属性で表現される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tfa</span> <span class="monospaced">type=&amp;lt;TFATYPE&amp;gt; [,digits=&amp;lt;COUNT&amp;gt;] [,id=&amp;lt;ID&amp;gt;] [,key=&amp;lt;KEY&amp;gt;] [,step=&amp;lt;SECONDS&amp;gt;] [,url=&amp;lt;URL&amp;gt;]</span></dt>
<dd>
<p>
二要素認証を使用する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--user_attr</span> <span class="monospaced">\S{2,}</span></dt>
<dd>
<p>
LDAPユーザー属性名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--user_classes</span> <span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">inetorgperson, posixaccount, person, user</span>)</dt>
<dd>
<p>
ユーザーのオブジェクトクラス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verify</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
サーバーのSSL証明書を検証する</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum realm sync</strong> <span class="monospaced">&amp;lt;realm&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>設定済みのLDAPからユーザーおよび/またはグループをuser.cfgに同期します。注意:
同期されたグループは名前が<em>name-$realm</em>となるため、上書きを防ぐために
それらのグループが存在しないことを確認してください。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;realm&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
認証ドメインID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dry-run</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
設定されている場合、何も書き込まない。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--enable-new</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
新規同期ユーザーを即時有効化</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--full</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
非推奨: 代わりに<em>remove-vanished</em>を使用してください。設定されている場合、LDAPディレクトリを真実のソースとして使用し、同期から返されなかったユーザーまたはグループを削除し、同期されたユーザーのローカルで変更されたプロパティをすべて削除します。設定されていない場合、同期されたデータに存在する情報のみを同期し、他のものは削除または変更しません。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--purge</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
非推奨: 代わりに<em>remove-vanished</em>を使用してください。同期中に設定から削除されたユーザーまたはグループの ACL を削除します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove-vanished</span> <span class="monospaced">([acl];[properties];[entry])|none</span>(<em>デフォルト =</em> <span class="monospaced">none</span>)</dt>
<dd>
<p>
同期中にユーザーまたは対象が消失した場合に削除する項目をセミコロン区切りで列挙します。以下の値が指定可能です：<em>entry</em>：同期から返されなかったユーザー/<em>グループを削除properties</em>：ソースに存在しない既存ユーザー/グループの設定プロパティ（カスタムプロパティも含む）<em>を削除acl</em>：同期から返されなかったユーザー/グループのACLを削除リストの<em>代わりにnone</em>（デフォルト）を指定することも可能です。
</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--scope</span> <span class="monospaced">&amp;lt;both | groups | users&amp;gt;</span></dt>
<dd>
<p>
同期対象を選択します。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum role add</strong> <span class="monospaced">&amp;lt;roleid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>新しいロールを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;roleid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--privs</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum role delete</strong> <span class="monospaced">&amp;lt;roleid&amp;gt;</span></p></div>
<div class="paragraph">
<p>ロールを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;roleid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum role list</strong> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>ロールインデックスを表示します。</p></div>
<div class="paragraph">
<p><strong>pveum role modify</strong> <span class="monospaced">&amp;lt;roleid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>既存のロールを更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;roleid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--append</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">必要なオプション:<span class="monospaced">privs</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--privs</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum roleadd</strong></p></div>
<div class="paragraph">
<p><em>pveum role add</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveum roledel</strong></p></div>
<div class="paragraph">
<p><em>pveum role delete</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveum rolemod</strong></p></div>
<div class="paragraph">
<p><em>pveum role modify</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveum ticket</strong> <span class="monospaced">&amp;lt;username&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>認証チケットを作成または検証します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;username&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ユーザー名</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--new-format</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
このパラメータは現在無視され、1とみなされます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--otp</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
二要素認証用のワンタイムパスワード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--path</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
チケットを検証し、ユーザーが<em>パス</em>に対するアクセス<em>権限</em>を持っているかどうかを確認します</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">privs</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--privs</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
チケットを検証し、ユーザーが<em>パス</em>に対するアクセス<em>権限</em>を持っているか確認する</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">必要なオプション:<span class="monospaced">path</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--realm</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
このパラメータを使用して、任意でレルムを渡すことができます。通常、レルムは単にユーザー名 &amp;lt;username&amp;gt;@&amp;lt;realm&amp;gt; に追加されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tfa-challenge</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ユーザーが応答する署名付きTFAチャレンジ文字列。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user add</strong> <span class="monospaced">&amp;lt;userid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>新規ユーザーを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;userid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
完全なユーザーID（<span class="monospaced">名前@レルム</span>形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--email</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--enable</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
アカウントを有効化（デフォルト）。<em>0に設定すると</em>アカウントが無効化されます</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--expire</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
アカウント有効期限（エポックからの秒数）。<em>0は</em>期限なしを意味します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--firstname</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--groups</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keys</span> <span class="monospaced">[0-9a-zA-Z!=]{0,4096}</span></dt>
<dd>
<p>
二要素認証用キー（Yubico）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lastname</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--パスワード</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
初期パスワード。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user delete</strong> <span class="monospaced">&amp;lt;userid&amp;gt;</span></p></div>
<div class="paragraph">
<p>ユーザーを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;userid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
完全なユーザーID（<span class="monospaced">名前@領域形式</span>）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user list</strong> <span class="monospaced">[オプション]</span> <span class="monospaced">[フォーマットオプション]</span></p></div>
<div class="paragraph">
<p>ユーザーインデックスを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--enabled</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
プロパティ有効化用のオプションフィルター。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--full</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
グループおよびトークン情報を含める。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user modify</strong> <span class="monospaced">&amp;lt;userid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>ユーザー設定を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;userid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
完全なユーザーID（<span class="monospaced">name@realm</span>形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--append</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">オプションが必要です:<span class="monospaced">groups</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--email</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--enable</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
アカウントを有効化（デフォルト）。<em>0に設定すると</em>アカウントが無効化されます</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--expire</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
アカウント有効期限（エポックからの秒数）。<em>0は</em>有効期限なしを意味します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--firstname</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--groups</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--keys</span> <span class="monospaced">[0-9a-zA-Z!=]{0,4096}</span></dt>
<dd>
<p>
二要素認証用キー（Yubico）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lastname</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user permissions</strong> <span class="monospaced">[&amp;lt;userid&amp;gt;]</span> <span class="monospaced">[オプション]</span> <span class="monospaced">[フォーマットオプション]</span></p></div>
<div class="paragraph">
<p>指定されたユーザー/トークンの有効な権限を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
&amp;lt;userid&amp;gt;: (?^:^(?^:[^\s:/]+)\@(?^:[A-Za-z][A-Za-z0-9\.\-_]+)(?:!(?^:[A-Za-z][A-Za-z0-9\.\-_]+))?$) 
</dt>
<dd>
<p>
ユーザーIDまたは完全なAPIトークンID</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--path</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
この特定のパスのみをダンプし、ツリー全体はダンプしない。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user tfa delete</strong> <span class="monospaced">&amp;lt;userid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ユーザーからTFAエントリを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;userid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
完全なユーザーID（<span class="monospaced">name@realm</span>形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--id</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
TFA ID（指定がない場合、全てのTFAエントリが削除される）</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user tfa list</strong> <span class="monospaced">[&amp;lt;userid&amp;gt;]</span></p></div>
<div class="paragraph">
<p>TFAエントリを一覧表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;userid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
完全なユーザーID（<span class="monospaced">name@realm</span>形式）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user tfa unlock</strong> <span class="monospaced">&amp;lt;userid&amp;gt;</span></p></div>
<div class="paragraph">
<p>ユーザーのTFA認証を解除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;userid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
完全なユーザーID（<span class="monospaced">name@realm</span>形式）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user token add</strong> <span class="monospaced">&amp;lt;userid&amp;gt; &amp;lt;tokenid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>特定のユーザー向けに新しいAPIトークンを生成します。
注: APIトークンの値を返します。
後で取得できないため、必ず保存してください！</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;userid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
完全なユーザーID（<span class="monospaced">name@realm</span>形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;tokenid&amp;gt;</span>:<span class="monospaced">(?^:[A-Za-z][A-Za-z0-9\.\-_]+)</span></dt>
<dd>
<p>
ユーザー固有のトークン識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--expire</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">ユーザーと同じ</span>)</dt>
<dd>
<p>
APIトークンの有効期限（エポックからの秒数）。<em>0は</em>期限なしを意味します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--privsep</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
APIトークンの権限を個別のACLで制限（デフォルト）、または対応するユーザーの全権限を付与。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user token delete</strong> <span class="monospaced">&amp;lt;userid&amp;gt; &amp;lt;tokenid&amp;gt;</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>特定のユーザーのAPIトークンを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;userid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
完全なユーザーID（<span class="monospaced">name@realm</span>形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;tokenid&amp;gt;</span>:<span class="monospaced">(?^:[A-Za-z][A-Za-z0-9\.\-_]+)</span></dt>
<dd>
<p>
ユーザー固有のトークン識別子。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user token list</strong> <span class="monospaced">&amp;lt;userid&amp;gt;</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>ユーザーの API トークンを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;userid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
完全なユーザーID（<span class="monospaced">name@realm</span>形式）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user token modify</strong> <span class="monospaced">&amp;lt;userid&amp;gt; &amp;lt;tokenid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>特定のユーザーのAPIトークンを更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;userid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
完全なユーザーID（<span class="monospaced">name@realm</span>形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;tokenid&amp;gt;</span>:<span class="monospaced">(?^:[A-Za-z][A-Za-z0-9\.\-_]+)</span></dt>
<dd>
<p>
ユーザー固有のトークン識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明なし</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--expire</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">ユーザーと同じ</span>)</dt>
<dd>
<p>
APIトークンの有効期限（エポックからの秒数）。<em>0は</em>期限なしを意味します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--privsep</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
APIトークンの権限を個別のACLで制限（デフォルト）、または対応するユーザーの全権限を付与。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user token permissions</strong> <span class="monospaced">&amp;lt;userid&amp;gt; &amp;lt;tokenid&amp;gt;</span> <span class="monospaced">[OPTIONS]</span> <span class="monospaced">[FORMAT_OPTIONS]</span></p></div>
<div class="paragraph">
<p>指定されたトークンの有効な権限を取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;userid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
完全なユーザーID（<span class="monospaced">name@realm</span>形式）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;tokenid&amp;gt;</span>:<span class="monospaced">(?^:[A-Za-z][A-Za-z0-9\.\-_]+)</span></dt>
<dd>
<p>
ユーザー固有のトークン識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--path</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
この特定のパスのみをダンプし、ツリー全体はダンプしない。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveum user token remove</strong></p></div>
<div class="paragraph">
<p><em>pveum user token delete</em> の別名です。</p></div>
<div class="paragraph">
<p><strong>pveum useradd</strong></p></div>
<div class="paragraph">
<p><em>pveum user add</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveum userdel</strong></p></div>
<div class="paragraph">
<p><em>pveum user delete</em> の別名。</p></div>
<div class="paragraph">
<p><strong>pveum usermod</strong></p></div>
<div class="paragraph">
<p><em>pveum user modify</em> の別名。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_vzdump_strong_backup_utility_for_vms_and_containers">
<span>22.16.<strong>vzdump</strong>- VMおよびコンテナ用バックアップユーティリティ</span>
<a class="headerlink" href="#_strong_vzdump_strong_backup_utility_for_vms_and_containers" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>vzdump</strong> <span class="monospaced">ヘルプ</span></p></div>
<div class="paragraph">
<p><strong>vzdump</strong> <span class="monospaced">{&amp;lt;vmid&amp;gt;}</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>バックアップを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;vmid&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
バックアップ対象のゲストシステムのID。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--all</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このホスト上の既知のゲストシステムをすべてバックアップする。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--bwlimit</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
I/O 帯域幅を制限（単位: KiB/s）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--compress</span> <span class="monospaced">&amp;lt;0 | 1 | gzip | lzo | zstd&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ダンプファイルを圧縮する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dumpdir</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
結果ファイルを指定ディレクトリに保存。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--exclude</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
指定したゲストシステムを除外する（--all を前提とする）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--exclude-path</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のファイル/ディレクトリを除外（シェルグロブ）。<em>/で</em>始まるパスはコンテナのルートに固定され、その他のパスは各サブディレクトリを基準に相対的に一致する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--fleecing</span> <span class="monospaced">[[enabled=]&amp;lt;1|0&amp;gt;] [,storage=&amp;lt;storage ID&amp;gt;]</span></dt>
<dd>
<p>
バックアップ搾取オプション（VM専用）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--ionice</span> <span class="monospaced">&amp;lt;整数&amp;gt; (0 - 8)</span>(<em>デフォルト =</em> <span class="monospaced">7</span>)</dt>
<dd>
<p>
BFQスケジューラ使用時のIO優先度を設定。VMのスナップショット/サスペンドモードバックアップでは、圧縮モジュールのみに影響。値8はアイドル優先度を意味し、それ以外は指定値でベストエフォート優先度が使用される。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--job-id</span> <span class="monospaced">\S+</span></dt>
<dd>
<p>
バックアップジョブのID。設定すると、バックアップ通知の<em>backup-jobメタデータ</em>フィールドがこの値に設定されます。<a href="mailto:root@pam">root@pam</a>のみが設定可能です。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--lockwait</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">180</span>)</dt>
<dd>
<p>
グローバルロック待機の上限時間（分単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mailnotification</span> <span class="monospaced">&amp;lt;always | failure&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">always</span>)</dt>
<dd>
<p>
非推奨: 代わりに通知ターゲット/マッチャーを使用してください。通知メールを送信するタイミングを指定します</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mailto</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
非推奨: 代わりに通知ターゲット/マッチャーを使用してください。メール通知を受信すべきメールアドレスまたはユーザーのカンマ区切りリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--maxfiles</span> <span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span></dt>
<dd>
<p>
非推奨:<em>prune-backups</em>を使用してください。ゲストシステムごとのバックアップファイルの最大数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--mode</span> <span class="monospaced">&amp;lt;スナップショット | 停止 | 一時停止&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">スナップショット</span>)</dt>
<dd>
<p>
バックアップモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--node</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
このノード上で実行された場合のみ実行する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--notes-template</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
バックアップのメモを生成するためのテンプレート文字列。変数を含めることができ、その値で置換されます。現在サポートされているのは{\{\cluster}}、{\{\guestname}}、{\{\node}}、および{\{\vmid}}ですが、将来追加される可能性があります。1行で記述する必要があります。改行とバックスラッシュはそれぞれ<em>\nと</em> <em>\\</em>でエスケープする必要があります。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">オプションが必要:<span class="monospaced">storage</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">--notification-mode</span> <span class="monospaced">&amp;lt;auto | legacy-sendmail | notification-system&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">auto</span>)</dt>
<dd>
<p>
使用する通知システムを決定します。<em>legacy-sendmail</em> に設定すると、vzdump は mailto/mailnotification パラメータを考慮し、<em>sendmail コマンド</em>経由で指定されたアドレスにメールを送信します。<em>notification-system</em> に設定すると、PVE の通知システム経由で通知が送信され、mailto および mailnotification は無視されます。<em>auto</em>（デフォルト設定）に設定した場合、mailtoが設定されていればメールが送信され、設定されていなければ通知システムが使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pbs-change-detection-mode</span> <span class="monospaced">&amp;lt;data | legacy | metadata&amp;gt;</span></dt>
<dd>
<p>
ファイル変更の検出およびコンテナバックアップのエンコーディング形式切り替えに使用されるPBSモード。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--performance</span> <span class="monospaced">[max-workers=&amp;lt;integer&amp;gt;] [,pbs-entries-max=&amp;lt;integer&amp;gt;]</span></dt>
<dd>
<p>
その他のパフォーマンス関連設定。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pigz</span> <span class="monospaced">&amp;lt;integer&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
N&gt;0の場合、gzipの代わりにpigzを使用。N=1ではコア数の半分を使用、N&gt;1ではNをスレッド数として使用。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--pool</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
指定されたプールに含まれる既知のゲストシステムをすべてバックアップします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--protected</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
trueの場合、バックアップを保護済みとしてマークします。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAJhUlEQVRoge2ZWWycVxXHf+fce7/v
m/GaGCde4pI0aQlJC0kRtE1L00JbLIjY4QkeUB9YHhAIJFCExAsKUkE8IAFFPIDUIqhBRSDRBUqC
CimFFBCBpCWx02IaZ3G2SdyxPZ7vHh6+mcnSZnFjKIge6Wj8zYzvPf9z/me5d8TM+F8WfbkNuFx5
BcDLLf/fAEZGRmx4eNh6enqsp6fHhoeHbWRk5D9aFeSlVqHNmzfb6H33sHnT7ZQmD5GfOMax6Sm+
Pl5h1Yc+xpYtW2SBbX1ReUkRGBkZsdH77mHLW95EOv4Ms3ueJh6YYPHUFF9aljJ63z3cf//9/5FI
vKQIDA8P293L2yhVjjH7t51ocDiviFecF46n7XzBreChhx4qNhH5t0XjJUVgx44ddGUZ9b/vIpQD
oRQIWSDJAiFL6B9axo4dO4gxAmANWVDLG+Ln82URMRGhVCqRHxonlAPqFXWKC4r6IhI6OMjMzBN4
/4LlTUQQEZxzZ32QJAlpmrb+p16vU6vVOHXq1AWjN18AnDj0F971vrs4OnmYJVkoDA4FCPUO172I
Cgnt7SV++4vvsGhRJx3tJbIsRVVpsUnOBBABBVFEClKYwbKr7sTM7EIUnBcA7z21k7t49x1X8JXv
bOWra7rw5QRtcN8PLCfvvZJvb9vJycpJpg4/hp/N0I4SMQs4Jw0A5zBXHGiCaIZIKABgpGlKjPEF
0TpT5pUDRXiVt99+Le03r+WzuytM1gO6pB/3+o0cbxvk8yOPMjW6i2iR2lxOjJDHSDMFogmGwzQ7
rRJAUpAENAGXIZq2AFzQpvkACCEQcahP+cRH3sKHn9zHXU+MM7rtGeD33NDXzaZynZU9gcezpUw9
X6OzIyOakkfF4QEpPG6nDRNNEA2FSgKimETSNCXPc0II57VpXhEolUqoOrxPSLOMT330Dv5SqfKD
NR388Y2L+caQsjITNv3pMBs3rOT56ZyZGaM+J0QUxDc0INrWUgggoRGBAOIRAt77hY1AmqaoeJxP
cN645jVDbNn8Hj73o8fZ/af9mEE9j9y2YRXt5YzZWmRmzjj1/BwhTXAKzitOHEbeWlc0AVwDnCv8
KoZzjotV33lTSL1HNKAuEtKM1169jM98/E6mTk3x4Nbd7Bk7TEdHRvAeVY+hmDqmZwx1kIkiqrhz
S2zL+AbNMC6l/80LgHMOEY9oQvBCks5RKpXo7JhFxbhz42pet2aQet1YtLiDJAkIDq8BHwJmwlwO
UaD0ojsrNKuUReIZyb9gABCHcwWFgg+0lTPyvIRToVzKWLpkMfV6REQplYvmZCj1uuBUSdJwTg8A
XBdoCZMOsBkQBeGi/J83gBgjmABC8AlJGsjzFLMyaXDM1etEA0VR50iCx6mSZhkiijpPjEpQD+SF
4WdJrTAewdCFB1CtVlFVVATnhMQnWJqC5aTBk+c5IIgWRoTgSZJAmiZAo1s7hwsppglI+fTiljeY
nyHkLQotKIAYI4igzpFHISQOiwEnKTEG8hhRVZw6YjRQLfJGHcF7jleqTBw8znXr12MABnv37efY
iSnesG4tiUsRUQwD7JIAzKsPqCqiRbVwweM04XdPjhJN+dvTBxgbn6G9q59yZx9/3HWEb33vN+zc
/RzOJ+w/eJLtO8Z5ZNtT7PvHIUQTvvv9X/Lc/mN0d3by3fseRLQwvWh0Fy+h8wbQ2VFG1KM+xfuA
qufo8So/fejPPD/rqJys8pvf7eLAoeNMHqnw2U9+kH3jVQ5MClMzKUla5obr13HliiEMmDx6gltv
uY7Vr1nBQF8PJopQ9AFTt/AROFfMjCW9XTy19xB33Hodb924jr1j+/nDk3/nzTdei4jw3nfeyCOP
bufa1y5jzeoVrcHM8HR3dfHlr/2Q+x94jFtuuh44/9B2PplXDryYLF3STXd3e+t5UXcHY89OsOH6
NS2Qed7wpM1Rm50G4MGHH2P961Zy3bqreXrPP5mrzwLt5y6/cACq1eoLCKm+TN/SAebmfn8aUG83
PYs7+cnPH+eqKwd5as8/edc7bi02847pmVkATk1VWbF8AOcca1Yv59DkqcYK0tCL02deACqVCldc
0YdIwLmEPM9RV6NnUZlPf3wT6oqJcePN6wHhzTeu4/CRCrfctJ4sSxBRli7pYfHEMUSU97/7Th75
1RP8eec+Yp5zzTVXM9DfDyogBvHS6HTJACYmJnjVoq5GFw0454gCEOnoaMfiNGZFFRFxJGkbywZ6
i1NWoy9kWYmbb1gHKCHApuGbisVFGyoYUswa5OR5ftF56JIBjI6OMtDfWwAQ35jnc8AVpRXBohVq
UowECKqK4RBxoE0W6gvGCcEjaOEAwEQWdpgbGxujt7erOLO2mk3R8i0Wz9EiuUGz+qlKEQEUaJbI
4lTHmTVePKgWzpDGJGpc8CDTlEsuo88++wxXDA0UIUbAOP23KGZKjI48KnkuhcbiPbPCOBoeBikO
Lk2VxjqNRilaAEqSZGEAbN261bZt+zW33XY7IAXXm6Ou0YhIMamaaUOl5WRrzg00viuKWWxpQUOH
NAZFQRpD48Xlkig0MTHBB95zG+VSylz1KCbWyDOh2XyK+56IqjWMKigkUnzWnPPFFFRRLZ29SQRU
ELOGY4pZ6LKOlM07mZ07d/KOtw1TcB4sGkTDiDQ9K1IkrKeYmQC08d7pZLSiRBpE5s7aS0XAHFEK
AGY51Wr18g80Zmb33nsvX/z8XdSmj2AWOXhwkrxe46+79jB55Dh/3T2GxUhHextdXW2sXN7PNWtW
IQKDA71FFBoAjIgQkVg/a5+oHrU5zIznDhxk964xKpXKggAoTlWW8+OfPorlOQ//cjsDy1bS2dFO
W+diVly1iL6+Pqanpzl5qsL4pPHwN3/G1InDlMsZ7Z1tDA30cfWqIa5dexV9fb2YnT7UTxw4xsHJ
o4yOjfOP8QOMjx/k4OQx7r777lY0zycXvJ02M4sxMjg4SL1eR0TYsGEDw8PD9PX10d7ejogUN3a1
GqpKCIE8z5mdnUVVqVarbN++nba2Nvbu3csDDzyAqrJ8+atb+zjn6e/vZ/Xq1axatYq1a9fS29tL
lmUMDQ1RKpXOm9EXvV6v1+tWr9eZnp5mZmaGWq1GjLHF62aiNZ+bnPfe45xrvTZzxMyYmZk56+LX
zKjX661DvHOOJElIkoRSqYT3/vLvRlW15eHCa4VxzdvmpjZDfubzuXeb3vuzqCEixBhbo0NTkyS5
PAr9L8j/96+U/w3yCoCXW14B8HLLvwDd67nwZIEPdgAAAABJRU5ErkJggg==" />
</td>
<td class="content">必要なオプション:<span class="monospaced">storage</span></td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
--prune-backups [keep-all=&amp;lt;1|0&amp;gt;]<span class="monospaced">[,keep-daily=&amp;lt;N&amp;gt;] [,keep-hourly=&amp;lt;N&amp;gt;] [,keep-last=&amp;lt;N&amp;gt;] [,keep-monthly=&amp;lt;N&amp;gt;] [,keep-weekly=&amp;lt;N&amp;gt;] [,keep-yearly=&amp;lt;N&amp;gt;] (</span><em>デフォルト =</em> <span class="monospaced">keep-all=1)</span></dt>
<dd>
<p>
ストレージ設定の保持オプションではなく、これらの保持オプションを使用する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--quiet</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
静かに実行する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--remove</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
<em>prune-backups</em> 設定に従い古いバックアップを削除する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--script</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
指定されたフックスクリプトを使用する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--stdexcludes</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
一時ファイルとログを除外する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--stdout</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
tarを出力ファイルではなく標準出力に書き出す。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--stop</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
このホストでのバックアップジョブの実行を停止する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--stopwait</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">10</span>)</dt>
<dd>
<p>
ゲストシステムの停止を待機する最大時間（分単位）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--storage</span> <span class="monospaced">&amp;lt;ストレージID&amp;gt;</span></dt>
<dd>
<p>
結果ファイルをこのストレージに保存する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--tmpdir</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
一時ファイルを指定ディレクトリに保存する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--zstd</span> <span class="monospaced">&amp;lt;整数&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
Zstdスレッド数。N=0の場合利用可能なコアの半数を使用し、Nが0より大きい値に設定された場合、Nがスレッド数として使用される。</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_strong_ha_manager_strong_proxmox_ve_ha_manager">
<span>22.17.<strong>ha-manager</strong>- Proxmox VE HA マネージャー</span>
<a class="headerlink" href="#_strong_ha_manager_strong_proxmox_ve_ha_manager" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>ha-manager</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>ha-manager add</strong> <span class="monospaced">&amp;lt;sid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>新しい HA リソースを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;sid&amp;gt;</span>:<span class="monospaced">&amp;lt;type&amp;gt;:&amp;lt;name&amp;gt;</span></dt>
<dd>
<p>
HAリソースID。リソースタイプとリソース固有名をコロンで区切った形式（例: vm:100 / ct:100）。仮想マシンやコンテナの場合は、VM IDまたはCT IDを短縮形として使用可能（例: 100）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--failback</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
現在のノードよりも優先度の高いノードがオンラインになった場合、ノードアフィニティルールに従い、HAリソースを自動的に優先度の高いノードへ移行します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
HAグループ識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--max_relocate</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
サービス起動に失敗した場合の最大再配置試行回数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--max_restart</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ノード上でサービスの起動に失敗した場合、そのノード上でサービスを再起動する試行の最大回数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--state</span> <span class="monospaced">&amp;lt;disabled | enabled | ignored | started | stopped&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">started</span>)</dt>
<dd>
<p>
要求されたリソース状態。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--type</span> <span class="monospaced">&amp;lt;ct | vm&amp;gt;</span></dt>
<dd>
<p>
リソースタイプ。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager config</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>HAリソースの一覧を表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--type</span> <span class="monospaced">&amp;lt;ct | vm&amp;gt;</span></dt>
<dd>
<p>
特定のタイプのリソースのみをリストする</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager crm-command migrate</strong> <span class="monospaced">&amp;lt;sid&amp;gt; &amp;lt;node&amp;gt;</span></p></div>
<div class="paragraph">
<p>別のノードへのリソース移行（オンライン）を要求します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;sid&amp;gt;</span>:<span class="monospaced">&amp;lt;type&amp;gt;:&amp;lt;name&amp;gt;</span></dt>
<dd>
<p>
HAリソースID。リソースタイプとリソース固有名をコロンで区切った形式（例: vm:100 / ct:100）。仮想マシンやコンテナの場合は、VM IDまたはCT IDを短縮形として使用可能（例: 100）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;ノード&amp;gt;</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
ターゲットノード。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager crm-command node-maintenance disable</strong> <span class="monospaced">&amp;lt;node&amp;gt;</span></p></div>
<div class="paragraph">
<p>ノードメンテナンス要求の状態を変更します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;node&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
クラスタノード名。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager crm-command node-maintenance enable</strong> <span class="monospaced">&amp;lt;node&amp;gt;</span></p></div>
<div class="paragraph">
<p>ノードメンテナンス要求の状態を変更します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;node&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
クラスタノード名。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager crm-command relocate</strong> <span class="monospaced">&amp;lt;sid&amp;gt; &amp;lt;node&amp;gt;</span></p></div>
<div class="paragraph">
<p>リソースを別のノードへ再配置するよう要求します。これにより、
元のノード上のサービスが停止され、ターゲットノード上で再起動されます。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;sid&amp;gt;</span>:<span class="monospaced">&amp;lt;type&amp;gt;:&amp;lt;name&amp;gt;</span></dt>
<dd>
<p>
HAリソースID。リソースタイプとリソース固有名をコロンで区切った形式（例：vm:100 / ct:100）。仮想マシンやコンテナの場合は、VM IDまたはCT IDをショートカットとして使用可能（例：100）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;node&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
ターゲットノード。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager crm-command stop</strong> <span class="monospaced">&amp;lt;sid&amp;gt; &amp;lt;timeout&amp;gt;</span></p></div>
<div class="paragraph">
<p>サービスの停止を要求します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;sid&amp;gt;</span>:<span class="monospaced">&amp;lt;type&amp;gt;:&amp;lt;name&amp;gt;</span></dt>
<dd>
<p>
HAリソースID。リソースタイプとリソース固有名をコロンで区切った形式です（例: vm:100 / ct:100）。仮想マシンやコンテナの場合は、VM IDまたはCT IDをショートカットとして使用できます（例: 100）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;timeout&amp;gt;</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span></dt>
<dd>
<p>
秒単位のタイムアウト。0に設定すると強制停止が実行されます。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager groupadd</strong> <span class="monospaced">&amp;lt;group&amp;gt; --nodes &amp;lt;string&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>新しいHAグループを作成します（HAルールに取って代わられ非推奨）。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;group&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
HAグループ識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nodes</span> <span class="monospaced">&amp;lt;node&amp;gt;[:&amp;lt;pri&amp;gt;]{,&amp;lt;node&amp;gt;[:&amp;lt;pri&amp;gt;]}*</span></dt>
<dd>
<p>
クラスタノード名のリスト（優先度はオプション）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nofailback</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CRMは優先度が最も高いノードでサービスを実行しようとします。より優先度の高いノードがオンラインになると、CRMはそのノードにサービスを移行します。nofailbackを有効にすると、この動作が防止されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--restricted</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
制限付きグループにバインドされたリソースは、グループで定義されたノードでのみ実行できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--type</span> <span class="monospaced">&amp;lt;group&amp;gt;</span></dt>
<dd>
<p>
グループタイプ。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager groupconfig</strong></p></div>
<div class="paragraph">
<p>HAグループを取得します。（HAルールに取って代わられ非推奨）</p></div>
<div class="paragraph">
<p><strong>ha-manager groupremove</strong> <span class="monospaced">&amp;lt;group&amp;gt;</span></p></div>
<div class="paragraph">
<p>HAグループ設定を削除します。（HAルールに取って代わられ非推奨）</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;group&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
HAグループ識別子。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager groupset</strong> <span class="monospaced">&amp;lt;group&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>HAグループの構成を更新します。（HAルールに取って代わられ非推奨）</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;group&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
HAグループ識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
現在の設定ファイルのダイジェストが異なる場合、変更を防止します。これにより同時編集を防止できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nodes</span> <span class="monospaced">&amp;lt;node&amp;gt;[:&amp;lt;pri&amp;gt;]{,&amp;lt;node&amp;gt;[:&amp;lt;pri&amp;gt;]}*</span></dt>
<dd>
<p>
クラスタノード名のリスト（優先度はオプション）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--nofailback</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
CRMは優先度が高いノードでサービスを実行しようとします。より優先度の高いノードがオンラインになると、CRMはそのノードにサービスを移行します。nofailbackを有効にすると、この動作を防止します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--restricted</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
制限付きグループにバインドされたリソースは、グループで定義されたノードでのみ実行可能。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定したコマンドのヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示します</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager migrate</strong></p></div>
<div class="paragraph">
<p><em>ha-manager crm-command migrate</em> の別名。</p></div>
<div class="paragraph">
<p><strong>ha-manager relocate</strong></p></div>
<div class="paragraph">
<p><em>ha-manager crm-command relocate</em> の別名です。</p></div>
<div class="paragraph">
<p><strong>ha-manager remove</strong> <span class="monospaced">&amp;lt;sid&amp;gt;</span></p></div>
<div class="paragraph">
<p>リソース構成を削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;sid&amp;gt;</span>:<span class="monospaced">&amp;lt;type&amp;gt;:&amp;lt;name&amp;gt;</span></dt>
<dd>
<p>
HAリソースID。リソースタイプとリソース固有名をコロンで区切った形式（例: vm:100 / ct:100）。仮想マシンやコンテナの場合は、VM IDやCT IDを短縮形として使用可能（例: 100）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager rules add</strong> <span class="monospaced">&amp;lt;type&amp;gt; &amp;lt;rule&amp;gt; --resources &amp;lt;string&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>HAルールを作成します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;type&amp;gt;</span>:<span class="monospaced">&amp;lt;node-affinity | resource-affinity&amp;gt;</span></dt>
<dd>
<p>
HAルールタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;rule&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
HAルール識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
HAルールの説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--disable</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
HAルールが無効化されているかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--resources</span> <span class="monospaced">&amp;lt;type&amp;gt;:&amp;lt;name&amp;gt;{,&amp;lt;type&amp;gt;:&amp;lt;name&amp;gt;}*</span></dt>
<dd>
<p>
HAリソースIDのリスト。リソースタイプとリソース固有名のリストをコロンで区切った形式（例: vm:100,ct:101）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><span class="monospaced">条件付きオプション:</span></p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">[type=node-affinity]</span></dt>
<dd>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--nodes</span> <span class="monospaced">&amp;lt;node&amp;gt;[:&amp;lt;pri&amp;gt;]{,&amp;lt;node&amp;gt;[:&amp;lt;pri&amp;gt;]}*</span></dt>
<dd>
<p>
クラスタノード名のリスト（優先度はオプション）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--strict</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ノードアフィニティルールが厳密か非厳密かを記述します。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">[type=resource-affinity]</span></dt>
<dd>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--affinity</span> <span class="monospaced">&amp;lt;negative | positive&amp;gt;</span></dt>
<dd>
<p>
HAリソースを同一ノードに保持する（<em>肯定的</em>）か、別々のノードに保持する（<em>否定的</em>）かを記述します。</p>
</dd>
</dl></div>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager rules config</strong> <span class="monospaced">[オプション]</span> <span class="monospaced">[フォーマットオプション]</span></p></div>
<div class="paragraph">
<p>HAルールを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--resource</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
返されるリストを、指定されたリソースに影響するルールに制限します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--type</span> <span class="monospaced">&amp;lt;node-affinity | resource-affinity&amp;gt;</span></dt>
<dd>
<p>
返されるリストを指定されたルールタイプに制限する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager rules list</strong> <span class="monospaced">[オプション]</span> <span class="monospaced">[フォーマットオプション]</span></p></div>
<div class="paragraph">
<p>HAルールを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--resource</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
返されるリストを、指定されたリソースに影響するルールに制限する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--type</span> <span class="monospaced">&amp;lt;node-affinity | resource-affinity&amp;gt;</span></dt>
<dd>
<p>
返されるリストを指定されたルールタイプに制限する。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager rules remove</strong> <span class="monospaced">&amp;lt;rule&amp;gt;</span></p></div>
<div class="paragraph">
<p>HAルールを削除します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;rule&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
HAルール識別子。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager rules set</strong> <span class="monospaced">&amp;lt;type&amp;gt; &amp;lt;rule&amp;gt;</span> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>HAルールを更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;type&amp;gt;</span>:<span class="monospaced">&amp;lt;node-affinity | resource-affinity&amp;gt;</span></dt>
<dd>
<p>
HAルールタイプ。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;rule&amp;gt;</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
HAルール識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
HAルールの説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
削除対象の設定リスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
現在の設定ファイルのダイジェストが異なる場合、変更を防止します。これにより同時変更を防止できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--disable</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
HAルールが無効化されているか否か。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--resources</span> <span class="monospaced">&amp;lt;type&amp;gt;:&amp;lt;name&amp;gt;{,&amp;lt;type&amp;gt;:&amp;lt;name&amp;gt;}*</span></dt>
<dd>
<p>
HAリソースIDのリスト。リソースタイプとコロンで区切られたリソース固有名で構成される（例: vm:100,ct:101）。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><span class="monospaced">条件付きオプション:</span></p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">[type=node-affinity]</span></dt>
<dd>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--nodes</span> <span class="monospaced">&amp;lt;node&amp;gt;[:&amp;lt;pri&amp;gt;]{,&amp;lt;node&amp;gt;[:&amp;lt;pri&amp;gt;]}*</span></dt>
<dd>
<p>
クラスタノード名のリスト（優先度はオプション）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--strict</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
ノードアフィニティルールが厳密か非厳密かを記述します。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">[type=resource-affinity]</span></dt>
<dd>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--affinity</span> <span class="monospaced">&amp;lt;negative | positive&amp;gt;</span></dt>
<dd>
<p>
HAリソースを同一ノードに保持する（<em>正</em>）、または別々のノードに保持する（<em>負</em>）かを記述します。</p>
</dd>
</dl></div>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager set</strong> <span class="monospaced">&amp;lt;sid&amp;gt;</span> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>リソース構成を更新します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">&amp;lt;sid&amp;gt;</span>:<span class="monospaced">&amp;lt;type&amp;gt;:&amp;lt;name&amp;gt;</span></dt>
<dd>
<p>
HAリソースID。リソースタイプとリソース固有名をコロンで区切った形式（例: vm:100 / ct:100）。仮想マシンやコンテナの場合は、VM IDやCT IDを短縮形として使用可能（例: 100）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--comment</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
説明。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--delete</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
削除したい設定のリスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--digest</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
現在の設定ファイルのダイジェストが異なる場合、変更を防止します。これにより同時編集を防止できます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--failback</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
現在のノードより優先度の高いノードがオンラインになった場合、ノードアフィニティルールに基づき、優先度の高いノードへ自動的にHAリソースを移行する。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--group</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
HAグループの識別子。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--max_relocate</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
サービス起動に失敗した場合の最大再配置試行回数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--max_restart</span> <span class="monospaced">&amp;lt;integer&amp;gt; (0 - N)</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
ノード上でサービスの起動に失敗した場合、そのサービスを再起動する試行の最大回数。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--state</span> <span class="monospaced">&amp;lt;disabled | enabled | ignored | started | stopped&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">started</span>)</dt>
<dd>
<p>
要求されたリソース状態。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>ha-manager status</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>HA Manager のステータスを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
詳細出力。完全なCRMおよびLRMステータス（JSON）を含める。</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_service_daemons">23. 付録B: サービスデーモン</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_strong_pve_firewall_strong_proxmox_ve_firewall_daemon">
<span>23.1.<strong>pve-firewall</strong>- Proxmox VE ファイアウォールデーモン</span>
<a class="headerlink" href="#_strong_pve_firewall_strong_proxmox_ve_firewall_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pve-firewall</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pve-firewall compile</strong></p></div>
<div class="paragraph">
<p>ファイアウォールルールをコンパイルして出力します。テストに便利です。</p></div>
<div class="paragraph">
<p><strong>pve-firewall help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定したコマンドのヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示する</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pve-firewall localnet</strong></p></div>
<div class="paragraph">
<p>ローカルネットワークに関する情報を表示します。</p></div>
<div class="paragraph">
<p><strong>pve-firewall restart</strong></p></div>
<div class="paragraph">
<p>Proxmox VE ファイアウォールサービスを再起動します。</p></div>
<div class="paragraph">
<p><strong>pve-firewall simulate</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ファイアウォールルールをシミュレートします。これはカーネル<em>ルーティング</em>テーブルをシミュレートするものではなく、単にソースゾーンから宛先ゾーンへのルーティングが可能であると仮定します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--dest</span> <span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
宛先IPアドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--dport</span> <span class="monospaced">&amp;lt;integer&amp;gt;</span></dt>
<dd>
<p>
宛先ポート。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--from</span> <span class="monospaced">(host|outside|vm\d+|ct\d+|([a-zA-Z][a-zA-Z0-9]{0,9})/(\S+))</span>(<em>デフォルト =</em> <span class="monospaced">outside</span>)</dt>
<dd>
<p>
送信元ゾーン。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--protocol</span> <span class="monospaced">(tcp|udp)</span>(<em>デフォルト =</em> <span class="monospaced">tcp</span>)</dt>
<dd>
<p>
プロトコル。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--source</span> <span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
送信元IPアドレス。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--sport</span> <span class="monospaced">&amp;lt;integer&amp;gt;</span></dt>
<dd>
<p>
送信元ポート。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--to</span> <span class="monospaced">(host|outside|vm\d+|ct\d+|([a-zA-Z][a-zA-Z0-9]{0,9})/(\S+))</span>(<em>デフォルト =</em> <span class="monospaced">host</span>)</dt>
<dd>
<p>
宛先ゾーン。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
詳細出力。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pve-firewall start</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>Proxmox VE ファイアウォールサービスを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドで実行</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pve-firewall status</strong></p></div>
<div class="paragraph">
<p>ファイアウォールの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>pve-firewall stop</strong></p></div>
<div class="paragraph">
<p>Proxmox VE ファイアウォールサービスを停止します。注意：停止すると、すべての Proxmox VE 関連の iptable ルールが積極的に削除され、ホストが保護されない状態になる可能性があります。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pvedaemon_strong_proxmox_ve_api_daemon">
<span>23.2.<strong>pvedaemon</strong>- Proxmox VE APIデーモン</span>
<a class="headerlink" href="#_strong_pvedaemon_strong_proxmox_ve_api_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvedaemon</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pvedaemon help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定したコマンドのヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvedaemon restart</strong></p></div>
<div class="paragraph">
<p>デーモンを再起動します（実行中でない場合は起動します）。</p></div>
<div class="paragraph">
<p><strong>pvedaemon start</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>デーモンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドに留まる</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvedaemon status</strong></p></div>
<div class="paragraph">
<p>デーモンの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>pvedaemon stop</strong></p></div>
<div class="paragraph">
<p>デーモンを停止します。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pveproxy_strong_proxmox_ve_api_proxy_daemon">
<span>23.3.<strong>pveproxy</strong>- Proxmox VE API プロキシデーモン</span>
<a class="headerlink" href="#_strong_pveproxy_strong_proxmox_ve_api_proxy_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pveproxy</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pveproxy help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定したコマンドのヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveproxy restart</strong></p></div>
<div class="paragraph">
<p>デーモンを再起動します（実行されていない場合は起動します）。</p></div>
<div class="paragraph">
<p><strong>pveproxy start</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>デーモンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドに留まる</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pveproxy status</strong></p></div>
<div class="paragraph">
<p>デーモンの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>pveproxy stop</strong></p></div>
<div class="paragraph">
<p>デーモンを停止します。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pvestatd_strong_proxmox_ve_status_daemon">
<span>23.4.<strong>pvestatd</strong>- Proxmox VE ステータスデーモン</span>
<a class="headerlink" href="#_strong_pvestatd_strong_proxmox_ve_status_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvestatd</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pvestatd help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定されたコマンドに関するヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvestatd restart</strong></p></div>
<div class="paragraph">
<p>デーモンを再起動します（実行されていない場合は起動します）。</p></div>
<div class="paragraph">
<p><strong>pvestatd start</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>デーモンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドに留まる</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvestatd status</strong></p></div>
<div class="paragraph">
<p>デーモンの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>pvestatd stop</strong></p></div>
<div class="paragraph">
<p>デーモンを停止します。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_spiceproxy_strong_spice_proxy_service">
<span>23.5.<strong>spiceproxy</strong>- SPICE プロキシサービス</span>
<a class="headerlink" href="#_strong_spiceproxy_strong_spice_proxy_service" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>spiceproxy</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>spiceproxy help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定されたコマンドに関するヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>spiceproxy restart</strong></p></div>
<div class="paragraph">
<p>デーモンを再起動します（実行中でない場合は起動します）。</p></div>
<div class="paragraph">
<p><strong>spiceproxy start</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>デーモンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&amp;lt;ブール値&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドに留まる</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>spiceproxy status</strong></p></div>
<div class="paragraph">
<p>デーモンの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>spiceproxy stop</strong></p></div>
<div class="paragraph">
<p>デーモンを停止します。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pmxcfs_strong_proxmox_cluster_file_system">
<span>23.6.<strong>pmxcfs</strong>- Proxmox クラスターファイルシステム</span>
<a class="headerlink" href="#_strong_pmxcfs_strong_proxmox_cluster_file_system" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pmxcfs</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>ヘルプオプション:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">-h</span>,<span class="monospaced">--help</span></dt>
<dd>
<p>
ヘルプオプションを表示</p>
</dd>
</dl></div>
<div class="paragraph">
<p>アプリケーションオプション:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">-d</span>,<span class="monospaced">--debug</span></dt>
<dd>
<p>
デバッグメッセージを有効にする</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-f</span>,<span class="monospaced">--foreground</span></dt>
<dd>
<p>
サーバーをデーモン化しない</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">-l</span>,<span class="monospaced">--local</span></dt>
<dd>
<p>
ローカルモード強制 (corosync.confを無視し、クォーラムを強制)</p>
</dd>
</dl></div>
<div class="paragraph">
<p>このサービスは通常、systemdツールセットを使用して起動および管理されます。
サービスの名前は<em>pve-clusterです</em>。</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>systemctl start pve-cluster</pre>
</div></div>
<div class="literalblock">
<div class="content monospaced">
<pre>systemctl stop pve-cluster</pre>
</div></div>
<div class="literalblock">
<div class="content monospaced">
<pre>systemctl status pve-cluster</pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_strong_pve_ha_crm_strong_cluster_resource_manager_daemon">
<span>23.7.<strong>pve-ha-crm</strong>- クラスタリソースマネージャデーモン</span>
<a class="headerlink" href="#_strong_pve_ha_crm_strong_cluster_resource_manager_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pve-ha-crm</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pve-ha-crm help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを表示します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pve-ha-crm start</strong> <span class="monospaced">[OPTIONS]</span></p></div>
<div class="paragraph">
<p>デーモンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドで実行</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pve-ha-crm status</strong></p></div>
<div class="paragraph">
<p>デーモンの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>pve-ha-crm stop</strong></p></div>
<div class="paragraph">
<p>デーモンを停止します。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pve_ha_lrm_strong_local_resource_manager_daemon">
<span>23.8.<strong>pve-ha-lrm</strong>- ローカルリソースマネージャデーモン</span>
<a class="headerlink" href="#_strong_pve_ha_lrm_strong_local_resource_manager_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pve-ha-lrm</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pve-ha-lrm help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定したコマンドに関するヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pve-ha-lrm start</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>デーモンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドに留まる</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pve-ha-lrm status</strong></p></div>
<div class="paragraph">
<p>デーモンの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>pve-ha-lrm stop</strong></p></div>
<div class="paragraph">
<p>デーモンを停止します。</p></div>
</div>
<div class="sect2">
<h3 id="_strong_pvescheduler_strong_proxmox_ve_scheduler_daemon">
<span>23.9.<strong>pvescheduler</strong>- Proxmox VE スケジューラデーモン</span> <a class="headerlink" href="#_strong_pvescheduler_strong_proxmox_ve_scheduler_daemon" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><strong>pvescheduler</strong> <span class="monospaced">&amp;lt;コマンド&amp;gt; [引数] [オプション]</span></p></div>
<div class="paragraph">
<p><strong>pvescheduler help</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>指定されたコマンドに関するヘルプを取得します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--extra-args</span> <span class="monospaced">&amp;lt;array&amp;gt;</span></dt>
<dd>
<p>
特定のコマンドのヘルプを表示</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">--verbose</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
詳細出力形式。</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvescheduler restart</strong></p></div>
<div class="paragraph">
<p>デーモンを再起動します（実行されていない場合は起動します）。</p></div>
<div class="paragraph">
<p><strong>pvescheduler start</strong> <span class="monospaced">[オプション]</span></p></div>
<div class="paragraph">
<p>デーモンを起動します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">--debug</span> <span class="monospaced">&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
デバッグモード - フォアグラウンドに留まる</p>
</dd>
</dl></div>
<div class="paragraph">
<p><strong>pvescheduler status</strong></p></div>
<div class="paragraph">
<p>デーモンの状態を取得します。</p></div>
<div class="paragraph">
<p><strong>pvescheduler stop</strong></p></div>
<div class="paragraph">
<p>デーモンを停止します。</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_files_2">24. 付録 C: 設定ファイル</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="configuration_files">
<span>24.1.</span>概要
<a class="headerlink" href="#configuration_files" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE の設定ファイルの大半は、
<span class="monospaced">/etc/pve</span> にマウントされた<a href="#chapter_pmxcfs">共有クラスターファイルシステム</a>上に存在します。
例外として、<span class="monospaced">/etc/vzdump.conf</span> にあるバックアップ用のノード固有設定ファイルなどがあります。</p></div>
<div class="paragraph">
<p>通常、設定ファイルのプロパティは、関連するAPIエンドポイントでも使用される
JSONスキーマから派生しています。</p></div>
<div class="sect3">
<h4 id="configuration_files_casing">24.1.1. プロパティ名の大文字小文字<a class="headerlink" href="#configuration_files_casing" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>従来、長いプロパティ（およびサブプロパティ）<span class="monospaced">は蛇行記法（snake_case）が</span>使用されるか、
または1語で記述されることが多かった。これはおそらく、Proxmox VEスタックが主に
プログラミング言語Perlで開発されていたことに起因する。Perlでは<span class="monospaced">ケバブ記法（kebab-case）</span>で
プロパティにアクセスするには追加の引用符が必要であり、また初期開発段階ではスタイルの強制が
弱かったため、開発者によって異なる規約が使用されていた。</p></div>
<div class="paragraph">
<p>新規プロパティでは<span class="monospaced">ケバブケースが</span>推奨され、既存<span class="monospaced">のスネークケース</span>プロパティへのエイリアス導入が計画されています。長期的には、設定復元時の下位互換性を維持しつつ、API・CLI・使用中の設定<span class="monospaced">ファイルをケバブケースへ</span>移行する予定です。</p></div>
</div>
</div>
<div class="sect2">
<h3 id="datacenter_configuration_file">
<span>24.2. データセンター構成</span>
<a class="headerlink" href="#datacenter_configuration_file" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ファイル<span class="monospaced">/etc/pve/datacenter.cfg</span>は Proxmox VE の設定ファイルです。
全ノードで使用されるクラスタ全体のデフォルト値を含みます。</p></div>
<div class="sect3">
<h4 id="_file_format_3">24.2.1. ファイル形式
<a class="headerlink" href="#_file_format_3" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>ファイルはコロン区切りのキー/値形式を採用しています。各行は次の形式です：</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>OPTION: value</pre>
</div></div>
<div class="paragraph">
<p>ファイル内の空白行は無視され、<span class="monospaced">#</span>文字で始まる行はコメントとして扱われ同様に無視されます。</p></div>
</div>
<div class="sect3">
<h4 id="_options">24.2.2. オプション
<a class="headerlink" href="#_options" title="Permalink to this heading"></a></h4>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">bwlimit</span>:<span class="monospaced">[clone=&amp;lt;LIMIT&amp;gt;] [,default=&amp;lt;LIMIT&amp;gt;] [,migration=&amp;lt;LIMIT&amp;gt;] [,move=&amp;lt;LIMIT&amp;gt;] [,restore=&amp;lt;LIMIT&amp;gt;]</span></dt>
<dd>
<p>
各種操作に対するI/O帯域幅制限を設定（単位: KiB/s）。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">clone=&amp;lt;LIMIT&amp;gt;</span></dt>
<dd>
<p>
ディスククローン作成時の帯域幅制限 (KiB/s)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">default=&amp;lt;LIMIT&amp;gt;</span></dt>
<dd>
<p>
デフォルトの帯域幅制限 (KiB/s)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">migration=&amp;lt;LIMIT&amp;gt;</span></dt>
<dd>
<p>
ゲスト移行時の帯域幅制限 (KiB/s) (ローカルディスクの移動を含む)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">move=&amp;lt;LIMIT&amp;gt;</span></dt>
<dd>
<p>
ディスク移動時の帯域幅制限 (KiB/s)</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">restore=&amp;lt;LIMIT&amp;gt;</span></dt>
<dd>
<p>
バックアップからのゲスト復元時の帯域幅制限 (KiB/s)</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">consent-text</span>:<span class="monospaced">&amp;lt;文字列&amp;gt;</span></dt>
<dd>
<p>
ログイン前に表示される同意テキスト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">コンソール</span>:<span class="monospaced">&amp;lt;applet | html5 | vv | xtermjs&amp;gt;</span></dt>
<dd>
<p>
デフォルトのコンソールビューアを選択します。内蔵の Java アプレット (VNC; 非推奨で HTML5 にマッピング)、外部 virt-viewer 互換アプリケーション (SPICE)、HTML5 ベースの VNC ビューア (noVNC)、または HTML5 ベースのコンソールクライアント (xtermjs) を使用できます。選択したビューアが利用できない場合 (例: VM で SPICE が有効化されていない)、フォールバックとして noVNC が使用されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">crs</span>:<span class="monospaced">[ha=&amp;lt;basic|static&amp;gt;] [,ha-rebalance-on-start=&amp;lt;1|0&amp;gt;]</span></dt>
<dd>
<p>
クラスターリソーススケジューリング設定。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">ha=&amp;lt;basic | static&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">basic</span>)</dt>
<dd>
<p>
HA マネージャーがサービスの起動または回復に使用するノードの選択方法を設定します。<em>basic</em> ではサービスの数のみが使用され、<em>static</em> ではサービスの静的な CPU およびメモリ構成が考慮されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ha-rebalance-on-start=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
HAサービスリクエスト状態が停止から開始に変化した際、適切なノード選択にCRSを使用するよう設定します。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">description</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
データセンターの説明。Webインターフェースのデータセンターノートパネルに表示されます。設定ファイル内にコメントとして保存されます。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">email_from</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span></dt>
<dd>
<p>
通知送信元のメールアドレスを指定（デフォルトは root@$hostname）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">フェンシング</span>:<span class="monospaced">&amp;lt;両方 | ハードウェア | ウォッチドッグ&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">ウォッチドッグ</span>)</dt>
<dd>
<p>
HAクラスタのフェンシングモードを設定します。ハードウェアモードでは、/etc/pve/ha/fence.cfgにフェンスデバイスの有効な設定が必要です。両モードを併用する場合、両方が使用されます。</p>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Warning" src="data:image/png;base64,
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
/F/lgJiyQFHragAAAABJRU5ErkJggg==" />
</td>
<td class="content"><em>ハードウェア</em>および<em>両方は</em>実験的かつ開発中</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<span class="monospaced">ha</span>:<span class="monospaced">shutdown_policy=&amp;lt;enum&amp;gt;</span></dt>
<dd>
<p>
クラスタ全体のHA設定。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">shutdown_policy=&amp;lt;conditional | failover | freeze | migrate&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">conditional</span>)</dt>
<dd>
<p>
ノードの電源オフまたは再起動時のHAサービス処理方針を記述します。Freezeはシャットダウン時に当該ノードに残存するサービスを常に凍結し、HAマネージャーによる復旧を無効化します。フェイルオーバーはサービスを凍結状態とマークしないため、シャットダウンしたノードが短時間（1分未満）で再起動しない場合、サービスは他のノードに回復される。<em>条件付きは</em>シャットダウンの種類に応じて自動的に選択する。つまり、再起動時にはサービスは凍結されるが、電源オフ時にはサービスは現状維持され、約2分後に回復される。移行は、再起動またはシャットダウンがトリガーされた際に、すべての実行中サービスを別のノードへ移動しようと試みます。電源オフ処理は、ノード上に実行中サービスが一切存在しなくなった時点で初めて継続されます。ノードが再起動した場合、少なくとも他の移行・再配置・復旧が発生していない限り、サービスは以前に電源が切られたノードへ戻されます。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">http_proxy</span>:<span class="monospaced">http://.*</span></dt>
<dd>
<p>
ダウンロードに使用する外部HTTPプロキシを指定（例:<em>http://username:password@host:port/</em>）</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">キーボード</span>:<span class="monospaced">&amp;lt;da | de | de-ch | en-gb | en-us | es | fi | fr | fr-be | fr-ca | fr-ch | hu | is | it | ja | lt | mk | nl | no | pl | pt | pt-br | sl | sv | tr&amp;gt;</span></dt>
<dd>
<p>
VNCサーバーのデフォルトキーボードレイアウト。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">言語</span>:<span class="monospaced">&amp;lt;ar | ca | da | de | en | es | eu | fa | fr | he | hr | it | ja | ka | kr | nb | nl | nn | pl | pt_BR | ru | sl | sv | tr | ukr | zh_CN | zh_TW&amp;gt;</span></dt>
<dd>
<p>
デフォルトのGUI言語。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">mac_prefix</span>:<span class="monospaced">&amp;lt;string&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">BC:24:11</span>)</dt>
<dd>
<p>
仮想ゲストの自動生成MACアドレスのプレフィックス。デフォルト<span class="monospaced">のBC:24:11は</span>、IEEEがProxmox Server Solutions GmbHに割り当てたMACアドレスブロック大型(MA-L)用の組織固有識別子(OUI)です。このプレフィックスはローカルネットワーク（例：LANやNAT/マスカレード環境など、公衆から直接アクセスできないネットワーク）でのみ使用可能です。</p>
</dd>
</dl></div>
<div class="paragraph">
<p>複数のクラスターを運用し、仮想ゲストのネットワークを（部分的に）共有する場合、MAC衝突のリスク低減のため、デフォルトのMACプレフィックスを拡張するか、カスタム（有効な）プレフィックスを生成することを強く推奨します。例えば、各クラスターごとに Proxmox OUI に別個の 16 進数を追加します（例：最初のクラスターは<span class="monospaced">BC:24:11:0</span>、2 番目のクラスターは<span class="monospaced">BC:24:11:1</span>など）。
あるいは、VLAN を使用するなどしてゲストのネットワークを論理的に分離することも可能です。</p></div>
<div class="paragraph">
<p>+
公開アクセス可能なゲストについては、<a href="https://standards.ieee.org/products-programs/regauth/">IEEE登録から</a>独自の<a href="https://standards.ieee.org/products-programs/regauth/">OUI</a>を取得するか、自社またはホスティングプロバイダーのネットワーク管理者との調整を推奨します。</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">max_workers</span>:<span class="monospaced">&amp;lt;integer&amp;gt; (1 - N)</span></dt>
<dd>
<p>
ha-managerからの「<em>stopall VMs</em>」やタスク実行時など、最大起動ワーカー数（ノードあたり）を定義します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">migration</span>:<span class="monospaced">[type=]&amp;lt;secure|insecure&amp;gt; [,network=&amp;lt;CIDR&amp;gt;]</span></dt>
<dd>
<p>
クラスタ全体の移行設定用。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">network=&amp;lt;CIDR&amp;gt;</span></dt>
<dd>
<p>
移行に使用される（サブ）ネットワークのCIDR。レプリケーションネットワーク設定が未設定の場合、レプリケーションジョブのフォールバックとして使用されます</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">type=&amp;lt;insecure | secure&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">secure</span>)</dt>
<dd>
<p>
移行トラフィックはデフォルトでSSHトンネル経由で暗号化されます。安全で完全にプライベートなネットワークでは、パフォーマンス向上のために無効化可能です。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">migration_unsecure</span>:<span class="monospaced">&amp;lt;boolean&amp;gt;</span></dt>
<dd>
<p>
デフォルトではSSHトンネルを使用した安全な移行が実施されます。安全なプライベートネットワーク環境では、移行速度向上のためにこれを無効化できます。非推奨。代わりに<em>migration</em>プロパティを使用してください！</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">next-id</span>:<span class="monospaced">[lower=&amp;lt;integer&amp;gt;] [,upper=&amp;lt;integer&amp;gt;]</span></dt>
<dd>
<p>
空きVMID自動選択プールの範囲を制御します。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">lower=&amp;lt;integer&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">100</span>)</dt>
<dd>
<p>
フリーネクストID API範囲の下限境界（包含）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">upper=&amp;lt;integer&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1000000</span>)</dt>
<dd>
<p>
フリーネクストID API範囲の上限（除外）。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">notify</span>:<span class="monospaced">[フェンシング=&amp;lt;常に|無効&amp;gt;] [,パッケージ更新=&amp;lt;自動|常に|無効&amp;gt;][,replication=&amp;lt;always|never&amp;gt;] [,target-fencing=&amp;lt;TARGET&amp;gt;] [,target-package-updates=&amp;lt;TARGET&amp;gt;] [,target-replication=&amp;lt;TARGET&amp;gt;]</span></dt>
<dd>
<p>
クラスタ全体の通知設定。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">フェンシング=&amp;lt;常に | 決して&amp;gt;</span></dt>
<dd>
<p>
UNUSED - 代わりにデータセンター通知設定を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">package-updates=&amp;lt;always | auto | never&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">auto</span>)</dt>
<dd>
<p>
非推奨: 代わりにデータセンターの通知設定を使用します。
日次更新ジョブが通知を送信する頻度を制御します:</p>
<div class="ulist"><ul>
<li>
<p>
有効なサブスクリプションを持つシステムについては、毎日<em>自動更新されます</em>。これらのシステムは本番環境対応済みとみなされ、保留中の更新について把握しているべきだからです。</p>
</li>
<li>
<p>
新しい保留中の更新がある場合、<em>常に</em>更新ごとに通知します。</p>
</li>
<li>
<p>
<em>never</em>新規保留中の更新がある場合でも通知を送信しない。</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">replication=&amp;lt;always | never&amp;gt;</span></dt>
<dd>
<p>
未使用 - 代わりにデータセンターの通知設定を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">target-fencing=&amp;lt;TARGET&amp;gt;</span></dt>
<dd>
<p>
未使用 - 代わりにデータセンターの通知設定を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">target-package-updates=&amp;lt;TARGET&amp;gt;</span></dt>
<dd>
<p>
未使用 - 代わりにデータセンターの通知設定を使用します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">target-replication=&amp;lt;TARGET&amp;gt;</span></dt>
<dd>
<p>
未使用 - 代わりにデータセンターの通知設定を使用してください。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">registered-tags</span>:<span class="monospaced">&amp;lt;tag&amp;gt;[;&amp;lt;tag&amp;gt;...]</span></dt>
<dd>
<p>
<em>/</em>に対する<span class="monospaced">Sys.Modify</span>権限が必要なタグのリスト（設定<em>/</em>削除時）。ここに設定され、かつ<em>user-tag-access</em>にも含まれるタグは<span class="monospaced">Sys.Modify 権限を</span>必須とします。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">replication</span>:<span class="monospaced">[type=]&amp;lt;secure|insecure&amp;gt; [,network=&amp;lt;CIDR&amp;gt;]</span></dt>
<dd>
<p>
クラスタ全体のレプリケーション設定用。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">network=&amp;lt;CIDR&amp;gt;</span></dt>
<dd>
<p>
レプリケーションジョブに使用される（サブ）ネットワークのCIDR。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">type=&amp;lt;insecure | secure&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">secure</span>)</dt>
<dd>
<p>
レプリケーショントラフィックはデフォルトでSSHトンネルを使用して暗号化されます。安全で完全にプライベートなネットワークでは、パフォーマンス向上のためにこれを無効化できます。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">タグスタイル</span>:<span class="monospaced">[大文字小文字の区別=&amp;lt;1|0&amp;gt;][,color-map=&amp;lt;tag&amp;gt;:&amp;lt;hex-color&amp;gt;[:&amp;lt;hex-color-for-text&amp;gt;][;&amp;lt;tag&amp;gt;=...]] [,ordering=&amp;lt;config|alphabetical&amp;gt;] [,shape=&amp;lt;enum&amp;gt;]</span></dt>
<dd>
<p>
タグスタイルオプション。</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">case-sensitive=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">0</span>)</dt>
<dd>
<p>
更新時のユニークタグフィルタリングで大文字小文字を区別するかどうかを制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">color-map=&amp;lt;tag&amp;gt;:&amp;lt;hex-color&amp;gt;[:&amp;lt;hex-color-for-text&amp;gt;][;&amp;lt;tag&amp;gt;=...]</span></dt>
<dd>
<p>
タグの手動カラーマッピング（セミコロン区切り）。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">ordering=&amp;lt;alphabetical | config&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">alphabetical</span>)</dt>
<dd>
<p>
WebインターフェースおよびAPI更新におけるタグのソート順を制御します。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">shape=&amp;lt;circle | dense | full | none&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">circle</span>)</dt>
<dd>
<p>
Web UIツリーのタグ形状。<em>fullは</em>タグ全体を描画。<em>circleは</em>背景色の円のみを描画。<em>denseは</em>小さな矩形のみを描画（各ゲストに多数のタグが割り当てられている場合に有用）。<em>noneは</em>タグの表示を無効化。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">u2f</span>:<span class="monospaced">[appid=&amp;lt;APPID&amp;gt;] [,origin=&amp;lt;URL&amp;gt;]</span></dt>
<dd>
<p>
u2f</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">appid=&amp;lt;APPID&amp;gt;</span></dt>
<dd>
<p>
U2F AppId URLの上書き。デフォルトはオリジン。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">origin=&amp;lt;URL&amp;gt;</span></dt>
<dd>
<p>
U2F Originの上書き。単一URLを持つ単一ノードで主に有用。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">user-tag-access</span>:<span class="monospaced">[user-allow=&amp;lt;enum&amp;gt;] [,user-allow-list=&amp;lt;tag&amp;gt;[;&amp;lt;tag&amp;gt;...]]</span></dt>
<dd>
<p>
ユーザー設定可能タグの権限オプション</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">user-allow=&amp;lt;既存 | 無料 | リスト | なし&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">無料</span>)</dt>
<dd>
<p>
ユーザーが管理するリソース（ゲストなど）に対して設定または削除可能なタグを制御します。<span class="monospaced">/</span>に対する<span class="monospaced">Sys.Modify</span>権限を持つユーザーは常に制限なしです。</p>
<div class="ulist"><ul>
<li>
<p>
<em>none</em>使用可能なタグはありません。</p>
</li>
<li>
<p>
<em>list</em> <em>user-allow-list</em>に登録されたタグが使用可能。</p>
</li>
<li>
<p>
<em>既存</em>リストと同様だが、リソースの既存タグも使用可能。</p>
</li>
<li>
<p>
<em>自由</em>タグ制限なし。</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">user-allow-list=&amp;lt;タグ&amp;gt;[;&amp;lt;タグ&amp;gt;...]</span></dt>
<dd>
<p>
ユーザーが設定・削除を許可されるタグのリスト（セミコロン区切り）。<em>`user-allow</em>`値の`<em>list`</em>と`<em>existing`</em>に対して適用。</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<span class="monospaced">webauthn</span>:<span class="monospaced">[allow-subdomains=&amp;lt;1|0&amp;gt;] [,id=&amp;lt;DOMAINNAME&amp;gt;] [,origin=&amp;lt;URL&amp;gt;] [,rp=&amp;lt;RELYING_PARTY&amp;gt;]</span></dt>
<dd>
<p>
webauthn設定</p>
<div class="dlist"><dl>
<dt class="hdlist1">
<span class="monospaced">allow-subdomains=&amp;lt;boolean&amp;gt;</span>(<em>デフォルト =</em> <span class="monospaced">1</span>)</dt>
<dd>
<p>
オリジンを完全なURLではなくサブドメインとして許可するかどうか。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">id=&amp;lt;DOMAINNAME&amp;gt;</span></dt>
<dd>
<p>
信頼当事者ID。プロトコル、ポート、場所を含まないドメイン名である必要があります。変更すると既存の認証情報<strong>が無効になります</strong>。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">origin=&amp;lt;URL&amp;gt;</span></dt>
<dd>
<p>
サイトオリジン。<span class="monospaced">https://</span>URL（または<span class="monospaced">http://localhost</span>）でなければならない。ユーザーがブラウザに入力してウェブインターフェースにアクセスするアドレスを含むべきである。変更すると既存の認証情報が無効になる<strong>可能性がある</strong>。</p>
</dd>
<dt class="hdlist1">
<span class="monospaced">rp=&amp;lt;RELYING_PARTY&amp;gt;</span></dt>
<dd>
<p>
信頼当事者名。任意のテキスト識別子。変更すると既存の認証情報が無効になる<strong>可能性があります</strong>。</p>
</dd>
</dl></div>
</dd>
</dl></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_calendar_events">25. 付録 D: カレンダーイベント</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="chapter_calendar_events">
<span>25.1. スケジュール形式</span>
<a class="headerlink" href="#chapter_calendar_events" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>Proxmox VE は非常に柔軟なスケジューリング設定を備えています。これは systemd の
time カレンダーイベント形式に基づいています。<span class="footnote"><br>[詳細については<span class="monospaced">man 7 systemd.time</span>を参照]<br></span>カレンダーイベントは、単一の式で一つ以上の時点を参照するために使用できます。</p></div>
<div class="paragraph">
<p>このようなカレンダーイベントは次の形式を使用します:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>[WEEKDAY] [[YEARS-]MONTHS-DAYS] [HOURS:MINUTES[:SECONDS]]</pre>
</div></div>
<div class="paragraph">
<p>この形式により、ジョブを実行すべき日時のセットを設定できます。
また、1つ以上の開始時刻を設定することも可能です。これによりレプリケーションスケジューラは、
ジョブを開始すべき時刻を認識します。
この情報により、平日22時に実行されるジョブを作成できます:<span class="monospaced">'mon,tue,wed,thu,fri 22'</span>は短縮形<span class="monospaced">'mon..fri 22'</span> と記述可能で、この方式ではほとんどの合理的なスケジュールを直感的に記述できます。</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">時間は24時間形式で指定します。</td>
</tr></table>
</div>
<div class="paragraph">
<p>設定を簡便かつ短くするため、ゲストごとに1つ以上の繰り返し時間を設定できます。
これは、開始時刻そのものと、開始時刻に繰り返し値の倍数を加えた時刻でレプリケーションが実行されることを示します。
例えば、レプリケーションを午前8時に開始し、午前9時まで15分ごとに繰り返す場合は、<span class="monospaced">'8:00/15'</span>と指定します。</p></div>
<div class="paragraph">
<p>ここで、時間区切り記号(<span class="monospaced">:</span>)を使用しない場合、値は分として解釈されます。区切り記号を使用する場合、左側の値が時間、右側の値が分を表します。さらに、<span class="monospaced">*</span>を使用するとすべての可能な値に一致します。</p></div>
<div class="paragraph">
<p>追加のアイデアを得るには、
<a href="#pvesr_schedule_format_examples">以下の「その他の例</a>」を参照してください。</p></div>
</div>
<div class="sect2">
<h3 id="_detailed_specification">
<span>25.2. 詳細仕様</span>
<a class="headerlink" href="#_detailed_specification" title="Permalink to this heading"></a></h3>
<div class="dlist"><dl>
<dt class="hdlist1">
weekdays</dt>
<dd>
<p>
曜日は英語の略称で指定します：<span class="monospaced">sun, mon,
tue, wed, thu, fri, sat</span>。複数の曜日はカンマ区切りで
リスト化できます。開始日と終了日を「..」で区切って
範囲指定も可能です（例：<span class="monospaced">mon..fri</span>）。これらの形式は混在可能です。
省略時は<span class="monospaced">「*」</span>とみなされます。</p>
</dd>
<dt class="hdlist1">
時間形式</dt>
<dd>
<p>
時刻形式は時間と分の間隔リストで構成されます。
時間と分は<span class="monospaced">':'</span> で区切られます<span class="monospaced">。</span>時間と分は両方ともリストや値の範囲を指定でき、
日付と同じ形式を使用します。
最初に時間が、次に分が指定されます。時間が必要ない場合は省略可能です。
この場合、時間の値は<span class="monospaced">'*'</span>とみなされます。
有効な値の範囲は、時間が<span class="monospaced">0-23</span>、分が<span class="monospaced">0-59</span>です。</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content"><span class="monospaced">systemd-analyze calendar</span>コマンドを使用すると、指定されたカレンダーイベント仕様が有効かどうか、および次にトリガーされるタイミングを確認できます。<span class="monospaced">--iterations=&amp;lt;N&amp;gt;</span>フラグを渡すことで、カレンダーイベントが次にトリガーされる<span class="monospaced">&amp;lt;N&amp;gt;</span>回分の出力を表示させることもできます（<span class="monospaced">&amp;lt;N&amp;gt;</span>を有効な整数に置き換える必要があります）。</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="pvesr_schedule_format_examples">25.2.1. 例:
<a class="headerlink" href="#pvesr_schedule_format_examples" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>特定の意味を持つ特別な値がいくつかあります:</p></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表19. 特殊値</caption>
<col style="width:50%;" />
<col style="width:50%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">値                                  </th>
<th class="tableblock halign-left valign-top">構文</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">minutely</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">*-*-* *:*:00</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">hourly</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">*-*-* *:00:00</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">daily</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">*-*-* 00:00:00</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">週次</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">月曜日*-*-* 00:00:00</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">月次</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">*-*-01 00:00:00</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">年次</span>または<span class="monospaced">毎年</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">*-01-01 00:00:00</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">四半期</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">*-01,04,07,10-01 00:00:00</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">半年ごと</span>または<span class="monospaced">半年に一度</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="monospaced">*-01,07-01 00:00:00</span></p></td>
</tr>
</tbody>
</table>
</div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<caption class="title">表20. スケジュール例</caption>
<col style="width:33%;" />
<col style="width:33%;" />
<col style="width:33%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">スケジュール文字列        </th>
<th class="tableblock halign-left valign-top">代替値            </th>
<th class="tableblock halign-left valign-top">意味</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">月、火、水、木、金</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">月～金</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">毎営業日 0:00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">土、日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">土..日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">週末のみ 0:00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">月・水・金</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">—</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">月曜、水曜、金曜の0:00のみ</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12:05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12:05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">毎日午後12時05分</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*/5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0/5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5分ごと</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">月・水 10月30日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">月・火・水 10月30日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">月曜日、火曜日、水曜日 毎時00分、40分、50分後</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">月～金 8..17,22:0/15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">—</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">平日 8:00～18:00 および 22:00～23:00 の間、15分間隔で運行</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">金曜日 12..13:5/20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">金曜日　12時、13時5分/20分</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">金曜日 12:05、12:25、12:45、13:05、13:25、13:45</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12時、14時、16時、18時、20時、22時5分</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12/2:5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">毎日 12:05 から 22:05 まで、2時間おき</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*/1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">毎分（最小間隔）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*-05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">—</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">毎月5日</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">土曜日 *-1..7 15:00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">—</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">毎月第1土曜日 15:00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-10-21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">—</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015年10月21日 00:00</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_qemu_vcpu_list">26. 付録E: QEMU vCPUリスト</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="chapter_qm_vcpu_list">
<span>26.1.</span>はじめに
<a class="headerlink" href="#chapter_qm_vcpu_list" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>これはQEMUで定義されているAMDおよびIntelのx86-64/amd64 CPUタイプのリストであり、
2007年まで遡ります。</p></div>
</div>
<div class="sect2">
<h3 id="_intel_cpu_types">
<span>26.2. インテル CPU タイプ</span>
<a class="headerlink" href="#_intel_cpu_types" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/List_of_Intel_Xeon_processors">Intelプロセッサ</a></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>Nahelem</em>:<a href="https://en.wikipedia.org/wiki/Nehalem_(microarchitecture)">第1世代 Intel Core プロセッサ</a></p>
</li>
<li>
<p>
<em>Nahelem-IBRS (v2)</em>: Spectre v1 保護機能追加 (<em>+spec-ctrl</em>)</p>
</li>
<li>
<p>
<em>Westmere</em>:<a href="https://en.wikipedia.org/wiki/Westmere_(microarchitecture)">第1世代Intel Coreプロセッサ (Xeon E7-)</a></p>
</li>
<li>
<p>
<em>Westmere-IBRS (v2)</em>: Spectre v1 保護機能追加 (<em>+spec-ctrl</em>)</p>
</li>
<li>
<p>
<em>SandyBridge</em>:<a href="https://en.wikipedia.org/wiki/Sandy_Bridge">第2世代インテル Core プロセッサー</a></p>
</li>
<li>
<p>
<em>SandyBridge-IBRS (v2)</em>: Spectre v1 保護機能追加 (<em>+spec-ctrl</em>)</p>
</li>
<li>
<p>
<em>IvyBridge</em>:<a href="https://en.wikipedia.org/wiki/Ivy_Bridge_(microarchitecture)">第3世代インテル Core プロセッサー</a></p>
</li>
<li>
<p>
<em>アイビーブリッジ-IBRS (v2)</em>: Spectre v1対策機能追加 (<em>+spec-ctrl</em>)</p>
</li>
<li>
<p>
<em>Haswell</em>:<a href="https://en.wikipedia.org/wiki/Haswell_(microarchitecture)">第4世代インテル Core プロセッサー</a></p>
</li>
<li>
<p>
<em>Haswell-noTSX (v2)</em>: TSXを無効化 (<em>-hle</em>,<em>-rtm</em>)</p>
</li>
<li>
<p>
<em>Haswell-IBRS (v3)</em>: TSXを再追加、Spectre v1保護を追加 (<em>+hle</em>,<em>+rtm</em>,
<em>+spec-ctrl</em>)</p>
</li>
<li>
<p>
<em>Haswell-noTSX-IBRS (v4)</em>: TSX無効化 (<em>-hle</em>,<em>-rtm</em>)</p>
</li>
<li>
<p>
<em>Broadwell</em>:<a href="https://en.wikipedia.org/wiki/Broadwell_(microarchitecture)">第5世代インテル Core プロセッサー</a></p>
</li>
<li>
<p>
<em>Skylake</em>:<a href="https://en.wikipedia.org/wiki/Skylake_(microarchitecture)">第1世代Xeon Scalableサーバープロセッサ</a></p>
</li>
<li>
<p>
<em>Skylake-IBRS (v2)</em>: Spectre v1保護を追加、CLFLUSHOPTを無効化
(<em>+spec-ctrl</em>,<em>-clflushopt</em>)</p>
</li>
<li>
<p>
<em>Skylake-noTSX-IBRS (v3)</em>: TSXを無効化 (<em>-hle</em>,<em>-rtm</em>)</p>
</li>
<li>
<p>
<em>Skylake-v4</em>: EPT切り替え機能を追加 (<em>+vmx-eptp-switching</em>)</p>
</li>
<li>
<p>
<em>カスケードレイク</em>：<a href="https://en.wikipedia.org/wiki/Cascade_Lake_(microprocessor)">第2世代Xeon Scalableプロセッサ</a></p>
</li>
<li>
<p>
<em>Cascadelake-v2</em>: arch_capabilities MSRを追加 (<em>+arch-capabilities</em>,
<em>+rdctl-no</em>,<em>+ibrs-all</em>,<em>+skip-l1dfl-vmentry</em>,<em>+mds-no</em>)</p>
</li>
<li>
<p>
<em>Cascadelake-v3</em>: TSXを無効化 (<em>-hle</em>,<em>-rtm</em>)</p>
</li>
<li>
<p>
<em>Cascadelake-v4</em>: EPTスイッチングを追加 (<em>+vmx-eptp-switching</em>)</p>
</li>
<li>
<p>
<em>Cascadelake-v5</em>：XSAVES を追加 (<em>+xsaves</em>,<em>+vmx-xsaves</em>)</p>
</li>
<li>
<p>
<em>クーパーレイク</em>：<a href="https://en.wikipedia.org/wiki/Cooper_Lake_(microprocessor)">4 および 8 ソケットサーバー向け第 3 世代 Xeon Scalable プロセッサ</a></p>
</li>
<li>
<p>
<em>Cooperlake-v2</em>：XSAVES を追加 (<em>+xsaves</em>、<em>+vmx-xsaves</em>)</p>
</li>
<li>
<p>
<em>Icelake</em>:<a href="https://en.wikipedia.org/wiki/Ice_Lake_(microprocessor)">第 3 世代 Xeon Scalable サーバープロセッサ</a></p>
</li>
<li>
<p>
<em>Icelake-v2</em>：TSX を無効化 (<em>-hle</em>、<em>-rtm</em>)</p>
</li>
<li>
<p>
<em>Icelake-v3</em>: arch_capabilities msr を追加 (<em>+arch-capabilities</em>,<em>+rdctl-no</em>,
<em>+ibrs-all</em>,<em>+skip-l1dfl-vmentry</em>,<em>+mds-no</em>,<em>+pschange-mc-no</em>,<em>+taa-no</em>)</p>
</li>
<li>
<p>
<em>Icelake-v4</em>: 不足フラグを追加 (<em>+sha-ni</em>,<em>+avx512ifma</em>,<em>+rdpid</em>,<em>+fsrm</em>,
<em>+vmx-rdseed-exit</em>,<em>+vmx-pml</em>,<em>+vmx-eptp-switching</em>)</p>
</li>
<li>
<p>
<em>Icelake-v5</em>: XSAVESを追加 (<em>+xsaves</em>,<em>+vmx-xsaves</em>)</p>
</li>
<li>
<p>
<em>Icelake-v6</em>: 「5段階EPT」を追加 (<em>+vmx-page-walk-5</em>)</p>
</li>
<li>
<p>
<em>SapphireRapids</em>:<a href="https://en.wikipedia.org/wiki/Sapphire_Rapids">第4世代Xeon Scalableサーバープロセッサ</a></p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_amd_cpu_types">
<span>26.3. AMD CPUの種類</span>
<a class="headerlink" href="#_amd_cpu_types" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/List_of_AMD_processors">AMDプロセッサ</a></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>Opteron_G3</em>:<a href="https://en.wikipedia.org/wiki/AMD_10h">K10</a></p>
</li>
<li>
<p>
<em>Opteron_G4</em>:<a href="https://en.wikipedia.org/wiki/Bulldozer_(microarchitecture)">Bulldozer</a></p>
</li>
<li>
<p>
<em>Op</em> <a href="https://en.wikipedia.org/wiki/Piledriver_(microarchitecture)">ter</a><em>on_G5</em>:  Piledriver</p>
</li>
<li>
<p>
<em>EPYC</em>:<a href="https://en.wikipedia.org/wiki/Zen_(first_generation)">第1世代Zenプロセッサ</a></p>
</li>
<li>
<p>
<em>EPYC-IBPB (v2)</em>: Spectre v1対策機能追加 (<em>+ibpb</em>)</p>
</li>
<li>
<p>
<em>EPYC-v3</em>: 不足フラグを追加 (<em>+perfctr-core</em>,<em>+clzero</em>,<em>+xsaveerptr</em>,
<em>+xsaves</em>)</p>
</li>
<li>
<p>
<em>EPYC-Rome</em>:<a href="https://en.wikipedia.org/wiki/Zen_2">Zenプロセッサ第2世代</a></p>
</li>
<li>
<p>
<em>EPYC-Rome-v2</em>: Spectre v2、v4保護を追加 (<em>+ibrs</em>,<em>+amd-ssbd</em>)</p>
</li>
<li>
<p>
<em>EPYC-Milan</em>:<a href="https://en.wikipedia.org/wiki/Zen_3">Zenプロセッサ第3世代</a></p>
</li>
<li>
<p>
<em>EPYC-Milan-v2</em>: 不足しているフラグを追加 (<em>+vaes</em>,<em>+vpclmulqdq</em>,
<em>+stibp-always-on</em>,<em>+amd-psfd</em>,<em>+no-nested-data-bp</em>,
<em>+lfence-always-serializing</em>,<em>+null-sel-clr-base</em>)</p>
</li>
</ul></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_firewall_macro_definitions">27. 付録 F: ファイアウォール マクロ定義</h2>
<div class="sectionbody">
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Amanda</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Amanda Backup</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10080</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10080</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>認証</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
認証（identd）トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">送信元ポート</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">113</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
BGP<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ボーダーゲートウェイプロトコルトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">179</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
BitTorrent<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
BitTorrent 3.1 およびそれ以前のバージョンの BitTorrent トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6881:6889</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6881</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Bit</em>Torrent32<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
BitTorrent 3.2 以降の BitTorrent トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6881:6999</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6881</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>C</em>VS<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
同時バージョンシステム pserver トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Ceph</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Ceph ストレージクラスタのトラフィック (Ceph モニター、OSD および MDS デーモン)</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6789</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3300</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6800:7300</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>シトリックス</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Citrix/ICA トラフィック (ICA、ICA ブラウザ、CGP)</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">送信ポート</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1494</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラメータ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1604</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2598</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>DAAP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
デジタルオーディオアクセスプロトコルトラフィック（iTunes、Rythmboxデーモン）</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3689</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3689</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>D</em>CC<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
分散チェックサムクリアリングハウススパムフィルタリング機構</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6277</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>DHCP転送</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
転送されたDHCPトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">送信元ポート</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">67:68</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">67:68</p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
DHCPv6<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
DHCPv6トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">546:547</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">546:547</p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>DNS</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ドメインネームシステムトラフィック（更新およびTCP）</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">53</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">53</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Distcc</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
分散コンパイラサービス</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3632</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>FTP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ファイル転送プロトコル</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>指</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
指プロトコル (RFC 742)</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">79</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
GNUnet<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
GNUnet セキュアなピアツーピア・ネットワーキング通信</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2086</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2086</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1080</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1080</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>G</em>RE<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
汎用ルーティングカプセル化トンネリングプロトコル</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">47</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Git</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Git分散リビジョン管理トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9418</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>HKP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
OpenPGP HTTP キーサーバープロトコルトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11371</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>HTTP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ハイパーテキスト転送プロトコル (WWW)</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>HTTPS</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
SSL 上のハイパーテキスト転送プロトコル (WWW)</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ICPV</em>2<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
インターネットキャッシュプロトコル V2 (Squid) トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラメータ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3130</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ICQ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
AOLインスタントメッセンジャートラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラメータ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5190</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>IMAP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
インターネットメッセージアクセスプロトコル</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">143</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>IMAPS</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
SSL 上のインターネットメッセージアクセスプロトコル</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">993</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
IPIP<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
IPIPカプセル化トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">94</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>IPsec</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
IPsecトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>IPsecah</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
IPsec認証(AH)トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">宛先ポート</th>
<th class="tableblock halign-left valign-top">送信ポート</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラメータ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">51</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
IPsecnat<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
IPsecトラフィックとNATトラバーサル</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">送信元ポート</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>IR</em>C<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
インターネットリレーチャットトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">宛先ポート</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6667</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Jetdirect</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
HP Jetdirect 印刷</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
L2TP<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
レイヤ2トンネリングプロトコルトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1701</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>LDAP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Lightweight Directory Access Protocol トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">389</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>LD</em>APS<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
セキュア軽量ディレクトリアクセスプロトコルトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">636</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>MDNS</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
マルチキャスト DNS</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5353</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>MSNP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft通知プロトコル</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1863</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>MSSQL</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft SQL Server</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1433</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>メール</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
メールトラフィック (SMTP、SMTPS、Submission)</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">送信ポート</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">465</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">587</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>ムニン</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Munin ネットワークリソース監視トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4949</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>MySQL</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
MySQLサーバー</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3306</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>NNTP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
NNTPトラフィック（Usenet）。</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">送信元ポート</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">119</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>NNTPS</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
暗号化された NNTP トラフィック (Usenet)</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">563</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>NTP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ネットワークタイムプロトコル (ntpd)</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">送信ポート</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
NeighborDiscovery<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
IPv6 ネイバーソリシテーション、ネイバーおよびルータアドバタイズメント</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">icmpv6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">router-solicitation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">icmpv6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ルータ広告</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">icmpv6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">neighbor-solicitation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">icmpv6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">neighbor-advertisement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>OSPF</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
OSPF マルチキャストトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">送信元ポート</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラメータ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">89</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
OpenVPN<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
OpenVPNトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1194</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>PCA</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
シマンテック PCAnywhere (tm)</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5632</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5631</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>PMG</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Proxmox Mail Gateway Web インターフェース</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8006</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>POP3</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
POP3 トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">110</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>POP3S</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
暗号化されたPOP3トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">995</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
PPtP<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ポイントツーポイントトンネリングプロトコル</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">送信元ポート</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">47</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1723</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Ping</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ICMP エコー要求</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">送信元ポート</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">icmp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">エコー要求</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>PostgreSQL</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
PostgreSQL server</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5432</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>プリンター</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ラインプリンタプロトコル印刷</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">515</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>RDP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft リモート デスクトップ プロトコル トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3389</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>安らかに眠れ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
ルーティング情報プロトコル（双方向）</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">520</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
RNDC<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
BIND リモート管理プロトコル</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">953</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Razor</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Razor Antispam System</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">proto</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2703</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Rdate</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
リモート時間取得 (rdate)</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">37</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Rsync</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Rsync サーバー</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">873</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>SANE</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
SANE ネットワークスキャン</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6566</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
SMB<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Microsoft SMB トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">135,445</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">137:139</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1024:65535</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">137</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">135,139,445</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>SMBswat</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
サンバ Web 管理ツール</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">901</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>SMTP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Simple Mail Transfer Protocol</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>SMTPS</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
暗号化簡易メール転送プロトコル</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">465</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>SNMP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
簡易ネットワーク管理プロトコル</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">161:162</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">161</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>SPAMD</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Spam Assassin SPAMD トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">783</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
SPICEプロキシ<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Proxmox VE SPICE ディスプレイプロキシトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>SSH</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
セキュアシェルトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>SVN</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Subversion サーバー (svnserve)</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3690</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
SixXS<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
SixXS IPv6 Deployment and Tunnel Broker</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3874</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3740</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">41</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5072,8374</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Squid</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Squid Webプロキシトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>提出</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
メールメッセージ送信トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">587</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>システムログ</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Syslogプロトコル（RFC 5424）トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">514</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">514</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>TFTP</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
トリビアルファイル転送プロトコルトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">69</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Telnet</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Telnetトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">送信元ポート</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Telnets</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
SSL経由のTelnet</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">992</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>時間</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
RFC 868 時刻プロトコル</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">37</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Trcrt</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
トレースルート（最大30ホップ）トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">udp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">33434:33524</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">icmp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">echo-request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
VNC<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
VNCディスプレイ0～99のVNCトラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5900:5999</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
VNCL<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
VNCサーバーからVNCビューアーへのVNCトラフィック（リスンモード）</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Web</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
WWWトラフィック（HTTPおよびHTTPS）</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">パラメータ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
Webcache<br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Webキャッシュ/プロキシトラフィック（ポート8080）</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">送信ポート</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8080</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Webmin</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Webmin トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロトコル</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
<em>Whois</em><br>
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Whois (nicname, RFC 3912) トラフィック</p>
</td>
</tr>
</table></div>
<div style="overflow-x:auto">
<table class="tableblock frame-all grid-all" style="
width:100%;
">
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<col style="width:25%;" />
<thead>
<tr>
<th class="tableblock halign-left valign-top">アクション</th>
<th class="tableblock halign-left valign-top">プロト</th>
<th class="tableblock halign-left valign-top">dport</th>
<th class="tableblock halign-left valign-top">sport</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PARAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tcp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">43</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_markdown_primer">28. 付録G: Markdown入門</h2>
<div class="sectionbody">
<div class="quoteblock">
<div class="content">
<div class="paragraph">
<p>Markdownは、ウェブライター向けのテキストからHTMLへの変換ツールです。Markdownでは、読みやすく書きやすいプレーンテキスト形式で記述し、構造的に正しいXHTML（またはHTML）に変換できます。</p></div>
</div>
<div class="attribution">
<em>https://daringfireball.net/projects/markdown/</em><br>
— John Gruber</div></div>
<div class="paragraph">
<p>Proxmox VEのウェブインターフェースは、ノードおよび仮想ゲストのノートにおいて、
リッチテキストフォーマットをレンダリングするためのMarkdownの使用をサポートしています。</p></div>
<div class="paragraph">
<p>Proxmox VE は CommonMark および GFM (GitHub Flavoured Markdown) のほとんどの拡張機能（テーブルやタスクリストなど）をサポートしています。</p></div>
<div class="sect2">
<h3 id="markdown_basics">
<span>28.1. Markdownの基本</span>
<a class="headerlink" href="#markdown_basics" title="Permalink to this heading"></a></h3>
<div class="paragraph">
<p>ここでは基本事項のみを説明しています。より詳細な情報については、ウェブで検索してください。
例えば、<a href="https://www.markdownguide.org/">https://www.markdownguide.org/</a>などです。</p></div>
<div class="sect3">
<h4 id="_headings">28.1.1. 見出し
<a class="headerlink" href="#_headings" title="Permalink to this heading"></a></h4>
<div class="listingblock">
<div class="content monospaced">
<pre># これは見出し h1 です
## これは見出し h2 です
##### これは見出し h5 です</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_emphasis">28.1.2. 強調
<a class="headerlink" href="#_emphasis" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>強調には<span class="monospaced">*テキスト*</span>または<span class="monospaced">_テキスト_</span>を使用します。</p></div>
<div class="paragraph">
<p>太字（強調）には<span class="monospaced">**テキスト**</span>または<span class="monospaced">__テキスト__</span>を使用します。</p></div>
<div class="paragraph">
<p>組み合わせも可能です。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>_これらを組み合わせることも可能です_</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_links">28.1.3. リンク
<a class="headerlink" href="#_links" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>リンクの自動検出も利用できます。例えば、
<span class="monospaced">https://forum.proxmox.com/</span>はクリック可能なリンクに変換されます。</p></div>
<div class="paragraph">
<p>リンクテキストを制御することも可能です。例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>さて、[角括弧内の部分がリンクテキストになります](https://forum.proxmox.com/)。</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_lists">28.1.4. リスト
<a class="headerlink" href="#_lists" title="Permalink to this heading"></a></h4>
<div class="sect4">
<h5 id="_unordered_lists">箇条書きリスト
<a class="headerlink" href="#_unordered_lists" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p><span class="monospaced">*</span>または<span class="monospaced">-</span>を使用して無順序リストを作成します。例:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>* 項目 1
* 項目 2
* 項目 2a
* 項目 2b</pre>
</div></div>
<div class="paragraph">
<p>インデントを追加するとネストされたリストを作成できます。</p></div>
</div>
<div class="sect4">
<h5 id="_ordered_lists">番号付きリスト
<a class="headerlink" href="#_ordered_lists" title="Permalink to this heading"></a></h5>
<div class="listingblock">
<div class="content monospaced">
<pre>1. 項目1
1. 項目2
1. 項目3
  1. 項目3a
  1. 項目3b</pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img alt="Note" src="data:image/png;base64,
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" />
</td>
<td class="content">順序付きリストの整数指定は正確である必要はなく、自動的に番号が振られます。</td>
</tr></table>
</div>
</div>
<div class="sect4">
<h5 id="_task_lists">タスクリスト
<a class="headerlink" href="#_task_lists" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>タスクリストでは、未完了タスクには空のボックス<span class="monospaced">[ ]</span>を、完了タスクには<span class="monospaced">X</span>付きのボックスを使用します。</p></div>
<div class="paragraph">
<p>例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>- [X] 最初のタスクは完了済み！
- [X] 2つ目も完了
- [ ] こちらは未完了
- [ ] こちらも未完了</pre>
</div></div>
</div>
</div>
<div class="sect3">
<h4 id="_tables">28.1.5. 表
<a class="headerlink" href="#_tables" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>テーブルではパイプ記号<span class="monospaced">|</span>で列を区切り、<span class="monospaced">-</span>で表ヘッダーと本文を分離します。この区切り部分でテキストの
配置（左揃え・中央揃え・右揃え）を設定することも可能です。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>| 左カラム  | 右カラム |  一部  | 追加 | カラム| 中央揃えも可能
| ------------- |--------------:|--------|------|------|:------------------:|
| 左のfoo      | 右のfoo     | 1行目  | 列  | ここ | &amp;gt;center&amp;lt;           |
| 左バー      | 右バー     | 2行目 | ここ | 12345              |
| 左バズ      | 右バズ     | 3行目 | ここ | テスト               |
| 左ザブ      | 右ザブ     | 4行目 | ここ | ☁️☁️☁️              |
| 左ラブ      | 右ラブ     | 5行目 | ここ | 終わり            |</pre>
</div></div>
<div class="paragraph">
<p>空白で列をきれいに揃える必要はありませんが、そうすることで
テーブルの編集が容易になります。</p></div>
</div>
<div class="sect3">
<h4 id="_block_quotes">28.1.6. ブロック引用
<a class="headerlink" href="#_block_quotes" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>プレーンテキストメールと同様に、行先頭に<span class="monospaced">&amp;gt;</span> を付けることでブロック引用を入力できます。</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>&amp;gt; Markdownはプレーンテキスト形式の構文を持つ軽量マークアップ言語であり、
&amp;gt; 2004年にJohn GruberとAaron Swartzによって作成されました。
&amp;gt;
&amp;gt;&amp;gt; Markdownは、readmeファイルの書式設定、オンラインディスカッションフォーラムでのメッセージ作成、
&amp;gt;&amp;gt; プレーンテキストエディタを用いたリッチテキストの作成によく使用されます。</pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_code_and_snippets">28.1.7. コードとスニペット
<a class="headerlink" href="#_code_and_snippets" title="Permalink to this heading"></a></h4>
<div class="paragraph">
<p>バッククォート（`）を使用すると、単語や段落単位でマークダウン処理を回避できます。これにより、コードや設定ブロックが誤ってマークダウンとして解釈されるのを防げます。</p></div>
<div class="sect4">
<h5 id="_inline_code">インラインコード
<a class="headerlink" href="#_inline_code" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>行の一部をシングルバッククォートで囲むことで、コードをインラインで記述できます。
例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>このホストのIPアドレスは`10.0.0.1`です。</pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_whole_blocks_of_code">コードブロック全体
<a class="headerlink" href="#_whole_blocks_of_code" title="Permalink to this heading"></a></h5>
<div class="paragraph">
<p>複数行にわたるコードブロックには三重のバックティックで開始・終了を指定できます。
例：</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>```
# ここに記憶しておきたいネットワーク設定
auto vmbr2
iface vmbr2 inet static
        address 10.0.0.1/24
        bridge-ports ens20
        bridge-stp off
        bridge-fd 0
        bridge-vlan-aware yes
        bridge-vids 2-4094

```</pre>
</div></div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gnu_free_documentation_license">29. 付録H: GNUフリードキュメンテーションライセンス</h2>
<div class="sectionbody">
<div class="paragraph">
<p>バージョン 1.3、2008年11月3日</p></div>
<div class="literalblock">
<div class="content monospaced">
<pre>Copyright (C) 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
    &amp;lt;http://fsf.org/&amp;gt;
本ライセンス文書の完全な複製物の複製および配布は誰でも許可されますが、
変更は許可されません。</pre>
</div></div>
<div class="paragraph">
<div class="title">0. 前文</div><p>本ライセンスの目的は、マニュアル、教科書、その他の機能的で有用な文書を
「自由」の意味において「自由」なものにすることです。すなわち、
誰もが、商業的・非商業的を問わず、修正の有無にかかわらず、
それを複製し再配布する実効的な自由を保証することです。
副次的目的として、本ライセンスは、作者および出版者が自らの著作に対して
クレジットを得る方法を維持しつつ、他者による修正について
責任を負わないようにします。</p></div>
<div class="paragraph">
<p>本ライセンスは一種の「コピーレフト」であり、
この文書に基づく派生作品もまた、同じ意味において自由でなければならないことを意味する。
これは、自由ソフトウェアのために設計されたコピーレフトライセンスである
GNU一般公衆利用許諾契約書を補完するものである。</p></div>
<div class="paragraph">
<p>本ライセンスは、自由ソフトウェアのマニュアルに使用することを意図して設計されました。なぜなら、自由ソフトウェアには自由な文書が必要だからです。自由なプログラムには、ソフトウェア自体と同じ自由を提供するマニュアルが付属すべきです。しかし、本ライセンスはソフトウェアマニュアルに限定されません。主題や印刷書籍として出版されるかどうかに関わらず、あらゆるテキスト作品に使用できます。本ライセンスは主に、教育や参照を目的とする作品に推奨します。</p></div>
<div class="paragraph">
<div class="title">1. 適用範囲と定義</div><p>本ライセンスは、著作権者が本ライセンスの条件下で配布可能とする旨の通知を付した、あらゆる媒体のマニュアルその他の著作物に適用される。  かかる表示は、本契約に定める条件下で当該著作物を利用するための、
期間制限のない、全世界的な、ロイヤリティーフリーのライセンスを付与する。
以下「文書」とは、かかるマニュアルまたは著作物を指す。
公衆のいかなる構成員もライセンシーであり、「あなた」として扱われる。
著作権法上許可を必要とする方法で著作物を複製、改変、または頒布する場合、
あなたは本ライセンスを受け入れるものとする。</p></div>
<div class="paragraph">
<p>「改変版」とは、文書またはその一部を、そのまま複製したもの、
改変を加えたもの、および／または他の言語に翻訳したものを
含むあらゆる著作物を意味します。</p></div>
<div class="paragraph">
<p>「二次的セクション」とは、文書の付録または前書き部分で、
文書の出版者または著者と、文書の全体的な主題（または関連事項）との関係を
専ら扱い、その全体的な主題に直接該当する内容を含まないものを指します。
（したがって、文書の一部が数学の教科書である場合、二次的セクションは
数学を説明してはなりません。）  この関係性は、主題または関連事項との歴史的繋がり、
あるいはそれらに関する法的・商業的・哲学的・倫理的・政治的立場
に基づくものである可能性がある。</p></div>
<div class="paragraph">
<p>「不変セクション」とは、本ライセンスに基づき公開される文書であることを示す通知において、不変セクションとして指定された特定の二次的セクションのタイトルを指す。セクションが上記の二次的セクションの定義に該当しない場合、不変セクションとして指定することは許されない。文書には不変セクションがゼロ個含まれていてもよい。
不変セクションを含まない場合がある。文書が不変セクションを特定していない場合、不変セクションは存在しない。</p></div>
<div class="paragraph">
<p>「表紙テキスト」とは、文書が本ライセンスの下で公開されている旨を記載した通知において、表紙テキストまたは裏表紙テキストとして列挙される特定の短い文章を指す。表紙テキストは最大5語、裏表紙テキストは最大25語とする。</p></div>
<div class="paragraph">
<p>文書の「透明な」複製とは、一般公衆が入手可能な仕様で表され、
汎用テキストエディタで容易に編集可能、または（ピクセルで構成される画像の場合）汎用ペイントプログラムで、または（図面の場合）広く利用可能な図面編集ソフトで編集可能であり、テキストフォーマッタへの入力、またはテキストフォーマッタへの入力に適した様々な形式への自動変換に適したものである。  透明なファイル形式で作成されたコピーであっても、
マークアップ（またはマークアップの欠如）が読者の後続修正を妨げる
もしくは阻害するよう調整されている場合は透明ではない。
画像形式は、相当量のテキストに使用される場合、透明ではない。
「透明」でないコピーは「不透明」と呼ばれる。</p></div>
<div class="paragraph">
<p>透明コピーに適した形式の例としては、マークアップなしのプレーンASCII、Texinfo入力形式、LaTeX入力形式、公開DTDを使用したSGMLまたはXML、および人間による編集を目的とした標準準拠の簡易HTML、PostScript、PDFが挙げられる。透明画像形式の例にはPNG、XCF、JPGが含まれる。不透明形式には、プロプライエタリな形式（プロプライエタリなソフトウェアでのみ読み書き可能）が含まれる
HTML、PostScript、または人間の編集を目的としたPDFなどである。
透明な画像フォーマットの例としては、PNG、XCF、JPGが挙げられる。
不透明なフォーマットには、専有ワードプロセッサでのみ読み書き可能な
専有フォーマット、DTDや処理ツールが一般に利用できないSGMLやXML、
および一部のワードプロセッサが出力専用に生成する機械生成のHTML、
PostScript、PDFなどが含まれる。</p></div>
<div class="paragraph">
<p>「タイトルページ」とは、印刷書籍において、タイトルページ自体に加え、本ライセンスがタイトルページに記載を要求する事項を可読性をもって保持するために必要な後続のページを意味する。タイトルページそのものを持たない形式の著作物においては、「タイトルページ」とは、本文の開始前に位置し、著作物のタイトルが最も顕著に表示される箇所の付近にあるテキストを意味する。</p></div>
<div class="paragraph">
<p>「出版者」とは、文書の複製物を公衆に配布する個人または団体を意味する。</p></div>
<div class="paragraph">
<p>「XYZと題する」セクションとは、文書の命名された部分単位で、そのタイトルが正確にXYZであるか、XYZを別の言語で訳したテキストの後に括弧付きでXYZを含むものを指す。  （ここでXYZは後述の特定セクション名、
例えば「謝辞」「献辞」「推薦」「沿革」などを指す。）
文書を改変する際、当該セクションの「タイトルを保持する」とは、
本定義に基づく「タイトルXYZ」のセクションとして存続させることを意味する。</p></div>
<div class="paragraph">
<p>文書には、本ライセンスが文書に適用される旨の通知に併せて保証免責条項を含めることができる。これらの保証免責条項は、保証の否認に関してのみ、参照により本ライセンスに含まれるものとみなされる。これらの保証免責条項が持つその他の含意は無効であり、本ライセンスの意味に影響を及ぼさない。</p></div>
<div class="paragraph">
<div class="title">2. 原文通りの複製</div><p>本ライセンス、著作権表示、および本ライセンスが文書に適用される旨のライセンス通知を全ての複製物に再現し、かつ本ライセンスの条件以外に一切の条件を追加しないことを条件として、いかなる媒体においても、商業的または非商業的に、文書を複製および頒布することができます。  作成または配布する複製物の閲覧やさらなる複製を妨害・制御する技術的手段を使用してはならない。ただし、複製物と引き換えに報酬を受け取ること自体は認められる。十分な数の複製物を配布する場合は、第3項の条件も遵守しなければならない。</p></div>
<div class="paragraph">
<p>また、上記と同じ条件で複製物を貸与したり、複製物を公に展示したりすることもできます。</p></div>
<div class="paragraph">
<div class="title">3. 大量複製</div><p>文書を印刷物（または通常印刷された表紙を持つ媒体）で100部以上出版する場合、かつ文書のライセンス通知が表紙テキストを要求する場合、以下のすべての表紙テキストを明瞭かつ可読な状態で記載した表紙で複製物を包まねばならない：表紙テキストを表紙に、裏表紙テキストを裏表紙に記載すること。  両表紙には、これらの複製物の発行者としてあなたを明確かつ可読に識別する表示が必要です。表紙には完全なタイトルを、タイトルの全語句が均等に目立ち可視となるように提示しなければなりません。表紙には追加の素材を加えることもできます。表紙への変更が、文書のタイトルを保持しこれらの条件を満たす限り、その他の点では逐語的複製として扱われます。</p></div>
<div class="paragraph">
<p>いずれかの表紙に必要な記載事項が過多で判読不能となる場合、
最初に列挙された事項（合理的に収まる範囲で）を実際の表紙に配置し、
残りを隣接ページに継続して記載すること。</p></div>
<div class="paragraph">
<p>100部を超える不透明コピーを出版または配布する場合、各不透明コピーに機械可読の透明コピーを同梱するか、各不透明コピーに下記いずれかの情報を記載・添付しなければなりません：
・一般ネットワーク利用者が公的標準ネットワークプロトコルを用いて追加素材なしの完全な透明コピーをダウンロード可能な、コンピュータネットワーク上の場所
後者の方法を選択する場合、不透明なコピーを大量に配布し始める際には、
当該透明なコピーが、
その版の不透明なコピーを（直接または代理店・小売業者を通じて）
最後に一般に配布してから少なくとも1年間は、
指定された場所でアクセス可能な状態を維持するよう、
合理的に慎重な措置を講じなければなりません。</p></div>
<div class="paragraph">
<p>大量のコピーを再配布する前に、
文書著者に事前に連絡し、
更新版を提供する機会を与えることが望ましいが、
必須ではない。</p></div>
<div class="paragraph">
<div class="title">4. 改変</div><p>文書を改変した改変版を、上記第2条および第3条の条件に従って複製・配布することができます。ただし、改変版を本ライセンスと全く同じ条件で公開し、改変版が「文書」の役割を果たすようにしなければなりません。これにより、改変版の所有者は改変版の配布および改変をライセンスされます。さらに、改変版では以下のことを行わなければなりません：</p></div>
<div class="olist upperalpha"><ol class="upperalpha">
<li>
<p>
タイトルページ（および表紙がある場合は表紙）には、
文書そのもののタイトルや過去のバージョン（存在する場合、
文書の「履歴」セクションに記載されるべきもの）とは異なる
タイトルを使用すること。
過去のバージョンと同じタイトルを使用する場合は、
そのバージョンの元の出版者が許可を与えた場合に限り可能とする。</p>
</li>
<li>
<p>
改変版における変更の著作者として、1人以上の個人または団体を著者としてタイトルページに記載すること。ただし、文書（その主要な著作者が5人未満の場合は全員）の主要な著作者少なくとも5人も併記すること。ただし、彼らがこの要件を免除する場合を除く。</p>
</li>
<li>
<p>
改変版の発行者として、その発行者の名称をタイトルページに記載すること。</p>
</li>
<li>
<p>
文書のすべての著作権表示を保持すること。</p>
</li>
<li>
<p>
他の著作権表示に隣接して、あなたの改変に対する適切な著作権表示を追加すること。</p>
</li>
<li>
<p>
著作権表示の直後に、以下の付録に示す形式で、
本ライセンスの条件下で修正版を使用することを公衆に許可する
ライセンス表示を含めること。</p>
</li>
<li>
<p>
そのライセンス表示において、文書内のライセンス表示に記載された不変セクションおよび必須カバーテキストの完全なリストを保持すること。</p>
</li>
<li>
<p>
本ライセンスの改変されていない写しを含めること。</p>
</li>
<li>
<p>
「歴史」と題されたセクションを保持し、そのタイトルを保持し、
   そこに少なくとも改変版のタイトル、年、新たな著者、
   表紙に記載された出版者を記載した項目を追加すること。  もし
   文書に「履歴」と題されたセクションが存在しない場合は、
   タイトルページに記載された文書のタイトル、年、著者、出版者を記載したセクションを作成し、
   その後、前文で述べた修正版を説明する項目を追加すること。</p>
</li>
<li>
<p>
文書内で公開アクセス可能な透明なコピーのネットワーク場所が記載されている場合はこれを保持し、同様に、その元となった以前のバージョンのネットワーク場所も保持する。これらは「履歴」セクションに記載してもよい。
   当該文書より少なくとも4年前に公開された著作物、または参照元の版元の許可を得た場合、ネットワーク場所の記載は省略可能。</p>
</li>
<li>
<p>
「謝辞」または「献辞」と題されたセクションについては、
そのセクションのタイトルを保持し、
そのセクション内に記載された各貢献者への謝辞および／または献辞の
内容と文体をすべて保持すること。</p>
</li>
<li>
<p>
文書の不変セクションは全て、
   テキストとタイトルを変更せずに保持すること。
   セクション番号または同等のものはセクションタイトルの一部とはみなされない。</p>
</li>
<li>
<p>
「推薦文」と題されたセクションは削除すること。
   改変版に含めることはできない。</p>
</li>
<li>
<p>
既存のセクションを「推奨」と改題したり、
不変セクションとタイトルが競合する形で改題したりしてはならない。</p>
</li>
<li>
<p>
保証の免責事項はすべて保持すること。</p>
</li>
</ol></div>
<div class="paragraph">
<p>改変版に二次的セクションに該当する新たな前書きセクションや付録が含まれ、かつそれらのセクションに文書から複製された内容が含まれない場合、任意でそれらのセクションの一部または全部を不変セクションとして指定できます。これを行うには、改変版のライセンス通知にある不変セクションのリストにそれらのタイトルを追加してください。これらのタイトルは他のセクションタイトルと区別できるものでなければなりません。</p></div>
<div class="paragraph">
<p>「推薦文」と題するセクションを追加できます。ただし、このセクションには、様々な団体による改変版への推薦文のみを含めること。例えば、査読の声明や、本文が標準の権威ある定義として組織によって承認された旨の声明などです。</p></div>
<div class="paragraph">
<p>改変版における表紙テキスト一覧の末尾に、最大5語の「表紙テキスト」と最大25語の「裏表紙テキスト」を追加できます。同一の主体（またはその主体による取り決め）が追加できる表紙テキストと裏表紙テキストは、それぞれ1つずつに限られます。  文書に既に同じ表紙用の表紙テキストが含まれている場合（以前にあなた自身、またはあなたが代理を務める同一の主体による取り決めで追加されたもの）、別のものを追加することはできません。ただし、以前の出版者（古いものを追加した者）からの明示的な許可を得て、古いものを置き換えることは可能です。</p></div>
<div class="paragraph">
<p>本ライセンスにより、文書の著者及び出版者は、いかなる改変版に対する宣伝目的での氏名使用、または改変版への支持を明示もしくは暗示する行為を許可するものではありません。</p></div>
<div class="paragraph">
<div class="title">5. 文書の結合</div><p>本ライセンスに基づき公開された他の文書と本文書を組み合わせることができます。ただし、組み合わせた作品には、すべての元の文書の不変セクションを、変更を加えずにそのまま含め、それらをすべて組み合わせた作品のライセンス通知において不変セクションとして列挙し、かつそれらの保証免責事項をすべて保持しなければなりません。</p></div>
<div class="paragraph">
<p>結合作品には本ライセンスの写しを1部のみ含める必要があり、
同一の不変セクションが複数存在する場合は単一の写しに置き換えてもよい。
同一名称だが内容が異なる不変セクションが複数存在する場合は、
各セクションのタイトルを以下のように一意に識別すること：
そのセクションの元の著者または出版者（判明している場合）の名称を括弧内に付記するか、
一意の番号を付記する。
結合作品のライセンス通知に記載される不変セクション一覧のセクションタイトルについても、同様の調整を行ってください。</p></div>
<div class="paragraph">
<p>結合時には、各原著作物内の「歴史」と題されたセクションを全て統合し、単一の「歴史」セクションを形成すること。同様に「謝辞」と題されたセクション、および「献辞」と題されたセクションも統合すること。「推薦文」と題されたセクションは全て削除すること。</p></div>
<div class="paragraph">
<div class="title">6. 文書コレクション</div><p>本ライセンスに基づき公開された文書と他の文書からなるコレクションを作成し、
各文書内の個別の本ライセンスのコピーを、コレクションに含める単一のコピーで
置き換えることができます。ただし、その他のすべての点において、
各文書の逐語的複製に関する本ライセンスの規則に従うことを条件とします。</p></div>
<div class="paragraph">
<p>そのようなコレクションから単一の文書を抽出し、
本ライセンスに基づき個別に配布することができます。
ただし、抽出した文書に本ライセンスの写しを挿入し、
その文書の逐語的複製に関して本ライセンスの他のすべての規定を
遵守することを条件とします。</p></div>
<div class="paragraph">
<div class="title">7. 独立した著作物との集合体</div><p>文書またはその派生作品と、他の独立した文書または作品を、記憶媒体または配布媒体の1巻内に、またはその上に、編集したものは、その編集によって生じる著作権が、個々の作品が許容する範囲を超えて編集物の利用者の法的権利を制限するために使用されない場合、「集合体」と呼ばれます。
文書が集合物に含まれる場合、このライセンスは、
文書自体の派生著作物ではない集合物内の他の著作物には適用されない。</p></div>
<div class="paragraph">
<p>第3条のカバーテキスト要件が当該文書の複製に適用される場合、文書が集合体全体の半分未満であるときは、文書のカバーテキストを集合体内で文書を囲むカバー（文書が電子形式の場合は電子的カバーに相当するもの）に記載できる。それ以外の場合は、集合体全体を囲む印刷されたカバーに記載しなければならない。</p></div>
<div class="paragraph">
<div class="title">8. 翻訳</div><p>翻訳は一種の改変とみなされるため、第4節の条件に基づき文書の翻訳を配布できる。
不変セクションを翻訳で置き換えるには、その著作権者からの特別な許可が必要だが、
不変セクションのオリジナル版に加えて、一部または全ての不変セクションの翻訳を含めることは可能である。  本ライセンスの翻訳、文書内の全てのライセンス通知、保証免責事項を含めることは可能ですが、その場合、本ライセンスの英語原文版およびそれらの通知・免責事項の原文版も併せて含める必要があります。翻訳版と本ライセンス・通知・免責事項の原文版との間に矛盾がある場合、原文版が優先されます。</p></div>
<div class="paragraph">
<p>文書内のセクションが「謝辞」「献辞」「沿革」と題されている場合、そのタイトル（第1条）を保持する要件（第4条）は通常、実際のタイトルを変更することを要求する。</p></div>
<div class="paragraph">
<div class="title">9. 終了</div><p>本ライセンスで明示的に認められる場合を除き、
文書を複製、改変、サブライセンス供与、または頒布してはならない。
それ以外の複製、改変、サブライセンス供与、頒布の試みは無効であり、
本ライセンスに基づくあなたの権利は自動的に終了する。</p></div>
<div class="paragraph">
<p>ただし、本ライセンス違反を全て中止した場合、特定の著作権者からのライセンスは(a)著作権者が明示的かつ最終的にライセンスを終了させない限り暫定的に、(b)中止後60日以内に著作権者が合理的な手段で違反を通知しなかった場合には恒久的に、回復される。</p></div>
<div class="paragraph">
<p>さらに、特定の著作権者からのあなたのライセンスは、
著作権者が合理的な手段で違反を通知した場合、
かつ、その著作権者から（いかなる著作物についても）
本ライセンス違反の通知を初めて受けた場合、
かつ、通知受領後30日以内に違反を是正した場合、
恒久的に回復される。</p></div>
<div class="paragraph">
<p>本条項に基づくあなたの権利の終了は、本ライセンスに基づきあなたから複製物または権利を受領した当事者のライセンスを終了させるものではない。あなたの権利が終了し、かつ恒久的に回復されていない場合、同一の素材の一部または全部の複製物を受領しても、それを使用する権利は一切付与されない。</p></div>
<div class="paragraph">
<div class="title">10. 本ライセンスの将来の改訂</div><p>フリーソフトウェア財団は随時、GNUフリードキュメンテーションライセンスの新規改訂版を公開することがあります。そのような新バージョンは、精神的には現行版と同様ですが、新たな問題や懸念に対処するため細部が異なる場合があります。詳細は<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/ をご覧ください。</a></p></div>
<div class="paragraph">
<p>各ライセンス版には識別用のバージョン番号が付与されます。
文書が本ライセンスの特定番号版「またはそれ以降の版」の適用を指定する場合、
指定版かフリーソフトウェア財団が（草案としてではなく）公表した
いずれかの後続版のいずれかの条件に従う選択肢があります。  文書が本ライセンスのバージョン番号を指定していない場合、
フリーソフトウェア財団が公表した（草案としてではなく）
いかなるバージョンでも選択できます。
文書が将来のライセンスバージョンの使用を
代理人が決定できると規定している場合、
その代理人が公表したバージョン受諾声明により、
文書に対してそのバージョンを選択する権限が
恒久的に付与されます。</p></div>
<div class="paragraph">
<div class="title">11. 再ライセンス</div><p>「大規模多作者共同サイト」（または「MMCサイト」）とは、著作権対象作品を公開し、かつ誰でもそれらの作品を編集できる顕著な機能を提供するワールドワイドウェブサーバーを意味する。誰でも編集可能な公開ウィキはそのようなサーバーの一例である。
当該サイトに含まれる「大規模マルチオーサー共同作業」（または「MMC」）とは、MMCサイト上でこのように公開された著作権対象作品の集合体を意味します。</p></div>
<div class="paragraph">
<p>「CC-BY-SA」とは、カリフォルニア州サンフランシスコに主たる事業所を置く非営利法人であるクリエイティブ・コモンズ・コーポレーションが公表したクリエイティブ・コモンズ表示-継承 3.0 ライセンス、および同組織が公表する同ライセンスの将来のコピーレフト版を意味する。</p></div>
<div class="paragraph">
<p>「組み込む」とは、文書の一部または全部を別の文書の一部として公開または再公開することを意味する。</p></div>
<div class="paragraph">
<p>MMCが「再ライセンス対象」となるのは、本ライセンスに基づきライセンスされ、かつ本MMC以外の場所で本ライセンスに基づき最初に公開され、その後MMCに全体または一部が組み込まれた全ての著作物が、(1) カバーテキストや不変セクションを持たず、かつ(2) 2008年11月1日より前に組み込まれた場合である。</p></div>
<div class="paragraph">
<p>MMCサイトの運営者は、当該サイトに含まれるMMCが再ライセンス対象である場合に限り、2009年8月1日以前に、同一サイト上でCC-BY-SAに基づき当該MMCを再公開することができる。</p></div>
</div>
</div>

<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
バージョン 9.0.8<br>
最終更新日
2025年8月5日(火) 16:04:45 CEST</div>
</div>
